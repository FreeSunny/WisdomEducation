{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./new_src/assets/cursors/cursor.svg","webpack://[name]/./new_src/assets/cursors/element-eraser.svg","webpack://[name]/./new_src/assets/cursors/pen.svg","webpack://[name]/./new_src/assets/image/imageIsLoading.svg","webpack://[name]/./new_src/component/toast/index.ts","webpack://[name]/./new_src/component/toast/toast-ctrl.ts","webpack://[name]/./new_src/component/toast/toast.less?4a22","webpack://[name]/./new_src/component/toast/toast.ts","webpack://[name]/./new_src/core/animation/index.ts","webpack://[name]/./new_src/core/board/actions.ts","webpack://[name]/./new_src/core/board/index.ts","webpack://[name]/./new_src/core/camera/index.ts","webpack://[name]/./new_src/core/camera/vision.ts","webpack://[name]/./new_src/core/config.ts","webpack://[name]/./new_src/core/container/index.ts","webpack://[name]/./new_src/core/dataHub/index.ts","webpack://[name]/./new_src/core/index.ts","webpack://[name]/./new_src/core/media/util.ts","webpack://[name]/./new_src/core/misc/dispatcher.ts","webpack://[name]/./new_src/core/misc/dom-events.ts","webpack://[name]/./new_src/core/misc/drawCurve.ts","webpack://[name]/./new_src/core/misc/shapeHelper.ts","webpack://[name]/./new_src/core/misc/text.ts","webpack://[name]/./new_src/core/misc/util.ts","webpack://[name]/./new_src/core/ops/BoardOp/index.ts","webpack://[name]/./new_src/core/ops/CameraOp/CameraBoundOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/FitToContent.ts","webpack://[name]/./new_src/core/ops/CameraOp/FitToDoc.ts","webpack://[name]/./new_src/core/ops/CameraOp/PanOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/ResetCameraOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/ResizeOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/ZoomOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/util.ts","webpack://[name]/./new_src/core/ops/ClearOp/index.ts","webpack://[name]/./new_src/core/ops/DrawOp/EllipseFillOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/EllipseOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/LineArrowOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/LineOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/MouseMoveDrawOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/PenArrowOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/PenOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/RectFillOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/RectOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/drawConfig.ts","webpack://[name]/./new_src/core/ops/EditOp/DeleteOp.ts","webpack://[name]/./new_src/core/ops/EditOp/DupliateOp.ts","webpack://[name]/./new_src/core/ops/EditOp/MoveOp.ts","webpack://[name]/./new_src/core/ops/EditOp/ScaleOp.ts","webpack://[name]/./new_src/core/ops/EraserOp/ElementEraserOp.ts","webpack://[name]/./new_src/core/ops/EraserOp/index.ts","webpack://[name]/./new_src/core/ops/HistoryOp/RedoOp.ts","webpack://[name]/./new_src/core/ops/HistoryOp/UndoOp.ts","webpack://[name]/./new_src/core/ops/ImageOp/BackgroundOp.ts","webpack://[name]/./new_src/core/ops/ImageOp/index.ts","webpack://[name]/./new_src/core/ops/ImageOp/util.ts","webpack://[name]/./new_src/core/ops/LaserOp/index.ts","webpack://[name]/./new_src/core/ops/LockOp/index.ts","webpack://[name]/./new_src/core/ops/MousePointerOp/index.ts","webpack://[name]/./new_src/core/ops/Operation.ts","webpack://[name]/./new_src/core/ops/OpsManager.ts","webpack://[name]/./new_src/core/ops/PageOp/index.ts","webpack://[name]/./new_src/core/ops/SelectOp/SelectBase.ts","webpack://[name]/./new_src/core/ops/SelectOp/index.ts","webpack://[name]/./new_src/core/ops/TextOp/TextToolbar.less?9e81","webpack://[name]/./new_src/core/ops/TextOp/TextToolbar.ts","webpack://[name]/./new_src/core/ops/TextOp/UIHelper.ts","webpack://[name]/./new_src/core/ops/TextOp/index.ts","webpack://[name]/./new_src/core/ops/TextOp/textConfig.ts","webpack://[name]/./new_src/core/ops/VideoOp/index.ts","webpack://[name]/./new_src/core/ops/types.ts","webpack://[name]/./new_src/core/ops/util.ts","webpack://[name]/./new_src/core/page/completeFlow.ts","webpack://[name]/./new_src/core/page/incrementFlow.ts","webpack://[name]/./new_src/core/page/index.ts","webpack://[name]/./new_src/core/page/render.ts","webpack://[name]/./new_src/core/page/util.ts","webpack://[name]/./new_src/core/player/index.ts","webpack://[name]/./new_src/core/previewFactory/index.ts","webpack://[name]/./new_src/core/resource/resourceCache.ts","webpack://[name]/./new_src/core/room/actions.ts","webpack://[name]/./new_src/core/room/index.ts","webpack://[name]/./new_src/core/room/util.ts","webpack://[name]/./new_src/core/simulator/index.ts","webpack://[name]/./new_src/core/types.ts","webpack://[name]/./new_src/recordPlayer/TickTick.ts","webpack://[name]/./new_src/recordPlayer/Timeline.ts","webpack://[name]/./new_src/recordPlayer/ToolUI.less?7363","webpack://[name]/./new_src/recordPlayer/ToolUI.tsx","webpack://[name]/./new_src/recordPlayer/Track/Record.ts","webpack://[name]/./new_src/recordPlayer/Track/Track.ts","webpack://[name]/./new_src/recordPlayer/Track/VideoTrack.ts","webpack://[name]/./new_src/recordPlayer/Track/Wb_V1V2.ts","webpack://[name]/./new_src/recordPlayer/Track/Wb_V3.ts","webpack://[name]/./new_src/recordPlayer/Track/WhiteboardTrack.ts","webpack://[name]/./new_src/recordPlayer/assets/pause.svg","webpack://[name]/./new_src/recordPlayer/assets/play.svg","webpack://[name]/./new_src/recordPlayer/index.ts","webpack://[name]/./new_src/recordPlayer/utils.ts","webpack://[name]/./new_src/util/validate.ts","webpack://[name]/./node_modules/babel-runtime/core-js/array/from.js","webpack://[name]/./node_modules/babel-runtime/core-js/get-iterator.js","webpack://[name]/./node_modules/babel-runtime/core-js/is-iterable.js","webpack://[name]/./node_modules/babel-runtime/core-js/json/stringify.js","webpack://[name]/./node_modules/babel-runtime/core-js/map.js","webpack://[name]/./node_modules/babel-runtime/core-js/number/is-integer.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/assign.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/create.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/define-properties.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/define-property.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/keys.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack://[name]/./node_modules/babel-runtime/core-js/promise.js","webpack://[name]/./node_modules/babel-runtime/core-js/set.js","webpack://[name]/./node_modules/babel-runtime/core-js/symbol.js","webpack://[name]/./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack://[name]/./node_modules/babel-runtime/helpers/classCallCheck.js","webpack://[name]/./node_modules/babel-runtime/helpers/createClass.js","webpack://[name]/./node_modules/babel-runtime/helpers/inherits.js","webpack://[name]/./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack://[name]/./node_modules/babel-runtime/helpers/slicedToArray.js","webpack://[name]/./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack://[name]/./node_modules/babel-runtime/helpers/typeof.js","webpack://[name]/./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime-module.js","webpack://[name]/./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime.js","webpack://[name]/./node_modules/babel-runtime/regenerator/index.js","webpack://[name]/./node_modules/core-js/library/fn/array/from.js","webpack://[name]/./node_modules/core-js/library/fn/get-iterator.js","webpack://[name]/./node_modules/core-js/library/fn/is-iterable.js","webpack://[name]/./node_modules/core-js/library/fn/json/stringify.js","webpack://[name]/./node_modules/core-js/library/fn/map.js","webpack://[name]/./node_modules/core-js/library/fn/number/is-integer.js","webpack://[name]/./node_modules/core-js/library/fn/object/assign.js","webpack://[name]/./node_modules/core-js/library/fn/object/create.js","webpack://[name]/./node_modules/core-js/library/fn/object/define-properties.js","webpack://[name]/./node_modules/core-js/library/fn/object/define-property.js","webpack://[name]/./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack://[name]/./node_modules/core-js/library/fn/object/keys.js","webpack://[name]/./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack://[name]/./node_modules/core-js/library/fn/promise.js","webpack://[name]/./node_modules/core-js/library/fn/set.js","webpack://[name]/./node_modules/core-js/library/fn/symbol/index.js","webpack://[name]/./node_modules/core-js/library/fn/symbol/iterator.js","webpack://[name]/./node_modules/core-js/library/modules/_a-function.js","webpack://[name]/./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack://[name]/./node_modules/core-js/library/modules/_an-instance.js","webpack://[name]/./node_modules/core-js/library/modules/_an-object.js","webpack://[name]/./node_modules/core-js/library/modules/_array-from-iterable.js","webpack://[name]/./node_modules/core-js/library/modules/_array-includes.js","webpack://[name]/./node_modules/core-js/library/modules/_array-methods.js","webpack://[name]/./node_modules/core-js/library/modules/_array-species-constructor.js","webpack://[name]/./node_modules/core-js/library/modules/_array-species-create.js","webpack://[name]/./node_modules/core-js/library/modules/_classof.js","webpack://[name]/./node_modules/core-js/library/modules/_cof.js","webpack://[name]/./node_modules/core-js/library/modules/_collection-strong.js","webpack://[name]/./node_modules/core-js/library/modules/_collection-to-json.js","webpack://[name]/./node_modules/core-js/library/modules/_collection.js","webpack://[name]/./node_modules/core-js/library/modules/_core.js","webpack://[name]/./node_modules/core-js/library/modules/_create-property.js","webpack://[name]/./node_modules/core-js/library/modules/_ctx.js","webpack://[name]/./node_modules/core-js/library/modules/_defined.js","webpack://[name]/./node_modules/core-js/library/modules/_descriptors.js","webpack://[name]/./node_modules/core-js/library/modules/_dom-create.js","webpack://[name]/./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack://[name]/./node_modules/core-js/library/modules/_enum-keys.js","webpack://[name]/./node_modules/core-js/library/modules/_export.js","webpack://[name]/./node_modules/core-js/library/modules/_fails.js","webpack://[name]/./node_modules/core-js/library/modules/_for-of.js","webpack://[name]/./node_modules/core-js/library/modules/_global.js","webpack://[name]/./node_modules/core-js/library/modules/_has.js","webpack://[name]/./node_modules/core-js/library/modules/_hide.js","webpack://[name]/./node_modules/core-js/library/modules/_html.js","webpack://[name]/./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack://[name]/./node_modules/core-js/library/modules/_invoke.js","webpack://[name]/./node_modules/core-js/library/modules/_iobject.js","webpack://[name]/./node_modules/core-js/library/modules/_is-array-iter.js","webpack://[name]/./node_modules/core-js/library/modules/_is-array.js","webpack://[name]/./node_modules/core-js/library/modules/_is-integer.js","webpack://[name]/./node_modules/core-js/library/modules/_is-object.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-call.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-create.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-define.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-detect.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-step.js","webpack://[name]/./node_modules/core-js/library/modules/_iterators.js","webpack://[name]/./node_modules/core-js/library/modules/_library.js","webpack://[name]/./node_modules/core-js/library/modules/_meta.js","webpack://[name]/./node_modules/core-js/library/modules/_microtask.js","webpack://[name]/./node_modules/core-js/library/modules/_new-promise-capability.js","webpack://[name]/./node_modules/core-js/library/modules/_object-assign.js","webpack://[name]/./node_modules/core-js/library/modules/_object-create.js","webpack://[name]/./node_modules/core-js/library/modules/_object-dp.js","webpack://[name]/./node_modules/core-js/library/modules/_object-dps.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gopd.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gopn.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gops.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gpo.js","webpack://[name]/./node_modules/core-js/library/modules/_object-keys-internal.js","webpack://[name]/./node_modules/core-js/library/modules/_object-keys.js","webpack://[name]/./node_modules/core-js/library/modules/_object-pie.js","webpack://[name]/./node_modules/core-js/library/modules/_object-sap.js","webpack://[name]/./node_modules/core-js/library/modules/_perform.js","webpack://[name]/./node_modules/core-js/library/modules/_promise-resolve.js","webpack://[name]/./node_modules/core-js/library/modules/_property-desc.js","webpack://[name]/./node_modules/core-js/library/modules/_redefine-all.js","webpack://[name]/./node_modules/core-js/library/modules/_redefine.js","webpack://[name]/./node_modules/core-js/library/modules/_set-collection-from.js","webpack://[name]/./node_modules/core-js/library/modules/_set-collection-of.js","webpack://[name]/./node_modules/core-js/library/modules/_set-proto.js","webpack://[name]/./node_modules/core-js/library/modules/_set-species.js","webpack://[name]/./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack://[name]/./node_modules/core-js/library/modules/_shared-key.js","webpack://[name]/./node_modules/core-js/library/modules/_shared.js","webpack://[name]/./node_modules/core-js/library/modules/_species-constructor.js","webpack://[name]/./node_modules/core-js/library/modules/_string-at.js","webpack://[name]/./node_modules/core-js/library/modules/_task.js","webpack://[name]/./node_modules/core-js/library/modules/_to-absolute-index.js","webpack://[name]/./node_modules/core-js/library/modules/_to-integer.js","webpack://[name]/./node_modules/core-js/library/modules/_to-iobject.js","webpack://[name]/./node_modules/core-js/library/modules/_to-length.js","webpack://[name]/./node_modules/core-js/library/modules/_to-object.js","webpack://[name]/./node_modules/core-js/library/modules/_to-primitive.js","webpack://[name]/./node_modules/core-js/library/modules/_uid.js","webpack://[name]/./node_modules/core-js/library/modules/_user-agent.js","webpack://[name]/./node_modules/core-js/library/modules/_validate-collection.js","webpack://[name]/./node_modules/core-js/library/modules/_wks-define.js","webpack://[name]/./node_modules/core-js/library/modules/_wks-ext.js","webpack://[name]/./node_modules/core-js/library/modules/_wks.js","webpack://[name]/./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack://[name]/./node_modules/core-js/library/modules/core.get-iterator.js","webpack://[name]/./node_modules/core-js/library/modules/core.is-iterable.js","webpack://[name]/./node_modules/core-js/library/modules/es6.array.from.js","webpack://[name]/./node_modules/core-js/library/modules/es6.array.iterator.js","webpack://[name]/./node_modules/core-js/library/modules/es6.map.js","webpack://[name]/./node_modules/core-js/library/modules/es6.number.is-integer.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.assign.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.create.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.define-properties.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.define-property.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.keys.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack://[name]/./node_modules/core-js/library/modules/es6.promise.js","webpack://[name]/./node_modules/core-js/library/modules/es6.set.js","webpack://[name]/./node_modules/core-js/library/modules/es6.string.iterator.js","webpack://[name]/./node_modules/core-js/library/modules/es6.symbol.js","webpack://[name]/./node_modules/core-js/library/modules/es7.map.from.js","webpack://[name]/./node_modules/core-js/library/modules/es7.map.of.js","webpack://[name]/./node_modules/core-js/library/modules/es7.map.to-json.js","webpack://[name]/./node_modules/core-js/library/modules/es7.promise.finally.js","webpack://[name]/./node_modules/core-js/library/modules/es7.promise.try.js","webpack://[name]/./node_modules/core-js/library/modules/es7.set.from.js","webpack://[name]/./node_modules/core-js/library/modules/es7.set.of.js","webpack://[name]/./node_modules/core-js/library/modules/es7.set.to-json.js","webpack://[name]/./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack://[name]/./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack://[name]/./node_modules/core-js/library/modules/web.dom.iterable.js","webpack://[name]/./new_src/component/toast/toast.less","webpack://[name]/./new_src/core/ops/TextOp/TextToolbar.less","webpack://[name]/./new_src/recordPlayer/ToolUI.less","webpack://[name]/./node_modules/css-loader/dist/runtime/api.js","webpack://[name]/./node_modules/debug/src/browser.js","webpack://[name]/./node_modules/debug/src/common.js","webpack://[name]/./node_modules/debug/src/index.js","webpack://[name]/./node_modules/debug/src/node.js","webpack://[name]/./node_modules/eventemitter3/umd/eventemitter3.min.js","webpack://[name]/./node_modules/inherits/inherits_browser.js","webpack://[name]/./node_modules/is-base64/is-base64.js","webpack://[name]/./node_modules/lodash.clonedeep/index.js","webpack://[name]/./node_modules/ms/index.js","webpack://[name]/./node_modules/pako/dist/pako.min.js","webpack://[name]/./node_modules/preact/dist/preact.min.js","webpack://[name]/./node_modules/process/browser.js","webpack://[name]/./node_modules/style-loader/lib/addStyles.js","webpack://[name]/./node_modules/style-loader/lib/urls.js","webpack://[name]/./node_modules/supports-color/browser.js","webpack://[name]/./node_modules/tapable/lib/AsyncParallelBailHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncParallelHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncSeriesBailHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncSeriesHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncSeriesWaterfallHook.js","webpack://[name]/./node_modules/tapable/lib/Hook.js","webpack://[name]/./node_modules/tapable/lib/HookCodeFactory.js","webpack://[name]/./node_modules/tapable/lib/HookMap.js","webpack://[name]/./node_modules/tapable/lib/MultiHook.js","webpack://[name]/./node_modules/tapable/lib/SyncBailHook.js","webpack://[name]/./node_modules/tapable/lib/SyncHook.js","webpack://[name]/./node_modules/tapable/lib/SyncLoopHook.js","webpack://[name]/./node_modules/tapable/lib/SyncWaterfallHook.js","webpack://[name]/./node_modules/tapable/lib/Tapable.js","webpack://[name]/./node_modules/tapable/lib/index.js","webpack://[name]/./node_modules/tty-browserify/index.js","webpack://[name]/./node_modules/util/support/isBufferBrowser.js","webpack://[name]/./node_modules/util/util.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/index.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/md5.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/nil.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/parse.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/regex.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/rng.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/sha1.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v1.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v3.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v35.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v4.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v5.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/validate.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/version.js","webpack://[name]/(webpack)/buildin/global.js","webpack://[name]/(webpack)/buildin/module.js","webpack://[name]/./src/core/ActionManager.ts","webpack://[name]/./src/core/ActionUtils.old.ts","webpack://[name]/./src/core/ActionUtils.ts","webpack://[name]/./src/core/Actions/index.ts","webpack://[name]/./src/core/DrawWorker/CanvasHelper.ts","webpack://[name]/./src/core/DrawWorker/ContainerManager.ts","webpack://[name]/./src/core/DrawWorker/ShapesManger.ts","webpack://[name]/./src/core/DrawWorker/UserManager.ts","webpack://[name]/./src/core/DrawWorker/index.ts","webpack://[name]/./src/core/Itypes.ts","webpack://[name]/./src/core/Model/GlobalHub.ts","webpack://[name]/./src/core/Model/Point.ts","webpack://[name]/./src/core/Model/Shape.ts","webpack://[name]/./src/core/Model/User.ts","webpack://[name]/./src/core/adapterDraw.ts","webpack://[name]/./src/core/index.ts","webpack://[name]/./src/core/utils.ts","webpack://[name]/./src/core/validator.ts","webpack://[name]/./src/debug.ts","webpack://[name]/./src/simulator.ts"],"names":["showToast","option","msg","time","type","top","param","message","constructor","String","ToastCtrl","show","hideToast","hide","timer","_instance","Toast","inOptions","createInstance","clearTimeout","setTimeout","destroy","toastDiv","document","createElement","className","onclick","bind","body","appendChild","style","display","color","backgroundColor","borderColor","innerHTML","removeChild","transitionToCameraBound","camera","boundary","callback","end","start","centerX","centerY","width","height","total","app","isRecordPlayer","animate","worker","curr","percent","setCameraBound","opt","cancelAnimationFrame","step","requestAnimationFrame","addPage","board","insertAfter","snapshot","opsManager","hooks","prePageChange","call","pages","currIndex","cleanNonCanvasElements","newPageIndex","Page","boardName","toString","category","setPayload","data","payload","undefined","pageNames","length","splice","room","isReceivingBatchSnapshots","calcDrawOpQueue","pageToRefresh","pageChange","gotoPage","index","hasOwnProperty","Error","Number","deletePage","LOG","console","error","indexInPageNames","indexOf","nextPageIndex","Board","displayName","dispatch","dispatcher","action","page","addOpHook","map","name","Camera","defaultCameraBound","scale","cameraBoundByUser","translateX","translateY","on","updateTransParamAndRefresh","rect","container","el","getBoundingClientRect","w","h","convertToPointInWorld","sx","sy","ex","ey","opts","mx","my","dom","transform","_a","_b","_c","convertDom","backgroundEl","imageEl","domEl","textAreaEl","currBoard","currPage","previewFactory","resizeElements","ctx","translate","DPI","canvas","getTransParam","_roundBoundary","getCameraBoundPan","getCameraBoundZoom","getCameraBoundReset","getCameraBoundFitToContent","getCameraBoundFitToDoc","getCameraBoundResize","toFixed","cx","cy","dx","dy","getContainerWorldRectByCameraBound","center","backgroundOp","backgroundSnapshot","drawOpQueue","Math","min","max","key","scaleX","scaleY","horizontalPadding","verticalPadding","padding","disableAutoResize","zoomFactor","_width","_height","cameraWidth","cameraHeight","cameraWhRatio","convertDomAndRefresh","emit","Vision","mode","isBroadcasting","broadcaster","value","nickname","broadcasterNickname","dataHub","isSynchronizing","account","setMode","setBroadcaster","broadcastRoomState","getContainerWorldRect","broadcasterName","lastVisionData","lastObserveModeOfAccount","DEFAULT_FONTSIZE","AppConfig","setAppConfig","partialConfig","config","canvas_bg_color","setBackgroundColor","getAppConfig","showCursorNickname","showSelectNickname","showLaserNickname","cameraTransformEnabled","window","devicePixelRatio","log","TIMER_THRESHOLD","MOVE_THRESHOLD","Container","elInitW","elInitH","isLandscape","elesToResize","left","keyPressed","maybeClick","mouseEventCache","isMouseDown","lastMx","lastMy","lastClientX","lastClientY","_resize","event","containerRect","ifDeviceSupportOrientation","ele","HTMLCanvasElement","setElePosition","lineCap","lineJoin","frontCtx","laserCtx","resize","unbindEvents","_ro","disconnect","removeEventListener","_mousedown","_mouseleave","_mousemove","_mouseup","_mousewheel","_keyup","_keydown","_contextmenu","getEventClientPos","clientX","clientY","MouseEvent","touches","preventDefault","push","args","mouseEmitTimer","_emitMouseEvents","mousemove","mouseup","click","mouseleave","mousewheel","toLocaleLowerCase","keyup","keydown","position","setupDivElement","temp","setupCanvasElement","frontCanvas","laserCanvas","appConfig","_bindEvents","div","parentNode","transformOrigin","pointerEvents","getContext","parentContainer","MutationObserver","mutationList","observer","observe","attributes","attributeFilter","addEventListener","right","bottom","eventArg","MINIMUM_BROADCAST_GAP_PER_DATATYPE","overwritableTypes","ResendSyncRequestInterval","ResendSyncRequestLimit","DataHub","handler","debounceData","clientIdToData","lastContinueServerPkgId","serverPkgSinceLast","lastPkgIdToSync","dataOfSync","_scheduleNextBroadcast","debounceDataEntry","dataType","now","Date","valueOf","_doBroadcastData","mergeDebouncedData","dataQueue","params","strategy","client_pkg_id","broadcastData","_setupResendSyncRequestTimer","currRetryCount","resendSyncRequestTimer","sendSyncRequest","bindEvents","onData","onBroadcastAck","onSendRequestAck","onSendRequestResponse","server_pkg_id","_updateServerPkgInfo","execSnapshot","pkgId","vision","receiveBroadcaster","execBatchSnapshots","_","last_server_pkg_id","_updateAppAfterSync","start_server_pkg_id","end_server_pkg_id","packages","Array","isArray","pkg","warn","cacheSnapshot","forEach","includes","opId","client_id","nextLocalFakeId","editable","_getDataToSync","broadcasterData","i","snapshotData","receiveBroadcasterAfterSync","hasBoundary","hasBackground","fitToContent","seqIds","sort","a","b","JSON","parse","id","filter","arr","lastServerPkgId","inUseClientIds","App","editEnabled","showCursor","isConnected","platform","cameraBound","nim","simulator","Simulator","configInstance","Dispatcher","OpsManager","extendDefaultOps","connector","Room","addOpsManager","addContainer","PreviewFactory","player","Player","setContainer","drawConfig","strokeWidth","opacity","strokeColor","opMap","getCount","isAvailable","isFocus","getSelectedIds","appendTo","cursor","connected","reset","validate","url","isRequire","allowMime","dataURL","pageIndex","docName","count","boards","startsWith","addBoard","setPageBackground","toolName","fontsize","fontFace","fontFamily","textConfig","setFontFamily","setFontFace","updateFontFamily","setStrokeColor","setStrokeWidth","setOpacity","enableDrawChange","enable","valid","builtInIndex","getPageBuiltInIndex","isNaN","currPageIndex","getCurrPageIndex","pageCount","slice","activeIndex","pagePayloads","payloadOfPages","boardNames","currBoardDisplayName","boardDisplayNames","getBoardDisplayNames","bindPreviewContainer","events","fn","off","getOpDoc","currOp","records","addRecordData","seekTo","viewer","setViewer","setSelfAsBroadcaster","unsetSelfAsBroadcaster","setSelfAsFollower","setSelfAsFreeObserver","generatePreviewToDataUrl","state","href","pageName","download","userList","TouchPlatformArray","toLowerCase","DrawPlugin","getInstance","enum","PlatformArray","drawPlugin","imageDimension","AcceptTypesArr","imageInput","onload","visibility","accept","onchange","ev","fileInput","target","file","files","size","nameParts","split","suffix","isValidType","join","uploadAndAddImage","dimensions","previewFile","beginupload","done","err","res","addImage","popupImageChooserAndAddImage","eventDict","eventNames","removeAllListeners","EventEmitter","cb","drawCurve","points","k","beginPath","moveTo","lineTo","lastP","currP","ctrlPtInLastSeg","abs","ctrlPtInSeg1","ctrlPtInSeg2","quadraticCurveTo","distSqrt","dist","rectCollide","pointCollideWithPoint","pointCollideWithLine","pointInRect","getTransformedBoundary","getTransformedPoint","combineBoundary","getBoundaryBoxFromTwoPoints","p1","p2","sqrt","rect1","rect2","point","another","r","sp","ep","factor","coordinate","x","y","b1","b2","ARROW_TIP_X_OFFSET","ARROW_WINGS_X_OFFSET","getArrowPoints","lastTwoPoints","tipXOffset","wingsXOffset","lineCoef","getLineCoef","arrowTipX","getXFromCoefAndOffset","arrowTipY","getLineFromPointsY","arrowWing1X","arrowWing1Y","getVerticalLineY","arrowWing2X","arrowWing2Y","refPoint","z","pow","referencePoint","coef","testFontSizeText","text","num","MAX_FONT_SIZE","MIN_FONT_SIZE","printTextInMultiLine","context","lineHeight","textArr","currentLine","str","fillText","numbers","reduce","n1","n2","BoardOp","arguments","description","boardChange","tap","onBoardChange","goto","information","add","delete","Operation","convertToCameraBoundSnapshot","getNextCameraBound","MAX_ALLOWED_WIDTH","skipUndo","reuseOpType","CameraBoundOp","sendCameraBound","FitToContentOp","exec","getSnapshot","FitToDocOp","PanOp","activate","enableCameraTransform","isTargetOnContainer","lastPoint","beginBatch","ResetCameraOp","ResizeCameraOp","handleResize","FACTOR","UPPER_BOUND","LOWER_BOUND","ZoomOp","handleMouseWheel","zoomIn","zoomOut","zoomTo","deltaY","destScaleNum","shouldDispatch","ClearOp","drawOpsOfPage","refresh","onRefresh","available","EllipseFillOp","inProgress","getTwoPointShapeCommonProperty","strokeOrFill","EllipseOp","shouldSaniteEp","radiusX","radiusY","ellipse","PI","stroke","fill","lineWidth","baseOp","fillStyle","isPointInPath","MouseMoveDrawOp","LineArrowOp","withArrow","arrowPoints","save","getStartEndPointFromSnapshot","strokeStyle","globalAlpha","restore","LineOp","getBoundaryRectOfLine","isPointInStroke","movedDuringMouseDown","sampleSeq","handlePageChange","require","obj","getBoundaryRectOfFreeDraw","sanityEp","PenArrowOp","lastPointX","lastPointY","currOpId","getOpId","opIdSnapshotMap","getFreeDrawCommonProperty","boundaryRect","pointsPerBatch","_draw","PenOp","transformedPoints","p","partial","_mergePartial","ptrDiff","startIndex","concat","RectFillOp","RectOp","DrawConfig","DeleteOp","handleKeyDown","execCommand","selectedOpIds","deleteOpIds","dependOn","transformOp","newData","hidden","COPY_PASTE_SHIFT","DuplicateOp","copiedSnapshotArray","isKeyDown","snapshotsToCopy","newOpIds","duplicates","dup","selectOp","snapshotFromKeyboardCopy","getNextOpId","MoveOp","idsBeenMoved","mousedown","handleMouseDown","handleMouseMove","handleMouseUp","SelectOp","mouseInSelectedEleBoundary","inProgressSelectedOpIds","idsUnderMouse","idsBeenSelected","mouseInProgressSelectedBoundary","mouseInSelectedBoundary","eleContainerPadding","op","moveOpSnapshot","SCALE_TEST_RADIUS","KeepRatioSnapshotTypes","ScaleOp","coordinateX","coordinateY","boundaryW","boundaryH","idsBeenScaled","mouseInfo","mousePosTest","cursorSuggestion","scaleInfo","radius","snaps","factorX","factorY","scroll","scaleList","thisScaleX","thisScaleY","baseScaleX","baseScaleY","totalScaleX","totalScaleY","initX","initY","baseFactor","fontSize","ElementEraserOp","lastSelectedOpIds","postClick","getSelectionSnapshot","SelectBase","EraserOp","eraserColor","setWidth","setColor","globalCompositeOperation","arc","drawEraserSignpost","RedoOp","idsCouldRedo","onOpAdded","snapshotOutOfNormalFlowTypes","redoOpId","opOfPage","opsOfPage","UndoOp","idsCouldUndo","undoOpId","opAlreadyBeenUndo","opShouldBeSkiped","has","BackgroundOp","getBoundaryFromSnapshot","imgWidth","imgHeight","dispatchImage","dispatchFromPage","supportToDataUrl","preview","ImageOp","initWidth","initHeight","image","querySelector","img","addWaitingResource","removeWaitingResource","draw","cloneNode","userSelect","imageRendering","pxOverBorder","getImagePartOutOfContainer","clipPath","drawImage","screenBound","getImageProperPosition","sanityWidth","sanityHeight","MAX_ALLOWED_HEIGHT","getBackgroundImagePorperPosition","LaserOp","opChange","handleOpChange","newType","shadowColor","shadowBlur","uid","px","py","bgColor","LockOp","lockOps","unlockOps","opIds","locked","penImg","Image","elementEraserImg","cursorImg","src","penUrl","elementEraserUrl","cursorUrl","MousePointerOp","handleMouseLeave","inContainer","c","getImageByOpType","mapPointInsideContainer","drawOpTypes","cursorSize","worldSx","worldSy","worldEx","worldEy","opType","lastGlobalOpId","lastSnapshotInfo","timestamp","newOpFlag","genNewOpId","gen","registerHooks","newId","globalSnapshotTypes","dispatchGlobalAction","dispatchPageAction","dispatchBoardAction","prepareNewOpId","opQueue","SyncBailHook","SyncHook","selectChange","pageReady","extendOp","extendDrawOp","TextOp","PageOp","VideoOp","setCurrOp","OpConstructor","eventsToListen","isOpSet","afterActivate","strArr","_getOpDoc","info","cameraSnapshotTypes","bailed","currOpIsCamera","handleClick","handleKeyUp","mergePartial","partial1","partial2","resetCount","onPageChange","postMouseMove","postMouseUp","isHover","fillColor","eleContainerColor","eleContainerWidth","setLineWidth","setFillColor","setEleContainerColor","setEleContainerWidth","setEleContainerPadding","blurAt","drawSelectBox","boundaryArr","drawSelectedElementBox","textPadding","strokeRect","fillRect","dotSize","ids","ID","TextToolbar","fonts","colors","fontInputPrevValue","colorCells","colorPlatteOpen","toolbarContainer","colorBtn","innerText","colorDot","colorPlatteContainer","onmousemove","stopPropagation","colorCell","isWhite","border","fontInput","fontIncBtn","incText","fontDecBtn","decText","_registerEvents","_stopPropagation","setFontsize","getElementById","updatePosition","round","firstChild","setColorPlatteState","open","func","fontSizeCb","colorCb","_sendFontChangeCommand","setFontSizeByInput","blurAfterSet","fontSizeStr","textType","blur","onkeydown","onblur","oninput","replace","onmousedown","ontouchstart","createElements","setElementsStyle","setElementsSize","drawTextSnapshot","clearTextArea","MIN_WIDTH","PADDING","DEFAULT_LINEHEIGHT","textArea","pre","textAreaContainer","outline","overflow","background","getFontFamily","boxSizing","margin","clientWidth","clientHeight","textBeforeEdit","isNewText","handleTextAreaChange","endsWith","handleTextAreaBlur","textFocusAtPage","_handleTextAreaBlur","opIdToDraw","registerToolbar","toolbar","handlePrePageChange","handleClickExistText","handleSelectChange","handleEnableDrawChange","setFontSize","currSelectTextId","getOpTypeByOpId","_handleSelectTextOp","preSelectedOpIds","preSelectTextId","lastSnapshotData","lastSnapshot","detectIfClickOnText","tempPre","getIdPrefix","focus","getBoundaryRect","workingPre","ptsInWord","snapshotIsEditing","preId","drawSnapshot","paddingScale","font","textAlign","textBaseline","onFontSizeChange","onColorChange","textOpSnapshot","txts","getElementsByTagName","pres","opIdForseen","CustomFontName","DefaultFontName","ValidTypes","TextConfig","fontFaceSet","appendFontFaceStyle","format","fontName","fontFaceStr","newStyle","setAttribute","createTextNode","head","addVideo","video","videoWidth","videoHeight","dispatchVideo","controls","controlsList","playsInline","disablePictureInPicture","convertWorldPointInContainer","findOpsUnderRect","drawOps","mouseBoundary","snapshotSelectable","findOpsUnderMouse","ifMouseOnOp","nonSelectableOpTypes","idsChanged","currIds","lastIds","arrayDeduce","roundRect","closePath","drawUserName","rectMarginBottom","rectHeight","textFillColor","textWidth","measureText","missOpSet","hiddenOpQueue","separateNormalQueue","normalQueue","abNormalQueue","noHistOpQueue","removeHistoryOpQueue","noClearQueue","removeClearOpQueue","simpleQueue","removeDuplicateOpQueue","handleAbNormalQueue","handleNormalQueue","filterSelectedOpIds","lastInProgressSelectOfUser","lastSelectOfUser","lastMousePointerOfUser","opQueueMap","dependOnIdArr","dependOpId","removeInprogressSnapshotIfBeenDepended","drawOp","getDrawOpFromSnapshotQueue","setSelectedOpIds","inProgressSelectOfCurrUser","setInProgressSelectedOpIds","histSnapshotId","dependOnIds","lastInProgressSnapshotOfUser","addIncrementSnapshot","addTextSnapshot","addSnapshotAndDrawOnlyIt","dependOnId","setInprogressSnapshot","pageToIncRefresh","beginAt","blockedResourceList","_currOpId","_nextOpId","nextOpInc","resUrl","blocked","isCurrPage","doRefresh","includeBackground","boardOps","inPageSnapshotIds","videos","clearRect","convertCanvas","convertPreviewCanvas","drawMousePointer","keys","k1","k2","drawInProgressSnapshots","snapshots","sp1","sp2","userId","trasformOp","opNeedRefresh","isIncrementOp","getSelectedOpIds","currSelect","nextRecordIndex","lastTime","offsetBegin","resetState","_lastTime","Infinity","forward","endIndex","record","recordsToEmit","snapshotsToEmit","observeModeData","receiveObserveModeAfterSync","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","reject","fulfilled","next","e","rejected","result","then","apply","previewContainerMap","task","isLoopBusy","onPageReady","setupExportToImgContainer","keepPrevContainer","newKeys","previewContainerSettings","getContainerKey","oldKeys","previewTasks","setupPreviewElements","canvasContainer","set","addPreviewTask","getPage","toDataURL","values","invalidatePreview","taskList","get","taskArray","reverse","taskIndexOfSamePage","getTaskIndexOfPage","taskInfo","unshift","startLoop","canvasContainerArr","getElementsByClassName","shiftNextReadyTask","delay","generatePreview","ms","resourceCache","videoResourceCache","crossOriginResourceCache","resourceReadyListeners","retryCount","RETRY_LIMIT","fetchResource","crossOrigin","setResourceLoadedCallback","fetchVideoResource","isVideo","resource","onloadedmetadata","onerror","resourceLoaded","complete","getResource","videoResourceLoaded","getVideoResource","loadingUrl","fitToContentTimer","addGlobalOp","refreshPreviewsOfCurrBoard","addOpInRoom","gotoBoard","deleteBoard","selectBoardIndex","nextBoardIndex","pkgIdOpIdMap","boardsSnapshotIds","globalSnapshotIds","_startRefreshLoop2","refreshAnimationTimer","incRefresh","_init","boundaries","hasBoardAction","lastBoundaryData","refreshPreviewsOfCurrPage","isCameraSnapshot","fakeServerId","sendSnapshot","_pkg","recoverFullSnapshot","pushSnapshotToQueue","addOpInPage","addOpInBoard","_pkgArr","pkgArr","allInPage","boundaryData","nonCameraPkg","needRefresh","endReceiveBatchSnapshots","beginReceiveBatchSnapshots","oldPkgId","_pushSnapshotInArray","pageSnapshotIds","pkgIdInArr","dataArr","entry","mergeTwoPartial","whiteboard","_startRefreshLoop","getCameraBoundFromGlobalOp","_lastDirection","_interruptFreeDraw","rebuildSocket","resetApp","_simulateReconnect","readyToSyncData","repeat","intervalBtwPoints","intervalBtwLines","_generateRandomLines","_generateRandomLines2","offsetWidth","offsetHeight","random","dispatchEvent","promise","_simulateMouseMove","lastXY","catch","_getDxDy","RANDOM_BASE","TURN_AFTER","floor","DEFAULT_INTERVAL","TickTick","currTimeStamp","lastRealTime","rate","microTask","tick","pause","passedGap","clearInterval","setInterval","timeStamp","Timeline","tracks","ticker","endTimeStamp","busy","handleTrackVisibleChange","update","all","track","every","_doPause","initTrack","bindTickerEvents","minTimestamp","getMinTimeStamp","readyQueue","getInitQueue","badTracks","t","list","getMaxTimeStamp","bindTrackEvents","viewerArr","beginTimeStamp","duration","handleTrackWaitingToPlay","handleTrackCanPlay","hasTrackWaiting","_doPlay","find","isWaiting","speed","setPlaySpeed","setCurrentTime","play","destory","POSITIVE_INFINITY","maxTimestamp","NEGATIVE_INFINITY","offsetEnd","isIPhone","test","navigator","userAgent","pPipeline","init","mount","isPhone","ToolUI","props","toolUIEl","onMouseMove","getCurrentXAndTime","currentX","currentTime","labelText","setState","labelLeft","pauseOrPlay","paused","onMouseDown","role","getAttribute","showLabel","drag","onMouseUp","hidePosition","handleClickSpeed","speedOptionShow","handleClickSpeedOption","showPosition","updator","current","search","fullWidth","renderTimeline","widthPercent","React","ref","onClick","onMouseEnter","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","backgroundClip","renderPlayOrPause","backgroundImage","PLAY_BASE_64","PAUSE_BASE_64","timeline","currSpeed","speedText","speedArr","timeDuration","durationStr","durationHour","currentStr","renderSpeed","Component","Nothing","root","unmount","ActionUtilsOld","ActionUtils","Record","isCompatible","actions","unpackBulk","clearIndex","isClearFrame","updateIndex","ret","curIndex","TYPE","WActions","CLEAR","StateRelatedActions","getStateRelatedActions","Track","showTrack","showTrackCb","hideTrackCb","_awaitTrackHandler","hideTrack","jumpTo","doSetTrack","once","VTrack","waitingForData","videoRef","oncanplay","onwaiting","pipe","setSpecialCheck","preload","onloadeddata","setVideoTime","findVideoRefInContainer","playbackRate","specialCheck","children","len","tagName","__asyncValues","o","asyncIterator","TypeError","m","__values","verb","n","v","settle","d","V1V2Track","drawManager","fetchData","dataList","optimizeOldRecordList","needSkipFirstCleanFrame","findIndexBeyondTime","recordsToExecute","mangleRecords","clear","clearImage","clearHtmlFile","executeActions","WorkerManager","version","WTrack","lastColor","lastTool","leng","curRecord","j","CALIBRATE","START","CalibrateAction","tool","LASER_PEN","LASER_PEN_END","offsetBeing","lastClearFrameIndex","recordToClean","toStateRelatedRecord","recordsToExecute_1","recordsToExecute_1_1","e_1","return","V3Track","Connector","drawPluginParams","fetchMultiData","listOfDataList","accountSet","_seekTo","recordListToPlay","cid","currCid","urlArray","originalParams","blob","getRawRecordFromBlob","rawRecordsList","blobArray","endAt","listOfRawRecordList","rawDataByChannel","mergeRawDataByChannel","isChannelOverlapping","reader","FileReader","readAsBinaryString","rawBuffer","pako","ungzip","dv","DataView","buffer","byteLength","cLen","getInt32","contentLen","offset","subb","rawDataByCid","rawData","oldRawData","listSortByBeginAt","first","second","formatTimeOffset","toLocaleString","RecordPlayer","v3TrackFileObjs","videoTracks","fileObj","whiteboardTracks","wbTrack","_visibleChangeCallHandler","rej","whiteboardParams","urlArr","videoParams","DEV","parseUrl","ab2str","RECORD_FILE","match","parseInt","chunk","lastIndexOfDot","lastIndexOf","getID","textDecoder","TextEncoder","TextDecoder","buf","decode","fileReader","readAsText","Blob","Uint8Array","fetchBlob","xhr","XMLHttpRequest","responseType","response","send","p0","getTime","showHour","minute","hour","isUndefined","isDOM","HTMLElement","nodeType","nodeName","isValidString","Object","prototype","isBoolean","isFunction","isNumber","isValidArray","isValidHexColor","isObject","isValidObject","ruleObj","validateErrors","rule","dataValue","exports","formatArgs","load","useColors","storage","localstorage","process","__nwjs","documentElement","WebkitAppearance","firebug","exception","table","RegExp","$1","namespace","module","humanize","diff","lastC","debug","namespaces","setItem","removeItem","getItem","env","DEBUG","localStorage","formatters","setup","createDebug","default","coerce","disable","enabled","instances","names","skips","selectColor","hash","charCodeAt","prevTime","self","prev","formatter","val","logFn","extend","delimiter","newDebug","substr","instance","toNamespace","regexp","substring","stack","browser","tty","util","supportsColor","stderr","level","inspectOpts","prop","toUpperCase","Boolean","isatty","fd","colorCode","prefix","getDate","hideDate","toISOString","write","inspect","O","Hook","HookCodeFactory","AsyncParallelBailHookCodeFactory","onError","onResult","onDone","code","options","taps","callTapsParallel","doneBreak","onTap","run","factory","AsyncParallelBailHook","create","_call","configurable","writable","AsyncParallelHookCodeFactory","AsyncParallelHook","AsyncSeriesBailHookCodeFactory","resultReturns","callTapsSeries","AsyncSeriesBailHook","AsyncSeriesHookCodeFactory","AsyncSeriesHook","AsyncSeriesWaterfallHookCodeFactory","_args","AsyncSeriesWaterfallHook","interceptors","_promise","callAsync","_callAsync","_x","compile","_runRegisterInterceptors","_insert","interceptor","register","newOptions","mergeOptions","_withOptions","base","_withOptionsBase","newHook","tapAsync","tapPromise","_resetCompilation","item","before","stage","xStage","createCompileDelegate","lazyCompileHook","_createCall","Function","header","content","rethrowIfPossible","after","errorHelperUsed","deinit","needContext","getInterceptor","tapIndex","hasTapCached","getTap","getTapFn","cbCode","doneReturns","firstAsync","findIndex","somethingReturns","unroll","skipDone","callTap","syncOnly","loop","allArgs","idx","HookMap","_map","_factory","_interceptors","hook","for","MultiHook","isUsed","intercept","withOptions","SyncBailHookCodeFactory","SyncHookCodeFactory","SyncLoopHookCodeFactory","callTapsLooping","SyncLoopHook","SyncWaterfallHookCodeFactory","SyncWaterfallHook","Tapable","_pluginCompat","ch","tapOpt","async","addCompatLayer","plugin","deprecate","__esModule","SyncManager","broadcastAction","anyAction","FILE","fileAction","isSameDoc","fileData","docId","setFileData","pushQueue","dataQue","lastDataMap","shadowUsers","doNotSendBefore","logger","syncmanager","delayBase","toAccount","dataStr","packBulk","datas","gzipStr","flush","delayIndex","ClearAckAction","SyncPrepareAction","SyncPrepareAckAction","doTag","gziped","gzip","to","kiloBytes","begin","SyncRequestAction","SyncAction","msTime","dq","globalHub","GZIP_TESTER_1","pack","unpack","formatColor","hex2rgb","anyActions","isP2P","assert","ops","tmp","shift","actionIndex","valueStr","command","StartAction","MoveAction","EndAction","LaserPenAction","LaserPenEndAction","RevokeAction","SerialAction","ClearAction","FileAction","currentPage","fullCaseChecker","alpha","red","green","blue","fromString","MOVE","END","REVOKE","SERIAL","CLEAR_ACK","SYNC_REQUEST","SYNC","SYNC_PREPARE","SYNC_PREPARE_ACK","REDO","RedoAction","TEXT","TextAction","VERSION","VersionAction","encodeNumber","decodeNumber","parseFloat","stringify","unstringify","originStr","IAction","pis","accounts","sync","fileType","urlStr","h5Cmd","fileA","fileB","gatherFile","PROPS","valueOld","propName","valueNext","USER_PROPS","ver","setLineStyle","setpixelated","setCavansStyleSize","setCanvasPropSize","applyCanvasLayout","clearCtx","free","line","circle","cvs","skip","paddingLeft","paddingTop","control","xRadius","yRadius","safeColorClamp","s","shape","getImageData","fullDisplayHeight","fullDisplayWidth","X","Y","g","shapeImageData","createImageData","shapeData","Uint32Array","startColor","rgb","r_start","g_start","b_start","alpha_start","R_MIN","G_MIN","B_MIN","R_MAX","G_MAX","B_MAX","queue","curPixel","maxX","maxY","canFill","seen","topLeft","Coord","bottomRight","getImageDataIndex","getColor","pop","reachLeft","reachRight","imgDataIndex","finalArea","areaSize","corner","putImageData","smallImageData","strokeText","applyState","CanvasHelper","ContainerManager","canvasRatio","onResize","waiting","containerWidth","containerHeight","calcCanvasLayout","updateCanvasStyleSize","canvasWidth","canvasHeight","identity","prevHeight","prevWidth","ownerCanvasHeight","ownerCanvasWidth","updateCanvasPropSize","onUndo","displayCtx","shapes","users","fullRender","user","onRedo","inputDom","buildInputDom","inited","shapesmanager","clearListener","containermanager","remove","initEssential","displayCanvas","maskCanvas","adjustSize","ratio","containerRatio","heightGap","widthGap","displayStyle","trim","cssText","maskCtx","maskStyle","resizeCanvas","widthScale","heightScale","currentAccount","playCanvas","targetCtx","visibles","autofocus","zIndex","shapeOrUser","opreation","ShapesManager","recycle","transh","UserManager","_usernameger","newWidth","newHeight","maxUserHistory","userKeys","userMap","User","others","toSnapshot","calibrate","getCalibrateAction","LOADING_IMAGE","DrawWorker","handleInputDomBlur","localUser","pointStr","prevEnd","Point","renderText","emitAction","originalEvent","changedTouches","ctrlKey","shiftKey","altKey","which","realX","realY","wrap","addUser","afterInit","timmer","isEnable","switchEventListener","clearFlag","setCursor","cursorType","canvasList","addOrRemove","validTool","getUser","dispatchCalibrateAction","flagPos","renderFlag","ext","userKeyDown","keyDown","newWhich","_afterKeyChange","userCtx","isFlag","whenMouseDown","clone","mouse","lastStateAccount","Shape","pushShape","whenMouseMove","activeShape","some","shiftKeyTool","updateCorner","freeMove","textActionText","oldMid","mid","middle","prevOldMid","copy","shapeCtx","endCoord","getCanvasCoord","iptWidth","iptHeight","verticalAlign","needMoveUserCtxData","expandCorner","freeEnd","moveUserShapeToDisplay","inputDomValue","getOwnerCoord","imgData","dataBytes","antiAlais","shapeWidth","ceil","shapeHeight","clearTransparentPix","imageSmoothingEnabled","pos","posCoord","undo","redo","tmpUrl","backgroundUrl","classList","backgroundSize","force","quiet","uidToRemove","clearShapes","actionData","hasUser","userOptions","_removeUser","uids","shapeSnapshotOption","ownerWidth","ownerHeight","transhShapes","isInTrash","actionStr","optimized","imageData","actionsLenth","restoreShape","toCoord","coordinateOffset","getStartAndEnd","startAction","endAction","startOffset","endOffset","minus","needClearPix","calculateRadius","xOffset","yOffset","cornerRadius","textAction","styleId","insertAdjacentHTML","WB_MODE","WB_TOOL","EM","POINT_MATCHER","performance","timing","navigationStart","visible","shapeCanvas","userCanvas","coordWidth","coordHeight","path","detail","getCoord","toPoint","ownerCoord","startCoord","UID","undoCount","_resetCalibrate","configActiveShape","emitUserShape","redoLength","undoLength","avaliableUndoCount","adapterLog","AdapterDraw","onInited","onAction","onInstantAction","adapter","act","enableDraw","useTool","removeUser","INVALID","setSize","utils","__await","__asyncGenerator","q","resume","fulfill","f","logData","fileTypeMap","toKB","gzipedSize","syncManager","afterSync","syncState","flushInCommingQueue","syncBegin","syncRequest","ownerAccount","onIframeMessage","h5","currentFile","anim","trigger","isBack","drawAdapter","incommingQueue","actionProcessing","sendData","fileMap","eventHub","connectorStatus","execute","qactions","qid","qtype","alreadyInMessageQueue","minimal","match1","fullText","incomming","_gzipArr","curLen","unzipedText","queueIndex","vipActionIndex","vipAction","handleSyncAction","actions_1","actions_1_1","makeClearAck","syncTo","syncAction","syncResponse","immuteUpdate","fileDataNext","fileNext","handleFile","pagedHtmlFile","setHtmlFile","e_2","flushQueue","doneLen","forceWaiting","flushQueue_1","flushQueue_1_1","dirty","e_3","e_4","e_5","rawSnapshot","usersRaw","shapeQueue","shapeGen","containerManager","lastSleepTime","currentUserDefaultState","prevActionProcessing","_d","_e","users_1","users_1_1","_f","_g","guessMyUndoCount","userSnapshot","notCurrentUser","declareCalibrate","actAccount","iframe","scrolling","frameBorder","insertBefore","contentWindow","contentDocument","readyState","postMessage","direction","pageNum","transType","that","getFile","success","_image","makeSyncPrepare","makeSyncRequest","makeSyncPrepareAck","selfCalibrateAction","getSelfCalibrate","updateCursor","removeOtherUsers","getKiloBytes","sign","colorNumber","red$","green$","blue$","sleep","isStandardCursor","isStandardMode","isValidTool","modeArr","noop","package","note","shapemanager","usermanager","times"],"mappings":"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AgB;;AAE7F;AACA;AACA,CAAC;AACD;AACA,E;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,cAAc;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,2FAAW;;AAEpC;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA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mBAAO,CAAC,gEAAS;AAC/B,eAAe,mBAAO,CAAC,8FAAwB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,6BAA6B;AAC7B,0BAA0B;AAC1B,0BAA0B;AAC1B,qBAAqB;AACrB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,8EAA8E,OAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qBAAqB;AACrB,0BAA0B;AAC1B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;;;;;;;;;;;AC/IA;AACA,cAAc,mBAAO,CAAC,sEAAY;AAClC,WAAW,mBAAO,CAAC,8FAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACRa;AACb,aAAa,mBAAO,CAAC,oEAAW;AAChC,cAAc,mBAAO,CAAC,oEAAW;AACjC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,YAAY,mBAAO,CAAC,kEAAU;AAC9B,WAAW,mBAAO,CAAC,gEAAS;AAC5B,kBAAkB,mBAAO,CAAC,gFAAiB;AAC3C,YAAY,mBAAO,CAAC,oEAAW;AAC/B,iBAAiB,mBAAO,CAAC,8EAAgB;AACzC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;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;ACpEA,eAAe,mBAAO,CAAC,8DAAQ;AAC/B;;AAEA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA,iCAAiC,SAAS,EAAE;AAC5C,CAAC,YAAY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS,qBAAqB;AAC3D,iCAAiC,aAAa;AAC9C;AACA,GAAG,YAAY;AACf;AACA;;;;;;;;;;;;ACrBA;AACA,UAAU;AACV;;;;;;;;;;;;ACFA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA,WAAW,mBAAO,CAAC,8DAAQ;AAC3B,eAAe,mBAAO,CAAC,0EAAc;AACrC,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,cAAc,mBAAO,CAAC,0EAAc;AACpC;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,kEAAU;AAChC,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpDA,aAAa,mBAAO,CAAC,oEAAW;AAChC,gBAAgB,mBAAO,CAAC,gEAAS;AACjC;AACA;AACA;AACA,aAAa,mBAAO,CAAC,8DAAQ;;AAE7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA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AC,0EAAc;AACrC,gBAAgB,mBAAO,CAAC,4EAAe;AACvC,iBAAiB,mBAAO,CAAC,8EAAgB;AACzC,YAAY,mBAAO,CAAC,oEAAW;AAC/B,yBAAyB,mBAAO,CAAC,8FAAwB;AACzD,WAAW,mBAAO,CAAC,gEAAS;AAC5B,gBAAgB,mBAAO,CAAC,0EAAc;AACtC,iCAAiC,mBAAO,CAAC,oGAA2B;AACpE,cAAc,mBAAO,CAAC,sEAAY;AAClC,gBAAgB,mBAAO,CAAC,4EAAe;AACvC,qBAAqB,mBAAO,CAAC,sFAAoB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C,EAAE,mBAAO,CAAC,8DAAQ;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA,uBAAuB,mBAAO,CAAC,gFAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,oBAAoB;AAC9E,mBAAO,CAAC,0FAAsB;AAC9B,mBAAO,CAAC,8EAAgB;AACxB,UAAU,mBAAO,CAAC,gEAAS;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gDAAgD,mBAAO,CAAC,8EAAgB;AACxE;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;AC7RY;AACb,aAAa,mBAAO,CAAC,0FAAsB;AAC3C,eAAe,mBAAO,CAAC,8FAAwB;AAC/C;;AAEA;AACA,iBAAiB,mBAAO,CAAC,4EAAe;AACxC,yBAAyB,mEAAmE;AAC5F,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACbY;AACb,UAAU,mBAAO,CAAC,0EAAc;;AAEhC;AACA,mBAAO,CAAC,8EAAgB;AACxB,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,UAAU;AACV,CAAC;;;;;;;;;;;;;AChBY;AACb;AACA,aAAa,mBAAO,CAAC,oEAAW;AAChC,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,kBAAkB,mBAAO,CAAC,8EAAgB;AAC1C,cAAc,mBAAO,CAAC,oEAAW;AACjC,eAAe,mBAAO,CAAC,wEAAa;AACpC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,aAAa,mBAAO,CAAC,kEAAU;AAC/B,aAAa,mBAAO,CAAC,oEAAW;AAChC,qBAAqB,mBAAO,CAAC,0FAAsB;AACnD,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,aAAa,mBAAO,CAAC,sEAAY;AACjC,gBAAgB,mBAAO,CAAC,4EAAe;AACvC,eAAe,mBAAO,CAAC,0EAAc;AACrC,cAAc,mBAAO,CAAC,wEAAa;AACnC,eAAe,mBAAO,CAAC,0EAAc;AACrC,eAAe,mBAAO,CAAC,0EAAc;AACrC,eAAe,mBAAO,CAAC,0EAAc;AACrC,gBAAgB,mBAAO,CAAC,4EAAe;AACvC,kBAAkB,mBAAO,CAAC,gFAAiB;AAC3C,iBAAiB,mBAAO,CAAC,kFAAkB;AAC3C,cAAc,mBAAO,CAAC,kFAAkB;AACxC,cAAc,mBAAO,CAAC,sFAAoB;AAC1C,YAAY,mBAAO,CAAC,8EAAgB;AACpC,YAAY,mBAAO,CAAC,8EAAgB;AACpC,UAAU,mBAAO,CAAC,0EAAc;AAChC,YAAY,mBAAO,CAAC,8EAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE,mBAAO,CAAC,8EAAgB;AAC1B,EAAE,mBAAO,CAAC,4EAAe;AACzB;;AAEA,sBAAsB,mBAAO,CAAC,sEAAY;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,8CAA8C,YAAY,EAAE;;AAE5D;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,oCAAoC,mBAAO,CAAC,gEAAS;AACrD;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrPA;AACA,mBAAO,CAAC,8FAAwB;;;;;;;;;;;;ACDhC;AACA,mBAAO,CAAC,0FAAsB;;;;;;;;;;;;ACD9B;AACA,cAAc,mBAAO,CAAC,oEAAW;;AAEjC,uCAAuC,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AACA;;AAEA;AACA;AACA;;AAEA,oCAAoC,EAAE,qBAAqB,EAAE,kBAAkB,EAAE;AACjF,qDAAqD;;AAErD;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,kCAAkC,EAAE,qBAAqB,EAAE,sBAAsB,EAAE;AACnF;;AAEA;AACA;;AAEA,MAAM,IAA8B;AACpC,QAAQ,KAA6B;AACrC;AACA;AACA;AACA,GAAG,MAAM,EAMN;AACH,CAAC;;;;;;;;;;;;AC5CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,KAA0B;;AAE5C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,WAAW,OAAO,WAAW;AAC7B,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA,wBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,WAAW;AAC7B,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,EAAE;AACf;AACA;AACA;AACA,mBAAmB,SAAS,GAAG,SAAS;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,iBAAiB;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA,6BAA6B,kBAAkB,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACntDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACjKA,aAAa,2EAA2E,2DAA2D,KAAK,mHAAmH,YAAY,yBAAyB,gBAAgB,UAAU,UAAU,0CAA0C,wBAAwB,oBAAoB,8CAA8C,kCAAkC,YAAY,YAAY,mCAAmC,wBAAwB,sBAAsB,oBAAoB,kDAAkD,WAAW,YAAY,SAAS,EAAE,mBAAmB,aAAa,iKAAiK,cAAc,wCAAwC,uBAAuB,2EAA2E,MAAM,EAAE,mBAAmB,uMAAuM,oFAAoF,+BAA+B,kEAAkE,MAAM,wNAAwN,mBAAmB,gBAAgB,eAAe,4CAA4C,gBAAgB,+BAA+B,6CAA6C,uBAAuB,+KAA+K,GAAG,4IAA4I,2LAA2L,8CAA8C,mHAAmH,gCAAgC,oBAAoB,+BAA+B,+JAA+J,oDA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CL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,uDAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA,KAAK,KAAwC,EAAE,EAE7C;;AAEF,QAAQ,sBAAiB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA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AAuB3jC,mBAAOA,CAAC,kEAAR,CAAvB;AACAg5B,QAAQgG,iBAAR,GAA4Bh/B,mBAAOA,CAAC,4EAAR,CAA5B;AACAg5B,QAAQ0F,qBAAR,GAAgC1+B,mBAAOA,CAAC,oFAAR,CAAhC;AACAg5B,QAAQsG,eAAR,GAA0Bt/B,mBAAOA,CAAC,wEAAR,CAA1B;AACAg5B,QAAQoG,mBAAR,GAA8Bp/B,mBAAOA,CAAC,gFAAR,CAA9B;AACAg5B,QAAQyG,wBAAR,GAAmCz/B,mBAAOA,CAAC,0FAAR,CAAnC;AACAg5B,QAAQ6J,OAAR,GAAkB7iC,mBAAOA,CAAC,wDAAR,CAAlB;AACAg5B,QAAQmK,SAAR,GAAoBnjC,mBAAOA,CAAC,4DAAR,CAApB,C;;;;;;;;;;;AClBA,8BAA8B,cAAc;;AAE5C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,uBAAuB,SAAS;AAChC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C,KAAK;;AAEjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,mBAAO,CAAC,0EAAoB;;AAE/C;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,SAAS;AACpB;AACA,mBAAmB,mBAAO,CAAC,6DAAU;;AAErC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kCAAkC;AAC7D,2BAA2B,mDAAmD;AAC9E;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9rBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACA;AACA;AACA;AACE;AACQ;AACE;AACE;;;;;;;;;;;;;ACPtD;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,aAAa;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEe,kEAAG,E;;;;;;;;;;;;ACtNlB;AAAe,qGAAsC,E;;;;;;;;;;;;ACArD;AAAA;AAAqC;;AAErC;AACA,OAAO,4DAAQ;AACf;AACA;;AAEA;AACA,+BAA+B;;AAE/B;AACA;AACA;AACA,oBAAoB;;AAEpB;AACA,oBAAoB;;AAEpB;AACA,oBAAoB;;AAEpB;AACA,oBAAoB;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,oEAAK,E;;;;;;;;;;;;AClCpB;AAAe,6EAAc,EAAE,UAAU,EAAE,eAAe,EAAE,gBAAgB,EAAE,UAAU,GAAG,yCAAyC,E;;;;;;;;;;;;ACApI;AAAA;AAAA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;AClBA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,QAAQ;AAC1B;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;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","file":"RecordPlayer_v3.1.2_test.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RecordPlayer\"] = factory();\n\telse\n\t\troot[\"RecordPlayer\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MzA2MTkyNDQ5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwOTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU2IDBsNjEyLjY1MDY2NyA1NzMuODI0LTI1MC4yODI2NjcgMjIuNzQxMzMzLTQ1LjQ0IDQuMDk2IDE4LjkwMTMzMyA0MS41NTczMzMgMTUxLjg1MDY2NyAzMzIuNTQ0TDYzMS42OCAxMDI0bC0xNDQuODk2LTMzNi4xMjgtMTguMTc2LTQyLjM2OC0zMy41Nzg2NjcgMzEuNTMwNjY3LTE3Ny43OTIgMTY2Ljc0MTMzM0wyNTYgMCIgcC1pZD0iMjA5NyI+PC9wYXRoPjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMTIiIHk9IjEuNDQyMjkiIHdpZHRoPSI4LjM4OTY3IiBoZWlnaHQ9IjE0LjY4MTkiIHJ4PSIxIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSAxMiAxLjQ0MjI5KSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxLjIiLz4KPHBhdGggZD0iTTQuNTg0NSA4Ljg1Nzc5TDEwLjUxNjkgMTQuNzkwMiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxLjIiLz4KPHBhdGggZD0iTTQuMjI0NjQgMTcuNjgxOEgxNS43NjA0IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEuMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+Cjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi41Mzg2IDIuNDYwMzRDMTMuMTUyNCAxLjg0NjU2IDE0LjE0NzUgMS44NDY1NSAxNC43NjEzIDIuNDYwMzRMMTcuNTM5NyA1LjIzODcxQzE4LjE1MzQgNS44NTI0OSAxOC4xNTM0IDYuODQ3NjIgMTcuNTM5NyA3LjQ2MTRMNy44MDEyMiAxNy4xOTk4QzcuNTQyMjIgMTcuNDU4OCA3LjIwMDkgMTcuNjE5MiA2LjgzNjIyIDE3LjY1MzRMMy4xODEyNyAxNy45OTUyQzIuNTA3MTMgMTguMDU4MiAxLjk0MTc2IDE3LjQ5MjkgMi4wMDQ4MSAxNi44MTg3TDIuMzQ2NjQgMTMuMTYzOEMyLjM4MDc1IDEyLjc5OTEgMi41NDExNSAxMi40NTc4IDIuODAwMTUgMTIuMTk4OEwxMi41Mzg2IDIuNDYwMzRaTTEzLjkyNzggMy4yOTM4NUMxMy43NzQzIDMuMTQwNCAxMy41MjU2IDMuMTQwNCAxMy4zNzIxIDMuMjkzODVMMy42MzM2NiAxMy4wMzIzQzMuNTY4OTEgMTMuMDk3IDMuNTI4ODEgMTMuMTgyNCAzLjUyMDI4IDEzLjI3MzVMMy4xODk0OSAxNi44MTA1TDYuNzI2NDYgMTYuNDc5N0M2LjgxNzYzIDE2LjQ3MTIgNi45MDI5NiAxNi40MzExIDYuOTY3NyAxNi4zNjYzTDE2LjcwNjIgNi42Mjc4OUMxNi44NTk2IDYuNDc0NDUgMTYuODU5NiA2LjIyNTY2IDE2LjcwNjIgNi4wNzIyMkwxMy45Mjc4IDMuMjkzODVaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjYyMjQgOS41NDUxOEwxMC40NTQ4IDUuMzc3NjJMMTEuMjg4MyA0LjU0NDExTDE1LjQ1NTkgOC43MTE2N0wxNC42MjI0IDkuNTQ1MThaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgwIiBoZWlnaHQ9IjM2MCIgdmlld0JveD0iMCAwIDQ4MCAzNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wIDBINDgwVjM2MEgwVjBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQ3OCAySDJWMzU4SDQ3OFYyWk0wIDBWMzYwSDQ4MFYwSDBaIiBmaWxsPSIjRDlEOURCIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTY2LjI5NCAxMjZIMzE1TDMxNSAxODkuMzg2TDI5NS4wNDkgMTY3LjY0QzI5MS4xNDQgMTYzLjM4NCAyODQuNDU2IDE2My4zMTEgMjgwLjQ2IDE2Ny40ODNMMjM4Ljc5MiAyMTAuOTc3TDIxOS45MTcgMTkxLjU3MkMyMTYuNzg0IDE4OC4zNTEgMjExLjYxMyAxODguMzQxIDIwOC40NjggMTkxLjU1MUwxNjcuMzM4IDIzMy41MjlIMTY2LjI5NEwxNjYuMjk0IDEyNlpNMTY2LjI5NCAyNDEuNTI5QzE2NC40NzggMjQxLjUyOSAxNjIuODAzIDI0MC45MjQgMTYxLjQ2IDIzOS45MDRIMTYxLjA5MkwxNjEuMjUyIDIzOS43NDFDMTU5LjQ0NyAyMzguMjc0IDE1OC4yOTQgMjM2LjAzNiAxNTguMjk0IDIzMy41MjlWMTI2QzE1OC4yOTQgMTIxLjU4MiAxNjEuODc2IDExOCAxNjYuMjk0IDExOEgzMTVDMzE5LjQxOCAxMTggMzIzIDEyMS41ODIgMzIzIDEyNlYyMzMuNTI5QzMyMyAyMzcuOTQ4IDMxOS40MTggMjQxLjUyOSAzMTUgMjQxLjUyOUgxNjYuMjk0Wk0yMDEgMTcxLjgwNEMyMDkuMjg0IDE3MS44MDQgMjE2IDE2NS4wODggMjE2IDE1Ni44MDRDMjE2IDE0OC41MiAyMDkuMjg0IDE0MS44MDQgMjAxIDE0MS44MDRDMTkyLjcxNiAxNDEuODA0IDE4NiAxNDguNTIgMTg2IDE1Ni44MDRDMTg2IDE2NS4wODggMTkyLjcxNiAxNzEuODA0IDIwMSAxNzEuODA0WiIgZmlsbD0iI0U2RTdFQiIvPgo8L3N2Zz4K\"","/*\n * @Author: lduoduo\n * @Date: 2018-01-27 22:09:41\n * @Last Modified by: lduoduo\n * @Last Modified time: 2018-01-27 22:16:25\n * toast 消息提示组件\n */\nimport ToastCtrl from './toast-ctrl';\n/**\n * option.msg toast内容\n * option.time 停留时间: 默认2s，设置null: 无限期显示\n * @param {*} option\n */\nexport const showToast = (option) => {\n    const { msg, time = 2, type = 'info', top = 30 } = option;\n    const param = {\n        message: msg.constructor === String ? msg : JSON.stringify(msg),\n        time,\n        type,\n        top\n    };\n    ToastCtrl.show(param);\n};\nexport const hideToast = () => {\n    ToastCtrl.hide();\n};\n","/*\n * @Author: lduoduo\n * @Date: 2018-01-26 20:12:09\n * @Last Modified by: lduoduo\n * @Last Modified time: 2018-01-27 23:06:46\n * toast控制器\n */\nimport Toast from './toast';\nlet timer;\nexport default class ToastCtrl {\n    static createInstance() {\n        this._instance = this._instance || new Toast();\n        return this._instance;\n    }\n    static show(inOptions) {\n        const { time = 3 } = inOptions;\n        if (!this._instance) {\n            this.createInstance();\n        }\n        this._instance.show(inOptions);\n        if (timer) {\n            clearTimeout(timer);\n        }\n        if (time) {\n            timer = setTimeout(() => {\n                this.hide();\n            }, time * 1000);\n        }\n    }\n    static hide() {\n        if (timer) {\n            clearTimeout(timer);\n        }\n        if (this._instance) {\n            this._instance.hide();\n        }\n    }\n    static destory() {\n        if (this._instance) {\n            this._instance.destroy();\n            this._instance = null;\n        }\n    }\n}\nToastCtrl._instance = null;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/postcss-loader/src/index.js??postcss!./toast.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/postcss-loader/src/index.js??postcss!./toast.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/postcss-loader/src/index.js??postcss!./toast.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * @Author: lduoduo\n * @Date: 2018-01-26 19:45:27\n * @Last Modified by: lduoduo\n * @Last Modified time: 2018-01-28 15:34:14\n * toast 消息提示组件\n */\nimport './toast.less';\nexport default class Toast {\n    constructor() {\n        this.toastDiv = document.createElement('div');\n        this.toastDiv.className = 'whiteboard-toast';\n        this.toastDiv.onclick = this.hide.bind(this);\n        document.body.appendChild(this.toastDiv);\n    }\n    show(inOptions) {\n        const toastDiv = this.toastDiv;\n        toastDiv.style.display = 'block';\n        if (inOptions.type === 'warn') {\n            toastDiv.style.color = '#8a6d3b';\n            toastDiv.style.backgroundColor = '#fcf8e3';\n            toastDiv.style.borderColor = '#faebcc';\n        }\n        else if (inOptions.type === 'info') {\n            toastDiv.style.color = '#31708f';\n            toastDiv.style.backgroundColor = '#d9edf7';\n            toastDiv.style.borderColor = '#bce8f1';\n        }\n        else if (inOptions.type === 'error') {\n            toastDiv.style.color = '#a94442';\n            toastDiv.style.backgroundColor = '#f2dede';\n            toastDiv.style.borderColor = '#ebccd1';\n        }\n        else {\n            toastDiv.style.color = '#3c763d';\n            toastDiv.style.backgroundColor = '#dff0d8';\n            toastDiv.style.borderColor = '#d6e9c6';\n        }\n        if (Number.isInteger(inOptions.top)) {\n            toastDiv.style.top = `${inOptions.top}px`;\n        }\n        toastDiv.innerHTML = inOptions.message;\n    }\n    hide() {\n        if (this.toastDiv) {\n            this.toastDiv.style.display = 'none';\n        }\n    }\n    destroy() {\n        if (this.toastDiv) {\n            document.body.removeChild(this.toastDiv);\n            this.toastDiv = null;\n        }\n    }\n}\n","let timer;\nexport const transitionToCameraBound = (camera, boundary, callback) => {\n    const end = boundary;\n    const start = {\n        centerX: camera.centerX,\n        centerY: camera.centerY,\n        width: camera.width,\n        height: camera.height\n    };\n    /**\n     * 录像回放时，不要用动画，否则位置有些问题\n     */\n    const total = camera.app.isRecordPlayer ? 1 : 15;\n    animate({\n        total: total,\n        worker: (curr) => {\n            const percent = (curr + 1) / total;\n            camera.setCameraBound({\n                centerX: end.centerX * percent + start.centerX * (1 - percent),\n                centerY: end.centerY * percent + start.centerY * (1 - percent),\n                width: end.width * percent + start.width * (1 - percent),\n                height: end.height * percent + start.height * (1 - percent)\n            });\n        },\n        callback: callback\n    });\n};\nexport const animate = (opt) => {\n    cancelAnimationFrame(timer);\n    step(0, opt);\n};\nconst step = (curr, opt) => {\n    if (curr >= opt.total) {\n        if (typeof opt.callback === 'function') {\n            opt.callback();\n        }\n    }\n    else {\n        requestAnimationFrame(() => {\n            opt.worker(curr);\n            step(curr + 1, opt);\n        });\n    }\n};\n","import Page from \"../page\";\n/**\n * snapshot为引起addPage动作的快照，它可能来自于Board类快照\n */\nexport const addPage = (board, insertAfter, snapshot) => {\n    board.app.opsManager.hooks.prePageChange.call(snapshot);\n    board.pages[board.currIndex].cleanNonCanvasElements();\n    board.pages[board.newPageIndex] = new Page(board.app, board.boardName, board.newPageIndex.toString());\n    if (snapshot.category === 'pageOp') {\n        board.pages[board.newPageIndex].setPayload(snapshot.data.payload);\n    }\n    insertAfter = insertAfter === undefined ? board.pageNames.length - 1 : insertAfter;\n    board.pageNames.splice(insertAfter + 1, 0, board.newPageIndex.toString());\n    if (!board.app.room.isReceivingBatchSnapshots) {\n        board.pages[board.newPageIndex].calcDrawOpQueue();\n        // board.pages[board.newPageIndex].refresh()\n        board.app.room.pageToRefresh = board.pages[board.newPageIndex];\n    }\n    //更新新页面index\n    board.currIndex = board.newPageIndex;\n    board.newPageIndex += 1;\n    board.app.opsManager.hooks.pageChange.call(snapshot);\n};\n/**\n * snapshot为引起gotoPage动作的快照，它可能来自于Board类快照\n */\nexport const gotoPage = (board, index, snapshot) => {\n    if (!board.pages.hasOwnProperty(index)) {\n        throw new Error('跳转至不存在的页面');\n    }\n    board.app.opsManager.hooks.prePageChange.call(snapshot);\n    board.pages[board.currIndex].cleanNonCanvasElements();\n    board.currIndex = Number(index);\n    board.app.opsManager.hooks.pageChange.call(snapshot);\n    if (!board.app.room.isReceivingBatchSnapshots) {\n        board.pages[index].calcDrawOpQueue();\n        // board.pages[index].refresh()\n        board.app.room.pageToRefresh = board.pages[index];\n    }\n};\n/**\n * snapshot为引起deletePage动作的快照，它可能来自于Board类快照\n */\nexport const deletePage = (board, index, snapshot) => {\n    if (!board.pages.hasOwnProperty(index)) {\n        if (LOG) {\n            console.error('白板-->', `删除页面:${index}, 但是页面不存在`);\n        }\n    }\n    else if (Object.keys(board.pages).length === 1) {\n        if (LOG) {\n            console.error('白板-->', `不能删除最后一页`);\n        }\n    }\n    else {\n        board.app.opsManager.hooks.prePageChange.call(snapshot);\n        board.pages[board.currIndex].cleanNonCanvasElements();\n        delete board.pages[index];\n        const indexInPageNames = board.pageNames.indexOf(index.toString());\n        if (indexInPageNames !== -1) {\n            board.pageNames.splice(indexInPageNames, 1);\n        }\n        let nextPageIndex = indexInPageNames;\n        if (indexInPageNames === board.pageNames.length) {\n            //被删除的是最后一页，跳到被删除页面的前一页\n            nextPageIndex = indexInPageNames - 1;\n        }\n        board.currIndex = Number(board.pageNames[nextPageIndex]);\n        board.app.opsManager.hooks.pageChange.call(snapshot);\n        if (!board.app.room.isReceivingBatchSnapshots) {\n            board.pages[board.currIndex].calcDrawOpQueue();\n            // board.pages[board.currIndex].refresh()\n            board.app.room.pageToRefresh = board.pages[board.currIndex];\n        }\n    }\n};\n","/**\n * 默认白板中所有页都属于同一个Board实例。\n *\n * 每添加一个文件（图片除外），都会添加一个Board。多页文件的Board含有多页Page。\n *\n * 引入Board概念是希望能够方便用户快速定位，切换多文件，以及原有白板。\n */\nimport Page from \"../page\";\nimport { addPage, deletePage, gotoPage } from \"./actions\";\nclass Board {\n    constructor(app, boardName, displayName) {\n        this.pages = {};\n        //pages中的key的顺序通过pageNames来控制。\n        this.pageNames = [];\n        //创建新页面时，新页面的索引号。该索引号会随着新页面创建而递增\n        this.newPageIndex = 1;\n        this.app = app;\n        this.dispatch = app.dispatcher;\n        this.boardName = boardName;\n        this.displayName = displayName;\n        this.pages = {\n            '0': new Page(app, boardName, '0')\n        };\n        this.pageNames = ['0'];\n        this.currIndex = 0;\n    }\n    get currPage() {\n        return this.pages[this.currIndex];\n    }\n    get payloadOfPages() {\n        return this.pageNames.map(name => {\n            return this.pages[name].payload;\n        });\n    }\n    /**\n     * currIndex是page的内在索引。\n     *\n     * 添加页面时，新页面会获得一个内在索引。内在索引从0开始递增\n     * 下面这个函数会返回当前页面在所有页面当中的位置。\n     *\n     * 举个例子：\n     * 添加三个页面，三个页面的内在索引为0,1,2\n     * 删除第二个页面，剩余下面的内在索引为0，2\n     *\n     * 2这个页面的currPageIndex为1，\n     * 0的currPageIndex为0\n     */\n    getCurrPageIndex() {\n        return this.pageNames.indexOf(this.currIndex.toString());\n    }\n    getPageBuiltInIndex(index) {\n        return Number(this.pageNames[index]);\n    }\n    addOpInBoard(snapshot) {\n        const { action, page, insertAfter } = snapshot.data;\n        if (action === 'add') {\n            addPage(this, insertAfter, snapshot);\n        }\n        if (action === 'goto') {\n            gotoPage(this, page, snapshot);\n        }\n        if (action === 'delete') {\n            deletePage(this, page, snapshot);\n        }\n        this.app.opsManager.hooks.addOpHook.call(snapshot, true);\n    }\n}\nexport default Board;\n","/**\n * 在白板应用中，存在以白板容器左上角为起点的屏幕坐标系。以及一个虚拟的世界坐标系。世界坐标系的初始原点为（0，0），在屏幕的中心位置。所有操作的坐标均以世界坐标系记录。\n *\n * 在任一时刻，应用都有一个世界坐标系范围，该范围可以通过setCameraBound设置。白板容器显示的内容要大于等于世界此刻世界坐标系范围。\n *\n * *****<------------------>********\n * *****<---世界坐标系范围--->********\n * *****<------------------>********\n *\n * 单机模式下，以下操作会更新世界坐标系范围：\n * 1. 缩放\n * 2. 平移\n * 3. 重置世界坐标系\n * 4. 移动设备旋转。根据模式不同，可以设置世界坐标系宽高互换，或者竖屏时显示横屏所有内容，或者反过来\n * 5. 白板容器缩放，根据默认世界的宽高比，重新设置新的屏幕对应的世界坐标系\n *\n * 联机模式下，以下操作会更新世界坐标系范围：\n * 1. 跟随主播，世界坐标系与主播保持同步\n * 2. 与主播解绑\n *\n *\n * 初始世界坐标系范围有两个选择：\n * 1. 所有机器均保持一致，如1920*1080， 竖屏时为1080*1920\n * 2. 所有机器使用1920*1080的世界坐标系，倒推其屏幕的世界坐标系（如上图，可能为2500，1080），然后将该坐标系作为自己的世界坐标系\n *\n * 单机模式下两者没有区别。\n * 第一种模式在视角跟随时有些吃亏，因为主播需要额外上传自己屏幕代表的世界坐标系范围\n * 第二种模式相对较为简单直接。在视角跟随，以及世界坐标系范围更新时，要将自己的世界坐标系快照上传\n */\nimport { DPI } from \"../container\";\nimport { getTransformedBoundary } from \"../misc/shapeHelper\";\nclass Camera {\n    constructor(app, defaultCameraBound) {\n        this.scale = 1;\n        /**\n         *  > 10%, < 1000%\n         * 初始缩放比例为100%\n         */\n        // zoomFactor: number = 1\n        this.cameraBoundByUser = {};\n        this.app = app;\n        this.translateX = 0;\n        this.translateY = 0;\n        this.scale = 1;\n        if (defaultCameraBound) {\n            this.width = defaultCameraBound.width;\n            this.height = defaultCameraBound.height;\n            this.centerX = defaultCameraBound.centerX;\n            this.centerY = defaultCameraBound.centerY;\n        }\n        else {\n            this.width = 1920;\n            this.height = 1080;\n            this.centerX = 0;\n            this.centerY = 0;\n        }\n        this.app.on('container:set', () => {\n            this.updateTransParamAndRefresh();\n        });\n    }\n    get zoomFactor() {\n        return this.scale;\n    }\n    get container() {\n        return this.app.container;\n    }\n    /**\n     * 获取当前容器在世界坐标系的显示区域\n     */\n    getContainerWorldRect() {\n        const rect = this.container.el.getBoundingClientRect();\n        const w = rect.width;\n        const h = rect.height;\n        const [sx, sy] = this.convertToPointInWorld(0, 0);\n        const [ex, ey] = this.convertToPointInWorld(w, h);\n        return {\n            centerX: sx / 2 + ex / 2,\n            centerY: sy / 2 + ey / 2,\n            width: ex - sx,\n            height: ey - sy\n        };\n    }\n    /**\n     * 计算给定世界坐标时，返回屏幕的四个角落的在世界坐标系代表的范围\n     */\n    getContainerWorldRectByCameraBound(opts) {\n        const w = this.container.width;\n        const h = this.container.height;\n        if (w / h > opts.width / opts.height) {\n            opts.width = opts.height / h * w;\n        }\n        else {\n            opts.height = opts.width / w * h;\n        }\n        return opts;\n    }\n    /**\n     * 转换屏幕上的坐标。\n     * 转换后在不同大小的屏幕上点击相似的位置，会得到大致相似的坐标\n     * @param mx\n     * @param my\n     */\n    convertToPointInWorld(mx, my) {\n        mx = (mx - this.translateX) / this.scale;\n        my = (my - this.translateY) / this.scale;\n        return [mx, my];\n    }\n    /**\n     * 将世界坐标系上的点转化成container上的坐标\n     * @param mx\n     * @param my\n     */\n    convertWorldPointInContainer(mx, my) {\n        mx = mx * this.scale + this.translateX;\n        my = my * this.scale + this.translateY;\n        return [mx, my];\n    }\n    convertDom(dom) {\n        dom.style.transform = `translate(${this.translateX}px, ${this.translateY}px) scale(${this.scale})`;\n    }\n    convertDomAndRefresh() {\n        var _a, _b, _c;\n        this.convertDom(this.container.backgroundEl);\n        this.convertDom(this.container.imageEl);\n        this.convertDom(this.container.domEl);\n        this.convertDom(this.container.textAreaEl);\n        // this.app.room?.currBoard?.currPage?.refresh()\n        this.app.room.pageToRefresh = (_b = (_a = this.app.room) === null || _a === void 0 ? void 0 : _a.currBoard) === null || _b === void 0 ? void 0 : _b.currPage;\n        (_c = this.app.previewFactory) === null || _c === void 0 ? void 0 : _c.resizeElements();\n    }\n    convertCanvas(ctx) {\n        ctx.translate(this.translateX * DPI, this.translateY * DPI);\n        ctx.scale(this.scale * DPI, this.scale * DPI);\n    }\n    /**\n     * 预览窗口的canvas大小和container中canvas大小不一致，需要单独计算缩放属性\n     * @param ctx\n     */\n    convertPreviewCanvas(ctx) {\n        const width = ctx.canvas.width;\n        const height = ctx.canvas.height;\n        const { scale, translateX, translateY } = this.getTransParam(width, height);\n        ctx.translate(translateX, translateY);\n        ctx.scale(scale, scale);\n    }\n    /**\n     * 也由快照引发，快照的type为: cameraBound\n     * @param opts\n     */\n    setCameraBound(opts) {\n        //各个终端会调整自身的translate及scale，确保boundary范围内的元素是可见的。且boundary至少有一边会顶着终端窗口的边界\n        this.centerX = opts.centerX;\n        this.centerY = opts.centerY;\n        this.width = opts.width;\n        this.height = opts.height;\n        this.updateTransParamAndRefresh();\n    }\n    /**\n     * 计算经过snapshot变化后，屏幕显示范围代表的世界坐标系\n     * @param snapshot\n     */\n    getNextCameraBound(data) {\n        if (data.type === 'pan') {\n            return this._roundBoundary(this.getCameraBoundPan(data));\n        }\n        else if (data.type === 'zoom') {\n            return this._roundBoundary(this.getCameraBoundZoom(data));\n        }\n        else if (data.type === 'reset-camera') {\n            return this._roundBoundary(this.getCameraBoundReset());\n        }\n        else if (data.type === 'fit-to-content') {\n            return this._roundBoundary(this.getCameraBoundFitToContent());\n        }\n        else if (data.type === 'fit-to-doc') {\n            return this._roundBoundary(this.getCameraBoundFitToDoc());\n        }\n        else if (data.type === 'resize-camera') {\n            return this._roundBoundary(this.getCameraBoundResize());\n        }\n        else {\n            throw new Error(`不应该进入此分支(getCameraBound), data类型为：${data}`);\n        }\n    }\n    _roundBoundary(boundary) {\n        return {\n            centerX: Number(boundary.centerX.toFixed(1)),\n            centerY: Number(boundary.centerY.toFixed(1)),\n            width: Number(boundary.width.toFixed(1)),\n            height: Number(boundary.height.toFixed(1)),\n        };\n    }\n    getCameraBoundPan(data) {\n        let cx = this.centerX;\n        let cy = this.centerY;\n        let w = this.width;\n        let h = this.height;\n        cx += data.dx / this.scale;\n        cy += data.dy / this.scale;\n        return this.getContainerWorldRectByCameraBound({\n            centerX: cx,\n            centerY: cy,\n            width: w,\n            height: h\n        });\n    }\n    getCameraBoundZoom(data) {\n        let cx = this.centerX;\n        let cy = this.centerY;\n        let w = this.width;\n        let h = this.height;\n        let center;\n        if (data.center) {\n            center = this.convertToPointInWorld(data.center[0], data.center[1]);\n        }\n        else {\n            center = [cx, cy];\n        }\n        const scale = data.scale;\n        cx = center[0] - (center[0] - cx) / scale;\n        cy = center[1] - (center[1] - cy) / scale;\n        w = w / scale;\n        h = h / scale;\n        return this.getContainerWorldRectByCameraBound({\n            centerX: cx,\n            centerY: cy,\n            width: w,\n            height: h\n        });\n    }\n    getCameraBoundReset() {\n        return {\n            centerX: 0,\n            centerY: 0,\n            width: this.container.width,\n            height: this.container.height\n        };\n    }\n    getCameraBoundFitToDoc() {\n        const backgroundOp = this.app.room.currBoard.currPage.backgroundSnapshot;\n        if (!backgroundOp) {\n            return {\n                centerX: this.centerX,\n                centerY: this.centerY,\n                width: this.width,\n                height: this.height\n            };\n        }\n        else {\n            const { sx, sy, w, h } = backgroundOp.data.boundary;\n            return this.getContainerWorldRectByCameraBound({\n                centerX: sx + w / 2,\n                centerY: sy + h / 2,\n                width: w,\n                height: h\n            });\n        }\n    }\n    getCameraBoundFitToContent() {\n        /**\n         * 缩放至和内容的boundary一致\n         */\n        const page = this.app.room.currBoard.currPage;\n        const drawOpQueue = page.drawOpQueue;\n        const backgroundOp = page.backgroundSnapshot;\n        if (Object.keys(drawOpQueue).length === 0 && !backgroundOp) {\n            return this.getCameraBoundReset();\n        }\n        const boundary = {\n            sx: 10000000,\n            sy: 10000000,\n            ex: -10000000,\n            ey: -10000000\n        };\n        if (backgroundOp) {\n            const { sx, sy, w, h } = backgroundOp.data.boundary;\n            boundary.sx = Math.min(boundary.sx, sx);\n            boundary.sy = Math.min(boundary.sy, sy);\n            boundary.ex = Math.max(boundary.ex, sx + w);\n            boundary.ey = Math.max(boundary.ey, sy + h);\n        }\n        for (let key in drawOpQueue) {\n            const data = drawOpQueue[key].data;\n            if (!data.boundary ||\n                (data.boundary.sx === null || data.boundary.sx === undefined) ||\n                (data.boundary.sy === null || data.boundary.sy === undefined) ||\n                (data.boundary.w === null || data.boundary.w === undefined) ||\n                (data.boundary.h === null || data.boundary.h === undefined)) {\n                continue;\n            }\n            const { sx, sy, w, h } = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n            boundary.sx = Math.min(boundary.sx, sx);\n            boundary.sy = Math.min(boundary.sy, sy);\n            boundary.ex = Math.max(boundary.ex, sx + w);\n            boundary.ey = Math.max(boundary.ey, sy + h);\n        }\n        if ((boundary.ex - boundary.sx) < 100 && (boundary.ey - boundary.sy) < 100) {\n            //如果范围太小, 则适当的扩大范围至100 * 100。\n            let horizontalPadding = 100 - (boundary.ex - boundary.sx);\n            let verticalPadding = 100 - (boundary.ey - boundary.ex);\n            boundary.sx = boundary.sx - horizontalPadding / 2;\n            boundary.ex = boundary.ex + horizontalPadding / 2;\n            boundary.sy = boundary.sy - verticalPadding / 2;\n            boundary.ey = boundary.ey + verticalPadding / 2;\n        }\n        let padding = 0;\n        return this.getContainerWorldRectByCameraBound({\n            centerX: boundary.sx / 2 + boundary.ex / 2,\n            centerY: boundary.sy / 2 + boundary.ey / 2,\n            width: boundary.ex - boundary.sx + padding * 2,\n            height: boundary.ey - boundary.sy + padding * 2\n        });\n    }\n    getCameraBoundResize() {\n        if (this.app.disableAutoResize) {\n            /**\n             * 保持窗口内元素大小不变\n             * 屏幕中心点位置不变, scale不变\n             */\n            return {\n                centerX: this.centerX,\n                centerY: this.centerY,\n                width: this.container.width / this.zoomFactor,\n                height: this.container.height / this.zoomFactor\n            };\n        }\n        else {\n            /**\n             * 窗口内内容不变。大小改变\n             *\n             * 由于变化前后的宽高比可能发生变化，因此以宽作为基准。保持同样宽度内的内容不变\n             */\n            return {\n                centerX: this.centerX,\n                centerY: this.centerY,\n                width: this.width,\n                height: this.width / this.container.width * this.container.height\n            };\n        }\n    }\n    /**\n     * 根据世界坐标系设置dom的transform。计算后dom能够完全包含世界坐标系的范围，并且高度，或者宽度和世界坐标系的范围一致\n     * @param opt\n     */\n    getTransParam(_width, _height) {\n        const cameraWidth = this.width;\n        const cameraHeight = this.height;\n        const centerX = this.centerX;\n        const centerY = this.centerY;\n        let scale, translateX, translateY;\n        const cameraWhRatio = cameraWidth / cameraHeight;\n        if (_width / _height > cameraWhRatio) {\n            //容器较宽，根据容器高度和摄像机视野高度的比值，来确定缩放值\n            //缩放后，容器垂直范围内显示的内容和摄像机垂直范围内显示高度一致\n            scale = _height / cameraHeight;\n        }\n        else {\n            scale = _width / cameraWidth;\n        }\n        translateX = _width / 2 - centerX * scale;\n        translateY = _height / 2 - centerY * scale;\n        return { scale, translateX, translateY };\n    }\n    updateTransParamAndRefresh() {\n        const { scale, translateX, translateY } = this.getTransParam(this.container.width, this.container.height);\n        this.scale = scale;\n        this.translateX = translateX;\n        this.translateY = translateY;\n        this.convertDomAndRefresh();\n        this.app.emit('event:appState:change', 'zoomFactor', this.zoomFactor);\n    }\n}\nexport default Camera;\n","import { showToast } from \"../../component/toast\";\nimport { transitionToCameraBound } from \"../animation\";\nclass Vision {\n    constructor(app) {\n        /**\n         * 当前用户的身份\n         */\n        this.mode = 'freeObserver';\n        this.app = app;\n        this.camera = this.app.camera;\n    }\n    get broadcasterName() {\n        return this.broadcasterNickname ? this.broadcasterNickname : this.broadcaster;\n    }\n    setMode(mode) {\n        this.mode = mode;\n        this.app.emit('event:appState:change', 'vision', {\n            mode: mode,\n            isBroadcasting: this.broadcaster !== undefined\n        });\n    }\n    setBroadcaster(value, nickname) {\n        this.broadcaster = value;\n        this.broadcasterNickname = nickname;\n        // this.app.emit('event:vision:isBroadcasting', this.broadcaster !== undefined)\n        this.app.emit('event:appState:change', 'vision', {\n            mode: this.mode,\n            isBroadcasting: this.broadcaster !== undefined\n        });\n    }\n    /**\n     * 设置当前用户为广播者, 并将消息广播给其他用户\n     */\n    setSelfAsBroadcaster() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        const account = this.app.account;\n        const nickname = this.app.nickname;\n        this.setMode('broadcaster');\n        this.setBroadcaster(account, nickname);\n        showToast({\n            type: 'success',\n            msg: '其他用户将与您保持视角同步',\n            time: 3\n        });\n        this.app.dataHub.broadcastRoomState({\n            broadcaster: account,\n            nickname: nickname\n        }, 'broadcaster');\n        /**\n         * 将本机的camera-bound发送给其他用户\n         */\n        this.app.emit('op:camera-bound:send', this.camera.getContainerWorldRect(), true);\n    }\n    /**\n     * 停止设置自己为广播者\n     */\n    unsetSelfAsBroadcaster() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        if (this.mode === 'broadcaster') {\n            if (this.broadcaster !== this.app.account) {\n                //运行时不应该走到该分支\n                console.error('白板--> 取消广播。但事实上目前用户并不是房间的广播者', this.broadcaster, this.app.account);\n            }\n            this.setMode('freeObserver');\n            this.setBroadcaster(undefined);\n            showToast({\n                type: 'success',\n                msg: '其他用户将停止与您保持视角同步'\n            });\n            this.app.dataHub.broadcastRoomState({\n                broadcaster: undefined\n            }, 'broadcaster');\n        }\n    }\n    /**\n     * 设置当前用户为跟随者，只有房间状态存在broadcaster时才可用\n     * 设置的目的是为了回放时接收到此数据，然后正确的还原用户当时的视角\n     */\n    setSelfAsFollower() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        if (this.mode === 'broadcaster') {\n            console.error('请先停止广播');\n        }\n        else if (this.mode === 'freeObserver') {\n            this.setMode('follower');\n            const boundary = this.camera.cameraBoundByUser[this.broadcaster];\n            transitionToCameraBound(this.camera, boundary);\n            showToast({\n                type: 'success',\n                msg: `与${this.broadcasterName}保持视角同步`\n            });\n            this.app.dataHub.broadcastRoomState({\n                account: this.app.account,\n                mode: 'follower'\n            }, 'observeMode');\n        }\n    }\n    /**\n     * 设置自己为自由视角。通过setSelfAsFollower可以重新设置为跟随者\n     */\n    setSelfAsFreeObserver() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        if (this.mode === 'broadcaster') {\n            console.error('请先停止广播');\n        }\n        else if (this.mode === 'follower') {\n            this.setMode('freeObserver');\n            showToast({\n                type: 'success',\n                msg: `与${this.broadcasterName}解除视角同步`\n            });\n            this.app.dataHub.broadcastRoomState({\n                account: this.app.account,\n                mode: 'freeObserver'\n            }, 'observeMode');\n            /**\n             * 发送切换时的camera-bound\n             * 保证录像回放时，若切换到freeObserver, 能够通过自己的camera-bound查询到目前的camera\n             * 若没有发送，回放时则需要追溯上一次broadcaster的camera-bound是多少，并且还要截止到broadcaster结束主播前的camera，逻辑非常复杂\n             */\n            this.app.emit('op:camera-bound:send', this.camera.getContainerWorldRect(), false);\n        }\n    }\n    receiveBroadcaster(value) {\n        const { broadcaster, nickname } = value;\n        if (broadcaster) {\n            this.setMode('follower');\n            this.setBroadcaster(broadcaster, nickname);\n            //设置主播：account\n            showToast({\n                msg: `正在与${this.broadcasterName}保持视角同步`,\n                type: 'success',\n                time: 3\n            });\n        }\n        else {\n            showToast({\n                msg: `${this.broadcasterName}取消了视角同步`,\n                type: 'success',\n                time: 3\n            });\n            this.setMode('freeObserver');\n            this.setBroadcaster(undefined);\n        }\n    }\n    /**\n     * 同步之后设置当前视角状态。\n     * @param visionData\n     */\n    receiveBroadcasterAfterSync(lastVisionData) {\n        if (lastVisionData.broadcaster === this.app.account) {\n            showToast({\n                type: 'success',\n                msg: '其他用户正在与您保持视角同步',\n                time: 3\n            });\n            this.setMode('broadcaster');\n            this.setBroadcaster(this.app.account, this.app.nickname);\n        }\n        else if (lastVisionData.broadcaster) {\n            this.setMode('follower');\n            this.setBroadcaster(lastVisionData.broadcaster, lastVisionData.nickname);\n            showToast({\n                msg: `正在与${this.broadcasterName}保持视角同步`,\n                type: 'success',\n                time: 3\n            });\n        }\n        else {\n            this.setMode('freeObserver');\n            this.setBroadcaster(undefined);\n        }\n    }\n    /**\n     * 录像回放时，根据该函数设置用户的观看状态：是自由视角，还是跟随视角\n     * @param lastFree\n     */\n    receiveObserveModeAfterSync(lastObserveModeOfAccount) {\n        if (lastObserveModeOfAccount.account !== this.app.account)\n            return;\n        if (lastObserveModeOfAccount.mode === 'follower') {\n            this.setMode('follower');\n            const boundary = this.camera.cameraBoundByUser[this.broadcaster];\n            transitionToCameraBound(this.camera, boundary);\n            showToast({\n                type: 'success',\n                msg: `正在与${this.broadcasterName}保持视角同步`,\n            });\n        }\n        else {\n            this.setMode('freeObserver');\n            const boundary = this.camera.cameraBoundByUser[this.app.account];\n            transitionToCameraBound(this.camera, boundary);\n            showToast({\n                type: 'success',\n                msg: `与${this.broadcasterName}解除视角同步`\n            });\n        }\n    }\n}\nexport default Vision;\n","export const DEFAULT_FONTSIZE = 32;\n//之所以设计为类，是想要创建多个DrawPlugin实例时，各个实例之间的配置支持相互独立\nclass AppConfig {\n    constructor(app) {\n        this.setAppConfig = (partialConfig) => {\n            var _a;\n            if (Object.keys(partialConfig).length === 0) {\n                console.error('白板-->', '调用了setAppConfig, 但传入的参数为空', partialConfig);\n            }\n            else {\n                for (let key in partialConfig) {\n                    if (!this.config.hasOwnProperty(key)) {\n                        console.error('白板-->', `setAppConfig传入的参数键值${key}不是有效的配置项`);\n                        console.error('白板-->', `目前支持的配置项有：${Object.keys(this.config)}`);\n                    }\n                    else if (key === 'canvas_bg_color') {\n                        //设置背景色\n                        this.config.canvas_bg_color = partialConfig.canvas_bg_color;\n                        this.app.container.setBackgroundColor();\n                        (_a = this.app.previewFactory) === null || _a === void 0 ? void 0 : _a.setBackgroundColor();\n                    }\n                    else {\n                        this.config[key] = partialConfig[key];\n                    }\n                }\n            }\n            Object.assign(this.config, partialConfig);\n        };\n        this.getAppConfig = () => {\n            return this.config;\n        };\n        this.app = app;\n        this.config = {\n            canvas_bg_color: '#f5f5f7',\n            showCursorNickname: true,\n            showSelectNickname: true,\n            showLaserNickname: true,\n            cameraTransformEnabled: true\n        };\n    }\n}\nexport default AppConfig;\n","import { off, on } from \"../misc/dom-events\";\nimport { distSqrt } from \"../misc/shapeHelper\";\nexport const DPI = window.devicePixelRatio || 1;\nconsole.log(\"白板--> DPI\", DPI);\n//click不能超过100ms\nconst TIMER_THRESHOLD = 150;\n//超过5px的移动就不能被判定为click\nconst MOVE_THRESHOLD = 5;\nclass Container {\n    constructor(app) {\n        this.elInitW = 1920;\n        this.elInitH = 1080;\n        this.isLandscape = false;\n        this.elesToResize = [];\n        this.top = 0;\n        this.left = 0;\n        this.keyPressed = {};\n        /**\n         * 若不判定为click，则发送mousedown,mousemove[], mouseup事件\n         * 否则发送click事件\n         */\n        //怀疑本次操作是点击操作\n        this.maybeClick = false;\n        //怀疑本次操作是连续点击操作\n        //发射鼠标动作前，将动作存在这里\n        this.mouseEventCache = [];\n        this.isMouseDown = false;\n        this.sx = 0;\n        this.sy = 0;\n        this.lastMx = 0;\n        this.lastMy = 0;\n        this.lastClientX = 0;\n        this.lastClientY = 0;\n        this._resize = (event) => {\n            var _a;\n            const rect = this.el.getBoundingClientRect();\n            this.containerRect = rect;\n            if (this.app.ifDeviceSupportOrientation) {\n                //触摸屏横竖屏切换时，需要设置isLandscape\n                this.isLandscape = rect.width > rect.height;\n            }\n            for (let ele of this.elesToResize) {\n                if (ele instanceof HTMLCanvasElement) {\n                    ele.width = rect.width * DPI;\n                    ele.height = rect.height * DPI;\n                }\n                ele.style.width = `${rect.width}px`;\n                ele.style.height = `${rect.height}px`;\n            }\n            this.top = rect.top;\n            this.left = rect.left;\n            this.setElePosition(this.backgroundEl, 'fixed');\n            this.setElePosition(this.imageEl, 'fixed');\n            this.setElePosition(this.domEl, 'fixed');\n            this.setElePosition(this.textAreaEl, 'fixed');\n            //很不喜欢使用eventEmitter，但是不这样做不好解决text工具栏大小没动态更新的bug\n            this.dispatcher.emit('container:resize');\n            /**\n             * 必须设置canvas宽高后才能够设置lineCap, lineJoin\n             */\n            this.ctx.lineCap = 'round';\n            this.ctx.lineJoin = 'round';\n            this.frontCtx.lineCap = 'round';\n            this.frontCtx.lineJoin = 'round';\n            this.laserCtx.lineCap = 'round';\n            this.laserCtx.lineJoin = 'round';\n            /**\n             * 初始化时不要用resize发送camera-bound\n             */\n            if (event) {\n                (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.resize(event, rect.width, rect.height);\n            }\n        };\n        this.unbindEvents = () => {\n            var _a;\n            (_a = this._ro) === null || _a === void 0 ? void 0 : _a.disconnect();\n            window.removeEventListener('scroll', this._resize);\n            window.removeEventListener('resize', this._resize);\n            window.removeEventListener('orientationchange', this._resize);\n            off(this.el, 'mousedown', this._mousedown);\n            off(this.el, 'mouseleave', this._mouseleave);\n            off(window.document, 'mousemove', this._mousemove);\n            off(window.document, 'mouseup', this._mouseup);\n            off(window.document, 'mousewheel', this._mousewheel);\n            off(this.el, 'touchstart', this._mousedown);\n            off(this.el, 'touchmove', this._mousemove);\n            off(this.el, 'touchend', this._mouseup);\n            off(window.document, 'keyup', this._keyup);\n            off(window.document, 'keydown', this._keydown);\n            off(document.body, 'contextmenu', this._contextmenu);\n        };\n        this.getEventClientPos = (event) => {\n            let clientX;\n            let clientY;\n            if (event instanceof MouseEvent) {\n                clientX = event.clientX;\n                clientY = event.clientY;\n            }\n            else {\n                clientX = event.touches[0].clientX;\n                clientY = event.touches[0].clientY;\n            }\n            //减去canvas到browser左上角的差值\n            clientX = clientX - this.left;\n            clientY = clientY - this.top;\n            //前两个是在世界坐标系\n            //后两个是在canvas上的位置\n            return [...this.app.camera.convertToPointInWorld(clientX, clientY), clientX, clientY];\n        };\n        this._contextmenu = (event) => {\n            event.preventDefault();\n        };\n        this._mousedown = (event) => {\n            if (this.isMouseDown) {\n                //忽略暴力测试下的连续mousedown操作\n                return;\n            }\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            this.lastMx = mx;\n            this.lastMy = my;\n            this.lastClientX = clientX;\n            this.lastClientY = clientY;\n            this.isMouseDown = true;\n            //怀疑可能是点击操作\n            this.maybeClick = true;\n            this.sx = mx;\n            this.sy = my;\n            this.mouseEventCache.push({\n                type: 'mousedown',\n                args: [event, this.sx, this.sy, clientX, clientY]\n            });\n            this.mouseEmitTimer = setTimeout(() => {\n                //时间过长，不是点击操作\n                this.maybeClick = false;\n                this._emitMouseEvents();\n            }, TIMER_THRESHOLD);\n        };\n        this._mousemove = (event) => {\n            var _a;\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            this.lastMx = mx;\n            this.lastMy = my;\n            this.lastClientX = clientX;\n            this.lastClientY = clientY;\n            if (this.maybeClick) {\n                //如果鼠标移动过多，则不是点击操作\n                this.maybeClick = distSqrt([mx, my], [this.sx, this.sy]) <= MOVE_THRESHOLD;\n            }\n            if (!this.maybeClick) {\n                /**\n                 * 确定不是点击操作，直接发送鼠标移动事件，以及之前缓存的鼠标动作\n                 */\n                if (this.mouseEmitTimer) {\n                    this.mouseEmitTimer = clearTimeout(this.mouseEmitTimer);\n                    this._emitMouseEvents();\n                }\n                (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mousemove(event, mx, my, clientX, clientY);\n            }\n            else {\n                /**\n                 * 不确定是不是点击操作，先将动作存放起来\n                 */\n                this.mouseEventCache.push({\n                    type: 'mousemove',\n                    args: [event, mx, my, clientX, clientY]\n                });\n            }\n        };\n        this._mouseup = (event) => {\n            var _a, _b;\n            const [mx, my, clientX, clientY] = [this.lastMx, this.lastMy, this.lastClientX, this.lastClientY];\n            if (!this.maybeClick) {\n                //确定不是点击操作，将之前缓存的操作，以及本次mouseup发送出去\n                if (this.mouseEmitTimer) {\n                    this.mouseEmitTimer = clearTimeout(this.mouseEmitTimer);\n                    this._emitMouseEvents();\n                }\n                this.mouseEventCache = [];\n                (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mouseup(event, mx, my, clientX, clientY);\n            }\n            else {\n                //是点击操作，不用发送down，up以及move\n                this.mouseEmitTimer = clearTimeout(this.mouseEmitTimer);\n                this.mouseEventCache = [];\n                this.maybeClick = false;\n                //发送点击操作\n                (_b = this.opsManager) === null || _b === void 0 ? void 0 : _b.click(event, mx, my, clientX, clientY);\n            }\n            this.isMouseDown = false;\n        };\n        this._mouseleave = (event) => {\n            var _a;\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mouseleave(event, mx, my, clientX, clientY);\n        };\n        this._mousewheel = (event) => {\n            var _a;\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mousewheel(event, mx, my, clientX, clientY);\n        };\n        //处理完事件后，再将key状态置为松开\n        this._keyup = (event) => {\n            var _a;\n            const key = event.key.toLocaleLowerCase();\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.keyup(event);\n            this.keyPressed[key] = false;\n        };\n        this._keydown = (event) => {\n            var _a;\n            const key = event.key.toLocaleLowerCase();\n            this.keyPressed[key] = true;\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.keydown(event);\n        };\n        this.app = app;\n        this.dispatcher = app.dispatcher;\n        this.el = document.createElement('div');\n        this.el.style.position = 'relative';\n        this.el.style.width = '100%';\n        this.el.style.height = '100%';\n        this.setBackgroundColor();\n        this.backgroundEl = this.setupDivElement('bg-el');\n        this.imageEl = this.setupDivElement('image-el');\n        let temp = this.setupCanvasElement('bg-canvas');\n        this.canvas = temp.canvas;\n        this.ctx = temp.ctx;\n        temp = this.setupCanvasElement('front-canvas');\n        this.frontCanvas = temp.canvas;\n        this.frontCtx = temp.ctx;\n        this.domEl = this.setupDivElement('dom-el');\n        this.textAreaEl = this.setupDivElement('toolbar-el');\n        temp = this.setupCanvasElement('laser-canvas');\n        this.laserCanvas = temp.canvas;\n        this.laserCtx = temp.ctx;\n    }\n    /**\n     * config变动时，需要调用此函数修改背景色\n     */\n    setBackgroundColor() {\n        this.el.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n    }\n    appendTo(container) {\n        container.appendChild(this.el);\n        this._resize();\n        this.dispatcher.emit('container:set');\n        this._bindEvents(container);\n    }\n    addOpsManager(opsManager) {\n        this.opsManager = opsManager;\n    }\n    isKeyDown(key) {\n        return this.keyPressed.hasOwnProperty(key) && this.keyPressed[key];\n    }\n    /**\n     * 测试鼠标在container或者其子元素上面\n     * @param div\n     */\n    isTargetOnContainer(div) {\n        var _a;\n        return div === this.el || (div === null || div === void 0 ? void 0 : div.parentNode) === this.el || ((_a = div === null || div === void 0 ? void 0 : div.parentNode) === null || _a === void 0 ? void 0 : _a.parentNode) === this.el;\n    }\n    setupDivElement(className) {\n        const ele = document.createElement('div');\n        ele.style.transformOrigin = 'left top';\n        ele.className = className;\n        this.el.appendChild(ele);\n        return ele;\n    }\n    setupCanvasElement(className) {\n        const ele = document.createElement('canvas');\n        this.setElePosition(ele);\n        ele.className = className;\n        ele.style.pointerEvents = 'none';\n        const ctx = ele.getContext('2d');\n        this.el.appendChild(ele);\n        this.elesToResize.push(ele);\n        return { canvas: ele, ctx };\n    }\n    _bindEvents(parentContainer) {\n        var _a;\n        this.unbindEvents();\n        this._ro = new MutationObserver((mutationList, observer) => {\n            this._resize(true);\n        });\n        (_a = this._ro) === null || _a === void 0 ? void 0 : _a.observe(parentContainer, {\n            attributes: true,\n            attributeFilter: ['style'],\n        });\n        window.addEventListener('scroll', this._resize);\n        window.addEventListener('resize', this._resize);\n        window.addEventListener(\"orientationchange\", this._resize);\n        on(this.el, 'mousedown', this._mousedown);\n        on(this.el, 'mouseleave', this._mouseleave);\n        on(window.document, 'mousemove', this._mousemove);\n        on(window.document, 'mouseup', this._mouseup);\n        on(window.document, 'mousewheel', this._mousewheel);\n        on(this.el, 'touchstart', this._mousedown);\n        on(this.el, 'touchmove', this._mousemove);\n        on(this.el, 'touchend', this._mouseup);\n        on(window.document, 'keyup', this._keyup);\n        on(window.document, 'keydown', this._keydown);\n        on(document.body, 'contextmenu', this._contextmenu);\n    }\n    destroy() {\n        this.unbindEvents();\n    }\n    get width() {\n        if (this.containerRect) {\n            return this.containerRect.width;\n        }\n        else {\n            return this.canvas.width;\n        }\n    }\n    get height() {\n        if (this.containerRect) {\n            return this.containerRect.height;\n        }\n        else {\n            return this.canvas.height;\n        }\n    }\n    setElePosition(ele, position = 'absolute') {\n        if (position === 'absolute') {\n            ele.style.position = position;\n            ele.style.left = '0px';\n            ele.style.right = '0px';\n            ele.style.top = '0px';\n            ele.style.bottom = '0px';\n        }\n        else {\n            /**\n             * 若textarea编辑时，文本超出屏幕宽度，即使body的overflow为hidden，\n             * 依旧会导致body向右侧scroll。\n             *\n             * 此时，将textarea的任意一个祖先元素设置为fixed，就能够解决该问题。\n             *\n             * 但是，如果除了fixed祖先元素之外，还有其他祖先元素带有transform属性，依然\n             * 会有上述问题。\n             *\n             * 如果将带有transform属性的祖先元素带有fixed属性，该问题就能被解决。\n             *\n             * 综上，将带有transform属性的textarea的祖先元素设置为fixed，能解决textarea\n             * 编辑时导致页面横移的缺陷。\n             */\n            ele.style.position = 'fixed';\n            ele.style.left = `${this.left}px`;\n            ele.style.width = `${this.width}px`;\n            ele.style.top = `${this.top}px`;\n            ele.style.height = `${this.height}px`;\n        }\n    }\n    /**\n     * 确定不是点击事件后，发送之前缓存的事件\n     */\n    _emitMouseEvents() {\n        for (let eventArg of this.mouseEventCache) {\n            this.opsManager[eventArg.type](...eventArg.args);\n        }\n        this.mouseEventCache = [];\n    }\n}\nexport default Container;\n","/**\n * 管理和服务器之间的数据传输\n *\n * 同步流程：\n * 1. 客户端向服务器发送最后一个包id: A\n * 2. 服务器向客户端发送最后一个包id: B\n * 3. 服务器向客户端发送这两个id之间的所有包, A => B\n * 4. 客户端完全接收到A => B，客户端判定同步完成，并执行接收到的数据快照\n * 5. 若客户端长时间没有收到这些包，则客户端再次向服务器发送同步指令\n *\n * 如果在同步过程中，接收到广播数据，暂时先不执行这些命令。保存起来，待同步结束一并执行\n */\nimport { showToast } from \"../../component/toast\";\n/**\n * 每个dataType队列，两个包之间的最小间隔\n */\nconst MINIMUM_BROADCAST_GAP_PER_DATATYPE = 70;\nconst overwritableTypes = ['select', 'select-hover', 'camera-bound', 'mouse-pointer', 'laser'];\n/**\n * 若10s内同步未完成，重新发送同步请求\n */\nconst ResendSyncRequestInterval = 10;\n/**\n * 发送5次还没有得到所有的同步数据时，不再请求同步\n */\nconst ResendSyncRequestLimit = 8;\nclass DataHub {\n    constructor(app, handler) {\n        /**\n         * 延迟广播发送数据\n         * 不同dataType应该走不同的timer队列，避免发送到一个包里面\n         */\n        this.debounceData = {};\n        /**\n         * 本地数据发送前，会猜测其在远程写入服务器时的server_pkg_id, 这里的id就是本地猜测的id，value是对应的数据\n         * 收到广播回包后，会根据这个id和回包实际得到的server_pkg_id比较，判断是否需要进一步修改\n         */\n        this.clientIdToData = {};\n        /**\n         * 0...lastContinueServerPkgId都已经在本地\n         */\n        this.lastContinueServerPkgId = -1;\n        /**\n         * id > serverPkgSinceLast的所有包的seq id数组\n         */\n        this.serverPkgSinceLast = [];\n        /**\n         * 本次同步最后一个包的id\n         */\n        this.lastPkgIdToSync = -1;\n        this.dataOfSync = {};\n        /**\n         * 是否正在同步中\n         */\n        this.isSynchronizing = false;\n        this._scheduleNextBroadcast = (debounceDataEntry, dataType) => {\n            return requestAnimationFrame(() => {\n                const now = new Date().valueOf();\n                if (now - debounceDataEntry.time < MINIMUM_BROADCAST_GAP_PER_DATATYPE) {\n                    /**\n                     * 生成该dataType的广播队列后，至少要隔一定时间才会发送\n                     * 如果没有到该间隔，则安排下一次requestAnimationFrame检查\n                     */\n                    debounceDataEntry.timer = this._scheduleNextBroadcast(debounceDataEntry, dataType);\n                }\n                else {\n                    this._doBroadcastData(debounceDataEntry, dataType);\n                }\n            });\n        };\n        this._doBroadcastData = (debounceDataEntry, dataType) => {\n            /**\n             * 时间到，发送数据\n             */\n            const data = this.app.room.mergeDebouncedData(debounceDataEntry.dataQueue, dataType);\n            const params = {\n                strategy: (dataType === 'snapshot') ? 1 : 2,\n                data: JSON.stringify(data),\n                client_pkg_id: debounceDataEntry.client_pkg_id\n            };\n            if (dataType !== 'snapshot') {\n                params.dataType = dataType;\n            }\n            this.handler.broadcastData(params);\n            this.clientIdToData[params.client_pkg_id] = data;\n            this.debounceData[dataType] = {\n                timer: null,\n                client_pkg_id: -1,\n                time: 0,\n                dataQueue: []\n            };\n        };\n        /**\n         * 一段时间后，没有完全收到同步需要的数据，则重试\n         */\n        this._setupResendSyncRequestTimer = (currRetryCount = 1) => {\n            /**\n             * 如果不clear，则连续两次同步请求时，第一个timer的句柄无法再获取，\n             * 导致clearTimeout无法取消第一个timer的回调函数\n             */\n            clearTimeout(this.resendSyncRequestTimer);\n            this.resendSyncRequestTimer = setTimeout(() => {\n                if (currRetryCount <= ResendSyncRequestLimit) {\n                    console.error(`白板-->，同步数据超时，第${currRetryCount + 1}次请求同步数据, ${this.lastContinueServerPkgId}`);\n                    this.handler.sendSyncRequest(this.lastContinueServerPkgId);\n                    this._setupResendSyncRequestTimer(currRetryCount + 1);\n                }\n                else {\n                    showToast({\n                        type: 'error',\n                        msg: '无法同步数据，请检查你的网络',\n                        time: 1000\n                    });\n                    console.error(`白板-->多次同步数据失败`);\n                }\n            }, ResendSyncRequestInterval * 1000);\n        };\n        this.app = app;\n        this.handler = handler;\n        this.bindEvents();\n    }\n    get room() {\n        return this.app.room;\n    }\n    /**\n     * 本地接收到的最后一个服务器包\n     */\n    get lastServerPkgId() {\n        if (this.serverPkgSinceLast.length > 0) {\n            return this.serverPkgSinceLast[this.serverPkgSinceLast.length - 1];\n        }\n        else {\n            return this.lastContinueServerPkgId;\n        }\n    }\n    /**\n     * 给本地包赋予一个服务器包id\n     * 该id需要大于最后一个服务器包id，以及上一个本地包虚拟id\n     */\n    get nextLocalFakeId() {\n        const lastServerPkgId = this.lastServerPkgId;\n        const inUseClientIds = Object.keys(this.clientIdToData).map(_ => Number(_)).sort();\n        if (inUseClientIds.length === 0) {\n            return lastServerPkgId + 1;\n        }\n        else if (lastServerPkgId >= inUseClientIds[inUseClientIds.length - 1]) {\n            return lastServerPkgId + 1;\n        }\n        else {\n            return inUseClientIds[inUseClientIds.length - 1] + 1;\n        }\n    }\n    /**\n     * 应用状态重置。一般用于测试\n     */\n    reset() {\n        for (let key in this.debounceData) {\n            if (this.debounceData[key].timer) {\n                cancelAnimationFrame(this.debounceData[key].timer);\n            }\n        }\n        this.debounceData = {};\n        this.clientIdToData = {};\n        this.lastContinueServerPkgId = -1;\n        this.serverPkgSinceLast = [];\n        this.lastPkgIdToSync = -1;\n        this.dataOfSync = {};\n        this.isSynchronizing = false;\n        clearTimeout(this.resendSyncRequestTimer);\n    }\n    bindEvents() {\n        this.handler.on('data', this.onData.bind(this));\n        this.handler.on('broadcastAck', this.onBroadcastAck.bind(this));\n        this.handler.on('syncRequestAck', this.onSendRequestAck.bind(this));\n        this.handler.on('syncRequestResponse', this.onSendRequestResponse.bind(this));\n    }\n    /**\n     * 接到其他用户发来的广播数据\n     * @param msg\n     */\n    onData(msg) {\n        const { data, server_pkg_id } = msg;\n        this._updateServerPkgInfo(server_pkg_id, server_pkg_id);\n        if (this.isSynchronizing) {\n            /**\n             * 正在同步中，暂时不执行\n             */\n            this.dataOfSync[server_pkg_id] = data;\n        }\n        else {\n            let { type, value } = data;\n            if (type === 'snapshot') {\n                this.room.execSnapshot({\n                    snapshot: value,\n                    pkgId: server_pkg_id\n                });\n            }\n            else if (type === 'broadcaster') {\n                this.app.vision.receiveBroadcaster(value);\n            }\n            else if (type === 'snapshotArr') {\n                this.room.execBatchSnapshots(value.map(_ => {\n                    return {\n                        snapshot: _,\n                        pkgId: server_pkg_id\n                    };\n                }));\n            }\n        }\n    }\n    /**\n     * 同步步骤一：\n     * 客户端通知服务器客户端最后一个包的序列号\n     */\n    sendSyncRequest() {\n        console.log('白板--> 请求同步数据, 是否正在同步数据', this.isSynchronizing);\n        if (this.isSynchronizing) {\n            return;\n        }\n        this.isSynchronizing = true;\n        this.handler.sendSyncRequest(this.lastContinueServerPkgId);\n        // 设置服务器最后一个包为-1，收到syncRequestAck之后，会更新该变量\n        this.lastPkgIdToSync = -1;\n        /**\n         * 服务器上存在，本地不存在的数据。同步后执行\n         */\n        this.dataOfSync = {};\n        /**\n         * 一段时间后，没有完全收到同步需要的数据，则重试\n         */\n        this._setupResendSyncRequestTimer();\n    }\n    /**\n     * 同步步骤二：\n     * 服务器通知客户端，服务器中的最后一个包的序列号\n     */\n    onSendRequestAck(message) {\n        this.lastPkgIdToSync = message.last_server_pkg_id;\n        this._updateAppAfterSync();\n    }\n    /**\n     * 同步步骤三：\n     * 服务器给客户端返回客户端缺失的包，会分块返回\n     * 当所有包都补齐了之后，客户端执行这些包\n     */\n    onSendRequestResponse(message) {\n        //步骤二告知客户端没有新包需要同步\n        if (!this.isSynchronizing)\n            return;\n        let { start_server_pkg_id, end_server_pkg_id, packages } = message;\n        if (!Array.isArray(packages)) {\n            packages = [];\n        }\n        for (let pkg of packages) {\n            this.dataOfSync[pkg.server_pkg_id] = pkg.data;\n        }\n        this._updateServerPkgInfo(start_server_pkg_id, end_server_pkg_id);\n        this._updateAppAfterSync();\n    }\n    /**\n     * 收到广播回包\n     * 更新应用最后一个连续的server_pkg_id, 以及server_pkg_id之后的不连续包的数组\n     * @param message\n     */\n    onBroadcastAck(message) {\n        const { server_pkg_id, client_pkg_id } = message;\n        this._updateServerPkgInfo(server_pkg_id, server_pkg_id);\n        const data = this.clientIdToData[client_pkg_id];\n        delete this.clientIdToData[client_pkg_id];\n        /**\n         * 如果服务器中该包的顺序和预测的不同，则需要更新room中的快照数据\n         */\n        if (!data) {\n            console.warn(`白板--> broadcastAck, client_pkg_id:${client_pkg_id}的数据不存在`);\n        }\n        if (data && data.type === 'snapshot' && client_pkg_id !== server_pkg_id) {\n            this.app.room.cacheSnapshot({\n                pkgId: server_pkg_id,\n                snapshot: data.value\n            });\n        }\n        else if (data && data.type === 'snapshotArr' && client_pkg_id !== server_pkg_id) {\n            data.value.forEach(_ => {\n                this.app.room.cacheSnapshot({\n                    pkgId: server_pkg_id,\n                    snapshot: _\n                });\n            });\n        }\n    }\n    sendSnapshot(snapshot) {\n        if (overwritableTypes.includes(snapshot.data.type)) {\n            return this.broadcastData({\n                data: {\n                    type: 'snapshot',\n                    value: snapshot\n                }\n            }, snapshot.opId);\n        }\n        else {\n            return this.broadcastData({\n                data: {\n                    type: 'snapshot',\n                    value: snapshot\n                }\n            }, 'snapshot');\n        }\n    }\n    broadcastRoomState(value, dataType) {\n        return this.broadcastData({\n            data: {\n                type: dataType,\n                value: value\n            }\n        }, dataType);\n    }\n    broadcastData(params, dataType) {\n        if (!this.debounceData.hasOwnProperty(dataType) || !this.debounceData[dataType].timer) {\n            const client_id = this.nextLocalFakeId;\n            this.debounceData[dataType] = {\n                timer: null,\n                time: new Date().valueOf(),\n                client_pkg_id: client_id,\n                dataQueue: []\n            };\n            /**\n             * 占位。这样计算nextLocalFakeId时，不会和现在的client_id重复\n             */\n            this.clientIdToData[client_id] = {};\n        }\n        const debounceDataEntry = this.debounceData[dataType];\n        debounceDataEntry.dataQueue.push(params.data);\n        if (debounceDataEntry.timer) {\n            return debounceDataEntry.client_pkg_id;\n        }\n        debounceDataEntry.timer = this._scheduleNextBroadcast(debounceDataEntry, dataType);\n        return debounceDataEntry.client_pkg_id;\n    }\n    /**\n     * 判断是否同步结束，若同步结束，则执行同步时拉取的数据\n     */\n    _updateAppAfterSync() {\n        if (this.lastContinueServerPkgId >= this.lastPkgIdToSync) {\n            /**\n             * 防御性编程。防止isSynchronizing为false时，依旧有同步timer正在运行，然后报同步失败的错误\n             */\n            clearTimeout(this.resendSyncRequestTimer);\n        }\n        if (this.lastContinueServerPkgId >= this.lastPkgIdToSync && this.isSynchronizing) {\n            console.log(`白板--> 同步数据接收完毕: ${this.lastContinueServerPkgId}--${this.lastPkgIdToSync}`);\n            this.isSynchronizing = false;\n            if (LOG) {\n                console.log('白板-->', 'event:sync_finished');\n            }\n            this.app.emit('event:editable:change', this.app.editable);\n            this.app.dispatcher.emit('event:sync_finished');\n            const data = this._getDataToSync();\n            let broadcasterData;\n            for (let i = data.length - 1; i >= 0; i--) {\n                if (data[i].data.type === 'broadcaster') {\n                    broadcasterData = data[i].data.value;\n                    break;\n                }\n            }\n            const snapshotData = [];\n            for (let pkg of data) {\n                if (pkg.data.type === 'snapshot') {\n                    snapshotData.push({\n                        pkgId: pkg.pkgId,\n                        snapshot: pkg.data.value\n                    });\n                }\n                else if (pkg.data.type === 'snapshotArr') {\n                    for (let snapshot of pkg.data.value) {\n                        snapshotData.push({\n                            pkgId: pkg.pkgId,\n                            snapshot: snapshot\n                        });\n                    }\n                }\n            }\n            if (broadcasterData) {\n                this.app.vision.receiveBroadcasterAfterSync(broadcasterData);\n            }\n            this.app.room.execBatchSnapshots(snapshotData, (hasBoundary) => {\n                if (!hasBoundary) {\n                    /**\n                     * 如果未设置过boundary, 且存在文档页面，则设置初始boundary\n                     */\n                    if (this.app.defaultCameraBound) {\n                        this.app.setCameraBound(this.app.defaultCameraBound);\n                    }\n                    else if (this.app.hasBackground()) {\n                        this.app.fitToContent(false);\n                    }\n                }\n            });\n        }\n    }\n    _getDataToSync() {\n        const seqIds = Object.keys(this.dataOfSync).sort((a, b) => {\n            return Number(a) - Number(b);\n        });\n        return seqIds.map(id => {\n            try {\n                return {\n                    data: JSON.parse(this.dataOfSync[id]),\n                    pkgId: Number(id)\n                };\n            }\n            catch (_a) {\n                return undefined;\n            }\n        }).filter(_ => _);\n    }\n    /**\n     * 更新 lastContinueServerPkgId, 以及serverPkgSinceLast\n     * @param start: 第一个包\n     * @param end :  最后一个包 [start, end]的每个包均存在\n     *\n     * 首先将start->end序列号均加入serverPkgSinceLast中，然后再更新\n     */\n    _updateServerPkgInfo(start, end) {\n        let i = 0, curr = start;\n        //合并serverPkgSinceLast和[start, end]\n        while (i <= this.serverPkgSinceLast.length) {\n            if (curr > end) {\n                break;\n            }\n            else if (curr <= this.lastContinueServerPkgId) {\n                curr++;\n                continue;\n            }\n            else if (i === this.serverPkgSinceLast.length) {\n                /**\n                 * 将[curr, end]压入serverPkgSinceLast的队尾\n                 */\n                const arr = [];\n                while (curr <= end) {\n                    arr.push(curr);\n                    curr += 1;\n                }\n                this.serverPkgSinceLast.splice(i, 0, ...arr);\n            }\n            else if (this.serverPkgSinceLast[i] < curr) {\n                i++;\n            }\n            else if (this.serverPkgSinceLast[i] === curr) {\n                curr++;\n                i++;\n            }\n            else {\n                this.serverPkgSinceLast.splice(i, 0, curr);\n                curr++;\n                i++;\n            }\n        }\n        //将serverPkgSinceLast中接在lastContinueServerPkgId后面的包提取出来，然后更新lastContinueServerPkgId\n        i = 0;\n        for (; i < this.serverPkgSinceLast.length; i++) {\n            if (this.serverPkgSinceLast[i] === this.lastContinueServerPkgId + i + 1) {\n                continue;\n            }\n            else {\n                break;\n            }\n        }\n        this.lastContinueServerPkgId += i;\n        this.serverPkgSinceLast.splice(0, i);\n    }\n}\nexport default DataHub;\n","/**\n * page，board类操作都必须生成快照，然后通过connector的sendData方法发送给其他客户端。\n *\n * syncRequest，resetRequest这一类同步操作不需要生成快照。它们属于同步逻辑。\n */\nimport Container from \"./container\";\nimport OpsManager from \"./ops/OpsManager\";\nimport Dispatcher from \"./misc/dispatcher\";\nimport Room from \"./room\";\nimport DataHub from \"./dataHub\";\nimport { TouchPlatformArray, PlatformArray } from \"./types\";\nimport PreviewFactory from \"./previewFactory\";\nimport AppConfig from \"./config\";\nimport Camera from \"./camera\";\nimport validate from \"../util/validate\";\nimport Player from \"./player\";\nimport drawConfig from \"./ops/DrawOp/drawConfig\";\nimport Simulator from \"./simulator\";\nimport Vision from \"./camera/vision\";\nimport { showToast } from \"../component/toast\";\nimport { popupImageChooserAndAddImage, uploadAndAddImage } from \"./media/util\";\nimport isBase64 from 'is-base64';\nimport textConfig from \"./ops/TextOp/textConfig\";\nclass App {\n    constructor(opts) {\n        /**\n         * 是否是录像模式\n         */\n        this.isRecordPlayer = false;\n        /**\n         * 编辑权限是否开启\n         */\n        this.editEnabled = false;\n        /**\n         * 是否展示鼠标\n         */\n        this.showCursor = false;\n        /**\n         * 信令是否处于连接状态\n         */\n        this.isConnected = false;\n        this.account = opts.account;\n        this.nickname = opts.nickname ? opts.nickname : opts.account;\n        this.platform = opts.platform;\n        this.defaultCameraBound = opts.cameraBound;\n        this.disableAutoResize = opts.disableAutoResize !== undefined ? opts.disableAutoResize : true;\n        this.nim = opts.nim;\n        this.simulator = new Simulator(this);\n        this.configInstance = new AppConfig(this);\n        this.dispatcher = new Dispatcher();\n        this.opsManager = new OpsManager(this);\n        this.opsManager.extendDefaultOps();\n        this.dataHub = new DataHub(this, opts.connector);\n        this.container = new Container(this);\n        this.room = new Room(this, this.dataHub);\n        this.container.addOpsManager(this.opsManager);\n        this.opsManager.addContainer(this.container);\n        this.camera = new Camera(this, this.defaultCameraBound);\n        this.vision = new Vision(this);\n        this.isRecordPlayer = opts.isRecordPlayer ? true : false;\n        if (!opts.isRecordPlayer) {\n            this.previewFactory = new PreviewFactory(this);\n        }\n        if (opts.isRecordPlayer) {\n            this.player = new Player(this);\n        }\n        this.setContainer(opts.container);\n    }\n    get ifDeviceSupportOrientation() {\n        return TouchPlatformArray.includes(this.platform.toLowerCase());\n    }\n    /**\n     * 当编辑权限开启，且不处于同步时，才能够编辑\n     */\n    get editable() {\n        return this.editEnabled && !this.dataHub.isSynchronizing && this.isConnected;\n    }\n    get appConfig() {\n        return this.configInstance.getAppConfig();\n    }\n    getStrokeWidth() {\n        return drawConfig.strokeWidth;\n    }\n    getOpacity() {\n        return drawConfig.opacity;\n    }\n    getColor() {\n        return drawConfig.strokeColor;\n    }\n    getRedoCount() {\n        return this.opsManager.opMap['redo'].getCount();\n    }\n    getUndoCount() {\n        return this.opsManager.opMap['undo'].getCount();\n    }\n    isClearAvailable() {\n        return this.opsManager.opMap['clear'].isAvailable();\n    }\n    isTextAreaFocus() {\n        return this.opsManager.opMap['text'].isFocus;\n    }\n    getSelectedIds() {\n        return this.opsManager.opMap['select'].getSelectedIds();\n    }\n    getZoomFactor() {\n        return this.camera.zoomFactor;\n    }\n    getCameraBound() {\n        return this.camera.getContainerWorldRect();\n    }\n    setAppConfig(config) {\n        this.configInstance.setAppConfig(config);\n    }\n    setContainer(el) {\n        el.innerHTML = '';\n        this.container.appendTo(el);\n    }\n    /**\n     * sdk初始化之后，请求同步数据\n     *\n     * 主播登录后，首先尝试恢复数据。恢复数据后，向其他用户广播恢复的数据\n     * 主播登录需要置空所有其他用户\n     * 非主播登录则需要向主播发送同步请求\n     */\n    readyToSyncData() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.readyToSyncData');\n        }\n        document.body.style.cursor = 'auto';\n        this.dataHub.sendSyncRequest();\n    }\n    setIsConnected(connected) {\n        this.isConnected = connected;\n        if (!this.isConnected) {\n            document.body.style.cursor = 'auto';\n        }\n    }\n    resetState() {\n        this.room.reset();\n        this.dataHub.reset();\n    }\n    addImage(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addImage', opt);\n        }\n        validate.validate('drawPlugin.addImage', opt, {\n            url: {\n                type: 'string',\n                isRequire: true\n            },\n            width: {\n                type: 'number'\n            },\n            height: {\n                type: 'number'\n            }\n        });\n        if (isBase64(opt.url) || isBase64(opt.url, { allowMime: true })) {\n            /**\n             * 先将base64图片上传到nos服务器，再加入白板中\n             */\n            uploadAndAddImage(this, { dataURL: opt.url }, { width: opt.width, height: opt.height });\n        }\n        else if (opt.url.length > 10000) {\n            console.error('白板-->', 'drawPlugin.addImage opt.url长度不应该大于10000');\n        }\n        else {\n            this.emit('op:image:upload', opt.url, {\n                width: opt.width,\n                height: opt.height\n            });\n        }\n    }\n    /**\n     * 选择本地图片\n     */\n    addLocalImage(opt = {}) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addLocalImage', opt);\n        }\n        validate.validate('drawPlugin.addLocalImage', opt, {\n            width: {\n                type: 'number'\n            },\n            height: {\n                type: 'number'\n            }\n        });\n        popupImageChooserAndAddImage(this, { width: opt.width, height: opt.height });\n    }\n    addVideo(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addVideo', opt);\n        }\n        validate.validate('drawPlugin.addVideo', opt, {\n            url: {\n                type: 'string',\n                isRequire: true\n            },\n            width: {\n                type: 'number'\n            }\n        });\n        this.emit('op:video:insert', opt.url, {\n            width: opt.width\n        });\n    }\n    /**\n     * 设置页面的背景\n     * @param url\n     * @param width\n     * @param height\n     */\n    setPageBackground(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setPageBackground', opt);\n        }\n        validate.validate('drawPlugin.setPageBackground', opt, {\n            url: {\n                type: 'string',\n                isRequire: true\n            },\n            width: {\n                type: 'number',\n                isRequire: true\n            },\n            height: {\n                type: 'number',\n                isRequire: true\n            }\n        });\n        this.emit('op:background:imageUpload', opt.url, {\n            width: opt.width,\n            height: opt.height,\n            pageIndex: opt.pageIndex\n        });\n    }\n    /**\n     * 当前页面是否有background\n     */\n    hasBackground() {\n        return this.room.currBoard.currPage.backgroundSnapshot ? true : false;\n    }\n    /**\n     * 添加文档\n     */\n    addDoc(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addDoc', opt);\n        }\n        validate.validate('drawPlugin.addDoc', opt, {\n            docName: {\n                type: 'string',\n                isRequire: true\n            },\n            params: {\n                type: 'array',\n                isRequire: true\n            }\n        });\n        for (let i = 0; i < opt.params.length; i++) {\n            validate.validate(`drawPlugin.addDoc opt.params[${i}]`, opt.params[i], {\n                url: {\n                    type: 'string',\n                    isRequire: true\n                },\n                width: {\n                    type: 'number',\n                    isRequire: true\n                },\n                height: {\n                    type: 'number',\n                    isRequire: true\n                }\n            });\n        }\n        if (opt.params.length === 0) {\n            throw new Error('addDoc参数中params的数组长度必须大于0');\n        }\n        const { docName, params } = opt;\n        const count = Object.keys(this.room.boards).filter(name => {\n            return name.startsWith(docName);\n        }).length;\n        if (count === 0) {\n            this.addBoard(docName, params.length);\n        }\n        else {\n            this.addBoard(docName + '-' + count, params.length);\n        }\n        for (let i = 0; i < params.length; i++) {\n            this.setPageBackground({\n                url: params[i].url,\n                width: params[i].width,\n                height: params[i].height,\n                pageIndex: i\n            });\n        }\n    }\n    setTool(toolName) {\n        this.emit(`op:${toolName}:activate`);\n    }\n    setFontsize(fontsize) {\n        this.emit('op:text:fontsize', fontsize);\n    }\n    setFontFamily(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setFontFamily', JSON.stringify(opt));\n        }\n        if (!opt.fontFace && !opt.fontFamily) {\n            return console.error('白板--> drawPlugin.setFontFamily必须提供fontFamily或者fontFace');\n        }\n        if (opt.fontFace && Array.isArray(opt.fontFace) && opt.fontFace.length === 0) {\n            return console.error('白板--> setFontFamily。你设置了fontFace为数组, 但是数组长度为0');\n        }\n        if (opt.fontFamily && LOG) {\n            console.log(`白板--> 设置字体为: ${opt.fontFamily}, 您提供的字体应该在各个设备中均可用。如果某些设备中字体不可用，请同时设置opt.fontFace，作为字体的下载地址`);\n        }\n        if (opt.fontFace && LOG) {\n            console.log(`你设置了fontFace, 请保证该URL能被您用户的设备访问, 可以通过在web端检查浏览器的Network->font检测字体是否被下载`);\n        }\n        if (opt.fontFamily) {\n            textConfig.setFontFamily(opt.fontFamily);\n        }\n        if (opt.fontFace && Array.isArray(opt.fontFace)) {\n            textConfig.setFontFace(opt.fontFace);\n        }\n        else if (opt.fontFace) {\n            textConfig.setFontFace([opt.fontFace]);\n        }\n        /**\n         * 更新已实例化的textArea，pre元素的fontfamily\n         */\n        this.opsManager.opMap['text'].updateFontFamily();\n    }\n    setColor(color) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setColor', color);\n        }\n        drawConfig.setStrokeColor(color);\n        this.emit('event:appState:change', 'renderColor', color);\n    }\n    setShapeFill() {\n        console.error('setShapeFill已弃用。如果你需要设置图形填充，可以直接设置tool为rect-fill, 或者ellipse-fill');\n    }\n    setStrokeWidth(width) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setStrokeWidth', width);\n        }\n        drawConfig.setStrokeWidth(width);\n        this.emit('event:appState:change', 'renderWidth', width);\n    }\n    setOpacity(opacity) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setOpacity', opacity);\n        }\n        if (opacity > 1 || opacity < 0) {\n            return console.error('drawPlugin.setOpacity的透明度必须大于0，小于等于1');\n        }\n        drawConfig.setOpacity(opacity);\n        this.emit('event:appState:change', 'opacity', opacity);\n    }\n    setShowCursor(value) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setShowCursor', value);\n        }\n        this.showCursor = value;\n    }\n    enableDraw(editEnabled) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.enableDraw', editEnabled);\n        }\n        validate.validate('drawPlugin.enableDraw', { editEnabled }, {\n            editEnabled: {\n                type: 'boolean',\n                isRequire: true\n            }\n        });\n        if (this.editEnabled === editEnabled) {\n            return;\n        }\n        /**\n         * 不可编辑时，鼠标样式需要还原\n         */\n        if (!editEnabled) {\n            document.body.style.cursor = 'auto';\n        }\n        this.editEnabled = editEnabled;\n        this.opsManager.hooks.enableDrawChange.call(editEnabled);\n        this.emit('event:editable:change', this.editable);\n    }\n    enableCameraTransform(enable = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.enableCameraTransform', enable);\n        }\n        this.setAppConfig({\n            cameraTransformEnabled: enable\n        });\n    }\n    resetCamera(animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.resetCamera');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:reset-camera:exec', animate);\n        }\n    }\n    setCameraBound(boundary, animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setCameraBound boundary: ', boundary, 'animate: ', animate);\n        }\n        const valid = validate.validate('drawPlugin.setCameraBound', boundary, {\n            centerX: {\n                type: 'number',\n                isRequire: true\n            },\n            centerY: {\n                type: 'number',\n                isRequire: true\n            },\n            width: {\n                type: 'number',\n                isRequire: true\n            },\n            height: {\n                type: 'number',\n                isRequire: true\n            }\n        });\n        if (valid) {\n            this.emit('op:camera-bound:send', boundary, animate);\n        }\n    }\n    fitToContent(animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.fitToContent');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:fit-to-content:exec', animate);\n        }\n    }\n    fitToDoc(animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.fitToDoc');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:fit-to-doc:exec', animate);\n        }\n    }\n    zoomIn() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.zoomIn');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:zoom:in');\n        }\n    }\n    zoomOut() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.zoomOut');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:zoom:out');\n        }\n    }\n    zoomTo(scale, animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.zoomTo: ', scale, ' animate: ', animate);\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:zoom:to', scale, animate);\n        }\n    }\n    undo() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.undo');\n        }\n        this.emit('op:undo:exec');\n    }\n    redo() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.redo');\n        }\n        this.emit('op:redo:exec');\n    }\n    clear() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.clear');\n        }\n        this.emit('op:clear:exec');\n    }\n    duplicate() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.duplicate');\n        }\n        this.emit('op:duplicate:exec');\n    }\n    /**\n     * 删除白板中选中的元素\n     */\n    deleteSelectedElements() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.deleteSelectedElements');\n        }\n        this.emit('op:delete:exec');\n    }\n    addPage(opt) {\n        if (LOG && typeof opt === 'object') {\n            console.log('白板-->', 'drawPlugin.addPage', JSON.stringify(opt));\n        }\n        else if (LOG) {\n            console.log('白板-->', 'drawPlugin.addPage, insertAfter', opt);\n        }\n        if (typeof opt === 'number') {\n            opt = {\n                insertAfter: opt\n            };\n        }\n        else if (!opt) {\n            opt = {};\n        }\n        this.emit('op:page:add', opt);\n    }\n    deletePage(index) {\n        const board = this.room.currBoard;\n        const builtInIndex = board.getPageBuiltInIndex(index);\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.deletePage: ', index, 'builtInIndex', builtInIndex);\n        }\n        this.emit('op:page:delete', builtInIndex);\n    }\n    gotoPage(index) {\n        const board = this.room.currBoard;\n        const builtInIndex = board.getPageBuiltInIndex(index);\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoPage: ', index, 'buildInIndex', builtInIndex);\n        }\n        if (isNaN(builtInIndex)) {\n            console.error(`白板--> 第${index + 1}不存在，当前文档内的页面总数为: ${this.room.currBoard.pageNames.length}`);\n        }\n        else {\n            this.emit('op:page:goto', builtInIndex);\n        }\n    }\n    gotoFirstPage() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoFirstPage');\n        }\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex > 0) {\n            this.gotoPage(0);\n        }\n    }\n    gotoPrevPage() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoPrevPage');\n        }\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex > 0) {\n            this.gotoPage(currPageIndex - 1);\n        }\n    }\n    gotoNextPage() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoNextPage');\n        }\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex < board.pageNames.length - 1) {\n            this.gotoPage(currPageIndex + 1);\n        }\n    }\n    gotoLastPage() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoLastPage');\n        }\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex < board.pageNames.length - 1) {\n            this.gotoPage(board.pageNames.length - 1);\n        }\n    }\n    gotoBoard(boardName) {\n        validate.validate('drawPlugin.gotoBoard', { boardName }, {\n            boardName: {\n                type: 'string',\n                isRequire: true\n            }\n        });\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoBoard:', boardName);\n        }\n        this.emit('op:board:goto', boardName);\n    }\n    addBoard(boardName, pageCount) {\n        validate.validate('drawPlugin.addBoard', { boardName }, {\n            boardName: {\n                type: 'string',\n                isRequire: true\n            }\n        });\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addBoard, boardName:', boardName, ' pageCount:', pageCount);\n        }\n        this.emit('op:board:add', boardName, pageCount);\n    }\n    deleteBoard(boardName) {\n        validate.validate('drawPlugin.deleteBoard', { boardName }, {\n            boardName: {\n                type: 'string',\n                isRequire: true\n            }\n        });\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.deleteBoard: ', boardName);\n        }\n        this.emit('op:board:delete', boardName);\n    }\n    getPageInfos() {\n        return {\n            pageNames: this.opsManager.currBoard.pageNames.slice(),\n            currPage: this.opsManager.currBoard.currIndex,\n            activeIndex: this.opsManager.currBoard.getCurrPageIndex(),\n            pagePayloads: this.opsManager.currBoard.payloadOfPages\n        };\n    }\n    getBoardInfos() {\n        return {\n            boardNames: Object.keys(this.room.boards),\n            currBoard: this.room.currIndex,\n            currBoardDisplayName: this.room.currBoard.displayName,\n            boardDisplayNames: this.room.getBoardDisplayNames()\n        };\n    }\n    bindPreviewContainer(opts) {\n        var _a;\n        (_a = this.previewFactory) === null || _a === void 0 ? void 0 : _a.bindPreviewContainer(opts);\n    }\n    /**\n     * 开发者调用app.emit向内部模块发送事件\n     * @param rest\n     */\n    emit(events, ...args) {\n        this.dispatcher.emit(events, ...args);\n    }\n    /**\n     * 开发者调用app.on监听内部模块派发的事件\n     */\n    on(event, fn) {\n        this.dispatcher.on(event, fn);\n    }\n    /**\n     * 开发者调用app.on监听内部模块派发的事件\n     */\n    off(event, fn) {\n        this.dispatcher.off(event, fn);\n    }\n    getOpDoc(type) {\n        return this.opsManager.getOpDoc(type);\n    }\n    getCurrTool() {\n        var _a;\n        return (_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type;\n    }\n    /**\n     * 销毁各类事件监听，否则可能会造成内存泄漏\n     */\n    destroy() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.destroy');\n        }\n        this.dispatcher.destroy();\n        this.container.destroy();\n        document.body.style.cursor = 'auto';\n    }\n    addRecordData(records) {\n        var _a;\n        (_a = this.player) === null || _a === void 0 ? void 0 : _a.addRecordData(records);\n    }\n    seekTo(time) {\n        var _a;\n        (_a = this.player) === null || _a === void 0 ? void 0 : _a.seekTo(time);\n    }\n    /**\n     * 录像回放时，切换观看者的视角\n     * @param viewer\n     */\n    setViewer(viewer) {\n        var _a;\n        (_a = this.player) === null || _a === void 0 ? void 0 : _a.setViewer(viewer);\n    }\n    setSelfAsBroadcaster() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setSelfAsBroadcaster');\n        }\n        this.vision.setSelfAsBroadcaster();\n    }\n    /**\n     * 停止设置自己为广播者\n     */\n    unsetSelfAsBroadcaster() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.unsetSelfAsBroadcaster');\n        }\n        this.vision.unsetSelfAsBroadcaster();\n    }\n    /**\n     * 设置当前用户为跟随者，只有房间状态存在broadcaster时才可用\n     * 设置的目的是为了回放时接收到此数据，然后正确的还原用户当时的视角\n     */\n    setSelfAsFollower() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setSelfAsFollower');\n        }\n        this.vision.setSelfAsFollower();\n    }\n    /**\n     * 设置自己为自由视角。通过setSelfAsFollower可以重新设置为跟随者\n     */\n    setSelfAsFreeObserver() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setSelfAsFreeObserver');\n        }\n        this.vision.setSelfAsFreeObserver();\n    }\n    exportAsImage() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.exportAsImage');\n        }\n        //导出图片\n        const data = this.previewFactory.generatePreviewToDataUrl({\n            pageIndex: this.room.currBoard.currIndex.toString(),\n            boardName: this.room.currIndex,\n            state: 'ready'\n        });\n        var a = document.createElement(\"a\"); //Create <a>\n        a.href = data;\n        let boardName = this.room.currBoard.boardName === 'whiteboard' ? '白板' : this.room.currBoard.boardName;\n        let pageName = this.room.currBoard.currPage.pageIndex;\n        let pageIndex = this.room.currBoard.pageNames.indexOf(pageName);\n        a.download = `${boardName}-${pageIndex + 1}.png`; //File name Here\n        a.click(); //Downloaded file\n    }\n    /**\n     * 从白板服务器得到userList，并通过事件传递给外部。\n     * 外部可以根据此事件做出响应\n     */\n    setMemberList(userList) {\n        this.emit('event:member:change', userList.slice());\n    }\n}\nconst DrawPlugin = ({\n    getInstance: function (opt) {\n        if (LOG) {\n            console.log('白板-->', 'DrawPlugin.getInstance arguments:', opt);\n        }\n        validate.validate('DrawPlugin.instance', opt, {\n            account: {\n                type: 'string',\n                isRequire: true\n            },\n            nickname: {\n                type: 'string',\n                isRequire: false\n            },\n            container: {\n                type: 'dom',\n                isRequire: true\n            },\n            platform: {\n                type: 'string',\n                isRequire: true,\n                enum: PlatformArray\n            },\n            connector: {\n                type: 'object',\n                isRequire: true\n            },\n            nim: {\n                type: 'object',\n                isRequire: true\n            }\n        });\n        const app = new App(opt);\n        return app;\n    }\n});\nexport { App };\nexport default DrawPlugin;\n","import { hideToast, showToast } from \"../../component/toast\";\nlet drawPlugin;\nlet imageDimension = {};\nconst AcceptTypesArr = ['jpg', 'jpeg', 'png', 'bmp', 'webp'];\nconst imageInput = document.createElement('input');\nwindow.onload = () => {\n    document.body.appendChild(imageInput);\n    imageInput.style.position = 'absolute';\n    imageInput.style.visibility = 'hidden';\n    imageInput.type = 'file';\n    imageInput.accept = 'image/*';\n    imageInput.onchange = (ev) => {\n        if (!drawPlugin) {\n            return console.error('白板--> uploadAndAddImage必须先设置drawPlugin');\n        }\n        const fileInput = ev.target;\n        const file = ev.target.files[0];\n        if (file && file.size && file.size > 10 * 1024 * 1024) {\n            return showToast({\n                msg: '图片大小不能超过10M',\n                type: 'error'\n            });\n        }\n        const nameParts = file.name.split('.');\n        const suffix = nameParts[nameParts.length - 1];\n        const isValidType = AcceptTypesArr.includes(suffix.toLowerCase());\n        if (!isValidType) {\n            return showToast({\n                msg: `当前仅支持${AcceptTypesArr.join(',')}格式文件`,\n                time: 3,\n                type: 'error'\n            });\n        }\n        uploadAndAddImage(drawPlugin, { fileInput }, imageDimension);\n    };\n};\n/**\n * 先将base64图片上传到nos中，然后添加到白板中\n * @param app\n * @param base64Url\n */\nexport const uploadAndAddImage = (app, opt, dimensions) => {\n    if (!opt.dataURL && !opt.fileInput) {\n        return console.error('白板--> uploadAndAddImage dataURL和fileInput至少提供一个');\n    }\n    const nim = app.nim;\n    nim.previewFile(Object.assign(Object.assign({}, opt), { beginupload(data) {\n            // - 如果开发者传入 fileInput, 在此回调之前不能修改 fileInput\n            // - 在此回调之后可以取消图片上传, 此回调会接收一个参数 `upload`, 调用 `upload.abort()` 来取消文件上传\n            // 重置input的value为null，否则重新选择相同的文件不会触发onChange\n            // 在这里修改fileInput的感觉很不好。previewFile这个函数不应该依赖于fileInput的\n            if (opt.fileInput) {\n                opt.fileInput.value = '';\n            }\n        }, done: function (err, res) {\n            hideToast();\n            if (err) {\n                console.error('图片上传失败', err);\n                showToast({\n                    msg: '上传失败',\n                    type: 'error',\n                    time: 3\n                });\n            }\n            else {\n                app.addImage({\n                    url: res.url,\n                    width: dimensions.width,\n                    height: dimensions.height\n                });\n            }\n        } }));\n    showToast({\n        msg: '上传图片中...',\n        time: 100000,\n        type: 'info'\n    });\n};\nexport const popupImageChooserAndAddImage = (app, dimensions) => {\n    drawPlugin = app;\n    imageDimension = dimensions;\n    imageInput.click();\n};\n","import EventEmitter from 'eventemitter3';\nclass Dispatcher extends EventEmitter {\n    subMany(eventDict) {\n        for (const key in eventDict) {\n            this.on(key, eventDict[key]);\n        }\n    }\n    destroy() {\n        this.eventNames().forEach(name => {\n            this.removeAllListeners(name);\n        });\n    }\n}\nexport default Dispatcher;\n","/**\n * 解决注册事件时兼容性问题\n * @param el\n * @param name\n * @param cb\n */\nexport function on(el, name, cb) {\n    el.addEventListener(name, cb);\n}\nexport function off(el, name, cb) {\n    el.removeEventListener(name, cb);\n}\n","export const drawCurve = (ctx, points, k = 0.3) => {\n    if (k > 0.5 || k <= 0) {\n        console.error('k should be between 0 and 0.5');\n    }\n    ctx.beginPath();\n    if (points.length <= 2) {\n        if (points.length === 2) {\n            ctx.moveTo(...points[0]);\n            ctx.lineTo(...points[1]);\n        }\n    }\n    else {\n        ctx.moveTo(...points[0]);\n        let lastP = points[0];\n        let currP = points[1];\n        // let segPoint1: Point = [k * lastP[0] + (1-k) * currP[0], k * lastP[1] + (1-k) * currP[1]]\n        let ctrlPtInLastSeg = [k * lastP[0] + (1 - k) * currP[0], k * lastP[1] + (1 - k) * currP[1]];\n        if (Math.abs(k - 0.5) > 0.01) {\n            ctx.lineTo(...ctrlPtInLastSeg);\n        }\n        lastP = currP;\n        for (let i = 2; i < points.length; i++) {\n            currP = points[i];\n            let ctrlPtInSeg1 = [(1 - k) * lastP[0] + k * currP[0], (1 - k) * lastP[1] + k * currP[1]];\n            let ctrlPtInSeg2 = [k * lastP[0] + (1 - k) * currP[0], k * lastP[1] + (1 - k) * currP[1]];\n            ctx.quadraticCurveTo(...lastP, ...ctrlPtInSeg1);\n            ctx.lineTo(...ctrlPtInSeg2);\n            ctrlPtInLastSeg = ctrlPtInSeg2;\n            lastP = currP;\n        }\n        ctx.lineTo(...points[points.length - 1]);\n    }\n};\n","/**\n * 图像检测帮助函数\n */\nimport { max, min } from \"./util\";\n/**\n * 两点之间距离的平方\n */\nexport function distSqrt(p1, p2) {\n    return (p1[0] - p2[0]) * (p1[0] - p2[0]) + (p1[1] - p2[1]) * (p1[1] - p2[1]);\n}\nexport function dist(p1, p2) {\n    return Math.sqrt(distSqrt(p1, p2));\n}\n/**\n * 检测两个矩形是否有重叠区域\n * @param rect1\n * @param rect2\n */\nexport function rectCollide(rect1, rect2) {\n    return !(rect1.sx > rect2.sx + rect2.w ||\n        rect1.sx + rect1.w < rect2.sx ||\n        rect1.sy > rect2.sy + rect2.h ||\n        rect1.sy + rect1.h < rect2.sy);\n}\n/**\n * 判断点与点之间是否碰撞。若点之间的距离小于r，则无碰撞\n */\nexport function pointCollideWithPoint(point, another, r) {\n    return distSqrt(point, another) <= r * r;\n}\n/**\n * 判断点是否和直线相交\n * r为点的半径\n *\n * distance(A, C) + distance(B, C) == distance(A, B)\n */\nexport function pointCollideWithLine(point, sp, ep, r) {\n    return (dist(point, sp) + dist(point, ep) - dist(sp, ep)) <= r;\n}\nexport function pointInRect(rect, point) {\n    return (point[0] > rect.sx &&\n        point[0] < rect.sx + rect.w &&\n        point[1] > rect.sy &&\n        point[1] < rect.sy + rect.h);\n}\n/**\n * 先根据scaleX，scaleY缩放，然后在根据dx，dy平移\n * @param rect\n * @param dx\n * @param dy\n * @param scale\n */\nexport function getTransformedBoundary(rect, dx = 0, dy = 0, scaleX = {\n    factor: 1,\n    coordinate: 0\n}, scaleY = {\n    factor: 1,\n    coordinate: 0\n}) {\n    let sx = scaleX.factor * (rect.sx - scaleX.coordinate) + scaleX.coordinate;\n    let sy = scaleY.factor * (rect.sy - scaleY.coordinate) + scaleY.coordinate;\n    sx = sx + (dx ? dx : 0);\n    sy = sy + (dy ? dy : 0);\n    let w = rect.w * scaleX.factor;\n    let h = rect.h * scaleY.factor;\n    if (w < 0) {\n        sx = sx + w;\n        w = -w;\n    }\n    if (h < 0) {\n        sy = sy + h;\n        h = -h;\n    }\n    return {\n        sx, sy, w, h\n    };\n}\nexport function getTransformedPoint(point, dx = 0, dy = 0, scaleX = {\n    factor: 1,\n    coordinate: 0\n}, scaleY = {\n    factor: 1,\n    coordinate: 0\n}) {\n    let x = scaleX.factor * (point[0] - scaleX.coordinate) + scaleX.coordinate;\n    let y = scaleY.factor * (point[1] - scaleY.coordinate) + scaleY.coordinate;\n    x = x + (dx ? dx : 0);\n    y = y + (dy ? dy : 0);\n    return [x, y];\n}\nexport function combineBoundary(b1, b2) {\n    let sx = min(b1.sx, b2.sx, b1.sx + b1.w, b2.sx + b2.w);\n    let sy = min(b1.sy, b2.sy, b1.sy + b1.h, b2.sy + b2.h);\n    let ex = max(b1.sx, b2.sx, b1.sx + b1.w, b2.sx + b2.w);\n    let ey = max(b1.sy, b2.sy, b1.sy + b1.h, b2.sy + b2.h);\n    return {\n        sx,\n        sy,\n        w: ex - sx,\n        h: ey - sy\n    };\n}\nexport function getBoundaryBoxFromTwoPoints(sp, ep) {\n    let sx = min(sp[0], ep[0]);\n    let ex = max(sp[0], ep[0]);\n    let sy = min(sp[1], ep[1]);\n    let ey = max(sp[1], ep[1]);\n    return {\n        sx,\n        sy,\n        w: ex - sx,\n        h: ey - sy\n    };\n}\nconst ARROW_TIP_X_OFFSET = 5;\nconst ARROW_WINGS_X_OFFSET = 2;\nexport const getArrowPoints = (size, lastTwoPoints) => {\n    var tipXOffset = ARROW_TIP_X_OFFSET * size, wingsXOffset = ARROW_WINGS_X_OFFSET * size, lineCoef = getLineCoef(lastTwoPoints);\n    var arrowTipX = lastTwoPoints[1][0] - lastTwoPoints[0][0] > 0 ?\n        getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, tipXOffset) :\n        2 * lastTwoPoints[1][0] - getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, tipXOffset);\n    var arrowTipY = lastTwoPoints[1][0] - lastTwoPoints[0][0] === 0 ?\n        lastTwoPoints[1][1] + (lastTwoPoints[1][1] - lastTwoPoints[0][1] > 0 ? tipXOffset : -tipXOffset) :\n        getLineFromPointsY(lastTwoPoints, arrowTipX);\n    var arrowWing1X = getXFromCoefAndOffset(lastTwoPoints[1], -1 / lineCoef, wingsXOffset);\n    var arrowWing1Y = lastTwoPoints[1][1] - lastTwoPoints[0][1] === 0 ?\n        lastTwoPoints[1][1] - wingsXOffset :\n        getVerticalLineY(lastTwoPoints[1], lineCoef, arrowWing1X);\n    var arrowWing2X = 2 * lastTwoPoints[1][0] - getXFromCoefAndOffset(lastTwoPoints[1], -1 / lineCoef, wingsXOffset);\n    var arrowWing2Y = lastTwoPoints[1][1] - lastTwoPoints[0][1] === 0 ?\n        lastTwoPoints[1][1] + wingsXOffset :\n        getVerticalLineY(lastTwoPoints[1], lineCoef, arrowWing2X);\n    return [\n        [arrowTipX, arrowTipY],\n        [arrowWing1X, arrowWing1Y],\n        [arrowWing2X, arrowWing2Y]\n    ];\n};\nexport const getLineCoef = (points) => {\n    return ((points[1][1] - points[0][1]) / (points[1][0] - points[0][0])) || 0;\n};\nexport const getXFromCoefAndOffset = (refPoint, k, z) => {\n    return Math.sqrt(Math.pow(z, 2) / (Math.pow(k, 2) + 1)) + refPoint[0];\n};\nexport const getVerticalLineY = (referencePoint, coef, x) => {\n    return (referencePoint[0] - x) / coef + referencePoint[1];\n};\nexport const getLineFromPointsY = (points, x) => {\n    return (Math.max(-1000000, ((points[1][1] - points[0][1]) / (points[1][0] - points[0][0])) || 0)) * (x - points[0][0]) + points[0][1];\n};\n","/**\n * 检测工具栏中的字体大小是否有效\n * @param text\n */\nexport function testFontSizeText(text) {\n    const num = Number(text);\n    if (isNaN(num)) {\n        return 'nan';\n    }\n    else if (num > MAX_FONT_SIZE) {\n        return 'exceed_max';\n    }\n    else if (num <= MIN_FONT_SIZE) {\n        return 'exceed_min';\n    }\n    else {\n        return 'valid';\n    }\n}\nexport const printTextInMultiLine = (context, text, x, y, lineHeight) => {\n    const textArr = text.split(/\\r?\\n/g);\n    let currentLine = 0;\n    for (let str of textArr) {\n        context.fillText(str, x, y + (lineHeight * currentLine));\n        currentLine++;\n    }\n};\nexport const MAX_FONT_SIZE = 999;\nexport const MIN_FONT_SIZE = 12;\n","export function min(...numbers) {\n    return numbers.reduce((n1, n2) => {\n        return Math.min(n1, n2);\n    });\n}\nexport function max(...numbers) {\n    return numbers.reduce((n1, n2) => {\n        return Math.max(n1, n2);\n    });\n}\n","/**\n * board操作，一个board可以对应于一个文档。\n */\nimport Operation from \"../Operation\";\nclass BoardOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'board';\n        this.description = \"board相关操作\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.boardChange.tap(\"boardChangePlugin\", this.onBoardChange.bind(this));\n    }\n    onBoardChange() {\n        return this.emit('event:appState:change', 'board', {\n            boardNames: Object.keys(this.app.room.boards),\n            boardDisplayNames: this.app.room.getBoardDisplayNames(),\n            currBoard: this.app.room.currIndex,\n            currBoardDisplayName: this.app.room.currBoard.displayName\n        });\n    }\n    eventsToListen() {\n        return {\n            'board:goto': {\n                value: this.goto.bind(this),\n                information: {\n                    args: 'boardName: string',\n                    message: `跳转至board。若board不存在，则创建board`\n                }\n            },\n            'board:add': {\n                value: this.add.bind(this),\n                information: {\n                    args: 'boardName: string, pageCount: number',\n                    message: `创建[pageCount]页数的board`\n                }\n            },\n            'board:delete': {\n                value: this.delete.bind(this),\n                information: {\n                    args: 'boardName: string',\n                    message: '删除board。只有当board数量大于1时可以删除board'\n                }\n            }\n        };\n    }\n    goto(boardName) {\n        //跳转至board。若board不存在，则创建board\n        if (boardName !== this.app.room.currIndex) {\n            this.dispatch({\n                type: this.type,\n                action: 'goto',\n                boardName: boardName\n            });\n        }\n    }\n    add(displayName, pageCount) {\n        const boardName = `${displayName}_${new Date().valueOf()}`;\n        this.dispatch({\n            type: this.type,\n            action: 'add',\n            boardName: boardName,\n            displayName: displayName,\n            pageCount\n        });\n    }\n    delete(boardName) {\n        const boards = this.app.room.boards;\n        if (boardName in boards && Object.keys(boards).length > 1) {\n            this.dispatch({\n                type: this.type,\n                action: 'delete',\n                boardName: boardName\n            });\n        }\n    }\n}\nexport default BoardOp;\n","import Operation from '../Operation';\nexport const convertToCameraBoundSnapshot = (camera, snapshotData) => {\n    const boundary = camera.getNextCameraBound(snapshotData);\n    /**\n     * boundary的大小要被限制\n     */\n    const MAX_ALLOWED_WIDTH = 100000;\n    if (boundary.width > MAX_ALLOWED_WIDTH || boundary.height > MAX_ALLOWED_WIDTH) {\n        if (boundary.width > boundary.height) {\n            boundary.height = boundary.height * MAX_ALLOWED_WIDTH / boundary.width;\n            boundary.width = MAX_ALLOWED_WIDTH;\n        }\n        else {\n            boundary.width = boundary.width * MAX_ALLOWED_WIDTH / boundary.height;\n            boundary.height = MAX_ALLOWED_WIDTH;\n        }\n    }\n    /**\n     * 防止width，height崩溃\n     */\n    if (boundary.width === 0 || boundary.height === 0) {\n        boundary.width = 1000;\n        boundary.height = 1000;\n    }\n    if (LOG) {\n        console.log(`白板--> convert camera bound op: ${JSON.stringify(snapshotData)} -> ${JSON.stringify(boundary)}`);\n    }\n    return {\n        type: 'camera-bound',\n        boundary,\n        skipUndo: true,\n        animate: snapshotData.animate,\n        reuseOpType: 'camera-bound'\n    };\n};\nclass CameraBoundOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'camera-bound';\n        this.description = \"视角位置\";\n    }\n    eventsToListen() {\n        return {\n            'camera-bound:send': {\n                value: this.sendCameraBound.bind(this),\n                information: {\n                    args: 'boundary: {centerX: number, centerY: number, width: number, width: number}, animate: boolean',\n                    message: `发送当前用户的camera-bound，常用于主播同步自己的camera-bound`\n                }\n            }\n        };\n    }\n    sendCameraBound(boundary, animate) {\n        this.dispatch({\n            type: 'camera-bound',\n            boundary,\n            skipUndo: true,\n            animate,\n            reuseOpType: 'camera-bound'\n        });\n    }\n}\nexport default CameraBoundOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nclass FitToContentOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'fit-to-content';\n        this.description = \"缩放至完全包含内容\";\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand(animate = true) {\n        if (!shouldDispatch(this.app))\n            return;\n        return this.dispatch(this.getSnapshot(animate));\n    }\n    getSnapshot(animate) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'fit-to-content',\n            animate\n        });\n    }\n}\nexport default FitToContentOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nclass FitToDocOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'fit-to-doc';\n        this.description = \"缩放至完全包含文档\";\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand(animate = true) {\n        if (!shouldDispatch(this.app))\n            return;\n        if (!this.app.room.currBoard.currPage.backgroundSnapshot)\n            return;\n        return this.dispatch(this.getSnapshot(animate));\n    }\n    getSnapshot(animate) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'fit-to-doc',\n            animate\n        });\n    }\n}\nexport default FitToDocOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from './CameraBoundOp';\nimport { shouldDispatch } from \"./util\";\nimport { showToast } from \"../../../component/toast\";\nclass PanOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'pan';\n        this.activate = false;\n        this.description = \"平移操作\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    handleMouseMove(event, mx, my, clientX, clientY) {\n        if (!this.app.enableCameraTransform) {\n            return;\n        }\n        if (!shouldDispatch(this.app))\n            return;\n        if (this.activate) {\n            document.body.style.cursor = 'grabbing';\n        }\n        else if (this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = 'grab';\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n        if (this.activate && this.lastPoint) {\n            this.dispatch(this.getSnapshot(clientX - this.lastPoint[0], clientY - this.lastPoint[1]));\n            this.lastPoint = [clientX, clientY];\n        }\n    }\n    handleMouseDown(event, mx, my, clientX, clientY) {\n        if (!this.app.appConfig.cameraTransformEnabled) {\n            return;\n        }\n        if (!shouldDispatch(this.app)) {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n            return;\n        }\n        this.activate = true;\n        this.beginBatch();\n        this.lastPoint = [clientX, clientY];\n    }\n    handleMouseUp(event, mx, my, clientX, clientY) {\n        if (!this.app.appConfig.cameraTransformEnabled) {\n            return;\n        }\n        if (!shouldDispatch(this.app))\n            return;\n        if (this.activate && this.lastPoint) {\n            this.dispatch(this.getSnapshot(clientX - this.lastPoint[0], clientY - this.lastPoint[1]));\n            this.lastPoint = undefined;\n        }\n        this.activate = false;\n    }\n    getSnapshot(dx, dy) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'pan',\n            dx: -dx,\n            dy: -dy,\n            animate: false\n        });\n    }\n}\nexport default PanOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nclass ResetCameraOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'reset-camera';\n        this.description = \"重置视角\";\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand(animate = true) {\n        if (!shouldDispatch(this.app))\n            return;\n        return this.dispatch(this.getSnapshot(animate));\n    }\n    getSnapshot(animate) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'reset-camera',\n            animate\n        });\n    }\n}\nexport default ResetCameraOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nclass ResizeCameraOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'resize-camera';\n        this.description = \"重置视角\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.resize.tap(\"ResizePlugin\", this.handleResize.bind(this));\n    }\n    handleResize(event, width, height) {\n        if (width === 0 || height === 0) {\n            return;\n        }\n        if (this.app.vision.mode === 'follower') {\n            /**\n             * 如果是跟随者，则用现在的camera-bound重新计算一遍自己的位置\n             */\n            this.app.camera.updateTransParamAndRefresh();\n        }\n        else {\n            this.dispatch(this.getSnapshot(width, height));\n        }\n    }\n    getSnapshot(width, height) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'resize-camera',\n            width,\n            height,\n            animate: false\n        });\n    }\n}\nexport default ResizeCameraOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nimport { showToast } from \"../../../component/toast\";\nconst FACTOR = 1 / 0.86;\nconst UPPER_BOUND = 20;\nconst LOWER_BOUND = 0.03;\nclass ZoomOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'zoom';\n        this.sp = [0, 0];\n        this.description = \"缩放操作\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousewheel.tap(\"MousewheelPlugin\", this.handleMouseWheel.bind(this));\n    }\n    eventsToListen() {\n        return {\n            'zoom:in': {\n                value: this.zoomIn.bind(this),\n                information: {\n                    args: '',\n                    message: `缩放`\n                }\n            },\n            'zoom:out': {\n                value: this.zoomOut.bind(this),\n                information: {\n                    args: '',\n                    message: `缩放`\n                }\n            },\n            'zoom:to': {\n                value: this.zoomTo.bind(this),\n                information: {\n                    args: 'scale: number, animate: boolean',\n                    message: `缩放`\n                }\n            }\n        };\n    }\n    handleMouseWheel(event, mx, my, clientX, clientY) {\n        if (!this.app.appConfig.cameraTransformEnabled) {\n            return;\n        }\n        if (!shouldDispatch(this.app)) {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n            return;\n        }\n        let scale;\n        if (event.deltaY > 0) {\n            scale = FACTOR;\n        }\n        else {\n            scale = 1 / FACTOR;\n        }\n        if (this.app.camera.zoomFactor * scale >= UPPER_BOUND && scale > 1) {\n            return;\n        }\n        else if (this.app.camera.zoomFactor * scale <= LOWER_BOUND && scale < 1) {\n            return;\n        }\n        if (this.isMouseDown) {\n            return;\n        }\n        if (!this.app.container.isTargetOnContainer(event.target)) {\n            return;\n        }\n        this.beginBatch();\n        this.dispatch(this.getSnapshot(scale, false, [clientX, clientY]));\n    }\n    zoomIn() {\n        if (!shouldDispatch(this.app))\n            return;\n        if ((this.app.camera.zoomFactor * FACTOR) >= UPPER_BOUND) {\n            return;\n        }\n        this.beginBatch();\n        return this.dispatch(this.getSnapshot(FACTOR, false));\n    }\n    zoomOut() {\n        if (!shouldDispatch(this.app))\n            return;\n        if ((this.app.camera.zoomFactor / FACTOR) <= LOWER_BOUND) {\n            return;\n        }\n        this.beginBatch();\n        return this.dispatch(this.getSnapshot(1 / FACTOR, false));\n    }\n    zoomTo(destScaleNum, animate) {\n        if (!shouldDispatch(this.app))\n            return;\n        this.beginBatch();\n        return this.dispatch(this.getSnapshot(destScaleNum / this.app.camera.zoomFactor, animate));\n    }\n    getSnapshot(scale, animate, center) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'zoom',\n            animate: animate,\n            center,\n            scale\n        });\n    }\n}\nexport default ZoomOp;\n","export const shouldDispatch = (app) => {\n    const mode = app.vision.mode;\n    if (mode === 'broadcaster' || mode === 'freeObserver') {\n        return true;\n    }\n    else {\n        return false;\n    }\n};\n","/**\n * 重做操作。重做只能跟在撤销操作后面\n */\nimport Operation from \"../Operation\";\nclass ClearOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'clear';\n        this.description = \"清空操作\";\n    }\n    isAvailable() {\n        return Object.keys(this.drawOpsOfPage).length > 0;\n    }\n    registerHooks() {\n        this.opsManager.hooks.refresh.tap(\"RefreshPlugin\", this.onRefresh.bind(this));\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            },\n        };\n    }\n    execCommand() {\n        if (Object.keys(this.drawOpsOfPage).length > 0) {\n            this.dispatch(this.getSnapshot());\n        }\n    }\n    getSnapshot() {\n        return {\n            type: this.type\n        };\n    }\n    onRefresh() {\n        const available = Object.keys(this.drawOpsOfPage).length > 0;\n        this.emit('event:appState:change', 'clearAvailable', available);\n    }\n}\nexport default ClearOp;\n","import EllipseOp from \"./EllipseOp\";\nclass EllipseFillOp extends EllipseOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'ellipse-fill';\n    }\n    /**\n     * 这个是新版本的动作。由于需要和老版本互通，因此将type设置为rect，老版本没有rect-fill op，如果type为rect-fill, 则老版本无法理解如何绘制该图形\n     */\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'fill',\n            inProgress\n        });\n    }\n}\nexport default EllipseFillOp;\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nclass EllipseOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'ellipse';\n        this.shouldSaniteEp = true;\n        this.description = \"绘制椭圆形\";\n    }\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'stroke',\n            inProgress\n        });\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const sp = getTransformedPoint(data.sp, data.dx, data.dy, data.scaleX, data.scaleY);\n        const ep = getTransformedPoint(data.ep, data.dx, data.dy, data.scaleX, data.scaleY);\n        const cx = sp[0] / 2 + ep[0] / 2;\n        const cy = sp[1] / 2 + ep[1] / 2;\n        const radiusX = Math.abs(ep[0] - sp[0]) / 2;\n        const radiusY = Math.abs(ep[1] - sp[1]) / 2;\n        ctx.beginPath();\n        ctx.ellipse(cx, cy, radiusX, radiusY, 0, 0, Math.PI * 2, true);\n        this.strokeOrFill(ctx, {\n            stroke: data.stroke,\n            fill: data.fill,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n    ifMouseOnOp(baseOp, mx, my) {\n        const ctx = this.app.container.ctx;\n        const data = baseOp.data;\n        const sp = getTransformedPoint(data.sp, data.dx, data.dy, data.scaleX, data.scaleY);\n        const ep = getTransformedPoint(data.ep, data.dx, data.dy, data.scaleX, data.scaleY);\n        const cx = sp[0] / 2 + ep[0] / 2;\n        const cy = sp[1] / 2 + ep[1] / 2;\n        const radiusX = Math.abs(ep[0] - sp[0]) / 2;\n        const radiusY = Math.abs(ep[1] - sp[1]) / 2;\n        ctx.beginPath();\n        ctx.ellipse(cx, cy, radiusX, radiusY, 0, 0, Math.PI * 2, true);\n        ctx.fillStyle = 'rgba(0,0,0,0)';\n        ctx.fill();\n        return ctx.isPointInPath(mx, my);\n    }\n}\nexport default EllipseOp;\n","import { getArrowPoints, getTransformedPoint } from \"../../misc/shapeHelper\";\nimport LineOp from \"./LineOp\";\nclass LineArrowOp extends LineOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'line-arrow';\n        this.description = \"绘制带箭头线段。\\n首先使用op:line-arrow:activate设置画布为线段模式。\" +\n            \"通过op:line-arrow:lineWidth, op:line-arrow:color设置线段的宽度和颜色。然后画布会监听鼠标动作，生成线段。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getSnapshot(inProgress) {\n        const withArrow = !inProgress && this.points.length > 2;\n        let arrowPoints = [];\n        if (this.points.length > 1 && withArrow) {\n            const lastTwoPoints = [this.sp, this.ep];\n            arrowPoints = getArrowPoints(this.lineWidth + 1, lastTwoPoints);\n        }\n        return Object.assign({ arrowPoints }, this.getTwoPointShapeCommonProperty({\n            inProgress\n        }));\n    }\n    draw(snapshot, ctx) {\n        ctx.save();\n        const data = snapshot.data;\n        const { sp, ep } = this.getStartEndPointFromSnapshot(data);\n        ctx.beginPath();\n        ctx.moveTo(...getTransformedPoint(sp, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.lineTo(...getTransformedPoint(ep, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.strokeStyle = data.color;\n        ctx.lineWidth = data.lineWidth;\n        ctx.globalAlpha = data.opacity;\n        ctx.stroke();\n        const arrowPoints = data.arrowPoints;\n        if (arrowPoints.length === 3) {\n            ctx.beginPath();\n            ctx.moveTo(...getTransformedPoint(arrowPoints[0], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[1], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[2], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.fillStyle = data.color;\n            ctx.fill();\n        }\n        ctx.restore();\n    }\n}\nexport default LineArrowOp;\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nclass LineOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'line';\n        this.description = \"绘制线段。\\n首先使用op:line:activate设置画布为线段模式。\" +\n            \"通过op:line:lineWidth, op:line:color设置线段的宽度和颜色。然后画布会监听鼠标动作，生成线段。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            inProgress\n        });\n    }\n    getBoundaryRect() {\n        return this.getBoundaryRectOfLine();\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const { sp, ep } = this.getStartEndPointFromSnapshot(data);\n        ctx.beginPath();\n        ctx.moveTo(...getTransformedPoint(sp, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.lineTo(...getTransformedPoint(ep, data.dx, data.dy, data.scaleX, data.scaleY));\n        this.strokeOrFill(ctx, {\n            stroke: data.color,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n    ifMouseOnOp(baseOp, mx, my) {\n        const ctx = this.app.container.ctx;\n        const data = baseOp.data;\n        const { sp, ep } = this.getStartEndPointFromSnapshot(data);\n        ctx.beginPath();\n        ctx.moveTo(...getTransformedPoint(sp, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.lineTo(...getTransformedPoint(ep, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.strokeStyle = 'rgba(0,0,0,0)';\n        ctx.lineWidth = data.lineWidth + 20;\n        ctx.stroke();\n        return ctx.isPointInStroke(mx, my);\n    }\n    getStartEndPointFromSnapshot(data) {\n        let sp;\n        let ep;\n        if (Array.isArray(data.points)) {\n            sp = data.points[0];\n            ep = data.points[data.points.length - 1];\n        }\n        else {\n            sp = data.sp;\n            ep = data.ep;\n        }\n        return {\n            sp, ep\n        };\n    }\n}\nexport default LineOp;\n","import { max, min } from \"../../misc/util\";\nimport Operation from \"../Operation\";\nimport drawConfig from \"./drawConfig\";\nclass MouseMoveDrawOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = '';\n        /**\n         * 是否需要清洗ep。使其距离sp的x，y距离至少为1。对于矩形来说，必须sanite ep，否则矩形会退化为线段或者点\n         */\n        this.shouldSaniteEp = false;\n        this.movedDuringMouseDown = false;\n        this.points = [];\n        /**\n         * 连续动作只用采一半的点即可。用sampleSeq记录mousemove的序列号\n         */\n        this.sampleSeq = 0;\n    }\n    get lineWidth() {\n        return Number(drawConfig.strokeWidth);\n    }\n    get opacity() {\n        return Number(drawConfig.opacity);\n    }\n    get color() {\n        return drawConfig.strokeColor;\n    }\n    get sp() {\n        return this.points[0];\n    }\n    get ep() {\n        let point = this.points[this.points.length - 1];\n        if (this.shouldSaniteEp) {\n            point = this.sanityEp(point);\n        }\n        return point;\n    }\n    registerHooks() {\n        this.opsManager.hooks.pageChange.tap('PageChange', this.handlePageChange.bind(this));\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    handlePageChange() {\n        this.beginBatch();\n        this.sampleSeq = 0;\n        this.points = [];\n        this.movedDuringMouseDown = false;\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.isMouseDown || this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = `url(${require('../../../assets/cursors/pen.svg')}) -1 17, auto`;\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n        if (this.isMouseDown) {\n            this.movedDuringMouseDown = true;\n            mx = Number(mx.toFixed(1));\n            my = Number(my.toFixed(1));\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot(true));\n            this.sampleSeq += 1;\n        }\n    }\n    handleMouseDown(event, mx, my) {\n        this.beginBatch();\n        mx = Number(mx.toFixed(1));\n        my = Number(my.toFixed(1));\n        this.points = [[mx, my]];\n        this.movedDuringMouseDown = false;\n        this.sampleSeq = 0;\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown && this.movedDuringMouseDown) {\n            mx = Number(mx.toFixed(1));\n            my = Number(my.toFixed(1));\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot(false));\n            this.points = [];\n        }\n    }\n    getTwoPointShapeCommonProperty(opt) {\n        let obj = {\n            type: this.type,\n            boundary: this.getBoundaryRectOfLine(),\n            sp: this.sp,\n            ep: this.ep,\n            lineWidth: this.lineWidth,\n            inProgress: opt.inProgress,\n            opacity: this.opacity\n        };\n        if (opt.strokeOrFill === 'stroke') {\n            obj.stroke = this.color;\n        }\n        else if (opt.strokeOrFill === 'fill') {\n            obj.fill = this.color;\n        }\n        else {\n            obj.color = this.color;\n        }\n        return obj;\n    }\n    getFreeDrawCommonProperty(opt) {\n        let obj = {\n            type: this.type,\n            boundary: this.getBoundaryRectOfFreeDraw(),\n            lineWidth: this.lineWidth,\n            inProgress: opt.inProgress,\n            opacity: this.opacity\n        };\n        obj.color = this.color;\n        return obj;\n    }\n    getBoundaryRectOfFreeDraw() {\n        const points = this.points;\n        if (points.length === 0) {\n            throw new Error('涂鸦没有记录任何数据');\n        }\n        else {\n            let sx = points[0][0];\n            let sy = points[0][1];\n            let ex = sx;\n            let ey = sy;\n            for (let point of points) {\n                sx = min(point[0], sx);\n                sy = min(point[1], sy);\n                ex = max(point[0], ex);\n                ey = max(point[1], ey);\n            }\n            return {\n                sx,\n                sy,\n                w: ex - sx,\n                h: ey - sy\n            };\n        }\n    }\n    getBoundaryRectOfLine() {\n        let sx = min(this.sp[0], this.ep[0]);\n        let sy = min(this.sp[1], this.ep[1]);\n        let ex = max(this.sp[0], this.ep[0]);\n        let ey = max(this.sp[1], this.ep[1]);\n        return {\n            sx: sx,\n            sy: sy,\n            w: ex - sx,\n            h: ey - sy\n        };\n    }\n    strokeOrFill(ctx, opt) {\n        ctx.save();\n        ctx.lineWidth = opt.lineWidth;\n        if (opt.opacity) {\n            ctx.globalAlpha = Number(opt.opacity);\n        }\n        if (opt.stroke) {\n            ctx.strokeStyle = opt.stroke;\n            ctx.stroke();\n        }\n        else if (opt.fill) {\n            ctx.fillStyle = opt.fill;\n            ctx.fill();\n        }\n        ctx.restore();\n    }\n    /**\n     * 控制rect最小宽高为1\n     * @param ep\n     */\n    sanityEp(ep) {\n        if (ep[0] - this.sp[0] >= 0 && ep[0] - this.sp[0] < 1) {\n            ep[0] = this.sp[0] + 1;\n        }\n        if (ep[1] - this.sp[1] >= 0 && ep[1] - this.sp[1] < 1) {\n            ep[1] = this.sp[1] + 1;\n        }\n        return ep;\n    }\n}\nexport default MouseMoveDrawOp;\n","import { getArrowPoints, getTransformedPoint, getLineCoef, getXFromCoefAndOffset, getLineFromPointsY, dist } from \"../../misc/shapeHelper\";\nimport PenOp from \"./PenOp\";\nimport drawConfig from \"./drawConfig\";\nclass PenArrowOp extends PenOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'pen-arrow';\n        this.description = \"带箭头的涂鸦操作工具。\\n首先使用op:pen-arrow:activate设置画布为涂鸦模式。\" +\n            \"通过op:pen-arrow:lineWidth, op:pen-arrow:color设置涂鸦的宽度和颜色。然后画布会监听鼠标动作，生成涂鸦。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getArrowPoints(points, withArrow) {\n        let arrowPoints = [];\n        if (points.length > 1 && withArrow) {\n            var lastTwoPoints = points.length > 2 ? [points[points.length - 3], points[points.length - 1]] : points.slice(points.length - 2), lineCoef = getLineCoef(lastTwoPoints);\n            // if we have last two points far apart, we want to add another point closer to the last one\n            // so that the doesn't get cut by quadraticCurveTo and so that arrow is not disconnected from the line\n            if (dist(lastTwoPoints[0], lastTwoPoints[1]) > 1) {\n                var lastPointX = lastTwoPoints[1][0] - lastTwoPoints[0][0] > 0 ?\n                    getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, 1) :\n                    2 * lastTwoPoints[1][0] - getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, 1);\n                var lastPointY = lastTwoPoints[1][0] - lastTwoPoints[0][0] === 0 ?\n                    lastTwoPoints[1][1] + (lastTwoPoints[1][1] - lastTwoPoints[0][1] > 0 ? 1 : -1) :\n                    getLineFromPointsY(lastTwoPoints, lastPointX);\n                lastTwoPoints.push([lastPointX, lastPointY]);\n            }\n            arrowPoints = getArrowPoints(this.lineWidth + 1, lastTwoPoints);\n        }\n        return arrowPoints;\n    }\n    getSnapshot(inProgress) {\n        const points = this.points;\n        const withArrow = !inProgress && points.length > 2;\n        let arrowPoints = this.getArrowPoints(points, withArrow);\n        const currOpId = this.opsManager.currPage.getOpId();\n        const pkg = this.app.room.opIdSnapshotMap[currOpId];\n        if (!pkg || !pkg.snapshot.hasOwnProperty('category')) {\n            /**\n             * 保险措施，如果之前发送的opId是部分数据，则发送一份完整的数据出去\n             */\n            return Object.assign({ points: points.slice(), arrowPoints, total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n        let boundaryRect = {\n            boundary: this.getBoundaryRectOfFreeDraw()\n        };\n        if (this.sampleSeq > 0 && inProgress) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), total: points.length });\n        }\n        else if (this.sampleSeq > 0) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), arrowPoints, inProgress: inProgress, total: points.length });\n        }\n        else {\n            return Object.assign({ points: points.slice(), arrowPoints, total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n    }\n    draw(snapshot, ctx) {\n        ctx.save();\n        const data = snapshot.data;\n        this._draw(snapshot, ctx);\n        ctx.strokeStyle = data.color;\n        ctx.lineWidth = data.lineWidth;\n        ctx.globalAlpha = data.opacity;\n        ctx.stroke();\n        const arrowPoints = data.arrowPoints;\n        if (arrowPoints.length === 3) {\n            ctx.beginPath();\n            ctx.moveTo(...getTransformedPoint(arrowPoints[0], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[1], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[2], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.fillStyle = data.color;\n            ctx.fill();\n        }\n        ctx.restore();\n    }\n}\nexport default PenArrowOp;\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nimport drawConfig from \"./drawConfig\";\nimport { drawCurve } from \"../../misc/drawCurve\";\nclass PenOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'pen';\n        this.description = \"涂鸦操作工具。\\n首先使用op:pen:activate设置画布为涂鸦模式。\" +\n            \"通过op:pen:lineWidth, op:pen:color设置涂鸦的宽度和颜色。然后画布会监听鼠标动作，生成涂鸦。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getSnapshot(inProgress) {\n        const points = this.points;\n        const currOpId = this.opsManager.currPage.getOpId();\n        const pkg = this.app.room.opIdSnapshotMap[currOpId];\n        if (!pkg || !pkg.snapshot.hasOwnProperty('category')) {\n            /**\n             * 保险措施，如果已经发送的是旧的数据，则发送一份完整的数据出去\n             */\n            return Object.assign({ points: points.slice(), total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n        let boundaryRect = {\n            boundary: this.getBoundaryRectOfFreeDraw()\n        };\n        if (this.sampleSeq > 0 && inProgress) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), total: points.length });\n        }\n        else if (this.sampleSeq > 0) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), total: points.length, inProgress: inProgress });\n        }\n        else {\n            return Object.assign({ points: points.slice(), total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n    }\n    _draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const points = data.points;\n        const transformedPoints = points.map(p => getTransformedPoint(p, data.dx, data.dy, data.scaleX, data.scaleY));\n        drawCurve(ctx, transformedPoints, 0.5);\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        this._draw(snapshot, ctx);\n        this.strokeOrFill(ctx, {\n            stroke: data.color,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n    ifMouseOnOp(snapshot, mx, my) {\n        const ctx = this.app.container.ctx;\n        this._draw(snapshot, ctx);\n        //稍微增大一些选择线段的宽度范围，否则线段很细时，判定可能过于灵敏\n        ctx.lineWidth = snapshot.data.lineWidth + 20;\n        ctx.strokeStyle = 'rgba(0,0,0,0)';\n        ctx.stroke();\n        return ctx.isPointInStroke(mx, my);\n    }\n    mergePartial(snapshot, partial) {\n        const sp = this._mergePartial(snapshot, partial);\n        if (sp.data.points.length !== sp.data.total) {\n            console.warn('merge ........', snapshot, partial);\n        }\n        return sp;\n    }\n    _mergePartial(snapshot, partial) {\n        try {\n            const ptrDiff = partial.data.total - snapshot.data.total;\n            if (ptrDiff === 0) {\n                return Object.assign(Object.assign({}, snapshot), { data: Object.assign(Object.assign(Object.assign({}, snapshot.data), partial.data), { points: snapshot.data.points }) });\n            }\n            else if (ptrDiff < 0) {\n                return snapshot;\n            }\n            else if (ptrDiff <= partial.data.points.length) {\n                const startIndex = partial.data.points.length - ptrDiff;\n                return Object.assign(Object.assign({}, snapshot), { data: Object.assign(Object.assign(Object.assign({}, snapshot.data), partial.data), { points: snapshot.data.points.concat(partial.data.points.slice(startIndex)) }) });\n            }\n            else {\n                if (LOG) {\n                    console.warn('白板--> mergePartial error', snapshot, partial);\n                }\n                return snapshot;\n            }\n        }\n        catch (_a) {\n            if (LOG) {\n                console.warn('白板--> mergePartial error', snapshot, partial);\n            }\n            return snapshot;\n        }\n    }\n}\nexport default PenOp;\n","import RectOp from \"./RectOp\";\nclass RectFillOp extends RectOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'rect-fill';\n    }\n    /**\n     * 这个是新版本的动作。由于需要和老版本互通，因此将type设置为rect，老版本没有rect-fill op，如果type为rect-fill, 则老版本无法理解如何绘制该图形\n     */\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'fill',\n            inProgress\n        });\n    }\n}\nexport default RectFillOp;\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nclass RectOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'rect';\n        this.shouldSaniteEp = true;\n        this.description = \"绘制矩形。\\n首先使用op:rect:activate设置画布为矩形模式。\" +\n            \"通过op:rect:lineWidth, op:rect:stroke, op:rect:fill设置矩形的宽度和颜色。然后画布会监听鼠标动作，生成矩形。具体用法如下：\";\n    }\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'stroke',\n            inProgress\n        });\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const sp = getTransformedPoint(data.sp, data.dx, data.dy, data.scaleX, data.scaleY);\n        const ep = getTransformedPoint(data.ep, data.dx, data.dy, data.scaleX, data.scaleY);\n        ctx.beginPath();\n        ctx.rect(sp[0], sp[1], ep[0] - sp[0], ep[1] - sp[1]);\n        this.strokeOrFill(ctx, {\n            stroke: data.stroke,\n            fill: data.fill,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n}\nexport default RectOp;\n","class DrawConfig {\n    constructor() {\n        this.strokeColor = 'rgb(0,0,0)';\n        /**\n         * 本来是每3-5次鼠标移动发送一次动作的。\n         * 后来加上了增量发送数据，以及数据延迟发送，导致3-5次鼠标移动动作会被打到一个包中发送，且没有数据重复。\n         * 又因为3-5次才发送会影响本地绘制，因此，将发送频次改回1次鼠标动作发送一个包（实际会延时批量发送)\n         */\n        this.pointsPerBatch = 1;\n        this.strokeWidth = 5;\n        this.opacity = 1;\n    }\n    // setStrokeColor(color: Array<number>) {\n    //     if (color.length < 3 || color.length > 4) {\n    //         console.error('白板--> setStrokeColor的参数必须为长度为3或者4的数组, 传入的参数为', color)\n    //     } else {\n    //         let hasError = false\n    //         for (let i = 0; i < 3; i++) {\n    //             if (color[i] < 0 || color[i] > 255) {\n    //                 console.error('白板--> setStrokeColor的参数数组前三位必须为0-255之间的数值, 传入的参数为', color)\n    //                 hasError = true\n    //             }\n    //         }\n    //         if (color.length === 4 && (color[3] < 0 || color[3] > 1)) {\n    //             console.error('白板--> setStrokeColor的参数数组第四位必须为0-1之间的数值, 传入的参数为', color)\n    //             hasError = true\n    //         }\n    //         if (!hasError && color.length === 3) {\n    //             this.strokeColor = `rgb(${color[0]},${color[1]},${color[2]})`\n    //         } else if (!hasError) {\n    //             this.strokeColor = `rgb(${color[0]},${color[1]},${color[2]},${color[3]})`\n    //         }\n    //     }\n    // }\n    setStrokeColor(color) {\n        this.strokeColor = color;\n    }\n    setStrokeWidth(width) {\n        this.strokeWidth = width;\n    }\n    setOpacity(value) {\n        this.opacity = value;\n    }\n}\nconst drawConfig = new DrawConfig();\nexport default drawConfig;\n","/**\n * 删除操作，可通过ctrl-v还原\n */\nimport Operation from \"../Operation\";\nclass DeleteOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'delete';\n        this.description = \"删除元素。\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `删除当前选中的元素`\n                }\n            }\n        };\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (['backspace', 'delete'].includes(key)) {\n            this.execCommand();\n            return true;\n        }\n    }\n    execCommand() {\n        if (this.opsManager.selectedOpIds.length > 0) {\n            this.dispatch(this.getSnapshot());\n        }\n    }\n    getSnapshot() {\n        return {\n            type: this.type,\n            deleteOpIds: this.opsManager.selectedOpIds.slice(),\n            dependOn: this.opsManager.selectedOpIds.slice()\n        };\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const newData = Object.assign({}, baseOp.data, {\n            hidden: true\n        });\n        return Object.assign({}, baseOp, {\n            data: newData\n        });\n    }\n}\nexport default DeleteOp;\n","/**\n * 复制操作\n */\nimport Operation from \"../Operation\";\nimport deepClone from 'lodash.clonedeep';\nexport const COPY_PASTE_SHIFT = 50;\nclass DuplicateOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'duplicate';\n        this.description = \"拷贝drawable快照\";\n        this.copiedSnapshotArray = [];\n    }\n    registerHooks() {\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `复制当前选中的元素`\n                }\n            }\n        };\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (key === 'c' && (this.isKeyDown('control') || this.isKeyDown('command')) && this.opsManager.selectedOpIds.length > 0) {\n            ev.preventDefault();\n            let selectedOpIds = this.opsManager.selectedOpIds.filter(opId => {\n                return this.drawOpsOfPage.hasOwnProperty(opId);\n            });\n            this.copiedSnapshotArray = deepClone(selectedOpIds.map(opId => this.drawOpsOfPage[opId]));\n            return true;\n        }\n        else if (key === 'v' && (this.isKeyDown('control') || this.isKeyDown('command')) && this.copiedSnapshotArray.length > 0) {\n            ev.preventDefault();\n            this.execCommand(this.copiedSnapshotArray.slice());\n            return true;\n        }\n    }\n    execCommand(snapshotsToCopy) {\n        if (this.opsManager.selectedOpIds.length > 0\n            || (snapshotsToCopy && snapshotsToCopy.length > 0)) {\n            const snapshot = this.getSnapshot(snapshotsToCopy);\n            this.dispatch(snapshot);\n            const newOpIds = snapshot.duplicates.map(dup => dup.opId);\n            this.opsManager.selectOp.dispatch(this.opsManager.selectOp.getSnapshot(newOpIds));\n        }\n    }\n    getSnapshot(snapshotsToCopy) {\n        const snapshotFromKeyboardCopy = snapshotsToCopy ? true : false;\n        if (!snapshotsToCopy) {\n            const selectedOpIds = this.opsManager.selectedOpIds;\n            snapshotsToCopy = [];\n            for (let i = 0; i < selectedOpIds.length; i++) {\n                const id = selectedOpIds[i];\n                if (this.drawOpsOfPage.hasOwnProperty(id)) {\n                    const snapshot = this.drawOpsOfPage[id];\n                    snapshotsToCopy.push(snapshot);\n                }\n            }\n        }\n        snapshotsToCopy = snapshotsToCopy.map(snapshot => {\n            snapshot = deepClone(snapshot);\n            snapshot.data.dx = (snapshot.data.dx ? snapshot.data.dx : 0) + COPY_PASTE_SHIFT;\n            snapshot.data.dy = (snapshot.data.dy ? snapshot.data.dy : 0) + COPY_PASTE_SHIFT;\n            snapshot.opId = this.opsManager.currPage.getNextOpId(true);\n            return snapshot;\n        });\n        //ctrl-c, ctrl-v后更新copiedSnapshotArray， 若不更新，连续更新会复制在相同的位置\n        if (snapshotFromKeyboardCopy) {\n            this.copiedSnapshotArray = snapshotsToCopy.slice();\n        }\n        return {\n            type: this.type,\n            duplicates: snapshotsToCopy,\n        };\n    }\n}\nexport default DuplicateOp;\n","/**\n * 移动操作。\n * 移动操作必须跟在选择操作之后\n */\nimport Operation from \"../Operation\";\nimport { combineBoundary, getTransformedBoundary, pointInRect } from \"../../misc/shapeHelper\";\nimport { arrayDeduce, findOpsUnderMouse } from \"../util\";\nimport SelectOp from \"../SelectOp\";\nclass MoveOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'move';\n        this.points = [];\n        this.activate = false;\n        this.description = \"移动操作工具。内部使用，不提供对外接口\";\n        this.idsBeenMoved = [];\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousedown.tap(\"MousedownPlugin\", this.handleMouseDown.bind(this));\n        this.opsManager.hooks.mousemove.tap(\"MousemovePlugin\", this.handleMouseMove.bind(this));\n        this.opsManager.hooks.mouseup.tap(\"MouseupPlugin\", this.handleMouseUp.bind(this));\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            if (this.activate) {\n                this.points.push([mx, my]);\n                this.dispatch(this.getSnapshot(true, this.idsBeenMoved));\n                return true;\n            }\n            if (!this.isMouseDown && document.body.style.cursor !== 'nwse-resize' && document.body.style.cursor !== 'nesw-resize') {\n                if (this.mouseInSelectedEleBoundary(mx, my, this.opsManager.selectedOpIds) ||\n                    this.opsManager.inProgressSelectedOpIds.length > 0) {\n                    //鼠标在已选中的图形上方\n                    document.body.style.cursor = 'move';\n                }\n                else {\n                    const idsUnderMouse = findOpsUnderMouse([[mx, my]], this.drawOpsOfPage, this.opsManager);\n                    const idsBeenSelected = arrayDeduce(idsUnderMouse, this.opsManager.selectedOpIds.concat(this.opsManager.inProgressSelectedOpIds));\n                    if (idsBeenSelected.length > 0) {\n                        //鼠标在尚未选中的图形上方\n                        document.body.style.cursor = 'move';\n                    }\n                    else {\n                        document.body.style.cursor = 'default';\n                    }\n                }\n            }\n        }\n    }\n    handleMouseDown(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            const mouseInProgressSelectedBoundary = this.mouseInSelectedEleBoundary(mx, my, this.opsManager.inProgressSelectedOpIds);\n            const mouseInSelectedBoundary = this.mouseInSelectedEleBoundary(mx, my, this.opsManager.selectedOpIds);\n            if (mouseInProgressSelectedBoundary) {\n                /**\n                 * 拖动鼠标悬浮的元素\n                 */\n                const idsUnderMouse = this.opsManager.inProgressSelectedOpIds.slice();\n                this.dispatch(this.opsManager.selectOp.getSnapshot(idsUnderMouse));\n                this.beginBatch();\n                document.body.style.cursor = 'move';\n                this.idsBeenMoved = idsUnderMouse.slice();\n                this.points = [[mx, my]];\n                this.activate = true;\n                return true;\n            }\n            else if (mouseInSelectedBoundary) {\n                /**\n                 * 拖动早就被选中的元素\n                 */\n                this.beginBatch();\n                document.body.style.cursor = 'move';\n                this.idsBeenMoved = this.opsManager.selectedOpIds;\n                this.points = [[mx, my]];\n                this.activate = true;\n                return true;\n            }\n            else {\n                /**\n                 * 适配移动端触摸屏\n                 * 支持移动端直接拖动未选中的图形移动\n                 */\n                const idsUnderMouse = findOpsUnderMouse([[mx, my]], this.drawOpsOfPage, this.opsManager);\n                if (idsUnderMouse.length > 0) {\n                    //将拖动的元素转为被选择状态\n                    this.dispatch(this.opsManager.selectOp.getSnapshot(idsUnderMouse));\n                    this.beginBatch();\n                    document.body.style.cursor = 'move';\n                    this.idsBeenMoved = idsUnderMouse.slice();\n                    this.points = [[mx, my]];\n                    this.activate = true;\n                    return true;\n                }\n            }\n        }\n        this.activate = false;\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.activate) {\n            this.activate = false;\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot(false, this.idsBeenMoved));\n            return true;\n        }\n    }\n    getSnapshot(inProgress, idsBeenMoved) {\n        return {\n            type: this.type,\n            sp: this.points[0],\n            ep: this.points[this.points.length - 1],\n            selectedOpIds: idsBeenMoved.slice(),\n            dependOn: idsBeenMoved.slice(),\n            inProgress: inProgress\n        };\n    }\n    /**\n     * 鼠标位置是否在已选中元素的包含盒内\n     */\n    mouseInSelectedEleBoundary(mx, my, selectedOpIds) {\n        selectedOpIds = selectedOpIds.filter(id => {\n            return this.drawOpsOfPage.hasOwnProperty(id);\n        });\n        if (selectedOpIds.length === 0)\n            return false;\n        const padding = this.opsManager.selectOp.eleContainerPadding;\n        const boundary = selectedOpIds.map(id => {\n            const op = this.drawOpsOfPage[id];\n            return getTransformedBoundary(op.data.boundary, op.data.dx, op.data.dy, op.data.scaleX, op.data.scaleY);\n        }).reduce((b1, b2) => {\n            return combineBoundary(b1, b2);\n        });\n        return pointInRect({\n            sx: boundary.sx - padding,\n            sy: boundary.sy - padding,\n            w: boundary.w + padding * 2,\n            h: boundary.h + padding * 2\n        }, [mx, my]);\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const moveOpSnapshot = transformOp.data;\n        let dx;\n        let dy;\n        if (Array.isArray(moveOpSnapshot.points)) {\n            /**\n             * 3.0.2之前\n             */\n            dx = moveOpSnapshot.points[moveOpSnapshot.points.length - 1][0] - moveOpSnapshot.points[0][0];\n            dy = moveOpSnapshot.points[moveOpSnapshot.points.length - 1][1] - moveOpSnapshot.points[0][1];\n        }\n        else {\n            dx = moveOpSnapshot.ep[0] - moveOpSnapshot.sp[0];\n            dy = moveOpSnapshot.ep[1] - moveOpSnapshot.sp[1];\n        }\n        const newData = Object.assign({}, baseOp.data, {\n            dx: dx + (baseOp.data.dx || 0),\n            dy: dy + (baseOp.data.dy || 0),\n            inProgress: moveOpSnapshot.inProgress\n        });\n        const res = Object.assign({}, baseOp, {\n            data: newData\n        });\n        return res;\n    }\n}\nexport default MoveOp;\n","/**\n * 缩放操作\n *\n * 同选择操作一样，缩放操作也要跟在选择操作之后\n */\nimport Operation from \"../Operation\";\nimport SelectOp from \"../SelectOp\";\nimport { combineBoundary, getTransformedBoundary, getTransformedPoint, pointCollideWithPoint } from \"../../misc/shapeHelper\";\nimport { TouchPlatformArray } from \"../../types\";\n//鼠标落下位置和包含盒角落要在SCALE_TEST_RADIUS之内\nconst SCALE_TEST_RADIUS = 15;\nconst KeepRatioSnapshotTypes = ['text', 'video'];\nclass ScaleOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'scale';\n        /**\n         * 选择操作选中的元素集合\n         */\n        /**\n         * 若拉伸位置是包含盒的东北角，则coordinateX和coodinateY为包含盒的西南角\n         */\n        this.coordinateX = 0;\n        this.coordinateY = 0;\n        this.boundaryW = 1;\n        this.boundaryH = 1;\n        this.activate = false;\n        this.idsBeenScaled = [];\n        this.description = \"缩放操作工具。内部使用，不提供对外接口\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousemove.tap(\"MouseMovePlugin\", this.handleMouseMove.bind(this));\n        this.opsManager.hooks.mousedown.tap(\"MouseMovePlugin\", this.handleMouseDown.bind(this));\n        this.opsManager.hooks.mouseup.tap(\"MouseMovePlugin\", this.handleMouseUp.bind(this));\n    }\n    handleMouseDown(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            const mouseInfo = this.mousePosTest(mx, my);\n            document.body.style.cursor = mouseInfo.cursorSuggestion;\n            if (mouseInfo.value === true) {\n                this.beginBatch();\n                this.activate = true;\n                this.coordinateX = mouseInfo.coordinateX;\n                this.coordinateY = mouseInfo.coordinateY;\n                this.boundaryW = mouseInfo.w === 0 ? 1 : mouseInfo.w;\n                this.boundaryH = mouseInfo.h === 0 ? 1 : mouseInfo.h;\n                this.idsBeenScaled = this.opsManager.selectedOpIds.slice();\n                return true;\n            }\n        }\n        this.activate = false;\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            if (this.activate) {\n                this.scaleInfo = {\n                    scaleX: {\n                        coordinate: this.coordinateX,\n                        factor: (mx - this.coordinateX) / this.boundaryW\n                    },\n                    scaleY: {\n                        coordinate: this.coordinateY,\n                        factor: (my - this.coordinateY) / this.boundaryH\n                    }\n                };\n                this.dispatch(this.getSnapshot(true, this.idsBeenScaled));\n                /**\n                 * 必须return true，否则会交替产生select和scale快照\n                 */\n                return true;\n            }\n            else if (this.opsManager.currOp instanceof SelectOp && !this.isMouseDown && this.opsManager.currOp.selectedOpIds.length > 0) {\n                const mouseInfo = this.mousePosTest(mx, my);\n                document.body.style.cursor = mouseInfo.cursorSuggestion;\n            }\n            else {\n                document.body.style.cursor = 'default';\n            }\n        }\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.activate && this.scaleInfo) {\n            this.activate = false;\n            this.dispatch(this.getSnapshot(false, this.idsBeenScaled));\n            this.scaleInfo = undefined;\n            return true;\n        }\n    }\n    /**\n     * 判断鼠标是否在被选择的包含盒的角落上。\n     */\n    mousePosTest(mx, my) {\n        let selectedOpIds = this.opsManager.selectedOpIds;\n        selectedOpIds = selectedOpIds.filter(id => {\n            return this.drawOpsOfPage.hasOwnProperty(id);\n        });\n        if (selectedOpIds.length === 0) {\n            return {\n                value: false,\n                cursorSuggestion: 'default',\n                coordinateX: 0,\n                coordinateY: 0,\n                w: 1,\n                h: 1\n            };\n        }\n        const boundary = this.opsManager.selectedOpIds.map(id => {\n            const op = this.drawOpsOfPage[id];\n            return getTransformedBoundary(op.data.boundary, op.data.dx, op.data.dy, op.data.scaleX, op.data.scaleY);\n        }).reduce((b1, b2) => {\n            return combineBoundary(b1, b2);\n        });\n        let radius = SCALE_TEST_RADIUS;\n        if (TouchPlatformArray.includes(this.app.platform)) {\n            radius = radius * 2.2;\n        }\n        //如果视角有缩放，要反向缩放抵消，使得缩放的热点区域固定\n        radius = radius * Math.max(1 / this.app.camera.zoomFactor, 1);\n        if (pointCollideWithPoint([mx, my], [boundary.sx, boundary.sy], radius)) {\n            //左上角\n            return {\n                value: true,\n                cursorSuggestion: 'nwse-resize',\n                coordinateX: boundary.sx + boundary.w,\n                coordinateY: boundary.sy + boundary.h,\n                w: -boundary.w,\n                h: -boundary.h\n            };\n        }\n        else if (pointCollideWithPoint([mx, my], [boundary.sx + boundary.w, boundary.sy], radius)) {\n            //右上角\n            return {\n                value: true,\n                cursorSuggestion: 'nesw-resize',\n                coordinateX: boundary.sx,\n                coordinateY: boundary.sy + boundary.h,\n                w: boundary.w,\n                h: -boundary.h\n            };\n        }\n        else if (pointCollideWithPoint([mx, my], [boundary.sx, boundary.sy + boundary.h], radius)) {\n            //左下角\n            return {\n                value: true,\n                cursorSuggestion: 'nesw-resize',\n                coordinateX: boundary.sx + boundary.w,\n                coordinateY: boundary.sy,\n                w: -boundary.w,\n                h: boundary.h\n            };\n        }\n        else if (pointCollideWithPoint([mx, my], [boundary.sx + boundary.w, boundary.sy + boundary.h], radius)) {\n            //右下角\n            return {\n                value: true,\n                cursorSuggestion: 'nwse-resize',\n                coordinateX: boundary.sx,\n                coordinateY: boundary.sy,\n                w: boundary.w,\n                h: boundary.h\n            };\n        }\n        else {\n            return {\n                value: false,\n                cursorSuggestion: 'default',\n                coordinateX: 0,\n                coordinateY: 0,\n                w: boundary.w,\n                h: boundary.h\n            };\n        }\n    }\n    getSnapshot(inProgress, idsBeenScaled) {\n        return {\n            type: this.type,\n            inProgress: inProgress,\n            scaleInfo: this.scaleInfo,\n            selectedOpIds: idsBeenScaled.slice(),\n            dependOn: idsBeenScaled.slice()\n        };\n    }\n    /**\n     * 获取本次缩放的参数\n     * @param transformOp\n     */\n    getScaleParameterBySnapshot(transformOp) {\n        const snaps = transformOp.data;\n        let factorX = 1;\n        let factorY = 1;\n        let dx = 0;\n        let dy = 0;\n        let scroll;\n        if (Array.isArray(snaps.scaleList)) {\n            scroll = snaps.scaleList[snaps.scaleList.length - 1];\n        }\n        else {\n            scroll = snaps.scaleInfo;\n        }\n        //本次快照缩放值\n        let thisScaleX = scroll.scaleX.factor;\n        let thisScaleY = scroll.scaleY.factor;\n        factorX *= thisScaleX;\n        factorY *= thisScaleY;\n        dx = thisScaleX * (dx - scroll.scaleX.coordinate) + scroll.scaleX.coordinate;\n        dy = thisScaleY * (dy - scroll.scaleY.coordinate) + scroll.scaleY.coordinate;\n        return {\n            dx,\n            dy,\n            factorX,\n            factorY\n        };\n    }\n    /**\n     * 将scale应用到baseOp中，计算baseOp新的dx，dy和scaleFactor\n     *\n     * 新的scaleFactor就是baseOp.data.scaleFactor * 当前操作的缩放乘积\n     * 新的scaleFactor的左上角\n     */\n    transformOp(baseOp, transformOp) {\n        var _a, _b;\n        const snaps = transformOp.data;\n        //baseOp快照缩放值\n        let baseScaleX = ((_a = baseOp.data.scaleX) === null || _a === void 0 ? void 0 : _a.factor) || 1;\n        let baseScaleY = ((_b = baseOp.data.scaleY) === null || _b === void 0 ? void 0 : _b.factor) || 1;\n        //结合了之前和这次Op快照的总体缩放值\n        let totalScaleX = baseScaleX;\n        let totalScaleY = baseScaleY;\n        //baseOp的boundary的左上角。计算baseOp最终左上角位置来反推dx，dy\n        const initX = baseOp.data.boundary.sx;\n        const initY = baseOp.data.boundary.sy;\n        let [left, top] = getTransformedPoint([initX, initY], baseOp.data.dx, baseOp.data.dy, baseOp.data.scaleX, baseOp.data.scaleY);\n        let scroll;\n        if (Array.isArray(snaps.scaleList)) {\n            scroll = snaps.scaleList[snaps.scaleList.length - 1];\n        }\n        else {\n            scroll = snaps.scaleInfo;\n        }\n        if (!scroll) {\n            return baseOp;\n        }\n        //本次快照缩放值\n        let thisScaleX = scroll.scaleX.factor;\n        let thisScaleY = scroll.scaleY.factor;\n        totalScaleX *= thisScaleX;\n        totalScaleY *= thisScaleY;\n        if (KeepRatioSnapshotTypes.includes(baseOp.data.type)) {\n            /**\n             * 如果是文字的话，宽高要同比例缩放。\n             * 比如若为3，-6，则改为4.5, -4.5\n             */\n            let baseFactor = Math.abs(totalScaleX) / 2 + Math.abs(totalScaleY) / 2;\n            totalScaleX *= baseFactor / Math.abs(totalScaleX);\n            totalScaleY *= baseFactor / Math.abs(totalScaleY);\n            thisScaleX = totalScaleX / baseScaleX;\n            thisScaleY = totalScaleY / baseScaleY;\n        }\n        left = thisScaleX * (left - scroll.scaleX.coordinate) + scroll.scaleX.coordinate;\n        top = thisScaleY * (top - scroll.scaleY.coordinate) + scroll.scaleY.coordinate;\n        const dx = left - totalScaleX * initX;\n        const dy = top - totalScaleY * initY;\n        const newData = Object.assign({}, baseOp.data, {\n            scaleX: {\n                factor: totalScaleX,\n                coordinate: 0\n            },\n            scaleY: {\n                factor: totalScaleY,\n                coordinate: 0\n            },\n            dx,\n            dy\n        });\n        let res;\n        if (baseOp.data.type !== 'text') {\n            res = Object.assign({}, baseOp, {\n                data: newData\n            });\n        }\n        else {\n            //处理文本。\n            //文本宽高缩放必须等比例。且缩放会修改文本的fontSize\n            newData.fontSize = Math.abs(baseOp.data.fontSize * totalScaleX / baseScaleX);\n            res = Object.assign({}, baseOp, {\n                data: newData\n            });\n        }\n        return res;\n    }\n}\nexport default ScaleOp;\n","import SelectBase from \"../SelectOp/SelectBase\";\nclass ElementEraserOp extends SelectBase {\n    constructor() {\n        super(...arguments);\n        this.type = 'element-eraser';\n        this.description = \"删除元素。\";\n        this.lastSelectedOpIds = [];\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    postMouseMove(event) {\n        if (this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = `url(${require('../../../assets/cursors/element-eraser.svg')}) -1 17, auto`;\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n    }\n    postMouseUp(idsBeenSelected) {\n        this.postClick(idsBeenSelected);\n    }\n    postClick(idsBeenSelected) {\n        this.dispatch(this.getSelectionSnapshot(false, []));\n        if (idsBeenSelected.length > 0) {\n            this.dispatch(this.getSnapshot(idsBeenSelected));\n        }\n        this.lastSelectedOpIds = [];\n    }\n    getSnapshot(idsBeenSelected) {\n        let deleteOpIds = idsBeenSelected.slice();\n        return {\n            type: 'element-eraser',\n            deleteOpIds: deleteOpIds,\n            dependOn: deleteOpIds\n        };\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const newData = Object.assign({}, baseOp.data, {\n            hidden: true\n        });\n        return Object.assign({}, baseOp, {\n            data: newData\n        });\n    }\n}\nexport default ElementEraserOp;\n","import Operation from \"../Operation\";\nclass EraserOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'eraser';\n        this.eraserColor = 'rgba(230, 100, 100, .4)';\n        this.width = 20;\n        this.points = [];\n        this.description = \"橡皮擦。\\n首先使用op:eraser:activate设置画布为橡皮擦模式。\" +\n            \"具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n            'eraser:width': {\n                value: this.setWidth.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置橡皮擦宽度`\n                }\n            },\n            'eraser:color': {\n                value: this.setColor.bind(this),\n                information: {\n                    args: 'color: Color',\n                    message: `设置橡皮擦聚光灯颜色`\n                }\n            }\n        };\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.isMouseDown) {\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot());\n        }\n    }\n    handleMouseDown(event, mx, my) {\n        this.beginBatch();\n        this.points = [];\n        this.points.push([mx, my]);\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown) {\n            this.dispatch(this.getSnapshot());\n            this.points = [];\n        }\n    }\n    getSnapshot() {\n        return {\n            type: this.type,\n            points: this.points.slice(),\n            width: this.width,\n        };\n    }\n    draw(snapshot, ctx) {\n        ctx.save();\n        //需要将透明度设置为1。否则可能会出错。\n        ctx.fillStyle = 'rgb(0, 0, 0)';\n        const data = snapshot.data;\n        const points = data.points;\n        ctx.beginPath();\n        ctx.globalCompositeOperation = 'destination-out';\n        for (let i = 1; i < points.length; i++) {\n            ctx.moveTo(points[i][0], points[i][1]);\n            ctx.arc(points[i][0], points[i][1], this.width, 0, Math.PI * 2, true);\n        }\n        ctx.fill();\n        ctx.restore();\n        this.drawEraserSignpost(ctx);\n    }\n    /**\n     * 绘制橡皮擦聚光灯\n     */\n    drawEraserSignpost(ctx) {\n        if (this.opsManager.currOp instanceof EraserOp && this.isMouseDown) {\n            ctx.beginPath();\n            ctx.arc(this.points[this.points.length - 1][0], this.points[this.points.length - 1][1], this.width, 0, Math.PI * 2, true);\n            ctx.fillStyle = this.eraserColor;\n            ctx.fill();\n        }\n    }\n    setWidth(width) {\n        this.width = width;\n    }\n    setColor(color) {\n        this.eraserColor = color;\n    }\n}\nexport default EraserOp;\n","/**\n * 重做操作。重做只能跟在撤销操作后面\n */\nimport Operation from \"../Operation\";\nimport { snapshotOutOfNormalFlowTypes } from \"../types\";\nclass RedoOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'redo';\n        this.description = \"重做操作\";\n        this.idsCouldRedo = [];\n    }\n    getCount() {\n        return this.idsCouldRedo.length;\n    }\n    registerHooks() {\n        this.opsManager.hooks.addOpHook.tap(\"AddOpSnapshotPlugin\", this.onOpAdded.bind(this));\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (key === 'y' && (this.isKeyDown('control') || this.isKeyDown('command'))) {\n            ev.preventDefault();\n            this.execCommand();\n        }\n    }\n    resetCount() {\n        this.idsCouldRedo = [];\n        this.emit('event:appState:change', 'redoCount', 0);\n    }\n    onOpAdded(snapshot) {\n        if (snapshot.category === 'pageOp' || snapshot.category === 'boardOp') {\n            this.idsCouldRedo = [];\n        }\n        else if (snapshot.data.inProgress || snapshot.data.skipUndo || snapshotOutOfNormalFlowTypes.includes(snapshot.data.type)) {\n            return;\n        }\n        else if (snapshot.data.type === 'redo') {\n            const index = this.idsCouldRedo.indexOf(snapshot.data.redoOpId);\n            if (index !== -1) {\n                this.idsCouldRedo.splice(index, 1);\n            }\n        }\n        else if (snapshot.data.type === 'undo') {\n            if (!this.idsCouldRedo.includes(snapshot.opId)) {\n                this.idsCouldRedo.push(snapshot.opId);\n            }\n        }\n        else {\n            this.idsCouldRedo = [];\n        }\n        this.emit('event:appState:change', 'redoCount', this.idsCouldRedo.length);\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            },\n        };\n    }\n    execCommand() {\n        if (this.idsCouldRedo.length === 0)\n            return;\n        this.dispatch(this.getSnapshot());\n    }\n    /**\n     * 每碰到一个redo计数+1，每碰到一个undo计数-1，当计数为0，且为undo时，就是要操作的对象。\n     * 比如W1 W2 W3 W4 U4 U3 U2 R2 R3 R4对应的计数为1 2 1 0，此时遇到U4，即为要操作的对象\n     */\n    getSnapshot() {\n        const opOfPage = this.opsOfPage;\n        let redoOpId = '';\n        let count = 0;\n        for (let i = opOfPage.length - 1; i >= 0; i--) {\n            const op = opOfPage[i];\n            if (op.data.type === 'undo' && count === 0) {\n                redoOpId = op.opId;\n                break;\n            }\n            else if (op.data.type === 'undo') {\n                count--;\n            }\n            else if (op.data.type === 'redo') {\n                count++;\n            }\n            else if (!op.data.skipUndo && !snapshotOutOfNormalFlowTypes.includes(op.data.type)) {\n                console.warn('DEV-->', 'redo操作之前有非undo操作。请查看具体细节', opOfPage);\n            }\n        }\n        return {\n            type: this.type,\n            redoOpId\n        };\n    }\n}\nexport default RedoOp;\n","/**\n * 撤销操作\n */\nimport Operation from \"../Operation\";\nimport { snapshotOutOfNormalFlowTypes } from \"../types\";\nclass UndoOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'undo';\n        this.description = \"撤销操作\";\n        this.idsCouldUndo = [];\n    }\n    getCount() {\n        return this.idsCouldUndo.length;\n    }\n    registerHooks() {\n        this.opsManager.hooks.addOpHook.tap(\"AddOpSnapshotPlugin\", this.onOpAdded.bind(this));\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (key === 'z' && (this.isKeyDown('control') || this.isKeyDown('command'))) {\n            ev.preventDefault();\n            this.execCommand();\n        }\n    }\n    resetCount() {\n        this.idsCouldUndo = [];\n        this.emit('event:appState:change', 'undoCount', 0);\n    }\n    onOpAdded(snapshot) {\n        if (snapshot.category === 'pageOp' || snapshot.category === 'boardOp') {\n            this.idsCouldUndo = [];\n        }\n        else if (snapshot.data.skipUndo || snapshot.data.inProgress || snapshotOutOfNormalFlowTypes.includes(snapshot.data.type)) {\n            return;\n        }\n        else if (snapshot.data.type === 'undo') {\n            const index = this.idsCouldUndo.indexOf(snapshot.data.undoOpId);\n            if (index !== -1) {\n                this.idsCouldUndo.splice(index, 1);\n            }\n        }\n        else if (snapshot.data.type !== 'undo') {\n            if (!this.idsCouldUndo.includes(snapshot.opId)) {\n                this.idsCouldUndo.push(snapshot.opId);\n            }\n        }\n        this.emit('event:appState:change', 'undoCount', this.idsCouldUndo.length);\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand() {\n        if (this.idsCouldUndo.length === 0)\n            return;\n        this.dispatch(this.getSnapshot());\n    }\n    /**\n     * select，以及过程中的快照不需要undo\n     */\n    getSnapshot() {\n        const opOfPage = this.opsOfPage;\n        let undoOpId = '';\n        //记录每个快照当前是否可以被undo\n        /**\n         * 当处理到非undo，redo，非inProgress，非skipUndo的快照时，\n         * 若该快照未被undo，redo处理过，则opUndoCount中不存在该快照的entry，则该快照可以被undo\n         * 若该快照已经被undo了，则其opUndoCount[opId]应该为1\n         * 若该快照已经被undo，然后又被redo，则处理redo后（逆向处理），它的opUndoCount[opId]应该为-1，处理undo后，它的opUndoCount[opId]应该为0。\n\n         * 比如W1 U1 W2 W3 W4 W5 U5 U4 W6 U6 U3\n         *\n         * 若要寻找U3对应的撤销快照Id。从U6开始，每一步后opUndoCount的变化为：\n         * {W6}             (U6 + W6)\n         * {W6, W4}         (U4)\n         * {W6, W4, W5}     (U5 + W5 + W4)\n         * 处理到W3时，发现W3尚未被Undo，因此W3就是要撤销的快照\n         */\n        const opAlreadyBeenUndo = new Set();\n        for (let i = opOfPage.length - 1; i >= 0; i--) {\n            //该快照应该被跳过\n            const op = opOfPage[i];\n            const opShouldBeSkiped = op.data.inProgress || op.data.skipUndo || snapshotOutOfNormalFlowTypes.includes(op.data.type);\n            if (op.data.type !== 'undo' && !opShouldBeSkiped && !opAlreadyBeenUndo.has(op.opId)) {\n                undoOpId = op.opId;\n                break;\n            }\n            else if (op.data.type === 'undo') {\n                opAlreadyBeenUndo.add(op.data.undoOpId);\n            }\n        }\n        return {\n            type: this.type,\n            undoOpId\n        };\n    }\n}\nexport default UndoOp;\n","/**\n * 背景Op\n *\n * 背景Op和ImageOp类似。区别在于背景Op不会进入快照队列中被undo，redo，clear等操作处理\n */\n/**\n * 图片相关操作\n */\nimport Operation from \"../Operation\";\nimport { addImage, draw, getBackgroundImagePorperPosition, getImageProperPosition } from \"./util\";\nclass BackgroundOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'background';\n        this.description = \"设置背景操作\";\n        this.getBoundaryFromSnapshot = (snapshot) => {\n            let boundary;\n            if (snapshot.data.hasOwnProperty('imgWidth')) {\n                //老版本：背景图片盛满canvas, 快照数据中包含imgWidth, imgHeight\n                const { sx, sy, width, height } = getImageProperPosition(this, snapshot.data.imgWidth, snapshot.data.imgHeight);\n                boundary = {\n                    sx, sy, w: width, h: height\n                };\n            }\n            else {\n                //3.0.2之后的版本\n                //背景快照和其他快照一样，使用世界坐标系，即无论容器大小如何，无论如何缩放，\n                //背景快照和其他元素的相对位置不变\n                boundary = snapshot.data.boundary;\n            }\n            return boundary;\n        };\n        this.dispatchImage = (url, imgWidth, imgHeight, page) => {\n            const { sx, sy, width, height } = getBackgroundImagePorperPosition(this, imgWidth, imgHeight);\n            if (page) {\n                this.dispatchFromPage({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                }, page);\n            }\n            else {\n                this.dispatch({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                });\n            }\n        };\n    }\n    eventsToListen() {\n        return {\n            'background:imageUpload': {\n                value: this.addImage.bind(this),\n                information: {\n                    args: `url: string, opts?: {\n                        width?: number,\n                        height?: number,\n                        pageIndex?: number\n                    }`,\n                    message: `上传背景图片`\n                }\n            },\n        };\n    }\n    addImage(url, opts) {\n        return addImage(this, url, opts);\n    }\n    preview(snapshot, ctx, opts) {\n        const data = snapshot.data;\n        return draw(ctx, data.url, this.getBoundaryFromSnapshot(snapshot), {\n            page: opts.page,\n            supportToDataUrl: opts.supportToDataUrl,\n            preview: true\n        });\n    }\n    draw(snapshot, ctx, opts) {\n        const data = snapshot.data;\n        return draw(ctx, data.url, this.getBoundaryFromSnapshot(snapshot), {\n            page: opts.page,\n            div: opts.div,\n            id: snapshot.opId,\n            type: 'background'\n        });\n    }\n}\nexport default BackgroundOp;\n","/**\n * 图片相关操作\n */\nimport Operation from \"../Operation\";\nimport { addImage, draw, getImageProperPosition } from \"./util\";\nimport { getTransformedBoundary } from \"../../misc/shapeHelper\";\nclass ImageOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'image';\n        this.description = \"图片操作\";\n        /**\n         * initWidth, initHeight可能是图片的固有宽高，也可以是用户指定的该图片的显示宽高\n         *\n         * ImageOp快照中的boundary完全决定了图片相对于其他快照的位置\n         *\n         * @param url\n         * @param initWidth\n         * @param initHeight\n         * @param page\n         */\n        this.dispatchImage = (url, initWidth, initHeight, page) => {\n            const { sx, sy, width, height } = getImageProperPosition(this, initWidth, initHeight);\n            if (page) {\n                this.dispatchFromPage({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                }, page);\n            }\n            else {\n                this.dispatch({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                });\n            }\n        };\n    }\n    eventsToListen() {\n        return {\n            'image:upload': {\n                value: this.addImage.bind(this),\n                information: {\n                    args: `url: string, opts?: {\n                        width?: number,\n                        height?: number\n                    }`,\n                    message: `上传图片`\n                }\n            },\n        };\n    }\n    addImage(url, opts) {\n        return addImage(this, url, opts);\n    }\n    preview(snapshot, ctx, opts) {\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        return draw(ctx, data.url, boundary, {\n            page: opts.page,\n            supportToDataUrl: opts.supportToDataUrl,\n            preview: true\n        });\n    }\n    draw(snapshot, ctx, opts) {\n        /**\n         * page是该图片的容器页面。this.opsManager.currPage是当前打开的页面。\n         * 生成预览图时，currPage和图片的容器页面不是同一个页面\n         */\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        return draw(ctx, data.url, boundary, {\n            page: opts.page,\n            div: opts.div,\n            id: snapshot.opId,\n            type: 'image'\n        });\n    }\n    hide(snapshot, ctx, div) {\n        var _a;\n        //移除之前绘制的文本框\n        let image = div.querySelector(`[id='image-${snapshot.opId}']`);\n        (_a = image === null || image === void 0 ? void 0 : image.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(image);\n    }\n}\nexport default ImageOp;\n","import { fetchResource, getResource, resourceLoaded } from \"../../resource/resourceCache\";\nexport const addImage = (op, url, opts) => {\n    const currBoard = op.app.room.currBoard;\n    let currPage = op.opsManager.currPage;\n    if (opts && opts.hasOwnProperty('pageIndex')) {\n        const pageName = currBoard.pageNames[opts.pageIndex];\n        if (currBoard.pages.hasOwnProperty(pageName)) {\n            currPage = currBoard.pages[pageName];\n        }\n    }\n    if (resourceLoaded(url)) {\n        const img = getResource(url);\n        const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : img.width;\n        const height = (opts === null || opts === void 0 ? void 0 : opts.height) ? opts.height : img.height;\n        op.dispatchImage(url, width, height, currPage);\n    }\n    else if ((opts === null || opts === void 0 ? void 0 : opts.width) && (opts === null || opts === void 0 ? void 0 : opts.height)) {\n        op.dispatchImage(url, opts === null || opts === void 0 ? void 0 : opts.width, opts === null || opts === void 0 ? void 0 : opts.height, currPage);\n    }\n    else {\n        //TODO: 这里是错误的。dispatch调用时连接的boardIndex和pageIndex和addImage调用时不一样了。\n        currPage.addWaitingResource(url);\n        fetchResource(url, (img) => {\n            const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : img.width;\n            const height = (opts === null || opts === void 0 ? void 0 : opts.height) ? opts.height : img.height;\n            op.dispatchImage(url, width, height, currPage);\n            currPage.removeWaitingResource(url);\n        });\n    }\n};\n/**\n * TODO：可能存在问题。初始化时，会同步房间的信息。目前的写法是接收每个快照时都会refresh一次。这可能会导致多个页面的图片不断被删除，再创建。\n * 从用户角度看，会有明显的闪烁效果。\n * @param ctx\n * @param url\n * @param boundary\n * @param opts\n */\nexport const draw = (ctx, url, boundary, opts) => {\n    /**\n     * page是该图片的容器页面。this.opsManager.currPage是当前打开的页面。\n     * 生成预览图时，currPage和图片的容器页面不是同一个页面\n     */\n    let { page, div, preview, id, supportToDataUrl } = opts;\n    if (resourceLoaded(url) && !preview && div && id) {\n        let image = div.querySelector(`[id='image-${id}']`);\n        if (!image) {\n            if (opts.type === 'background') {\n                /**\n                 * 背景图片的URL不会在同一page中出现两次，因此不需要cloneNode\n                 */\n                image = getResource(url);\n            }\n            else {\n                image = getResource(url).cloneNode(true);\n            }\n            image.id = `image-${id}`;\n            image.style.userSelect = 'none';\n            image.style.pointerEvents = 'none';\n            image.style.position = 'absolute';\n            image.style.imageRendering = '-webkit-optimize-contrast';\n            div.appendChild(image);\n        }\n        image.width = boundary.w;\n        image.height = boundary.h;\n        image.style.left = `${boundary.sx}px`;\n        image.style.top = `${boundary.sy}px`;\n        const pxOverBorder = getImagePartOutOfContainer(boundary, opts.page.app.camera);\n        if (pxOverBorder) {\n            image.style.clipPath = `inset(${pxOverBorder.top}px ${pxOverBorder.right}px ${pxOverBorder.bottom}px ${pxOverBorder.left}px)`;\n        }\n        else {\n            image.style.clipPath = 'none';\n        }\n    }\n    else if (supportToDataUrl && resourceLoaded(url)) {\n        ctx.drawImage(getResource(url, true), boundary.sx, boundary.sy, boundary.w, boundary.h);\n    }\n    else if (!supportToDataUrl && resourceLoaded(url)) {\n        ctx.drawImage(getResource(url, false), boundary.sx, boundary.sy, boundary.w, boundary.h);\n    }\n    else if (resourceLoaded('imageLoading')) {\n        /**\n         * 图片还未下载下来时，先用图片正在加载中代替\n         */\n        ctx.drawImage(getResource('imageLoading'), boundary.sx + 5, boundary.sy + 5, Math.max(0, boundary.w - 10), Math.max(0, boundary.h - 10));\n    }\n    if (!resourceLoaded(url)) {\n        //回调函数中必须用变量currPage，而不是this.opsManager.currPage，否则被调用时引用的page可能不对\n        page.addWaitingResource(url);\n        fetchResource(url, () => {\n            page.removeWaitingResource(url);\n        });\n    }\n};\n/**\n * 返回图片boundary在container之外的部分。在container外面的部分要用clippath隐藏\n * @param boundary\n */\nconst getImagePartOutOfContainer = (boundary, camera) => {\n    const { sx, sy, w, h } = boundary;\n    const ex = sx + w;\n    const ey = sy + h;\n    const screenBound = camera.getContainerWorldRect();\n    const left = Math.max(0, screenBound.centerX - screenBound.width / 2 - sx); //screen左侧 - boundary左侧\n    const right = Math.max(0, ex - (screenBound.centerX + screenBound.width / 2)); //boundary右侧 - screen右侧\n    const top = Math.max(0, screenBound.centerY - screenBound.height / 2 - sy); //screen顶部 - boundary顶部\n    const bottom = Math.max(0, ey - (screenBound.centerY + screenBound.height / 2)); //boundary底部 - screen底部\n    if (left > 0 || right > 0 || top > 0 || bottom > 0) {\n        return {\n            left, right, top, bottom\n        };\n    }\n    else {\n        return null;\n    }\n};\n/**\n * 根据图片的宽高，容器的宽高，获得图片合适的宽高，及位置。\n *\n * 合适的宽高，位置应该使图片不被遮挡的情况下尽可能大，同时不超过图片本身的尺寸\n *\n * ImageOp的宽高在addImage时确定，所有用户那里ImageOp和其他快照的相对位置固定（不随容器宽高resize而变化）\n * BackgroundOp的宽高在draw时确定，图片位置总是相对于容器的最佳位置\n *\n * width, height可能是图片的固有宽高，用户也可以在上传图片时指定图片的初始宽高\n */\nexport const getImageProperPosition = (op, width, height) => {\n    const sanityWidth = op.app.container.width;\n    const sanityHeight = op.app.container.height;\n    const MAX_ALLOWED_WIDTH = sanityWidth;\n    const MAX_ALLOWED_HEIGHT = sanityHeight;\n    if (width > MAX_ALLOWED_WIDTH && height < MAX_ALLOWED_HEIGHT) {\n        height = height * MAX_ALLOWED_WIDTH / width;\n        width = MAX_ALLOWED_WIDTH;\n    }\n    else if (width < MAX_ALLOWED_WIDTH && height > MAX_ALLOWED_HEIGHT) {\n        width = width * MAX_ALLOWED_HEIGHT / height;\n        height = MAX_ALLOWED_HEIGHT;\n    }\n    else if (width > MAX_ALLOWED_WIDTH && height > MAX_ALLOWED_HEIGHT) {\n        if (width / height > MAX_ALLOWED_WIDTH / MAX_ALLOWED_HEIGHT) {\n            height = height * MAX_ALLOWED_WIDTH / width;\n            width = MAX_ALLOWED_WIDTH;\n        }\n        else {\n            width = width * MAX_ALLOWED_HEIGHT / height;\n            height = MAX_ALLOWED_HEIGHT;\n        }\n    }\n    width = width / op.app.camera.scale;\n    height = height / op.app.camera.scale;\n    let sx = op.app.camera.centerX - width / 2;\n    let sy = op.app.camera.centerY - height / 2;\n    return {\n        sx, sy, width, height\n    };\n};\n/**\n * 背景图应该是100%位置的时，大概撑满页面\n * @param op\n * @param width\n * @param height\n */\nexport const getBackgroundImagePorperPosition = (op, width, height) => {\n    let sx = -width / 2;\n    let sy = -height / 2;\n    return {\n        sx, sy, width, height\n    };\n};\n","import Operation from \"../Operation\";\nimport drawConfig from \"../DrawOp/drawConfig\";\nimport { drawUserName } from \"../util\";\nclass LaserOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'laser';\n        this.description = \"镭射灯\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    registerHooks() {\n        this.opsManager.hooks.opChange.tap('OpChange', this.handleOpChange.bind(this));\n    }\n    /**\n     * 当操作类型变化时，关闭镭射灯\n     */\n    handleOpChange(newType) {\n        var _a;\n        if (newType !== 'laser' && ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'laser') {\n            document.body.style.cursor = 'default';\n            this.dispatch(this.getSnapshot(false));\n        }\n    }\n    handleMouseLeave(event, mx, my) {\n        this.dispatch(this.getSnapshot(false));\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = 'none';\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n        this.dispatch(this.getSnapshot(true, [mx, my]));\n    }\n    getSnapshot(inProgress, point) {\n        return {\n            type: 'laser',\n            point,\n            inProgress: inProgress,\n            skipUndo: true,\n            reuseOpType: 'laser',\n            color: drawConfig.strokeColor\n        };\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        /**\n         * 激光笔大小固定为12 * 12的红色圆形\n         */\n        const r = 6 / this.app.camera.scale;\n        if (snapshot.data.inProgress && data.point) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.arc(data.point[0], data.point[1], r, 0, Math.PI * 2, true);\n            ctx.shadowColor = 'rgba(255, 0, 0, 0.5)';\n            ctx.shadowBlur = 8;\n            ctx.fillStyle = '#ff0000';\n            ctx.fill();\n            ctx.restore();\n            if (snapshot.uid !== this.app.account && this.app.appConfig.showLaserNickname) {\n                drawUserName({\n                    ctx,\n                    account: snapshot.uid,\n                    scale: this.app.camera.scale,\n                    px: data.point[0],\n                    py: data.point[1],\n                    bgColor: data.color\n                });\n            }\n        }\n    }\n}\nexport default LaserOp;\n","/**\n * 删除操作，可通过ctrl-v还原\n */\nimport Operation from \"../Operation\";\nclass LockOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'lock';\n        this.description = \"锁定元素。\";\n    }\n    eventsToListen() {\n        return {\n            'lock': {\n                value: this.lockOps.bind(this),\n                information: {\n                    args: 'opIds',\n                    message: `锁定元素`\n                }\n            },\n            'unlock': {\n                value: this.unlockOps.bind(this),\n                information: {\n                    args: 'opIds',\n                    message: `解锁元素`\n                }\n            }\n        };\n    }\n    lockOps(opIds) {\n        this.dispatch(this.getSnapshot(opIds, 'lock'));\n    }\n    unlockOps(opIds) {\n        this.dispatch(this.getSnapshot(opIds, 'unlock'));\n    }\n    getSnapshot(opIds, action) {\n        return {\n            type: this.type,\n            action,\n            dependOn: opIds.slice()\n        };\n    }\n    /**\n     * 锁定，或者解锁元素\n     */\n    transformOp(baseOp, transformOp) {\n        const newData = Object.assign({}, baseOp.data, {\n            locked: transformOp.data.action === 'lock' ? true : false\n        });\n        return Object.assign({}, baseOp, {\n            data: newData\n        });\n    }\n}\nexport default LockOp;\n","/**\n * 移动操作。\n * 移动操作必须跟在选择操作之后\n */\nimport Operation from \"../Operation\";\nimport penUrl from '../../../assets/cursors/pen.svg';\nimport elementEraserUrl from '../../../assets/cursors/element-eraser.svg';\nimport cursorUrl from '../../../assets/cursors/cursor.svg';\nimport drawConfig from \"../DrawOp/drawConfig\";\nimport { drawUserName } from \"../util\";\nconst penImg = new Image();\nconst elementEraserImg = new Image();\nconst cursorImg = new Image();\npenImg.src = penUrl;\nelementEraserImg.src = elementEraserUrl;\ncursorImg.src = cursorUrl;\nclass MousePointerOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'mouse-pointer';\n        this.description = \"展示鼠标位置\";\n        this.sampleSeq = 0;\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousemove.tap(\"MousemovePlugin\", this.handleMouseMove.bind(this));\n        this.opsManager.hooks.mouseleave.tap(\"MousemovePlugin\", this.handleMouseLeave.bind(this));\n    }\n    handleMouseMove(event, mx, my) {\n        var _a;\n        if (!this.app.showCursor || ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'laser')\n            return;\n        const inContainer = this.app.container.isTargetOnContainer(event.target);\n        /**\n         * 减少网络传输数据量。每pointsPerBatch才传输一次数据\n         */\n        if (this.sampleSeq % 6 === 0) {\n            this.dispatch(this.getSnapshot([mx, my], inContainer));\n        }\n        this.sampleSeq += 1;\n    }\n    handleMouseLeave(event, mx, my) {\n        var _a;\n        if (!this.app.showCursor || ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'laser')\n            return;\n        this.dispatch(this.getSnapshot([mx, my], false));\n        this.sampleSeq = 0;\n    }\n    getSnapshot(point, inContainer) {\n        return {\n            type: 'mouse-pointer',\n            point: [Number(point[0].toFixed(1)), Number(point[1].toFixed(1))],\n            c: drawConfig.strokeColor,\n            show: inContainer ? 1 : 0,\n            op: this.opsManager.currOp ? this.opsManager.currOp.type : '',\n            reuseOpType: 'mouse-pointer',\n            nickname: this.app.nickname\n        };\n    }\n    preview() {\n        return;\n    }\n    draw(snapshot, ctx) {\n        const now = new Date().valueOf();\n        if (now - snapshot.time > 5000) {\n            return;\n        }\n        const data = snapshot.data;\n        if (snapshot.uid === this.app.account || !data.show || !data.point) {\n            return;\n        }\n        const img = this.getImageByOpType(data.op);\n        let [px, py] = this.mapPointInsideContainer(data.point[0], data.point[1]);\n        if (this.opsManager.drawOpTypes.includes(data.op)) {\n            /**\n             * 画笔的图片位置需要微调\n             */\n            px = px - 1 / this.app.camera.scale;\n            py = py - 27 / this.app.camera.scale;\n        }\n        let cursorSize = 32 / this.app.camera.scale;\n        ctx.drawImage(img, px, py, cursorSize, cursorSize);\n        if (!this.app.appConfig.showCursorNickname)\n            return;\n        drawUserName({\n            ctx,\n            account: data.nickname || snapshot.uid,\n            scale: this.app.camera.scale,\n            px,\n            py,\n            bgColor: data.c\n        });\n    }\n    /**\n     * 另一个用户的鼠标位置可能超出屏幕，若超出屏幕，找到屏幕边缘位置绘制\n     * @param point\n     */\n    mapPointInsideContainer(px, py) {\n        const [worldSx, worldSy] = this.app.camera.convertToPointInWorld(0, 0);\n        const [worldEx, worldEy] = this.app.camera.convertToPointInWorld(this.app.container.width, this.app.container.height);\n        if (px < worldSx + 30) {\n            px = worldSx + 30;\n        }\n        else if (px > worldEx - 25) {\n            px = worldEx - 25;\n        }\n        if (py < worldSy + 30) {\n            py = worldSy + 30;\n        }\n        else if (py > worldEy - 15) {\n            py = worldEy - 15;\n        }\n        return [px, py];\n    }\n    getImageByOpType(opType) {\n        if (opType === 'element-eraser') {\n            return elementEraserImg;\n        }\n        else if (this.opsManager.drawOpTypes.includes(opType)) {\n            return penImg;\n        }\n        else {\n            return cursorImg;\n        }\n    }\n}\nexport default MousePointerOp;\n","import { globalSnapshotTypes } from './types';\nimport { v4 as uuidv4 } from 'uuid';\nlet lastGlobalOpId;\nlet lastSnapshotInfo = {\n    type: '',\n    boardName: 'whiteboard',\n    pageIndex: '0',\n    dependOn: undefined,\n    timestamp: 0\n};\nlet newOpFlag = false;\n/**\n * 下面情况会生成新的opId。\n * 1. 操作类型和上一次dispatch的快照类型不同\n * 2. 操作的dependOn和上一次dispatch的dependOn不同\n * 3. 有用beginBatch明确标识为下一个opId\n *\n * 4. 命令型操作，如undo，redo，image等等\n */\nfunction genNewOpId(type, dependOn, pageIndex, boardName) {\n    let gen = false;\n    if (lastSnapshotInfo.pageIndex !== pageIndex) {\n        gen = true;\n    }\n    else if (lastSnapshotInfo.boardName !== boardName) {\n        gen = true;\n    }\n    else if (!lastSnapshotInfo.inProgress) {\n        //上一个快照已经结束，不需要新的快照\n        gen = true;\n    }\n    else if (type !== lastSnapshotInfo.type) {\n        gen = true;\n    }\n    else if (typeof dependOn !== typeof lastSnapshotInfo.dependOn) {\n        gen = true;\n    }\n    else if (typeof dependOn === 'string' && dependOn !== lastSnapshotInfo.dependOn) {\n        gen = true;\n    }\n    else if (Array.isArray(dependOn) && Array.isArray(lastSnapshotInfo.dependOn) && dependOn.join(',') !== lastSnapshotInfo.dependOn.join(',')) {\n        gen = true;\n    }\n    else if (newOpFlag) {\n        gen = true;\n    }\n    else if (['undo', 'redo', 'image'].includes(type)) {\n        gen = true;\n    }\n    return gen;\n}\nclass Operation {\n    constructor(app) {\n        this.type = 'base';\n        this.app = app;\n        this.opsManager = app.opsManager;\n        this.registerHooks();\n    }\n    get isMouseDown() {\n        return this.app.container.isMouseDown;\n    }\n    /**\n     * 可以添加生命周期钩子。\n     */\n    registerHooks() { }\n    /**\n     * 注册监听事件及响应方式\n     * key: 事件名称\n     * value：响应方式\n     *\n     * 最基本的有两类事件，建议使用下面名字命名：\n     * exec: 当设置为true时，会调用this.execCommand()\n     * activate: 当设置为true时，OpsManager会拦截该请求，并设置活跃操作\n     * 接到其他事件时，会直接调用键值对应的value。\n     *\n     * UI层派发事件名称应该为：'op:${type}:{eventName}'。manager拦截事件后，会调用execCommand或者设置OpsManager中激活的Op。\n     */\n    eventsToListen() {\n        return {\n            exec: {\n                value: false,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            },\n            activate: {\n                value: false,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n        };\n    }\n    execCommand() {\n        console.warn('DEV-->', `若设置了exec为true，请继承execCommand函数，并作出对应的处理。`);\n    }\n    afterActivate() {\n        //如果operation激活后有后续事情处理，在该函数中可以处理\n    }\n    /**\n     * 返回操作快照\n     */\n    getSnapshot(...args) {\n        return {\n            type: this.type\n        };\n    }\n    /**\n     * op可以通过此函数查询如果它发送快照，它的快照id是什么?\n     * @param type\n     * @param dependOn\n     */\n    opIdForseen(type, dependOn) {\n        const newId = genNewOpId(type, dependOn, this.opsManager.currPage.pageIndex, this.opsManager.currPage.boardName);\n        if (newId) {\n            return this.opsManager.currPage.getNextOpId();\n        }\n        else {\n            return this.opsManager.currPage.getOpId();\n        }\n    }\n    /**\n     * 将操作快照发送给远程服务器，以及本地对应的操作队列\n     *\n     * @param snapshot\n     */\n    dispatch(data) {\n        if (!data.hasOwnProperty('type')) {\n            /**\n             * 发送部分数据\n             */\n            const snapshot = {\n                opId: this.opsManager.currPage.getOpId(),\n                data\n            };\n            this.app.room.dispatch(snapshot);\n        }\n        else if (globalSnapshotTypes.indexOf(data.type) > -1) {\n            this.dispatchGlobalAction(data);\n        }\n        else if (data.type === 'page') {\n            this.dispatchPageAction(data);\n        }\n        else if (data.type === 'board') {\n            this.dispatchBoardAction(data);\n        }\n        else {\n            /**\n             * 处理当前页面的操作\n             */\n            const currBoard = this.app.room.boards[this.app.room.currIndex];\n            const now = (new Date()).valueOf();\n            let opId;\n            if (data.reuseOpType) {\n                /**\n                 * 激光笔，鼠标位置等类型可以一直不改变opId\n                 */\n                opId = `${this.app.account}-${data.reuseOpType}`;\n                delete data['reuseOpType'];\n            }\n            else {\n                const newId = genNewOpId(data.type, data.dependOn, this.opsManager.currPage.pageIndex, this.opsManager.currPage.boardName);\n                newOpFlag = false;\n                lastSnapshotInfo = {\n                    type: data.type,\n                    dependOn: data.dependOn,\n                    timestamp: now,\n                    pageIndex: this.opsManager.currPage.pageIndex,\n                    boardName: this.opsManager.currPage.boardName,\n                    inProgress: data.inProgress\n                };\n                if (newId) {\n                    this.opsManager.currPage.prepareNewOpId();\n                }\n                opId = this.opsManager.currPage.getOpId();\n            }\n            const snapshot = {\n                category: 'inPageOp',\n                board: this.app.room.currIndex,\n                page: currBoard.currIndex,\n                time: now,\n                uid: this.app.account,\n                opId: opId,\n                data\n            };\n            this.app.room.dispatch(snapshot);\n        }\n    }\n    /**\n     * 某些异步快照发送的时候，currBoard和currPage可能发生了变化。\n     * 为了处理这些场景，需要说明快照是从哪个page中发出的。\n     * 这一类场景只可能是page里面的快照，因此不用处理PageAction和BoardAction\n     * @param data\n     * @param page\n     */\n    dispatchFromPage(data, page) {\n        /**\n         * 处理当前页面的操作\n         */\n        const now = (new Date()).valueOf();\n        //保险起见，准备新的opId\n        page.prepareNewOpId();\n        const snapshot = {\n            category: 'inPageOp',\n            board: page.boardName,\n            page: Number(page.pageIndex),\n            time: now,\n            uid: this.app.account,\n            opId: page.getOpId(),\n            data\n        };\n        lastSnapshotInfo = {\n            type: data.type,\n            dependOn: data.dependOn,\n            timestamp: now,\n            pageIndex: page.pageIndex,\n            boardName: page.boardName,\n            inProgress: data.inProgress\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    /**\n     * 处理页面相关操作，包括goto和delete两类page操作。\n     * @param data\n     */\n    dispatchPageAction(data) {\n        const now = (new Date()).valueOf();\n        const snapshot = {\n            category: 'pageOp',\n            board: this.app.room.currIndex,\n            time: now,\n            uid: this.app.account,\n            opId: uuidv4(),\n            data\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    /**\n     * 处理页面相关操作，包括goto和delete两类page操作。\n     * @param data\n     */\n    dispatchBoardAction(data) {\n        const now = (new Date()).valueOf();\n        const snapshot = {\n            category: 'boardOp',\n            time: now,\n            uid: this.app.account,\n            opId: uuidv4(),\n            data\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    dispatchGlobalAction(data) {\n        let opId;\n        const now = (new Date()).valueOf();\n        if (data.reuseOpType) {\n            opId = `${this.app.account}-${data.reuseOpType}`;\n            delete data['reuseOpType'];\n        }\n        else {\n            if (!lastGlobalOpId || newOpFlag) {\n                lastGlobalOpId = uuidv4();\n                newOpFlag = false;\n            }\n            opId = lastGlobalOpId;\n        }\n        const snapshot = {\n            category: 'globalOp',\n            time: now,\n            uid: this.app.account,\n            opId,\n            data\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    emit(event, ...args) {\n        this.app.dispatcher.emit(event, ...args);\n    }\n    draw(snapshot, ctx, opts) {\n        console.warn('DEV-->', `请实现${this.type}子类中draw函数。`);\n    }\n    //文本本来是绘制在dom上。由于preview需要绘制在图片上，因此使用preview方法重写\n    //TextOp需要重写此函数，其他Op不需要\n    preview(snapshot, ctx, opts) {\n        this.draw(snapshot, ctx, opts);\n    }\n    hide(snapshot, ctx, div) {\n        //如有需要，继承此函数清除被清空的图形\n    }\n    mergePartial(snapshot, partial) {\n        if (partial.hasOwnProperty('category')) {\n            return partial;\n        }\n        else {\n            return snapshot;\n        }\n    }\n    /**\n     * 连续动作开始，之后的快照会使用新的opId。\n     */\n    beginBatch() {\n        newOpFlag = true;\n    }\n    /**\n     * 判断某个按键是否按下，按键状态存储在container中\n     */\n    isKeyDown(key) {\n        return this.app.container.isKeyDown(key);\n    }\n    /**\n     * 同一页面的所有操作快照\n     */\n    get opsOfPage() {\n        return this.opsManager.currPage.opQueue;\n    }\n    /**\n     * 同一页面所有可直接绘制的操作快照\n     * TODO: 需要修改\n     */\n    get drawOpsOfPage() {\n        return this.opsManager.drawOpsOfPage;\n    }\n    getOpTypeByOpId(opId) {\n        if (this.opsManager.drawOpsOfPage.hasOwnProperty(opId)) {\n            return this.opsManager.drawOpsOfPage[opId].data.type;\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nexport default Operation;\n","/**\n * OpsManager将UI组件中的动作，canvas中的鼠标动作，键盘动作等等路由给对应的操作处理。\n *\n * 同时它还保存了当前Page的操作快照集合。\n */\nimport { cameraSnapshotTypes } from \"./types\";\nimport { SyncBailHook, SyncHook } from \"tapable\";\nimport PenOp from \"./DrawOp/PenOp\";\nimport LineOp from \"./DrawOp/LineOp\";\nimport SelectOp from \"./SelectOp\";\nimport MoveOp from \"./EditOp/MoveOp\";\nimport ScaleOp from \"./EditOp/ScaleOp\";\nimport DeleteOp from \"./EditOp/DeleteOp\";\nimport UndoOp from \"./HistoryOp/UndoOp\";\nimport RedoOp from \"./HistoryOp/RedoOp\";\nimport ClearOp from \"./ClearOp\";\nimport EraserOp from \"./EraserOp\";\nimport RectOp from \"./DrawOp/RectOp\";\nimport EllipseOp from \"./DrawOp/EllipseOp\";\nimport TextOp from \"./TextOp\";\nimport PageOp from \"./PageOp\";\nimport ImageOp from \"./ImageOp\";\nimport BoardOp from \"./BoardOp\";\nimport DuplicateOp from \"./EditOp/DupliateOp\";\nimport PenArrowOp from \"./DrawOp/PenArrowOp\";\nimport LineArrowOp from \"./DrawOp/LineArrowOp\";\nimport ElementEraserOp from \"./EraserOp/ElementEraserOp\";\nimport LaserOp from \"./LaserOp\";\nimport LockOp from './LockOp';\nimport BackgroundOp from \"./ImageOp/BackgroundOp\";\nimport PanOp from \"./CameraOp/PanOp\";\nimport ZoomOp from \"./CameraOp/ZoomOp\";\nimport ResetCameraOp from \"./CameraOp/ResetCameraOp\";\nimport MousePointerOp from \"./MousePointerOp\";\nimport ResizeCameraOp from \"./CameraOp/ResizeOp\";\nimport FitToContentOp from \"./CameraOp/FitToContent\";\nimport FitToDocOp from \"./CameraOp/FitToDoc\";\nimport CameraBoundOp from \"./CameraOp/CameraBoundOp\";\nimport RectFillOp from \"./DrawOp/RectFillOp\";\nimport EllipseFillOp from \"./DrawOp/EllipseFillOp\";\nimport VideoOp from \"./VideoOp\";\nclass OpsManager {\n    constructor(app) {\n        this.currOp = null;\n        this.opMap = {};\n        this.drawOpTypes = [];\n        this.app = app;\n        this.dispatcher = app.dispatcher;\n        /**\n         * ***********************侵入生命周期函数************************\n         *\n         * 目前可以侵入mousedown, mousemove, mouseup等函数。\n         * 钩子设置方式可以查看EditOp/MoveOp.ts\n         *\n         * 如果操作只在激活时监听鼠标动作，则不需要侵入生命周期函数。鼠标动作默认调用被激活操作（currOp）的鼠标处理函数。\n         * 如果非激活操作需要处理鼠标动作，比如移动操作，则需要添加hooks\n         *\n         * 当指定的处理函数返回任何值时，鼠标处理函数不再处理别的bailHook，并且不再处理激活操作的鼠标处理函数。\n         *\n         * **************************************************************\n         */\n        this.hooks = {\n            mousedown: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mouseup: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mousemove: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mouseleave: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mousewheel: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            resize: new SyncBailHook(['event', 'width', 'height']),\n            click: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            keyup: new SyncBailHook(['event']),\n            keydown: new SyncBailHook(['event']),\n            /**\n             * 添加操作时触发\n             */\n            addOpHook: new SyncHook(['snapshot', 'isNew']),\n            refresh: new SyncHook([]),\n            /**\n             * Op类型改变时触发\n             */\n            opChange: new SyncHook(['type']),\n            selectChange: new SyncHook(['prevSelectedOpIds', 'selectedOpIds']),\n            /**\n             * 页面信息变化时触发\n             */\n            prePageChange: new SyncHook(['snapshot']),\n            pageChange: new SyncHook(['snapshot']),\n            boardChange: new SyncHook([]),\n            /**\n             * 页面中资源加载完毕时触发\n             */\n            pageReady: new SyncHook(['boardName, pageIndex']),\n            /**\n             * enableDraw\n             */\n            enableDrawChange: new SyncHook(['enable'])\n        };\n    }\n    extendDefaultOps() {\n        this.extendOp(MousePointerOp);\n        this.extendDrawOp(PenOp);\n        this.extendDrawOp(PenArrowOp);\n        this.extendDrawOp(LineArrowOp);\n        this.extendDrawOp(LineOp);\n        this.extendDrawOp(RectOp);\n        this.extendDrawOp(RectFillOp);\n        this.extendDrawOp(EllipseFillOp);\n        this.extendDrawOp(EllipseOp);\n        this.extendOp(TextOp);\n        /** Laser的opChange函数应该在select之前处理 */\n        this.extendOp(LaserOp);\n        this.extendOp(SelectOp);\n        this.extendOp(ScaleOp);\n        this.extendOp(MoveOp);\n        this.extendOp(DeleteOp);\n        this.extendOp(DuplicateOp);\n        this.extendOp(UndoOp);\n        this.extendOp(RedoOp);\n        this.extendOp(ClearOp);\n        this.extendOp(EraserOp);\n        this.extendOp(ElementEraserOp);\n        this.extendOp(PageOp);\n        this.extendOp(BoardOp);\n        this.extendOp(ImageOp);\n        this.extendOp(VideoOp);\n        this.extendOp(BackgroundOp);\n        this.extendOp(LockOp);\n        this.extendOp(PanOp);\n        this.extendOp(ZoomOp);\n        this.extendOp(ResetCameraOp);\n        this.extendOp(ResizeCameraOp);\n        this.extendOp(CameraBoundOp);\n        this.extendOp(FitToContentOp);\n        this.extendOp(FitToDocOp);\n        this.setCurrOp('pen');\n    }\n    get currPage() {\n        return this.currBoard.pages[this.currBoard.currIndex];\n    }\n    get currBoard() {\n        return this.app.room.boards[this.app.room.currIndex];\n    }\n    get drawOpsOfPage() {\n        return this.currPage.drawOpQueue || {};\n    }\n    addContainer(container) {\n        this.container = container;\n    }\n    extendDrawOp(OpConstructor) {\n        const op = this.extendOp(OpConstructor);\n        this.drawOpTypes.push(op.type);\n    }\n    /**\n     * 注册Op。\n     *\n     * OpConstructor的类型应该为Operation Constructor。但是typescript设置为Operation Constrctor之后，印象中会有些奇怪的地方。\n     * 因此，这里用any定义，然后创建之后转为Operation类型。\n     *\n     */\n    extendOp(OpConstructor) {\n        var _a, _b;\n        const op = (new OpConstructor(this.app));\n        this.opMap[op.type] = op;\n        /**\n         * ***********************注册监听事件****************************\n         *\n         * 比如eventsToListen中返回事件key为pen:color, 会在app上注册op:pen:color事件。\n         * 用户通过app.on('op:pen:color', color)设置线段颜色。\n         *\n         * activate和exec是特殊事件。activate若设置为true，会在app上注册op:${type}:activate事件，\n         * 用户发送该事件会使此工具处于激活状态。比如可以设置当前操作为涂鸦。\n         *\n         * exec若设置为true，会在app上注册op:${type}:exec事件，\n         * 用户发送该事件会调用此操作的execCommand方法。通过发送该事件可以执行命令，如撤销，重做。\n         *\n         * **************************************************************\n         */\n        const eventsToListen = op.eventsToListen();\n        if (((_a = eventsToListen.activate) === null || _a === void 0 ? void 0 : _a.value) && ((_b = eventsToListen.exec) === null || _b === void 0 ? void 0 : _b.value)) {\n            throw new Error('DEV--> 操作不能同时设置activate和exec为true。操作不同同时为命令类操作，及状态类操作');\n        }\n        else if (eventsToListen.activate && eventsToListen.activate.value) {\n            this.dispatcher.on(`op:${op.type}:activate`, () => {\n                const isOpSet = this.setCurrOp(op.type);\n                if (isOpSet) {\n                    this.currOp.afterActivate();\n                }\n            });\n        }\n        else if (eventsToListen.exec && eventsToListen.exec.value) {\n            this.dispatcher.on(`op:${op.type}:exec`, op.execCommand.bind(op));\n        }\n        for (let key in eventsToListen) {\n            if (key !== 'activate' && key !== 'exec') {\n                this.dispatcher.on(`op:${key}`, eventsToListen[key].value);\n            }\n        }\n        return op;\n    }\n    getOpDoc(type) {\n        let strArr = [];\n        if (type !== undefined) {\n            strArr = this._getOpDoc(type);\n        }\n        else {\n            for (let type in this.opMap) {\n                strArr = strArr.concat(this._getOpDoc(type));\n                strArr.push('*************************************');\n            }\n            strArr.push(\"全局事件\\n\\n\" +\n                \"用法：app.on('event:add:snapshot', (data: {local: boolean, snapshot: IOPSnapshot}) => {})\\n\" +\n                \"作用： 接收到新的快照时发送此事件\\n\");\n            strArr.push('*************************************');\n        }\n        return strArr.join('\\n\\n');\n    }\n    /**\n     * 获取op和外界的接口。包括从外界接收的消息，以及发送给外界的消息两部分\n     * @param type\n     */\n    _getOpDoc(type) {\n        const strArr = [];\n        if (!this.opMap.hasOwnProperty(type)) {\n            console.log('DEV-->', `op:${type}不存在!!!!!!`);\n        }\n        else {\n            const op = this.opMap[type];\n            if (op.description) {\n                strArr.push(op.description);\n            }\n            const eventsToListen = op.eventsToListen();\n            for (const key in eventsToListen) {\n                const info = eventsToListen[key].information;\n                let event = `op:${key}`;\n                if (key === 'activate' || key === 'exec') {\n                    event = `op:${op.type}:${key}`;\n                }\n                strArr.push(`用法：app.emit('${event}'${info.args.length > 0 ? ', ' + info.args : ''})\\n作用：${info.message}`);\n            }\n        }\n        return strArr;\n    }\n    setCurrOp(type) {\n        var _a;\n        if (LOG) {\n            console.log('白板-->', `设置当前op为：${type}`);\n        }\n        if (((_a = this.currOp) === null || _a === void 0 ? void 0 : _a.type) !== type) {\n            document.body.style.cursor = 'default';\n            this.hooks.opChange.call(type);\n            this.currOp = this.opMap[type];\n            this.app.emit('event:appState:change', 'currTool', type);\n            return true;\n        }\n        return false;\n    }\n    currOpIsCamera() {\n        var _a;\n        return this.currOp && cameraSnapshotTypes.indexOf((_a = this.currOp) === null || _a === void 0 ? void 0 : _a.type) !== -1;\n    }\n    resize(event, width, height) {\n        // if (!this.app.editable && !this.currOpIsCamera()) return\n        const bailed = this.hooks.resize.call(event, width, height);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleResize' in this.currOp) {\n            this.currOp.handleResize(event, width, height);\n        }\n    }\n    mousedown(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mousedown.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseDown' in this.currOp) {\n            this.currOp.handleMouseDown(event, mx, my, clientX, clientY);\n        }\n    }\n    mouseup(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mouseup.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseUp' in this.currOp) {\n            this.currOp.handleMouseUp(event, mx, my, clientX, clientY);\n        }\n    }\n    mouseleave(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mouseleave.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseLeave' in this.currOp) {\n            this.currOp.handleMouseLeave(event, mx, my, clientX, clientY);\n        }\n    }\n    mousewheel(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mousewheel.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseWheel' in this.currOp) {\n            this.currOp.handleMouseWheel(event, mx, my, clientX, clientY);\n        }\n    }\n    mousemove(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mousemove.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseMove' in this.currOp) {\n            this.currOp.handleMouseMove(event, mx, my, clientX, clientY);\n        }\n    }\n    click(event, mx, my, clientX, clientY) {\n        if (!this.app.editable)\n            return;\n        const bailed = this.hooks.click.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleClick' in this.currOp) {\n            this.currOp.handleClick(event, mx, my, clientX, clientY);\n        }\n    }\n    keyup(event) {\n        if (!this.app.editable)\n            return;\n        const bailed = this.hooks.keyup.call(event);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleKeyUp' in this.currOp) {\n            this.currOp.handleKeyUp(event);\n        }\n    }\n    keydown(event) {\n        if (!this.app.editable)\n            return;\n        const bailed = this.hooks.keydown.call(event);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleKeyDown' in this.currOp) {\n            this.currOp.handleKeyDown(event);\n        }\n    }\n    draw(snapshot, ctx, opts) {\n        try {\n            const type = snapshot.data.type;\n            if (this.opMap[type]) {\n                this.opMap[type].draw(snapshot, ctx, opts);\n            }\n        }\n        catch (err) {\n            console.error('opsManager.draw error', err);\n        }\n    }\n    preview(snapshot, ctx, opts) {\n        try {\n            const type = snapshot.data.type;\n            this.opMap[type].preview(snapshot, ctx, opts);\n        }\n        catch (err) {\n            console.error('opsManager.preview error', err);\n        }\n    }\n    hide(snapshot, ctx, div) {\n        try {\n            const type = snapshot.data.type;\n            if (this.opMap[type]) {\n                this.opMap[type].hide(snapshot, ctx, div);\n            }\n        }\n        catch (err) {\n            console.error('opsManager.hide error', err);\n        }\n    }\n    /**\n     * 将快照及它的一部分合并\n     */\n    mergePartial(snapshot, partial) {\n        const type = snapshot.data.type;\n        if (this.opMap[type]) {\n            return this.opMap[type].mergePartial(snapshot, partial);\n        }\n        else {\n            console.error(`找不到type为${type}的教具类型`, JSON.stringify(snapshot));\n            return snapshot;\n        }\n    }\n    /**\n     * 合并两个增量数据，覆盖式合并。数组会累加在一起\n     * @param partial1\n     * @param partial2\n     * @returns\n     */\n    mergeTwoPartial(partial1, partial2) {\n        const res = {\n            opId: partial1.opId,\n            data: partial1.data\n        };\n        for (let key in partial2.data) {\n            if (Array.isArray(partial2.data[key])) {\n                if (Array.isArray(res.data[key])) {\n                    res.data[key] = res.data[key].concat(partial2.data[key]);\n                }\n                else {\n                    res.data[key] = partial2.data[key];\n                }\n            }\n            else {\n                res.data[key] = partial2.data[key];\n            }\n        }\n        return res;\n    }\n    /**\n     * 重置undo，redo次数\n     * 当主播从localStorage中恢复后，需要重置undo，redo的可用次数\n     */\n    resetUndoRedoCount() {\n        this.opMap['undo'].resetCount();\n        this.opMap['redo'].resetCount();\n    }\n    get selectOp() {\n        return this.opMap['select'];\n    }\n    get selectedOpIds() {\n        if (this.currOp !== this.opMap['select']) {\n            return [];\n        }\n        else {\n            return this.selectOp.selectedOpIds;\n        }\n    }\n    get inProgressSelectedOpIds() {\n        if (this.currOp !== this.opMap['select']) {\n            return [];\n        }\n        else {\n            return this.selectOp.inProgressSelectedOpIds;\n        }\n    }\n}\nexport default OpsManager;\n","/**\n * 页面操作\n */\nimport Operation from \"../Operation\";\nclass PageOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'page';\n        this.description = \"页面相关操作\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.pageChange.tap(\"pageChangePlugin\", this.onPageChange.bind(this));\n    }\n    onPageChange() {\n        return this.emit('event:appState:change', 'page', {\n            activeIndex: this.opsManager.currBoard.getCurrPageIndex(),\n            pageNames: this.opsManager.currBoard.pageNames.slice(),\n            currPage: this.opsManager.currBoard.currIndex,\n            pagePayloads: this.opsManager.currBoard.payloadOfPages\n        });\n    }\n    eventsToListen() {\n        return {\n            'page:goto': {\n                value: this.goto.bind(this),\n                information: {\n                    args: 'page: number',\n                    message: `跳转至页面`\n                }\n            },\n            'page:add': {\n                value: this.add.bind(this),\n                information: {\n                    args: 'opt: {insertAfter?: number, payload?: any}',\n                    message: `添加页面。默认添加至当前board最后`\n                }\n            },\n            'page:delete': {\n                value: this.delete.bind(this),\n                information: {\n                    args: 'page: number',\n                    message: '删除页面。只有当页面数量大于1时可以删除页面'\n                }\n            }\n        };\n    }\n    add(opt) {\n        this.dispatch({\n            type: this.type,\n            action: 'add',\n            insertAfter: opt.insertAfter,\n            payload: opt.payload\n        });\n    }\n    goto(page) {\n        //跳转至页面\n        if (page !== this.opsManager.currBoard.currIndex &&\n            this.opsManager.currBoard.pageNames.includes(page.toString())) {\n            this.dispatch({\n                type: this.type,\n                action: 'goto',\n                page: page,\n            });\n        }\n    }\n    delete(page) {\n        const pages = this.opsManager.currBoard.pages;\n        if (page in pages && Object.keys(pages).length > 1) {\n            this.dispatch({\n                type: this.type,\n                action: 'delete',\n                page: page\n            });\n        }\n    }\n}\nexport default PageOp;\n","/**\n * 移动鼠标删除元素\n */\nimport Operation from \"../Operation\";\nimport { arrayDeduce, findOpsUnderMouse, findOpsUnderRect, idsChanged } from \"../util\";\nimport drawConfig from \"../DrawOp/drawConfig\";\nclass SelectBase extends Operation {\n    constructor() {\n        super(...arguments);\n        this.points = [];\n        this.lastSelectedOpIds = [];\n    }\n    postMouseUp(idsBeenSelected) { }\n    postClick(idsBeenSelected) { }\n    postMouseMove(event, idsBeenSelected) { }\n    get sp() {\n        return this.points.length > 0 ? this.points[0] : undefined;\n    }\n    get ep() {\n        return this.points.length > 0 ? this.points[this.points.length - 1] : undefined;\n    }\n    handleMouseDown(event, mx, my) {\n        //鼠标按下时，先清空已有的选择元素\n        this.dispatch(this.getSelectionSnapshot(false, []));\n        this.points = [[mx, my]];\n        const idsBeenSelected = findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n        this.dispatch(this.getSelectionSnapshot(true, idsBeenSelected));\n        this.lastSelectedOpIds = idsBeenSelected;\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.isMouseDown) {\n            this.points.push([mx, my]);\n        }\n        else {\n            this.points = [[mx, my]];\n        }\n        let idsBeenSelected;\n        if (this.isMouseDown) {\n            //鼠标按下时，搜索鼠标选择区域内的元素\n            idsBeenSelected = findOpsUnderRect(this.points, this.drawOpsOfPage);\n            this.dispatch(this.getSelectionSnapshot(true, idsBeenSelected));\n        }\n        else {\n            //若鼠标松开，只有当选中的点发生变化时，才有必要发送事件来触发重绘\n            //鼠标松开时，当且仅当\n            const idsUnderMouse = findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n            idsBeenSelected = arrayDeduce(idsUnderMouse, this.opsManager.selectedOpIds);\n            if (idsChanged(idsBeenSelected, this.lastSelectedOpIds)) {\n                this.dispatch(this.getSelectionSnapshot(true, idsBeenSelected, true));\n            }\n        }\n        this.lastSelectedOpIds = idsBeenSelected;\n        this.postMouseMove(event, idsBeenSelected);\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown) {\n            const idsBeenSelected = this.isMouseDown ?\n                findOpsUnderRect(this.points, this.drawOpsOfPage) :\n                findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n            this.postMouseUp(idsBeenSelected);\n        }\n    }\n    /**\n     * container中如果判断是click，就不会发送mousedown, mousemove和mouseup事件\n     * 因此需要额外判断是不是click事件\n     * @param event\n     * @param mx\n     * @param my\n     */\n    handleClick(event, mx, my) {\n        this.points = [[mx, my]];\n        const idsBeenSelected = findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n        this.postClick(idsBeenSelected);\n    }\n    getSelectionSnapshot(inProgress = false, selectedOpIds, isHover = false) {\n        return {\n            type: 'select',\n            sp: this.sp,\n            ep: this.ep,\n            inProgress: inProgress,\n            selectedOpIds: selectedOpIds.slice(),\n            reuseOpType: isHover ? 'select-hover' : 'select',\n            skipUndo: true,\n            color: drawConfig.strokeColor,\n            nickname: this.app.nickname\n        };\n    }\n}\nexport default SelectBase;\n","/**\n * 选择操作。支持区域选中\n *\n * 如果已经选中一些对象，然后点击选中的区域进行拖拽，此时不会产生新的选择操作，否则选中元素的包含盒无法显示\n */\nimport { combineBoundary, getBoundaryBoxFromTwoPoints, getTransformedBoundary } from \"../../misc/shapeHelper\";\nimport SelectBase from \"./SelectBase\";\nimport drawConfig from \"../DrawOp/drawConfig\";\nimport { drawUserName } from \"../util\";\nclass SelectOp extends SelectBase {\n    constructor() {\n        super(...arguments);\n        this.type = 'select';\n        this.lineWidth = 0;\n        this.fillColor = 'rgba(230, 100, 100, 0.4)';\n        this.eleContainerColor = 'rgb(0, 0, 0)';\n        this.eleContainerWidth = 2;\n        this.eleContainerPadding = 3;\n        this.activate = false;\n        this.selectedOpIds = [];\n        this.inProgressSelectedOpIds = [];\n        this.description = \"选择操作工具。\\n首先使用op:select:activate设置画布为选择模式。\" +\n            \"通过。然后画布会监听鼠标动作，生成选择框。具体用法如下：\";\n    }\n    getSelectedIds() {\n        return this.selectedOpIds.slice();\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n            'select:width': {\n                value: this.setLineWidth.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置选择框线段宽度`\n                }\n            },\n            'select:fill:color': {\n                value: this.setFillColor.bind(this),\n                information: {\n                    args: 'color: ColorString',\n                    message: `设置选择框填充色`\n                }\n            },\n            'select:stroke:color': {\n                value: this.setStrokeColor.bind(this),\n                information: {\n                    args: 'color: ColorString',\n                    message: `设置选择框填充色`\n                }\n            },\n            'select:eleContainer:color': {\n                value: this.setEleContainerColor.bind(this),\n                information: {\n                    args: 'color: ColorString',\n                    message: `设置被选中元素包含盒颜色`\n                }\n            },\n            'select:eleContainer:width': {\n                value: this.setEleContainerWidth.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置被选中元素包含盒线段宽度`\n                }\n            },\n            'select:eleContainerPadding': {\n                value: this.setEleContainerPadding.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置被选中元素包含盒的padding`\n                }\n            },\n        };\n    }\n    registerHooks() {\n        this.opsManager.hooks.opChange.tap('OpChange', this.handleOpChange.bind(this));\n        this.opsManager.hooks.pageChange.tap('pageChange', this.handlePageChange.bind(this));\n    }\n    /**\n     * 页面变化时，先清空选择的元素，否则可能会造成元素找不到的缺陷\n     */\n    handlePageChange(snapshot) {\n        if (snapshot.uid === this.app.account && this.selectedOpIds.length > 0) {\n            //当page change是由当前用户操作引起的，清空select元素\n            //如果没有该判断，每个可编辑用户都会发送该快照\n            this.dispatch(this.getSnapshot([]));\n        }\n    }\n    /**\n     * 当操作类型变化时，清空选择的元素\n     */\n    handleOpChange(newType) {\n        var _a;\n        if (newType !== 'select' && ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'select') {\n            this.dispatch(this.getSnapshot([]));\n        }\n        this.beginBatch();\n    }\n    postMouseUp(idsBeenSelected) {\n        this.dispatch(this.getSnapshot(idsBeenSelected));\n        this.lastSelectedOpIds = idsBeenSelected;\n    }\n    postClick(idsBeenSelected) {\n        if (idsBeenSelected.length === 0) {\n            const curr = (new Date()).valueOf();\n            if (curr - this.opsManager.opMap['text'].blurAt < 100) {\n                //点击发生在失焦之后，忽略这次点击\n                return;\n            }\n        }\n        this.dispatch(this.getSnapshot(idsBeenSelected));\n    }\n    /**\n     * 选择操作可能是个连续的过程\n     * 连续过程中产生的快照在selectbase中被处理了。\n     * getSnapshot产生的是连续过程结束时产生的快照\n     * @param idsBeenSelected\n     */\n    getSnapshot(idsBeenSelected) {\n        return {\n            type: 'select',\n            sp: this.sp,\n            ep: this.ep,\n            inProgress: false,\n            selectedOpIds: idsBeenSelected.slice(),\n            reuseOpType: 'select',\n            skipUndo: true,\n            color: drawConfig.strokeColor,\n            nickname: this.app.nickname\n        };\n    }\n    draw(snapshot, ctx) {\n        // log('draw', snapshot)\n        const color = snapshot.data.color ? snapshot.data.color : 'rgb(0,0,0)';\n        this.drawSelectBox(snapshot, ctx);\n        const boundaryArr = this.drawSelectedElementBox(snapshot, ctx, color);\n        if (!snapshot.data.inProgress\n            && snapshot.uid !== this.app.account\n            && Array.isArray(boundaryArr)\n            && boundaryArr.length === 1) {\n            const px = boundaryArr[0].sx + boundaryArr[0].w / 2;\n            const py = boundaryArr[0].sy;\n            if (!this.app.appConfig.showSelectNickname)\n                return;\n            drawUserName({\n                ctx,\n                account: snapshot.data.nickname ? snapshot.data.nickname : snapshot.uid,\n                scale: this.app.camera.scale,\n                px,\n                py,\n                bgColor: color,\n                fontSize: 16,\n                textPadding: 8,\n                radius: 6\n            });\n        }\n    }\n    /**\n     * 绘制选择框\n     */\n    drawSelectBox(snapshot, ctx) {\n        const data = snapshot.data;\n        let sp;\n        let ep;\n        if (Array.isArray(data.points) && data.points.length >= 2) {\n            sp = data.points[0];\n            ep = data.points[data.points.length - 1];\n        }\n        else if (data.sp && data.ep) {\n            if (data.sp[0] !== data.ep[0] || data.sp[1] !== data.ep[1]) {\n                sp = data.sp;\n                ep = data.ep;\n            }\n        }\n        if (data.inProgress && sp && ep) {\n            const { sx, sy, w, h } = getBoundaryBoxFromTwoPoints(sp, ep);\n            ctx.beginPath();\n            if (this.strokeColor && this.lineWidth) {\n                ctx.strokeStyle = this.strokeColor;\n                ctx.lineWidth = this.lineWidth;\n                ctx.strokeRect(sx, sy, w, h);\n            }\n            if (this.fillColor) {\n                ctx.fillStyle = this.fillColor;\n                ctx.fillRect(sx, sy, w, h);\n            }\n        }\n    }\n    /**\n     * 绘制选中元素的包含盒\n     * @param snapshot\n     * @param ctx\n     * @param div\n     */\n    drawSelectedElementBox(snapshot, ctx, color) {\n        const data = snapshot.data;\n        const selectedOpIds = data.selectedOpIds.filter(opId => this.drawOpsOfPage[opId]);\n        const padding = this.eleContainerPadding;\n        if (selectedOpIds.length === 0)\n            return;\n        let boundaryArr = selectedOpIds.map(id => {\n            const op = this.drawOpsOfPage[id];\n            return getTransformedBoundary(op.data.boundary, op.data.dx, op.data.dy, op.data.scaleX, op.data.scaleY);\n        });\n        /**\n         * 若已经松开，则只绘制整体的包含盒\n         */\n        if (!data.inProgress) {\n            boundaryArr = [boundaryArr.reduce((b1, b2) => {\n                    return combineBoundary(b1, b2);\n                })];\n        }\n        //绘制包含盒\n        ctx.strokeStyle = color;\n        ctx.fillStyle = color;\n        ctx.lineWidth = this.eleContainerWidth;\n        const dotSize = 5 / this.app.camera.scale;\n        for (let boundary of boundaryArr) {\n            ctx.beginPath();\n            ctx.strokeRect(boundary.sx - padding, boundary.sy - padding, boundary.w + padding * 2, boundary.h + padding * 2);\n            //点击包含盒上四个角上的点拉伸图形\n            if (!data.inProgress && this.opsManager.currOp instanceof SelectOp) {\n                ctx.fillRect(boundary.sx - padding - dotSize / 2, boundary.sy - padding - dotSize / 2, dotSize, dotSize);\n                ctx.fillRect(boundary.sx + boundary.w + padding - dotSize / 2, boundary.sy + boundary.h + padding - dotSize / 2, dotSize, dotSize);\n                ctx.fillRect(boundary.sx + boundary.w + padding - dotSize / 2, boundary.sy - padding - dotSize / 2, dotSize, dotSize);\n                ctx.fillRect(boundary.sx - padding - dotSize / 2, boundary.sy + boundary.h + padding - dotSize / 2, dotSize, dotSize);\n            }\n        }\n        return boundaryArr;\n    }\n    setSelectedOpIds(ids) {\n        if (this.selectedOpIds.join(',') !== ids.join(',')) {\n            this.emit('event:appState:change', 'selectChange', this.selectedOpIds.slice(), ids.slice());\n            this.opsManager.hooks.selectChange.call(this.selectedOpIds.slice(), ids.slice());\n            this.selectedOpIds = ids;\n            this.dispatch(this.getSnapshot(ids.slice()));\n        }\n    }\n    setInProgressSelectedOpIds(ids) {\n        this.inProgressSelectedOpIds = ids.slice();\n    }\n    setLineWidth(width) {\n        this.lineWidth = width;\n    }\n    setFillColor(color) {\n        this.fillColor = color;\n    }\n    setStrokeColor(color) {\n        this.strokeColor = color;\n    }\n    setEleContainerColor(color) {\n        this.eleContainerColor = color;\n    }\n    setEleContainerWidth(width) {\n        this.eleContainerWidth = width;\n    }\n    setEleContainerPadding(padding) {\n        this.eleContainerPadding = padding;\n    }\n}\nexport default SelectOp;\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./TextToolbar.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./TextToolbar.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./TextToolbar.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/**\n * 文本编辑框工具栏\n */\nimport { DEFAULT_FONTSIZE } from \"../../config\";\nimport { MAX_FONT_SIZE, MIN_FONT_SIZE, testFontSizeText } from \"../../misc/text\";\nimport './TextToolbar.less';\nconst ID = 'iower-23nsdf090sd';\nclass TextToolbar {\n    constructor() {\n        this.fontSize = DEFAULT_FONTSIZE;\n        this.color = 'black';\n        //powerpoint中的字体大小表\n        this.fonts = [8, 9, 10, 11, 12, 14, 16, 18, 20, 24, 28, 32, 36, 40, 44, 48, 54, 60, 66, 72, 80, 88];\n        this.colors = [\n            'rgb(224,32,32)',\n            'rgb(250,100,0)',\n            'rgb(247,181,0)',\n            'rgb(109,212,0)',\n            'rgb(68,215,182)',\n            'rgb(50,197,255)',\n            'rgb(0,145,255)',\n            'rgb(98,54,255)',\n            'rgb(182,32,224)',\n            'rgb(109,114,120)',\n            'rgb(0,0,0)',\n            'rgb(255,255,255)'\n        ];\n        this.fontInputPrevValue = '';\n        this.colorCells = [];\n        this.colorPlatteOpen = false;\n        this.toolbarContainer = document.createElement('div');\n        this.toolbarContainer.className = 'text-toolbar';\n        this.toolbarContainer.id = ID;\n        //颜色按钮，点击弹出颜色选择弹窗\n        this.colorBtn = document.createElement('div');\n        this.colorBtn.innerText = '';\n        this.colorBtn.className = 'color flex-cell';\n        const colorDot = document.createElement('span');\n        this.colorBtn.appendChild(colorDot);\n        //颜色选择弹窗及弹窗内的元素\n        this.colorPlatteContainer = document.createElement('div');\n        this.colorPlatteContainer.className = 'platte-container';\n        this.colorPlatteContainer.onmousemove = (ev) => {\n            ev.stopPropagation();\n        };\n        for (let i = 0; i < this.colors.length; i++) {\n            const colorCell = document.createElement('div');\n            colorCell.className = 'color-cell';\n            colorCell.style.backgroundColor = this.colors[i];\n            const isWhite = this.colors[i] === 'rgb(255,255,255)';\n            if (isWhite) {\n                colorCell.style.border = '1px solid #D9D9DB';\n            }\n            this.colorPlatteContainer.appendChild(colorCell);\n            this.colorCells.push(colorCell);\n        }\n        //字体输入框\n        this.fontInput = document.createElement('input');\n        this.fontInput.className = 'fontsize input';\n        //字体增加按钮\n        this.fontIncBtn = document.createElement('div');\n        this.fontIncBtn.className = 'fontsize inc flex-cell';\n        const incText = document.createElement('span');\n        incText.innerText = '+';\n        this.fontIncBtn.appendChild(incText);\n        //字体减小按钮\n        this.fontDecBtn = document.createElement('div');\n        this.fontDecBtn.className = 'fontsize dec flex-cell';\n        const decText = document.createElement('span');\n        decText.innerText = '-';\n        this.fontDecBtn.appendChild(decText);\n        this.toolbarContainer.appendChild(this.fontInput);\n        this.toolbarContainer.appendChild(this.fontIncBtn);\n        this.toolbarContainer.appendChild(this.fontDecBtn);\n        this.toolbarContainer.appendChild(this.colorBtn);\n        this.toolbarContainer.appendChild(this.colorPlatteContainer);\n        this._registerEvents();\n        this._stopPropagation();\n    }\n    show(args) {\n        const { left, top, container, fontSize, color, scale } = args;\n        this.setFontsize(fontSize);\n        this.setColor(color);\n        if (!document.getElementById(ID)) {\n            container.appendChild(this.toolbarContainer);\n        }\n        this.toolbarContainer.style.display = 'flex';\n        this.toolbarContainer.style.transformOrigin = 'left bottom';\n        this.toolbarContainer.style.transform = `scale(${scale})`;\n        this.colorPlatteContainer.style.display = 'none';\n        this.updatePosition({\n            left, top\n        });\n    }\n    resize(scale) {\n        this.toolbarContainer.style.transform = `scale(${scale})`;\n    }\n    updatePosition(args) {\n        const { left, top } = args;\n        this.toolbarContainer.style.left = `${left - 23}px`;\n        this.toolbarContainer.style.top = `${top - 78}px`;\n    }\n    hide() {\n        this.toolbarContainer.style.display = 'none';\n    }\n    setFontsize(fontSize) {\n        this.fontSize = fontSize;\n        this.fontInputPrevValue = Math.round(fontSize).toString();\n        this.fontInput.value = this.fontInputPrevValue;\n    }\n    setColor(color) {\n        this.color = color;\n        this.colorBtn.firstChild.style.backgroundColor = this.color;\n        this.setColorPlatteState(false);\n    }\n    setColorPlatteState(open) {\n        this.colorPlatteOpen = open;\n        if (open) {\n            this.colorPlatteContainer.style.display = 'flex';\n        }\n        else {\n            this.colorPlatteContainer.style.display = 'none';\n        }\n    }\n    /**\n     * 修改字体大小时，调用外界注册的回调函数\n     */\n    onFontSizeChange(func) {\n        this.fontSizeCb = func;\n    }\n    /**\n     * 修改颜色时，调用外界注册的回调函数\n     */\n    onColorChange(func) {\n        this.colorCb = func;\n    }\n    _registerEvents() {\n        for (let i = 0; i < this.colorCells.length; i++) {\n            this.colorCells[i].onclick = (event) => {\n                this.setColor(this.colors[i]);\n                if (this.colorCb) {\n                    this.colorCb(this.color);\n                }\n            };\n        }\n        this.colorBtn.onclick = (event) => {\n            this.setColorPlatteState(!this.colorPlatteOpen);\n        };\n        this.fontIncBtn.onclick = (event) => {\n            if (this.fontSize < MAX_FONT_SIZE) {\n                this._sendFontChangeCommand(Math.min(this.fontSize + 8, MAX_FONT_SIZE));\n            }\n        };\n        this.fontDecBtn.onclick = (event) => {\n            if (this.fontSize > MIN_FONT_SIZE) {\n                this._sendFontChangeCommand(Math.max(this.fontSize - 8, MIN_FONT_SIZE));\n            }\n        };\n        const setFontSizeByInput = (blurAfterSet) => {\n            const fontSizeStr = this.fontInput.value;\n            if (fontSizeStr === '') {\n                return;\n            }\n            else {\n                const textType = testFontSizeText(fontSizeStr);\n                let fontSize;\n                if (textType === 'exceed_max') {\n                    fontSize = MAX_FONT_SIZE;\n                }\n                else if (textType === 'exceed_min') {\n                    fontSize = MIN_FONT_SIZE;\n                }\n                else {\n                    fontSize = Number(fontSizeStr);\n                }\n                this.fontInput.value = fontSize;\n                this.fontInputPrevValue = fontSize.toString();\n                this._sendFontChangeCommand(this.fontInput.value);\n                if (blurAfterSet) {\n                    this.fontInput.blur();\n                }\n            }\n        };\n        this.fontInput.onkeydown = (event) => {\n            event.stopPropagation();\n            if (event.key === 'Enter') {\n                setFontSizeByInput(true);\n            }\n        };\n        this.fontInput.onblur = () => {\n            setFontSizeByInput(false);\n        };\n        this.fontInput.oninput = (event) => {\n            let text = event.target.value;\n            text = text.replace(/\\D/g, '');\n            this.fontInput.value = text;\n        };\n    }\n    /**\n     * 通过文本框工具栏发送字体变化事件\n     * @param text\n     */\n    _sendFontChangeCommand(text) {\n        const fontSize = typeof text === 'string' ? Number(text) : text;\n        this.setFontsize(fontSize);\n        if (this.fontSizeCb) {\n            this.fontSizeCb(this.fontSize);\n        }\n    }\n    /**\n     * 点击文本框按钮的操作不应该传递给上层容器\n     */\n    _stopPropagation() {\n        this.toolbarContainer.onmousedown = (event) => {\n            event.stopPropagation();\n        };\n        this.toolbarContainer.ontouchstart = (event) => {\n            event.stopPropagation();\n        };\n        //mouseup还是往上传，否则如果鼠标在文本框工具栏上松开，应用会以为鼠标一直处于按下状态\n        // this.toolbarContainer.onmouseup = (event) => {\n        //     event.stopPropagation()\n        // }\n    }\n}\nexport default TextToolbar;\n","import { DEFAULT_FONTSIZE } from \"../../config\";\nimport textConfig from \"./textConfig\";\nexport const MIN_WIDTH = 20;\nexport const PADDING = 4;\nexport const DEFAULT_LINEHEIGHT = 1.2;\n//创建一个textArea用于编辑文字\n//创建pre用于辅助textArea确定文字的宽，高\nexport function createElements() {\n    const textArea = document.createElement('textarea');\n    const pre = document.createElement('pre');\n    const textAreaContainer = document.createElement('div');\n    textAreaContainer.style.position = 'absolute';\n    textAreaContainer.style.display = 'none';\n    textAreaContainer.style.outline = '1px dashed black';\n    // textArea.style.position = 'absolute'\n    textArea.style.resize = 'none';\n    textArea.style.overflow = 'hidden';\n    textArea.style['white-space'] = 'nowrap';\n    textArea.style.background = 'transparent';\n    //进入编辑模式时才显示textArea\n    // textArea.style.display = 'none'\n    textArea.style.fontFamily = textConfig.getFontFamily();\n    textArea.style.fontSize = `${DEFAULT_FONTSIZE}px`;\n    textArea.style.transformOrigin = 'left top';\n    textArea.style.padding = `${PADDING}px`;\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxSizing = 'content-box';\n    textArea.style.lineHeight = `${DEFAULT_LINEHEIGHT}`;\n    pre.style.width = 'fit-content';\n    pre.style.position = 'absolute';\n    pre.style.userSelect = 'none';\n    pre.style.pointerEvents = 'none';\n    pre.style.visibility = 'hidden';\n    pre.style.fontFamily = textConfig.getFontFamily();\n    pre.style.fontSize = `${DEFAULT_FONTSIZE}px`;\n    pre.style.transformOrigin = 'left top';\n    pre.style.padding = `${PADDING}px`;\n    pre.style.margin = '0';\n    pre.style.lineHeight = `${DEFAULT_LINEHEIGHT}`;\n    //设置为border-box时，getBoundingClientRect返回pre内容的宽高\n    pre.style.boxSizing = 'border-box';\n    textAreaContainer.appendChild(textArea);\n    return {\n        textAreaContainer,\n        textArea,\n        pre\n    };\n}\nexport function setElementsStyle(textAreaContainer, textArea, pre, opts) {\n    textAreaContainer.style.display = 'block';\n    textAreaContainer.style.left = `${opts.sx}px`;\n    textAreaContainer.style.top = `${opts.sy}px`;\n    pre.style.left = `${opts.sx}px`;\n    pre.style.top = `${opts.sy}px`;\n    textArea.style.color = opts.color;\n    textArea.style.width = `${(opts.w || MIN_WIDTH) * DEFAULT_FONTSIZE / opts.fontSize - PADDING * 2}px`;\n    textArea.style.height = `${(opts.h || (opts.fontSize + 12)) * DEFAULT_FONTSIZE / opts.fontSize - PADDING * 2}px`;\n    setElementsSize(textAreaContainer, textArea, pre, opts.fontSize);\n}\n/**\n * 根据fontSize，设置缩放量\n * 由于浏览器有最小字体大小限制，因此textAera使用transform修改字体大小，而不是改变fontSize。\n *\n *\n * 设置文本框，文本框包含盒，以及pre的宽高，及缩放值\n * 先设置pre缩放值和textArea的缩放值。\n * 然后根据pre的宽高，设置textArea的宽高, 以及textAreaContainer的宽高\n * @param textAreaContainer\n * @param textArea\n * @param pre\n * @param fontSize\n */\nexport function setElementsSize(textAreaContainer, textArea, pre, fontSize) {\n    pre.style.transform = `scale(${(fontSize) / DEFAULT_FONTSIZE})`;\n    textArea.style.transform = `scale(${(fontSize) / DEFAULT_FONTSIZE})`;\n    //clientWidth，clientHeight包含了padding\n    textArea.style.width = `${pre.clientWidth - PADDING * 2}px`;\n    textArea.style.height = `${pre.clientHeight - PADDING * 2}px`;\n    textAreaContainer.style.width = `${(pre.clientWidth) * fontSize / DEFAULT_FONTSIZE}px`;\n    textAreaContainer.style.height = `${(pre.clientHeight) * fontSize / DEFAULT_FONTSIZE}px`;\n}\n/**\n * 绘制快照\n */\nexport function drawTextSnapshot(pre, opts) {\n    pre.innerText = opts.text;\n    pre.style.color = opts.color;\n    pre.style.left = `${opts.sx}px`;\n    pre.style.top = `${opts.sy}px`;\n    pre.style.position = 'absolute';\n    pre.style.fontFamily = textConfig.getFontFamily();\n    pre.style.fontSize = `${DEFAULT_FONTSIZE}px`;\n    pre.style.margin = '0';\n    pre.style.transform = `scale(${opts.fontSize / DEFAULT_FONTSIZE})`;\n    pre.style.userSelect = 'none';\n    pre.style.transformOrigin = 'left top';\n    pre.style.padding = `${PADDING}px`;\n    pre.style.pointerEvents = 'none';\n}\nexport function clearTextArea(textAreaContainer, textArea) {\n    textArea.value = '';\n    textAreaContainer.style.display = 'none';\n}\n","/**\n * 文本操作。\n *\n * 文本有两类模式：\n * 一是判断文本框是否是新的文本框: isNewText\n * 二是判断文本框是否聚焦：isFocus\n *\n * isNewText为false时，快照会包含dependOn，dependOn指向被编辑的文本框opId\n * isFocus为true时，快照的boundary使用this.pre以及鼠标落下的位置计算。为false时，boundary使用快照对应的pre计算。\n *\n * TextOp有两种pre。一种是isFocus时，和textArea内容一一对应的pre，这个pre用于辅助计算内容的宽高。另一种pre是快照pre。文本不处于focus时，使用快照pre绘制。\n *\n *\n *                  点击画布\n * 激活文本模式   -------->>>>>   文本框聚焦(创建模式+正在编辑)  -----\n *                                                                 \\     失焦\n *                                                                  -------------> 文本框选中（编辑模式）\n *              点击文本框                                          /\n * 选择模式   --------->>>>>>   文本框聚焦（编辑模式+正在编辑） -----\n *              单选文本框\n *           ---------->>>>>   文本框选中（编辑模式）\n *\n *\n */\nimport Operation from \"../Operation\";\nimport { getTransformedBoundary, pointInRect } from \"../../misc/shapeHelper\";\nimport SelectOp from \"../SelectOp\";\nimport { clearTextArea, createElements, setElementsStyle, drawTextSnapshot, setElementsSize, PADDING, DEFAULT_LINEHEIGHT } from \"./UIHelper\";\nimport TextToolbar from \"./TextToolbar\";\nimport { DEFAULT_FONTSIZE } from \"../../config\";\nimport textConfig from \"./textConfig\";\nimport { printTextInMultiLine } from \"../../misc/text\";\nclass TextOp extends Operation {\n    constructor(app) {\n        super(app);\n        this.type = 'text';\n        this.dependOn = undefined;\n        /**\n         * 失焦时间。失焦之后的点击事件会被selectOp忽略。如果不忽略，点击空白区域时，失焦会导致文本框不被选中。\n         */\n        this.blurAt = 0;\n        this.color = 'black';\n        this.text = '';\n        this.textBeforeEdit = '';\n        this.fontSize = DEFAULT_FONTSIZE;\n        this.isFocus = false;\n        this.isNewText = true;\n        this.description = \"绘制文字\\n首先使用op:text:activate设置画布为文字模式。\" +\n            \"通过op:text:color, op:text:fontSize, 设置文字的颜色和字体大小。然后画布会监听鼠标动作，生成文本框。具体用法如下：\";\n        /**\n         * 文本修改时，利用pre计算textArea的宽，高\n         */\n        this.handleTextAreaChange = (event) => {\n            let text = event.target.value;\n            if (text.endsWith(\"\\n\")) {\n                text += \"\\n\";\n            }\n            this.text = text;\n            this.pre.innerText = text || ' ';\n            /**\n             * 这里不需要设置scale。因为pre.clientWidth * pre.scale === textArea.width * textArea.scale\n             */\n            setElementsSize(this.textAreaContainer, this.textArea, this.pre, this.fontSize);\n            this.dispatch(this.getSnapshot(true));\n        };\n        this.handleTextAreaBlur = (event) => {\n            setTimeout(() => {\n                /**\n                 * 失焦函数处理时，如果页面和聚焦时的页面不同，则无需进一步处理\n                 */\n                if (this.opsManager.currPage !== this.textFocusAtPage) {\n                    return;\n                }\n                this._handleTextAreaBlur();\n            }, 0);\n        };\n        this._handleTextAreaBlur = () => {\n            /**\n             * 重置文本\n             */\n            const opId = this.opIdToDraw;\n            /**\n             * 如果这次编辑未修改文本，则视为无效编辑，undo操作不会对其做出反应\n             */\n            this.dispatch(this.getSnapshot(false, this.text === this.textBeforeEdit));\n            this.isFocus = false;\n            this.text = ' ';\n            clearTextArea(this.textAreaContainer, this.textArea);\n            /**\n             * 若文本框为空，则不选中任何图形\n             * 若文本框不为空，则选中该文本框\n             *\n             * 若blur是由click事件引发的，设置currOp为selectOp后，blur之后selectOp会接收click事件\n             * 而点击空白区域的click事件会导致选中元素清空。\n             *\n             * 为了点击空白区域仍旧会选中文本框，记录blur的时间点，然后再selectlOp中会判断是不是这次点击是在blur事件之后，\n             * 如果是在之后，且点击处空白，则忽略这次点击事件\n             */\n            this.blurAt = (new Date()).valueOf();\n            this.opsManager.setCurrOp('select');\n            this.opsManager.selectOp.dispatch(this.opsManager.selectOp.getSnapshot([opId]));\n        };\n        this.registerToolbar(new TextToolbar());\n        const { textAreaContainer, textArea, pre } = createElements();\n        this.textAreaContainer = textAreaContainer;\n        this.textArea = textArea;\n        this.pre = pre;\n        this.app.on('container:set', () => {\n            this.app.container.textAreaEl.appendChild(textAreaContainer);\n            this.app.container.textAreaEl.appendChild(pre);\n        });\n        this.app.on('container:resize', () => {\n            var _a;\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.resize(1 / this.app.camera.scale);\n        });\n        this.textArea.oninput = this.handleTextAreaChange;\n        this.textArea.onblur = this.handleTextAreaBlur;\n        //TODO: 统一textArea，pre宽高更新的函数\n        setElementsSize(this.textAreaContainer, this.textArea, this.pre, this.fontSize);\n    }\n    registerHooks() {\n        this.opsManager.hooks.prePageChange.tap('PrePageChange', this.handlePrePageChange.bind(this));\n        this.opsManager.hooks.click.tap(\"ClickPlugin\", this.handleClickExistText.bind(this));\n        this.opsManager.hooks.selectChange.tap('SelectChangePlugin', this.handleSelectChange.bind(this));\n        this.opsManager.hooks.enableDrawChange.tap('EnableDrawChange', this.handleEnableDrawChange.bind(this));\n    }\n    /**\n     * 根据board id, page id得到id前缀\n     */\n    getIdPrefix(boardName, pageIndex) {\n        return `${boardName}-${pageIndex}`.replace(/[\\W_]+/g, '-');\n    }\n    /**\n     * 返回当前编辑的文本框对应的opId。\n     * 若状态为新建，则直接返回opId\n     * 若状态为编辑旧文本框，返回旧文本框的opId\n     */\n    get opIdToDraw() {\n        if (this.isNewText) {\n            return this.opIdForseen(this.type, this.dependOn);\n        }\n        else {\n            return this.dependOn;\n        }\n    }\n    /**\n     * 当前编辑是作用于哪个pre上面\n     */\n    get workingPre() {\n        if (this.isFocus) {\n            //编辑模式\n            return this.pre;\n        }\n        else {\n            const boardName = this.app.room.currIndex;\n            const pageIndex = this.app.room.currBoard.currIndex.toString();\n            return document.getElementById(`${this.getIdPrefix(boardName, pageIndex)}-${this.dependOn}-pre`);\n        }\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n            'register:toolbar': {\n                value: this.registerToolbar.bind(this),\n                information: {\n                    args: 'toolbar: IToolbar',\n                    message: '自定义工具栏'\n                }\n            },\n            'text:color': {\n                value: this.setColor.bind(this),\n                information: {\n                    args: 'color: string',\n                    message: `设置文本颜色`\n                }\n            },\n            'text:fontsize': {\n                value: this.setFontSize.bind(this),\n                information: {\n                    args: 'size: number',\n                    message: `设置矩形边框颜色`\n                }\n            }\n        };\n    }\n    /**\n     * 页面切换时，如果文本处于聚焦状态，先使其失焦\n     */\n    handlePrePageChange() {\n        if (this.isFocus) {\n            this._handleTextAreaBlur();\n        }\n    }\n    handleEnableDrawChange(editEnabled) {\n        var _a, _b;\n        if (!editEnabled) {\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.hide();\n        }\n        else {\n            const selectedOpIds = this.opsManager.selectedOpIds;\n            let currSelectTextId = (selectedOpIds.length === 1 && this.getOpTypeByOpId(selectedOpIds[0]) === 'text') ? selectedOpIds[0] : undefined;\n            if (currSelectTextId && this.opsManager.currOp instanceof SelectOp) {\n                return this._handleSelectTextOp(currSelectTextId);\n            }\n            else {\n                (_b = this.toolbar) === null || _b === void 0 ? void 0 : _b.hide();\n            }\n        }\n    }\n    /**\n     * 文本框单独被选中时，弹出工具栏\n     */\n    handleSelectChange(preSelectedOpIds, selectedOpIds) {\n        var _a;\n        let preSelectTextId = (preSelectedOpIds.length === 1 && this.getOpTypeByOpId(preSelectedOpIds[0]) === 'text') ? preSelectedOpIds[0] : undefined;\n        let currSelectTextId = (selectedOpIds.length === 1 && this.getOpTypeByOpId(selectedOpIds[0]) === 'text') ? selectedOpIds[0] : undefined;\n        if (preSelectTextId !== currSelectTextId) {\n            if (currSelectTextId && this.opsManager.currOp instanceof SelectOp) {\n                return this._handleSelectTextOp(currSelectTextId);\n            }\n        }\n        (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n    _handleSelectTextOp(currSelectTextId) {\n        var _a;\n        //选中文本框\n        const data = this.drawOpsOfPage[currSelectTextId].data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        this.color = data.color,\n            this.fontSize = data.fontSize;\n        this.text = data.text;\n        this.isFocus = false;\n        clearTextArea(this.textAreaContainer, this.textArea);\n        this.isNewText = false;\n        this.lastSnapshotData = data;\n        this.dependOn = currSelectTextId;\n        return (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.show({\n            left: boundary.sx,\n            top: boundary.sy,\n            container: this.app.container.textAreaEl,\n            fontSize: data.fontSize,\n            scale: 1 / this.app.camera.scale,\n            color: data.color\n        });\n    }\n    /**\n     * 处于选择模式下，点击已有文本，开始编辑模式。\n     */\n    handleClickExistText(event, mx, my) {\n        var _a, _b;\n        if (this.opsManager.currOp instanceof SelectOp) {\n            const lastSnapshot = this.detectIfClickOnText(mx, my);\n            //点击已有文本\n            if (lastSnapshot) {\n                //编辑文本框时，没有任何元素被应该被选中\n                if (this.opsManager.selectedOpIds.length > 0) {\n                    this.opsManager.currOp.dispatch(this.opsManager.currOp.getSnapshot([]));\n                }\n                this.opsManager.setCurrOp('text');\n                //移除之前绘制的文本框\n                const tempPre = document.getElementById(`${this.getIdPrefix(lastSnapshot.board, lastSnapshot.page.toString())}-${lastSnapshot.opId}-pre`);\n                (_a = tempPre === null || tempPre === void 0 ? void 0 : tempPre.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(tempPre);\n                const data = lastSnapshot.data;\n                this.isFocus = true;\n                this.textFocusAtPage = this.opsManager.currPage;\n                this.isNewText = false;\n                this.lastSnapshotData = data;\n                this.dependOn = lastSnapshot.opId;\n                this.text = data.text;\n                this.textBeforeEdit = this.text;\n                this.textArea.value = this.text;\n                this.pre.innerText = this.text;\n                this.fontSize = data.fontSize;\n                this.color = data.color;\n                const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n                setElementsStyle(this.textAreaContainer, this.textArea, this.pre, Object.assign({ fontSize: data.fontSize, color: data.color }, boundary));\n                (_b = this.toolbar) === null || _b === void 0 ? void 0 : _b.show({\n                    left: boundary.sx,\n                    top: boundary.sy,\n                    container: this.app.container.textAreaEl,\n                    fontSize: data.fontSize,\n                    scale: 1 / this.app.camera.scale,\n                    color: data.color\n                });\n                this.textArea.focus();\n                this.beginBatch();\n                return true;\n            }\n        }\n    }\n    /**\n     * 当用户点击速度很慢时，会触发mouseup来创建文本\n     */\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown) {\n            this.handleClick(event, mx, my);\n        }\n    }\n    handleMouseMove(event) {\n        if (!this.isFocus) {\n            if (this.app.container.isTargetOnContainer(event.target)) {\n                document.body.style.cursor = 'text';\n            }\n            else {\n                document.body.style.cursor = 'auto';\n            }\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n    }\n    /**\n     * 点击空白处创建一个空白版\n     */\n    handleClick(event, mx, my) {\n        var _a;\n        if (!this.isFocus) {\n            //创建新文本\n            this.isNewText = true;\n            this.isFocus = true;\n            this.textFocusAtPage = this.opsManager.currPage;\n            this.dependOn = undefined;\n            this.text = ' ';\n            this.textBeforeEdit = this.text;\n            this.pre.innerText = this.text;\n            setElementsStyle(this.textAreaContainer, this.textArea, this.pre, {\n                fontSize: this.fontSize,\n                color: this.color,\n                sx: mx,\n                sy: my\n            });\n            this.beginBatch();\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.show({\n                left: mx,\n                top: my,\n                container: this.app.container.textAreaEl,\n                fontSize: this.fontSize,\n                scale: 1 / this.app.camera.scale,\n                color: this.color\n            });\n            this.textArea.focus();\n        }\n    }\n    getSnapshot(inProgress, skipUndo = false) {\n        if (this.isNewText) {\n            return {\n                boundary: this.getBoundaryRect(this.isNewText),\n                type: this.type,\n                color: this.color,\n                text: this.text,\n                fontSize: this.fontSize,\n                inProgress: inProgress,\n                skipUndo: inProgress || skipUndo\n            };\n        }\n        else {\n            /**\n             * EditText中得到的boundary已经包含了之前操作的转换结果。\n             */\n            return {\n                type: this.type,\n                color: this.color,\n                text: this.text,\n                fontSize: this.fontSize,\n                boundary: this.getBoundaryRect(this.isNewText),\n                dependOn: this.dependOn,\n                inProgress: inProgress,\n                skipUndo: inProgress || skipUndo\n            };\n        }\n    }\n    /**\n     * 若处于编辑状态，使用this.pre，否则使用被选择的pre\n     */\n    getBoundaryRect(isNewText) {\n        const rect = this.workingPre.getBoundingClientRect();\n        let w = rect.width;\n        let h = rect.height;\n        w = w / this.app.camera.scale;\n        h = h / this.app.camera.scale;\n        let ptsInWord;\n        if (isNewText) {\n            const sx = rect.x - this.app.container.left;\n            const sy = rect.y - this.app.container.top;\n            ptsInWord = this.app.camera.convertToPointInWorld(sx, sy);\n        }\n        else {\n            /**\n             * ios上不能用rect.y - this.app.container.top确定sy。\n             * https://openradar.appspot.com/radar?id=6668472289329152\n             *\n             * ios上如果容器有fixed，且键盘将webview向上推时，getBoundingClientRect的top值是错误的。\n             *\n             * 由于ios上暂时不支持创建文本。编辑旧文本时，文本的sx，sy又不会变化，因此，可以用之前快照的\n             * sx，sy来确定位置。\n             */\n            const data = this.lastSnapshotData;\n            const rect = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n            ptsInWord = [rect.sx, rect.sy];\n        }\n        return {\n            sx: ptsInWord[0],\n            sy: ptsInWord[1],\n            w, h\n        };\n    }\n    draw(snapshot, ctx, opts) {\n        const div = opts.div;\n        /**\n         * 只有当文本模式下正在编辑，且该快照是正被编辑的快照，才跳过绘制。\n         */\n        const snapshotIsEditing = snapshot.opId === this.dependOn || snapshot.opId === this.opIdToDraw;\n        if (!this.isFocus || !snapshotIsEditing) {\n            const boardName = this.app.room.currIndex;\n            const pageIndex = this.app.room.currBoard.currIndex;\n            const preId = `${this.getIdPrefix(boardName, pageIndex.toString())}-${snapshot.opId}-pre`;\n            if (!div.querySelector(`[id='${preId}']`)) {\n                const temp = document.createElement('pre');\n                temp.style.lineHeight = `${DEFAULT_LINEHEIGHT}`;\n                temp.id = preId;\n                div.appendChild(temp);\n            }\n            const pre = div.querySelector(`[id='${preId}']`);\n            if (pre) {\n                this.drawSnapshot(snapshot.data, pre, snapshot.opId);\n            }\n            else {\n                console.error('DEV-->', `找不到id为: ${preId} 的pre`);\n            }\n        }\n    }\n    //在预览中绘制，不能依赖于pre\n    preview(snapshot, ctx) {\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        const { sx, sy } = boundary;\n        const paddingScale = PADDING * data.fontSize / DEFAULT_FONTSIZE;\n        ctx.save();\n        ctx.fillStyle = data.color;\n        ctx.font = `${data.fontSize}px ${textConfig.getFontFamily()}`;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'top';\n        printTextInMultiLine(ctx, data.text, sx + paddingScale, sy + paddingScale * 2, data.fontSize * DEFAULT_LINEHEIGHT);\n        // ctx.fillText(data.text, sx + paddingScale, sy + paddingScale)\n        ctx.restore();\n    }\n    hide(snapshot, ctx, div) {\n        var _a;\n        //移除之前绘制的文本框\n        const tempPre = document.getElementById(`${this.getIdPrefix(snapshot.board, snapshot.page.toString())}-${snapshot.opId}-pre`);\n        (_a = tempPre === null || tempPre === void 0 ? void 0 : tempPre.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(tempPre);\n    }\n    drawSnapshot(data, pre, opId) {\n        var _a, _b, _c;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        const { sx, sy } = boundary;\n        drawTextSnapshot(pre, {\n            text: data.text,\n            sx,\n            sy,\n            fontSize: data.fontSize,\n            color: data.color\n        });\n        //选中的文本框位置更新时，更新工具栏位置\n        if (this.opsManager.selectedOpIds.length === 1 && this.opsManager.selectedOpIds[0] === opId) {\n            this.fontSize = data.fontSize;\n            this.color = data.color;\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.setFontsize(data.fontSize);\n            (_b = this.toolbar) === null || _b === void 0 ? void 0 : _b.setColor(data.color);\n            (_c = this.toolbar) === null || _c === void 0 ? void 0 : _c.updatePosition({\n                left: sx,\n                top: sy\n            });\n        }\n    }\n    detectIfClickOnText(mx, my) {\n        for (let opId in this.drawOpsOfPage) {\n            if (this.drawOpsOfPage[opId].data.type !== 'text') {\n                continue;\n            }\n            else {\n                const data = this.drawOpsOfPage[opId].data;\n                const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n                if (pointInRect(boundary, [mx, my])) {\n                    return this.drawOpsOfPage[opId];\n                }\n            }\n        }\n        return undefined;\n    }\n    setFontSize(fontSize) {\n        if (this.fontSize !== fontSize) {\n            this.fontSize = fontSize;\n            this.isNewText = false;\n            this.lastSnapshotData = this.drawOpsOfPage[this.dependOn].data;\n            this.text = this.lastSnapshotData.text;\n            setElementsSize(this.textAreaContainer, this.textArea, this.workingPre, this.fontSize);\n            this.dispatch(this.getSnapshot(false));\n        }\n    }\n    setColor(color) {\n        if (this.color !== color) {\n            this.color = color;\n            this.isNewText = false;\n            this.lastSnapshotData = this.drawOpsOfPage[this.dependOn].data;\n            this.text = this.lastSnapshotData.text;\n            this.dispatch(this.getSnapshot(false));\n        }\n    }\n    registerToolbar(toolbar) {\n        this.toolbar = toolbar;\n        this.toolbar.onFontSizeChange(this.setFontSize.bind(this));\n        this.toolbar.onColorChange(this.setColor.bind(this));\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const textOpSnapshot = transformOp.data;\n        const newData = Object.assign({}, baseOp.data);\n        for (let key in textOpSnapshot) {\n            if (key !== 'dependOn') {\n                newData[key] = textOpSnapshot[key];\n            }\n        }\n        /**\n         * EditText的boundary已经将之前编辑操作的结果包含进去了。\n         */\n        newData.dx = 0;\n        newData.dy = 0;\n        newData.scaleX = {\n            coordinate: 0,\n            factor: 1\n        };\n        newData.scaleY = {\n            coordinate: 0,\n            factor: 1\n        };\n        const res = Object.assign({}, baseOp, {\n            data: newData\n        });\n        return res;\n    }\n    /**\n     * 更新textArea和pre的字体\n     */\n    updateFontFamily() {\n        const txts = this.app.container.el.getElementsByTagName('textarea');\n        const pres = this.app.container.el.getElementsByTagName('pre');\n        for (let i = 0; i < txts.length; i++) {\n            txts[i].style.fontFamily = textConfig.getFontFamily();\n        }\n        for (let i = 0; i < pres.length; i++) {\n            pres[i].style.fontFamily = textConfig.getFontFamily();\n        }\n    }\n}\nexport default TextOp;\n","export const CustomFontName = \"customWBFont\";\nexport const DefaultFontName = \"defaultWBFont\";\nconst ValidTypes = ['embedded-opentype', 'woff', 'truetype', 'svg', 'opentype', 'woff2'];\nclass TextConfig {\n    constructor() {\n        this.fontFamily = '';\n        this.fontFaceSet = false;\n        this.appendFontFaceStyle([\n            {\n                url: 'https://app.yunxin.163.com/webdemo/whiteboard/assets/font/Helvetica.ttf',\n                format: 'truetype'\n            },\n            {\n                url: 'https://app.yunxin.163.com/webdemo/whiteboard/assets/font/Helvetica.woff',\n                format: 'woff'\n            },\n            {\n                url: 'https://app.yunxin.163.com/webdemo/whiteboard/assets/font/Helvetica.woff2',\n                format: 'woff2'\n            }\n        ], DefaultFontName);\n    }\n    getFontFamily() {\n        if (this.fontFamily && this.fontFaceSet) {\n            return `\"${this.fontFamily}\", \"${CustomFontName}\"`;\n        }\n        else if (this.fontFamily) {\n            return this.fontFamily;\n        }\n        else if (this.fontFaceSet) {\n            return CustomFontName;\n        }\n        else {\n            return `\"Helvetica\", \"${DefaultFontName}\"`;\n        }\n    }\n    setFontFamily(fontFamily) {\n        this.fontFamily = fontFamily;\n    }\n    setFontFace(fontFace) {\n        this.fontFaceSet = true;\n        this.appendFontFaceStyle(fontFace, CustomFontName);\n    }\n    appendFontFaceStyle(fontFace, fontName) {\n        const fontFaceStr = fontFace.map(opt => {\n            if (opt.format && !ValidTypes.includes(opt.format)) {\n                console.error(`字体format应该为以下值中的一个: ${ValidTypes.join(',')}, 或者不设置format`);\n                return `url(\"${opt.url}\")`;\n            }\n            else if (opt.format) {\n                return `url(\"${opt.url}\") format(\"${opt.format}\")`;\n            }\n            else {\n                return `url(\"${opt.url}\")`;\n            }\n        }).join(',\\n');\n        const newStyle = document.createElement('style');\n        newStyle.setAttribute('type', 'text/css');\n        newStyle.appendChild(document.createTextNode(`\n@font-face {\n    font-family: \"${fontName}\";\n    src: ${fontFaceStr};\n}\n`));\n        document.head.appendChild(newStyle);\n    }\n}\nconst textConfig = new TextConfig();\nexport default textConfig;\n","/**\n * 视频\n */\nimport Operation from \"../Operation\";\nimport { getTransformedBoundary } from \"../../misc/shapeHelper\";\nimport { fetchVideoResource, getVideoResource, videoResourceLoaded } from \"../../resource/resourceCache\";\nimport { getImageProperPosition } from \"../ImageOp/util\";\nclass VideoOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'video';\n        this.description = \"视频操作\";\n    }\n    eventsToListen() {\n        return {\n            'video:insert': {\n                value: this.addVideo.bind(this),\n                information: {\n                    args: `url: string, opts: {\n                         width: number,\n                         pageIndex?: number\n                     }`,\n                    message: `上传视频`\n                }\n            },\n        };\n    }\n    addVideo(url, opts) {\n        const currBoard = this.app.room.currBoard;\n        let currPage = this.opsManager.currPage;\n        if (opts && opts.hasOwnProperty('pageIndex')) {\n            const pageName = currBoard.pageNames[opts.pageIndex];\n            if (currBoard.pages.hasOwnProperty(pageName)) {\n                currPage = currBoard.pages[pageName];\n            }\n        }\n        if (videoResourceLoaded(url)) {\n            const video = getVideoResource(url);\n            const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : video.videoWidth;\n            const height = width / video.videoWidth * video.videoHeight;\n            this.dispatchVideo({ url, width, height, page: currPage });\n        }\n        else {\n            currPage.addWaitingResource(url);\n            fetchVideoResource(url, (video) => {\n                const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : video.videoWidth;\n                const height = width / video.videoWidth * video.videoHeight;\n                this.dispatchVideo({ url, width, height, page: currPage });\n                currPage.removeWaitingResource(url);\n            });\n        }\n    }\n    dispatchVideo(opt) {\n        const { sx, sy, width, height } = getImageProperPosition(this, opt.width, opt.height);\n        this.dispatch({\n            type: this.type,\n            url: opt.url,\n            boundary: {\n                w: width,\n                h: height,\n                sx,\n                sy\n            }\n        });\n    }\n    preview() { }\n    draw(snapshot, ctx, opts) {\n        /**\n         * page是该图片的容器页面。this.opsManager.currPage是当前打开的页面。\n         * 生成预览图时，currPage和图片的容器页面不是同一个页面\n         */\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        const div = this.app.container.el;\n        const url = data.url;\n        if (videoResourceLoaded(url) && div) {\n            let video = div.querySelector(`[id='video-${snapshot.opId}']`);\n            if (!video) {\n                video = getVideoResource(url).cloneNode(true);\n                video.id = `video-${snapshot.opId}`;\n                video.style.userSelect = 'none';\n                video.style.position = 'absolute';\n                video.controls = true;\n                video.controlsList.value = \"nodownload nofullscreen\";\n                video.playsInline = true;\n                video.disablePictureInPicture = true;\n                div.appendChild(video);\n            }\n            /**\n             * 将视频加载在container顶层容器中。顶层容器没有用scale。不会影响video控制按钮的功能\n             */\n            const [sx, sy] = this.app.camera.convertWorldPointInContainer(boundary.sx, boundary.sy);\n            const [ex, ey] = this.app.camera.convertWorldPointInContainer(boundary.sx + boundary.w, boundary.sy + boundary.h);\n            video.style.width = `${ex - sx}px`;\n            video.style.height = `${ey - sy}px`;\n            video.style.left = `${sx}px`;\n            video.style.top = `${sy}px`;\n        }\n        if (!videoResourceLoaded(url)) {\n            //回调函数中必须用变量currPage，而不是this.opsManager.currPage，否则被调用时引用的page可能不对\n            opts.page.addWaitingResource(url);\n            fetchVideoResource(url, () => {\n                opts.page.removeWaitingResource(url);\n            });\n        }\n    }\n    hide(snapshot, ctx, div) {\n        var _a;\n        //移除之前绘制的文本框\n        div = this.app.container.el;\n        let video = div.querySelector(`[id='video-${snapshot.opId}']`);\n        (_a = video === null || video === void 0 ? void 0 : video.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(video);\n    }\n}\nexport default VideoOp;\n","/**\n * 不处于常规处理流程的快照类型，即该快照不会被撤销，重做，清空等等\n *\n * 主要包括ppt转码的图片，h5, video等等\n */\nexport const snapshotOutOfNormalFlowTypes = ['background', 'pan', 'zoom', 'mouse-pointer', 'select', 'laser', 'camera-bound'];\n/**\n * 会影响房间内所有白板的动作\n */\nexport const globalSnapshotTypes = ['camera-bound'];\nexport const cameraSnapshotTypes = ['pan', 'zoom', 'camera-bound', 'reset-camera', 'fit-to-content', 'fit-to-doc', 'resize-camera'];\n","import { getBoundaryBoxFromTwoPoints, getTransformedBoundary, rectCollide } from \"../misc/shapeHelper\";\n/**\n* 返回起始点到终点围成的矩形中的快照id数组\n*/\nexport const findOpsUnderRect = (points, drawOps) => {\n    if (points.length === 0)\n        return [];\n    const mouseBoundary = getBoundaryBoxFromTwoPoints(points[0], points[points.length - 1]);\n    const res = [];\n    for (let opId in drawOps) {\n        const snapshot = drawOps[opId];\n        if (snapshot.data.boundary && snapshotSelectable(snapshot)) {\n            const boundary = getTransformedBoundary(snapshot.data.boundary, snapshot.data.dx, snapshot.data.dy, snapshot.data.scaleX, snapshot.data.scaleY);\n            if (rectCollide(boundary, mouseBoundary)) {\n                res.push(opId);\n            }\n        }\n    }\n    return res;\n};\n/**\n * 返回在终点下面的快照id。仅返回一个就好了。否则相互重叠元素永远分不开\n */\nexport const findOpsUnderMouse = (points, drawOps, opsManager) => {\n    if (points.length === 0)\n        return [];\n    const mouseBoundary = getBoundaryBoxFromTwoPoints(points[0], points[points.length - 1]);\n    const [mx, my] = points[points.length - 1];\n    const opIds = Object.keys(drawOps);\n    for (let i = opIds.length - 1; i >= 0; i--) {\n        /**\n         * 最后画的元素最先进行判定\n         */\n        const snapshot = drawOps[opIds[i]];\n        const op = opsManager.opMap[snapshot.data.type];\n        if (snapshot.data.boundary && snapshotSelectable(snapshot)) {\n            const boundary = getTransformedBoundary(snapshot.data.boundary, snapshot.data.dx, snapshot.data.dy, snapshot.data.scaleX, snapshot.data.scaleY);\n            if (rectCollide(boundary, mouseBoundary)) {\n                if (op && 'ifMouseOnOp' in op) {\n                    //先检测矩阵是否碰撞，如果碰撞，再进一步检查鼠标是否再图形上\n                    if (op.ifMouseOnOp(snapshot, mx, my)) {\n                        return [opIds[i]];\n                    }\n                }\n                else {\n                    return [opIds[i]];\n                }\n            }\n        }\n    }\n    return [];\n};\nconst nonSelectableOpTypes = ['mouse-pointer', 'eraser'];\nexport const snapshotSelectable = (snapshot) => {\n    return !nonSelectableOpTypes.includes(snapshot.data.type) && !snapshot.data.locked;\n};\n/**\n * 判断数组是否变化\n * @param currIds\n * @param lastIds\n */\nexport const idsChanged = (currIds, lastIds) => {\n    if (currIds.length !== lastIds.length)\n        return true;\n    for (let id of currIds) {\n        if (lastIds.indexOf(id) === -1)\n            return true;\n    }\n    return false;\n};\n/**\n * 返回currIds - lastIds\n * @param currIds\n * @param lastIds\n */\nexport const arrayDeduce = (currIds, lastIds) => {\n    const res = [];\n    for (let id of currIds) {\n        if (lastIds.indexOf(id) === -1) {\n            res.push(id);\n        }\n    }\n    return res;\n};\n/**\n * Draws a rounded rectangle using the current state of the canvas.\n * If you omit the last three params, it will draw a rectangle\n * outline with a 5 pixel border radius\n * @param {CanvasRenderingContext2D} ctx\n * @param {Number} x The top left x coordinate\n * @param {Number} y The top left y coordinate\n * @param {Number} width The width of the rectangle\n * @param {Number} height The height of the rectangle\n * @param {Number} [radius = 5] The corner radius; It can also be an object\n *                 to specify different radii for corners\n * @param {Number} [radius.tl = 0] Top left\n * @param {Number} [radius.tr = 0] Top right\n * @param {Number} [radius.br = 0] Bottom right\n * @param {Number} [radius.bl = 0] Bottom left\n * @param {Boolean} [fill = false] Whether to fill the rectangle.\n * @param {Boolean} [stroke = true] Whether to stroke the rectangle.\n */\nexport const roundRect = (ctx, x, y, width, height, radius, type) => {\n    ctx.beginPath();\n    ctx.moveTo(x + radius, y);\n    ctx.lineTo(x + width - radius, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n    ctx.lineTo(x + width, y + height - radius);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n    ctx.lineTo(x + radius, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n    ctx.lineTo(x, y + radius);\n    ctx.quadraticCurveTo(x, y, x + radius, y);\n    ctx.closePath();\n    if (type === 'stroke') {\n        ctx.stroke();\n    }\n    else {\n        ctx.fill();\n    }\n};\nexport const drawUserName = (opt) => {\n    let { ctx, account, scale, px, py, bgColor, fontSize = 24, textPadding = 15, rectMarginBottom = 15, radius = 10 } = opt;\n    let rectHeight = (fontSize + 12) / scale;\n    textPadding = textPadding / scale;\n    rectMarginBottom = rectMarginBottom / scale;\n    fontSize = fontSize / scale;\n    radius = radius / scale;\n    let textFillColor = (bgColor === 'white' || bgColor === 'rgb(255,255,255)') ? 'black' : 'white';\n    ctx.beginPath();\n    ctx.font = `${fontSize}px Arial`;\n    const textWidth = ctx.measureText(account).width;\n    ctx.fillStyle = bgColor;\n    roundRect(ctx, px - textWidth / 2 - textPadding, py - rectMarginBottom - rectHeight, textWidth + textPadding * 2, rectHeight, radius, 'fill');\n    ctx.fillStyle = textFillColor;\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(account, px - textWidth / 2, py - rectMarginBottom - rectHeight / 2);\n};\n","/**\n * 将opQueue转化为drawOpQueue和hiddenOpQueue的流程\n *\n * opQueue为当前页面所有快照的集合，drawOpQueue和hiddenOpQueue为该页面需要被绘制（隐藏）的快照集合\n */\nimport { snapshotOutOfNormalFlowTypes } from \"../ops/types\";\nimport { transformOp, getSelectedOpIds } from \"./util\";\nconst missOpSet = new Set();\nexport const calcDrawOpQueue = (page, isReceivingBatchSnapshots = false) => {\n    page.drawOpQueue = {};\n    page.hiddenOpQueue = {};\n    const { normalQueue, abNormalQueue } = separateNormalQueue(page, page.opQueue);\n    const noHistOpQueue = removeHistoryOpQueue(page, normalQueue);\n    const noClearQueue = removeClearOpQueue(page, noHistOpQueue);\n    const simpleQueue = removeDuplicateOpQueue(page, noClearQueue);\n    handleAbNormalQueue(page, abNormalQueue);\n    handleNormalQueue(page, simpleQueue);\n    if (!isReceivingBatchSnapshots) {\n        filterSelectedOpIds(page);\n    }\n};\nconst handleAbNormalQueue = (page, abNormalQueue) => {\n    page.backgroundSnapshot = undefined;\n    for (let i = 0; i < abNormalQueue.length; i++) {\n        const snapshot = abNormalQueue[i];\n        if (snapshot.data.type === 'background') {\n            page.backgroundSnapshot = snapshot;\n        }\n        else if (snapshot.data.type === 'select') {\n            if (snapshot.data.inProgress) {\n                page.lastInProgressSelectOfUser[snapshot.uid] = snapshot;\n            }\n            else {\n                //如果选择快照在“正在选择”快照之后，则“正在选择”快照内容无效\n                delete page.lastInProgressSelectOfUser[snapshot.uid];\n                page.lastSelectOfUser[snapshot.uid] = snapshot;\n            }\n        }\n        else if (snapshot.data.type === 'mouse-pointer') {\n            page.lastMousePointerOfUser[snapshot.uid] = snapshot;\n        }\n        else if (snapshot.data.type === 'laser') {\n            //跳过激光笔，激光笔绘制都是增量绘制，均使用addSnapshotAndDrawOnlyIt绘制\n        }\n    }\n};\nconst handleNormalQueue = (page, simpleQueue) => {\n    /**\n     * 将快照按照绘制快照分成多个数组。每个数组第一个元素为绘制快照，后面的元素为对绘制快照的修改\n     */\n    const opQueueMap = {};\n    const dependOnIdArr = [];\n    for (let snapshot of simpleQueue) {\n        //只有最后一个inProgressSelectSnapshot才有效\n        page.lastInProgressSelectOfUser = {};\n        if (Array.isArray(snapshot.data.dependOn)) {\n            for (let dependOpId of snapshot.data.dependOn) {\n                if (!opQueueMap.hasOwnProperty(dependOpId)) {\n                    if (LOG && !missOpSet.has(dependOpId)) {\n                        missOpSet.add(dependOpId);\n                        console.error('DEV-->', 'miss op', opQueueMap, snapshot, dependOpId, simpleQueue);\n                    }\n                }\n                else {\n                    dependOnIdArr.push(dependOpId);\n                    opQueueMap[dependOpId].push(snapshot);\n                }\n            }\n        }\n        else if (typeof snapshot.data.dependOn === 'string') {\n            if (!opQueueMap.hasOwnProperty(snapshot.data.dependOn)) {\n                if (LOG && !missOpSet.has(snapshot.data.dependOn)) {\n                    missOpSet.add(snapshot.data.dependOn);\n                    console.error('DEV-->', 'miss op', opQueueMap, snapshot, snapshot.data.dependOn, simpleQueue);\n                }\n            }\n            else {\n                dependOnIdArr.push(snapshot.data.dependOn);\n                opQueueMap[snapshot.data.dependOn].push(snapshot);\n            }\n        }\n        else {\n            //新的图形类快照\n            opQueueMap[snapshot.opId] = [snapshot];\n        }\n    }\n    removeInprogressSnapshotIfBeenDepended(page, dependOnIdArr);\n    for (let key in opQueueMap) {\n        let drawOp = getDrawOpFromSnapshotQueue(page, key, opQueueMap);\n        if (!drawOp.data.hidden) {\n            page.drawOpQueue[key] = drawOp;\n        }\n        else {\n            page.hiddenOpQueue[key] = drawOp;\n        }\n    }\n};\n/*\n * 找出当前用户选择的图形。首先选择当前用户最后一个选择操作，然后减去其他用户之后选择操作中重复的图形，再删除画布中已经不存在的图形\n */\nconst filterSelectedOpIds = (page) => {\n    //注意下面语句顺序必须在drawOpQueue设置完成之后，因为selectids变化会触发textOp显示工具栏的判断逻辑，该逻辑又依赖于drawOpQueue\n    if (page.app.room.currBoard.currPage !== page) {\n        //非当前页面（通常在预览时被调用，直接跳过对selectOp的修改)\n        return;\n    }\n    const selectedOpIds = getSelectedOpIds(page);\n    page.opsManager.selectOp.setSelectedOpIds(selectedOpIds);\n    const inProgressSelectOfCurrUser = page.lastInProgressSelectOfUser[page.app.account];\n    if (inProgressSelectOfCurrUser) {\n        page.opsManager.selectOp.setInProgressSelectedOpIds(inProgressSelectOfCurrUser.data.selectedOpIds);\n    }\n    else {\n        page.opsManager.selectOp.setInProgressSelectedOpIds([]);\n    }\n};\n/**\n * 根据opIntermediateMap[dependOpId]: Array<IOpSnapshot>，生成一个绘制快照\n */\nconst getDrawOpFromSnapshotQueue = (page, opId, opQueueMap) => {\n    let drawOp = opQueueMap[opId][0];\n    for (let i = 1; i < opQueueMap[opId].length; i++) {\n        drawOp = transformOp(page, drawOp, opQueueMap[opId][i]);\n    }\n    return drawOp;\n};\n/**\n * 将正常的快照和非正常快照分离\n * 非正常快照包括：背景快照，h5快照，video快照等等，这些快照不受clear，undo，redo影响\n */\nconst separateNormalQueue = (page, opQueue) => {\n    //normalQueue, abNormalQueue\n    let normalQueue = [];\n    let abNormalQueue = [];\n    for (let op of opQueue) {\n        if (snapshotOutOfNormalFlowTypes.includes(op.data.type)) {\n            abNormalQueue.push(op);\n        }\n        else {\n            normalQueue.push(op);\n        }\n    }\n    return {\n        normalQueue,\n        abNormalQueue\n    };\n};\n/**\n * 移除历史类操作\n */\nconst removeHistoryOpQueue = (page, opQueue) => {\n    const res = opQueue.slice();\n    for (let i = res.length - 1; i >= 0; i--) {\n        const snapshot = res[i];\n        if (snapshot.data.type === 'undo' || snapshot.data.type === 'redo') {\n            let histSnapshotId = snapshot.data.undoOpId || snapshot.data.redoOpId;\n            for (let k = i - 1; k >= 0; k--) {\n                if (res[k].opId === histSnapshotId) {\n                    //找到要撤销的操作，删除该操作，以及撤销操作\n                    res.splice(i, 1);\n                    res.splice(k, 1);\n                    i--;\n                }\n            }\n        }\n    }\n    return res;\n};\n/**\n * 移除清空操作，以及其之前的所有操作\n * @param opQueue\n */\nconst removeClearOpQueue = (page, opQueue) => {\n    let res = opQueue.slice();\n    for (let i = res.length - 1; i >= 0; i--) {\n        const snapshot = res[i];\n        if (snapshot.data.type === 'clear') {\n            /**\n             * 删除clear之前的inProgress的动作\n             */\n            removeInprogressSnapshotIfBeenDepended(page, res.slice(0, i + 1).map(_ => _.opId));\n            res = res.slice(i + 1);\n            return res;\n        }\n    }\n    return res;\n};\n/**\n * 将复制类操作复制的图形插入到队列中\n * @param opQueue\n */\nconst removeDuplicateOpQueue = (page, opQueue) => {\n    let res = [];\n    for (let i = 0; i < opQueue.length; i++) {\n        const snapshot = opQueue[i];\n        if (snapshot.data.type === 'duplicate') {\n            res = res.concat(snapshot.data.duplicates);\n        }\n        else {\n            res.push(opQueue[i]);\n        }\n    }\n    return res;\n};\n/**\n * 如果快照被依赖，且该快照为未完成的快照，则该快照不应该在inProgressSnapshotOfUser中。\n * 否则，refresh时会绘制依赖后计算出来的快照，增量绘制则会绘制inProgressSnapshotOfUser中未完成快照的原始模样\n *\n * 这个函数主要是为了修复部分涂鸦，因为网络等原因，没有发送已完成的数据快照，导致该涂鸦永远处于未完成的状态。此时，任何对该涂鸦的修改都可能会造成画面闪烁\n * @param page\n * @param dependOn\n */\nconst removeInprogressSnapshotIfBeenDepended = (page, dependOnIds) => {\n    for (let uid in page.lastInProgressSnapshotOfUser) {\n        const sp = page.lastInProgressSnapshotOfUser[uid];\n        if (dependOnIds.includes(sp.snapshot.opId)) {\n            delete page.lastInProgressSnapshotOfUser[uid];\n        }\n    }\n};\n","/**\n * 增量绘制时的一些帮助函数\n */\nimport { transformOp } from \"./util\";\n/**\n * 增加增量式快照到页面中，然后绘制\n * @param page\n * @param snapshot\n */\nexport const addIncrementSnapshot = (page, snapshot) => {\n    if (snapshot.data.type === 'text') {\n        addTextSnapshot(page, snapshot);\n    }\n    else {\n        addSnapshotAndDrawOnlyIt(page, snapshot);\n    }\n};\n/**\n* 添加文本。重绘文本相关内容\n*/\nconst addTextSnapshot = (page, snapshot) => {\n    /**\n     * 只有Page是当前Page才重绘\n     * 重绘文本，需要重绘文本本身，以及文本的select包含盒。\n     * 如果是修改之前的文本，需要在drawOpQueue中覆盖之前的文本\n     */\n    if (page.boardName === page.app.room.currIndex &&\n        page.pageIndex === page.app.room.currBoard.currIndex.toString()) {\n        if (snapshot.data.dependOn) {\n            //修改已有文本\n            const dependOnId = snapshot.data.dependOn;\n            let drawOp = page.drawOpQueue[dependOnId];\n            if (drawOp) {\n                drawOp = transformOp(page, drawOp, snapshot);\n                page.drawOpQueue[dependOnId] = drawOp;\n                setInprogressSnapshot(page, drawOp);\n            }\n        }\n        else {\n            //新文本，不需要修改选择框，因为文本focus时，不用重复绘制选择框\n            page.drawOpQueue[snapshot.opId] = snapshot;\n            setInprogressSnapshot(page, snapshot);\n        }\n        page.app.room.pageToIncRefresh = page;\n        // drawInProgressSnapshots(page)\n    }\n};\n/**\n* 增量绘制快照\n* @param snapshot\n*/\nconst addSnapshotAndDrawOnlyIt = (page, snapshot) => {\n    /**\n     * 只有Page是当前Page才重绘\n     */\n    setInprogressSnapshot(page, snapshot);\n    if (page.boardName === page.app.room.currIndex &&\n        page.pageIndex === page.app.room.currBoard.currIndex.toString()) {\n        if (snapshot.data.type !== 'laser' && snapshot.data.type !== 'mouse-pointer') {\n            page.drawOpQueue[snapshot.opId] = snapshot;\n        }\n        page.app.room.pageToIncRefresh = page;\n        // drawInProgressSnapshots(page)\n    }\n};\n/**\n * 设置inProgress快照。如果是已有快照，不更新时间\n * @param snapshot\n */\nconst setInprogressSnapshot = (page, snapshot) => {\n    if (snapshot.data.type === 'select') {\n        if (snapshot.data.inProgress) {\n            page.lastInProgressSelectOfUser[snapshot.uid] = snapshot;\n        }\n    }\n    else if (snapshot.data.type === 'mouse-pointer') {\n        page.lastMousePointerOfUser[snapshot.uid] = snapshot;\n    }\n    else if (page.lastInProgressSnapshotOfUser.hasOwnProperty(snapshot.uid) &&\n        page.lastInProgressSnapshotOfUser[snapshot.uid].snapshot.opId === snapshot.opId) {\n        page.lastInProgressSnapshotOfUser[snapshot.uid] = {\n            snapshot: snapshot,\n            beginAt: page.lastInProgressSnapshotOfUser[snapshot.uid].beginAt\n        };\n    }\n    else {\n        page.lastInProgressSnapshotOfUser[snapshot.uid] = {\n            snapshot: snapshot,\n            beginAt: Date.now()\n        };\n    }\n};\n","/**\n * 同一时间只会显示一个Page。显示的Page由{board = room.boards[room.currIndex]; page = board.pages[board.currIndex]}确定\n *\n * 每个Page中有Op快照队列。快照内容和协议传输内容一致，是Json对象。Op快照队列描述了Page该如何渲染。\n */\nimport { resourceLoaded } from \"../resource/resourceCache\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { refresh, cleanNonCanvasElements, drawInProgressSnapshots } from \"./render\";\nimport { calcDrawOpQueue } from \"./completeFlow\";\nimport { opNeedRefresh } from \"./util\";\nimport { addIncrementSnapshot } from \"./incrementFlow\";\nclass Page {\n    constructor(app, boardName, pageIndex) {\n        //只保留拥有draw方法的Op\n        this.drawOpQueue = {};\n        this.hiddenOpQueue = {};\n        /*\n         * 每个用户的快照队列中最后一个选择快照。选择快照只需要绘制最新的即可。注意selectOp和element-eraser Op都可以发送选择快照\n         */\n        this.lastSelectOfUser = {};\n        // lastSelectSnapshot: IDrawOpSnapshot | undefined\n        /**\n         * 当前用户正在选择中的select快照\n         */\n        this.lastInProgressSelectOfUser = {};\n        this.lastInProgressSnapshotOfUser = {};\n        /**\n         * 鼠标位置和其他连续动作可以共存，因此不放在lastInProgressSnapshotOfUser中\n         */\n        this.lastMousePointerOfUser = {};\n        /**\n         * 对于preview页面，若当前页面因为资源未下载而阻塞，则不渲染预览。\n         * 对于正常页面，仍渲染页面，但是不渲染未下载的资源\n         *\n         * 当资源全部下载好了，会发送event:page:ready事件，预览工厂及board根据此事件刷新相应的canvas\n         */\n        this.blockedResourceList = [];\n        this._currOpId = uuidv4();\n        this._nextOpId = uuidv4();\n        this.app = app;\n        this.opsManager = app.opsManager;\n        this.boardName = boardName;\n        this.pageIndex = pageIndex;\n        window.page = this;\n    }\n    prepareNewOpId() {\n        this._currOpId = this._nextOpId;\n        this._nextOpId = uuidv4();\n    }\n    getOpId() {\n        return this.app.account + '-' + this._currOpId;\n    }\n    /**\n     * 如果nextOpInc为false，那只是看一看下一个opId是什么\n     * 如果为true，则将opId递增，并返回\n     */\n    getNextOpId(nextOpInc = false) {\n        if (nextOpInc) {\n            this.prepareNewOpId();\n            return this.getOpId();\n        }\n        else {\n            return this.app.account + '-' + this._nextOpId;\n        }\n    }\n    get opQueue() {\n        const room = this.app.room;\n        try {\n            return room.boardOps[this.boardName].pages[this.pageIndex].inPageSnapshotIds.map(id => room.opIdSnapshotMap[id].snapshot);\n        }\n        catch (_a) {\n            return [];\n        }\n    }\n    /**\n     * 是否为当前文档的当前页面\n     */\n    get isCurrPage() {\n        return this.app.room.currBoard.currPage === this;\n    }\n    get ctx() {\n        return this.app.container.ctx;\n    }\n    get frontCtx() {\n        return this.app.container.frontCtx;\n    }\n    get laserCtx() {\n        return this.app.container.laserCtx;\n    }\n    get width() {\n        return this.app.container.width;\n    }\n    get height() {\n        return this.app.container.height;\n    }\n    get blocked() {\n        return this.blockedResourceList.length > 0;\n    }\n    setPayload(payload) {\n        this.payload = payload;\n    }\n    addWaitingResource(resUrl) {\n        if (!this.blockedResourceList.includes(resUrl) && !resourceLoaded(resUrl)) {\n            this.blockedResourceList.push(resUrl);\n        }\n    }\n    removeWaitingResource(resUrl) {\n        const index = this.blockedResourceList.indexOf(resUrl);\n        if (index > -1) {\n            this.blockedResourceList.splice(index, 1);\n            if (!this.blocked) {\n                //通知外界页面已经准备好了。\n                this.app.opsManager.hooks.pageReady.call(this.boardName, this.pageIndex);\n                if (this.isCurrPage) {\n                    this.app.room.pageToRefresh = this;\n                    // return this.refresh()\n                }\n            }\n        }\n    }\n    /**\n     * 将snapshot加入队列中\n     *\n     * @param snapshot\n     */\n    addOpInPage(snapshot, doRefresh = true) {\n        if (snapshot.opId === 'none') {\n            console.error('DEV-->', 'snapshot no opid', snapshot);\n            return false;\n        }\n        /**\n         * 用户(uid)有新的快照，或者快照已完成，删除他/她之前的进行中的快照，否则会重复绘制\n         *\n         * 排查mouse-pointer是因为进行中的快照可能和鼠标位置快照同时产生\n         */\n        if (this.lastInProgressSnapshotOfUser.hasOwnProperty(snapshot.uid)\n            && !['mouse-pointer'].includes(snapshot.data.type)) {\n            if (!snapshot.data.inProgress\n                || snapshot.opId !== this.lastInProgressSnapshotOfUser[snapshot.uid].snapshot.opId) {\n                delete this.lastInProgressSnapshotOfUser[snapshot.uid];\n            }\n        }\n        // if (lastOp === null && snapshot.data.type !== 'select') {\n        //     console.warn('DEV-->', 'New Op created', snapshot)\n        // }\n        // if (!snapshot.data.inProgress && snapshot.data.type !== 'select') {\n        //     console.warn('DEV-->', 'New op finished', snapshot)\n        // }\n        /**\n         * 批量接收快照时，也要调用calcDrawOpQueue,\n         * 否则recovery模块缓存时，backgroundOp可能未被设置，导致刷新时丢失所有文档背景图\n         */\n        if (opNeedRefresh(this, snapshot)) {\n            this.calcDrawOpQueue();\n        }\n        if (!this.app.room.isReceivingBatchSnapshots) {\n            if (opNeedRefresh(this, snapshot)) {\n                if (['undo', 'redo', 'clear'].includes(snapshot.data.type)) {\n                    this.cleanNonCanvasElements(false);\n                }\n                if (doRefresh) {\n                    /**\n                     * 只有Page是当前Page才重绘\n                     */\n                    if (this.boardName === this.app.room.currIndex &&\n                        this.pageIndex === this.app.room.currBoard.currIndex.toString()) {\n                        this.app.room.pageToRefresh = this;\n                        // this.refresh()\n                    }\n                }\n            }\n            else {\n                addIncrementSnapshot(this, snapshot);\n            }\n        }\n        /**\n         * 埋入钩子。\n         * undo, redo可以使用该钩子更新可撤销，可重做操作数量\n         */\n        this.opsManager.hooks.addOpHook.call(snapshot);\n        return opNeedRefresh(this, snapshot);\n    }\n    /**\n     * 将完整操作队列转为绘制操作队列\n     * 选择也会输出DrawOpSnapshot。因为它也有绘制方式。但是只有最后一个，且激活的选择操作会显示内容\n     *\n     * 步骤一：建立依赖链表队列，比如说\n     * {\n     *  [涂鸦1，移动1，缩放1，移动1]，\n     *  [矩形2，移动1]，\n     *  [最后一次选择]\n     * }\n     * 步骤二：计算图形变形后的结果。然后输出图形队列\n     */\n    calcDrawOpQueue() {\n        calcDrawOpQueue(this, this.app.room.isReceivingBatchSnapshots);\n    }\n    /**\n     * 切换页面时，以及撤销，回退，清空时，应该清空container中属于切换前页面的dom元素\n     *\n     * 撤销，回退不要清空背景元素。清空背景元素会造成背景图闪烁。只在绝对必要时清空背景图（换页）\n     */\n    cleanNonCanvasElements(includeBackground = true) {\n        cleanNonCanvasElements(this, includeBackground);\n    }\n    refresh(opt = {}) {\n        refresh(this, opt);\n    }\n    incRefresh() {\n        drawInProgressSnapshots(this);\n    }\n}\nexport default Page;\n","import { DPI } from \"../container\";\n/**\n * 切换页面时，以及撤销，回退，清空时，应该清空container中属于切换前页面的dom元素\n *\n * 撤销，回退不要清空背景元素。清空背景元素会造成背景图闪烁。只在绝对必要时清空背景图（换页）\n */\nexport const cleanNonCanvasElements = (page, includeBackground = true) => {\n    var _a;\n    if (page.app.container && page.app.container.imageEl) {\n        page.app.container.imageEl.innerHTML = '';\n    }\n    if (page.app.container && page.app.container.domEl) {\n        page.app.container.domEl.innerHTML = '';\n    }\n    if (includeBackground && page.app.container && page.app.container.backgroundEl) {\n        page.app.container.backgroundEl.innerHTML = '';\n    }\n    const videos = page.app.container.el.getElementsByTagName('video');\n    for (let i = 0; i < videos.length; i++) {\n        (_a = videos[i].parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(videos[i]);\n    }\n};\nexport const refresh = (page, opt = {}) => {\n    let { ctx, preview } = opt;\n    if (!ctx)\n        ctx = page.ctx;\n    const frontCtx = preview ? ctx : page.frontCtx;\n    page.opsManager.hooks.refresh.call();\n    ctx.save();\n    ctx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n    if (opt.supportToDataUrl) {\n        ctx.fillStyle = page.app.appConfig.canvas_bg_color;\n        ctx.fillRect(0, 0, page.width * DPI, page.height * DPI);\n    }\n    if (!preview) {\n        page.app.camera.convertCanvas(ctx);\n    }\n    else {\n        page.app.camera.convertPreviewCanvas(ctx);\n    }\n    if (!preview) {\n        frontCtx.save();\n        page.laserCtx.save();\n        frontCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n        page.laserCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n        page.app.camera.convertCanvas(frontCtx);\n        page.app.camera.convertCanvas(page.laserCtx);\n    }\n    if (page.backgroundSnapshot && !preview) {\n        page.opsManager.draw(page.backgroundSnapshot, ctx, {\n            div: page.app.container.backgroundEl,\n            page: page\n        });\n    }\n    else if (page.backgroundSnapshot) {\n        page.opsManager.preview(page.backgroundSnapshot, ctx, {\n            page: page,\n            supportToDataUrl: opt.supportToDataUrl\n        });\n    }\n    drawSelectBox(page, frontCtx);\n    if (!preview) {\n        drawMousePointer(page, page.laserCtx);\n    }\n    if (!preview) {\n        for (let key in page.drawOpQueue) {\n            const div = page.drawOpQueue[key].data.type === 'image' ? page.app.container.imageEl : page.app.container.domEl;\n            page.opsManager.draw(page.drawOpQueue[key], ctx, {\n                div,\n                page: page\n            });\n        }\n        for (let key in page.hiddenOpQueue) {\n            const div = page.hiddenOpQueue[key].data.type === 'image' ? page.app.container.imageEl : page.app.container.domEl;\n            page.opsManager.hide(page.hiddenOpQueue[key], ctx, div);\n        }\n    }\n    else {\n        /**\n         * 预览模式下图片在canvas上绘制，需要将图片排到最下层\n         */\n        let keys = Object.keys(page.drawOpQueue);\n        keys = keys.sort((k1, k2) => {\n            if (page.drawOpQueue[k1].data.type === 'image' && page.drawOpQueue[k2].data.type !== 'image') {\n                return -1;\n            }\n            else if (page.drawOpQueue[k1].data.type !== 'image' && page.drawOpQueue[k2].data.type === 'image') {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        for (let key of keys) {\n            page.opsManager.preview(page.drawOpQueue[key], ctx, {\n                page: page,\n                supportToDataUrl: opt.supportToDataUrl\n            });\n        }\n    }\n    ctx.restore();\n    page.frontCtx.restore();\n    if (!preview) {\n        page.laserCtx.restore();\n    }\n};\nexport const drawInProgressSnapshots = (page) => {\n    page.laserCtx.save();\n    page.frontCtx.save();\n    page.laserCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n    page.frontCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n    page.app.camera.convertCanvas(page.laserCtx);\n    page.app.camera.convertCanvas(page.frontCtx);\n    const snapshots = Object.keys(page.lastInProgressSnapshotOfUser)\n        .map(key => page.lastInProgressSnapshotOfUser[key])\n        .sort((sp1, sp2) => {\n        /**\n         * 根据时间固定图层关系，避免连续绘制时由于相对图层变化导致的闪烁\n         */\n        return sp1.beginAt - sp2.beginAt;\n    });\n    snapshots.forEach(sp => {\n        page.opsManager.draw(sp.snapshot, page.frontCtx, {\n            div: page.app.container.domEl,\n            page: page\n        });\n    });\n    drawSelectBox(page, page.frontCtx);\n    drawMousePointer(page, page.laserCtx);\n    page.laserCtx.restore();\n    page.frontCtx.restore();\n};\nconst drawSelectBox = (page, ctx) => {\n    for (const userId in page.lastSelectOfUser) {\n        /**\n         * select，即选择时的框选框，需要放到frontCanvas上绘制\n         * 绘制文本时，选择框需要重绘。如果放到背景canvas上，选择框无法被清空，会导致多重选择框的出现\n         */\n        page.opsManager.draw(page.lastSelectOfUser[userId], ctx);\n    }\n    for (const userId in page.lastInProgressSelectOfUser) {\n        /**\n         * select，即选择时的框选框，需要放到frontCanvas上绘制\n         * 绘制文本时，选择框需要重绘。如果放到背景canvas上，选择框无法被清空，会导致多重选择框的出现\n         */\n        page.opsManager.draw(page.lastInProgressSelectOfUser[userId], ctx);\n    }\n};\n/**\n * 绘制鼠标位置\n * @param ctx\n */\nconst drawMousePointer = (page, ctx) => {\n    for (let key in page.lastMousePointerOfUser) {\n        const snapshot = page.lastMousePointerOfUser[key];\n        page.opsManager.draw(snapshot, ctx);\n    }\n};\n","/**\n * 使用trasformOp对drawOp进行转换\n * @param drawOp\n * @param opSnapshot\n */\nexport const transformOp = (page, drawOp, trasformOp) => {\n    const op = page.opsManager.opMap[trasformOp.data.type];\n    try {\n        if (\"transformOp\" in op) {\n            return op.transformOp(drawOp, trasformOp);\n        }\n        else {\n            return drawOp;\n        }\n    }\n    catch (err) {\n        console.warn('transform op error');\n        console.warn(drawOp);\n        console.warn(err);\n        return drawOp;\n    }\n};\n/**\n * 若快照需要白板完全重绘，返回true\n * @param snapshot\n */\nexport const opNeedRefresh = (page, snapshot) => {\n    //文本永远是增量绘制\n    // if (snapshot.data.type === 'text') {\n    //     return false\n    // }\n    //下面的快照操作为增量绘制\n    const isIncrementOp = ['select', 'laser', 'text'].includes(snapshot.data.type) || page.opsManager.drawOpTypes.includes(snapshot.data.type);\n    if (isIncrementOp && snapshot.data.inProgress) {\n        return false;\n    }\n    else if (snapshot.data.type === 'mouse-pointer') {\n        return false;\n    }\n    return true;\n};\n/**\n * 根据lastSelectOfUser推导出当前用户选中了哪些元素\n *\n * 应该是当前用户select - 之后的select快照的包含了当前的元素\n * @param page\n */\nexport const getSelectedOpIds = (page) => {\n    let selectedOpIds = [];\n    let currSelect = page.lastSelectOfUser[page.app.account];\n    if (currSelect) {\n        selectedOpIds = currSelect.data.selectedOpIds.slice();\n        // for (let userId in page.lastSelectOfUser) {\n        //     if (page.lastSelectOfUser[userId].time > currSelect.time) {\n        //         const otherSelect = page.lastSelectOfUser[userId].data.selectedOpIds.slice() as string[]\n        //         for (let id of otherSelect) {\n        //             const index = selectedOpIds.indexOf(id as string)\n        //             if (index !== -1) {\n        //                 selectedOpIds.splice(index, 1)\n        //             }\n        //         }\n        //     }\n        // }\n    }\n    selectedOpIds = selectedOpIds.filter(id => {\n        return page.drawOpQueue.hasOwnProperty(id) && !page.drawOpQueue[id].data.locked;\n    });\n    return selectedOpIds;\n};\n","/**\n * 录像回放控制器\n */\nclass Player {\n    constructor(app) {\n        this.records = [];\n        this.nextRecordIndex = 0;\n        this.lastTime = 0;\n        this.offsetBegin = 0;\n        this.pkgId = 0;\n        this.app = app;\n    }\n    addRecordData(records) {\n        this.records = records.slice();\n        this.app.resetState();\n        this.nextRecordIndex = 0;\n    }\n    /**\n     * 切换时，vision.mode变化比较复杂。为了避免麻烦，重置account，然后重算一遍\n     * @param viewer\n     */\n    setViewer(viewer) {\n        this.app.account = viewer;\n        /**\n         * 重算一遍\n         */\n        const _lastTime = this.lastTime;\n        this.lastTime = Infinity;\n        this.seekTo(_lastTime);\n    }\n    seekTo(time) {\n        const forward = time > this.lastTime ? true : false;\n        this.lastTime = time;\n        const nextRecordIndex = forward ? this.nextRecordIndex : 0;\n        let endIndex = nextRecordIndex;\n        for (; endIndex < this.records.length; endIndex++) {\n            const record = this.records[endIndex];\n            if (record.time + this.offsetBegin > time) {\n                break;\n            }\n        }\n        const recordsToEmit = this.records.slice(nextRecordIndex, endIndex);\n        this.nextRecordIndex = endIndex;\n        if (!forward) {\n            this.app.resetState();\n            this.pkgId = 0;\n        }\n        let snapshotsToEmit = [];\n        let broadcasterData;\n        let observeModeData;\n        for (let i = 0; i < recordsToEmit.length; i++) {\n            if (recordsToEmit[i].record.type === 'snapshot') {\n                snapshotsToEmit.push({\n                    snapshot: recordsToEmit[i].record.value,\n                    pkgId: this.pkgId\n                });\n                this.pkgId += 1;\n            }\n            else if (recordsToEmit[i].record.type === 'snapshotArr') {\n                for (let snapshot of recordsToEmit[i].record.value) {\n                    snapshotsToEmit.push({\n                        snapshot,\n                        pkgId: this.pkgId\n                    });\n                    this.pkgId += 1;\n                }\n            }\n            else if (recordsToEmit[i].record.type === 'broadcaster') {\n                broadcasterData = recordsToEmit[i].record.value;\n            }\n            else if (recordsToEmit[i].record.type === 'observeMode') {\n                if (recordsToEmit[i].record.value.account === this.app.account) {\n                    observeModeData = recordsToEmit[i].record.value;\n                }\n            }\n        }\n        if (broadcasterData) {\n            this.app.vision.receiveBroadcasterAfterSync(broadcasterData);\n        }\n        if (observeModeData) {\n            this.app.vision.receiveObserveModeAfterSync(observeModeData);\n        }\n        this.app.room.execBatchSnapshots(snapshotsToEmit);\n    }\n}\nexport default Player;\n","/**\n * 预览生成工厂\n *\n * 当接到生产任务时，会压入任务堆栈\n *\n * 任务堆栈会一个一个的渲染白板，并生成base64字符串。只有当白板以来的资源文件准备好了，才会开始渲染任务。\n *\n * 每有一个preview准备好了，会发送事件通知外界。\n * 当page加入新的快照时，该page的preview缓存会丢失。\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DPI } from \"../container\";\nclass PreviewFactory {\n    constructor(app) {\n        /**\n         * key是boardName129*&^ljdfh893pageIndex\n         * 只有在previewContainerMap中的boardName和pageIndex，才会去生成preview task\n         *\n         * 通过bindPreviewContainer设置previewContainerMap\n         */\n        this.previewContainerMap = new Map();\n        this.task = [];\n        this.isLoopBusy = false;\n        this.container = document.createElement('div');\n        this.canvas = document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n        this.app = app;\n        this.app.opsManager.hooks.pageReady.tap('PageReadyPlugin', this.onPageReady.bind(this));\n        this.app.opsManager.hooks.addOpHook.tap(\"AddOpSnapshotPlugin\", this.onOpAdded.bind(this));\n        this.setupExportToImgContainer();\n        this.resizeElements();\n    }\n    /**\n     * 用户将容器传给preview factory, preview factory直接在容器中渲染\n     */\n    bindPreviewContainer(opts) {\n        const reset = opts.hasOwnProperty('reset') ? opts.reset : true;\n        const keepPrevContainer = opts.hasOwnProperty('keepPrevContainer') ? opts.keepPrevContainer : true;\n        const newKeys = opts.previewContainerSettings.map(opt => {\n            return this.getContainerKey(opt);\n        });\n        const oldKeys = Array.from(this.previewContainerMap.keys());\n        if (reset) {\n            for (let key of oldKeys) {\n                if (!newKeys.includes(key) || !keepPrevContainer) {\n                    this.previewContainerMap.delete(key);\n                }\n            }\n            this.task = [];\n        }\n        const previewTasks = [];\n        opts.previewContainerSettings.forEach(opt => {\n            const key = this.getContainerKey(opt);\n            /**\n             * 如果不替换原有容器，且容器存在，则不要重新设置该容器，也不要设置task\n             */\n            if (oldKeys.includes(key) && keepPrevContainer) {\n                return;\n            }\n            const { ctx, canvasContainer } = this.setupPreviewElements(opt.container);\n            const rect = opt.container.getBoundingClientRect();\n            previewTasks.push({\n                pageIndex: opt.pageIndex,\n                boardName: opt.boardName\n            });\n            this.previewContainerMap.set(key, {\n                container: canvasContainer,\n                ctx: ctx,\n                width: rect.width,\n                height: rect.height\n            });\n        });\n        this.addPreviewTask(previewTasks);\n    }\n    generatePreviewToDataUrl(task) {\n        const page = this.app.room.getPage(task.boardName, task.pageIndex);\n        page.calcDrawOpQueue();\n        page.refresh({\n            ctx: this.ctx,\n            preview: true,\n            supportToDataUrl: true\n        });\n        const preview = this.canvas.toDataURL();\n        return preview;\n    }\n    setBackgroundColor() {\n        for (let obj of this.previewContainerMap.values()) {\n            obj.container.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n        }\n        this.container.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n    }\n    /**\n     * 更新视角位置后，要当前文档所有预览页面的绘制\n     */\n    refreshPreviewsOfCurrBoard() {\n        if (this.app.room.isReceivingBatchSnapshots) {\n            return;\n        }\n        this.task = [];\n        const board = this.app.room.currBoard;\n        const pages = board.pageNames;\n        for (let page of pages) {\n            this.invalidatePreview(page, board.boardName);\n        }\n        /**\n         * 优先启动当前白板的task\n         */\n        const taskList = [{\n                boardName: board.boardName,\n                pageIndex: board.currIndex.toString()\n            }].concat(pages.map(page => {\n            return {\n                boardName: board.boardName,\n                pageIndex: page.toString()\n            };\n        }));\n        this.addPreviewTask(taskList);\n    }\n    refreshPreviewsOfCurrPage() {\n        if (this.app.room.isReceivingBatchSnapshots) {\n            return;\n        }\n        const board = this.app.room.currBoard;\n        this.invalidatePreview(board.currPage.pageIndex, board.boardName);\n        /**\n         * 优先启动当前白板的task\n         */\n        const taskList = [{\n                boardName: board.boardName,\n                pageIndex: board.currIndex.toString()\n            }];\n        this.addPreviewTask(taskList);\n    }\n    resizeElements() {\n        this.container.style.width = `${this.app.container.width}px`;\n        this.container.style.height = `${this.app.container.height}px`;\n        const rect = this.container.getBoundingClientRect();\n        this.canvas.width = rect.width;\n        this.canvas.height = rect.height;\n    }\n    /**\n     * 将task.boardName + task.pageIndex页面白板内容输出为string，并缓存在previewCache中\n     * @param task\n     */\n    generatePreview(task) {\n        const key = this.getContainerKey(task);\n        if (this.previewContainerMap.has(key)) {\n            const obj = this.previewContainerMap.get(key);\n            const page = this.app.room.getPage(task.boardName, task.pageIndex);\n            page.calcDrawOpQueue();\n            page.refresh({\n                ctx: obj === null || obj === void 0 ? void 0 : obj.ctx,\n                preview: true\n            });\n        }\n    }\n    invalidatePreview(pageIndex, boardName) {\n        const key = this.getContainerKey({ pageIndex, boardName });\n        const obj = this.previewContainerMap.get(key);\n        obj === null || obj === void 0 ? void 0 : obj.ctx.clearRect(0, 0, obj.width, obj.height);\n    }\n    /**\n     * 添加预览生成任务\n     * @param taskArray\n     */\n    addPreviewTask(taskArray) {\n        /**\n         * 必须要异步执行。\n         * 因为page.blocked需要在page.refresh调用后才知道是否阻塞。\n         * 为了保证该函数执行顺序晚于page.refresh，因此将其放入setTimeout中异步执行\n         *\n         * 越晚加入的task应该放在队列越前面。因为执行task的顺序是从队列前面往后面，越晚加入的\n         * 应该越早执行\n         */\n        setTimeout(() => {\n            taskArray.reverse().forEach(taskInfo => {\n                const taskIndexOfSamePage = this.getTaskIndexOfPage(taskInfo.pageIndex, taskInfo.boardName);\n                if (taskIndexOfSamePage !== -1) {\n                    //将之前的任务删掉。如果预览图没有准备好，插入的新任务会移动到队列头部\n                    //这样能够使得最新刷新的页面的预览图能够优先生成\n                    //如果预览图已经准备好了，那么任务队列里该页面的任务直接删除就好了\n                    this.task.splice(taskIndexOfSamePage, 1);\n                }\n                const board = this.app.room.boards[taskInfo.boardName];\n                if (board) {\n                    const page = board.pages[taskInfo.pageIndex];\n                    if (page) {\n                        const key = this.getContainerKey(taskInfo);\n                        /**\n                         * 只有绑定了container的时候，才计算preview\n                         */\n                        if (this.previewContainerMap.has(key)) {\n                            this.task.unshift({\n                                pageIndex: taskInfo.pageIndex,\n                                boardName: taskInfo.boardName,\n                                state: page.blocked ? 'waiting' : 'ready'\n                            });\n                        }\n                    }\n                }\n            });\n            this.startLoop();\n        }, 0);\n    }\n    /**\n     * 任务队列中是否已经存在同一页面的任务\n     * @param pageIndex\n     * @param boardName\n     */\n    getTaskIndexOfPage(pageIndex, boardName) {\n        for (let i = 0; i < this.task.length; i++) {\n            if (this.task[i].pageIndex === pageIndex && this.task[i].boardName === boardName) {\n                return i;\n            }\n        }\n        return -1;\n    }\n    getContainerKey(opt) {\n        return opt.boardName + '129*&^ljdfh893' + opt.pageIndex.toString();\n    }\n    setupPreviewElements(container) {\n        const canvasContainerArr = container.getElementsByClassName('preview-canvas-container');\n        if (canvasContainerArr.length === 0) {\n            const el = document.createElement('div');\n            el.className = 'preview-canvas-container';\n            el.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n            el.style.position = 'absolute';\n            el.style.left = '0';\n            el.style.right = '0';\n            el.style.top = '0';\n            el.style.bottom = '0';\n            container.appendChild(el);\n            const canvas = document.createElement('canvas');\n            const rect = el.getBoundingClientRect();\n            canvas.width = rect.width * DPI;\n            canvas.height = rect.height * DPI;\n            canvas.style.width = `${rect.width}px`;\n            canvas.style.height = `${rect.height}px`;\n            canvas.style.imageRendering = 'optimize-contrast';\n            el.appendChild(canvas);\n            const ctx = canvas.getContext('2d');\n            ctx.lineCap = 'round';\n            ctx.lineJoin = 'round';\n            return {\n                ctx,\n                canvasContainer: el\n            };\n        }\n        else {\n            const canvas = canvasContainerArr[0].getElementsByTagName('canvas')[0];\n            const ctx = canvas.getContext('2d');\n            return {\n                ctx,\n                canvasContainer: canvasContainerArr[0]\n            };\n        }\n    }\n    /**\n     * 页面快照变化时，刷新其页面预览缓存。\n     * TODO: 这个函数实际上存在缺陷，它没有考虑非当前页面快照可能变化\n     */\n    onOpAdded(snapshot) {\n        if (snapshot.category !== 'inPageOp') {\n            return;\n        }\n        else if (snapshot.data.inProgress) {\n            return;\n        }\n        else if (snapshot.data.type === 'laser') {\n            return;\n        }\n        else if (snapshot.data.type === 'mouse-pointer') {\n            return;\n        }\n        else if (this.app.room.isReceivingBatchSnapshots) {\n            return;\n        }\n        const boardName = snapshot.board;\n        const pageIndex = snapshot.page;\n        this.invalidatePreview(pageIndex.toString(), boardName);\n        this.addPreviewTask([{\n                pageIndex: pageIndex.toString(),\n                boardName: boardName\n            }]);\n    }\n    /**\n     * 页面资源获取好了，清空之前绘制的内容，并重新生成预览图\n     * @param boardName\n     * @param pageIndex\n     */\n    onPageReady(boardName, pageIndex) {\n        this.invalidatePreview(pageIndex.toString(), boardName);\n        this.addPreviewTask([{\n                pageIndex: pageIndex.toString(),\n                boardName: boardName\n            }]);\n    }\n    /**\n     * 异步生成预览图。异步生成是为了防止长时间连续任务造成卡顿。\n     */\n    startLoop() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.isLoopBusy) {\n                return;\n            }\n            this.isLoopBusy = true;\n            //第一个task需要是异步事件，否则可能会造成事件依赖关系存在问题\n            yield new Promise(res => {\n                setTimeout(res, 0);\n            });\n            while (this.task.length > 0) {\n                let task = yield this.shiftNextReadyTask();\n                while (task === null) {\n                    yield this.delay(30);\n                    task = yield this.shiftNextReadyTask();\n                }\n                const key = this.getContainerKey(task);\n                if (!this.previewContainerMap.has(key)) {\n                    continue;\n                }\n                yield new Promise(res => {\n                    try {\n                        this.generatePreview(task);\n                    }\n                    catch (err) {\n                        console.error(err);\n                    }\n                    finally {\n                        //继续下一个task\n                        res();\n                    }\n                });\n                yield this.delay(100);\n            }\n            this.isLoopBusy = false;\n        });\n    }\n    /**\n     * 移除下一个ready的task\n     */\n    shiftNextReadyTask() {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (let i = 0; i < this.task.length; i++) {\n                if (this.task[i].state === 'ready') {\n                    const task = this.task[i];\n                    this.task.splice(i, 1);\n                    try {\n                        /**\n                         * 若页面不存在，则跳到下一个任务\n                         */\n                        const page = this.app.room.getPage(task.boardName, task.pageIndex);\n                        if (page) {\n                            return task;\n                        }\n                        else {\n                            i--;\n                            continue;\n                        }\n                    }\n                    catch (err) {\n                        i--;\n                        continue;\n                    }\n                }\n            }\n            return null;\n        });\n    }\n    delay(ms) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise(res => {\n                setTimeout(() => {\n                    res();\n                }, ms);\n            });\n        });\n    }\n    setupExportToImgContainer() {\n        const el = document.createElement('div');\n        el.style.position = 'relative';\n        el.style.visibility = 'hidden';\n        document.body.appendChild(el);\n        this.container = el;\n        this.setBackgroundColor();\n        this.canvas = document.createElement('canvas');\n        el.appendChild(this.canvas);\n        this.ctx = this.canvas.getContext('2d');\n        this.ctx.lineCap = 'round';\n        this.ctx.lineJoin = 'round';\n    }\n}\nexport default PreviewFactory;\n","import loadingUrl from '../../assets/image/imageIsLoading.svg';\nconst resourceCache = {};\nconst videoResourceCache = {};\n/**\n * 跨域图片。设置了crossOrigin属性的图片。配置了crossOrigin之后，才能够使用导出图片功能\n */\nconst crossOriginResourceCache = {};\nconst resourceReadyListeners = {};\nconst retryCount = {};\nconst RETRY_LIMIT = 10;\nexport const fetchResource = (url, cb) => {\n    if (!resourceCache.hasOwnProperty(url)) {\n        resourceCache[url] = new Image();\n        crossOriginResourceCache[url] = new Image();\n        //https://stackoverflow.com/questions/22710627/tainted-canvases-may-not-be-exported\n        // resourceCache[url].crossOrigin = \"anonymous\";\n        crossOriginResourceCache[url].crossOrigin = \"anonymous\";\n        resourceCache[url].src = url;\n        crossOriginResourceCache[url].src = url;\n    }\n    if (typeof cb === 'function') {\n        setResourceLoadedCallback(url, cb);\n    }\n};\nexport const fetchVideoResource = (url, cb) => {\n    if (!videoResourceCache.hasOwnProperty(url)) {\n        videoResourceCache[url] = document.createElement(\"video\");\n        videoResourceCache[url].src = url;\n    }\n    if (typeof cb === 'function') {\n        setResourceLoadedCallback(url, cb, true);\n    }\n};\nconst setResourceLoadedCallback = (url, cb, isVideo = false) => {\n    resourceReadyListeners[url] = resourceReadyListeners[url] || [];\n    resourceReadyListeners[url].push(cb);\n    const resource = isVideo ? videoResourceCache[url] : resourceCache[url];\n    if (isVideo) {\n        resource.onloadedmetadata = () => {\n            const arr = resourceReadyListeners[url] || [];\n            for (let cb of arr) {\n                cb(resource);\n            }\n        };\n    }\n    else {\n        resource.onload = () => {\n            const arr = resourceReadyListeners[url] || [];\n            for (let cb of arr) {\n                cb(resource);\n            }\n        };\n    }\n    resource.onerror = () => {\n        retryCount[url] || (retryCount[url] = 0);\n        if (retryCount[url] < RETRY_LIMIT) {\n            /**\n             * 图片加载失败，尝试重新加载\n             * 间隔时间为2s, 4s, 6s, 8s, .... 20s\n             */\n            delete resourceCache[url];\n            delete resourceReadyListeners[url];\n            const delay = (retryCount[url] + 1) * 2000;\n            setTimeout(() => {\n                if (LOG) {\n                    console.warn(`白板--> ${isVideo ? '视频' : '图片'}加载失败，第${retryCount[url]}次重新加载: ${url}`);\n                }\n                if (isVideo) {\n                    fetchVideoResource(url, cb);\n                }\n                else {\n                    fetchResource(url, cb);\n                }\n            }, delay);\n        }\n        retryCount[url] += 1;\n    };\n};\nexport const resourceLoaded = (url, crossOrigin = false) => {\n    const img = crossOrigin ? crossOriginResourceCache[url] : resourceCache[url];\n    return img && img.complete && img.width > 0 && img.height > 0;\n};\nexport const getResource = (url, crossOrigin = false) => {\n    return crossOrigin ? crossOriginResourceCache[url] : resourceCache[url];\n};\nexport const videoResourceLoaded = (url) => {\n    const video = videoResourceCache[url];\n    return video && video.videoWidth > 0 && video.videoHeight > 0;\n};\nexport const getVideoResource = (url) => {\n    return videoResourceCache[url];\n};\n/**\n * 加载图片正在加载中的图片\n */\nresourceCache['imageLoading'] = new Image();\nresourceCache['imageLoading'].src = loadingUrl;\n//https://stackoverflow.com/questions/22710627/tainted-canvases-may-not-be-exported\ncrossOriginResourceCache['imageLoading'] = new Image();\ncrossOriginResourceCache['imageLoading'].src = loadingUrl;\ncrossOriginResourceCache['imageLoading'].setAttribute('crossorigin', 'anonymous');\n","import { transitionToCameraBound } from \"../animation\";\nimport Board from \"../board\";\nimport { addPage, gotoPage } from \"../board/actions\";\nimport { getCameraBoundFromGlobalOp } from \"./util\";\nlet fitToContentTimer;\n/**\n * 添加全局快照，目前属于整个房间的快照仅包含视角快照\n *\n * 该函数仅在非批量场景中使用。批量场景需要在dispatchBatch中处理camera的逻辑\n *\n * @param snapshot\n */\nexport const addGlobalOp = (room, snapshot) => {\n    var _a;\n    const camera = room.app.camera;\n    /**\n     * 以下情况下不会返回null\n     * 1. 自由视角 + 当前用户快照\n     * 2. 主播视角 + 当前用户快照\n     * 3. 跟随视角 + 主播快照\n     * 4. 跟随视角 + 当前用户快照（resize时发射）\n     */\n    const boundary = getCameraBoundFromGlobalOp(room, snapshot);\n    if (boundary) {\n        if (snapshot.data.animate) {\n            transitionToCameraBound(camera, boundary, () => {\n                var _a;\n                (_a = room.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n            });\n        }\n        else {\n            room.app.camera.setCameraBound(boundary);\n            (_a = room.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n        }\n    }\n};\nexport const addOpInRoom = (room, snapshot) => {\n    var _a;\n    const { action, boardName } = snapshot.data;\n    if (action === 'goto') {\n        gotoBoard(room, boardName, snapshot);\n    }\n    if (action === 'delete') {\n        deleteBoard(room, boardName, snapshot);\n    }\n    if (action === 'add') {\n        addBoard(room, boardName, snapshot);\n    }\n    room.app.opsManager.hooks.addOpHook.call(snapshot, true);\n    (_a = room.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n};\nexport const deleteBoard = (room, boardName, snapshot) => {\n    if (!room.boards.hasOwnProperty(boardName)) {\n        if (LOG) {\n            console.error('白板-->', `删除board:${boardName}, 但是board不存在`);\n        }\n    }\n    else if (Object.keys(room.boards).length === 1) {\n        if (LOG) {\n            console.error('白板-->', `不能删除最后一个board`);\n        }\n    }\n    else {\n        const boardNames = Object.keys(room.boards);\n        //boardName在this.boards中是第几个\n        const selectBoardIndex = boardNames.indexOf(boardName);\n        delete room.boards[boardName];\n        //选中被删除的board的下一个board\n        let nextBoardIndex = selectBoardIndex;\n        if (selectBoardIndex === boardNames.length - 1) {\n            //被删除的是最后一个board\n            nextBoardIndex = selectBoardIndex - 1;\n        }\n        room.currIndex = Object.keys(room.boards)[nextBoardIndex];\n        const currBoard = room.boards[room.currIndex];\n        room.app.opsManager.hooks.boardChange.call();\n        gotoPage(currBoard, currBoard.currIndex, snapshot);\n        clearTimeout(fitToContentTimer);\n        if (!room.isReceivingBatchSnapshots) {\n            fitToContentTimer = setTimeout(() => {\n                if (room.app.hasBackground()) {\n                    room.app.fitToContent(false);\n                }\n            }, 0);\n        }\n    }\n};\n/**\n * 添加新board，snapshot中包含了该board的页数\n * @param boardName\n * @param snapshot\n */\nexport const addBoard = (room, boardName, snapshot) => {\n    const displayName = snapshot.data.displayName ? snapshot.data.displayName : boardName;\n    room.boards[boardName] = new Board(room.app, boardName, displayName);\n    room.currIndex = boardName;\n    const currBoard = room.boards[room.currIndex];\n    room.app.opsManager.hooks.boardChange.call();\n    for (let i = 1; i < snapshot.data.pageCount; i++) {\n        addPage(currBoard, undefined, snapshot);\n    }\n    gotoPage(currBoard, 0, snapshot);\n    clearTimeout(fitToContentTimer);\n    if (!room.isReceivingBatchSnapshots) {\n        fitToContentTimer = setTimeout(() => {\n            if (room.app.hasBackground()) {\n                room.app.fitToContent(false);\n            }\n        }, 0);\n    }\n};\nexport const gotoBoard = (room, boardName, snapshot) => {\n    if (!room.boards.hasOwnProperty(boardName)) {\n        room.boards[boardName] = new Board(room.app, boardName, boardName);\n    }\n    room.currIndex = boardName;\n    const currBoard = room.boards[room.currIndex];\n    room.app.opsManager.hooks.boardChange.call();\n    gotoPage(currBoard, currBoard.currIndex, snapshot);\n    if (room.app.hasBackground() && !room.isReceivingBatchSnapshots) {\n        room.app.fitToContent(false);\n    }\n};\n","/**\n * 一个白板应用中含有一个房间。房间在通信中和频道一一对应\n *\n * 一个房间包含一个白板(WhiteBoard)，以及0到N个文件白板(FileBoard)。\n *\n * 每个白板包含1到N个子页面\n */\nimport Board from \"../board\";\nimport { cameraSnapshotTypes } from \"../ops/types\";\nimport { transitionToCameraBound } from \"../animation\";\nimport { addGlobalOp, addOpInRoom } from \"./actions\";\nimport { getCameraBoundFromGlobalOp } from \"./util\";\nclass Room {\n    constructor(app, dataHub) {\n        this.currIndex = 'whiteboard';\n        this.isReceivingBatchSnapshots = false;\n        this.boards = {};\n        this.pkgIdOpIdMap = {};\n        this.pageToRefresh = undefined;\n        this.pageToIncRefresh = undefined;\n        /**\n         * 所有快照的数据之源\n         */\n        this.opIdSnapshotMap = {};\n        //文档类快照的opId\n        this.boardsSnapshotIds = [];\n        //全局快照的opId\n        this.globalSnapshotIds = [];\n        this.boardOps = {};\n        this._startRefreshLoop2 = () => {\n            cancelAnimationFrame(this.refreshAnimationTimer);\n            this.refreshAnimationTimer = requestAnimationFrame(this._startRefreshLoop2);\n            if (this.pageToRefresh && this.pageToRefresh === this.currBoard.currPage) {\n                this.currBoard.currPage.refresh();\n                this.pageToRefresh = undefined;\n            }\n            if (this.pageToIncRefresh && this.pageToIncRefresh === this.currBoard.currPage) {\n                this.currBoard.currPage.incRefresh();\n                this.pageToIncRefresh = undefined;\n            }\n        };\n        this.app = app;\n        this.dataHub = dataHub;\n        this._init();\n    }\n    get currBoard() {\n        return this.boards[this.currIndex];\n    }\n    getBoardDisplayNames() {\n        return Object.keys(this.boards).map(boardName => {\n            return this.boards[boardName].displayName;\n        });\n    }\n    getPage(boardName, pageIndex) {\n        const board = this.boards[boardName];\n        if (!board) {\n            throw new Error(`找不到名字为${boardName}的白板，当前房间白板列表为: ${Object.keys(this.app.room.boards).join(\",\")}`);\n        }\n        const page = board.pages[pageIndex];\n        if (!page) {\n            throw new Error(`找不到索引为${pageIndex}的白板页，当前房间白板页码为: ${board.pageNames.join(\",\")}`);\n        }\n        return page;\n    }\n    /**\n     * @param partial\n     * @returns\n     */\n    recoverFullSnapshot(partial) {\n        if (!this.opIdSnapshotMap.hasOwnProperty(partial.opId)) {\n            return partial;\n        }\n        const baseOp = this.opIdSnapshotMap[partial.opId].snapshot;\n        return this.app.opsManager.mergePartial(baseOp, partial);\n    }\n    /**\n     * 清空当前会话周期中所有的快照信息。\n     * 连接云信白板2.0服务器时使用该函数，在主播重新连接时，主播和听众使用该函数清空所有白板状态\n     */\n    reset() {\n        var _a, _b, _c;\n        if (LOG) {\n            console.log('白板-->', 'room.reset');\n        }\n        this._init();\n        (_b = (_a = this.currBoard) === null || _a === void 0 ? void 0 : _a.currPage) === null || _b === void 0 ? void 0 : _b.cleanNonCanvasElements();\n        // this.currBoard?.currPage?.refresh()\n        this.pageToRefresh = (_c = this.currBoard) === null || _c === void 0 ? void 0 : _c.currPage;\n    }\n    /**\n     * 开启批量接收快照\n     * 批量接收期间，中间的许多快照的refresh可以省略\n     */\n    beginReceiveBatchSnapshots() {\n        this.isReceivingBatchSnapshots = true;\n    }\n    /**\n     * 结束批量接收快照\n     * 批量接收结束时，refresh应该被refresh的部分\n     */\n    endReceiveBatchSnapshots(boundaries, hasBoardAction, cb) {\n        var _a, _b, _c;\n        this.isReceivingBatchSnapshots = false;\n        this.currBoard.currPage.calcDrawOpQueue();\n        if (boundaries.length > 0) {\n            const lastBoundaryData = boundaries[boundaries.length - 1];\n            if (lastBoundaryData.boundary.width > 0 && lastBoundaryData.boundary.height > 0) {\n                if (lastBoundaryData.animate) {\n                    transitionToCameraBound(this.app.camera, lastBoundaryData.boundary, () => {\n                        var _a;\n                        (_a = this.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n                        if (typeof cb === 'function') {\n                            cb(true);\n                        }\n                    });\n                }\n                else {\n                    this.app.camera.setCameraBound(lastBoundaryData.boundary);\n                    (_a = this.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n                    if (typeof cb === 'function') {\n                        cb(true);\n                    }\n                }\n            }\n            else if (typeof cb === 'function') {\n                cb(false);\n            }\n        }\n        else {\n            // this.currBoard.currPage.refresh()\n            this.pageToRefresh = this.currBoard.currPage;\n            /**\n             * 有文档新增，删除，跳转等操作时，整个文档都需要重新制作\n             */\n            if (hasBoardAction) {\n                (_b = this.app.previewFactory) === null || _b === void 0 ? void 0 : _b.refreshPreviewsOfCurrBoard();\n            }\n            else {\n                (_c = this.app.previewFactory) === null || _c === void 0 ? void 0 : _c.refreshPreviewsOfCurrPage();\n            }\n            if (typeof cb === 'function') {\n                cb(false);\n            }\n        }\n    }\n    /**\n     * 发送本地动作快照给远程服务器\n     * @param snapshot\n     */\n    dispatch(snapshot) {\n        // if (snapshot.data.type !== 'mouse-pointer') {\n        //     console.warn('dispatch', snapshot)\n        // }\n        /**\n         * 本地动作，且当前属于不可编辑状态，且动作不是camera动作时，返回\n         */\n        const isCameraSnapshot = cameraSnapshotTypes.indexOf(snapshot.data.type) !== -1;\n        //如果camera-bound的宽高设置为0，则出现了一些意外\n        if (snapshot.data.type === 'camera-bound' && (snapshot.data.boundary.width === 0 || snapshot.data.boundary.height === 0)) {\n            console.error('白板--> error, camera-bound的宽高为0', snapshot);\n            return;\n        }\n        if (!this.app.editable && !isCameraSnapshot) {\n            // return this.editEnabled && !this.dataHub.isSynchronizing && this.isConnected\n            if (this.app.isRecordPlayer) {\n                return;\n            }\n            if (!this.app.editEnabled) {\n                console.warn('白板--> 请先开启编辑再修改白板');\n            }\n            else if (!this.app.isConnected) {\n                console.warn('白板--> 网络未连接，请等待网络恢复再修改白板');\n            }\n            else if (!this.dataHub.isSynchronizing) {\n                console.warn('白板--> 请等待同步完成再修改白板');\n            }\n            return;\n        }\n        if (this.dataHub.isSynchronizing) {\n            return;\n        }\n        const fakeServerId = this.dataHub.sendSnapshot(snapshot);\n        this.execSnapshot({\n            snapshot,\n            //TODO\n            pkgId: fakeServerId\n        });\n    }\n    execSnapshot(_pkg) {\n        const pkg = {\n            pkgId: _pkg.pkgId,\n            snapshot: this.recoverFullSnapshot(_pkg.snapshot)\n        };\n        this.cacheSnapshot(pkg);\n        this.pushSnapshotToQueue(pkg);\n        const snapshot = pkg.snapshot;\n        if (snapshot.category === 'inPageOp') {\n            //页面内操作\n            const page = this.getPage(snapshot.board, snapshot.page.toString());\n            page.addOpInPage(snapshot);\n        }\n        else if (snapshot.category === 'pageOp') {\n            //页面操作: add/goto/delete\n            const board = this.boards[snapshot.board];\n            if (board) {\n                board.addOpInBoard(snapshot);\n            }\n        }\n        else if (snapshot.category === 'globalOp') {\n            //全局操作： pan/zoom\n            addGlobalOp(this, snapshot);\n        }\n        else {\n            //文档操作\n            addOpInRoom(this, snapshot);\n        }\n    }\n    /**\n     * 从远程批量接收快照\n     * 同步或者录像回放的seekTo时触发\n     * @param snapshots\n     */\n    execBatchSnapshots(_pkgArr, cb) {\n        const pkgArr = _pkgArr.map(_pkg => {\n            const pkg = {\n                pkgId: _pkg.pkgId,\n                snapshot: this.recoverFullSnapshot(_pkg.snapshot)\n            };\n            this.cacheSnapshot(pkg);\n            return pkg;\n        });\n        /**\n         * allInPage: 同一个批次里的数据都是页面内数据\n         */\n        const allInPage = pkgArr.filter(pkg => {\n            return pkg.snapshot.category !== 'inPageOp';\n        }).length === 0;\n        const hasBoardAction = pkgArr.filter(pkg => {\n            return pkg.snapshot.category === 'boardOp';\n        }).length > 0;\n        let boundaryData = pkgArr\n            .filter(pkg => {\n            return pkg.snapshot.category === 'globalOp' && pkg.snapshot.data.type === 'camera-bound';\n        })\n            .map(pkg => {\n            return {\n                animate: pkg.snapshot.data.animate,\n                boundary: getCameraBoundFromGlobalOp(this, pkg.snapshot)\n            };\n        })\n            .filter(boundary => boundary.boundary);\n        let nonCameraPkg = pkgArr.filter(pkg => {\n            return pkg.snapshot.category !== 'globalOp' || pkg.snapshot.data.type !== 'camera-bound';\n        });\n        if (allInPage) {\n            /**\n             * 都是页面内数据，将快照一个个加到页面中(addInPage)处理。\n             * 如果需要refresh，则记录下来，统一处理完之后再refresh。\n             * 如果不需要refresh，则每次调用addOpSnapshot会增量绘制\n             */\n            let needRefresh = false;\n            nonCameraPkg.forEach((pkg) => {\n                this.pushSnapshotToQueue(pkg);\n                const snapshot = pkg.snapshot;\n                const page = this.getPage(snapshot.board, snapshot.page.toString());\n                needRefresh = page.addOpInPage(snapshot, false) || needRefresh;\n            });\n            /**\n             * 之所以和含有非inPageOp分开处理，是因为allInPage可能不需要refresh\n             * 比如说连续的涂鸦操作，在addOpInPage时会绘制增量部分，不会全部refresh\n             */\n            if (needRefresh) {\n                this.endReceiveBatchSnapshots([], false, cb);\n            }\n            else if (typeof cb === 'function') {\n                cb(false);\n            }\n        }\n        else {\n            this.beginReceiveBatchSnapshots();\n            try {\n                for (let pkg of nonCameraPkg) {\n                    this.execSnapshot(pkg);\n                }\n            }\n            finally {\n                this.endReceiveBatchSnapshots(boundaryData, hasBoardAction, cb);\n            }\n        }\n    }\n    /**\n     * 将快照缓存起来\n     * @param pkg\n     */\n    cacheSnapshot(pkg) {\n        var _a;\n        const opId = pkg.snapshot.opId;\n        const pkgId = pkg.pkgId;\n        if (this.opIdSnapshotMap[opId]) {\n            pkg.snapshot = this.recoverFullSnapshot(pkg.snapshot);\n            /**\n             * 该快照之前已经存在, 从pkgIdOpIdMap中删除原来pkg对应的入口\n             */\n            const oldPkgId = this.opIdSnapshotMap[opId].pkgId;\n            const index = this.pkgIdOpIdMap[oldPkgId].indexOf(opId);\n            this.pkgIdOpIdMap[oldPkgId].splice(index, 1);\n            if (this.pkgIdOpIdMap[oldPkgId].length === 0) {\n                delete this.pkgIdOpIdMap[oldPkgId];\n            }\n        }\n        this.opIdSnapshotMap[opId] = pkg;\n        (_a = this.pkgIdOpIdMap)[pkgId] || (_a[pkgId] = []);\n        this.pkgIdOpIdMap[pkgId].push(opId);\n    }\n    pushSnapshotToQueue(pkg) {\n        var _a, _b;\n        const category = pkg.snapshot.category;\n        const opId = pkg.snapshot.opId;\n        const pkgId = pkg.pkgId;\n        if (category === 'globalOp') {\n            this._pushSnapshotInArray(opId, pkgId, this.globalSnapshotIds);\n        }\n        else if (category === 'boardOp') {\n            this._pushSnapshotInArray(opId, pkgId, this.boardsSnapshotIds);\n        }\n        else if (pkg.snapshot.category === 'pageOp') {\n            const board = pkg.snapshot.board;\n            if (!this.boardOps.hasOwnProperty(board)) {\n                this.boardOps[board] = {\n                    pageSnapshotIds: [],\n                    pages: {}\n                };\n            }\n            (_a = this.boardOps[board]).pageSnapshotIds || (_a.pageSnapshotIds = []);\n            this._pushSnapshotInArray(opId, pkgId, this.boardOps[board].pageSnapshotIds);\n        }\n        else if (pkg.snapshot.category === 'inPageOp') {\n            const board = pkg.snapshot.board;\n            const page = pkg.snapshot.page;\n            if (!this.boardOps.hasOwnProperty(board)) {\n                this.boardOps[board] = {\n                    pageSnapshotIds: [],\n                    pages: {}\n                };\n            }\n            if (!this.boardOps[board].pages.hasOwnProperty(page)) {\n                this.boardOps[board].pages[page] = {\n                    inPageSnapshotIds: []\n                };\n            }\n            (_b = this.boardOps[board].pages[page]).inPageSnapshotIds || (_b.inPageSnapshotIds = []);\n            this._pushSnapshotInArray(opId, pkgId, this.boardOps[board].pages[page].inPageSnapshotIds);\n        }\n    }\n    /**\n     * 将opId push到arr中，要求如果：\n     * 1. arr中不能有重复的opId\n     * 2. arr中每一个opId代表的包都递增。包可以通过snapshotMap查询\n     *\n     * 若opId不存在于arr中，则找到合适的位置插入\n     * 若opId存在，则先将原来的元素删除，然后找到合适的位置插入\n     * @param opId\n     * @param arr\n     */\n    _pushSnapshotInArray(opId, pkgId, arr) {\n        const index = arr.indexOf(opId);\n        if (index !== -1) {\n            arr.splice(index, 1);\n        }\n        for (let i = arr.length; i >= 0; i--) {\n            if (i === 0) {\n                arr.splice(i, 0, opId);\n                break;\n            }\n            else {\n                const pkgIdInArr = this.opIdSnapshotMap[arr[i - 1]].pkgId;\n                if (pkgIdInArr <= pkgId) {\n                    arr.splice(i, 0, opId);\n                    break;\n                }\n            }\n        }\n    }\n    /**\n     * 合并延迟发送的数据\n     *\n     * 从第一个到最后一个遍历：\n     * 1. 没有相同的opId，加到队列中\n     * 2. 有相同的opId，自己是partial，如果之前有完整的，则合并到完整的，如果之前是partial，则合并到partial\n     *    有相同的opId，自己是完整，则覆盖之前的快照\n     * @param data\n     */\n    mergeDebouncedData(dataArr, dataType) {\n        if (dataType !== 'snapshot' && dataArr.length > 0) {\n            return dataArr[dataArr.length - 1];\n        }\n        else if (dataType !== 'snapshot') {\n            throw new Error('白板--> mergeDebounceData, dataArr is empty!!');\n        }\n        const map = {};\n        for (let entry of dataArr) {\n            if (entry.type === 'vision') {\n                map['vision'] = entry;\n            }\n            else if (!map.hasOwnProperty(entry.value.opId)) {\n                map[entry.value.opId] = entry.value;\n            }\n            else if (!entry.value.hasOwnProperty('category')) {\n                //之前有数据存在, 当前数据是部分数据\n                if (map[entry.value.opId].hasOwnProperty('category')) {\n                    map[entry.value.opId] = this.app.opsManager.mergePartial(map[entry.value.opId], entry.value);\n                }\n                else {\n                    map[entry.value.opId] = this.app.opsManager.mergeTwoPartial(map[entry.value.opId], entry.value);\n                }\n            }\n            else {\n                //之前有数据存在，但新数据是完整数据，直接覆盖旧数据就好\n                map[entry.value.opId] = entry.value;\n            }\n        }\n        if (Object.keys(map).length === 1) {\n            return {\n                type: 'snapshot',\n                value: Object.keys(map).map(id => map[id])[0]\n            };\n        }\n        else {\n            return {\n                type: 'snapshotArr',\n                value: Object.keys(map).map(id => map[id])\n            };\n        }\n    }\n    _init() {\n        const whiteboard = new Board(this.app, 'whiteboard', 'whiteboard');\n        this.boards = {\n            'whiteboard': whiteboard\n        };\n        this.currIndex = 'whiteboard';\n        this.pkgIdOpIdMap = {};\n        this.opIdSnapshotMap = {};\n        this.boardsSnapshotIds = [];\n        this.globalSnapshotIds = [];\n        this.boardOps = {};\n        this._startRefreshLoop();\n    }\n    _startRefreshLoop() {\n        cancelAnimationFrame(this.refreshAnimationTimer);\n        this._startRefreshLoop2();\n    }\n}\nexport default Room;\n","/**\n* 返回非null时，才需要更新本地视角\n* @param snapshot\n*/\nexport const getCameraBoundFromGlobalOp = (room, snapshot) => {\n    const camera = room.app.camera;\n    const vision = room.app.vision;\n    if (snapshot.data.type === 'camera-bound') {\n        camera.cameraBoundByUser[snapshot.uid] = snapshot.data.boundary;\n        if (vision.mode === 'freeObserver' && snapshot.uid === room.app.account) {\n            return snapshot.data.boundary;\n        }\n        else if (vision.mode === 'broadcaster' && snapshot.uid === room.app.account) {\n            return snapshot.data.boundary;\n        }\n        else if (vision.mode === 'follower' && snapshot.uid === vision.broadcaster) {\n            return snapshot.data.boundary;\n        }\n        else if (vision.mode === 'follower' && snapshot.uid === room.app.account) {\n            /**\n             * 本地窗口resize时，设置cameraBound调整canvas缩放值\n             */\n            return snapshot.data.boundary;\n        }\n    }\n    return null;\n};\n","class Simulator {\n    constructor(app) {\n        this._lastDirection = 0;\n        this._interruptFreeDraw = false;\n        this.app = app;\n    }\n    reconnect(rebuildSocket = false, resetApp = false) {\n        console.log(`DEV--> 模拟重连， 是否清空数据: ${resetApp}, 是否重新创建socket连接: ${rebuildSocket}`);\n        if (resetApp) {\n            this.app.resetState();\n        }\n        if (rebuildSocket) {\n            this.app.dataHub.handler._simulateReconnect();\n        }\n        else {\n            /**\n             * 不断开socket，重新请求同步数据\n             */\n            this.app.readyToSyncData();\n        }\n    }\n    generateRandomLines(points, repeat, intervalBtwPoints = 15, intervalBtwLines = 1000) {\n        this._interruptFreeDraw = false;\n        this._generateRandomLines(points, repeat, intervalBtwPoints, intervalBtwLines);\n    }\n    interruptRandomLines() {\n        this._interruptFreeDraw = true;\n    }\n    _generateRandomLines(points, repeat, intervalBtwPoints = 15, intervalBtwLines = 1000) {\n        console.log(`正在生成随机线段，还剩余${repeat}次`);\n        if (this._interruptFreeDraw) {\n            return console.log('随机涂鸦被打断');\n        }\n        if (repeat <= 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._generateRandomLines2(points, intervalBtwPoints)\n                .then(() => {\n                return this._generateRandomLines(points, repeat - 1, intervalBtwPoints, intervalBtwLines);\n            });\n        }, intervalBtwLines);\n    }\n    _generateRandomLines2(total, intervalBtwPoints) {\n        const el = this.app.container.el;\n        const width = el.offsetWidth;\n        const height = el.offsetHeight;\n        let x = Math.random() * width;\n        let y = Math.random() * height;\n        let event = new MouseEvent('mousedown', {\n            clientX: x,\n            clientY: y\n        });\n        this.app.container.el.dispatchEvent(event);\n        let promise = this._simulateMouseMove(x, y, 0);\n        for (let i = 0; i < total; i++) {\n            promise = promise\n                .then(lastXY => {\n                if (intervalBtwPoints > 0) {\n                    return new Promise(res => {\n                        setTimeout(() => {\n                            res(lastXY);\n                        }, intervalBtwPoints);\n                    });\n                }\n                else {\n                    return lastXY;\n                }\n            })\n                .then(res => {\n                if (this._interruptFreeDraw) {\n                    return Promise.reject(res);\n                }\n                return this._simulateMouseMove(res.x, res.y, i);\n            });\n        }\n        return promise\n            .catch((res) => {\n            return res;\n        })\n            .then(res => {\n            event = new MouseEvent('mouseup', {\n                clientX: res.x,\n                clientY: res.y\n            });\n            document.dispatchEvent(event);\n        });\n    }\n    _simulateMouseMove(x, y, currIndex) {\n        return new Promise((res) => {\n            setTimeout(() => {\n                const [dx, dy] = this._getDxDy(currIndex);\n                x += dx;\n                y += dy;\n                let event = new MouseEvent('mousemove', {\n                    clientX: x,\n                    clientY: y\n                });\n                document.dispatchEvent(event);\n                res({\n                    x, y\n                });\n            }, 0);\n        });\n    }\n    _getDxDy(currIndex) {\n        const RANDOM_BASE = 10;\n        const TURN_AFTER = 30;\n        if (currIndex % TURN_AFTER === 0) {\n            this._lastDirection = Math.floor(Math.random() * 4);\n        }\n        if (this._lastDirection === 0) {\n            return [Math.random() * RANDOM_BASE, Math.random() * RANDOM_BASE];\n        }\n        else if (this._lastDirection === 1) {\n            return [Math.random() * RANDOM_BASE, Math.random() * -RANDOM_BASE];\n        }\n        else if (this._lastDirection === 2) {\n            return [Math.random() * -RANDOM_BASE, Math.random() * RANDOM_BASE];\n        }\n        else {\n            return [Math.random() * -RANDOM_BASE, Math.random() * -RANDOM_BASE];\n        }\n    }\n}\nexport default Simulator;\n","export const PlatformArray = ['android', 'ios', 'pc', 'mac', 'pad', 'web'];\nexport const TouchPlatformArray = ['android', 'ios', 'pad'];\n","/**\n * 滴答滴答报时器。\n *\n * 处于play状态时，每隔一段时间会向外发送tick事件。\n */\nimport { EventEmitter } from \"eventemitter3\";\nexport const DEFAULT_INTERVAL = 10;\nexport default class TickTick extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.state = 'pause';\n        //currTimeStamp是相对于最早Track的起始时间偏移量\n        this.currTimeStamp = 0;\n        //lastRealTime是上一次记录的真实时间\n        this.lastRealTime = undefined;\n        this.rate = 1;\n        this.microTask = () => {\n            if (this.state === 'play') {\n                this.tick();\n            }\n        };\n    }\n    destory() {\n        this.pause();\n        this.eventNames().forEach(name => this.off(name));\n    }\n    tick() {\n        let now = Date.now();\n        if (this.lastRealTime === undefined) {\n            this.lastRealTime = now;\n            return;\n        }\n        else {\n            let passedGap = ((now - this.lastRealTime) * this.rate);\n            this.currTimeStamp = this.currTimeStamp + passedGap;\n            this.lastRealTime = now;\n            this.emit('tick', this.currTimeStamp);\n        }\n    }\n    pause() {\n        if (this.timer) {\n            window.clearInterval(this.timer);\n        }\n        this.timer = undefined;\n        this.lastRealTime = undefined;\n        this.state = 'pause';\n        this.emit('pause');\n    }\n    play() {\n        if (!this.timer) {\n            this.timer = setInterval(this.microTask, DEFAULT_INTERVAL);\n        }\n        this.state = 'play';\n        this.emit('play');\n    }\n    setCurrentTime(timeStamp = 0) {\n        this.currTimeStamp = timeStamp;\n        this.lastRealTime = undefined;\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from \"eventemitter3\";\nimport TickTick, { DEFAULT_INTERVAL } from \"./TickTick\";\nexport default class Timeline extends EventEmitter {\n    constructor(tracks) {\n        super();\n        this.tracks = tracks;\n        this.ticker = new TickTick();\n        this.endTimeStamp = 0;\n        /**\n         * waitingToPlay表示部分Track暂时无法播放。\n         * 一旦所有Track准备好了(canplay), timeline将自动开始播放\n         */\n        this.state = 'pause';\n        this.busy = false; // 主要是用于异步操作时，防止多次调用导致的状态不统一\n        this.handleTrackVisibleChange = (type, params, callback) => {\n            this.emit('visibleChange', type, params, callback);\n        };\n        /**\n         * ticktick发送tick事件，将track播放至ticktick发送的时间(time)\n         * @param time\n         */\n        this.update = (time) => __awaiter(this, void 0, void 0, function* () {\n            if (this.state !== 'play') {\n                console.error('update应该处于play状态下才调用');\n            }\n            yield Promise.all(this.tracks.map(track => track.update(time)));\n            if (this.tracks.every(track => track.state === 'finished')) {\n                setTimeout(() => {\n                    this._doPause();\n                    this.state = 'finished';\n                    this.emit('finished');\n                });\n            }\n        });\n        this.initTrack(tracks);\n        this.bindTickerEvents();\n    }\n    initTrack(tracks) {\n        this.tracks = tracks.slice();\n        // 计算出轨道的起始时间戳\n        let minTimestamp = getMinTimeStamp(tracks);\n        let readyQueue = getInitQueue(tracks, minTimestamp);\n        console.log('init every track');\n        // 先初始化白板的录制文件\n        Promise.all(readyQueue).then(list => {\n            console.log('every track inited');\n            const badTracks = this.tracks.filter((t, index) => list[index] === 'error');\n            this.tracks = this.tracks.filter((t, index) => list[index] === 'ready');\n            if (badTracks.length > 0) {\n                this.emit('error', 'bad track');\n            }\n            this.endTimeStamp = getMaxTimeStamp(tracks);\n            this.bindTrackEvents();\n            console.log('timeline ready');\n            const viewerArr = [];\n            this.tracks.forEach(track => {\n                if (Array.isArray(track['viewerArr'])) {\n                    track['viewerArr'].forEach(viewer => {\n                        if (!viewerArr.includes(viewer)) {\n                            viewerArr.push(viewer);\n                        }\n                    });\n                }\n            });\n            if (viewerArr.length === 0) {\n                viewerArr.push('unknown');\n            }\n            this.emit('ready', {\n                beginTimeStamp: minTimestamp,\n                endTimeStamp: this.endTimeStamp + minTimestamp,\n                duration: this.endTimeStamp,\n                viewerArr: viewerArr\n            });\n        });\n    }\n    bindTrackEvents() {\n        this.tracks.forEach(track => {\n            // 给每个轨道绑定事件\n            track.on('visibleChange', this.handleTrackVisibleChange);\n            track.on('waitingToPlay', () => this.handleTrackWaitingToPlay());\n            track.on('canplay', () => this.handleTrackCanPlay());\n        });\n    }\n    bindTickerEvents() {\n        this.ticker.on('tick', (time) => {\n            this.emit('tick', time);\n            this.update(time);\n        });\n        this.ticker.on('pause', () => {\n            this.emit('pause');\n        });\n        this.ticker.on('play', () => {\n            this.emit('play');\n        });\n    }\n    /**\n     * Track发送waitingToPlay消息，表示Track目前阻塞中。\n     * 如果Timeline状态为播放中，改为等待播放。如果为暂停，或者结束，则不用额外处理\n     */\n    handleTrackWaitingToPlay() {\n        if (this.state === 'play' && this.hasTrackWaiting()) {\n            this.state = 'waitingToPlay';\n            this._doPause();\n        }\n    }\n    /**\n     * 某个Track转为非阻塞状态。\n     * 如果当前状态为等待播放，且没有track阻塞，则开始播放轨道\n     */\n    handleTrackCanPlay() {\n        if (this.state === 'waitingToPlay' && !this.hasTrackWaiting()) {\n            this.state = 'play';\n            this._doPlay();\n        }\n    }\n    /**\n     * 某些track在currTimeStamp这个时间点上还没准备好数据或者容器\n     */\n    hasTrackWaiting() {\n        return this.tracks.find(track => track.isWaiting(this.ticker.currTimeStamp)) !== undefined;\n    }\n    /**\n     * 暂停播放。\n     * 停止ticker，ticker会停止tick事件，这会阻止白板播放\n     * 停止track, 会暂停音视频Track播放\n     */\n    pause() {\n        if (this.busy) {\n            //  繁忙状态下，不允许二次操作\n            console.warn('busy pause');\n            return;\n        }\n        if (this.state === 'play') {\n            this._doPause();\n        }\n        if (this.state !== 'finished') {\n            this.state = 'pause';\n        }\n    }\n    /**\n     * 播放。要每段track都能够播放，才能够继续播放\n     * 如果处于waitingToPlay，则还有资源被阻塞\n     */\n    play() {\n        if (this.busy) {\n            //  繁忙状态下，不允许二次操作\n            console.warn('busy play');\n            return;\n        }\n        if (this.state !== 'finished') {\n            if (!this.hasTrackWaiting()) {\n                this.state = 'play';\n                this._doPlay();\n            }\n            else {\n                this.state = 'waitingToPlay';\n            }\n        }\n        else {\n            //重新开始播放\n            this.state = 'play';\n            this.seekTo(0);\n        }\n    }\n    setPlaySpeed(speed) {\n        this.ticker.rate = speed;\n        this.tracks.forEach(track => {\n            track.setPlaySpeed(speed);\n        });\n    }\n    setViewer(viewer) {\n        this.tracks.forEach((track) => track.setViewer(viewer));\n    }\n    /**\n     * 跳转track至time\n     * @param time\n     */\n    seekTo(time) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.busy)\n                return;\n            //时间范围不能超出录像时间范围\n            time = Math.min(Math.max(time, 0), this.endTimeStamp);\n            //  如果在下两个时钟周期内，那么这个跳转就丢弃\n            if (this.ticker.currTimeStamp < time && time < this.ticker.currTimeStamp + DEFAULT_INTERVAL * 2)\n                return;\n            if (time < this.ticker.currTimeStamp) {\n                // 往回退\n                if (this.state === 'finished') {\n                    this.state = 'pause';\n                }\n                this.busy = true;\n                this.ticker.setCurrentTime(time);\n                try {\n                    yield Promise.all(this.tracks.map(track => track.seekTo(time, false)));\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                this.busy = false;\n            }\n            else {\n                // 往前进\n                this.busy = true;\n                this.ticker.setCurrentTime(time);\n                try {\n                    yield Promise.all(this.tracks.map(track => track.seekTo(time, true)));\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                this.busy = false;\n            }\n            //seekTo前后，一些视频的启动，暂停状态可能有转换。下面根据timeline的状态重设所有Track的状态\n            if (this.state === 'play') {\n                this._doPlay();\n            }\n            else {\n                this._doPause();\n            }\n        });\n    }\n    _doPause() {\n        this.ticker.pause();\n        this.tracks.forEach((track) => track.pause());\n    }\n    /**\n     * ticker.play会开启ticker定时tick事件。白板Track依赖于tick事件更新\n     */\n    _doPlay() {\n        this.ticker.play();\n        this.tracks.forEach((track) => track.play());\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.ticker.destory();\n            yield Promise.all(this.tracks.map(track => track.destroy()));\n            this.eventNames().forEach(name => this.off(name));\n        });\n    }\n}\n/**\n * 返回多个track的起始时间戳\n * @param tracks\n */\nconst getMinTimeStamp = (tracks) => {\n    let minTimestamp = Number.POSITIVE_INFINITY;\n    tracks.forEach(track => {\n        if (minTimestamp > track.timestamp) {\n            minTimestamp = track.timestamp;\n        }\n    });\n    return minTimestamp;\n};\n/**\n * 返回多个track的结束时间戳\n * @param tracks\n */\nconst getMaxTimeStamp = (tracks) => {\n    let maxTimestamp = Number.NEGATIVE_INFINITY;\n    tracks.forEach(track => {\n        // 计算出轨道的结束时间戳\n        if (maxTimestamp < track.offsetEnd) {\n            maxTimestamp = track.offsetEnd;\n        }\n    });\n    return maxTimestamp;\n};\n/**\n * 获取track异步初始化Promise Array\n * @param tracks\n * @param minTimestamp\n */\nconst getInitQueue = (tracks, minTimestamp) => {\n    let isIPhone = /iphone/i.test(navigator.userAgent);\n    let pPipeline = Promise.resolve('got lucky ~');\n    // 判断是否是iPhone,如果是iPhone,video轨道需要一个一个的初始化\n    let readyQueue = tracks.map(track => {\n        // 计算开始时间\n        track.offsetBegin = track.timestamp - minTimestamp;\n        if (isIPhone) {\n            if (track.type === 'mp4' || track.type === 'flv' || track.type === 'aac') {\n                // 如果是视频轨道，需要一个接一个的初始化\n                let result = track.init(pPipeline);\n                pPipeline = result;\n                return result; // 提前返回\n            }\n        }\n        return track.init();\n    });\n    return readyQueue;\n};\n","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../node_modules/postcss-loader/src/index.js??postcss!./ToolUI.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../node_modules/postcss-loader/src/index.js??postcss!./ToolUI.less\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../node_modules/postcss-loader/src/index.js??postcss!./ToolUI.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { render, createRef } from 'preact';\n// Tell Babel to transform JSX into preact.h() calls:\n/** @jsx preact.h */\nimport { getTime } from './utils';\nimport PAUSE_BASE_64 from './assets/pause.svg';\nimport PLAY_BASE_64 from './assets/play.svg';\nimport './ToolUI.less';\nconst isPhone = /iphone|android/i.test(navigator.userAgent);\nexport default class ToolUI extends React.Component {\n    constructor(props) {\n        super(props);\n        this.toolUIEl = createRef();\n        this.onMouseMove = (e) => {\n            const { currentX, currentTime } = this.getCurrentXAndTime(e);\n            let [labelText] = getTime(currentTime);\n            this.setState({\n                labelLeft: currentX,\n                labelText: labelText,\n            });\n        };\n        this.pauseOrPlay = (e) => {\n            const { paused } = this.state;\n            if (paused) {\n                this.props.player.play();\n            }\n            else {\n                this.props.player.pause();\n            }\n            this.setState({ paused: !paused });\n        };\n        this.onMouseDown = (e) => {\n            let role = e.target.getAttribute('role');\n            if (role === 'slider') {\n                this.setState({\n                    showLabel: true,\n                    drag: true\n                });\n                this.onMouseMove(e);\n            }\n        };\n        this.onMouseUp = (e) => {\n            if (this.state.drag) {\n                this.seekTo(e);\n            }\n            this.hidePosition(e);\n        };\n        this.handleClickSpeed = (e) => {\n            this.setState({\n                speedOptionShow: !this.state.speedOptionShow\n            });\n        };\n        this.handleClickSpeedOption = (ev, speed) => {\n            ev.stopPropagation();\n            this.setState({\n                speedOptionShow: false\n            });\n            this.props.player.setPlaySpeed(speed);\n        };\n        this.showPosition = (e) => {\n            this.setState({\n                showLabel: true\n            });\n            this.onMouseMove(e);\n        };\n        this.hidePosition = (e) => {\n            this.setState({\n                showLabel: false\n            });\n        };\n        this.seekTo = (e) => {\n            let { currentX, currentTime } = this.getCurrentXAndTime(e);\n            this.props.player.seekTo(currentTime);\n            let updator = {\n                labelLeft: currentX,\n                time: currentTime,\n                drag: false,\n            };\n            // 如果是鼠标事件，不隐藏光标\n            if (isPhone) {\n                updator.showLabel = false;\n            }\n            this.setState(updator);\n        };\n        this.getCurrentXAndTime = (e) => {\n            let currentX = 0;\n            let left = this.toolUIEl.current.getBoundingClientRect().left;\n            if (e.type.search(/mouse|click/) > -1) {\n                currentX = e.clientX - left;\n            }\n            else {\n                currentX = e.touches[0].clientX - left;\n            }\n            let fullWidth = this.toolUIEl.current.offsetWidth;\n            // 防止越界\n            if (currentX < 0) {\n                currentX = 0;\n            }\n            if (currentX > fullWidth) {\n                currentX = fullWidth;\n            }\n            const currentTime = this.state.duration * (currentX / fullWidth);\n            return {\n                currentX,\n                currentTime\n            };\n        };\n        this.renderTimeline = (widthPercent) => {\n            const { showLabel, labelLeft, labelText, drag } = this.state;\n            return (React.createElement(\"div\", { ref: this.toolUIEl, className: 'player-timeline', onClick: this.seekTo, onMouseEnter: this.showPosition, onMouseLeave: this.hidePosition, onMouseDown: this.onMouseDown, onMouseMove: this.onMouseMove, onTouchStart: this.onMouseDown, onTouchMove: this.onMouseMove, onTouchEnd: this.onMouseUp, role: \"timeline\" },\n                React.createElement(\"span\", { role: \"currentLabel\", className: 'player-timeline-label', style: {\n                        display: showLabel ? 'inline-block' : 'none',\n                        left: `${labelLeft}px`\n                    } }, labelText),\n                React.createElement(\"span\", { role: \"label-background\", className: 'player-timeline-bg', style: {\n                        display: showLabel ? 'inline-block' : 'none',\n                        height: 20,\n                        left: `${labelLeft}px`\n                    } }),\n                React.createElement(\"div\", { role: \"blue-line\", className: 'player-timeline-blueline', style: {\n                        width: `${widthPercent + '%'}`\n                    } }),\n                React.createElement(\"div\", { role: \"slider\", className: 'player-timeline-slider', style: {\n                        left: `${drag ? labelLeft + 'px' : widthPercent + '%'}`,\n                        backgroundClip: `${drag ? 'border-box' : 'content-box'}`\n                    } })));\n        };\n        this.renderPlayOrPause = () => {\n            const { paused } = this.state;\n            return (React.createElement(\"div\", { className: 'player-play-icon-wrapper', role: \"icon\", onClick: this.pauseOrPlay },\n                React.createElement(\"span\", { className: 'player-play-icon', style: {\n                        backgroundImage: `url(${(paused ? PLAY_BASE_64 : PAUSE_BASE_64)})`\n                    } })));\n        };\n        const { player } = props;\n        this.state = {\n            time: player.timeline.ticker.currTimeStamp,\n            duration: player.timeline.endTimeStamp,\n            showLabel: false,\n            labelLeft: 0,\n            labelText: '',\n            paused: player.timeline.ticker.state === 'pause',\n            currSpeed: player.speed,\n            speedOptionShow: false,\n            drag: false\n        };\n        player.on('tick', (time) => {\n            this.setState({ time: time });\n        });\n        player.on('play', () => {\n            this.setState({ paused: false });\n        });\n        player.on('pause', () => {\n            this.setState({ paused: true });\n        });\n        player.on('speedChange', (speed) => {\n            this.setState({ currSpeed: speed });\n        });\n    }\n    renderSpeed() {\n        const speedText = this.state.currSpeed === 1 ? '倍数' : `${this.state.currSpeed}x`;\n        const speedArr = [2, 1.5, 1.25, 1, 0.75, 0.5];\n        return (React.createElement(\"div\", { className: 'player-speed', onClick: this.handleClickSpeed },\n            React.createElement(\"div\", { className: 'player-speed-text' }, speedText),\n            this.state.speedOptionShow && (React.createElement(\"div\", { className: 'player-speed-options' }, speedArr.map(speed => {\n                return (React.createElement(\"div\", { className: 'option', key: speed, onClick: (ev) => this.handleClickSpeedOption(ev, speed) },\n                    speed,\n                    \"x\"));\n            })))));\n    }\n    render(props, state) {\n        const { time, duration } = state;\n        let widthPercent = 0;\n        if (time >= duration) {\n            widthPercent = 100;\n        }\n        else if (time <= 0) {\n            widthPercent = 0;\n        }\n        else {\n            widthPercent = time / duration * 100;\n        }\n        let timeDuration;\n        if (time > duration) {\n            let [durationStr] = getTime(duration);\n            timeDuration = durationStr + '/' + durationStr;\n        }\n        else {\n            let [durationStr, durationHour] = getTime(duration);\n            let [currentStr] = getTime(time, durationHour > 0);\n            timeDuration = currentStr + '/' + durationStr;\n        }\n        return (React.createElement(\"div\", { className: \"player-container\" },\n            this.renderPlayOrPause(),\n            this.renderTimeline(widthPercent),\n            this.renderSpeed(),\n            React.createElement(\"div\", { role: \"duration\", className: 'player-duration' }, timeDuration)));\n    }\n}\nconst Nothing = () => null;\nexport function mount(dom, player) {\n    if (!dom) {\n        throw new Error('RecordPlayer mount传入的容器不能为空');\n    }\n    if (!player) {\n        throw new Error('请传入录制回放实例');\n    }\n    const root = render(React.createElement(ToolUI, { player: player }), dom);\n    function unmount() {\n        render(React.createElement(Nothing, null), dom, root);\n    }\n    return unmount;\n}\n","import { WActions, StateRelatedActions } from \"../../../src/core/Itypes\";\nimport * as ActionUtilsOld from '../../../src/core/ActionUtils.old';\nimport * as ActionUtils from '../../../src/core/ActionUtils';\nexport default class Record {\n    constructor(time, data, isCompatible) {\n        this.time = time;\n        this.isCompatible = isCompatible;\n        if (typeof data === 'string') {\n            this.data = data;\n            if (isCompatible) {\n                this.actions = ActionUtilsOld.unpackBulk(data);\n            }\n            else {\n                this.actions = ActionUtils.unpackBulk(data);\n            }\n        }\n        else {\n            this.data = '';\n            this.actions = data;\n        }\n        this.clearIndex = [];\n        this.isClearFrame = false;\n        this.updateIndex();\n    }\n    ;\n    updateIndex() {\n        this.clearIndex = this.actions.reduce((ret, action, curIndex) => {\n            if (action.TYPE === WActions.CLEAR) {\n                ret.push(curIndex);\n            }\n            return ret;\n        }, []);\n        this.isClearFrame = this.clearIndex.length !== 0;\n    }\n    getStateRelatedActions() {\n        return this.actions.filter(action => StateRelatedActions.indexOf(action.TYPE) > -1);\n    }\n    toStateRelatedRecord() {\n        return new Record(this.time, this.getStateRelatedActions(), this.isCompatible);\n    }\n}\n","/**\n * Track，轨道，代表音视频数据，或者白板数据。数据是一系列带时间戳的数组。\n * 音视频轨道由浏览器的<video />组件播放，白板由sdk控制播放。\n *\n * 音视频播放由video.play, video.pause控制。白板播放由ticktick发送tick事件，然后白板轨道根据此事件绘制截至到某个时间戳的所有动作。\n *\n * 音视频轨道数据量较大，不一定完全载入就会播放，播放过程中可能存在数据延时。白板播放过程中，可能会加载文档/图片，加载过程与音视频加载类似，也是异步过程。\n *\n * 在多人会议场景中，随着演讲人的切换，可能音视频的位置会变化，显示状态会变化。所以需要轨道将当前可见的音视频告诉开发者，开发者根据此信息调整容器位置\n * 当音视频/白板容器准备好之前，应该暂停音视频/白板的播放\n *\n *\n *\n *\n * Track有很多维度的状态\n * init:            Track还未抓取轨道数据\n * ready:           Track已抓取轨道metadata（如轨道长度等数据）\n * show / hide:     Track是否显示。默认为隐藏，需要开发者提供容器显示\n * play / pause:    是否正在播放。video有这个属性。白板的播放需要TickTick来主动调用，因此它永远处于pause状态\n * waitingForData:  是否正在等待数据。video track触发onwaiting时，需要等待track数据。onloadeddata触发时，waitingForData为false。\n *\n *\n * Track的几个方法：\n *\n * play/pause:      开始/暂停当前播放的Track。只对video，audio有效。白板永远处于暂停状态\n * seekTo:          跳转到目前位置。Track更新时间戳，且更新自己的状态\n * tick：           更新下一帧。video无需处理该函数，因为播放中的视频会自己调整自己的状态。白板Track需要更新自己的状态\n *\n * Track的几个事件：\n * notifyPause：\n * notifyPlay：\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from \"eventemitter3\";\nexport default class Track extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.offsetBegin = 0;\n        this.offsetEnd = 0;\n    }\n    get duration() {\n        return this.offsetEnd - this.offsetBegin;\n    }\n    playUtilBtwTimeAndReady(time) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.showTrack();\n        });\n    }\n    isWaiting(time) {\n        if (time < this.offsetBegin || time > this.offsetEnd) {\n            return false;\n        }\n        return false;\n    }\n    setViewer(viewer) { }\n    setPlaySpeed(speed) { }\n    showTrack() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.state = 'beforeshow';\n            yield new Promise(resolve => {\n                this.emit('visibleChange', 'show', this.params, (el) => {\n                    this.showTrackCb(el);\n                    resolve();\n                });\n            });\n            this.state = 'playing';\n            setTimeout(() => {\n                this.emit('showTrack');\n            });\n        });\n    }\n    hideTrack() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.state = 'beforefinish';\n            yield new Promise((resolve) => {\n                this.emit('visibleChange', 'hide', this.params, () => {\n                    this.hideTrackCb();\n                    resolve();\n                });\n            });\n            setTimeout(() => {\n                this.emit('hideTrack');\n            });\n            this.state = 'finished';\n        });\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._awaitTrackHandler();\n            if (this.state === 'playing') {\n                yield this.hideTrack();\n            }\n            this.eventNames().forEach(name => this.off(name));\n        });\n    }\n    update(time) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.seekTo(time, true, false);\n            //update是通过ticker.tick方法调用的。\n            //update后track应该处于播放状态\n            //timeline.play并不会启动ready状态的视频tag，也不应该启动ready状态的tag。\n            //因为一些ready状态的tag在play被调用时并不在时间范围内。\n            //所以需要在update时启动。\n            this.play();\n        });\n    }\n    seekTo(time, forward, jumpTo = true) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state === 'init' || this.state === 'error')\n                return;\n            yield this._awaitTrackHandler();\n            /**\n             * 时间没有到当前轨道开始时间，维持原状，不进行任何处理\n             */\n            if (time < this.offsetBegin) {\n                if (this.state === 'playing') {\n                    yield this.hideTrack();\n                }\n                return this.state = 'ready';\n            }\n            else if (time > this.offsetEnd) {\n                if (this.state === 'playing') {\n                    yield this.hideTrack();\n                }\n                return this.state = 'finished';\n            }\n            else {\n                if (this.state === 'ready' || this.state === 'finished') {\n                    yield this.showTrack();\n                }\n                this.state = 'playing';\n                yield this.doSetTrack(time, forward, jumpTo);\n            }\n        });\n    }\n    _awaitTrackHandler() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state === 'beforeshow') {\n                yield new Promise((resolve) => {\n                    this.once('showTrack', resolve);\n                });\n                this.state = 'playing';\n            }\n            if (this.state === 'beforefinish') {\n                yield new Promise((resolve) => {\n                    this.once('hideTrack', resolve);\n                });\n                this.state = 'finished';\n            }\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Track from './Track';\nexport default class VTrack extends Track {\n    // 2550102203-51349077821394-1567049495368-0.mp4\n    constructor(params) {\n        super();\n        this.params = params;\n        this.offsetBegin = 0;\n        this.offsetEnd = 0;\n        this.waitingForData = true;\n        const { type, url, timestamp } = params;\n        this.type = type;\n        this.timestamp = timestamp;\n        this.url = url;\n        this.state = 'init';\n        this.videoRef = document.createElement('video');\n        this.videoRef.oncanplay = () => {\n            this.waitingForData = false;\n            this.emit('canplay');\n        };\n        this.videoRef.onwaiting = () => {\n            this.waitingForData = true;\n            this.emit('waitingToPlay');\n        };\n    }\n    init(pipe) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (pipe) {\n                yield pipe;\n            }\n            console.log('init video track');\n            let result = yield new Promise((res) => {\n                const videoRef = this.videoRef;\n                videoRef.src = this.url;\n                setSpecialCheck(videoRef);\n                videoRef.preload = 'metadata';\n                videoRef.onloadeddata = (ev) => {\n                    let duration = videoRef.duration;\n                    if (duration !== duration) {\n                        duration = Number.NEGATIVE_INFINITY;\n                    }\n                    else {\n                        duration = duration * 1000;\n                    }\n                    this.offsetEnd = this.offsetBegin + duration;\n                    videoRef.pause();\n                    this.state = 'ready';\n                    console.log('init video ready');\n                    res('ready');\n                };\n                videoRef.onerror = (ev) => {\n                    console.error(ev);\n                    res('error');\n                };\n            });\n            return result;\n        });\n    }\n    doSetTrack(time, forward, jumpTo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (jumpTo) {\n                this.setVideoTime(time);\n            }\n        });\n    }\n    showTrackCb(dom) {\n        if (!dom)\n            return;\n        if (!findVideoRefInContainer(dom)) {\n            dom.appendChild(this.videoRef);\n        }\n    }\n    hideTrackCb() {\n        if (this.videoRef) {\n            this.videoRef.pause();\n        }\n    }\n    setPlaySpeed(speed) {\n        if (this.videoRef) {\n            this.videoRef.playbackRate = speed;\n        }\n    }\n    pause() {\n        if (this.videoRef) {\n            this.videoRef.pause();\n        }\n    }\n    play() {\n        if (this.videoRef && this.state === 'playing') {\n            this.videoRef.play();\n        }\n        else {\n            this.videoRef.pause();\n        }\n    }\n    setVideoTime(time) {\n        this.videoRef.currentTime = (time - this.offsetBegin) / 1000;\n    }\n    isWaiting(time) {\n        if (time < this.offsetBegin || time > this.offsetEnd) {\n            return false;\n        }\n        else {\n            return this.waitingForData;\n        }\n    }\n}\nconst setSpecialCheck = (el) => {\n    el.setAttribute('data-x-4wb', 'true');\n    el.setAttribute('playsinline', 'playsinline');\n    el.setAttribute('webkit-playsinline', 'webkit-playsinline');\n};\nconst specialCheck = (el) => el.getAttribute('data-x-4wb') === 'true';\nconst findVideoRefInContainer = (dom) => {\n    if (dom.children.length > 0) {\n        for (let i = 0, len = dom.children.length; i < len; i++) {\n            let el = dom.children[i];\n            if (el.tagName.toLowerCase() === 'video' && specialCheck(el)) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport Record from './Record';\nimport { CalibrateAction } from '../../../src/core/Actions';\nimport { WActions } from '../../../src/core/Itypes';\nimport WorkerManager from '../../../src/core';\nimport WTrack from './WhiteboardTrack';\n/**\n * 白板1.0， 2.0\n */\nexport default class V1V2Track extends WTrack {\n    constructor(params, opt) {\n        super(params, opt);\n        this.params = params;\n        this.drawManager = null;\n        this.records = [];\n    }\n    get isCompatible() {\n        return this.opt.version === '1.0';\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const [state, dataList] = yield this.fetchData();\n            console.log('init ', state, dataList);\n            if (state === 'error') {\n                this.state = 'error';\n                return 'error';\n            }\n            else {\n                let result = [];\n                if (this.isCompatible) {\n                    /**\n                     * 紧急修复：修复白板1.0由于缺少画布设置同步的命令，导致无法绘制的缺陷\n                     */\n                    result.push(new Record(10, '16:{\"mode\"¦\"draw\"，\"tool\"¦\"flag\"，\"size\"¦1，\"color\"¦\"#000000\"，\"fontsize\"¦24};', false));\n                    result.push(new Record(20, '16:{\"color\"¦\"#000\"};16:{\"size\"¦1};', false));\n                    result.push(new Record(30, '16:{\"ownerCanvasHeight\"¦1000，\"ownerCanvasWidth\"¦1300};', false));\n                }\n                dataList.forEach(data => {\n                    result.push(new Record(data.time, data.str, this.isCompatible));\n                });\n                if (this.isCompatible) {\n                    if (result.length) {\n                        optimizeOldRecordList(result);\n                    }\n                }\n                this.records = result;\n                this.state = 'ready';\n                return 'ready';\n            }\n        });\n    }\n    doSetTrack(time, forward, jumpTo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const nextRecordIndex = forward ? this.nextRecordIndex : 0;\n            if (nextRecordIndex === 0) {\n                console.warn('seek back', time, jumpTo, nextRecordIndex);\n            }\n            if (this.records.length && this.drawManager) {\n                let needSkipFirstCleanFrame = false; // 第一次的动作是否需要跳过\n                // 先取出中间所有的动作\n                let endIndex = findIndexBeyondTime(this.records, time, this.offsetBegin, nextRecordIndex);\n                let recordsToExecute = this.records.slice(nextRecordIndex, endIndex);\n                // 在执行前更新索引，防止executeAction出错后，卡死在这里\n                this.nextRecordIndex = endIndex;\n                if (jumpTo) {\n                    const res = mangleRecords(recordsToExecute);\n                    recordsToExecute = res.recordsToExecute;\n                    needSkipFirstCleanFrame = res.needSkipFirstCleanFrame;\n                }\n                if (recordsToExecute.length) {\n                    //等于0时，是向后seekTo，需要清空画布重新绘制\n                    if (nextRecordIndex === 0) {\n                        const { account } = this.params;\n                        this.drawManager.clear(account);\n                        this.drawManager.clearImage();\n                        this.drawManager.clearHtmlFile();\n                        this.drawManager.resetState();\n                    }\n                    executeActions(recordsToExecute, needSkipFirstCleanFrame, this.drawManager, this.params.account);\n                }\n                if (this.nextRecordIndex === this.records.length) {\n                    yield this.hideTrack();\n                }\n            }\n            else {\n                // 这个没有解析出轨道出来，那就直接结束\n                yield this.hideTrack();\n            }\n        });\n    }\n    showTrackCb(el) {\n        if (el && !this.drawManager) {\n            this.drawManager = new WorkerManager(el);\n        }\n    }\n}\nfunction optimizeOldRecordList(list) {\n    if (!list)\n        return [];\n    if (list.length === 0)\n        return list;\n    // 状态机标记位有，\n    let lastColor;\n    let lastTool = 'flag';\n    for (let i = 0, leng = list.length; i < leng; i++) {\n        let curRecord = list[i];\n        let actions = curRecord.actions;\n        for (let j = 0; j < actions.length;) {\n            let action = actions[j];\n            switch (action.TYPE) {\n                case WActions.CALIBRATE: {\n                    const { color } = action;\n                    if (color) {\n                        if (color === lastColor) {\n                            actions.splice(j, 1);\n                            continue;\n                        }\n                        else {\n                            lastColor = color;\n                        }\n                    }\n                    j++;\n                    continue;\n                }\n                case WActions.START: {\n                    if (lastTool === 'flag') {\n                        lastTool = 'free';\n                        console.log('deleted');\n                        actions.splice(j, 0, new CalibrateAction({ tool: 'free' }));\n                        ++j;\n                    }\n                    ++j;\n                    continue;\n                }\n                case WActions.LASER_PEN: {\n                    if (lastTool === 'free') {\n                        lastTool = 'flag';\n                        console.log('insert flage');\n                        actions.splice(j, 0, new CalibrateAction({ tool: 'flag' }));\n                        ++j;\n                    }\n                    ++j;\n                    continue;\n                }\n                case WActions.LASER_PEN_END: {\n                    ++j;\n                }\n                default: {\n                    ++j;\n                }\n            }\n        }\n    }\n    list.forEach(r => r.updateIndex());\n}\n/**\n * records按时间升序排列。\n * 从startIndex开始，寻找第一个时间大于time的Record的索引\n * 若records中时间都小于time，则返回records的长度\n * @param records\n * @param time\n * @param startIndex\n */\nfunction findIndexBeyondTime(records, time, offsetBeing, startIndex = 0) {\n    let endIndex = startIndex;\n    for (; endIndex < records.length; endIndex++) {\n        const record = records[endIndex];\n        if (record.time + offsetBeing > time) {\n            return endIndex;\n        }\n    }\n    return endIndex;\n}\nfunction mangleRecords(recordsToExecute) {\n    let needSkipFirstCleanFrame = false;\n    // 如果是快进的播放流程，需要对中间的动作进行处理\n    // 如果有关键帧,需要将关键帧之前的其他动作全部清除，只保留状态相关的动作\n    let lastClearFrameIndex = recordsToExecute.length;\n    while (lastClearFrameIndex--) {\n        let record = recordsToExecute[lastClearFrameIndex];\n        if (record.isClearFrame) {\n            break;\n        }\n    }\n    if (lastClearFrameIndex !== -1) {\n        //找到关键帧， 对关键帧之前的Record进行清洗\n        for (let i = 0; i < lastClearFrameIndex; i++) {\n            let recordToClean = recordsToExecute[i];\n            recordsToExecute[i] = recordToClean.toStateRelatedRecord();\n        }\n        needSkipFirstCleanFrame = true;\n        // 过滤掉没有任何数据的记录\n        recordsToExecute = recordsToExecute.filter(record => record.actions.length !== 0);\n    }\n    return {\n        needSkipFirstCleanFrame,\n        recordsToExecute\n    };\n}\nfunction executeActions(recordsToExecute, needSkipFirstCleanFrame, drawManager, account) {\n    var recordsToExecute_1, recordsToExecute_1_1;\n    var e_1, _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            try {\n                for (recordsToExecute_1 = __asyncValues(recordsToExecute); recordsToExecute_1_1 = yield recordsToExecute_1.next(), !recordsToExecute_1_1.done;) {\n                    let record = recordsToExecute_1_1.value;\n                    if (record.isClearFrame && needSkipFirstCleanFrame) {\n                        // 跳过其他的动作，直接执行到第一个清除\n                        let { actions, clearIndex } = record;\n                        yield drawManager.executeActions(account, actions.slice(clearIndex[0]));\n                        needSkipFirstCleanFrame = false;\n                    }\n                    else {\n                        yield drawManager.executeActions(account, record.actions);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (recordsToExecute_1_1 && !recordsToExecute_1_1.done && (_a = recordsToExecute_1.return)) yield _a.call(recordsToExecute_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport WTrack from './WhiteboardTrack';\nimport { App } from '../../core';\nimport EventEmitter from 'eventemitter3';\n/**\n * 白板3.0\n */\nexport default class V3Track extends WTrack {\n    constructor(params, opt) {\n        super(params, opt);\n        this.records = [];\n        this.connector = new Connector();\n        if (Array.isArray(params)) {\n            //白板3.0多个录像文件要合并到一起创建一个DrawManager来处理。\n            this.params = params[0];\n        }\n        const container = this.params['container'];\n        const drawPluginParams = this.params.drawPluginParams || {};\n        this.drawManager = new App(Object.assign(Object.assign({ account: this.viewer, container: container, connector: this.connector, isRecordPlayer: true, platform: 'web' }, drawPluginParams), { nim: {} }));\n        window.drawPlugin = this.drawManager;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const [state, listOfDataList] = yield this.fetchMultiData();\n            if (state === 'error') {\n                this.state = 'error';\n                return 'error';\n            }\n            else {\n                this.records = listOfDataList.map(dataList => {\n                    return Object.assign(Object.assign({}, dataList), { records: dataList.records.map(data => {\n                            return {\n                                record: JSON.parse(data.str),\n                                time: data.time\n                            };\n                        }) });\n                });\n                const accountSet = new Set();\n                this.records.forEach((data) => {\n                    data.records.forEach(res => {\n                        if (res.record.type === 'snapshot' && res.record.value.uid) {\n                            accountSet.add(res.record.value.uid);\n                        }\n                        if (res.record.type === 'snapshotArr' && Array.isArray(res.record.value) && res.record.value.length > 0) {\n                            if (res.record.value[0].uid) {\n                                accountSet.add(res.record.value[0].uid);\n                            }\n                        }\n                    });\n                });\n                this.viewerArr = Array.from(accountSet);\n                if (this.viewerArr.length > 0) {\n                    this.setViewer(this.viewerArr[0]);\n                }\n                this.state = 'ready';\n                return 'ready';\n            }\n        });\n    }\n    setViewer(viewer) {\n        var _a;\n        this.viewer = viewer;\n        (_a = this.drawManager) === null || _a === void 0 ? void 0 : _a.setViewer(viewer);\n    }\n    doSetTrack(time, forward, jumpTo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._seekTo(time);\n        });\n    }\n    /**\n     * 跳转到正确的channel对应的录像。如果cid发生变化，则使用addRecordData重置录像\n     * @param time\n     */\n    _seekTo(time) {\n        let recordListToPlay;\n        for (let i = 0; i < this.records.length - 1; i++) {\n            if (time < this.records[i + 1].beginAt) {\n                recordListToPlay = this.records[i];\n                break;\n            }\n        }\n        if (recordListToPlay === undefined) {\n            recordListToPlay = this.records[this.records.length - 1];\n        }\n        if (recordListToPlay.cid !== this.currCid) {\n            this.drawManager.addRecordData(recordListToPlay.records);\n        }\n        this.currCid = recordListToPlay.cid;\n        this.drawManager.seekTo(time - recordListToPlay.beginAt);\n    }\n    showTrackCb(el) {\n        // this.drawManager.addRecordData(this.records)\n    }\n}\nclass Connector extends EventEmitter {\n    sendData() { }\n    broadcastData() { }\n    sendSyncRequest() { }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Track from './Track';\nimport { pako } from '../../../src/core/utils';\nimport { ab2str, fetchBlob } from '../utils';\nexport default class WTrack extends Track {\n    constructor(params, opt) {\n        super();\n        this.params = params;\n        this.viewerArr = [];\n        this.urlArray = [];\n        this.type = 'gz';\n        this.offsetBegin = 0;\n        this.offsetEnd = 0;\n        let timestamp;\n        if (Array.isArray(params)) {\n            this.originalParams = params.slice();\n            timestamp = params[0].timestamp;\n            this.urlArray = params.map(param => param.url);\n        }\n        else {\n            this.originalParams = [params];\n            timestamp = params.timestamp;\n            this.url = params.url;\n        }\n        this.timestamp = timestamp;\n        this.opt = opt;\n        this.state = 'init';\n        this.nextRecordIndex = 0;\n        this.viewer = 'unknown';\n    }\n    /**\n     * 白板1.0，2.0版本的处理\n     */\n    fetchData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('init wb track ');\n            let blob;\n            try {\n                blob = yield fetchBlob(this.url);\n            }\n            catch (e) {\n                return ['error', []];\n            }\n            const rawRecordsList = yield this.getRawRecordFromBlob(blob);\n            if (rawRecordsList.length) {\n                this.offsetEnd = Math.max(this.offsetBegin + rawRecordsList[rawRecordsList.length - 1].time + 1000, this.offsetEnd);\n            }\n            return ['ready', rawRecordsList];\n        });\n    }\n    fetchMultiData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let blobArray = [];\n            try {\n                for (let i = 0; i < this.urlArray.length; i++) {\n                    blobArray[i] = yield fetchBlob(this.urlArray[i]);\n                }\n            }\n            catch (e) {\n                return ['error', []];\n            }\n            const listOfRawRecordList = yield Promise.all(blobArray.map((blob, index) => __awaiter(this, void 0, void 0, function* () {\n                //每一个录像文件得到一个rawRecordsList\n                const rawRecordsList = yield this.getRawRecordFromBlob(blob);\n                const params = this.originalParams[index];\n                const offsetBegin = params.timestamp - this.timestamp;\n                let endAt = 0;\n                if (rawRecordsList.length) {\n                    endAt = rawRecordsList[rawRecordsList.length - 1].time;\n                    this.offsetEnd = Math.max(offsetBegin + endAt + 1000, this.offsetEnd);\n                }\n                return {\n                    cid: params.cid,\n                    beginAt: offsetBegin,\n                    endAt: offsetBegin + endAt,\n                    records: rawRecordsList\n                };\n            })));\n            /**\n             * 将同一个channel的多个录像文件合并到一起\n             */\n            const rawDataByChannel = this.mergeRawDataByChannel(listOfRawRecordList);\n            /**\n             * 如果不同channel之间的时间有重叠，则返回error\n             */\n            if (this.isChannelOverlapping(rawDataByChannel)) {\n                return ['error', []];\n            }\n            return ['ready', rawDataByChannel];\n        });\n    }\n    getRawRecordFromBlob(blob) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rawRecordsList = yield new Promise((resolve) => {\n                let result = [];\n                let reader = new FileReader();\n                reader.readAsBinaryString(blob);\n                reader.onload = () => __awaiter(this, void 0, void 0, function* () {\n                    let rawBuffer = pako.ungzip(reader.result);\n                    let dv = new DataView(rawBuffer.buffer);\n                    let length = dv.byteLength;\n                    let current = 0;\n                    while (current < length) {\n                        let cLen = dv.getInt32(current, true);\n                        let time = dv.getInt32(current + 4, true);\n                        let contentLen = cLen - 8;\n                        let offset = current + 8;\n                        let subb = rawBuffer.slice(offset, offset + contentLen);\n                        // console.log(subb)\n                        let str = yield ab2str(subb);\n                        result.push({\n                            time: time,\n                            str: str\n                        });\n                        current = current + cLen;\n                    }\n                    //@ts-ignore\n                    dv = null; // window.rawstring = rawBuffer = null;\n                    resolve(result);\n                });\n            });\n            return rawRecordsList;\n        });\n    }\n    /**\n     * 将数据按照cid合并\n     */\n    mergeRawDataByChannel(listOfRawRecordList) {\n        const rawDataByCid = {};\n        for (let i = 0; i < listOfRawRecordList.length; i++) {\n            const rawData = listOfRawRecordList[i];\n            if (rawDataByCid.hasOwnProperty(rawData.cid)) {\n                //合并\n                const oldRawData = rawDataByCid[rawData.cid];\n                rawDataByCid[rawData.cid] = {\n                    cid: rawData.cid,\n                    beginAt: Math.min(oldRawData.beginAt, rawData.beginAt),\n                    endAt: Math.max(oldRawData.endAt, rawData.endAt),\n                    records: oldRawData.records.concat(rawData.records)\n                };\n            }\n            else {\n                rawDataByCid[rawData.cid] = rawData;\n            }\n        }\n        const result = [];\n        for (let cid in rawDataByCid) {\n            rawDataByCid[cid].records = rawDataByCid[cid].records.sort((a, b) => {\n                return a.time - b.time;\n            });\n            result.push(rawDataByCid[cid]);\n        }\n        return result;\n    }\n    /**\n     * 不同cid的录像时间之间是否存在重叠区域\n     */\n    isChannelOverlapping(listOfRawRecordList) {\n        const listSortByBeginAt = listOfRawRecordList.sort((a, b) => {\n            return a.beginAt - b.beginAt;\n        });\n        for (let i = 0; i < listSortByBeginAt.length - 1; i++) {\n            const first = listSortByBeginAt[i];\n            const second = listSortByBeginAt[i + 1];\n            if (first.endAt > second.beginAt) {\n                console.error(`\nchannel:${first.cid}与channel:${second.cid}之间的时间存在重叠区域，\nchannel:${first.cid}的开始结束时间为: ${this.formatTimeOffset(first.beginAt)}-${this.formatTimeOffset(first.endAt)},\nchannel:${second.cid}的开始结束时间为: ${this.formatTimeOffset(second.beginAt)}-${this.formatTimeOffset(second.endAt)}\n        `);\n                return true;\n            }\n        }\n        return false;\n    }\n    formatTimeOffset(offset) {\n        return new Date(offset + this.timestamp).toLocaleString();\n    }\n    hideTrackCb() { }\n    pause() { }\n    play() { }\n}\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTUxOTYxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5MDgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU5Ljk0NzkyOTA5IDEzMy45MjE4OTNoMTI2LjAyNjAzNDgxYzIzLjMzODE1NDczIDAgNDIuMDA4Njc4MjcgMTguNjcwNTIzNTMgNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZ2NjcyLjEzODg1NzQ4YzAgMjMuMzM4MTU0NzMtMTguNjcwNTIzNTMgNDIuMDA4Njc4MjctNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZIMjU5Ljk0NzkyOTA5Yy0yMy4zMzgxNTQ3MyAwLTQyLjAwODY3ODI3LTE4LjY3MDUyMzUzLTQyLjAwODY3OTU2LTQyLjAwODY3ODI2VjE3NS45MzA1NzEyNmMwLTIzLjMzODE1NDczIDE4LjY3MDUyMzUzLTQyLjAwODY3ODI3IDQyLjAwODY3OTU2LTQyLjAwODY3ODI2ek02MzguMDI2MDM2MSAxMzMuOTIxODkzaDEyNi4wMjYwMzQ4MWMyMy4zMzgxNTQ3MyAwIDQyLjAwODY3ODI3IDE4LjY3MDUyMzUzIDQyLjAwODY3OTU2IDQyLjAwODY3ODI2djY3Mi4xMzg4NTc0OGMwIDIzLjMzODE1NDczLTE4LjY3MDUyMzUzIDQyLjAwODY3ODI3LTQyLjAwODY3OTU2IDQyLjAwODY3ODI2aC0xMjYuMDI2MDM0ODFjLTIzLjMzODE1NDczIDAtNDIuMDA4Njc4MjctMTguNjcwNTIzNTMtNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZWMTc1LjkzMDU3MTI2YzAtMjMuMzM4MTU0NzMgMTguNjcwNTIzNTMtNDIuMDA4Njc4MjcgNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZ6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyOTA5Ij48L3BhdGg+PC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTI0MjE2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIxMzEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNOTEyLjcyNDg4NCA0MjkuMzU1NjgxTDIwOC43OTc1NDUgMTMuMTk4NjM4QzE1MS42MDM0NDktMjAuNTk3ODc0IDY0LjAxMjQ5IDEyLjE5ODc0MSA2NC4wMTI0OSA5NS43OTAxMTJWOTI3LjkwNDIxOWMwIDc0Ljk5MjI1OSA4MS4zOTE1OTkgMTIwLjE4NzU5NCAxNDQuNzg1MDU1IDgyLjU5MTQ3NWw3MDMuOTI3MzM5LTQxNS45NTcwNjRjNjIuNzkzNTE4LTM2Ljk5NjE4MSA2Mi45OTM0OTgtMTI4LjE4Njc2OCAwLTE2NS4xODI5NDl6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyMTMyIj48L3BhdGg+PC9zdmc+\"","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from 'eventemitter3';\nimport Timeline from './Timeline';\nimport { mount } from './ToolUI';\nimport VTrack from './Track/VideoTrack';\nimport V1V2Track from './Track/Wb_V1V2';\nimport V3Track from './Track/Wb_V3';\nimport { parseUrl } from './utils';\nclass RecordPlayer extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.speed = 1;\n        this.init = (opt) => {\n            let tracks = [];\n            let v3TrackFileObjs = [];\n            opt.videoTracks.forEach(fileObj => {\n                tracks.push(new VTrack(fileObj));\n            });\n            opt.whiteboardTracks.forEach(fileObj => {\n                if (opt.version === '1.0' || opt.version === '2.0') {\n                    //白板1.0，2.0版本的录像文件\n                    tracks.push(new V1V2Track(fileObj, {\n                        version: opt.version\n                    }));\n                }\n                else {\n                    //白板3.0版本的录像文件\n                    v3TrackFileObjs.push(fileObj);\n                }\n            });\n            let drawPlugin = undefined;\n            if (v3TrackFileObjs.length > 0) {\n                const wbTrack = new V3Track(v3TrackFileObjs, {\n                    version: opt.version\n                });\n                tracks.push(wbTrack);\n                drawPlugin = wbTrack.drawManager;\n            }\n            this.timeline = new Timeline(tracks);\n            this.timeline.on('tick', (time) => this.emit('tick', time));\n            this.timeline.on('pause', () => this.emit('pause'));\n            this.timeline.on('play', () => this.emit('play'));\n            this.timeline.on('finished', () => { this.emit('finished'); });\n            this.timeline.on('visibleChange', (type, option, callback) => {\n                this._visibleChangeCallHandler(type, option, callback);\n                this.emit('visibleChange', type, option);\n            });\n            const player = this;\n            return new Promise((res, rej) => {\n                this.timeline.once('ready', (params) => {\n                    res({\n                        player,\n                        params,\n                        drawPlugin\n                    });\n                });\n                this.timeline.once('error', err => {\n                    rej(err);\n                });\n            });\n        };\n        this._visibleChangeCallHandler = (type, option, callback) => {\n            if (type === 'show') {\n                // 展示白板\n                const dom = option.container;\n                // 开发者可以在这个时候展示白板容器区域，完成后，将dom传入callback\n                callback(dom);\n            }\n            else {\n                // 开发者可以在这个时候隐藏白板容器区域，完成后，调用callback回调\n                callback();\n            }\n        };\n    }\n    static getInstance(opt) {\n        const whiteboardParams = opt.whiteboardParams.urlArr\n            .map((url) => {\n            const params = parseUrl(url);\n            if (params && opt.whiteboardParams.timestamp) {\n                params.timestamp = opt.whiteboardParams.timestamp;\n            }\n            if (!params.timestamp) {\n                throw new Error(`replay--> 无法获取白板录像文件的开始时间, 请仔细检查你的参数`);\n            }\n            if (!opt.whiteboardParams.container) {\n                throw new Error('replay--> 白板容器不可用，请仔细检查你的参数');\n            }\n            params.container = opt.whiteboardParams.container;\n            params.drawPluginParams = opt.whiteboardParams.drawPluginParams;\n            return params;\n        })\n            .filter(param => param);\n        let videoParams;\n        if (!opt.videoParams) {\n            videoParams = [];\n        }\n        else {\n            videoParams = opt.videoParams.map((opt, index) => {\n                const params = parseUrl(opt.url);\n                if (params && opt.timestamp) {\n                    params.timestamp = opt.timestamp;\n                }\n                if (!params.timestamp) {\n                    throw new Error(`replay--> 无法获取第${index + 1}个视频录像的开始时间, 请仔细检查你的参数`);\n                }\n                if (!opt.container) {\n                    console.error(`replay--> 第${index + 1}个录像文件的容器为空，请仔细检查你的参数`);\n                }\n                params.container = opt.container;\n                return params;\n            });\n        }\n        if (LOG) {\n            console.log('replay--> 录像回放参数为', whiteboardParams, videoParams, opt.version);\n        }\n        const player = new RecordPlayer();\n        if (DEV) {\n            window.player = player;\n        }\n        return player.init({\n            whiteboardTracks: whiteboardParams,\n            videoTracks: videoParams,\n            version: opt.version || '3.0' // 是否是兼容模式，对于老版本的录制文件，需要做不同的解析\n        });\n    }\n    bindControlContainer(div) {\n        if (typeof this.unmount === 'function') {\n            this.unmount();\n        }\n        this.unmount = mount(div, this);\n    }\n    setPlaySpeed(speed) {\n        if (speed <= 0.1 || speed >= 100) {\n            throw new Error('播放速度不能大于100，或者小于0.1');\n        }\n        else {\n            if (this.timeline) {\n                this.timeline.setPlaySpeed(speed);\n                this.speed = speed;\n                this.emit('speedChange', speed);\n            }\n        }\n    }\n    setViewer(viewer) {\n        if (this.timeline) {\n            this.timeline.setViewer(viewer);\n        }\n    }\n    play() {\n        if (this.timeline) {\n            return this.timeline.play();\n        }\n    }\n    pause() {\n        if (this.timeline) {\n            return this.timeline.pause();\n        }\n    }\n    seekTo(time) {\n        if (this.timeline) {\n            this.timeline.seekTo(time);\n        }\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.timeline) {\n                yield this.timeline.destroy();\n            }\n            if (typeof this.unmount === 'function') {\n                this.unmount();\n                this.unmount = undefined;\n            }\n            delete this.timeline;\n            this.eventNames().forEach(name => this.off(name));\n        });\n    }\n}\nexport default RecordPlayer;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const RECORD_FILE = /(\\d+)-(\\d+)-(\\d+)-(\\d+)(-mixed)?\\.(mp4|aac|flv|gz)$/i;\nexport function parseUrl(url) {\n    let match = RECORD_FILE.exec(url || '');\n    if (match) {\n        return {\n            uid: match[1],\n            cid: match[2],\n            timestamp: parseInt(match[3]),\n            chunk: parseInt(match[4]),\n            type: match[6],\n            url\n        };\n    }\n    else {\n        const lastIndexOfDot = url.lastIndexOf('.');\n        return {\n            url,\n            type: url.slice(lastIndexOfDot + 1)\n        };\n    }\n}\nexport const getID = () => ~~(Math.random() * 10000);\nlet textDecoder;\nif (typeof window.TextEncoder === 'function') {\n    textDecoder = new window.TextDecoder(\"utf-8\");\n}\nexport function ab2str(buf) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (textDecoder) {\n            return textDecoder.decode(buf);\n        }\n        else {\n            return yield new Promise((resolve, reject) => {\n                let fileReader = new FileReader();\n                fileReader.onload = () => {\n                    resolve(fileReader.result);\n                };\n                fileReader.onerror = reject;\n                fileReader.readAsText(new Blob([new Uint8Array(buf)]));\n            });\n        }\n    });\n}\nexport const fetchBlob = (url) => {\n    return new Promise((resolve, reject) => {\n        let xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n        xhr.responseType = 'blob';\n        xhr.onload = () => {\n            resolve(xhr.response);\n        };\n        xhr.onerror = reject;\n        xhr.send();\n    });\n};\nconst p0 = (n) => n < 10 ? '0' + n : '' + n;\nexport const getTime = (n, showHour = false) => {\n    n = ~~(n / 1000);\n    let second = n % 60;\n    n -= second;\n    n = ~~(n / 60); // 有多少分钟\n    let minute = (n % 60); // \n    let hour = ~~(n / 60);\n    if (hour === 0 && showHour === false) {\n        return [`${p0(minute)}:${p0(second)}`, hour];\n    }\n    return [`${hour}:${p0(minute)}:${p0(second)}`, hour];\n};\n","// schema = { // 登录参数规则\n//     appKey: {\n//       type: 'string',\n//       isRequire: true\n//     },\n//     account: {\n//       type: 'string',\n//       isRequire: true\n//     },\n//     token: {\n//       type: 'string',\n//       isRequire: true\n//     },\n//     record: {\n//       type: 'boolean',\n//       defaultValue: false\n//     },\n//     channelName: {\n//       type: 'string|number',\n//       isRequire: true\n//     },\n//     platform: {\n//       type: 'string',\n//       isRequire: true,\n//       enum: PlatformArray\n//     }\n//   }\n// validate(schema)\n// ===>>\n// [{key, message}]\nexport default {\n    isUndefined(value) {\n        return typeof value === 'undefined';\n    },\n    isDOM(value) {\n        if (typeof HTMLElement === 'object') {\n            return value instanceof HTMLElement;\n        }\n        return value && typeof value === 'object' && value.nodeType === 1 && typeof value.nodeName === 'string';\n    },\n    isValidString(value) {\n        return Object.prototype.toString.call(value) === '[object String]';\n    },\n    isBoolean(value) {\n        return typeof value === 'boolean';\n    },\n    isFunction(value) {\n        return typeof value === 'function';\n    },\n    isNumber(value) {\n        return typeof value === 'number';\n    },\n    isValidArray(value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n    },\n    isValidHexColor(value) {\n        return /^#[0-9abcdef]{6}$/gi.test(value);\n    },\n    isObject(value) {\n        return typeof value === 'object';\n    },\n    isValidObject(value) {\n        if (typeof value !== 'object') {\n            return false;\n        }\n        value = Object.assign({}, value);\n        if (Object.keys && Object.keys(value).length === 0) {\n            return false;\n        }\n        try {\n            return JSON.stringify(value) !== '{}';\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    // 检查参数\n    // data 检查的对象，rule 对象键值规则，skipKey 需要跳过的键，resObj 通过检查的赋值对象\n    /* rule 例：\n    {\n      account: {\n        type: 'string', // dom string boolean function number string|number\n        isRequire: true\n      }\n     }\n     */\n    validate(position, data, ruleObj) {\n        let validateErrors = [];\n        Object.keys(ruleObj).map((key) => {\n            const rule = ruleObj[key];\n            let dataValue = data[key];\n            if (this.isUndefined(dataValue)) {\n                /**\n                 * 值空缺\n                 */\n                if (rule.isRequire) {\n                    validateErrors.push({\n                        key: key,\n                        message: `${key} is required`\n                    });\n                }\n            }\n            else {\n                /**\n                 * 检查类型\n                 */\n                switch (rule.type.toLowerCase()) {\n                    case 'dom':\n                        if (!this.isDOM(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected dom, but get other type`\n                            });\n                        }\n                        break;\n                    case 'string':\n                        if (!this.isValidString(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected string, but get other type`\n                            });\n                        }\n                        break;\n                    case 'boolean':\n                        if (!this.isBoolean(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected boolean, but get other type`\n                            });\n                        }\n                        break;\n                    case 'function':\n                        if (!this.isFunction(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected function, but get other type`\n                            });\n                        }\n                        break;\n                    case 'number':\n                        if (!this.isNumber(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected number, but get other type`\n                            });\n                        }\n                        break;\n                    case 'object':\n                        if (!this.isObject(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected object, but get other type`\n                            });\n                        }\n                        break;\n                    case 'array':\n                        if (!this.isValidArray(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected array, but get other type`\n                            });\n                        }\n                        break;\n                    default:\n                        validateErrors.push({\n                            key: key,\n                            message: `${key}的类型未知: ${rule.type.toLowerCase()}`\n                        });\n                }\n                /**\n                 * 检查是否为枚举之一\n                 */\n                if (rule.enum && !rule.enum.includes(dataValue)) {\n                    validateErrors.push({\n                        key,\n                        message: `Expected ${key} to be one of ${JSON.stringify(rule.enum)}, but it is not`\n                    });\n                }\n            }\n        });\n        if (validateErrors.length > 0) {\n            console.error('白板-->', `${position}参数异常`);\n            console.error('白板-->', '错误信息：', validateErrors);\n            console.error('白板-->', '参数为：', data);\n        }\n        return validateErrors.length === 0;\n    }\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/number/is-integer\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/set\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n","module.exports = require(\"regenerator-runtime\");\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nrequire('../modules/es7.map.of');\nrequire('../modules/es7.map.from');\nmodule.exports = require('../modules/_core').Map;\n","require('../../modules/es6.number.is-integer');\nmodule.exports = require('../../modules/_core').Number.isInteger;\n","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D) {\n  return $Object.defineProperties(T, D);\n};\n","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nrequire('../modules/es7.set.of');\nrequire('../modules/es7.set.from');\nmodule.exports = require('../modules/_core').Set;\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","module.exports = function () { /* empty */ };\n","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar meta = require('./_meta');\nvar fails = require('./_fails');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar setToStringTag = require('./_set-to-string-tag');\nvar dP = require('./_object-dp').f;\nvar each = require('./_array-methods')(0);\nvar DESCRIPTORS = require('./_descriptors');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n","var core = module.exports = { version: '2.6.11' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","module.exports = true;\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = {}.propertyIsEnumerable;\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n","module.exports = require('./_hide');\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","exports.f = require('./_wks');\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toObject = require('./_to-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $GOPS = require('./_object-gops');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\nrequire('./_set-collection-from')('Set');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\nrequire('./_set-collection-of')('Set');\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Set', { toJSON: require('./_collection-to-json')('Set') });\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".whiteboard-toast {\\n    display: none;\\n    position: fixed;\\n    left: 50%;\\n    transform: translate(-50%);\\n    top: 200px;\\n    padding: 8px 15px;\\n    margin-bottom: 20px;\\n    border: 1px solid transparent;\\n    border-radius: 4px;\\n    color: #3c763d;\\n    background-color: #dff0d8;\\n    border-color: #d6e9c6;\\n    z-index: 100;\\n}\", \"\"]);\n\n","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".text-toolbar {\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    justify-content: space-around;\\n\\n    position: absolute;\\n\\n    box-sizing: border-box;\\n    height: 48px;\\n    margin: 12px 12px 24px;\\n\\n    -webkit-user-select: none;\\n\\n       -moz-user-select: none;\\n\\n        -ms-user-select: none;\\n\\n            user-select: none;\\n    background-color: white;\\n    border-radius: 4px;\\n    box-shadow: 0 8px 24px -4px rgba(0,0,0,0.1);\\n\\n    z-index: 7;\\n}\\n\\n    .text-toolbar .flex-cell {\\n        display: flex;\\n        flex: 1;\\n        justify-content: center;\\n        align-items: center;\\n        cursor: pointer;\\n        border: none;\\n        width: 40px;\\n        height: 40px;\\n    }\\n\\n    .text-toolbar .color {\\n        border-radius: 12px;\\n    }\\n\\n    .text-toolbar .color span {\\n            width: 18px;\\n            height: 18px;\\n            border-radius: 9px;\\n        }\\n\\n    .text-toolbar .fontsize.input {\\n        height: 24px;\\n        vertical-align: top;\\n        box-sizing: border-box;\\n        width: 40px;\\n        outline: none;\\n        border: 1px solid rgba(0, 0, 0, 0.3);\\n        margin: 0 6px 0 8px;\\n        text-align: center;\\n    }\\n\\n    .text-toolbar .fontsize.inc, .text-toolbar .fontsize.dec {\\n        border-radius: 12px;\\n        font-size: 32px;\\n        line-height: 24px;\\n        text-align: center;\\n        vertical-align: top;\\n        position: relative;\\n        top: -3px;\\n    }\\n\\n    .text-toolbar .platte-container {\\n        position: absolute;\\n        display: none;\\n        flex-direction: row;\\n        flex-wrap: wrap;\\n\\n        align-items: center;\\n        justify-content: space-around;\\n        box-shadow: 0 8px 24px -4px rgba(0,0,0,0.1);\\n\\n        bottom: 56px;\\n        right: 0;\\n        background-color: white;\\n        width: 100%;\\n    }\\n\\n    .text-toolbar .platte-container .color-cell {\\n            width: 20px;\\n            height: 20px;\\n            border-radius: 10px;\\n            margin: 10px;\\n            display: inline-block;\\n            box-sizing: border-box\\n        }\\n\\n    .text-toolbar .platte-container .color-cell:hover {\\n                cursor: pointer;\\n            }\", \"\"]);\n\n","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".player-container {\\n    display: block;\\n    position: relative;\\n    height: 30px;\\n    background: rgba(113, 113, 113, 0.23);\\n    -webkit-user-select: none;\\n       -moz-user-select: none;\\n        -ms-user-select: none;\\n            user-select: none;\\n    display: flex;\\n}\\n\\n    .player-container .player-play-icon-wrapper {\\n        cursor: pointer;\\n        position: relative;\\n        width: 20px;\\n        height: 20px;\\n        padding: 5px;\\n    }\\n\\n    .player-container .player-play-icon-wrapper .player-play-icon {\\n            display:inline-block;\\n            height:inherit;\\n            width:inherit;\\n            background-size:cover;\\n        }\\n\\n    .player-container .player-speed {\\n        padding: 5px;\\n        height: 20px;\\n        font-size: 14px;\\n        font-family: sans-serif;\\n        cursor: pointer;\\n    }\\n\\n    .player-container .player-speed .player-speed-text {\\n            text-align: center;\\n        }\\n\\n    .player-container .player-speed .player-speed-options {\\n            position: absolute;\\n            bottom: 27px;\\n            background: rgba(0,0,0,.8);\\n            padding: 0 10px;\\n            color: white;\\n            text-align: center;\\n        }\\n\\n    .player-container .player-speed .player-speed-options .option {\\n                margin: 10px 0;\\n            }\\n\\n    .player-container .player-duration {\\n        height:20px;\\n        font-size:14px;\\n        font-family:sans-serif;\\n        padding: 5px;\\n    }\\n\\n    .player-container .player-timeline {\\n        flex: 1;\\n        height: 6px;\\n        cursor: pointer;\\n        background: rgba(0,0,0,0.12);\\n        margin: 12px 5px;\\n        position: relative;\\n    }\\n\\n    .player-container .player-timeline-label {\\n        position: absolute;\\n        height: 20px;\\n        background: white;\\n        border-radius: 3px;\\n        bottom: 10px;\\n        padding: 4px 6px;\\n        transform: translateX(-50%);\\n    }\\n\\n    .player-container .player-timeline-bg {\\n        position: absolute;\\n        height: 20px;\\n        background: 'white';\\n        width: 2px;\\n        bottom: -5px;\\n        pointer-events: none;\\n    }\\n\\n    .player-container .player-timeline-blueline {\\n        position: absolute;\\n        background: rgba(24, 121, 226, 0.7);\\n        height: inherit;\\n        pointer-events: none;\\n    }\\n\\n    .player-container .player-timeline-slider {\\n        position: absolute;\\n        top: -5px;\\n        bottom: -5px;\\n        background: white;\\n        box-sizing: content-box;\\n        padding:0 4px;\\n        width: 4px;\\n        transform:translateX(-6px);\\n    }\", \"\"]);\n\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.format(...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.replace(/\\s*\\n\\s*/g, ' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","!function(e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).EventEmitter3=e()}(function(){return function i(s,f,c){function u(t,e){if(!f[t]){if(!s[t]){var n=\"function\"==typeof require&&require;if(!e&&n)return n(t,!0);if(a)return a(t,!0);var r=new Error(\"Cannot find module '\"+t+\"'\");throw r.code=\"MODULE_NOT_FOUND\",r}var o=f[t]={exports:{}};s[t][0].call(o.exports,function(e){return u(s[t][1][e]||e)},o,o.exports,i,s,f,c)}return f[t].exports}for(var a=\"function\"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){\"use strict\";var r=Object.prototype.hasOwnProperty,v=\"~\";function o(){}function f(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,n,r,o){if(\"function\"!=typeof n)throw new TypeError(\"The listener must be a function\");var i=new f(n,r||e,o),s=v?v+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],i]:e._events[s].push(i):(e._events[s]=i,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(v=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(v?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=v?v+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,i=new Array(o);r<o;r++)i[r]=n[r].fn;return i},s.prototype.listenerCount=function(e){var t=v?v+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,r,o,i){var s=v?v+e:e;if(!this._events[s])return!1;var f,c=this._events[s],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,i),!0}for(p=1,f=new Array(u-1);p<u;p++)f[p-1]=arguments[p];c.fn.apply(c.context,f)}else for(var a,l=c.length,p=0;p<l;p++)switch(c[p].once&&this.removeListener(e,c[p].fn,void 0,!0),u){case 1:c[p].fn.call(c[p].context);break;case 2:c[p].fn.call(c[p].context,t);break;case 3:c[p].fn.call(c[p].context,t,n);break;case 4:c[p].fn.call(c[p].context,t,n,r);break;default:if(!f)for(a=1,f=new Array(u-1);a<u;a++)f[a-1]=arguments[a];c[p].fn.apply(c[p].context,f)}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,r){var o=v?v+e:e;if(!this._events[o])return this;if(!t)return u(this,o),this;var i=this._events[o];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||u(this,o);else{for(var s=0,f=[],c=i.length;s<c;s++)(i[s].fn!==t||r&&!i[s].once||n&&i[s].context!==n)&&f.push(i[s]);f.length?this._events[o]=1===f.length?f[0]:f:u(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=v?v+e:e,this._events[t]&&u(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=v,s.EventEmitter=s,void 0!==t&&(t.exports=s)},{}]},{},[1])(1)});","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n",";(function(root) {\n  'use strict';\n\n  function isBase64(v, opts) {\n    if (v instanceof Boolean || typeof v === 'boolean') {\n      return false\n    }\n\n    if (!(opts instanceof Object)) {\n      opts = {}\n    }\n\n    if (opts.allowEmpty === false && v === '') {\n      return false\n    }\n\n    var regex = '(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?'\n    var mimeRegex = '(data:\\\\w+\\\\/[a-zA-Z\\\\+\\\\-\\\\.]+;base64,)'\n\n    if (opts.mimeRequired === true) {\n      regex =  mimeRegex + regex\n    } else if (opts.allowMime === true) {\n      regex = mimeRegex + '?' + regex\n    }\n\n    if (opts.paddingRequired === false) {\n      regex = '(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}(==)?|[A-Za-z0-9+\\\\/]{3}=?)?'\n    }\n\n    return (new RegExp('^' + regex + '$', 'gi')).test(v)\n  }\n\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = isBase64\n    }\n    exports.isBase64 = isBase64\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return isBase64\n    })\n  } else {\n    root.isBase64 = isBase64\n  }\n})(this);\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).pako=t()}}(function(){return function r(s,o,l){function h(e,t){if(!o[e]){if(!s[e]){var a=\"function\"==typeof require&&require;if(!t&&a)return a(e,!0);if(d)return d(e,!0);var i=new Error(\"Cannot find module '\"+e+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var n=o[e]={exports:{}};s[e][0].call(n.exports,function(t){return h(s[e][1][t]||t)},n,n.exports,r,s,o,l)}return o[e].exports}for(var d=\"function\"==typeof require&&require,t=0;t<l.length;t++)h(l[t]);return h}({1:[function(t,e,a){\"use strict\";var s=t(\"./zlib/deflate\"),o=t(\"./utils/common\"),l=t(\"./utils/strings\"),n=t(\"./zlib/messages\"),r=t(\"./zlib/zstream\"),h=Object.prototype.toString,d=0,f=-1,_=0,u=8;function c(t){if(!(this instanceof c))return new c(t);this.options=o.assign({level:f,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:\"\"},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==d)throw new Error(n[a]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i=\"string\"==typeof e.dictionary?l.string2buf(e.dictionary):\"[object ArrayBuffer]\"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(a=s.deflateSetDictionary(this.strm,i))!==d)throw new Error(n[a]);this._dict_set=!0}}function i(t,e){var a=new c(e);if(a.push(t,!0),a.err)throw a.msg||n[a.err];return a.result}c.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,\"string\"==typeof t?n.input=l.string2buf(t):\"[object ArrayBuffer]\"===h.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(r),n.next_out=0,n.avail_out=r),1!==(a=s.deflate(n,i))&&a!==d)return this.onEnd(a),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||(\"string\"===this.options.to?this.onData(l.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==a);return 4===i?(a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===d):2!==i||(this.onEnd(d),!(n.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===d&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=c,a.deflate=i,a.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},a.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{\"./utils/common\":3,\"./utils/strings\":4,\"./zlib/deflate\":8,\"./zlib/messages\":13,\"./zlib/zstream\":15}],2:[function(t,e,a){\"use strict\";var f=t(\"./zlib/inflate\"),_=t(\"./utils/common\"),u=t(\"./utils/strings\"),c=t(\"./zlib/constants\"),i=t(\"./zlib/messages\"),n=t(\"./zlib/zstream\"),r=t(\"./zlib/gzheader\"),b=Object.prototype.toString;function s(t){if(!(this instanceof s))return new s(t);this.options=_.assign({chunkSize:16384,windowBits:0,to:\"\"},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var a=f.inflateInit2(this.strm,e.windowBits);if(a!==c.Z_OK)throw new Error(i[a]);if(this.header=new r,f.inflateGetHeader(this.strm,this.header),e.dictionary&&(\"string\"==typeof e.dictionary?e.dictionary=u.string2buf(e.dictionary):\"[object ArrayBuffer]\"===b.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=f.inflateSetDictionary(this.strm,e.dictionary))!==c.Z_OK))throw new Error(i[a])}function o(t,e){var a=new s(e);if(a.push(t,!0),a.err)throw a.msg||i[a.err];return a.result}s.prototype.push=function(t,e){var a,i,n,r,s,o=this.strm,l=this.options.chunkSize,h=this.options.dictionary,d=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?c.Z_FINISH:c.Z_NO_FLUSH,\"string\"==typeof t?o.input=u.binstring2buf(t):\"[object ArrayBuffer]\"===b.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new _.Buf8(l),o.next_out=0,o.avail_out=l),(a=f.inflate(o,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&h&&(a=f.inflateSetDictionary(this.strm,h)),a===c.Z_BUF_ERROR&&!0===d&&(a=c.Z_OK,d=!1),a!==c.Z_STREAM_END&&a!==c.Z_OK)return this.onEnd(a),!(this.ended=!0);o.next_out&&(0!==o.avail_out&&a!==c.Z_STREAM_END&&(0!==o.avail_in||i!==c.Z_FINISH&&i!==c.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(n=u.utf8border(o.output,o.next_out),r=o.next_out-n,s=u.buf2string(o.output,n),o.next_out=r,o.avail_out=l-r,r&&_.arraySet(o.output,o.output,n,r,0),this.onData(s)):this.onData(_.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(d=!0)}while((0<o.avail_in||0===o.avail_out)&&a!==c.Z_STREAM_END);return a===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(a=f.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===c.Z_OK):i!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(o.avail_out=0))},s.prototype.onData=function(t){this.chunks.push(t)},s.prototype.onEnd=function(t){t===c.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=s,a.inflate=o,a.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},a.ungzip=o},{\"./utils/common\":3,\"./utils/strings\":4,\"./zlib/constants\":6,\"./zlib/gzheader\":9,\"./zlib/inflate\":11,\"./zlib/messages\":13,\"./zlib/zstream\":15}],3:[function(t,e,a){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;a.assign=function(t){for(var e,a,i=Array.prototype.slice.call(arguments,1);i.length;){var n=i.shift();if(n){if(\"object\"!=typeof n)throw new TypeError(n+\"must be non-object\");for(var r in n)e=n,a=r,Object.prototype.hasOwnProperty.call(e,a)&&(t[r]=n[r])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+i),n);else for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(e=i=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),e=n=0,a=t.length;e<a;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],4:[function(t,e,a){\"use strict\";var l=t(\"./common\"),n=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var h=new l.Buf8(256),i=0;i<256;i++)h[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function d(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&n))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var a=\"\",i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a}h[254]=h[254]=1,a.string2buf=function(t){var e,a,i,n,r,s=t.length,o=0;for(n=0;n<s;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new l.Buf8(o),n=r=0;r<o;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),a<128?e[r++]=a:(a<2048?e[r++]=192|a>>>6:(a<65536?e[r++]=224|a>>>12:(e[r++]=240|a>>>18,e[r++]=128|a>>>12&63),e[r++]=128|a>>>6&63),e[r++]=128|63&a);return e},a.buf2binstring=function(t){return d(t,t.length)},a.binstring2buf=function(t){for(var e=new l.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,i,n,r,s=e||t.length,o=new Array(2*s);for(a=i=0;a<s;)if((n=t[a++])<128)o[i++]=n;else if(4<(r=h[n]))o[i++]=65533,a+=r-1;else{for(n&=2===r?31:3===r?15:7;1<r&&a<s;)n=n<<6|63&t[a++],r--;1<r?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return d(o,i)},a.utf8border=function(t,e){var a;for((e=e||t.length)>t.length&&(e=t.length),a=e-1;0<=a&&128==(192&t[a]);)a--;return a<0?e:0===a?e:a+h[t[a]]>e?a:e}},{\"./common\":3}],5:[function(t,e,a){\"use strict\";e.exports=function(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){for(a-=s=2e3<a?2e3:a;r=r+(n=n+e[i++]|0)|0,--s;);n%=65521,r%=65521}return n|r<<16|0}},{}],6:[function(t,e,a){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,a){\"use strict\";var o=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();e.exports=function(t,e,a,i){var n=o,r=i+a;t^=-1;for(var s=i;s<r;s++)t=t>>>8^n[255&(t^e[s])];return-1^t}},{}],8:[function(t,e,a){\"use strict\";var l,_=t(\"../utils/common\"),h=t(\"./trees\"),u=t(\"./adler32\"),c=t(\"./crc32\"),i=t(\"./messages\"),d=0,f=4,b=0,g=-2,m=-1,w=4,n=2,p=8,v=9,r=286,s=30,o=19,k=2*r+1,y=15,x=3,z=258,B=z+x+1,S=42,E=113,A=1,Z=2,R=3,C=4;function N(t,e){return t.msg=i[e],e}function O(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function I(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(_.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function U(t,e){h._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,I(t.strm)}function T(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-B?t.strstart-(t.w_size-B):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+z,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(a=e)+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(i=z-(_-r),r=_-z,s<i){if(t.match_start=e,o<=(s=i))break;u=h[r+s-1],c=h[r+s]}}}while((e=f[e&d])>l&&0!=--n);return s<=t.lookahead?s:t.lookahead}function H(t){var e,a,i,n,r,s,o,l,h,d,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-B)){for(_.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=a=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--a;);for(e=a=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--a;);n+=f}if(0===t.strm.avail_in)break;if(s=t.strm,o=t.window,l=t.strstart+t.lookahead,h=n,d=void 0,d=s.avail_in,h<d&&(d=h),a=0===d?0:(s.avail_in-=d,_.arraySet(o,s.input,s.next_in,d,l),1===s.state.wrap?s.adler=u(s.adler,o,d,l):2===s.state.wrap&&(s.adler=c(s.adler,o,d,l)),s.next_in+=d,s.total_in+=d,d),t.lookahead+=a,t.lookahead+t.insert>=x)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+x-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<B&&0!==t.strm.avail_in)}function j(t,e){for(var a,i;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a)),t.match_length>=x)if(i=h._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function K(t,e){for(var a,i,n;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=h._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(U(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=h._tr_tally(t,0,t.window[t.strstart-1]))&&U(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=h._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function M(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(2*k),this.dyn_dtree=new _.Buf16(2*(2*s+1)),this.bl_tree=new _.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(y+1),this.heap=new _.Buf16(2*r+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(2*r+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?S:E,t.adler=2===e.wrap?0:1,e.last_flush=d,h._tr_init(e),b):N(t,g)}function q(t){var e,a=Y(t);return a===b&&((e=t.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0),a}function G(t,e,a,i,n,r){if(!t)return g;var s=1;if(e===m&&(e=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),n<1||v<n||a!==p||i<8||15<i||e<0||9<e||r<0||w<r)return N(t,g);8===i&&(i=9);var o=new P;return(t.state=o).strm=t,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new _.Buf8(2*o.w_size),o.head=new _.Buf16(o.hash_size),o.prev=new _.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new _.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=a,q(t)}l=[new M(0,0,0,0,function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(H(t),0===t.lookahead&&e===d)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,U(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-B&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):(t.strstart>t.block_start&&(U(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,j),new M(4,5,16,8,j),new M(4,6,32,32,j),new M(4,4,16,16,K),new M(8,16,32,32,K),new M(8,16,128,128,K),new M(8,32,128,256,K),new M(32,128,258,1024,K),new M(32,258,258,4096,K)],a.deflateInit=function(t,e){return G(t,e,p,15,8,0)},a.deflateInit2=G,a.deflateReset=q,a.deflateResetKeep=Y,a.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,b):g},a.deflate=function(t,e){var a,i,n,r;if(!t||!t.state||5<e||e<0)return t?N(t,g):g;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return N(t,0===t.avail_out?-5:g);if(i.strm=t,a=i.last_flush,i.last_flush=e,i.status===S)if(2===i.wrap)t.adler=0,T(i,31),T(i,139),T(i,8),i.gzhead?(T(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),T(i,255&i.gzhead.time),T(i,i.gzhead.time>>8&255),T(i,i.gzhead.time>>16&255),T(i,i.gzhead.time>>24&255),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(T(i,255&i.gzhead.extra.length),T(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=c(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(T(i,0),T(i,0),T(i,0),T(i,0),T(i,0),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,3),i.status=E);else{var s=p+(i.w_bits-8<<4)<<8;s|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=E,F(i,s),0!==i.strstart&&(F(i,t.adler>>>16),F(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending!==i.pending_buf_size));)T(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&I(t),i.pending+2<=i.pending_buf_size&&(T(i,255&t.adler),T(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(I(t),0===t.avail_out)return i.last_flush=-1,b}else if(0===t.avail_in&&O(e)<=O(a)&&e!==f)return N(t,-5);if(666===i.status&&0!==t.avail_in)return N(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==d&&666!==i.status){var o=2===i.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(e===d)return A;break}if(t.match_length=0,a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):3===i.strategy?function(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=z){if(H(t),t.lookahead<=z&&e===d)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=s[n=t.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){r=t.strstart+z;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<r);t.match_length=z-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(a=h._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):l[i.level].func(i,e);if(o!==R&&o!==C||(i.status=666),o===A||o===R)return 0===t.avail_out&&(i.last_flush=-1),b;if(o===Z&&(1===e?h._tr_align(i):5!==e&&(h._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),I(t),0===t.avail_out))return i.last_flush=-1,b}return e!==f?b:i.wrap<=0?1:(2===i.wrap?(T(i,255&t.adler),T(i,t.adler>>8&255),T(i,t.adler>>16&255),T(i,t.adler>>24&255),T(i,255&t.total_in),T(i,t.total_in>>8&255),T(i,t.total_in>>16&255),T(i,t.total_in>>24&255)):(F(i,t.adler>>>16),F(i,65535&t.adler)),I(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?b:1)},a.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==S&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?N(t,g):(t.state=null,e===E?N(t,-3):b):g},a.deflateSetDictionary=function(t,e){var a,i,n,r,s,o,l,h,d=e.length;if(!t||!t.state)return g;if(2===(r=(a=t.state).wrap)||1===r&&a.status!==S||a.lookahead)return g;for(1===r&&(t.adler=u(t.adler,e,d,0)),a.wrap=0,d>=a.w_size&&(0===r&&(D(a.head),a.strstart=0,a.block_start=0,a.insert=0),h=new _.Buf8(a.w_size),_.arraySet(h,e,d-a.w_size,a.w_size,0),e=h,d=a.w_size),s=t.avail_in,o=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,H(a);a.lookahead>=x;){for(i=a.strstart,n=a.lookahead-(x-1);a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+x-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++,--n;);a.strstart=i,a.lookahead=x-1,H(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=x-1,a.match_available=0,t.next_in=o,t.input=l,t.avail_in=s,a.wrap=r,b},a.deflateInfo=\"pako deflate (from Nodeca project)\"},{\"../utils/common\":3,\"./adler32\":5,\"./crc32\":7,\"./messages\":13,\"./trees\":14}],9:[function(t,e,a){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,a){\"use strict\";e.exports=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S;a=t.state,i=t.next_in,B=t.input,n=i+(t.avail_in-5),r=t.next_out,S=t.output,s=r-(e-t.avail_out),o=r+(t.avail_out-257),l=a.dmax,h=a.wsize,d=a.whave,f=a.wnext,_=a.window,u=a.hold,c=a.bits,b=a.lencode,g=a.distcode,m=(1<<a.lenbits)-1,w=(1<<a.distbits)-1;t:do{c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=b[u&m];e:for(;;){if(u>>>=v=p>>>24,c-=v,0===(v=p>>>16&255))S[r++]=65535&p;else{if(!(16&v)){if(0==(64&v)){p=b[(65535&p)+(u&(1<<v)-1)];continue e}if(32&v){a.mode=12;break t}t.msg=\"invalid literal/length code\",a.mode=30;break t}k=65535&p,(v&=15)&&(c<v&&(u+=B[i++]<<c,c+=8),k+=u&(1<<v)-1,u>>>=v,c-=v),c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=g[u&w];a:for(;;){if(u>>>=v=p>>>24,c-=v,!(16&(v=p>>>16&255))){if(0==(64&v)){p=g[(65535&p)+(u&(1<<v)-1)];continue a}t.msg=\"invalid distance code\",a.mode=30;break t}if(y=65535&p,c<(v&=15)&&(u+=B[i++]<<c,(c+=8)<v&&(u+=B[i++]<<c,c+=8)),l<(y+=u&(1<<v)-1)){t.msg=\"invalid distance too far back\",a.mode=30;break t}if(u>>>=v,c-=v,(v=r-s)<y){if(d<(v=y-v)&&a.sane){t.msg=\"invalid distance too far back\",a.mode=30;break t}if(z=_,(x=0)===f){if(x+=h-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}}else if(f<v){if(x+=h+f-v,(v-=f)<k){for(k-=v;S[r++]=_[x++],--v;);if(x=0,f<k){for(k-=v=f;S[r++]=_[x++],--v;);x=r-y,z=S}}}else if(x+=f-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}for(;2<k;)S[r++]=z[x++],S[r++]=z[x++],S[r++]=z[x++],k-=3;k&&(S[r++]=z[x++],1<k&&(S[r++]=z[x++]))}else{for(x=r-y;S[r++]=S[x++],S[r++]=S[x++],S[r++]=S[x++],2<(k-=3););k&&(S[r++]=S[x++],1<k&&(S[r++]=S[x++]))}break}}break}}while(i<n&&r<o);i-=k=c>>3,u&=(1<<(c-=k<<3))-1,t.next_in=i,t.next_out=r,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=r<o?o-r+257:257-(r-o),a.hold=u,a.bits=c}},{}],11:[function(t,e,a){\"use strict\";var Z=t(\"../utils/common\"),R=t(\"./adler32\"),C=t(\"./crc32\"),N=t(\"./inffast\"),O=t(\"./inftrees\"),D=1,I=2,U=0,T=-2,F=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Z.Buf16(320),this.work=new Z.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg=\"\",e.wrap&&(t.adler=1&e.wrap),e.mode=F,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Z.Buf32(i),e.distcode=e.distdyn=new Z.Buf32(n),e.sane=1,e.back=-1,U):T}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):T}function l(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?T:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,o(t))):T}function h(t,e){var a,i;return t?(i=new r,(t.state=i).window=null,(a=l(t,e))!==U&&(t.state=null),a):T}var d,f,_=!0;function H(t){if(_){var e;for(d=new Z.Buf32(512),f=new Z.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(O(D,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;O(I,t.lens,0,32,f,0,t.work,{bits:5}),_=!1}t.lencode=d,t.lenbits=9,t.distcode=f,t.distbits=5}function j(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Z.Buf8(r.wsize)),i>=r.wsize?(Z.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(i<(n=r.wsize-r.wnext)&&(n=i),Z.arraySet(r.window,e,a-i,n,r.wnext),(i-=n)?(Z.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}a.inflateReset=o,a.inflateReset2=l,a.inflateResetKeep=s,a.inflateInit=function(t){return h(t,15)},a.inflateInit2=h,a.inflate=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S=0,E=new Z.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;12===(a=t.state).mode&&(a.mode=13),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,f=o,_=l,x=U;t:for(;;)switch(a.mode){case F:if(0===a.wrap){a.mode=13;break}for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(2&a.wrap&&35615===h){E[a.check=0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0),d=h=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg=\"incorrect header check\",a.mode=30;break}if(8!=(15&h)){t.msg=\"unknown compression method\",a.mode=30;break}if(d-=4,y=8+(15&(h>>>=4)),0===a.wbits)a.wbits=y;else if(y>a.wbits){t.msg=\"invalid window size\",a.mode=30;break}a.dmax=1<<y,t.adler=a.check=1,a.mode=512&h?10:12,d=h=0;break;case 2:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.flags=h,8!=(255&a.flags)){t.msg=\"unknown compression method\",a.mode=30;break}if(57344&a.flags){t.msg=\"unknown header flags set\",a.mode=30;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=3;case 3:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,E[2]=h>>>16&255,E[3]=h>>>24&255,a.check=C(a.check,E,4,0)),d=h=0,a.mode=4;case 4:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=5;case 5:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(o<(u=a.length)&&(u=o),u&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),Z.arraySet(a.head.extra,i,r,u,y)),512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,a.length-=u),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(65535&a.check)){t.msg=\"header crc mismatch\",a.mode=30;break}d=h=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=12;break;case 10:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}t.adler=a.check=L(h),d=h=0,a.mode=11;case 11:if(0===a.havedict)return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,2;t.adler=a.check=1,a.mode=12;case 12:if(5===e||6===e)break t;case 13:if(a.last){h>>>=7&d,d-=7&d,a.mode=27;break}for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}switch(a.last=1&h,d-=1,3&(h>>>=1)){case 0:a.mode=14;break;case 1:if(H(a),a.mode=20,6!==e)break;h>>>=2,d-=2;break t;case 2:a.mode=17;break;case 3:t.msg=\"invalid block type\",a.mode=30}h>>>=2,d-=2;break;case 14:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg=\"invalid stored block lengths\",a.mode=30;break}if(a.length=65535&h,d=h=0,a.mode=15,6===e)break t;case 15:a.mode=16;case 16:if(u=a.length){if(o<u&&(u=o),l<u&&(u=l),0===u)break t;Z.arraySet(n,i,r,u,s),o-=u,r+=u,l-=u,s+=u,a.length-=u;break}a.mode=12;break;case 17:for(;d<14;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,286<a.nlen||30<a.ndist){t.msg=\"too many length or distance symbols\",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.lens[A[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[A[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,z={bits:a.lenbits},x=O(0,a.lens,0,19,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg=\"invalid code lengths set\",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(w<16)h>>>=g,d-=g,a.lens[a.have++]=w;else{if(16===w){for(B=g+2;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h>>>=g,d-=g,0===a.have){t.msg=\"invalid bit length repeat\",a.mode=30;break}y=a.lens[a.have-1],u=3+(3&h),h>>>=2,d-=2}else if(17===w){for(B=g+3;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=3+(7&(h>>>=g)),h>>>=3,d-=3}else{for(B=g+7;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=11+(127&(h>>>=g)),h>>>=7,d-=7}if(a.have+u>a.nlen+a.ndist){t.msg=\"invalid bit length repeat\",a.mode=30;break}for(;u--;)a.lens[a.have++]=y}}if(30===a.mode)break;if(0===a.lens[256]){t.msg=\"invalid code -- missing end-of-block\",a.mode=30;break}if(a.lenbits=9,z={bits:a.lenbits},x=O(D,a.lens,0,a.nlen,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg=\"invalid literal/lengths set\",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,z={bits:a.distbits},x=O(I,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,z),a.distbits=z.bits,x){t.msg=\"invalid distances set\",a.mode=30;break}if(a.mode=20,6===e)break t;case 20:a.mode=21;case 21:if(6<=o&&258<=l){t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,N(t,_),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(m&&0==(240&m)){for(p=g,v=m,k=w;m=(S=a.lencode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,a.length=w,0===m){a.mode=26;break}if(32&m){a.back=-1,a.mode=12;break}if(64&m){t.msg=\"invalid literal/length code\",a.mode=30;break}a.extra=15&m,a.mode=22;case 22:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;m=(S=a.distcode[h&(1<<a.distbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(0==(240&m)){for(p=g,v=m,k=w;m=(S=a.distcode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,64&m){t.msg=\"invalid distance code\",a.mode=30;break}a.offset=w,a.extra=15&m,a.mode=24;case 24:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg=\"invalid distance too far back\",a.mode=30;break}a.mode=25;case 25:if(0===l)break t;if(u=_-l,a.offset>u){if((u=a.offset-u)>a.whave&&a.sane){t.msg=\"invalid distance too far back\",a.mode=30;break}u>a.wnext?(u-=a.wnext,c=a.wsize-u):c=a.wnext-u,u>a.length&&(u=a.length),b=a.window}else b=n,c=s-a.offset,u=a.length;for(l<u&&(u=l),l-=u,a.length-=u;n[s++]=b[c++],--u;);0===a.length&&(a.mode=21);break;case 26:if(0===l)break t;n[s++]=a.length,l--,a.mode=21;break;case 27:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[r++]<<d,d+=8}if(_-=l,t.total_out+=_,a.total+=_,_&&(t.adler=a.check=a.flags?C(a.check,n,_,s-_):R(a.check,n,_,s-_)),_=l,(a.flags?h:L(h))!==a.check){t.msg=\"incorrect data check\",a.mode=30;break}d=h=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(4294967295&a.total)){t.msg=\"incorrect length check\",a.mode=30;break}d=h=0}a.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return T}return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||_!==t.avail_out&&a.mode<30&&(a.mode<27||4!==e))&&j(t,t.output,t.next_out,_-t.avail_out)?(a.mode=31,-4):(f-=t.avail_in,_-=t.avail_out,t.total_in+=f,t.total_out+=_,a.total+=_,a.wrap&&_&&(t.adler=a.check=a.flags?C(a.check,n,_,t.next_out-_):R(a.check,n,_,t.next_out-_)),t.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===f&&0===_||4===e)&&x===U&&(x=-5),x)},a.inflateEnd=function(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,U},a.inflateGetHeader=function(t,e){var a;return t&&t.state?0==(2&(a=t.state).wrap)?T:((a.head=e).done=!1,U):T},a.inflateSetDictionary=function(t,e){var a,i=e.length;return t&&t.state?0!==(a=t.state).wrap&&11!==a.mode?T:11===a.mode&&R(1,e,i,0)!==a.check?-3:j(t,e,i,i)?(a.mode=31,-4):(a.havedict=1,U):T},a.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":3,\"./adler32\":5,\"./crc32\":7,\"./inffast\":10,\"./inftrees\":12}],12:[function(t,e,a){\"use strict\";var D=t(\"../utils/common\"),I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],F=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,a,i,n,r,s,o){var l,h,d,f,_,u,c,b,g,m=o.bits,w=0,p=0,v=0,k=0,y=0,x=0,z=0,B=0,S=0,E=0,A=null,Z=0,R=new D.Buf16(16),C=new D.Buf16(16),N=null,O=0;for(w=0;w<=15;w++)R[w]=0;for(p=0;p<i;p++)R[e[a+p]]++;for(y=m,k=15;1<=k&&0===R[k];k--);if(k<y&&(y=k),0===k)return n[r++]=20971520,n[r++]=20971520,o.bits=1,0;for(v=1;v<k&&0===R[v];v++);for(y<v&&(y=v),w=B=1;w<=15;w++)if(B<<=1,(B-=R[w])<0)return-1;if(0<B&&(0===t||1!==k))return-1;for(C[1]=0,w=1;w<15;w++)C[w+1]=C[w]+R[w];for(p=0;p<i;p++)0!==e[a+p]&&(s[C[e[a+p]]++]=p);if(0===t?(A=N=s,u=19):1===t?(A=I,Z-=257,N=U,O-=257,u=256):(A=T,N=F,u=-1),w=v,_=r,z=p=E=0,d=-1,f=(S=1<<(x=y))-1,1===t&&852<S||2===t&&592<S)return 1;for(;;){for(c=w-z,s[p]<u?(b=0,g=s[p]):s[p]>u?(b=N[O+s[p]],g=A[Z+s[p]]):(b=96,g=0),l=1<<w-z,v=h=1<<x;n[_+(E>>z)+(h-=l)]=c<<24|b<<16|g|0,0!==h;);for(l=1<<w-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,p++,0==--R[w]){if(w===k)break;w=e[a+s[p]]}if(y<w&&(E&f)!==d){for(0===z&&(z=y),_+=v,B=1<<(x=w-z);x+z<k&&!((B-=R[x+z])<=0);)x++,B<<=1;if(S+=1<<x,1===t&&852<S||2===t&&592<S)return 1;n[d=E&f]=y<<24|x<<16|_-r|0}}return 0!==E&&(n[_+E]=w-z<<24|64<<16|0),o.bits=y,0}},{\"../utils/common\":3}],13:[function(t,e,a){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],14:[function(t,e,a){\"use strict\";var l=t(\"../utils/common\"),o=0,h=1;function i(t){for(var e=t.length;0<=--e;)t[e]=0}var d=0,s=29,f=256,_=f+1+s,u=30,c=19,g=2*_+1,m=15,n=16,b=7,w=256,p=16,v=17,k=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(_+2));i(S);var E=new Array(2*u);i(E);var A=new Array(512);i(A);var Z=new Array(256);i(Z);var R=new Array(s);i(R);var C,N,O,D=new Array(u);function I(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function U(t){return t<256?A[t]:A[256+(t>>>7)]}function T(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,a){t.bi_valid>n-a?(t.bi_buf|=e<<t.bi_valid&65535,T(t,t.bi_buf),t.bi_buf=e>>n-t.bi_valid,t.bi_valid+=a-n):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function L(t,e,a){F(t,a[2*e],a[2*e+1])}function H(t,e){for(var a=0;a|=1&t,t>>>=1,a<<=1,0<--e;);return a>>>1}function j(t,e,a){var i,n,r=new Array(m+1),s=0;for(i=1;i<=m;i++)r[i]=s=s+a[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=H(r[o]++,o))}}function K(t){var e;for(e=0;e<_;e++)t.dyn_ltree[2*e]=0;for(e=0;e<u;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?T(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function Y(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&P(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!P(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function q(t,e,a){var i,n,r,s,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(r=Z[n])+f+1,e),0!==(s=y[r])&&F(t,n-=R[r],s),L(t,r=U(--i),a),0!==(s=x[r])&&F(t,i-=D[r],s)),o<t.last_lit;);L(t,w,e)}function G(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=g,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)r[2*(n=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;1<=a;a--)Y(t,r,a);for(n=l;a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Y(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,Y(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;r<=m;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<g;a++)c<(r=l[2*l[2*(i=t.heap[a])+1]+1]+1)&&(r=c,b++),l[2*i+1]=r,h<i||(t.bl_count[r]++,s=0,u<=i&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(0<b);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)h<(n=t.heap[--a])||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}(t,e),j(r,h,t.bl_count)}function X(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*p]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*k]++,r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function W(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),i=0;i<=a;i++)if(n=s,s=e[2*(i+1)+1],!(++o<l&&n===s)){if(o<h)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==r&&(L(t,n,t.bl_tree),o--),L(t,p,t.bl_tree),F(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),F(t,o-3,3)):(L(t,k,t.bl_tree),F(t,o-11,7));r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4)}}i(D);var J=!1;function Q(t,e,a,i){var n,r,s,o;F(t,(d<<1)+(i?1:0),3),r=e,s=a,o=!0,M(n=t),o&&(T(n,s),T(n,~s)),l.arraySet(n.pending_buf,n.window,r,s,n.pending),n.pending+=s}a._tr_init=function(t){J||(function(){var t,e,a,i,n,r=new Array(m+1);for(i=a=0;i<s-1;i++)for(R[i]=a,t=0;t<1<<y[i];t++)Z[a++]=i;for(Z[a-1]=i,i=n=0;i<16;i++)for(D[i]=n,t=0;t<1<<x[i];t++)A[n++]=i;for(n>>=7;i<u;i++)for(D[i]=n<<7,t=0;t<1<<x[i]-7;t++)A[256+n++]=i;for(e=0;e<=m;e++)r[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,r[8]++;for(;t<=255;)S[2*t+1]=9,t++,r[9]++;for(;t<=279;)S[2*t+1]=7,t++,r[7]++;for(;t<=287;)S[2*t+1]=8,t++,r[8]++;for(j(S,_+1,r),t=0;t<u;t++)E[2*t+1]=5,E[2*t]=H(t,5);C=new I(S,y,f+1,_,m),N=new I(E,x,0,u,m),O=new I(new Array(0),z,0,c,b)}(),J=!0),t.l_desc=new r(t.dyn_ltree,C),t.d_desc=new r(t.dyn_dtree,N),t.bl_desc=new r(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,K(t)},a._tr_stored_block=Q,a._tr_flush_block=function(t,e,a,i){var n,r,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return h;for(e=32;e<f;e++)if(0!==t.dyn_ltree[2*e])return h;return o}(t)),G(t,t.l_desc),G(t,t.d_desc),s=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=c-1;3<=e&&0===t.bl_tree[2*B[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=n&&(n=r)):n=r=a+5,a+4<=n&&-1!==e?Q(t,e,a,i):4===t.strategy||r===n?(F(t,2+(i?1:0),3),q(t,S,E)):(F(t,4+(i?1:0),3),function(t,e,a,i){var n;for(F(t,e-257,5),F(t,a-1,5),F(t,i-4,4),n=0;n<i;n++)F(t,t.bl_tree[2*B[n]+1],3);W(t,t.dyn_ltree,e-1),W(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),q(t,t.dyn_ltree,t.dyn_dtree)),K(t),i&&M(t)},a._tr_tally=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(Z[a]+f+1)]++,t.dyn_dtree[2*U(e)]++),t.last_lit===t.lit_bufsize-1},a._tr_align=function(t){var e;F(t,2,3),L(t,w,S),16===(e=t).bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{\"../utils/common\":3}],15:[function(t,e,a){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},{}],\"/\":[function(t,e,a){\"use strict\";var i={};(0,t(\"./lib/utils/common\").assign)(i,t(\"./lib/deflate\"),t(\"./lib/inflate\"),t(\"./lib/zlib/constants\")),e.exports=i},{\"./lib/deflate\":1,\"./lib/inflate\":2,\"./lib/utils/common\":3,\"./lib/zlib/constants\":6}]},{},[])(\"/\")});\n","!function(){\"use strict\";function e(e,t){var n,o,r,i,l=W;for(i=arguments.length;i-- >2;)P.push(arguments[i]);t&&null!=t.children&&(P.length||P.push(t.children),delete t.children);while(P.length)if((o=P.pop())&&void 0!==o.pop)for(i=o.length;i--;)P.push(o[i]);else\"boolean\"==typeof o&&(o=null),(r=\"function\"!=typeof e)&&(null==o?o=\"\":\"number\"==typeof o?o+=\"\":\"string\"!=typeof o&&(r=!1)),r&&n?l[l.length-1]+=o:l===W?l=[o]:l.push(o),n=r;var a=new T;return a.nodeName=e,a.children=l,a.attributes=null==t?void 0:t,a.key=null==t?void 0:t.key,void 0!==M.vnode&&M.vnode(a),a}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,t){e&&(\"function\"==typeof e?e(t):e.current=t)}function o(n,o){return e(n.nodeName,t(t({},n.attributes),o),arguments.length>2?[].slice.call(arguments,2):n.children)}function r(e){!e.__d&&(e.__d=!0)&&1==V.push(e)&&(M.debounceRendering||D)(i)}function i(){var e;while(e=V.pop())e.__d&&x(e)}function l(e,t,n){return\"string\"==typeof t||\"number\"==typeof t?void 0!==e.splitText:\"string\"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function u(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===n[r]&&(n[r]=o[r]);return n}function c(e,t){var n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",e):document.createElement(e);return n.__n=e,n}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,o,r,i){if(\"className\"===t&&(t=\"class\"),\"key\"===t);else if(\"ref\"===t)n(o,null),n(r,e);else if(\"class\"!==t||i)if(\"style\"===t){if(r&&\"string\"!=typeof r&&\"string\"!=typeof o||(e.style.cssText=r||\"\"),r&&\"object\"==typeof r){if(\"string\"!=typeof o)for(var l in o)l in r||(e.style[l]=\"\");for(var l in r)e.style[l]=\"number\"==typeof r[l]&&!1===E.test(l)?r[l]+\"px\":r[l]}}else if(\"dangerouslySetInnerHTML\"===t)r&&(e.innerHTML=r.__html||\"\");else if(\"o\"==t[0]&&\"n\"==t[1]){var a=t!==(t=t.replace(/Capture$/,\"\"));t=t.toLowerCase().substring(2),r?o||e.addEventListener(t,_,a):e.removeEventListener(t,_,a),(e.__l||(e.__l={}))[t]=r}else if(\"list\"!==t&&\"type\"!==t&&!i&&t in e){try{e[t]=null==r?\"\":r}catch(e){}null!=r&&!1!==r||\"spellcheck\"==t||e.removeAttribute(t)}else{var u=i&&t!==(t=t.replace(/^xlink:?/,\"\"));null==r||!1===r?u?e.removeAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase()):e.removeAttribute(t):\"function\"!=typeof r&&(u?e.setAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||\"\"}function _(e){return this.__l[e.type](M.event&&M.event(e)||e)}function f(){var e;while(e=A.shift())M.afterMount&&M.afterMount(e),e.componentDidMount&&e.componentDidMount()}function d(e,t,n,o,r,i){H++||(R=null!=r&&void 0!==r.ownerSVGElement,B=null!=e&&!(\"__preactattr_\"in e));var l=h(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--H||(B=!1,i||f()),l}function h(e,t,n,o,r){var i=e,l=R;if(null!=t&&\"boolean\"!=typeof t||(t=\"\"),\"string\"==typeof t||\"number\"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),v(e,!0))),i.__preactattr_=!0,i;var u=t.nodeName;if(\"function\"==typeof u)return N(e,t,n,o);if(R=\"svg\"===u||\"foreignObject\"!==u&&R,u+=\"\",(!e||!a(e,u))&&(i=c(u,R),e)){while(e.firstChild)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),v(e,!0)}var p=i.firstChild,s=i.__preactattr_,_=t.children;if(null==s){s=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)s[f[d].name]=f[d].value}return!B&&_&&1===_.length&&\"string\"==typeof _[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=_[0]&&(p.nodeValue=_[0]):(_&&_.length||null!=p)&&m(i,_,n,o,B||null!=s.dangerouslySetInnerHTML),y(i,t.attributes,s),R=l,i}function m(e,t,n,o,r){var i,a,u,c,s,_=e.childNodes,f=[],d={},m=0,b=0,y=_.length,g=0,w=t?t.length:0;if(0!==y)for(var C=0;C<y;C++){var x=_[C],N=x.__preactattr_,k=w&&N?x._component?x._component.__k:N.key:null;null!=k?(m++,d[k]=x):(N||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(f[g++]=x)}if(0!==w)for(var C=0;C<w;C++){c=t[C],s=null;var k=c.key;if(null!=k)m&&void 0!==d[k]&&(s=d[k],d[k]=void 0,m--);else if(b<g)for(i=b;i<g;i++)if(void 0!==f[i]&&l(a=f[i],c,r)){s=a,f[i]=void 0,i===g-1&&g--,i===b&&b++;break}s=h(s,c,n,o),u=_[C],s&&s!==e&&s!==u&&(null==u?e.appendChild(s):s===u.nextSibling?p(u):e.insertBefore(s,u))}if(m)for(var C in d)void 0!==d[C]&&v(d[C],!1);while(b<=g)void 0!==(s=f[g--])&&v(s,!1)}function v(e,t){var o=e._component;o?k(o):(null!=e.__preactattr_&&n(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||p(e),b(e))}function b(e){e=e.lastChild;while(e){var t=e.previousSibling;v(e,!0),e=t}}function y(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||s(e,o,n[o],n[o]=void 0,R);for(o in t)\"children\"===o||\"innerHTML\"===o||o in n&&t[o]===(\"value\"===o||\"checked\"===o?e[o]:n[o])||s(e,o,n[o],n[o]=t[o],R)}function g(e,t,n){var o,r=F.length;e.prototype&&e.prototype.render?(o=new e(t,n),U.call(o,t,n)):(o=new U(t,n),o.constructor=e,o.render=w);while(r--)if(F[r].constructor===e)return o.__b=F[r].__b,F.splice(r,1),o;return o}function w(e,t,n){return this.constructor(e,n)}function C(e,t,o,i,l){e.__x||(e.__x=!0,e.__r=t.ref,e.__k=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||l?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i)),i&&i!==e.context&&(e.__c||(e.__c=e.context),e.context=i),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==o&&(1!==o&&!1===M.syncComponentUpdates&&e.base?r(e):x(e,1,l)),n(e.__r,e))}function x(e,n,o,r){if(!e.__x){var i,l,a,c=e.props,p=e.state,s=e.context,_=e.__p||c,h=e.__s||p,m=e.__c||s,b=e.base,y=e.__b,w=b||y,N=e._component,U=!1,S=m;if(e.constructor.getDerivedStateFromProps&&(p=t(t({},p),e.constructor.getDerivedStateFromProps(c,p)),e.state=p),b&&(e.props=_,e.state=h,e.context=m,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,p,s)?U=!0:e.componentWillUpdate&&e.componentWillUpdate(c,p,s),e.props=c,e.state=p,e.context=s),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!U){i=e.render(c,p,s),e.getChildContext&&(s=t(t({},s),e.getChildContext())),b&&e.getSnapshotBeforeUpdate&&(S=e.getSnapshotBeforeUpdate(_,h));var L,T,P=i&&i.nodeName;if(\"function\"==typeof P){var W=u(i);l=N,l&&l.constructor===P&&W.key==l.__k?C(l,W,1,s,!1):(L=l,e._component=l=g(P,W,s),l.__b=l.__b||y,l.__u=e,C(l,W,0,s,!1),x(l,1,o,!0)),T=l.base}else a=w,L=N,L&&(a=e._component=null),(w||1===n)&&(a&&(a._component=null),T=d(a,i,s,o||!b,w&&w.parentNode,!0));if(w&&T!==w&&l!==N){var D=w.parentNode;D&&T!==D&&(D.replaceChild(T,w),L||(w._component=null,v(w,!1)))}if(L&&k(L),e.base=T,T&&!r){var E=e,V=e;while(V=V.__u)(E=V).base=T;T._component=E,T._componentConstructor=E.constructor}}!b||o?A.push(e):U||(e.componentDidUpdate&&e.componentDidUpdate(_,h,S),M.afterUpdate&&M.afterUpdate(e));while(e.__h.length)e.__h.pop().call(e);H||r||f()}}function N(e,t,n,o){var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===t.nodeName,c=a,p=u(t);while(r&&!c&&(r=r.__u))c=r.constructor===t.nodeName;return r&&c&&(!o||r._component)?(C(r,p,3,n,o),e=r.base):(i&&!a&&(k(i),e=l=null),r=g(t.nodeName,p,n),e&&!r.__b&&(r.__b=e,l=null),C(r,p,1,n,o),e=r.base,l&&e!==l&&(l._component=null,v(l,!1))),e}function k(e){M.beforeUnmount&&M.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var o=e._component;o?k(o):t&&(null!=t.__preactattr_&&n(t.__preactattr_.ref,null),e.__b=t,p(t),F.push(e),b(t)),n(e.__r,null)}function U(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{},this.__h=[]}function S(e,t,n){return d(n,e,{},!1,t,!1)}function L(){return{}}var T=function(){},M={},P=[],W=[],D=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,E=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,V=[],A=[],H=0,R=!1,B=!1,F=[];t(U.prototype,{setState:function(e,n){this.__s||(this.__s=this.state),this.state=t(t({},this.state),\"function\"==typeof e?e(this.state,this.props):e),n&&this.__h.push(n),r(this)},forceUpdate:function(e){e&&this.__h.push(e),x(this,2)},render:function(){}});var j={h:e,createElement:e,cloneElement:o,createRef:L,Component:U,render:S,rerender:i,options:M};\"undefined\"!=typeof module?module.exports=j:self.preact=j}();\n//# sourceMappingURL=preact.min.js.map","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","'use strict';\nmodule.exports = {\n\tstdout: false,\n\tstderr: false\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncParallelBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, onDone }) {\n\t\tlet code = \"\";\n\t\tcode += `var _results = new Array(${this.options.taps.length});\\n`;\n\t\tcode += \"var _checkDone = () => {\\n\";\n\t\tcode += \"for(var i = 0; i < _results.length; i++) {\\n\";\n\t\tcode += \"var item = _results[i];\\n\";\n\t\tcode += \"if(item === undefined) return false;\\n\";\n\t\tcode += \"if(item.result !== undefined) {\\n\";\n\t\tcode += onResult(\"item.result\");\n\t\tcode += \"return true;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"if(item.error) {\\n\";\n\t\tcode += onError(\"item.error\");\n\t\tcode += \"return true;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"return false;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += this.callTapsParallel({\n\t\t\tonError: (i, err, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${i} < _results.length && ((_results.length = ${i +\n\t\t\t\t\t1}), (_results[${i}] = { error: ${err} }), _checkDone())) {\\n`;\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\tcode += done();\n\t\t\t\tcode += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonResult: (i, result, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${i} < _results.length && (${result} !== undefined && (_results.length = ${i +\n\t\t\t\t\t1}), (_results[${i}] = { result: ${result} }), _checkDone())) {\\n`;\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\tcode += done();\n\t\t\t\tcode += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonTap: (i, run, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tcode += `if(${i} >= _results.length) {\\n`;\n\t\t\t\t\tcode += done();\n\t\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\t}\n\t\t\t\tcode += run();\n\t\t\t\tif (i > 0) code += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone\n\t\t});\n\t\treturn code;\n\t}\n}\n\nconst factory = new AsyncParallelBailHookCodeFactory();\n\nclass AsyncParallelBailHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncParallelBailHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncParallelBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncParallelHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone }) {\n\t\treturn this.callTapsParallel({\n\t\t\tonError: (i, err, done, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncParallelHookCodeFactory();\n\nclass AsyncParallelHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncParallelHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncParallelHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonResult: (i, result, next) =>\n\t\t\t\t`if(${result} !== undefined) {\\n${onResult(\n\t\t\t\t\tresult\n\t\t\t\t)};\\n} else {\\n${next()}}\\n`,\n\t\t\tresultReturns,\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesBailHookCodeFactory();\n\nclass AsyncSeriesBailHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncSeriesBailHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncSeriesBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesHookCodeFactory();\n\nclass AsyncSeriesHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncSeriesHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncSeriesHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesWaterfallHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonResult: (i, result, next) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += `${this._args[0]} = ${result};\\n`;\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcode += next();\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone: () => onResult(this._args[0])\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesWaterfallHookCodeFactory();\n\nclass AsyncSeriesWaterfallHook extends Hook {\n\tconstructor(args) {\n\t\tsuper(args);\n\t\tif (args.length < 1)\n\t\t\tthrow new Error(\"Waterfall hooks must have at least one argument\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncSeriesWaterfallHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncSeriesWaterfallHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass Hook {\n\tconstructor(args) {\n\t\tif (!Array.isArray(args)) args = [];\n\t\tthis._args = args;\n\t\tthis.taps = [];\n\t\tthis.interceptors = [];\n\t\tthis.call = this._call;\n\t\tthis.promise = this._promise;\n\t\tthis.callAsync = this._callAsync;\n\t\tthis._x = undefined;\n\t}\n\n\tcompile(options) {\n\t\tthrow new Error(\"Abstract: should be overriden\");\n\t}\n\n\t_createCall(type) {\n\t\treturn this.compile({\n\t\t\ttaps: this.taps,\n\t\t\tinterceptors: this.interceptors,\n\t\t\targs: this._args,\n\t\t\ttype: type\n\t\t});\n\t}\n\n\ttap(options, fn) {\n\t\tif (typeof options === \"string\") options = { name: options };\n\t\tif (typeof options !== \"object\" || options === null)\n\t\t\tthrow new Error(\n\t\t\t\t\"Invalid arguments to tap(options: Object, fn: function)\"\n\t\t\t);\n\t\toptions = Object.assign({ type: \"sync\", fn: fn }, options);\n\t\tif (typeof options.name !== \"string\" || options.name === \"\")\n\t\t\tthrow new Error(\"Missing name for tap\");\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\ttapAsync(options, fn) {\n\t\tif (typeof options === \"string\") options = { name: options };\n\t\tif (typeof options !== \"object\" || options === null)\n\t\t\tthrow new Error(\n\t\t\t\t\"Invalid arguments to tapAsync(options: Object, fn: function)\"\n\t\t\t);\n\t\toptions = Object.assign({ type: \"async\", fn: fn }, options);\n\t\tif (typeof options.name !== \"string\" || options.name === \"\")\n\t\t\tthrow new Error(\"Missing name for tapAsync\");\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\ttapPromise(options, fn) {\n\t\tif (typeof options === \"string\") options = { name: options };\n\t\tif (typeof options !== \"object\" || options === null)\n\t\t\tthrow new Error(\n\t\t\t\t\"Invalid arguments to tapPromise(options: Object, fn: function)\"\n\t\t\t);\n\t\toptions = Object.assign({ type: \"promise\", fn: fn }, options);\n\t\tif (typeof options.name !== \"string\" || options.name === \"\")\n\t\t\tthrow new Error(\"Missing name for tapPromise\");\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\t_runRegisterInterceptors(options) {\n\t\tfor (const interceptor of this.interceptors) {\n\t\t\tif (interceptor.register) {\n\t\t\t\tconst newOptions = interceptor.register(options);\n\t\t\t\tif (newOptions !== undefined) options = newOptions;\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n\n\twithOptions(options) {\n\t\tconst mergeOptions = opt =>\n\t\t\tObject.assign({}, options, typeof opt === \"string\" ? { name: opt } : opt);\n\n\t\t// Prevent creating endless prototype chains\n\t\toptions = Object.assign({}, options, this._withOptions);\n\t\tconst base = this._withOptionsBase || this;\n\t\tconst newHook = Object.create(base);\n\n\t\t(newHook.tapAsync = (opt, fn) => base.tapAsync(mergeOptions(opt), fn)),\n\t\t\t(newHook.tap = (opt, fn) => base.tap(mergeOptions(opt), fn));\n\t\tnewHook.tapPromise = (opt, fn) => base.tapPromise(mergeOptions(opt), fn);\n\t\tnewHook._withOptions = options;\n\t\tnewHook._withOptionsBase = base;\n\t\treturn newHook;\n\t}\n\n\tisUsed() {\n\t\treturn this.taps.length > 0 || this.interceptors.length > 0;\n\t}\n\n\tintercept(interceptor) {\n\t\tthis._resetCompilation();\n\t\tthis.interceptors.push(Object.assign({}, interceptor));\n\t\tif (interceptor.register) {\n\t\t\tfor (let i = 0; i < this.taps.length; i++)\n\t\t\t\tthis.taps[i] = interceptor.register(this.taps[i]);\n\t\t}\n\t}\n\n\t_resetCompilation() {\n\t\tthis.call = this._call;\n\t\tthis.callAsync = this._callAsync;\n\t\tthis.promise = this._promise;\n\t}\n\n\t_insert(item) {\n\t\tthis._resetCompilation();\n\t\tlet before;\n\t\tif (typeof item.before === \"string\") before = new Set([item.before]);\n\t\telse if (Array.isArray(item.before)) {\n\t\t\tbefore = new Set(item.before);\n\t\t}\n\t\tlet stage = 0;\n\t\tif (typeof item.stage === \"number\") stage = item.stage;\n\t\tlet i = this.taps.length;\n\t\twhile (i > 0) {\n\t\t\ti--;\n\t\t\tconst x = this.taps[i];\n\t\t\tthis.taps[i + 1] = x;\n\t\t\tconst xStage = x.stage || 0;\n\t\t\tif (before) {\n\t\t\t\tif (before.has(x.name)) {\n\t\t\t\t\tbefore.delete(x.name);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (before.size > 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (xStage > stage) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ti++;\n\t\t\tbreak;\n\t\t}\n\t\tthis.taps[i] = item;\n\t}\n}\n\nfunction createCompileDelegate(name, type) {\n\treturn function lazyCompileHook(...args) {\n\t\tthis[name] = this._createCall(type);\n\t\treturn this[name](...args);\n\t};\n}\n\nObject.defineProperties(Hook.prototype, {\n\t_call: {\n\t\tvalue: createCompileDelegate(\"call\", \"sync\"),\n\t\tconfigurable: true,\n\t\twritable: true\n\t},\n\t_promise: {\n\t\tvalue: createCompileDelegate(\"promise\", \"promise\"),\n\t\tconfigurable: true,\n\t\twritable: true\n\t},\n\t_callAsync: {\n\t\tvalue: createCompileDelegate(\"callAsync\", \"async\"),\n\t\tconfigurable: true,\n\t\twritable: true\n\t}\n});\n\nmodule.exports = Hook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass HookCodeFactory {\n\tconstructor(config) {\n\t\tthis.config = config;\n\t\tthis.options = undefined;\n\t\tthis._args = undefined;\n\t}\n\n\tcreate(options) {\n\t\tthis.init(options);\n\t\tlet fn;\n\t\tswitch (this.options.type) {\n\t\t\tcase \"sync\":\n\t\t\t\tfn = new Function(\n\t\t\t\t\tthis.args(),\n\t\t\t\t\t'\"use strict\";\\n' +\n\t\t\t\t\t\tthis.header() +\n\t\t\t\t\t\tthis.content({\n\t\t\t\t\t\t\tonError: err => `throw ${err};\\n`,\n\t\t\t\t\t\t\tonResult: result => `return ${result};\\n`,\n\t\t\t\t\t\t\tresultReturns: true,\n\t\t\t\t\t\t\tonDone: () => \"\",\n\t\t\t\t\t\t\trethrowIfPossible: true\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"async\":\n\t\t\t\tfn = new Function(\n\t\t\t\t\tthis.args({\n\t\t\t\t\t\tafter: \"_callback\"\n\t\t\t\t\t}),\n\t\t\t\t\t'\"use strict\";\\n' +\n\t\t\t\t\t\tthis.header() +\n\t\t\t\t\t\tthis.content({\n\t\t\t\t\t\t\tonError: err => `_callback(${err});\\n`,\n\t\t\t\t\t\t\tonResult: result => `_callback(null, ${result});\\n`,\n\t\t\t\t\t\t\tonDone: () => \"_callback();\\n\"\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"promise\":\n\t\t\t\tlet errorHelperUsed = false;\n\t\t\t\tconst content = this.content({\n\t\t\t\t\tonError: err => {\n\t\t\t\t\t\terrorHelperUsed = true;\n\t\t\t\t\t\treturn `_error(${err});\\n`;\n\t\t\t\t\t},\n\t\t\t\t\tonResult: result => `_resolve(${result});\\n`,\n\t\t\t\t\tonDone: () => \"_resolve();\\n\"\n\t\t\t\t});\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += '\"use strict\";\\n';\n\t\t\t\tcode += \"return new Promise((_resolve, _reject) => {\\n\";\n\t\t\t\tif (errorHelperUsed) {\n\t\t\t\t\tcode += \"var _sync = true;\\n\";\n\t\t\t\t\tcode += \"function _error(_err) {\\n\";\n\t\t\t\t\tcode += \"if(_sync)\\n\";\n\t\t\t\t\tcode += \"_resolve(Promise.resolve().then(() => { throw _err; }));\\n\";\n\t\t\t\t\tcode += \"else\\n\";\n\t\t\t\t\tcode += \"_reject(_err);\\n\";\n\t\t\t\t\tcode += \"};\\n\";\n\t\t\t\t}\n\t\t\t\tcode += this.header();\n\t\t\t\tcode += content;\n\t\t\t\tif (errorHelperUsed) {\n\t\t\t\t\tcode += \"_sync = false;\\n\";\n\t\t\t\t}\n\t\t\t\tcode += \"});\\n\";\n\t\t\t\tfn = new Function(this.args(), code);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.deinit();\n\t\treturn fn;\n\t}\n\n\tsetup(instance, options) {\n\t\tinstance._x = options.taps.map(t => t.fn);\n\t}\n\n\t/**\n\t * @param {{ type: \"sync\" | \"promise\" | \"async\", taps: Array<Tap>, interceptors: Array<Interceptor> }} options\n\t */\n\tinit(options) {\n\t\tthis.options = options;\n\t\tthis._args = options.args.slice();\n\t}\n\n\tdeinit() {\n\t\tthis.options = undefined;\n\t\tthis._args = undefined;\n\t}\n\n\theader() {\n\t\tlet code = \"\";\n\t\tif (this.needContext()) {\n\t\t\tcode += \"var _context = {};\\n\";\n\t\t} else {\n\t\t\tcode += \"var _context;\\n\";\n\t\t}\n\t\tcode += \"var _x = this._x;\\n\";\n\t\tif (this.options.interceptors.length > 0) {\n\t\t\tcode += \"var _taps = this.taps;\\n\";\n\t\t\tcode += \"var _interceptors = this.interceptors;\\n\";\n\t\t}\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.call) {\n\t\t\t\tcode += `${this.getInterceptor(i)}.call(${this.args({\n\t\t\t\t\tbefore: interceptor.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t}\n\t\t}\n\t\treturn code;\n\t}\n\n\tneedContext() {\n\t\tfor (const tap of this.options.taps) if (tap.context) return true;\n\t\treturn false;\n\t}\n\n\tcallTap(tapIndex, { onError, onResult, onDone, rethrowIfPossible }) {\n\t\tlet code = \"\";\n\t\tlet hasTapCached = false;\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.tap) {\n\t\t\t\tif (!hasTapCached) {\n\t\t\t\t\tcode += `var _tap${tapIndex} = ${this.getTap(tapIndex)};\\n`;\n\t\t\t\t\thasTapCached = true;\n\t\t\t\t}\n\t\t\t\tcode += `${this.getInterceptor(i)}.tap(${\n\t\t\t\t\tinterceptor.context ? \"_context, \" : \"\"\n\t\t\t\t}_tap${tapIndex});\\n`;\n\t\t\t}\n\t\t}\n\t\tcode += `var _fn${tapIndex} = ${this.getTapFn(tapIndex)};\\n`;\n\t\tconst tap = this.options.taps[tapIndex];\n\t\tswitch (tap.type) {\n\t\t\tcase \"sync\":\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += `var _hasError${tapIndex} = false;\\n`;\n\t\t\t\t\tcode += \"try {\\n\";\n\t\t\t\t}\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += `var _result${tapIndex} = _fn${tapIndex}(${this.args({\n\t\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t\t})});\\n`;\n\t\t\t\t} else {\n\t\t\t\t\tcode += `_fn${tapIndex}(${this.args({\n\t\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t\t})});\\n`;\n\t\t\t\t}\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += \"} catch(_err) {\\n\";\n\t\t\t\t\tcode += `_hasError${tapIndex} = true;\\n`;\n\t\t\t\t\tcode += onError(\"_err\");\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\tcode += `if(!_hasError${tapIndex}) {\\n`;\n\t\t\t\t}\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcode += onDone();\n\t\t\t\t}\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"async\":\n\t\t\t\tlet cbCode = \"\";\n\t\t\t\tif (onResult) cbCode += `(_err${tapIndex}, _result${tapIndex}) => {\\n`;\n\t\t\t\telse cbCode += `_err${tapIndex} => {\\n`;\n\t\t\t\tcbCode += `if(_err${tapIndex}) {\\n`;\n\t\t\t\tcbCode += onError(`_err${tapIndex}`);\n\t\t\t\tcbCode += \"} else {\\n\";\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcbCode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcbCode += onDone();\n\t\t\t\t}\n\t\t\t\tcbCode += \"}\\n\";\n\t\t\t\tcbCode += \"}\";\n\t\t\t\tcode += `_fn${tapIndex}(${this.args({\n\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined,\n\t\t\t\t\tafter: cbCode\n\t\t\t\t})});\\n`;\n\t\t\t\tbreak;\n\t\t\tcase \"promise\":\n\t\t\t\tcode += `var _hasResult${tapIndex} = false;\\n`;\n\t\t\t\tcode += `var _promise${tapIndex} = _fn${tapIndex}(${this.args({\n\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t\tcode += `if (!_promise${tapIndex} || !_promise${tapIndex}.then)\\n`;\n\t\t\t\tcode += `  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${tapIndex} + ')');\\n`;\n\t\t\t\tcode += `_promise${tapIndex}.then(_result${tapIndex} => {\\n`;\n\t\t\t\tcode += `_hasResult${tapIndex} = true;\\n`;\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcode += onDone();\n\t\t\t\t}\n\t\t\t\tcode += `}, _err${tapIndex} => {\\n`;\n\t\t\t\tcode += `if(_hasResult${tapIndex}) throw _err${tapIndex};\\n`;\n\t\t\t\tcode += onError(`_err${tapIndex}`);\n\t\t\t\tcode += \"});\\n\";\n\t\t\t\tbreak;\n\t\t}\n\t\treturn code;\n\t}\n\n\tcallTapsSeries({\n\t\tonError,\n\t\tonResult,\n\t\tresultReturns,\n\t\tonDone,\n\t\tdoneReturns,\n\t\trethrowIfPossible\n\t}) {\n\t\tif (this.options.taps.length === 0) return onDone();\n\t\tconst firstAsync = this.options.taps.findIndex(t => t.type !== \"sync\");\n\t\tconst somethingReturns = resultReturns || doneReturns || false;\n\t\tlet code = \"\";\n\t\tlet current = onDone;\n\t\tfor (let j = this.options.taps.length - 1; j >= 0; j--) {\n\t\t\tconst i = j;\n\t\t\tconst unroll = current !== onDone && this.options.taps[i].type !== \"sync\";\n\t\t\tif (unroll) {\n\t\t\t\tcode += `function _next${i}() {\\n`;\n\t\t\t\tcode += current();\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcurrent = () => `${somethingReturns ? \"return \" : \"\"}_next${i}();\\n`;\n\t\t\t}\n\t\t\tconst done = current;\n\t\t\tconst doneBreak = skipDone => {\n\t\t\t\tif (skipDone) return \"\";\n\t\t\t\treturn onDone();\n\t\t\t};\n\t\t\tconst content = this.callTap(i, {\n\t\t\t\tonError: error => onError(i, error, done, doneBreak),\n\t\t\t\tonResult:\n\t\t\t\t\tonResult &&\n\t\t\t\t\t(result => {\n\t\t\t\t\t\treturn onResult(i, result, done, doneBreak);\n\t\t\t\t\t}),\n\t\t\t\tonDone: !onResult && done,\n\t\t\t\trethrowIfPossible:\n\t\t\t\t\trethrowIfPossible && (firstAsync < 0 || i < firstAsync)\n\t\t\t});\n\t\t\tcurrent = () => content;\n\t\t}\n\t\tcode += current();\n\t\treturn code;\n\t}\n\n\tcallTapsLooping({ onError, onDone, rethrowIfPossible }) {\n\t\tif (this.options.taps.length === 0) return onDone();\n\t\tconst syncOnly = this.options.taps.every(t => t.type === \"sync\");\n\t\tlet code = \"\";\n\t\tif (!syncOnly) {\n\t\t\tcode += \"var _looper = () => {\\n\";\n\t\t\tcode += \"var _loopAsync = false;\\n\";\n\t\t}\n\t\tcode += \"var _loop;\\n\";\n\t\tcode += \"do {\\n\";\n\t\tcode += \"_loop = false;\\n\";\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.loop) {\n\t\t\t\tcode += `${this.getInterceptor(i)}.loop(${this.args({\n\t\t\t\t\tbefore: interceptor.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t}\n\t\t}\n\t\tcode += this.callTapsSeries({\n\t\t\tonError,\n\t\t\tonResult: (i, result, next, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += \"_loop = true;\\n\";\n\t\t\t\tif (!syncOnly) code += \"if(_loopAsync) _looper();\\n\";\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += `} else {\\n`;\n\t\t\t\tcode += next();\n\t\t\t\tcode += `}\\n`;\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone:\n\t\t\t\tonDone &&\n\t\t\t\t(() => {\n\t\t\t\t\tlet code = \"\";\n\t\t\t\t\tcode += \"if(!_loop) {\\n\";\n\t\t\t\t\tcode += onDone();\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\treturn code;\n\t\t\t\t}),\n\t\t\trethrowIfPossible: rethrowIfPossible && syncOnly\n\t\t});\n\t\tcode += \"} while(_loop);\\n\";\n\t\tif (!syncOnly) {\n\t\t\tcode += \"_loopAsync = true;\\n\";\n\t\t\tcode += \"};\\n\";\n\t\t\tcode += \"_looper();\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\tcallTapsParallel({\n\t\tonError,\n\t\tonResult,\n\t\tonDone,\n\t\trethrowIfPossible,\n\t\tonTap = (i, run) => run()\n\t}) {\n\t\tif (this.options.taps.length <= 1) {\n\t\t\treturn this.callTapsSeries({\n\t\t\t\tonError,\n\t\t\t\tonResult,\n\t\t\t\tonDone,\n\t\t\t\trethrowIfPossible\n\t\t\t});\n\t\t}\n\t\tlet code = \"\";\n\t\tcode += \"do {\\n\";\n\t\tcode += `var _counter = ${this.options.taps.length};\\n`;\n\t\tif (onDone) {\n\t\t\tcode += \"var _done = () => {\\n\";\n\t\t\tcode += onDone();\n\t\t\tcode += \"};\\n\";\n\t\t}\n\t\tfor (let i = 0; i < this.options.taps.length; i++) {\n\t\t\tconst done = () => {\n\t\t\t\tif (onDone) return \"if(--_counter === 0) _done();\\n\";\n\t\t\t\telse return \"--_counter;\";\n\t\t\t};\n\t\t\tconst doneBreak = skipDone => {\n\t\t\t\tif (skipDone || !onDone) return \"_counter = 0;\\n\";\n\t\t\t\telse return \"_counter = 0;\\n_done();\\n\";\n\t\t\t};\n\t\t\tcode += \"if(_counter <= 0) break;\\n\";\n\t\t\tcode += onTap(\n\t\t\t\ti,\n\t\t\t\t() =>\n\t\t\t\t\tthis.callTap(i, {\n\t\t\t\t\t\tonError: error => {\n\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\tcode += \"if(_counter > 0) {\\n\";\n\t\t\t\t\t\t\tcode += onError(i, error, done, doneBreak);\n\t\t\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonResult:\n\t\t\t\t\t\t\tonResult &&\n\t\t\t\t\t\t\t(result => {\n\t\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\t\tcode += \"if(_counter > 0) {\\n\";\n\t\t\t\t\t\t\t\tcode += onResult(i, result, done, doneBreak);\n\t\t\t\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\tonDone:\n\t\t\t\t\t\t\t!onResult &&\n\t\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\t\treturn done();\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\trethrowIfPossible\n\t\t\t\t\t}),\n\t\t\t\tdone,\n\t\t\t\tdoneBreak\n\t\t\t);\n\t\t}\n\t\tcode += \"} while(false);\\n\";\n\t\treturn code;\n\t}\n\n\targs({ before, after } = {}) {\n\t\tlet allArgs = this._args;\n\t\tif (before) allArgs = [before].concat(allArgs);\n\t\tif (after) allArgs = allArgs.concat(after);\n\t\tif (allArgs.length === 0) {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\treturn allArgs.join(\", \");\n\t\t}\n\t}\n\n\tgetTapFn(idx) {\n\t\treturn `_x[${idx}]`;\n\t}\n\n\tgetTap(idx) {\n\t\treturn `_taps[${idx}]`;\n\t}\n\n\tgetInterceptor(idx) {\n\t\treturn `_interceptors[${idx}]`;\n\t}\n}\n\nmodule.exports = HookCodeFactory;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass HookMap {\n\tconstructor(factory) {\n\t\tthis._map = new Map();\n\t\tthis._factory = factory;\n\t\tthis._interceptors = [];\n\t}\n\n\tget(key) {\n\t\treturn this._map.get(key);\n\t}\n\n\tfor(key) {\n\t\tconst hook = this.get(key);\n\t\tif (hook !== undefined) {\n\t\t\treturn hook;\n\t\t}\n\t\tlet newHook = this._factory(key);\n\t\tconst interceptors = this._interceptors;\n\t\tfor (let i = 0; i < interceptors.length; i++) {\n\t\t\tnewHook = interceptors[i].factory(key, newHook);\n\t\t}\n\t\tthis._map.set(key, newHook);\n\t\treturn newHook;\n\t}\n\n\tintercept(interceptor) {\n\t\tthis._interceptors.push(\n\t\t\tObject.assign(\n\t\t\t\t{\n\t\t\t\t\tfactory: (key, hook) => hook\n\t\t\t\t},\n\t\t\t\tinterceptor\n\t\t\t)\n\t\t);\n\t}\n\n\ttap(key, options, fn) {\n\t\treturn this.for(key).tap(options, fn);\n\t}\n\n\ttapAsync(key, options, fn) {\n\t\treturn this.for(key).tapAsync(options, fn);\n\t}\n\n\ttapPromise(key, options, fn) {\n\t\treturn this.for(key).tapPromise(options, fn);\n\t}\n}\n\nmodule.exports = HookMap;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\n\nclass MultiHook {\n\tconstructor(hooks) {\n\t\tthis.hooks = hooks;\n\t}\n\n\ttap(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tap(options, fn);\n\t\t}\n\t}\n\n\ttapAsync(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tapAsync(options, fn);\n\t\t}\n\t}\n\n\ttapPromise(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tapPromise(options, fn);\n\t\t}\n\t}\n\n\tisUsed() {\n\t\tfor (const hook of this.hooks) {\n\t\t\tif (hook.isUsed()) return true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tintercept(interceptor) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.intercept(interceptor);\n\t\t}\n\t}\n\n\twithOptions(options) {\n\t\treturn new MultiHook(this.hooks.map(h => h.withOptions(options)));\n\t}\n}\n\nmodule.exports = MultiHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonResult: (i, result, next) =>\n\t\t\t\t`if(${result} !== undefined) {\\n${onResult(\n\t\t\t\t\tresult\n\t\t\t\t)};\\n} else {\\n${next()}}\\n`,\n\t\t\tresultReturns,\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncBailHookCodeFactory();\n\nclass SyncBailHook extends Hook {\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncBailHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncBailHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncHookCodeFactory();\n\nclass SyncHook extends Hook {\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncLoopHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsLooping({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncLoopHookCodeFactory();\n\nclass SyncLoopHook extends Hook {\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncLoopHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncLoopHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncLoopHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncWaterfallHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonResult: (i, result, next) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += `${this._args[0]} = ${result};\\n`;\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcode += next();\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone: () => onResult(this._args[0]),\n\t\t\tdoneReturns: resultReturns,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncWaterfallHookCodeFactory();\n\nclass SyncWaterfallHook extends Hook {\n\tconstructor(args) {\n\t\tsuper(args);\n\t\tif (args.length < 1)\n\t\t\tthrow new Error(\"Waterfall hooks must have at least one argument\");\n\t}\n\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncWaterfallHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncWaterfallHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncWaterfallHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst util = require(\"util\");\nconst SyncBailHook = require(\"./SyncBailHook\");\n\nfunction Tapable() {\n\tthis._pluginCompat = new SyncBailHook([\"options\"]);\n\tthis._pluginCompat.tap(\n\t\t{\n\t\t\tname: \"Tapable camelCase\",\n\t\t\tstage: 100\n\t\t},\n\t\toptions => {\n\t\t\toptions.names.add(\n\t\t\t\toptions.name.replace(/[- ]([a-z])/g, (str, ch) => ch.toUpperCase())\n\t\t\t);\n\t\t}\n\t);\n\tthis._pluginCompat.tap(\n\t\t{\n\t\t\tname: \"Tapable this.hooks\",\n\t\t\tstage: 200\n\t\t},\n\t\toptions => {\n\t\t\tlet hook;\n\t\t\tfor (const name of options.names) {\n\t\t\t\thook = this.hooks[name];\n\t\t\t\tif (hook !== undefined) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hook !== undefined) {\n\t\t\t\tconst tapOpt = {\n\t\t\t\t\tname: options.fn.name || \"unnamed compat plugin\",\n\t\t\t\t\tstage: options.stage || 0\n\t\t\t\t};\n\t\t\t\tif (options.async) hook.tapAsync(tapOpt, options.fn);\n\t\t\t\telse hook.tap(tapOpt, options.fn);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t);\n}\nmodule.exports = Tapable;\n\nTapable.addCompatLayer = function addCompatLayer(instance) {\n\tTapable.call(instance);\n\tinstance.plugin = Tapable.prototype.plugin;\n\tinstance.apply = Tapable.prototype.apply;\n};\n\nTapable.prototype.plugin = util.deprecate(function plugin(name, fn) {\n\tif (Array.isArray(name)) {\n\t\tname.forEach(function(name) {\n\t\t\tthis.plugin(name, fn);\n\t\t}, this);\n\t\treturn;\n\t}\n\tconst result = this._pluginCompat.call({\n\t\tname: name,\n\t\tfn: fn,\n\t\tnames: new Set([name])\n\t});\n\tif (!result) {\n\t\tthrow new Error(\n\t\t\t`Plugin could not be registered at '${name}'. Hook was not found.\\n` +\n\t\t\t\t\"BREAKING CHANGE: There need to exist a hook at 'this.hooks'. \" +\n\t\t\t\t\"To create a compatibility layer for this hook, hook into 'this._pluginCompat'.\"\n\t\t);\n\t}\n}, \"Tapable.plugin is deprecated. Use new API on `.hooks` instead\");\n\nTapable.prototype.apply = util.deprecate(function apply() {\n\tfor (var i = 0; i < arguments.length; i++) {\n\t\targuments[i].apply(this);\n\t}\n}, \"Tapable.apply is deprecated. Call apply on the plugin directly instead\");\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nexports.__esModule = true;\nexports.Tapable = require(\"./Tapable\");\nexports.SyncHook = require(\"./SyncHook\");\nexports.SyncBailHook = require(\"./SyncBailHook\");\nexports.SyncWaterfallHook = require(\"./SyncWaterfallHook\");\nexports.SyncLoopHook = require(\"./SyncLoopHook\");\nexports.AsyncParallelHook = require(\"./AsyncParallelHook\");\nexports.AsyncParallelBailHook = require(\"./AsyncParallelBailHook\");\nexports.AsyncSeriesHook = require(\"./AsyncSeriesHook\");\nexports.AsyncSeriesBailHook = require(\"./AsyncSeriesBailHook\");\nexports.AsyncSeriesWaterfallHook = require(\"./AsyncSeriesWaterfallHook\");\nexports.HookMap = require(\"./HookMap\");\nexports.MultiHook = require(\"./MultiHook\");\n","exports.isatty = function () { return false; };\n\nfunction ReadStream() {\n  throw new Error('tty.ReadStream is not implemented');\n}\nexports.ReadStream = ReadStream;\n\nfunction WriteStream() {\n  throw new Error('tty.ReadStream is not implemented');\n}\nexports.WriteStream = WriteStream;\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as NIL } from './nil.js';\nexport { default as version } from './version.js';\nexport { default as validate } from './validate.js';\nexport { default as stringify } from './stringify.js';\nexport { default as parse } from './parse.js';","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import { WActions } from './Itypes';\nimport { ClearAckAction, SyncPrepareAction, SyncRequestAction, SyncPrepareAckAction, SyncAction } from './Actions';\nimport logger from '../debug';\nimport EventEmitter from 'eventemitter3';\nimport * as ActionUtils from './ActionUtils';\nimport { getKiloBytes } from './utils';\nimport pako from 'pako';\nimport globalHub from './Model/GlobalHub';\n/**\n *  在WebSocket里传输的是Command, 白板内使用的是Action\n */\nwindow.pako = pako;\nexport default class SyncManager extends EventEmitter {\n    constructor(account) {\n        super();\n        /**\n         * 是广播消息给所有用户吗？？ 不太确定。account === 0的时候表示发送给所有用户么？\n         *\n         * 文件动作如果是重复文件，则不重复推送\n         *\n         * @param anyAction\n         */\n        this.broadcastAction = (anyAction) => {\n            // 广播消息前 预处理一些数据\n            let action = anyAction.action;\n            if (action.TYPE === WActions.FILE) {\n                let fileAction = action;\n                let { file } = fileAction;\n                console.log(file);\n                const isSameDoc = this.fileData && file.docId && file.docId === this.fileData.docId;\n                if (this.fileData && JSON.stringify(file) === JSON.stringify(this.fileData)) {\n                    return; // 如果两次文件相同，就不推入队列了\n                }\n                if (file.type === 'clear') {\n                    this.setFileData(undefined);\n                }\n                else {\n                    this.setFileData(file);\n                }\n            }\n            this.pushQueue(0, anyAction);\n            //   this.commandManager.revoke(this.account)\n        };\n        this.account = account;\n        this.dataQue = {}; // Map<uid, List<command>>\n        // this.fileData // Map<uid, command>\n        this.lastDataMap = {}; // Map<uid, command>\n        this.shadowUsers = {};\n        this.doNotSendBefore = Date.now();\n        this.startLoop();\n    }\n    /**\n     * 将用户的动作推入该用户的队列中：this.dataQue[account]\n     *\n     * @param account\n     * @param action\n     */\n    pushQueue(account, action) {\n        logger.m.syncmanager('pushQueue', account, action);\n        if (typeof action.action === 'undefined') {\n            let error = new Error('ss');\n            console.log(error.stack);\n        }\n        // const commandStr = JSON.stringify(action)\n        // if (this.lastDataMap[account] === commandStr) {\n        //   return\n        // }\n        // this.lastDataMap[account] = commandStr\n        this.dataQue[account] = this.dataQue[account] || [];\n        this.dataQue[account].push(action);\n    }\n    /**\n     * 将obj转化为协议中约定的格式，然后调用flush函数发送数据\n     *\n     * @param obj\n     * @param delayBase\n     */\n    send(obj, delayBase) {\n        const { toAccount, actions } = obj;\n        if (!actions || actions.length < 1)\n            return;\n        const dataStr = ActionUtils.packBulk(actions.filter(x => !!x));\n        console.log('send', dataStr);\n        // 如果文本长度超过10个字，就使用gzip压缩方式传输,这个方式的传输比较\n        if (dataStr.length > 10 && (\"\" + toAccount !== '0')) {\n            let datas = this.gzipStr(dataStr);\n            datas.forEach((data, index) => {\n                this.flush({ toAccount, data }, index, delayBase);\n            });\n        }\n        else {\n            const data = { toAccount, data: dataStr };\n            this.flush(data, 0, delayBase);\n            logger.m.syncmanager('sendRaw:\\n', data);\n        }\n    }\n    /**\n     * 触发'flush'事件。\n     *\n     * 在core/index.js中，syncManager监听flush事件，然后调用connector.sendData发送数据\n     */\n    flush(data, delayIndex = 0, delayBase = 200) {\n        setTimeout(() => {\n            this.emit('flush', data);\n        }, delayBase * delayIndex);\n    }\n    /**\n     * 发送“清除响应”\n     *\n     * @param account\n     */\n    makeClearAck(account) {\n        this.send({\n            toAccount: account,\n            actions: [{ action: new ClearAckAction() }]\n        });\n    }\n    /**\n     * 发送“同步准备”\n     */\n    makeSyncPrepare() {\n        this.send({\n            toAccount: 0,\n            actions: [{ action: new SyncPrepareAction() }]\n        });\n    }\n    /**\n     * 发送“同步准备回应”\n     *\n     * @param account\n     */\n    makeSyncPrepareAck(account) {\n        this.send({\n            toAccount: 0,\n            actions: [{ action: new SyncPrepareAckAction() }]\n        });\n    }\n    gzipStr(str, doTag = true) {\n        console.log('gzip stirng:', str);\n        const gziped = pako.gzip(str, { to: 'string' });\n        console.log('gzip stirng:', pako.gzip(str));\n        const kiloBytes = getKiloBytes(gziped);\n        let dataArr = [];\n        if (kiloBytes > 49) {\n            const len = gziped.length;\n            let begin = 0;\n            while (begin < len) {\n                //每次取的字符长度 =  49KB（长度限制） * 1024 Byte/KB / 2 Byte（每个字符占用两个字节）\n                dataArr.push(gziped.substr(begin, 25088));\n                begin += 25088;\n            }\n        }\n        else {\n            dataArr.push(gziped);\n        }\n        if (doTag) {\n            const version = 1;\n            let { length } = dataArr;\n            let id = '' + Date.now() + '.' + Math.floor(Math.random() * 1000) +\n                Math.floor(Math.random() * 1000) +\n                Math.floor(Math.random() * 1000);\n            dataArr = dataArr.map((data, index) => `GZIP:${version}|${id}|${length}|${index}|=||=|${data}`);\n        }\n        return dataArr;\n    }\n    /**\n     * 发送“同步请求”\n     *\n     * @param account\n     */\n    makeSyncRequest(account) {\n        this.send({\n            toAccount: account,\n            actions: [{ action: new SyncRequestAction() }]\n        });\n    }\n    // 向account发送同步数据；TODO：做 相互抵消的重做、撤销 命令的过滤\n    /**\n     * 向toAccount发送同步数据, snapshot包含现有图形\n     *\n     * @param toAccount\n     * @param snapshot\n     */\n    syncTo(toAccount, snapshot) {\n        if (this.fileData) {\n            snapshot.file = this.fileData;\n        }\n        let action = new SyncAction(snapshot);\n        this.send({ toAccount, actions: [{ action }] });\n    }\n    /**\n     * 清空画布\n     */\n    clear() {\n        console.warn('clear sync manager');\n        this.dataQue = {};\n    }\n    /**\n     * 在msTime到来前，先不要发送数据\n     *\n     * @param msTime\n     */\n    delayMS(msTime) {\n        this.doNotSendBefore = Date.now() + msTime;\n    }\n    /**\n     * 每100ms将队列中所有动作发出。\n     */\n    startLoop() {\n        this.timer = setInterval(() => {\n            if (Date.now() < this.doNotSendBefore) {\n                return;\n            }\n            var dq = this.dataQue;\n            Object.keys(dq).forEach(key => {\n                if (!dq[key] || dq[key].length < 1) {\n                    return;\n                }\n                if (this.send) {\n                    this.send({ toAccount: key, actions: dq[key] });\n                    dq[key].length = 0;\n                }\n            });\n        }, 100);\n    }\n    /**\n     * 销毁syncManager\n     */\n    destroy() {\n        this.timer && clearInterval(this.timer);\n        this.timer = undefined;\n        this.dataQue = {};\n    }\n    /**\n     * 设置文件数据\n     * @param data\n     */\n    setFileData(data) {\n        this.fileData = data;\n        globalHub.emit('globalFile', this.fileData);\n    }\n}\nSyncManager.GZIP_TESTER_1 = /1\\|([\\d.]+)\\|(\\d+)\\|(\\d+)\\|=\\|\\|=\\|/;\n","import logger from \"../debug\";\nimport { StartAction, MoveAction, EndAction, ClearAckAction, LaserPenAction, LaserPenEndAction, RevokeAction, SerialAction, ClearAction, FileAction, CalibrateAction, SyncRequestAction, SyncPrepareAction, SyncPrepareAckAction } from \"./Actions\";\n/**\n *  这个文件是新白板的录制回放，需要播放以前录制的白板文件，所以需要兼容老旧的第一版协议,来适配新版本.\n *\n */\n/**\n * 老版本不需要发松消息，如果想做兼容的，所以这个没什么用\n */\nexport function packBulk(anyActions) {\n    let str = anyActions.map(anyAction => pack(anyAction)).join(';') + ';';\n    logger.m.syncmanager('packBulk anyAction', str);\n    return str;\n}\n/**\n * 老版本不需要发松消息，如果想做兼容的，所以这个没什么用\n */\nexport function pack(anyAction, isP2P) {\n    logger.m.syncmanager('pack anyAction', anyAction);\n    console.assert(anyAction.action !== undefined, 'ooops');\n    let { action } = anyAction;\n    let str = action.toString();\n    return str;\n}\nexport function unpackBulk(data) {\n    var actions = [];\n    const ops = data.split(';');\n    ops.forEach(op => {\n        const action = unpack(op);\n        if (action) {\n            if (Array.isArray(action)) {\n                while (action.length) {\n                    let tmp = action.shift();\n                    if (tmp) {\n                        actions.push(tmp);\n                    }\n                }\n            }\n            else {\n                actions.push(action);\n            }\n        }\n    });\n    return actions;\n}\nexport function unpack(data) {\n    if (!data) {\n        return;\n    }\n    const actionIndex = data.indexOf(':');\n    logger.m.syncmanager('unpack command ', data);\n    let action;\n    let valueStr;\n    if (actionIndex == -1) {\n        action = +data;\n        valueStr = '';\n    }\n    else {\n        action = +(data.slice(0, actionIndex));\n        valueStr = data.slice(actionIndex + 1, data.length);\n    }\n    let value = valueStr.length > 1 ? valueStr.split(',') : [];\n    logger.command('unpack', data);\n    switch (action) {\n        case 1 /* START */: {\n            let ret = [new StartAction(+value[0], +value[1])];\n            if (value[2]) {\n                ret.unshift(new CalibrateAction({ color: formatColor(value[2]) }));\n            }\n            return ret;\n        }\n        case 2 /* MOVE */: {\n            let ret = [new MoveAction(+value[0], +value[1])];\n            if (value[2]) {\n                ret.unshift(new CalibrateAction({ color: formatColor(value[2]) }));\n            }\n            return ret;\n        }\n        case 3 /* END */: {\n            let ret = [new EndAction(+value[0], +value[1])];\n            if (value[2]) {\n                ret.unshift(new CalibrateAction({ color: formatColor(value[2]) }));\n            }\n            return ret;\n        }\n        case 12 /* LASER_PEN */: {\n            return new LaserPenAction(+value[0], +value[1]);\n        }\n        case 13 /* LASER_PEN_END */:\n            return new LaserPenEndAction();\n        case 4 /* REVOKE */:\n            return new RevokeAction();\n        case 5 /* SERIAL */:\n            return new SerialAction();\n        case 6 /* CLEAR */:\n            return new ClearAction();\n        case 7 /* CLEAR_ACK */:\n            return new ClearAckAction();\n        case 8 /* SYNC_REQUEST */:\n            return new SyncRequestAction(); // TODO\n        case 9 /* SYNC */:\n            console.warn('收到了同步指令，未做兼容，请联系云信技术支持');\n            return undefined;\n        // return {\n        //   action: action,\n        //   sync: {\n        //     account: value[0],\n        //     dataMap: {},\n        //     all: value[1] as '0' | '1',\n        //     index: +value[2],\n        //     num: +value[3]\n        //   }\n        // }\n        case 10 /* SYNC_PREPARE */:\n            return new SyncPrepareAction();\n        case 11 /* SYNC_PREPARE_ACK */:\n            return new SyncPrepareAckAction();\n        case 14 /* FILE */:\n            return new FileAction({\n                docId: value[0],\n                currentPage: +value[1],\n                pageCount: +value[2],\n                type: value[2] == '0' ? 'clear' : 'img'\n            });\n        // return {\n        //   action: action,\n        //   file: {\n        //     docId: value[0] || '',\n        //     currentPage: value[1] || '',\n        //     pageCount: value[2] || '',\n        //     type: value[3] === '0' ? 'img' : (value[3] === '1' ? 'h5' : ''),\n        //     url: value[4] || '',\n        //     urlStr: value[5] || '',\n        //     h5Cmd: value[6] || ''\n        //   }\n        // }\n        // case OLD_ACTION.REDO:\n        //   return RedoAction.fromString(valueStr)\n        // case OLD_ACTION.CALIBRATE:\n        //   return CalibrateAction.fromString(valueStr)\n        // case OLD_ACTION.TEXT:\n        //   return TextAction.fromString(valueStr)\n        default:\n            const fullCaseChecker = action;\n    }\n}\nexport function formatColor(color, format = 16) {\n    if (!color)\n        return -1;\n    let res = '';\n    if (format === 16) {\n        color = +color;\n        if (color < 0) {\n            res = hex2rgb(color);\n            console.log('hex2rgb', color, res);\n            return res;\n        }\n        res = color.toString(16);\n        if (res.length < 3) {\n            res = ('000' + res).slice(-3);\n        }\n        if (res.length > 3 && res.length < 6) {\n            res = ('000' + res).slice(-6);\n        }\n        res = '#' + res;\n        //console.log('formatColor 16', color, res)\n        return res;\n    }\n    else if (format === 10) {\n        res = color.replace(/#/gi, '');\n        res = parseInt('0x' + res);\n        //console.log('formatColor 10', color, res)\n        return isNaN(res) ? -1 : res;\n    }\n}\n// rgba转rgb\nexport function hex2rgb(val) {\n    // return '#' + (0x00FFFFFF & val)\n    let alpha = (val >> 24) & 0xff;\n    let red = (val >> 16) & 0xff;\n    let green = (val >> 8) & 0xff;\n    let blue = val & 0xff;\n    red = red.toString(16);\n    green = green.toString(16);\n    blue = blue.toString(16);\n    console.log('rgb', red, green, blue);\n    return ('#' +\n        ('0' + red).slice(-2) +\n        ('0' + green).slice(-2) +\n        ('0' + blue).slice(-2));\n}\n","import logger from \"../debug\";\nimport { WActions } from \"./Itypes\";\nimport { StartAction, MoveAction, EndAction, ClearAckAction, LaserPenAction, LaserPenEndAction, SyncAction, RevokeAction, SerialAction, ClearAction, RedoAction, FileAction, CalibrateAction, SyncRequestAction, SyncPrepareAction, SyncPrepareAckAction, TextAction, VersionAction } from \"./Actions\";\n/**\n *  在WebSocket里传输的是Command, 白板内使用的是Action\n */\n/**\n * 将Array<Action>转化为command字符串。command之间用分号连接\n *\n * @param anyActions\n */\nexport function packBulk(anyActions) {\n    let str = anyActions.map(anyAction => pack(anyAction)).join(';') + ';';\n    logger.m.syncmanager('packBulk anyAction', str);\n    return str;\n}\n/**\n * 将动作转化为字符串(command)\n *\n * 示例：\n * 输入： MoveAction(x=0.3, y=0.5)\n * 输出： “2:0.3, 0.5”\n *\n * @param anyAction\n * @param isP2P\n */\nexport function pack(anyAction, isP2P) {\n    logger.m.syncmanager('pack anyAction', anyAction);\n    console.assert(anyAction.action !== undefined, 'ooops');\n    let { action } = anyAction;\n    let str = action.toString();\n    return str;\n}\n/**\n * 将连续的command转换为Array<Action>\n *\n * @param data\n */\nexport function unpackBulk(data) {\n    var actions = [];\n    const ops = data.split(';');\n    ops.forEach(op => {\n        const action = unpack(op);\n        if (action) {\n            actions.push(action);\n        }\n    });\n    return actions;\n}\n/**\n * 将command转化为action。action是js对象，包含动作的各个属性值。\n *\n * 示例：\n * 输入： \"2:0.3,0.5\"\n * 输出： MoveAction(x=0.3, y=0.5)\n *\n * @param data\n */\nexport function unpack(data) {\n    if (!data) {\n        return;\n    }\n    const actionIndex = data.indexOf(':');\n    logger.m.syncmanager('unpack command ', data);\n    let action;\n    let valueStr;\n    /**\n     * +data将data转换为数值\n     * 若actionIndex == -1, 则该命令没有附加valueStr。\n     */\n    if (actionIndex == -1) {\n        action = +data;\n        valueStr = '';\n    }\n    else {\n        action = +(data.slice(0, actionIndex));\n        valueStr = data.slice(actionIndex + 1, data.length);\n    }\n    logger.command('unpack', data);\n    switch (action) {\n        case WActions.START:\n            return StartAction.fromString(valueStr);\n        case WActions.MOVE:\n            return MoveAction.fromString(valueStr);\n        case WActions.END:\n            return EndAction.fromString(valueStr);\n        case WActions.REVOKE:\n            return RevokeAction.fromString(valueStr);\n        case WActions.SERIAL:\n            return SerialAction.fromString(valueStr);\n        case WActions.CLEAR:\n            return ClearAction.fromString(valueStr);\n        case WActions.CLEAR_ACK:\n            return ClearAckAction.fromString(valueStr);\n        case WActions.LASER_PEN:\n            return LaserPenAction.fromString(valueStr);\n        case WActions.SYNC_REQUEST:\n            return SyncRequestAction.fromString(valueStr); // TODO\n        case WActions.SYNC:\n            return SyncAction.fromString(valueStr);\n        // return {\n        //   action: action,\n        //   sync: {\n        //     account: value[0],\n        //     dataMap: {},\n        //     all: value[1] as '0' | '1',\n        //     index: +value[2],\n        //     num: +value[3]\n        //   }\n        // }\n        case WActions.SYNC_PREPARE:\n            return SyncPrepareAction.fromString(valueStr);\n        case WActions.SYNC_PREPARE_ACK:\n            return SyncPrepareAckAction.fromString(valueStr);\n        case WActions.LASER_PEN_END:\n            return LaserPenEndAction.fromString(valueStr);\n        case WActions.FILE:\n            return FileAction.fromString(valueStr);\n        // return {\n        //   action: action,\n        //   file: {\n        //     docId: value[0] || '',\n        //     currentPage: value[1] || '',\n        //     pageCount: value[2] || '',\n        //     type: value[3] === '0' ? 'img' : (value[3] === '1' ? 'h5' : ''),\n        //     url: value[4] || '',\n        //     urlStr: value[5] || '',\n        //     h5Cmd: value[6] || ''\n        //   }\n        // }\n        case WActions.REDO:\n            return RedoAction.fromString(valueStr);\n        case WActions.CALIBRATE:\n            return CalibrateAction.fromString(valueStr);\n        case WActions.TEXT:\n            return TextAction.fromString(valueStr);\n        case WActions.VERSION:\n            return VersionAction.fromString(valueStr);\n        default:\n            const fullCaseChecker = action;\n    }\n}\n","/**\n * 定义如何从字符串中解析动作，以及如何将动作转换为字符串(command)。\n */\nimport { WActions } from \"../Itypes\";\nconst encodeNumber = (n) => {\n    if (n === 0 || n < 0) {\n        return '0';\n    }\n    if (n === 1 || n > 1) {\n        return '1';\n    }\n    return n.toFixed(4).slice(2); // 4位已经够了\n};\nconst decodeNumber = (str) => {\n    if (str === '0') {\n        return 0;\n    }\n    if (str === '1') {\n        return 1;\n    }\n    return parseFloat('0.' + str);\n};\nconst stringify = (obj, props) => {\n    if (typeof obj === 'string') {\n        return obj;\n    }\n    else {\n        let str = JSON.stringify(obj, props);\n        return str.replace(/;/gm, '；')\n            .replace(/,/gm, '，')\n            .replace(/:/gm, '¦');\n    }\n};\nconst unstringify = (str) => {\n    let originStr = str.replace(/；/gm, ';')\n        .replace(/，/gm, ',')\n        .replace(/¦/gm, ':');\n    return JSON.parse(originStr);\n};\nclass IAction {\n    constructor() { }\n}\nexport class StartAction extends IAction {\n    constructor(x, y) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.START;\n    }\n    static fromString(str) {\n        // version 1: x, y\n        let pis = str.split(',');\n        let action = new StartAction(decodeNumber(pis[0]), decodeNumber(pis[1]));\n        return action;\n    }\n    toString() {\n        let x = encodeNumber(this.x);\n        let y = encodeNumber(this.y);\n        return `${this.TYPE}:${x},${y}`;\n    }\n}\nexport class MoveAction extends StartAction {\n    constructor(x, y) {\n        super(x, y);\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.MOVE;\n    }\n    static fromString(str) {\n        let pis = str.split(',');\n        return new MoveAction(decodeNumber(pis[0]), decodeNumber(pis[1]));\n    }\n}\nexport class EndAction extends StartAction {\n    constructor(x, y) {\n        super(x, y);\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.END;\n    }\n    static fromString(str) {\n        let pis = str.split(',');\n        return new EndAction(decodeNumber(pis[0]), decodeNumber(pis[1]));\n    }\n}\nexport class RevokeAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.REVOKE;\n        this.TYPE = WActions.REVOKE;\n    }\n    static fromString(str) {\n        return new RevokeAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class SerialAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SERIAL;\n    }\n    static fromString(str) {\n        return new SerialAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class ClearAction extends IAction {\n    constructor(accounts) {\n        super();\n        this.TYPE = WActions.CLEAR;\n        if (Array.isArray(accounts)) {\n            this.accounts = accounts;\n        }\n        else if (accounts) {\n            this.accounts = [accounts];\n        }\n        else {\n            this.accounts = [];\n        }\n    }\n    static fromString(str) {\n        let accounts = unstringify(str);\n        return new ClearAction(accounts);\n    }\n    toString() {\n        let str = stringify(this.accounts);\n        return `${this.TYPE}:${str}`;\n    }\n}\nexport class ClearAckAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.CLEAR_ACK;\n    }\n    static fromString(str) {\n        return new ClearAckAction();\n    }\n    toString() {\n        return `${this.TYPE}:`;\n    }\n}\nexport class SyncRequestAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SYNC_REQUEST;\n    }\n    static fromString(str) {\n        return new SyncRequestAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class SyncAction extends IAction {\n    constructor(sync) {\n        super();\n        this.sync = sync;\n        this.TYPE = WActions.SYNC;\n    }\n    static fromString(str) {\n        let snapshot = unstringify(str);\n        return new SyncAction(snapshot);\n    }\n    toString() {\n        let sync = this.sync;\n        let originStr = stringify(sync);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nexport class SyncPrepareAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SYNC_PREPARE;\n    }\n    static fromString(str) {\n        return new SyncPrepareAction();\n    }\n    toString() {\n        let originStr = stringify(this, ['']);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nexport class SyncPrepareAckAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SYNC_PREPARE_ACK;\n    }\n    static fromString(str) {\n        return new SyncPrepareAckAction();\n    }\n    toString() {\n        return `${this.TYPE}:`;\n    }\n}\nexport class LaserPenAction extends StartAction {\n    constructor(x, y) {\n        super(x, y);\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.LASER_PEN;\n    }\n    static fromString(str) {\n        let pis = str.split(',');\n        return new LaserPenAction(+pis[0], +pis[1]);\n    }\n}\nexport class LaserPenEndAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.LASER_PEN_END;\n    }\n    static fromString(str) {\n        return new LaserPenEndAction();\n    }\n    toString() {\n        return `${this.TYPE}:`;\n    }\n}\nexport class FileAction extends IAction {\n    constructor(file) {\n        super();\n        this.file = file;\n        this.TYPE = WActions.FILE;\n    }\n    static fromString(str) {\n        let value = str.split(',');\n        let fileType;\n        if (value[3] === '0') {\n            fileType = 'img';\n        }\n        else if (value[3] === '1') {\n            fileType = 'h5';\n        }\n        else {\n            fileType = 'clear';\n        }\n        let file = {\n            docId: value[0] || '',\n            currentPage: parseInt(value[1] || '1'),\n            pageCount: parseInt(value[2] || '1'),\n            type: fileType || 'img',\n            url: value[4] || '',\n            urlStr: value[5] || '',\n            h5Cmd: value[6] || ''\n        };\n        return new FileAction(file);\n    }\n    static immuteUpdate(fileA, fileB) {\n        const gatherFile = {};\n        const diff = {};\n        FileAction.PROPS.forEach(propName => {\n            let valueOld = fileA[propName];\n            let valueNext = fileB[propName];\n            if (typeof valueNext === 'undefined' || valueNext === '') {\n                gatherFile[propName] = valueOld;\n            }\n            else {\n                if (valueNext !== valueOld) {\n                    diff[propName] = valueNext;\n                    gatherFile[propName] = valueNext;\n                }\n                else {\n                    gatherFile[propName] = valueOld;\n                }\n            }\n        });\n        return [gatherFile, diff];\n    }\n    toString() {\n        let file = this.file;\n        let fileType;\n        if (file.type === 'img') {\n            fileType = '0';\n        }\n        else if (file.type === 'h5') {\n            fileType = '1';\n        }\n        else {\n            fileType = '-1';\n        }\n        return `${this.TYPE}:${file.docId || ''},${file.currentPage || ''},${file.pageCount || ''},${fileType},${file.url || ''},${file.urlStr || ''},${file.h5Cmd || ''}`;\n    }\n}\nFileAction.PROPS = [\n    'docId', 'currentPage',\n    'pageCount', 'type', 'url',\n    'urlStr', 'h5Cmd'\n];\nexport class RedoAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.REDO;\n    }\n    static fromString(str) {\n        return new RedoAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class CalibrateAction extends IAction {\n    constructor(opt) {\n        super();\n        this.TYPE = WActions.CALIBRATE;\n        Object.assign(this, opt);\n    }\n    static fromString(str) {\n        const opt = unstringify(str);\n        return new CalibrateAction(opt);\n    }\n    toString() {\n        const originStr = stringify(this, CalibrateAction.PROPS);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\n// static readonly PROPS = [\n//   'mode', 'tool', 'size', 'color', 'fontsize',\n// ]\nCalibrateAction.USER_PROPS = [\n    'mode', 'tool', 'size', 'color', 'fontsize',\n    'isMouseDown', 'keyDown', 'flagPos',\n];\nCalibrateAction.PROPS = [\n    ...CalibrateAction.USER_PROPS,\n    ...['altKey', 'shiftKey', 'which', 'ctrlKey'],\n    ...['ownerCanvasHeight', 'ownerCanvasWidth'],\n];\nexport class TextAction extends IAction {\n    constructor(x, y, text) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.text = text;\n        this.TYPE = WActions.TEXT;\n    }\n    static fromString(str) {\n        // str.split(',') 不能用，分割，因为用户可能会输入‘，’\n        const { x, y, text } = unstringify(str);\n        return new TextAction(x, y, text);\n    }\n    toString() {\n        const originStr = stringify(this, TextAction.PROPS);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nTextAction.PROPS = ['x', 'y', 'text'];\nexport class VersionAction extends IAction {\n    constructor({ ver, account, gzip, }) {\n        super();\n        this.TYPE = WActions.VERSION;\n        this.ver = ver;\n        this.account = account;\n        this.gzip = gzip;\n    }\n    static fromString(str) {\n        // str.split(',') 不能用，分割，因为用户可能会输入‘，’\n        const { ver, account, gzip, } = unstringify(str);\n        return new VersionAction({\n            ver,\n            account,\n            gzip,\n        });\n    }\n    toString() {\n        const originStr = stringify(this, VersionAction.PROPS);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nVersionAction.PROPS = ['ver', 'account', 'gzip'];\n","import { Coord } from '../Model/Point';\nimport Debug from 'debug';\nimport logger from '../../debug';\n/**\n * 为什么每次开始都需要调用beginPath\n * https://codetheory.in/why-clearrect-might-not-be-clearing-canvas-pixels/\n */\nconst debug = Debug('DrawWorker/CanvasHelper');\nexport function setLineStyle(ctx) {\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n}\n/* eslint-disable camelcase */\nexport function setpixelated(context) {\n    if (context === null) {\n        return;\n    }\n    // context.translate(0.5, 0.5)\n    // context.lineWidth = .5;\n    context['imageSmoothingEnabled'] = false; /* standard */\n    context['mozImageSmoothingEnabled'] = false; /* Firefox */\n    context['oImageSmoothingEnabled'] = false; /* Opera */\n    context['webkitImageSmoothingEnabled'] = false; /* Safari */\n    context['msImageSmoothingEnabled'] = false; /* IE */\n    /* tslint:enable */\n}\n/**\n * 等比例缩放Canvas\n * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n * @param {ResizeCanvasOption} option 缩放比例\n * @private\n */\nexport function setCavansStyleSize(ctx, width, height) {\n    const cvs = ctx.canvas;\n    cvs.style.width = width + 'px';\n    cvs.style.height = height + 'px';\n}\n/**\n * 改变canvas的 width 和大小等等\n *\n * zhongkai: 将ctx内容拷贝到临时画布上，然后再将临时画布的内容拷贝回ctx上。这样做应该是比较低效的(todo)\n *\n * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n * @param {ResizeCanvasOption} option 缩放比例\n * @private\n */\nexport function setCanvasPropSize(ctx, option) {\n    const canvas = ctx.canvas;\n    let skip = false;\n    if (canvas.width == 0 || canvas.height == 0) {\n        skip = true;\n    }\n    const temp = document.createElement('canvas').getContext('2d');\n    if (!skip) {\n        temp.canvas.width = canvas.width;\n        temp.canvas.height = canvas.height;\n        setpixelated(temp);\n        setLineStyle(temp);\n        temp.drawImage(canvas, 0, 0, canvas.width, canvas.height);\n    }\n    canvas.width = option.width;\n    canvas.height = option.height;\n    // canvas.width = option.canvasWidth\n    // canvas.height = option.canvasHeight;\n    setLineStyle(ctx);\n    setpixelated(ctx);\n    if (!skip) {\n        setpixelated(temp);\n        ctx.drawImage(temp.canvas, 0, 0, canvas.width, canvas.height);\n    }\n}\nexport function applyCanvasLayout(canvas, { paddingLeft, paddingTop }) {\n    canvas.style.left = paddingLeft + 'px';\n    canvas.style.top = paddingTop + 'px';\n}\n/**\n   * 清除某个画板的内容\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @private\n   */\nexport function clearCtx(ctx) {\n    ctx.clearRect(-40, -40, ctx.canvas.width + 80, ctx.canvas.height + 80);\n}\n/**\n   * 绘制曲线\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {Coord} start 起始点\n   * @param {Coord} control 控制点\n   * @param {Coord} end 终止点\n   * @param {string} color 颜色\n   * @param {number} size 宽度，笔大小\n   * @private\n   */\nexport function free(ctx, start, control, end, color, size) {\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    ctx.beginPath();\n    // 用三个点画二次曲线，使笔迹光滑，降低锯齿感\n    if (start.x === end.x && start.y === end.y) {\n        // IE下使用quadraticCurveTo无法画点\n        ctx.lineTo(start.x, start.y);\n        //  rect(ctx, start, size / 4, size / 4, false, color)\n        return;\n    }\n    // ctx.beginPath()\n    ctx.moveTo(start.x, start.y);\n    ctx.quadraticCurveTo(control.x, control.y, end.x, end.y);\n    ctx.stroke();\n    debug('free');\n}\n/**\n   * 绘制直线\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {Coord} start 起始点\n   * @param {Coord} end 终止点\n   * @private\n   */\nexport function line(ctx, start, end, color) {\n    logger.log('line', arguments);\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    // ctx.save()\n    ctx.beginPath();\n    ctx.moveTo(start.x, start.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.stroke();\n    // ctx.closePath();\n    // ctx.restore()\n    debug('line');\n}\n/**\n   * 绘制矩形\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {Coord} start 起始点\n   * @param {number} w 宽度，单位px\n   * @param {number} h 高度，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function rect(ctx, start, w, h, fill = false, color) {\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fillRect(start.x, start.y, w, h);\n    }\n    else {\n        ctx.strokeRect(start.x, start.y, w, h);\n    }\n}\n/**\n   * 绘制圆角矩形\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} start 起始点\n   * @param {number} w 宽度，单位px\n   * @param {number} h 高度，单位px\n   * @param {*} radius 圆角半径，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function roundRect(ctx, start, w, h, radius, fill = false, color) {\n    const sx = start.x;\n    const sy = start.y;\n    const radiusX = w < 0 ? -radius : radius;\n    const radiusY = h < 0 ? -radius : radius;\n    ctx.beginPath();\n    ctx.moveTo(sx + radiusX, sy);\n    ctx.lineTo(sx + w - radiusX, sy);\n    ctx.quadraticCurveTo(sx + w, sy, sx + w, sy + radiusY);\n    ctx.lineTo(sx + w, sy + h - radiusY);\n    ctx.quadraticCurveTo(sx + w, sy + h, sx + w - radiusX, sy + h);\n    ctx.lineTo(sx + radiusX, sy + h);\n    ctx.quadraticCurveTo(sx, sy + h, sx, sy + h - radiusY);\n    ctx.lineTo(sx, sy + radiusY);\n    ctx.quadraticCurveTo(sx, sy, sx + radiusX, sy);\n    ctx.stroke();\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n}\n/**\n   * 绘制圆形\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} center 圆心\n   * @param {number} radius 半径，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function circle(ctx, center, radius, fill = false, color) {\n    // console.log('circle', center, radius, fill, color);\n    if (color) {\n        ctx.strokeStyle = color;\n    }\n    ctx.beginPath();\n    // arc(x,y,r,start,stop)\n    // ctx.arc(center.x, center.y, radius, 0, Math.PI * 2, true);\n    ctx.arc(center.x, center.y, radius, 0, Math.PI * 2);\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n    ctx.stroke();\n}\n/**\n   * 绘制椭圆\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} center 圆心\n   * @param {number} xRadius x半径，单位px\n   * @param {number} yRadius y半径，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function ellipse(ctx, center, xRadius, yRadius, fill = false, color) {\n    // console.log('ellipse', center, fill, color);\n    if (color) {\n        ctx.strokeStyle = color;\n    }\n    ctx.beginPath();\n    // arc(x,y,r,start,stop)\n    // ctx.arc(center.x, center.y, radius, 0, Math.PI * 2, true);\n    ctx.ellipse(center.x, center.y, xRadius, yRadius, 0, 0, Math.PI * 2);\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n    ctx.stroke();\n}\nfunction safeColorClamp(x) {\n    if (x < 0) {\n        return 0;\n    }\n    else if (x > 255) {\n        return 255;\n    }\n    else {\n        return x;\n    }\n}\n/**\n   * 为封闭区域填充颜色\n   * 算法是 flood fill（https://en.m.wikipedia.org/wiki/Flood_fill），找了个效率比较高的实现改成了js；也可能是scanline fill。\n   * TODO 为IE做Typed Array的polyfill\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {Coord} s 起始点\n   * @param {String} color 需要填充的颜色\n   * @param {Shape} shape 需要填充的颜色\n   * @private\n   */\nexport function fill(ctx, s, color, shape) {\n    const sx = Math.round(s.x);\n    const sy = Math.round(s.y);\n    ctx.save();\n    ctx.beginPath();\n    const img = ctx.getImageData(0, 0, Math.round(ctx.canvas.width), Math.round(ctx.canvas.height));\n    // logger.image(ctx.canvas.toDataURL(), 'fill, playground')\n    const { height: fullDisplayHeight, width: fullDisplayWidth } = img;\n    if (shape) {\n        shape.ctx.canvas.width = fullDisplayWidth;\n        shape.ctx.canvas.height = fullDisplayHeight;\n        setpixelated(shape.ctx);\n        setLineStyle(shape.ctx);\n    }\n    const X = 0;\n    const Y = 1;\n    const stroke = color || ctx.strokeStyle;\n    const r = parseInt(stroke.substr(1, 2), 16);\n    const g = parseInt(stroke.substr(3, 2), 16);\n    const b = parseInt(stroke.substr(5, 2), 16);\n    // >>> 0 运算转换为无符号32位整数\n    const fillColor = ((255 << 24) | (b << 16) | (g << 8) | r) >>> 0;\n    const start = [sx, sy];\n    // 临时空间，用来缓存填充区域的数据，然后注入到Shape里\n    let shapeImageData = shape.ctx.createImageData(fullDisplayWidth, fullDisplayHeight);\n    const shapeData = new Uint32Array(shapeImageData.data.buffer);\n    // buf8.set(img.data);\n    const data = new Uint32Array(img.data.buffer);\n    const startColor = data[sy * fullDisplayWidth + sx];\n    if (((startColor ^ fillColor) & 0xffffff) === 0) { // 颜色值相等\n        if (startColor >>> 24 === fillColor >>> 24) {\n            return;\n        }\n    }\n    const rgb = startColor & 0x00ffffff;\n    const r_start = (rgb & 0xff) >>> 0;\n    const g_start = (rgb & 0xff00) >>> 8;\n    const b_start = (rgb & 0xff0000) >>> 16;\n    const alpha_start = (startColor & 0xff000000) >>> 24;\n    // 色彩抖动范围\n    const R_MIN = safeColorClamp(r_start - 15);\n    const G_MIN = safeColorClamp(g_start - 15);\n    const B_MIN = safeColorClamp(b_start - 15);\n    const R_MAX = safeColorClamp(r_start + 15);\n    const G_MAX = safeColorClamp(g_start + 15);\n    const B_MAX = safeColorClamp(b_start + 15);\n    // 起点入队列\n    const queue = [start];\n    let curPixel;\n    const maxX = fullDisplayWidth - 1;\n    const maxY = fullDisplayHeight - 1;\n    // 比较颜色是否可以填充\n    function canFill(color) {\n        // return color === startColor\n        if (color === startColor) {\n            return true;\n        }\n        const alpha = (color & 0xff000000) >>> 24;\n        if (alpha_start < 10) { // 如果一开始的颜色是透明的，那么透明色是可以填充的\n            if (alpha === 0) {\n                return true;\n            }\n        }\n        const rgb = (color & 0x00ffffff) >>> 0;\n        const r = (rgb & 0xff) >>> 0;\n        const g = (rgb & 0xff00) >>> 8;\n        const b = (rgb & 0xff0000) >>> 16;\n        // 在颜色抖动范围内\n        if (r >= R_MIN && r <= R_MAX && g >= G_MIN && g <= G_MAX && b >= B_MIN && b <= B_MAX) {\n            // 如果颜色相同 ,且透明度变化在20内\n            if (Math.abs(alpha_start - alpha) < 10) {\n                return true;\n            }\n        }\n        return false;\n        // return color === startColor || (color & 0xff000000) >>> 0 < 0xff000000;\n    }\n    const seen = {};\n    let topLeft = new Coord(Math.round(fullDisplayWidth), Math.round(fullDisplayHeight));\n    let bottomRight = new Coord(0, 0);\n    const getImageDataIndex = (x, y) => y * fullDisplayWidth + x;\n    const getColor = (x, y) => data[getImageDataIndex(x, y)];\n    while ((curPixel = queue.pop())) {\n        const x = curPixel[X];\n        let y = curPixel[Y];\n        // 从当前点往上查找，\n        while (--y >= 0 && canFill(getColor(x, y))) { }\n        y++;\n        let reachLeft = false;\n        let reachRight = false;\n        while (y++ < maxY && canFill(getColor(x, y))) {\n            // 设置坐标点边界，好切出正确的大小\n            topLeft.topLeft(x, y);\n            bottomRight.bottomRight(x + 1, y + 1);\n            let imgDataIndex = getImageDataIndex(x, y); // curPixel[Y] * fullDisplayWidth + curPixel[X]\n            data[imgDataIndex] = fillColor;\n            shapeData[imgDataIndex] = fillColor;\n            seen[imgDataIndex] = true;\n            if (x > 0 && !seen[imgDataIndex - 1]) {\n                if (canFill(data[imgDataIndex - 1])) {\n                    if (!reachLeft) {\n                        queue.push([x - 1, y]);\n                        reachLeft = true;\n                    }\n                }\n                else if (reachLeft) {\n                    reachLeft = false;\n                }\n            }\n            if (x < maxX && !seen[imgDataIndex + 1]) {\n                if (canFill(data[imgDataIndex + 1])) {\n                    if (!reachRight) {\n                        if (!seen[imgDataIndex + 1]) {\n                            queue.push([x + 1, y]);\n                        }\n                        reachRight = true;\n                    }\n                }\n                else if (reachRight) {\n                    reachRight = false;\n                }\n            }\n        }\n    }\n    // img.data.set(buf8);\n    const finalArea = Coord.areaSize(topLeft, bottomRight);\n    logger.log('fill area is ', finalArea);\n    logger.log('fill corner is ', topLeft, bottomRight);\n    shape.corner = [topLeft, bottomRight];\n    shape.ctx.putImageData(shapeImageData, 0, 0);\n    let smallImageData = shape.ctx.getImageData(topLeft.x, topLeft.y, finalArea.width, finalArea.height);\n    logger.log(smallImageData);\n    shape.ctx.canvas.height = smallImageData.height;\n    shape.ctx.canvas.width = smallImageData.width;\n    setpixelated(shape.ctx);\n    setLineStyle(shape.ctx);\n    shape.ctx.putImageData(smallImageData, 0, 0);\n    console.log('shape:', shape.ctx.canvas.toDataURL());\n    clearCtx(ctx);\n    logger.image(ctx.canvas.toDataURL(), 'ctx.canvas');\n    logger.image(shape.ctx.canvas.toDataURL(), 'shape.ctx');\n    ctx.putImageData(img, 0, 0);\n    console.error(shape.ctx.canvas.toDataURL());\n    logger.image(ctx.canvas.toDataURL(), 'final');\n    shape.ctx.beginPath();\n    ctx.restore();\n}\n/**\n   * 绘制字\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} start 起始点\n   * @param {string} text 文本内容\n   * @param {number} size 字体大小，单位px\n   * @param {boolean} fill 是否填充\n   * @private\n   */\nexport function text(ctx, start, text, size, fill = true, color) {\n    const x = start.x;\n    const y = start.y;\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    ctx.font = size + 'px \"微软雅黑\",Arial';\n    ctx.textBaseline = 'top';\n    // ctx.textBaseline = 'bottom';\n    ctx.textAlign = 'left';\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fillText(text, x, y);\n    }\n    else {\n        ctx.strokeText(text, x, y);\n    }\n    ctx.beginPath();\n}\n","import { EventEmitter } from \"eventemitter3\";\nimport * as CanvasHelper from './CanvasHelper';\nimport logger from '../../debug';\nexport default class ContainerManager extends EventEmitter {\n    constructor(container, opt) {\n        super();\n        this.paddingTop = 0; //  这个是画布距离容器顶部的距离\n        this.paddingLeft = 0; // 这个是画布距离容器左边的距离\n        this.canvasRatio = null;\n        // 调整窗口大小后，需要动态调整 canvas 大小，目前 width 为准等比例缩放\n        this.onResize = () => {\n            if (!this.container) {\n                return;\n            }\n            if (this.onResize.waiting) {\n                return;\n            }\n            else {\n                this.onResize.waiting = true;\n                setTimeout(() => {\n                    this.onResize.waiting = false;\n                    this.resize();\n                }, 300);\n            }\n        };\n        /**\n         * 重新设置画布大小，等比例\n         * @param {number} width 画布宽度\n         * @public\n         */\n        this.resize = () => {\n            const width = parseInt('' + this.container.clientWidth);\n            if (isNaN(width) || width <= 0)\n                throw new Error('白板宽度应是大于0的数字');\n            const height = parseInt('' + this.container.clientHeight);\n            if (isNaN(height) || height <= 0)\n                throw new Error('白板高度应是大于0的数字');\n            if (width === 0 || height === 0) {\n                return;\n            }\n            this.containerWidth = width;\n            this.containerHeight = height;\n            if (this.canvasRatio === null) {\n                this.calcCanvasLayout(width / height);\n            }\n            else {\n                this.calcCanvasLayout();\n            }\n            this.updateCanvasStyleSize({\n                // ownerCanvasHeight: ownerCanvasHeight!, ownerCanvasWidth: ownerCanvasWidth!,\n                paddingLeft: this.paddingLeft, paddingTop: this.paddingTop,\n                canvasWidth: this.canvasWidth, canvasHeight: this.canvasHeight,\n            });\n            console.log('resize');\n            if (this.opt && this.opt.identity === 'owner') {\n                if (this.canvasWidth && this.canvasHeight) {\n                }\n                this.emit('ownerCanavasUpdate', this.canvasWidth, this.canvasHeight);\n                const { containerHeight: prevHeight, containerWidth: prevWidth, ownerCanvasHeight, ownerCanvasWidth } = this;\n                this.updateCanvasPropSize(this.canvasWidth, this.canvasHeight);\n            }\n        };\n        this.onUndo = () => {\n            if (this.displayCtx && this.shapes && this.users) {\n                this.fullRender();\n                for (let user of this.users.all) {\n                    if (user.isMouseDown) {\n                        // 防止在clear时 擦除了其他用户正在绘制的笔记，\n                        this.displayCtx.drawImage(user.ctx.canvas, 0, 0);\n                    }\n                }\n            }\n        };\n        this.onRedo = () => {\n            if (this.displayCtx && this.shapes && this.users) {\n                this.fullRender();\n                for (let user of this.users.all) {\n                    if (user.isMouseDown) {\n                        // 防止在clear时 擦除了其他用户正在绘制的笔记，\n                        this.displayCtx.drawImage(user.ctx.canvas, 0, 0);\n                    }\n                }\n            }\n        };\n        this.inputDom = buildInputDom(); // 输入文字的输入框\n        this.opt = opt;\n        this.inited = false;\n        if (!container)\n            return;\n        this.setContainer(container, opt, true);\n    }\n    wrap(shapesmanager, users) {\n        this.clearListener();\n        this.shapes = shapesmanager;\n        this.users = users;\n        this.shapes.on('undo', this.onUndo);\n        this.shapes.on('redo', this.onRedo);\n    }\n    clearListener() {\n        if (this.shapes) {\n            this.shapes.removeAllListeners();\n        }\n    }\n    // 动态设置container\n    setContainer(container, opt, init) {\n        logger.m.containermanager('setContainer', container, opt);\n        if (!(container instanceof HTMLElement)) {\n            throw new Error('画板容器不是HTMLElement实例');\n        }\n        if (this.container) {\n            this.container.removeEventListener('resize', this.onResize);\n            this.container.remove();\n        }\n        this.container = container;\n        container.style.position = 'relative';\n        if (!opt) {\n            if (this.opt) {\n                opt = this.opt;\n            }\n            else {\n                opt = {};\n            }\n        }\n        this.containerHeight = container.clientHeight;\n        this.containerWidth = container.clientWidth;\n        console.warn('canvas height!', opt, this.canvasRatio);\n        // 计算容器宽高比例\n        if (this.canvasRatio === null) {\n            if (opt.height && opt.width) {\n                //如果用户设置了宽高\n                this.canvasHeight = opt.height;\n                this.canvasWidth = opt.width;\n                this.updateCanvasPropSize(this.canvasWidth, this.canvasHeight);\n                this.canvasRatio = this.canvasWidth / this.canvasHeight;\n                // 目前使用的是长宽比去放大图像或者缩小图像\n            }\n            else {\n                this.canvasRatio = this.containerWidth / this.containerHeight;\n            }\n        }\n        let canvasRatio = this.canvasRatio;\n        if (canvasRatio === null) {\n            canvasRatio = this.containerWidth / this.containerHeight;\n        }\n        if (typeof canvasRatio === 'number') {\n            this.calcCanvasLayout(canvasRatio);\n        }\n        this.opt = Object.assign(this.opt, opt);\n        // 设置自己容器的大小\n        if (!this.inited) {\n            this.initEssential();\n        }\n        // 更新 canvas 外部表现的大小，由style属性控制\n        this.updateCanvasStyleSize({\n            // ownerCanvasHeight: ownerCanvasHeight!, ownerCanvasWidth: ownerCanvasWidth!,\n            paddingLeft: this.paddingLeft, paddingTop: this.paddingTop,\n            canvasWidth: this.canvasWidth, canvasHeight: this.canvasHeight,\n        });\n        // 如果是初始化，并且是老师端，需要更新 canvas 内部表现的大小，由width属性控制\n        if (init && this.opt.identity === 'owner') {\n            this.updateCanvasPropSize(this.canvasWidth, this.canvasHeight);\n        }\n        logger.m.containermanager('setContainer/appendChild', this.displayCanvas, this.inputDom);\n        container.appendChild(this.displayCanvas);\n        container.appendChild(this.maskCanvas);\n        container.appendChild(this.inputDom);\n        this.adjustSize = false;\n        window.addEventListener('resize', this.onResize);\n        window.addEventListener(\"orientationchange\", this.onResize, false);\n    }\n    // 计算容器和canvas的布局\n    calcCanvasLayout(ratio = this.canvasRatio) {\n        let containerRatio = this.containerWidth / this.containerHeight;\n        if (containerRatio > ratio) {\n            // 说明容器的宽度要比canvas的宽度要宽一些，应该使用容器的高度作为标准\n            this.canvasHeight = Math.floor(this.containerHeight || 0);\n            this.canvasWidth = Math.floor(this.canvasHeight * ratio);\n        }\n        else {\n            this.canvasWidth = Math.floor(this.containerWidth || 0);\n            this.canvasHeight = Math.floor(this.canvasWidth / ratio);\n        }\n        let heightGap = this.containerHeight - this.canvasHeight;\n        let widthGap = this.containerWidth - this.canvasWidth;\n        this.paddingTop = Math.floor(heightGap / 2);\n        this.paddingLeft = Math.floor(widthGap / 2);\n    }\n    // 初始化canvas环境\n    initEssential() {\n        if (typeof this.containerWidth !== 'number')\n            throw new Error('画板宽度不是数字');\n        if (typeof this.containerHeight !== 'number')\n            throw new Error('画板高度不是数字');\n        const displayCanvas = document.createElement('canvas');\n        this.displayCtx = displayCanvas.getContext('2d');\n        // CanvasHelper.setpixelated(this.displayCtx)\n        CanvasHelper.setLineStyle(this.displayCtx);\n        displayCanvas.setAttribute('data-id', 'displayCanvas');\n        const displayStyle = `\n    position: relative;\n    top: ${this.paddingTop}px;\n    left: ${this.paddingLeft}px;\n    box-sizing: content-box;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-color: #ffffff;\n    background-size: contain;\n    z-index: ${2};\n    `.trim().replace('\\n', '');\n        displayCanvas.style.cssText = displayStyle;\n        this.displayCanvas = displayCanvas;\n        const maskCanvas = document.createElement('canvas');\n        this.maskCtx = maskCanvas.getContext('2d');\n        CanvasHelper.setpixelated(this.maskCtx);\n        CanvasHelper.setLineStyle(this.maskCtx);\n        this.maskCtx.lineWidth = 1;\n        maskCanvas.setAttribute('data-id', 'maskCanvas');\n        const maskStyle = `\n    position: absolute;\n    top: ${this.paddingTop};\n    left: ${this.paddingLeft};\n    box-sizing: content-box;\n    transform: translate3d(0,0,0);\n    z-index: ${500};\n    `.trim().replace('\\n', '');\n        maskCanvas.style.cssText = maskStyle;\n        this.maskCanvas = maskCanvas;\n        this.inited = true;\n        logger.m.containermanager('initCanvas');\n        // 对于可能出现在构造函数里的事件，需要异步抛出，避免初始化时，监听函数还未绑定\n        setTimeout(() => {\n            this.emit('init-canvas');\n            if (this.opt && this.opt.identity === 'owner') {\n                this.emit('ownerCanavasUpdate', this.canvasWidth, this.canvasHeight);\n            }\n        });\n    }\n    /**\n     * 按比例重新变换画布大小\n     * @param {number} scale 变换比例\n     * @public\n     */\n    updateCanvasStyleSize(config) {\n        const { canvasWidth, canvasHeight } = config;\n        if (this.maskCtx && this.maskCanvas) {\n            CanvasHelper.setCavansStyleSize(this.maskCtx, canvasWidth, canvasHeight);\n            CanvasHelper.applyCanvasLayout(this.maskCanvas, config);\n        }\n        if (this.displayCtx && this.displayCanvas) {\n            CanvasHelper.setCavansStyleSize(this.displayCtx, config.canvasWidth, config.canvasHeight);\n            CanvasHelper.applyCanvasLayout(this.displayCanvas, config);\n        }\n        // if (this.shapes) {\n        //   this.shapes.resizeCanvas(config)\n        // }\n        if (this.users) {\n            for (const user of this.users.all) {\n                CanvasHelper.setCavansStyleSize(user.ctx, canvasWidth, canvasHeight);\n                CanvasHelper.applyCanvasLayout(user.ctx.canvas, config);\n            }\n        }\n    }\n    updateCanvasPropSize(width, height) {\n        const { ownerCanvasHeight: prevHeight, ownerCanvasWidth: prevWidth } = this;\n        this.ownerCanvasWidth = width || 300;\n        this.ownerCanvasHeight = height || 300;\n        let opt = { width: this.ownerCanvasWidth, height: this.ownerCanvasHeight };\n        if (this.maskCtx) {\n            CanvasHelper.setCanvasPropSize(this.maskCtx, opt);\n        }\n        if (this.displayCtx) {\n            CanvasHelper.setCanvasPropSize(this.displayCtx, opt);\n        }\n        if (this.users) {\n            for (const user of this.users.all) {\n                CanvasHelper.setCanvasPropSize(user.ctx, { width, height });\n            }\n        }\n        if (this.shapes) {\n            this.shapes.resizeCanvas({\n                widthScale: width / prevWidth, heightScale: height / prevHeight\n            });\n        }\n        // 需要fullrender一下\n        this.fullRender();\n    }\n    // add UserCanvas \n    addUser(currentAccount, user) {\n        const canvas = user.ctx.canvas;\n        const account = user.account;\n        const displayCanvas = this.displayCanvas;\n        // canvas.style.transform = 'translate3d(0,0,0)'\n        canvas.style.position = 'absolute';\n        canvas.style.boxSizing = 'content-box';\n        // canvas.style.transform = 'translate3d(0,0,0)'\n        canvas.style.top = this.paddingTop + 'px';\n        canvas.style.left = this.paddingLeft + 'px';\n        canvas.style.width = this.canvasWidth + 'px';\n        canvas.style.height = this.canvasHeight + 'px';\n        canvas.width = this.ownerCanvasWidth;\n        canvas.height = this.ownerCanvasHeight;\n        logger.m.containermanager('addUser', account, user);\n        if (account === currentAccount) {\n            canvas.style.cursor = 'not-allowed';\n        }\n        else {\n            canvas.style.cursor = 'crosshair';\n        }\n        this.container.appendChild(canvas);\n        CanvasHelper.setpixelated(user.ctx);\n        CanvasHelper.setLineStyle(user.ctx);\n    }\n    destroy() {\n        this.container.removeChild(this.maskCanvas);\n        this.container.removeChild(this.displayCtx.canvas);\n        this.removeAllListeners();\n        window.removeEventListener('resize', this.onResize);\n        window.removeEventListener(\"orientationchange\", this.onResize, false);\n    }\n    fullRender() {\n        if (this.displayCtx) {\n            let playCanvas = this.displayCtx.canvas;\n            CanvasHelper.clearCtx(this.displayCtx);\n            this.displayCtx.getImageData(0, 0, 1, 1); // 这里是为了让canvas重新渲染一下，Chrome，偶尔会有Canvas不更新的问题\n            // playCanvas.width = playCanvas.width;\n        }\n        if (this.shapes && this.displayCtx) {\n            const targetCtx = this.displayCtx;\n            const shapes = this.shapes.visibles;\n            // logger.image(targetCtx.canvas.toDataURL(), 'beforeRender, displayCtx')\n            targetCtx.save();\n            logger.log('displayCtx');\n            for (let i = 0, len = shapes.length; i < len; i++) {\n                let shape = shapes[i];\n                console.assert(typeof shape.ctx !== 'undefined', 'shape ctx is ubdefined', shape);\n                let skip = shape.ctx && (shape.ctx.canvas.width === 0 || shape.ctx.canvas.height === 0);\n                logger.m.containermanager('render shape:', shape, 'skip', skip);\n                if (skip) {\n                    continue;\n                }\n                applyState(targetCtx, shape);\n                // if (shape.mode === 'fill') return fill(ctx, shape.corner[0], shape.color,shape);\n                // -0.5是为了防止重绘时的抖动\n                // targetCtx.drawImage(shape.ctx.canvas, shape.corner[0].x - 0.5, shape.corner[0].y)\n                if (shape.tool === 'erase') {\n                    console.log(targetCtx.globalCompositeOperation);\n                }\n                targetCtx.drawImage(shape.ctx.canvas, shape.corner[0].x, shape.corner[0].y);\n            }\n            targetCtx.restore();\n        }\n        else {\n            logger.m.containermanager('no render', this.shapes, this.displayCtx);\n        }\n    }\n}\nfunction buildInputDom() {\n    let inputDom = document.createElement('input');\n    inputDom.type = 'text';\n    inputDom.autofocus = true;\n    inputDom.className = 'wb-canvas__input';\n    let style = inputDom.style;\n    style.position = 'absolute';\n    style.display = 'none';\n    style.padding = '0px';\n    style.zIndex = '999';\n    return inputDom;\n}\n/**\n * 不同用户的模式、笔大小、颜色都是不同的，在对displayCtx操作时先应用状态\n * @param {string} account 对应用户的ID\n * @param {number} size 笔大小\n * @param {string} color 颜色\n * @param {string} mode 模式\n * @private\n */\nexport function applyState(targetCtx, shapeOrUser) {\n    const { ctx, size, color, tool } = shapeOrUser;\n    // logger.log('applyState', ctx, size, color, tool);\n    if (targetCtx === undefined) {\n        console.warn('applyState上下文为空!');\n        return;\n    }\n    targetCtx.lineWidth = size;\n    targetCtx.strokeStyle = color;\n    targetCtx.fillStyle = color;\n    // 如果 erase 设置了 workCtx 为 destination-out 取到的img不能做正常 撤销 重做\n    if (tool === 'erase' && targetCtx !== ctx) {\n        let opreation = targetCtx.globalCompositeOperation;\n        if (opreation !== 'destination-out') {\n            targetCtx.globalCompositeOperation = 'destination-out'; // 在新图外显示已有图像。只有新图外的已有图像部分会被显示，新图像是透明的。\n        }\n    }\n    else {\n        targetCtx.globalCompositeOperation = 'source-over'; // 默认。在已有图上显示新图像。\n    }\n}\n","import { EventEmitter } from \"eventemitter3\";\nimport { UserManager } from \"./UserManager\";\nimport * as CanvasHelper from './CanvasHelper';\nimport globalHub from \"../Model/GlobalHub\";\nclass ShapesManager extends EventEmitter {\n    constructor() {\n        super();\n        this.onUndo = (user) => {\n            let shape = user.recycle[user.recycle.length - 1];\n            this.remove(shape);\n            this.emit('undo', user);\n        };\n        this.onRedo = (user) => {\n            let shape = user.shapes[user.shapes.length - 1];\n            this.push(shape);\n            this.emit('redo', user);\n        };\n        this.visibles = []; // 存放所有相关的\n        this.transh = [];\n    }\n    push(shape) {\n        this.visibles.push(shape);\n        this.visibles.sort((a, b) => a.id - b.id);\n        // 全局的shapes改变了\n        globalHub.emit('globalShapes', this.visibles.length);\n    }\n    remove(shape) {\n        let index = this.visibles.indexOf(shape);\n        if (~index) {\n            this.visibles.splice(index, 1);\n            // 全局的shapes改变了\n            globalHub.emit('globalShapes', this.visibles.length);\n        }\n    }\n    wrap(another) {\n        if (another instanceof UserManager) {\n            this.clearListener(); // 清除之前的数据\n            this._usernameger = another;\n            this._usernameger.on('undo', this.onUndo);\n            this._usernameger.on('redo', this.onRedo);\n        }\n    }\n    clear() {\n        this.visibles.forEach(shape => {\n            shape.destroy();\n        });\n        this.visibles.length = 0;\n        globalHub.emit('globalShapes', this.visibles.length);\n    }\n    destroy() {\n        // TODO 清空一些数据\n        this.clearListener();\n    }\n    clearListener() {\n        if (this._usernameger) {\n            this._usernameger.removeAllListeners();\n            delete this._usernameger;\n        }\n    }\n    resizeCanvas(config) {\n        const { widthScale, heightScale } = config;\n        this.visibles.forEach(shape => {\n            let { width, height } = shape.ctx.canvas;\n            let newWidth = width * widthScale;\n            let newHeight = height * heightScale;\n            CanvasHelper.setCanvasPropSize(shape.ctx, {\n                height: newHeight, width: newWidth\n            });\n            // CanvasHelper.applyCanvasLayout(shape.ctx.canvas, config)\n            // 这里的corner计算可能有问题。如果不按照相同的比例来缩放图形的话\n            shape.corner[0].x *= widthScale;\n            shape.corner[0].y *= heightScale;\n            shape.corner[1].x *= widthScale;\n            shape.corner[1].y *= heightScale;\n        });\n    }\n}\nexport default ShapesManager;\n","/**\n * 所有用户的合集管理\n */\nimport User from \"../Model/User\";\nimport { EventEmitter } from \"eventemitter3\";\nexport class UserManager extends EventEmitter {\n    constructor({ account, maxUserHistory }) {\n        super();\n        this.userKeys = [];\n        this.userMap = new Map();\n        this.onUndo = (user) => {\n            this.emit('undo', user);\n        };\n        this.onRedo = (user) => {\n            this.emit('redo', user);\n        };\n        this.account = account;\n        this.maxUserHistory = typeof maxUserHistory === 'number' ? maxUserHistory : 10;\n    }\n    getUser(account) {\n        return this.userMap.get(account);\n    }\n    addUser(account) {\n        if (this.userMap.has(account)) {\n            return this.userMap.get(account);\n        }\n        else {\n            let user = new User(account, this.maxUserHistory);\n            // 创建监听\n            user.on('undo', this.onUndo);\n            user.on('redo', this.onRedo);\n            this.userMap.set(account, user);\n            return user;\n        }\n    }\n    hasUser(account) {\n        return this.userMap.has(account);\n    }\n    get myself() { return this.userMap.get(this.account); }\n    ;\n    get others() {\n        let others = [];\n        this.userMap.forEach((user, uid) => {\n            if (uid === this.account) {\n            }\n            else {\n                others.push(user);\n            }\n        });\n        return others;\n    }\n    get uids() {\n        return [...this.userMap.keys()];\n    }\n    get all() {\n        return [...this.userMap.values()];\n    }\n    remove(account) {\n        // 清除监听\n        if (this.userMap.has(account)) {\n            let user = this.userMap.get(account);\n            user.removeAllListeners();\n        }\n        return this.userMap.delete(account);\n    }\n    removeOtherUsers() {\n        this.others.forEach(user => {\n            user.removeAllListeners();\n            this.userMap.delete(user.account);\n        });\n    }\n    destroy() {\n        // 清除监听\n        this.all.forEach(user => user.removeAllListeners());\n        this.userMap.clear();\n        // delete this.account\n    }\n    toSnapshot(opt) {\n        return this.all.map(user => ({\n            account: user.account,\n            recycle: user.recycle.map(shape => shape.toSnapshot(opt)),\n            calibrate: user.getCalibrateAction().toString()\n        }));\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from 'eventemitter3';\nimport * as CanvasHelper from './CanvasHelper';\nimport Point, { Coord } from '../Model/Point';\nimport Shape from '../Model/Shape';\nimport logger from '../../debug';\nimport { UserManager } from './UserManager';\nimport ShapesManager from './ShapesManger';\nimport ContainerManager, { applyState } from './ContainerManager';\nimport { WActions } from '../Itypes';\nimport { isValidTool } from '../validator';\nimport { StartAction, LaserPenEndAction, MoveAction, EndAction, RevokeAction, RedoAction, ClearAction, CalibrateAction, TextAction, FileAction } from '../Actions';\nimport { unpackBulk } from '../ActionUtils';\nimport { sign } from '../utils';\nimport globalHub from '../Model/GlobalHub';\n// * @param { string } opt.account uid\n//   * @param { number } opt.width\n//   * @param { number } opt.height\n//   * @param { string } opt.backgroundUrl 默认背景图\n//   * @param { string } opt.color\n//   * @param { string } opt.mode 绘图模式：激光笔flag 、 free\n//   * @param { number } opt.zIndex\nconst LOADING_IMAGE = 'data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAAANACwAAAAAEAAQAAAEPbDJSau9OOvNew0AEHDA8wCkiW6g6AXHMU4LgizUYRgEZdsUggFAQCgUP+AERggcFYHaDaMgEBQchBNhiQAAIfkECQAADQAsAAAAABAAEAAABDuwyUmrvTYAEDAFzwN4EyiSksaRyHF06GEYBNoQ82EHBwHbCIUCYRMKiwSCYoFALDCIwLDZBFJtTKclAgAh+QQJAAANACwAAAAAEAAQAAAEPrDJGQAIM2vwHtAUcVTdBzaHYRCKip2EepxacBAvjSgKQmc83m+iILCGEkSgh5wsEIhFEwqdUpvPaHPLnUQAACH5BAkAAA0ALAAAAAAQABAAAAQ+sMkZyAkz62MM0ROiKAjRXQCATeOIHEQAPA+QKQShZHOdIQFSRqaSLBCIBQiERC41TcQzc0xOr9isdsvtPiMAIfkECQAADQAsAAAAABAAEAAABD2wyYmUQjNra/VcCLIoBKEExBFkYRtcBGAQbJsdhnFkoMimGI8wAACshBnA4wFAJpdNp4RolFqv2Kx2q4kAACH5BAkAAA0ALAAAAAAQABAAAAQ9sMm5EFoza2u1b5ylKMjXVFdAjGamrEo7IWMpz8QR3A0BGATewWA48BA5mykAAOxugMcDwItOeUwnb9uKAAAh+QQJAAANACwAAAAAEAAQAAAEO7DJSau92C6EVp4c90khMjZbd5KKYo4B0Z4KIZ9I4H7IQQSng8FwwAQAgJgBQMAAHo+kD3h5Rk/HpCUCACH5BAkAAA0ALAAAAAAQABAAAAQ8sMlJq7046827nwuCLJwoliYXjlIAAAGFKApCAc8DULQSTzgd4kCYEQgKigt2MBgOC5rtQnAeOAHilBIBADs=';\nexport default class DrawWorker extends EventEmitter {\n    constructor(container, opt) {\n        super();\n        this.handleInputDomBlur = () => {\n            console.log('blur');\n            const { inputDom } = this.container;\n            const account = this.account;\n            if (!this.localUser) {\n                return;\n            }\n            let pointStr = inputDom.getAttribute('data-point');\n            if (!pointStr)\n                return;\n            const { ownerCanvasHeight, ownerCanvasWidth } = this.container;\n            let prevEnd = Point.fromString(pointStr);\n            inputDom.style.display = 'none';\n            const text = (inputDom.value || '').trim();\n            inputDom.value = '';\n            if (ownerCanvasHeight && ownerCanvasWidth && text) {\n                const action = new TextAction(prevEnd.x, prevEnd.y, text);\n                this.renderText(action, account);\n                this.emitAction({ account, action });\n            }\n        };\n        /**\n         * 对事件数据进行预处理，再调用对应的处理函数\n         * @param {Event} e 鼠标或触摸屏事件\n         * @private\n         */\n        this.dispatcher = (e) => {\n            if (e.type !== 'keydown' && e.type !== 'keyup') {\n                e.preventDefault();\n            }\n            e = e.originalEvent ? e.originalEvent : e;\n            if (!this.container.displayCtx)\n                return;\n            const rect = this.container.displayCtx.canvas.getBoundingClientRect();\n            let x, y;\n            if (e.touches && e.touches.length === 1) {\n                x = e.touches[0].clientX;\n                y = e.touches[0].clientY;\n            }\n            else if (e.changedTouches && e.changedTouches.length === 1) {\n                x = e.changedTouches[0].clientX;\n                y = e.changedTouches[0].clientY;\n            }\n            else {\n                x = e.clientX;\n                y = e.clientY;\n            }\n            const { ctrlKey, shiftKey, altKey, which } = e;\n            if (!x && x !== 0)\n                x = 0;\n            if (!y && y !== 0)\n                y = 0;\n            let realX = Math.round(x - rect.left);\n            let realY = Math.round(y - rect.top);\n            const { ownerCanvasHeight, ownerCanvasWidth, canvasWidth, canvasHeight } = this.container;\n            if (!ownerCanvasHeight || !ownerCanvasWidth || !canvasWidth || !canvasHeight) {\n                return;\n            }\n            // 点坐标转换为相对位置\n            const offset = new Point(+(realX / canvasWidth).toFixed(4), +(realY / canvasHeight).toFixed(4));\n            let type = e.type;\n            if (type === 'touchstart')\n                type = 'mousedown';\n            if (type === 'touchmove')\n                type = 'mousemove';\n            if (type === 'touchend')\n                type = 'mouseup';\n            // debug(type)\n            if (which === 2 || which === 3) {\n                // 如果是右键或者中键，就不触发对应的\n                return;\n            }\n            // console.log(e.buttons);\n            this[type](offset, this.account, { ctrlKey, shiftKey, altKey, which });\n        };\n        if (typeof opt === 'undefined') {\n            throw new Error('Option is Undefined!');\n        }\n        this.state = 'created';\n        this.opt = opt;\n        this.account = opt.account || 0; // 本地用户的UID\n        // 组装层级关系\n        this.users = new UserManager(opt);\n        this.shapes = new ShapesManager(); // 所有用户绘制内容的列表\n        this.shapes.wrap(this.users);\n        this.container = new ContainerManager(container, opt);\n        this.container.on('init-canvas', () => {\n            // 创建cancas之后才创建用户，因为需要用到canvas的宽高\n            logger.m.worker('init-canvas event');\n            const user = this.addUser(this.account);\n            this.localUser = user; // 缓存一下自己\n            this.state = 'inited';\n            this.afterInit();\n        });\n        this.container.on('ownerCanavasUpdate', (() => {\n            let timmer;\n            return (width, height) => {\n                console.log('ownerCanavasUpdate timmer');\n                clearTimeout(timmer);\n                timmer = setTimeout(() => {\n                    console.log('ownerCanavasUpdate timmer');\n                    this.emit('instantAction', {\n                        account: this.account,\n                        action: new CalibrateAction({\n                            ownerCanvasHeight: height,\n                            ownerCanvasWidth: width,\n                        })\n                    });\n                }, 200);\n            };\n        })());\n        this.container.wrap(this.shapes, this.users);\n        this.container.inputDom.addEventListener('blur', this.handleInputDomBlur);\n        this.isEnable = false; // 默认情况下都不可以写\n    }\n    setContainer(container, opt) {\n        logger.m.worker('setContainer');\n        this.container.setContainer(container, opt);\n    }\n    isDrawEnable() {\n        return this.isEnable;\n    }\n    // 是否有权限进行画布操作\n    enableDraw(enable) {\n        logger.m.worker('enableDraw', enable);\n        this.isEnable = !!enable;\n        globalHub.emit('canDraw', this.isEnable);\n        this.switchEventListener(!!enable);\n        // 切换为观众后，如果当前在激光笔，先保存当前状态\n        if (this.localUser) {\n            const { tool } = this.localUser;\n            if (!enable) {\n                if (/flag/.test(this.localUser.tool)) {\n                    this.clearFlag();\n                    this.emitAction({ account: this.account, action: new LaserPenEndAction() });\n                }\n                this.setCursor('not-allowed');\n            }\n            else {\n                let cursorType;\n                if (tool === 'flag') {\n                    cursorType = 'flag';\n                }\n                else {\n                    cursorType = 'crosshair';\n                }\n                this.setCursor(cursorType);\n            }\n        }\n    }\n    updateCursor() {\n        if (this.localUser) {\n            const { tool } = this.localUser;\n            if (!this.isEnable) {\n                if (/flag/.test(this.localUser.tool)) {\n                    this.clearFlag();\n                    this.emitAction({ account: this.account, action: new LaserPenEndAction() });\n                }\n                this.setCursor('not-allowed');\n            }\n            else {\n                let cursorType;\n                if (tool === 'flag') {\n                    cursorType = 'flag';\n                }\n                else {\n                    cursorType = 'crosshair';\n                }\n                this.setCursor(cursorType);\n            }\n        }\n    }\n    /**\n     * 增加或移除事件监听\n     * @param {Boolean} add 是否增加事件监听\n     * @private\n     */\n    switchEventListener(add) {\n        const op = add ? 'add' : 'remove';\n        const canvasList = [this.container.maskCanvas];\n        // const currentUserCanvas = this.users.myself.ctx.canvas\n        // if (currentUserCanvas) {\n        //   currentUserCanvas.style.visibility = add ? 'visible' : 'hidden'\n        //   canvasList.push(currentUserCanvas)\n        // }\n        const dispatcher = this.dispatcher;\n        // 绑定到canvas上的事件\n        canvasList.forEach(canvas => {\n            ['mouseleave', 'mousedown', 'mousemove', 'touchmove', 'touchstart']\n                .forEach(event => {\n                let addOrRemove = op + 'EventListener';\n                canvas[addOrRemove](event, dispatcher);\n            });\n        });\n        // 绑定在body上的事件\n        ['mouseup', 'touchend']\n            .forEach(event => {\n            let addOrRemove = op + 'EventListener';\n            this.container.container[addOrRemove](event, dispatcher);\n        });\n        ['keydown', 'keyup']\n            .forEach(event => {\n            let addOrRemove = op + 'EventListener';\n            document.documentElement[addOrRemove](event, dispatcher);\n        });\n    }\n    // 设置光标样式\n    setCursor(type = 'not-allowed') {\n        logger.m.worker('setCursor', type);\n        const canvasList = [\n            this.container.maskCanvas\n        ];\n        type = /(flag|crosshair|not-allowed)/.test(type) ? type : 'crosshair';\n        this.cursor = type || this.cursor;\n        if (this.cursor === 'flag') {\n            this.cursor = 'none';\n        }\n        canvasList.forEach(c => {\n            c.style.cursor = this.cursor;\n        });\n    }\n    afterInit() {\n        this.emit('inited');\n    }\n    emitAction(anyAction) {\n        this.emit('action', anyAction);\n    }\n    /**\n     * 获取或者设置操作模式。Worker的模式设置必须是标准的，对外暴露可以使用转换\n     * @param {string} tool 'flag', 'free', 'erase', 'fill', 'select'\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    useTool(tool, account = this.account) {\n        logger.m.worker('use tool:', tool, account);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        let validTool = isValidTool(tool);\n        if (!validTool) {\n            console.error('useTool 参数不正确！', tool);\n            return;\n        }\n        let user = this.getUser(account);\n        if (!tool)\n            return user.tool;\n        if (!user) {\n            user = this.addUser(account);\n        }\n        logger.m.worker('use tool:', user);\n        // 如果要设置的模式就是当前模式，直接返回\n        if (user.tool === tool)\n            return;\n        const updator = { tool: tool, };\n        user.update(updator);\n        if (tool === 'flag') {\n            user.ctx.canvas.style.visibility = 'visible';\n        }\n        else {\n            this.clearFlag(account);\n        }\n        logger.m.worker('useTool check account', account);\n        if (account !== this.account) {\n            return;\n        }\n        // // 当前是观众模式\n        // if (!this.isEnable) {\n        //   return\n        // }\n        if (user.tool !== 'text') { // 修改为非 text 模式隐藏输入框\n            this.container.inputDom.style.display = 'none';\n        }\n        this.setCursor(user.tool);\n        logger.m.worker('useTool check account', account);\n        this.dispatchCalibrateAction(updator);\n    }\n    clearFlag(account = this.account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        user.flagPos = new Point(3, 3).toString();\n        this.renderFlag();\n        this.emitAction({\n            account,\n            action: new LaserPenEndAction(),\n        });\n    }\n    /**\n     * 获取或者设置笔&橡皮擦的大小\n     * @param {number} value 笔&橡皮擦的大小\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    setSize(value, account = this.account) {\n        let user = this.getUser(account);\n        logger.m.worker('setSize', value, account, user);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        if (!user) {\n            user = this.addUser(account);\n        }\n        if (!value)\n            return user.size;\n        if (typeof +value !== 'number') {\n            throw new Error('Type Error: size');\n        }\n        let updator = { size: +value, };\n        user.update(updator);\n        this.dispatchCalibrateAction(updator);\n    }\n    // 获取自己的按钮坐标等等的参数\n    getSelfCalibrate() {\n        if (this.localUser) {\n            return this.localUser.getCalibrateAction();\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * 获取或者设置笔的颜色\n     * @param {number} value 笔的颜色\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    setColor(value, account = this.account) {\n        let user = this.getUser(account);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        if (!user) {\n            user = this.addUser(account);\n        }\n        if (!value)\n            return user.color;\n        const updator = { color: value.toLowerCase() };\n        this.dispatchCalibrateAction(updator);\n        user.update(updator);\n    }\n    /**\n     * 获取或者设置文字的大小\n     * @param {number} value 字体大小\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    setFontsize(value, account = this.account) {\n        let user = this.getUser(account);\n        logger.m.worker('set font size', value, account, user);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        if (!user) {\n            user = this.addUser(account);\n        }\n        if (!value)\n            return user.fontsize;\n        if (typeof (+value) !== 'number') {\n            throw new Error('Type Error: fontsize');\n        }\n        const updator = { fontsize: +value };\n        user.update(updator);\n        this.dispatchCalibrateAction(updator);\n        // this.container.inputDom.style.height = value + 'px'\n        this.container.inputDom.style.fontSize = value + 'px';\n    }\n    keydown(point, account, ext) {\n        let user = this.users.getUser(account);\n        if (!user) {\n            user = this.addUser(account);\n        }\n        const { ctrlKey, shiftKey, altKey, which } = ext;\n        // 当前只响应 ctrl shift alt 这三个键的响应\n        // 17-ctrl  16-shif 18-alt\n        if ([16, 17, 18].indexOf(which) > -1) {\n            let userKeyDown = user.keyDown;\n            let newWhich = userKeyDown === null ? -1 : userKeyDown.which;\n            // 如果后期需要对其他更多按键进行处理的话，就在这里处理\n            // 没有其他按键的情况下， whichkey 传输-1过去\n            const updator = {\n                keyDown: {\n                    ctrlKey, altKey, shiftKey,\n                    which: newWhich\n                }\n            };\n            user.update(updator);\n            this.dispatchCalibrateAction(updator);\n            this._afterKeyChange(user, account, ext);\n        }\n    }\n    keyup(point, account, ext) {\n        const { ctrlKey, shiftKey, altKey, which } = ext;\n        let user = this.users.getUser(account);\n        if (!user) {\n            user = this.addUser(account);\n        }\n        // 当前只响应 ctrl shift alt 这三个键的响应\n        // 17-ctrl  16-shif 18-alt\n        if ([16, 17, 18].indexOf(which) > -1) {\n            let userKeyDown = user.keyDown;\n            let newWhich = userKeyDown === null ? -1 : userKeyDown.which;\n            if (which === newWhich) {\n                newWhich = -1;\n            }\n            const updator = {\n                keyDown: {\n                    altKey, shiftKey, ctrlKey,\n                    which\n                }\n            };\n            user.update(updator);\n            this.dispatchCalibrateAction(updator);\n            this._afterKeyChange(user, account, ext);\n        }\n    }\n    _afterKeyChange(user, account, ext) {\n        if (user.isMouseDown) {\n            if (user.tool !== 'flag' && user.tool !== 'free' && user.tool !== 'erase') {\n                this.mousemove(user.end, account, ext); // TODO,这里的which 应该替换\n            }\n        }\n    }\n    /**\n     * 鼠标按下&开始触摸时的处理函数\n     * @param {Point} offset 当前位置坐标\n     * @param {string} account 进行操作的用户的ID\n     */\n    mousedown(offset, account = this.account, ext) {\n        let shape;\n        const user = this.getUser(account);\n        let { mode, tool, color, size, fontsize, keyDown } = user;\n        const userCtx = user.ctx;\n        const displayCtx = this.container.displayCtx;\n        // 如果是激光笔工具或者文本工具，就返回\n        if ((user.isFlag && (!tool || tool === 'flag')) || tool === 'text') {\n            return;\n        }\n        if (tool === 'erase' && this.shapes.visibles.length === 0) {\n            // 如果画板没有内容，不能使用橡皮擦工具\n            return;\n        }\n        user.whenMouseDown(Point.clone(offset));\n        const end = user.end;\n        if (user.isMouseDown) {\n            // '兼容iOS未抬笔直接落笔的情况'\n            logger.mouse('user.isMouseDown->true');\n            this.mouseup(end, account);\n        }\n        if (tool === 'free' || tool === 'erase') { // 1. free 会 直接在 displayCtx 上绘制；2. 当 erase 时 workCtx 要保证 source-over；3. 所以隐藏\n            userCtx.canvas.style.visibility = 'hidden';\n            userCtx.beginPath();\n        }\n        else {\n            userCtx.canvas.style.visibility = 'visible';\n        }\n        logger.m.worker('switch mode = ', mode, tool);\n        // 缓存上一次applyState的用户\n        this.lastStateAccount = user.account;\n        applyState(userCtx, user);\n        applyState(displayCtx, user);\n        const { ownerCanvasHeight: height, ownerCanvasWidth: width } = this.container;\n        let action;\n        if (height && width) {\n            action = new StartAction(offset.x, offset.y);\n        }\n        switch (mode) {\n            case 'draw': {\n                user.isMouseDown = true;\n                logger.log('user is mouseDown', user.isMouseDown, user);\n                shape = new Shape({\n                    user, mode, tool, size, color, fontsize,\n                    start: Point.clone(offset),\n                    actions: action,\n                    keyDown: user.keyDown,\n                });\n                user.pushShape(shape);\n                this.shapes.push(shape);\n                switch (tool) {\n                    case 'circle':\n                    case 'ellipse':\n                    case 'line':\n                    case 'rect':\n                    case 'roundRect':\n                    case 'solidCircle':\n                    case 'solidEllipse':\n                    case 'solidRoundRect':\n                    case 'solidRect':\n                    case 'erase':\n                    case 'free':\n                    case 'flag':\n                        // 'free' 用三个点画二次曲线，使笔迹光滑，降低锯齿感\n                        break;\n                    case 'fill': {\n                        // shape = new Shape({\n                        //   user, mode, tool, size, color,\n                        //   start: Point.clone(offset)\n                        // })\n                        // user.pushShape(shape)\n                        // this.shapes.push(shape)\n                        this.lastStateAccount = user.account;\n                        applyState(shape.ctx, user);\n                        applyState(displayCtx, user);\n                        shape.draw(displayCtx);\n                        user.isMouseDown = false; // 保证isMouseDown的标记位是正常的\n                        break;\n                    }\n                    default:\n                        const fullCaseChecker = tool;\n                }\n                break;\n            }\n        }\n        logger.m.worker('emit on mousedown');\n        if (width && height) {\n            this.emitAction({ account, action: action });\n        }\n    }\n    /**\n     * 鼠标移动&触摸移动时的处理函数\n     * @param {Point} offset 当前位置坐标\n     * @param {string} account 进行操作的用户的ID\n     */\n    mousemove(offset, account = this.account, ext) {\n        const user = this.getUser(account);\n        logger.mouse('mousemove', user, !user.isMouseDown && !user.isFlag);\n        if (!user.isFlag) {\n            // 如果不是flag模式，\n            if (!user.isMouseDown) {\n                console.log('pre return when mouse down is false');\n                return;\n            }\n        }\n        user.whenMouseMove(Point.clone(offset));\n        let { mode, tool, keyDown, end } = user;\n        if (tool === 'erase' && this.shapes.visibles.length === 0) {\n            // 如果画板没有内容，不能使用橡皮擦工具\n            return;\n        }\n        const userCtx = user.ctx;\n        const displayCtx = this.container.displayCtx;\n        logger.mouse('mousemove', offset, user);\n        const activeShape = user.activeShape;\n        let action = new MoveAction(offset.x, offset.y);\n        // 如果按键不一致，就更新\n        if (ext && Object.keys(keyDown).some((key) => ext[key] !== keyDown[key])) {\n            user.update({ keyDown: ext });\n        }\n        if (tool !== 'flag') {\n            this.shiftKeyTool(user, activeShape, (toolName) => {\n                tool = toolName;\n            });\n        }\n        // 检查上一次的使用的状态的用户，如果帐号相同，为了性能，就不重新作用applyState\n        if (user.account !== this.lastStateAccount) {\n            if (tool !== 'flag') {\n                this.lastStateAccount = user.account;\n                applyState(userCtx, user);\n                applyState(displayCtx, user);\n            }\n        }\n        switch (mode) {\n            case 'draw': {\n                switch (tool) {\n                    case 'flag': {\n                        // 光标模式\n                        user.flagPos = Point.clone(offset).toString();\n                        this.renderFlag();\n                        // renderFlag(user, offset, size, color)\n                        break;\n                    }\n                    case 'erase':\n                    case 'free':\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.actions.push(action);\n                            activeShape.freeMove(userCtx);\n                            activeShape.freeMove(displayCtx);\n                        }\n                        break;\n                    case 'line':\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.updateCorner(end);\n                        activeShape.draw(userCtx);\n                        break;\n                    case 'rect':\n                    case 'solidRect': {\n                        if (activeShape) {\n                            CanvasHelper.clearCtx(userCtx);\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'roundRect':\n                    case 'solidRoundRect': {\n                        CanvasHelper.clearCtx(userCtx);\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'circle':\n                    case 'solidCircle': {\n                        CanvasHelper.clearCtx(userCtx);\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'ellipse':\n                    case 'solidEllipse': {\n                        CanvasHelper.clearCtx(userCtx);\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'fill':\n                    case 'text':\n                        // 什么也不做，\n                        action = null;\n                        break;\n                    default:\n                        const fullCaseChecker = tool;\n                }\n                break;\n            }\n        }\n        if (action) {\n            this.emitAction({ account, action });\n        }\n    }\n    shiftKeyTool(user, activeShape, callback) {\n        if (user.keyDown.shiftKey) {\n            let tool = user.tool;\n            // 取消shift 需要变更工具后还原\n            if (tool === 'ellipse') {\n                tool = 'circle';\n                if (activeShape) {\n                    activeShape.tool = tool;\n                }\n                callback(tool);\n            }\n            else if (tool === 'circle') {\n                tool = 'ellipse';\n                if (activeShape) {\n                    activeShape.tool = tool;\n                }\n                callback(tool);\n            }\n        }\n        else {\n            // 取消shift key后还原\n            if (activeShape && activeShape.tool !== user.tool) {\n                activeShape.tool = user.tool;\n            }\n        }\n    }\n    /**\n     * 鼠标松开&触摸结束时的处理函数\n     * @param {Point} offset 当前位置坐标\n     * @param {string} account 进行操作的用户的ID\n     * @private\n     */\n    mouseup(offset, account = this.account, ext) {\n        const user = this.getUser(account);\n        const textActionText = offset.text;\n        console.warn('mouse up');\n        logger.m.worker('mouse up', account);\n        let { mode, tool, color, size, fontsize, start, oldMid, end, } = user;\n        if (tool === 'erase' && this.shapes.visibles.length === 0) {\n            // 如果画板没有内容，不能使用橡皮擦工具\n            return;\n        }\n        const mid = Point.middle(end, offset);\n        // free 模式需要知道上一次的情况\n        const prevOldMid = oldMid.clone();\n        const prevEnd = end.clone();\n        // 作用到user对象上\n        oldMid.copy(mid);\n        end.copy(offset);\n        user.oldMid = oldMid.clone();\n        user.end = end.clone();\n        if (user.isFlag) {\n            // 激光笔直接返回\n            this.clearFlag();\n            this.emitAction({\n                account,\n                action: new LaserPenEndAction()\n            });\n            ;\n            return;\n        }\n        if (!user.isMouseDown && tool !== 'text')\n            return;\n        user.isMouseDown = false;\n        console.warn('turn use mouse down to false', user.isMouseDown, user.account);\n        const userCtx = user.ctx;\n        const displayCtx = this.container.displayCtx;\n        const activeShape = user.activeShape;\n        let shapeCtx = activeShape && activeShape.ctx;\n        if (tool === 'text') {\n            // 如果是 text 工具， 这里需要做输入框的展示以及输入框的消失的操作\n            // applyState 不在这里作用，在renderText方法里作用，\n            // 这样接收端也能更新shape状态\n            let endCoord = this.getCanvasCoord(end);\n            const { canvasWidth: width, canvasHeight: height, inputDom } = this.container;\n            const { style } = inputDom;\n            const { display } = style;\n            if (endCoord.x < 0 || endCoord.x > width || endCoord.y < 0 || endCoord.y > height) {\n                return;\n            }\n            if (display === 'none') {\n                // 如果是隐藏的就展示对应的DOM\n                const iptWidth = width - endCoord.x - 10;\n                const iptHeight = height - endCoord.y - 10;\n                if (fontsize * 10 > iptWidth) {\n                    style.width = (iptWidth > 0 ? iptWidth : 0) + 'px';\n                }\n                else {\n                    style.width = iptWidth + 'px';\n                }\n                // style.height = fontsize + 'px'\n                style.padding = \"1px 0\";\n                style.verticalAlign = \"top\"; // fix ios safari input font height\n                style.lineHeight = fontsize + 'px';\n                style.top = endCoord.y + this.container.paddingTop + 'px';\n                style.left = endCoord.x + this.container.paddingLeft + 'px';\n                style.fontSize = fontsize + 'px';\n                style.display = 'block';\n                style.color = color;\n                inputDom.setAttribute('data-point', end.toString());\n                inputDom.focus();\n                user.end.copy(end);\n            }\n            else {\n                // 如果是展示状态下，就消失并且抛出TextAction\n                inputDom.blur();\n            }\n            return;\n        }\n        if (!activeShape || !shapeCtx) {\n            return;\n        }\n        let needMoveUserCtxData = true;\n        userCtx.canvas.style.visibility = 'visible';\n        activeShape.updateCorner(end);\n        let action = new EndAction(end.x, end.y);\n        if (tool !== 'flag') {\n            this.shiftKeyTool(user, activeShape, (toolName) => {\n                tool = toolName;\n            });\n            // 如果有两个用户在画画，必须要更新Canvas状态\n            this.lastStateAccount = user.account;\n            applyState(userCtx, user);\n            applyState(displayCtx, user);\n        }\n        switch (mode) {\n            case 'draw':\n                // 如果 erase 设置了 workCtx 为 destination-out 取到的img不能做正常 撤销 重做\n                switch (tool) {\n                    case 'erase':\n                    case 'free':\n                        // 自由画笔需要拓展边界\n                        activeShape.expandCorner();\n                        activeShape.freeEnd(userCtx);\n                        activeShape.freeEnd(displayCtx);\n                        break;\n                    case 'line':\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    case 'rect':\n                    case 'solidRect': {\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    }\n                    case 'roundRect':\n                    case 'solidRoundRect': {\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    }\n                    case 'circle':\n                    case 'solidCircle': {\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    }\n                    case 'ellipse':\n                    case 'solidEllipse':\n                        {\n                            CanvasHelper.clearCtx(userCtx);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    case 'flag':\n                    case 'fill':\n                        // 不放置数据到shape里\n                        action = null;\n                        needMoveUserCtxData = false;\n                        break;\n                    default:\n                        const fullCaseChecker = tool;\n                }\n                if (needMoveUserCtxData) {\n                    this.moveUserShapeToDisplay(user);\n                }\n                break;\n        }\n        activeShape.keyDown = user.keyDown;\n        if (action) {\n            activeShape.actions.push(action);\n            this.emitAction({ account, action });\n        }\n    }\n    mouseleave(point, account = this.account, ext) {\n        console.log('mouse leave');\n        if (account === this.account) {\n            const user = this.getUser(account);\n            switch (user.tool) {\n                case 'flag': {\n                    this.clearFlag(account);\n                    this.emitAction({\n                        account,\n                        action: new LaserPenEndAction()\n                    });\n                    break;\n                }\n                case 'text':\n                    break;\n                default:\n                    this.mouseup(point, account, ext);\n            }\n        }\n    }\n    renderText(offset, account) {\n        let inputDomValue;\n        let action;\n        action = offset;\n        let end = new Point(offset.x, offset.y);\n        let endCoord = this.getOwnerCoord(end);\n        inputDomValue = (offset.text || '').trim();\n        if (!inputDomValue || !account) {\n            return;\n        }\n        let user = this.getUser(account);\n        if (!user) {\n            user = this.addUser(account);\n        }\n        const { tool, mode, size, color, fontsize } = user;\n        let displayCtx = this.container.displayCtx;\n        const shape = new Shape({\n            user, mode, tool, size, color, fontsize,\n            start: Point.clone(end),\n            actions: action,\n            keyDown: user.keyDown,\n        });\n        this.shapes.push(shape);\n        user.pushShape(shape);\n        // 这个fontSize是设置的字体测试的用户的大小，具体到画布上以后，字体大小会发生变化\n        const userCtx = user.ctx;\n        this.lastStateAccount = user.account;\n        applyState(userCtx, user);\n        applyState(displayCtx, user);\n        CanvasHelper.text(userCtx, endCoord, inputDomValue, fontsize, true, color);\n        const corner = user.activeShape.corner;\n        corner[0].x = endCoord.x - size;\n        corner[0].y = endCoord.y - 20;\n        corner[1].x = endCoord.x + fontsize * inputDomValue.length;\n        corner[1].y = endCoord.y + fontsize + 20;\n        this.moveUserShapeToDisplay(user);\n    }\n    clearTransparentPix(imgData) {\n        let total = imgData.length;\n        let dataBytes = imgData;\n        for (let i = 0; i < total; i += 4) {\n            const alpha = dataBytes[3 + i];\n            if (alpha < 243) {\n                dataBytes[0 + i] = 0;\n                dataBytes[1 + i] = 0;\n                dataBytes[2 + i] = 0;\n                dataBytes[3 + i] = 0;\n            }\n        }\n    }\n    moveUserShapeToDisplay(user, antiAlais) {\n        const { activeShape, ctx: userCtx } = user;\n        const { displayCtx } = this.container;\n        if (!activeShape || !displayCtx) {\n            console.error('activeShape is ', activeShape, 'displayCtx is ', displayCtx);\n            return;\n        }\n        const { tool, ctx: shapeCtx, color, corner } = activeShape;\n        logger.log('corner', corner);\n        const shapeWidth = Math.ceil(corner[1].x - corner[0].x);\n        const shapeHeight = Math.ceil(corner[1].y - corner[0].y);\n        if (shapeWidth === 0 || shapeHeight === 0) {\n            logger.m.worker('mouseup shape is zero size');\n            console.error('mouseup shape is zero size');\n            return;\n        }\n        logger.m.worker('mouseup going to anti shape', user.account);\n        // 需要获取看得见的数据，才能使其他 canvas 上 globalCompositeOperation 有效应用\n        const imgData = userCtx.getImageData(corner[0].x, corner[0].y, shapeWidth, shapeHeight);\n        if (tool === 'erase') {\n            logger.image(userCtx.canvas.toDataURL(), 'erase');\n        }\n        // 过滤锯齿\n        if (this.opt.clearTransparentPix && (!['text'].includes(tool) || antiAlais)) {\n            this.clearTransparentPix(imgData.data);\n        }\n        shapeCtx.canvas.width = shapeWidth;\n        shapeCtx.canvas.height = shapeHeight;\n        // 每次重新改变canvas大小 ，都要重新设置这个属性\n        CanvasHelper.setpixelated(shapeCtx);\n        CanvasHelper.setLineStyle(shapeCtx);\n        shapeCtx.putImageData(imgData, 0, 0); // 这里 workCtx 的数据截取了有效部分，存到了 shape ，可以做 undo redo\n        displayCtx.imageSmoothingEnabled = false;\n        if (tool !== 'free') {\n            displayCtx.drawImage(shapeCtx.canvas, Math.round(corner[0].x), Math.round(corner[0].y)); // displayCtx 一直在实时绘制\n        }\n        CanvasHelper.clearCtx(userCtx);\n    }\n    /**\n     * 渲染激光笔，绘制单个，没有任何轨迹\n     * @param {Object} user 激光笔的用户\n     * @param {Point} center 激光笔经过的点圆心\n     * @param {Number} size 激光笔直径\n     * @param {String} color 激光笔颜色\n     * @private\n     */\n    renderFlag() {\n        const { maskCtx } = this.container;\n        if (maskCtx) {\n            // 清空图层\n            CanvasHelper.clearCtx(maskCtx);\n            const { ownerCanvasWidth: width, ownerCanvasHeight: height } = this.container;\n            // 将每个用户的激光笔绘制上去\n            this.users.all.forEach(user => {\n                const { mode, tool, color, flagPos } = user;\n                if (mode == 'draw' && tool === 'flag' && width && height) {\n                    let pos = Point.fromString(flagPos);\n                    let posCoord = this.getOwnerCoord(pos);\n                    console.log('render flag', pos, flagPos, user.account);\n                    CanvasHelper.circle(maskCtx, posCoord, 5, false, '#ff0000');\n                    CanvasHelper.circle(maskCtx, posCoord, 4, true, '#ff0000'); //默认的激光笔颜色为红色\n                }\n            });\n        }\n    }\n    getCanvasCoord(offset) {\n        const { canvasHeight: height, canvasWidth: width } = this.container;\n        if (height && width) {\n            return new Coord(offset.x * width, offset.y * height);\n        }\n        return new Coord(0, 0);\n    }\n    getOwnerCoord(offset) {\n        const { ownerCanvasHeight: height, ownerCanvasWidth: width } = this.container;\n        if (height && width) {\n            return new Coord(offset.x * width, offset.y * height);\n        }\n        return new Coord(0, 0);\n    }\n    /**\n     * 撤销绘制，本地撤销模型，即只能撤销自己的绘制\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    undo(account = this.account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        if (user.shapes.length === 0)\n            return;\n        let length = user.undo(); // 其他操作通过事件冒泡到ContainerManager去处理了\n        this.emitAction({ account, action: new RevokeAction() });\n        return length;\n    }\n    /**\n     * 反撤销绘制，取消本地撤销模型，即只能取消撤销自己的绘制\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    redo(account = this.account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        if (user.recycle.length === 0)\n            return;\n        let length = user.redo();\n        this.emitAction({ account, action: new RedoAction() });\n        return length;\n    }\n    /**\n     * 绘制图片\n     * @param {string} url 图片地址\n     * @private\n     */\n    image(opt, account = this.account) {\n        const { url = '', docId = '', currentPage = 0, pageCount = 0, type = 'clear', urlStr = '', h5Cmd = '' } = opt;\n        if (!url)\n            return;\n        if (this.container && this.container.displayCtx) {\n            const canvas = this.container.displayCtx.canvas;\n            const img = new Image();\n            const tmpUrl = this.opt.backgroundUrl === undefined\n                ? LOADING_IMAGE\n                : this.opt.backgroundUrl;\n            img.onload = () => {\n                this.container.container.classList.remove('canvas-loading');\n                canvas.style.backgroundSize = 'contain';\n                canvas.style.backgroundImage = `url(${url})`;\n            };\n            this.container.container.classList.add('canvas-loading');\n            canvas.style.backgroundSize = 'auto';\n            canvas.style.backgroundImage = `url(${tmpUrl})`;\n            img.src = url;\n        }\n        this.emitAction({\n            account: account,\n            action: new FileAction({\n                url,\n                docId,\n                currentPage,\n                pageCount,\n                type,\n                urlStr,\n                h5Cmd\n            })\n        });\n    }\n    // 取消背景绘制\n    clearImage(account = this.account) {\n        if (this.container.displayCtx) {\n            this.container.displayCtx.canvas.style.backgroundImage = '';\n        }\n        this.emitAction({\n            account: account,\n            action: new FileAction({\n                docId: '',\n                type: 'clear',\n            })\n        });\n    }\n    /**\n     * 清除画板或者清除某个用户的绘制\n     * @param {string} target 需要清除操作的用户ID\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    clear(target, account = this.account, opt) {\n        const force = opt && opt.force; // 是否强力清除，包括用户正在绘制的内容\n        const quiet = opt && opt.quiet; // 是否静默清除，不抛出事件\n        if (this.container.displayCtx) {\n            CanvasHelper.clearCtx(this.container.displayCtx);\n            for (const user of this.users.all) {\n                if (user.isMouseDown && !force) {\n                    // 防止在clear时 擦除了其他用户正在绘制的笔记，\n                    logger.m.worker('user.isMouseDown = true');\n                    this.container.displayCtx.drawImage(user.ctx.canvas, 0, 0);\n                }\n                else {\n                    user.ctx && CanvasHelper.clearCtx(user.ctx);\n                }\n            }\n        }\n        let uidToRemove;\n        if (target) {\n            if (!Array.isArray(target)) {\n                target = [target];\n            }\n            if (target.length != 0) {\n                uidToRemove = target;\n            }\n        }\n        if (uidToRemove) {\n            uidToRemove.forEach(uid => {\n                const user = this.getUser(uid);\n                if (user) {\n                    // user.isMouseDown = false\n                    user.shapes.forEach(shape => {\n                        this.shapes.remove(shape);\n                    });\n                    user.clearShapes();\n                }\n            });\n            if (this.container.displayCtx) {\n                this.container.fullRender();\n            }\n        }\n        else {\n            // 清空全部\n            this.shapes.clear();\n            for (const user of this.users.all) {\n                user.clearShapes();\n                // user.isMouseDown = false\n            }\n        }\n        if (!quiet) {\n            this.emitAction({ account, action: new ClearAction(uidToRemove) });\n        }\n    }\n    /**\n     * 收到指令后进行对应操作\n     * @param {string} account 用户ID\n     * @param {string} op 操作\n     * @param {any} [value] 操作值\n     * @public\n     */\n    act(anyAction) {\n        logger.m.worker('act->', anyAction);\n        let { account, action: actionData } = anyAction;\n        if (account && !this.users.hasUser(account)) {\n            this.addUser(account);\n        }\n        const action = anyAction.action;\n        switch (action.TYPE) {\n            case WActions.START: {\n                this.mousedown(action, account);\n                // 鼠标点击\n                break;\n            }\n            case WActions.MOVE:\n            case WActions.LASER_PEN: {\n                // 激光笔\n                this.mousemove(action, account);\n                break;\n            }\n            case WActions.TEXT: {\n                this.renderText(action, account);\n                break;\n            }\n            case WActions.END: {\n                // 鼠标移上\n                this.mouseup(action, account);\n                break;\n            }\n            case WActions.LASER_PEN_END: {\n                this.clearFlag(account);\n                break;\n            }\n            case WActions.REDO: {\n                this.redo(account);\n                break;\n            }\n            case WActions.REVOKE: {\n                this.undo(account);\n                break;\n            }\n            case WActions.CLEAR: {\n                // this.clear((action as ClearAction).accounts, account);// 特殊处理，不在此处\n                break;\n            }\n            case WActions.CALIBRATE: {\n                this.calibrate(account, action);\n                break;\n            }\n            case WActions.SYNC_PREPARE_ACK:\n            case WActions.SERIAL: {\n                break;\n            }\n            case WActions.CLEAR_ACK:\n                // 再次清除对应用户的绘制内容\n                this.clear(account, account, { quiet: true, force: true });\n                break;\n            case WActions.SYNC_REQUEST:\n            case WActions.FILE:\n            case WActions.SYNC:\n            case WActions.SYNC_PREPARE:\n            case WActions.VERSION:\n                break;\n            default:\n                const fullCaseChecker = action;\n        }\n    }\n    /**\n     * 重新设置画布大小，等比例\n     * @param {number} width 画布宽度\n     * @public\n     */\n    resize() {\n        this.container.resize();\n    }\n    dispatchCalibrateAction(opt) {\n        this.emit('action', {\n            account: this.account,\n            action: new CalibrateAction(opt)\n        });\n    }\n    calibrate(account, action) {\n        if (account) {\n            // 更新容器的属性\n            const { ownerCanvasHeight, ownerCanvasWidth } = action;\n            if (ownerCanvasHeight && ownerCanvasWidth) {\n                console.warn('update owner canvas');\n                this.container.canvasRatio = ownerCanvasWidth / ownerCanvasHeight;\n                this.container.resize();\n                this.container.updateCanvasPropSize(ownerCanvasWidth, ownerCanvasHeight);\n            }\n            // 更新用户的属性\n            let userOptions = (CalibrateAction.USER_PROPS).reduce((obj, prop) => {\n                if (prop in action) {\n                    obj[prop] = action[prop];\n                }\n                return obj;\n            }, {});\n            let user = this.getUser(account);\n            if (user) {\n                user.update(userOptions);\n            }\n        }\n    }\n    /**\n     * 增加一个用户并初始化其canvas，已存在则直接返回\n     * @param {String | Number} account 用户ID\n     * @return {User} 用户\n     */\n    addUser(account) {\n        logger.m.worker('addUser', account);\n        if (this.users.hasUser(account)) {\n            return this.getUser(account);\n        }\n        const user = this.users.addUser(account);\n        this.container.addUser(this.account, user);\n        // 依据用户的UID进行排序，制作\n        this.users.all.sort((a, b) => a.account > b.account ? 1 : -1).forEach((user, index) => {\n            user.ctx.canvas.style.zIndex = '' + (10 + index);\n        });\n        logger.m.worker('create User ->', user);\n        return user;\n    }\n    getUser(account) {\n        if (account == this.account && this.localUser) {\n            return this.localUser;\n        }\n        else {\n            return this.users.getUser(account);\n        }\n    }\n    /**\n     * 移除一个用户, 删除其canvas\n     * @param {String | Number} account 用户ID\n     * @return {User} 用户\n     */\n    removeUser(account) {\n        account && this.clearFlag(account) && this._removeUser(account);\n    }\n    _removeUser(account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        try {\n            this.container.container.removeChild(user.ctx.canvas);\n        }\n        catch (e) { }\n        this.users.remove(account);\n    }\n    /**\n     * 销毁白板, 移除所有用户\n     * 实际上只移除了事件监听，并将内存占用较大的对象清空，等待垃圾回收\n     * @private\n     */\n    destroy() {\n        this.container.inputDom.removeEventListener('blur', this.handleInputDomBlur);\n        this.users.destroy();\n        this.switchEventListener(false);\n        this.users.uids.map(key => {\n            this._removeUser(key);\n        });\n        this.shapes.destroy();\n        this.container.destroy();\n        this.removeAllListeners();\n    }\n    getSnapshot() {\n        const { transh, visibles } = this.shapes;\n        const { canvasWidth, canvasHeight, ownerCanvasHeight, ownerCanvasWidth } = this.container;\n        let shapeSnapshotOption = { width: canvasWidth, height: canvasHeight };\n        const users = this.users.toSnapshot(shapeSnapshotOption);\n        return {\n            users: users,\n            ownerWidth: ownerCanvasWidth,\n            ownerHeight: ownerCanvasHeight,\n            canvasWidth: canvasWidth,\n            canvasHeight: canvasHeight,\n            canvasRatio: canvasWidth / (canvasHeight === 0 ? 0.000001 : canvasHeight),\n            transhShapes: transh.map(shape => shape.toSnapshot(shapeSnapshotOption)),\n            shapes: visibles.map(shape => shape.toSnapshot(shapeSnapshotOption))\n        };\n    }\n    restoreShape(shape, isInTrash) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { id, start, user: account, color, fontsize, size, mode, actions: actionStr, optimized, imageData, corner, keyDown, } = shape;\n            let tool = shape.tool;\n            let actions = unpackBulk(actionStr);\n            let actionsLenth = actions.length;\n            // 这个图形的所有动作\n            // 保证用户存在\n            let user = this.users.getUser(account);\n            if (!user) {\n                user = this.addUser(account);\n            }\n            const { ownerCanvasWidth: width, ownerCanvasHeight: height } = this.container;\n            let restoreShape = new Shape({\n                user, mode, tool, size, color, fontsize,\n                start: Point.fromString(start),\n                actions: actions,\n                keyDown: keyDown\n            });\n            restoreShape.id = id;\n            restoreShape.optimized = optimized;\n            let [topLeft, bottomRight] = corner.map(str => Point.fromString(str).toCoord(width, height));\n            const coordinateOffset = topLeft; // 作为坐标的偏移点\n            // 原来绘图，参考的坐标系是画板那么大，action里的坐标也是那么大， \n            // 为了更快的恢复出shape，我们只在图层那么小的区域里绘图，所以原来的坐标需要减去图形的偏移坐标。\n            let { width: shapeWidth, height: shapeHeight } = Coord.areaSize(topLeft, bottomRight);\n            let shapeCtx = restoreShape.ctx;\n            CanvasHelper.setCanvasPropSize(shapeCtx, { width: shapeWidth, height: shapeHeight });\n            restoreShape.corner = [topLeft, bottomRight];\n            applyState(shapeCtx, { ctx: shapeCtx, color, size, tool });\n            console.assert(shapeCtx.lineWidth === size, 'shape line width is not the same', size, shapeCtx.lineWidth);\n            if (isInTrash) {\n                user.recycle.push(restoreShape);\n                // 这里只是把数据推进去了，计算可回退步骤和当前已回退步骤需要自己来做\n            }\n            else {\n                user.shapes.push(restoreShape);\n                this.shapes.push(restoreShape);\n            }\n            const getStartAndEnd = (offset) => {\n                let startAction = actions[0];\n                let endAction = actions[actionsLenth - 1];\n                let startOffset = this.getOwnerCoord(startAction);\n                let endOffset = this.getOwnerCoord(endAction);\n                if (offset) {\n                    return [startOffset.minus(offset), endOffset.minus(offset)];\n                }\n                return [startOffset, endOffset];\n            };\n            let needClearPix = true;\n            switch (tool) {\n                case 'free':\n                case 'erase': {\n                    // 这个是自由绘制,actions是持续的\n                    if (actionsLenth >= 2) {\n                        // 必须大于2\n                        let [startOffset, endOffset] = getStartAndEnd(coordinateOffset);\n                        // 初始化\n                        let start = startOffset.clone();\n                        let oldMid = startOffset.clone();\n                        let end = startOffset.clone();\n                        if (actionsLenth === 2) {\n                            CanvasHelper.line(shapeCtx, start, end, color);\n                        }\n                        else {\n                            // 循环\n                            for (let i = 1, len = actionsLenth - 1; i < len; i++) {\n                                // 跳过第一个和最后一个点\n                                let offset = this.getOwnerCoord(actions[i]).minus(coordinateOffset);\n                                const mid = Coord.middle(end, offset);\n                                const prevOldMid = oldMid.clone();\n                                const prevEnd = end.clone();\n                                oldMid.copy(mid);\n                                end.copy(offset);\n                                CanvasHelper.free(shapeCtx, prevOldMid, prevEnd, mid, color, size);\n                            }\n                            {\n                                // 最后一划\n                                const mid = Coord.middle(end, endOffset);\n                                const prevOldMid = oldMid.clone();\n                                const prevEnd = end.clone();\n                                CanvasHelper.free(shapeCtx, prevOldMid, mid, endOffset, color, size);\n                            }\n                            // 终止\n                        }\n                    }\n                    break;\n                }\n                case 'line': {\n                    let [start, end] = getStartAndEnd(coordinateOffset);\n                    CanvasHelper.line(shapeCtx, start, end, color);\n                    break;\n                }\n                case 'circle':\n                case 'solidCircle':\n                    {\n                        let [start, end] = getStartAndEnd(coordinateOffset);\n                        const { radius } = Shape.calculateRadius(tool, start, end);\n                        CanvasHelper.circle(shapeCtx, start, radius, tool === 'solidCircle', color);\n                        break;\n                    }\n                case 'ellipse':\n                case 'solidEllipse':\n                    {\n                        let [start, end] = getStartAndEnd(coordinateOffset);\n                        const { radius, xRadius, yRadius } = Shape.calculateRadius(tool, start, end);\n                        CanvasHelper.ellipse(shapeCtx, start, xRadius, yRadius, tool === 'solidEllipse', color);\n                        break;\n                    }\n                case 'rect':\n                case 'solidRect':\n                    {\n                        let [start, end] = getStartAndEnd(coordinateOffset);\n                        let xOffset = end.x - start.x;\n                        let yOffset = end.y - start.y;\n                        let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                        if (keyDown.shiftKey) {\n                            xOffset = sign(xOffset) * offset;\n                            yOffset = sign(yOffset) * offset;\n                        }\n                        CanvasHelper.rect(shapeCtx, start, xOffset, yOffset, tool === 'solidRect', color);\n                        break;\n                    }\n                case 'roundRect':\n                case 'solidRoundRect': {\n                    //这种是两点的图形，可以直接绘制\n                    let [start, end] = getStartAndEnd(coordinateOffset);\n                    let xOffset = end.x - start.x;\n                    let yOffset = end.y - start.y;\n                    let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                    if (keyDown.shiftKey) {\n                        xOffset = sign(xOffset) * offset;\n                        yOffset = sign(yOffset) * offset;\n                    }\n                    let cornerRadius = offset < size ? 2 : offset * 0.1;\n                    CanvasHelper.roundRect(shapeCtx, start, xOffset, yOffset, cornerRadius, tool === 'solidRoundRect', color);\n                    break;\n                }\n                case 'text': {\n                    let textAction = actions[0];\n                    let inputDomValue = textAction.text;\n                    let end = this.getOwnerCoord(textAction).minus(coordinateOffset);\n                    CanvasHelper.text(shapeCtx, end, inputDomValue, fontsize, true, color);\n                    needClearPix = false;\n                    break;\n                }\n                case 'fill': {\n                    // 这个是填充图层,填充图层传输的是base64的png图片\n                    let width = Math.abs(topLeft.x - bottomRight.x);\n                    let height = Math.abs(topLeft.y - bottomRight.y);\n                    yield new Promise((resolve) => {\n                        let image = new Image();\n                        image.src = imageData;\n                        // image.style.cssText = 'object-fit:///'\n                        image.onerror = () => resolve();\n                        image.onload = () => {\n                            console.log('fill');\n                            shapeCtx.drawImage(image, 0, 0, width, height);\n                            resolve();\n                        };\n                    });\n                    needClearPix = false;\n                    break;\n                }\n                case \"flag\": {\n                    // 不做任何操作\n                    needClearPix = false;\n                    break;\n                }\n                default: {\n                    needClearPix = false;\n                    const fullCaseChecker = tool;\n                    console.warn('尝试恢复未知的图形');\n                }\n            }\n            if (this.opt.clearTransparentPix && needClearPix) {\n                try {\n                    let imgData = shapeCtx.getImageData(0, 0, shapeWidth, shapeHeight);\n                    this.clearTransparentPix(imgData.data);\n                    shapeCtx.putImageData(imgData, shapeWidth, shapeHeight);\n                }\n                catch (err) {\n                    console.error(err);\n                }\n            }\n        });\n    }\n    mesure(points) {\n        const styleId = document.getElementById('worker-mesure-anim');\n        if (!styleId) {\n            document.head.insertAdjacentHTML('beforeend', `<style>@keyframes xxx-xxx{from{background:red;}to{background:green}}</style>`);\n        }\n        if (!Array.isArray(points)) {\n            points = [points];\n        }\n        points.forEach(point => {\n            this.container.container.insertAdjacentHTML('afterbegin', `<div style=\"z-index:2222;display:inline-block;position:absolute;background:red;top:${point.x}px;left:${point.y}px;width:2px;height:2px;animation:xxx-xxx 1s infinite\"></div>`);\n        });\n    }\n}\n","// type OP_MODE = '' | 'flag' | 'free' | 'erase' | 'fill' | 'select' | 'draw' | 'image' // todo\nexport var WActions;\n(function (WActions) {\n    WActions[WActions[\"VERSION\"] = 0] = \"VERSION\";\n    WActions[WActions[\"START\"] = 1] = \"START\";\n    WActions[WActions[\"MOVE\"] = 2] = \"MOVE\";\n    WActions[WActions[\"END\"] = 3] = \"END\";\n    WActions[WActions[\"REVOKE\"] = 4] = \"REVOKE\";\n    WActions[WActions[\"SERIAL\"] = 5] = \"SERIAL\";\n    WActions[WActions[\"CLEAR\"] = 6] = \"CLEAR\";\n    WActions[WActions[\"CLEAR_ACK\"] = 7] = \"CLEAR_ACK\";\n    WActions[WActions[\"SYNC_REQUEST\"] = 8] = \"SYNC_REQUEST\";\n    WActions[WActions[\"SYNC\"] = 9] = \"SYNC\";\n    WActions[WActions[\"SYNC_PREPARE\"] = 10] = \"SYNC_PREPARE\";\n    WActions[WActions[\"SYNC_PREPARE_ACK\"] = 11] = \"SYNC_PREPARE_ACK\";\n    WActions[WActions[\"LASER_PEN\"] = 12] = \"LASER_PEN\";\n    WActions[WActions[\"LASER_PEN_END\"] = 13] = \"LASER_PEN_END\";\n    WActions[WActions[\"FILE\"] = 14] = \"FILE\";\n    WActions[WActions[\"REDO\"] = 15] = \"REDO\";\n    WActions[WActions[\"CALIBRATE\"] = 16] = \"CALIBRATE\";\n    WActions[WActions[\"TEXT\"] = 17] = \"TEXT\";\n})(WActions || (WActions = {}));\nexport const StateRelatedActions = [\n    WActions.CALIBRATE,\n    WActions.FILE\n];\n// 这个是表示白板组件整体处于一个什么状态的\nexport var WB_MODE;\n(function (WB_MODE) {\n    WB_MODE[WB_MODE[\"readonly\"] = -1] = \"readonly\";\n    WB_MODE[WB_MODE[\"draw\"] = 1] = \"draw\";\n    // mousedown = 3, // 鼠标按下了\n    // mousemove = 4, // 鼠标移动中\n    // mouseup = 5,   // 鼠标抬起\n})(WB_MODE || (WB_MODE = {}));\nexport var WB_TOOL;\n(function (WB_TOOL) {\n    WB_TOOL[WB_TOOL[\"flag\"] = -1] = \"flag\";\n    WB_TOOL[WB_TOOL[\"free\"] = 1] = \"free\";\n    WB_TOOL[WB_TOOL[\"line\"] = 2] = \"line\";\n    WB_TOOL[WB_TOOL[\"rect\"] = 3] = \"rect\";\n    WB_TOOL[WB_TOOL[\"solidRect\"] = 4] = \"solidRect\";\n    WB_TOOL[WB_TOOL[\"roundRect\"] = 5] = \"roundRect\";\n    WB_TOOL[WB_TOOL[\"solidRoundRect\"] = 6] = \"solidRoundRect\";\n    WB_TOOL[WB_TOOL[\"circle\"] = 7] = \"circle\";\n    WB_TOOL[WB_TOOL[\"solidCircle\"] = 8] = \"solidCircle\";\n    WB_TOOL[WB_TOOL[\"ellipse\"] = 9] = \"ellipse\";\n    WB_TOOL[WB_TOOL[\"solidEllipse\"] = 10] = \"solidEllipse\";\n    WB_TOOL[WB_TOOL[\"fill\"] = 11] = \"fill\";\n    WB_TOOL[WB_TOOL[\"text\"] = 12] = \"text\";\n    WB_TOOL[WB_TOOL[\"erase\"] = 13] = \"erase\";\n    // select = 14, //  TODO 选择工具\n})(WB_TOOL || (WB_TOOL = {}));\n","import EM from 'eventemitter3';\nconst globalHub = new EM();\nexport default globalHub;\n","const POINT_MATCHER = /\\(x:([.\\d]+),y:([.\\d]+)\\)/;\n// 点坐标，只能是相对位置的百分比\nclass Point {\n    constructor(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    destroy() {\n    }\n    clone() {\n        return new Point(this.x, this.y);\n    }\n    static fromString(str) {\n        let match = POINT_MATCHER.exec(str);\n        if (match) {\n            return new Point(+match[1], +match[2]);\n        }\n        else {\n            return new Point(0, 0);\n        }\n    }\n    toString() {\n        return `(x:${(this.x).toFixed(8)},y:${(this.y).toFixed(8)})`;\n    }\n    toCoord(width, height) {\n        return new Coord(this.x * width, this.y * height);\n    }\n    copy(point) {\n        this.x = point.x;\n        this.y = point.y;\n    }\n    minus(p) {\n        return new Point(this.x - p.x, this.y - p.y);\n    }\n    topLeft(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x < this.x) {\n                this.x = x;\n            }\n            if (y < this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Point) {\n            this.topLeft(x.x, x.y);\n        }\n        return this;\n    }\n    bottomRight(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x > this.x) {\n                this.x = x;\n            }\n            if (y > this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Point) {\n            this.bottomRight(x.x, x.y);\n        }\n        return this;\n    }\n    static middle(a, b) {\n        return new Point((a.x + b.x) / 2, (a.y + b.y) / 2);\n    }\n    static areaSize(a, b) {\n        return {\n            width: Math.ceil(Math.abs(a.x - b.x)),\n            height: Math.ceil(Math.abs(a.y - b.y)),\n        };\n    }\n    static clone({ x, y }) {\n        return new Point(x, y);\n    }\n}\nexport default Point;\nexport class Coord {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    destroy() {\n    }\n    clone() {\n        return new Coord(this.x, this.y);\n    }\n    static fromString(str, width, height) {\n        let match = POINT_MATCHER.exec(str);\n        if (match) {\n            return new Coord(Math.round(+match[1] * width), Math.round(+match[2] * height));\n        }\n        else {\n            return new Coord(0, 0);\n        }\n    }\n    toPoint(width, height) {\n        return new Point(this.x / width, this.y / height);\n    }\n    copy(point) {\n        this.x = point.x;\n        this.y = point.y;\n    }\n    minus(p) {\n        return new Coord(this.x - p.x, this.y - p.y);\n    }\n    topLeft(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x < this.x) {\n                this.x = x;\n            }\n            if (y < this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Coord) {\n            this.topLeft(x.x, x.y);\n        }\n        return this;\n    }\n    bottomRight(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x > this.x) {\n                this.x = x;\n            }\n            if (y > this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Coord) {\n            this.bottomRight(x.x, x.y);\n        }\n        return this;\n    }\n    static middle(a, b) {\n        return new Coord((a.x + b.x) / 2, (a.y + b.y) / 2);\n    }\n    static areaSize(a, b) {\n        return {\n            width: Math.ceil(Math.abs(a.x - b.x)),\n            height: Math.ceil(Math.abs(a.y - b.y)),\n        };\n    }\n    static clone({ x, y }) {\n        return new Coord(x, y);\n    }\n}\n","import * as CanvasHelper from '../DrawWorker/CanvasHelper';\nimport logger from '../../debug';\nimport { sign } from '../utils';\nclass Shape {\n    constructor({ user, mode, tool, size, color, start, actions, fontsize, keyDown }) {\n        let id = performance && performance.timing && performance.timing.navigationStart + performance.now();\n        this.id = id || Date.now();\n        this.user = user;\n        this.visible = true;\n        // 在画完之后把绘制轨迹截取为图片保存在Canvas中\n        this.ctx = document.createElement('canvas').getContext('2d');\n        const shapeCanvas = this.ctx.canvas;\n        const userCanvas = user.ctx.canvas;\n        shapeCanvas.style.width = userCanvas.style.width;\n        shapeCanvas.style.height = userCanvas.style.height;\n        this.ctx.lineWidth = user.ctx.lineWidth;\n        this.coordWidth = userCanvas.width;\n        this.coordHeight = userCanvas.height;\n        CanvasHelper.setCanvasPropSize(this.ctx, { width: this.coordWidth, height: this.coordHeight });\n        this.tool = tool;\n        this.mode = mode;\n        this.color = color;\n        this.size = size;\n        this.fontsize = fontsize;\n        // 缓存创建这个图层所使用的action，同步数据时，将会把创建这个图层使用的action给发送出去\n        if (Array.isArray(actions)) {\n            this.actions = actions;\n        }\n        else if (typeof actions === 'undefined') {\n            console.warn('action undefined! create a shape');\n            this.actions = [];\n        }\n        else {\n            this.actions = [actions];\n        }\n        this.keyDown = keyDown;\n        // 填充类型，保存一份填充点击的位置\n        this.start = start.toCoord(this.coordWidth, this.coordHeight);\n        // 绘制内容保存为Canvas上所处位置\n        this.corner = [this.start.clone(), this.start.clone()];\n        this.transform = [];\n        this.path = [];\n        this.zIndex = 1;\n        this.detail = Shape.calculateRadius(this.tool, this.start, this.start);\n    }\n    static calculateRadius(tool, start, end) {\n        const width = Math.abs(end.x - start.x);\n        const height = Math.abs(end.y - start.y);\n        let radius;\n        let xRadius;\n        let yRadius;\n        switch (tool) {\n            case 'circle':\n            case 'solidCircle':\n            case 'ellipse':\n            case 'solidEllipse':\n                {\n                    xRadius = width;\n                    yRadius = height;\n                    radius = xRadius > yRadius ? xRadius : yRadius;\n                    break;\n                }\n        }\n        return {\n            xRadius,\n            yRadius,\n            radius,\n            width,\n            height,\n        };\n    }\n    updateCorner(offset) {\n        const end = this.getCoord(offset);\n        const start = this.start;\n        const size = this.size;\n        const [topLeft, bottomRight] = this.corner;\n        const detail = Shape.calculateRadius(this.tool, start, end);\n        this.detail = detail;\n        const { xRadius, yRadius, radius, width, height, } = detail;\n        // const width = Math.abs(end.x - start.x);\n        // const height = Math.abs(end.y - start.y)\n        // let radius: number | undefined;\n        // let xRadius: number | undefined;\n        // let yRadius: number | undefined;\n        switch (this.tool) {\n            case 'solidCircle':\n            case 'circle': {\n                topLeft.x = start.x - radius - size;\n                topLeft.y = start.y - radius - size;\n                bottomRight.x = start.x + radius + size;\n                bottomRight.y = start.y + radius + size;\n                break;\n            }\n            case 'ellipse':\n            case 'solidEllipse': {\n                topLeft.x = start.x - xRadius - size;\n                topLeft.y = start.y - yRadius - size;\n                bottomRight.x = start.x + xRadius + size;\n                bottomRight.y = start.y + yRadius + size;\n                break;\n            }\n            case 'rect':\n            case 'roundRect':\n            case 'solidRect':\n            case 'solidRoundRect':\n            case 'line': {\n                // 从起点开始，计算其他的四个角角\n                topLeft.copy(start.clone().topLeft(end));\n                bottomRight.copy(start.clone().bottomRight(end));\n                break;\n            }\n            case 'text':\n            case 'free':\n            case \"erase\":\n                {\n                    // 划过的地方都需要添加到内容区域\n                    topLeft.topLeft(end);\n                    bottomRight.bottomRight(end);\n                    break;\n                }\n            case 'flag': // 这个没有corner和shape\n            case 'fill': // 填充的corner重新计算\n                // case 'select':\n                break;\n            default:\n                const fullCaseChecker = this.tool;\n        }\n        // 因为stroke有size ，所以会超出边界，所以需要将corner的大小拓展size的大小\n        if (this.tool !== 'fill' &&\n            this.tool !== 'text' &&\n            this.tool !== 'free' &&\n            this.tool !== 'erase') {\n            topLeft.x -= size;\n            topLeft.y -= size;\n            bottomRight.x += size;\n            bottomRight.y += size;\n        }\n        return detail;\n    }\n    expandCorner(size = this.size) {\n        const [topLeft, bottomRight] = this.corner;\n        topLeft.x -= size;\n        topLeft.y -= size;\n        bottomRight.x += size;\n        bottomRight.y += size;\n    }\n    destroy() {\n        logger.shape('shape delete ctx', this.user, this.ctx, this.actions);\n        // console.error(new Error('delete shapes'))\n        // delete this.user;\n        // delete this.ctx;\n        // delete this.actions;\n    }\n    toSnapshot({ width, height }) {\n        const { id, mode, tool, size, fontsize, color, start, actions, keyDown, } = this;\n        if (tool === 'fill') {\n            return {\n                id,\n                user: this.user.account,\n                mode, tool, size, fontsize, color,\n                start: start.toPoint(width, height).toString(),\n                optimized: true,\n                imageData: this.ctx.canvas.toDataURL(),\n                keyDown,\n                corner: this.corner.map(x => x.toPoint(width, height).toString()),\n                actions: actions\n                    .filter(x => x)\n                    .map(action => action.toString())\n                    .join(';') + ';'\n            };\n        }\n        else {\n            return {\n                id,\n                user: this.user.account,\n                mode, tool, size, fontsize, color,\n                start: start.toPoint(width, height).toString(),\n                optimized: false,\n                imageData: '',\n                corner: this.corner.map(x => x.toPoint(width, height).toString()),\n                keyDown,\n                actions: actions\n                    .filter(x => x)\n                    .map(action => action.toString())\n                    .join(';') + ';'\n            };\n        }\n    }\n    draw(displayCtx) {\n        let ownerCoord = this.user.end.toCoord(this.coordWidth, this.coordHeight);\n        switch (this.tool) {\n            case 'fill': {\n                CanvasHelper.fill(displayCtx, ownerCoord, this.color, this);\n                break;\n            }\n            case 'erase':\n            case 'free': {\n                CanvasHelper.free(displayCtx, this.getCoord(this.user.prevOldMid), this.getCoord(this.user.prevEnd), this.getCoord(this.user.oldMid), this.color, this.size);\n                break;\n            }\n            case 'line': {\n                CanvasHelper.line(displayCtx, this.getCoord(this.user.start), this.getCoord(this.user.end), this.color);\n                break;\n            }\n            case 'rect':\n            case 'solidRect': {\n                let endCoord = this.getCoord(this.user.end);\n                let startCoord = this.getCoord(this.user.start);\n                let xOffset = endCoord.x - startCoord.x;\n                let yOffset = endCoord.y - startCoord.y;\n                let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                if (this.user.keyDown.shiftKey) {\n                    xOffset = sign(xOffset) * offset;\n                    yOffset = sign(yOffset) * offset;\n                }\n                CanvasHelper.rect(displayCtx, startCoord, xOffset, yOffset, this.tool === 'solidRect', this.color);\n                break;\n            }\n            case 'roundRect':\n            case 'solidRoundRect': {\n                let endCoord = this.getCoord(this.user.end);\n                let startCoord = this.getCoord(this.user.start);\n                let xOffset = endCoord.x - startCoord.x;\n                let yOffset = endCoord.y - startCoord.y;\n                let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                const radius = offset < this.size ? 2 : offset * 0.1;\n                if (this.user.keyDown.shiftKey) {\n                    xOffset = sign(xOffset) * offset;\n                    yOffset = sign(yOffset) * offset;\n                }\n                CanvasHelper.roundRect(displayCtx, startCoord, xOffset, yOffset, radius, this.tool === 'solidRoundRect', this.color);\n                break;\n            }\n            case 'circle':\n            case 'solidCircle': {\n                let { radius } = this.detail;\n                let startCoord = this.getCoord(this.user.start);\n                CanvasHelper.circle(displayCtx, startCoord, radius, this.tool === 'solidCircle', this.color);\n                break;\n            }\n            case 'ellipse':\n            case 'solidEllipse': {\n                let startCoord = this.getCoord(this.user.start);\n                const { xRadius, yRadius } = this.detail;\n                CanvasHelper.ellipse(displayCtx, startCoord, xRadius, yRadius, this.tool === 'solidEllipse', this.color);\n                break;\n            }\n        }\n    }\n    freeMove(displayCtx) {\n        CanvasHelper.free(displayCtx, this.getCoord(this.user.prevOldMid), this.getCoord(this.user.prevEnd), this.getCoord(this.user.oldMid), this.color, this.size);\n    }\n    freeEnd(displayCtx) {\n        CanvasHelper.free(displayCtx, this.getCoord(this.user.prevOldMid), this.getCoord(this.user.oldMid), this.getCoord(this.user.end), this.color, this.size);\n    }\n    getCoord(offset) {\n        return offset.toCoord(this.coordWidth, this.coordHeight);\n    }\n}\nexport default Shape;\n","import * as CanvasHelper from '../DrawWorker/CanvasHelper';\nimport Point from './Point';\nimport { EventEmitter } from 'eventemitter3';\nimport logger from '../../debug';\nimport { CalibrateAction } from '../Actions';\nimport globalHub from './GlobalHub';\nclass User extends EventEmitter {\n    constructor(UID, maxUserHistory) {\n        super();\n        this.undoCount = 0; // 指示测销或者重做了多少次\n        this.account = UID;\n        // 默认为自由绘图模式\n        //zhongkai: 这个感叹号是语法错误吧？？。另外，每个用户创建一个画布是否有必要？\n        this.ctx = document.createElement('canvas').getContext('2d');\n        // this.ctx.canvas.style.transform = 'translate3d(0,0,0)'\n        this.ctx.canvas.className = 'wb_-_-' + UID;\n        CanvasHelper.setpixelated(this.ctx);\n        CanvasHelper.setLineStyle(this.ctx);\n        this.shapes = []; // 保存用户所做的可视操作的index\n        this.recycle = [];\n        this.mode = 'draw'; // 依据鼠标的状态划分状态\n        this.tool = 'flag';\n        this.flagPos = new Point(99999, 99999).toString();\n        this.size = 4;\n        this.color = '#000000';\n        this.fontsize = 24;\n        this.isMouseDown = false; // 鼠标未按下\n        this.start = new Point(0, 0);\n        this.oldMid = new Point(0, 0);\n        this.prevOldMid = new Point(0, 0);\n        this.end = new Point(0, 0);\n        this.prevEnd = new Point(0, 0);\n        // 只有null，才会在JSON格式化时发送出去\n        this.keyDown = {\n            altKey: false,\n            ctrlKey: false,\n            shiftKey: false,\n            which: -1,\n        }; // 记录当前按下的按键情况\n        // local undo/redo model\n        globalHub.emit('userUpdate', this.account, {\n            tool: this.tool,\n            size: this.size,\n            color: this.color,\n            fontsize: this.fontsize,\n            mode: this.mode,\n            keyDown: this.keyDown,\n        });\n        // private data\n        this.maxUserHistory = maxUserHistory;\n        this._resetCalibrate = this.getCalibrateAction();\n    }\n    // isFlag?: boolean;// TODO\n    get isFlag() {\n        return this.tool === 'flag';\n    }\n    update(opt) {\n        User.PROPS.forEach((key) => {\n            if (key in opt) {\n                this[key] = opt[key];\n            }\n        });\n        this.emit('update', this.account, opt);\n        globalHub.emit('userUpdate', this.account, opt);\n        logger.user('update user ', this, 'with ', opt);\n        // Object.assign(this, opt);\n    }\n    pushShape(shape) {\n        if (this.recycle.length) {\n            this.recycle.forEach(shape => shape.destroy());\n            this.recycle.length = 0;\n        }\n        this.undoCount = 0; // 指示说，当前测销或者重做向量为0了\n        this.shapes.push(shape);\n        this.configActiveShape();\n        // 用户的shapes改变了\n        this.emitUserShape();\n        return shape;\n    }\n    configActiveShape() {\n        console.log('config active shape ');\n        this.activeShape = this.shapes[this.shapes.length - 1];\n    }\n    undo() {\n        if (this.undoCount >= this.maxUserHistory) {\n            console.warn('reach maxUserHistory! abort undo');\n            return this.shapes.length;\n        }\n        this.undoCount++;\n        let shape = this.shapes.pop();\n        if (shape) {\n            this.recycle.push(shape);\n            this.configActiveShape();\n            logger.log('undo:', this);\n            this.emit('undo', this);\n            // 用户的shapes改变了\n            this.emitUserShape();\n        }\n        return this.shapes.length;\n    }\n    redo() {\n        if (this.undoCount === 0) {\n            // 说明没有undo过，所以没法重做\n            return this.recycle.length;\n        }\n        this.undoCount--;\n        let shape = this.recycle.pop();\n        if (shape) {\n            this.shapes.push(shape);\n            this.configActiveShape();\n            this.emit('redo', this);\n            // 用户的shapes改变了\n            this.emitUserShape();\n        }\n        return this.recycle.length;\n        ;\n    }\n    // 同步其他端的参数\n    getCalibrateAction() {\n        const { mode, tool, size, color, fontsize, isMouseDown, keyDown, flagPos } = this;\n        return new CalibrateAction({\n            mode, tool, size, color, fontsize,\n            isMouseDown, flagPos, keyDown\n        });\n    }\n    clearShapes() {\n        logger.user('user reset:', this);\n        this.shapes.forEach(shape => shape.destroy());\n        this.shapes = [];\n        this.recycle = [];\n        this.undoCount = 0;\n        // 用户的shapes改变了\n        this.emitUserShape();\n    }\n    emitUserShape() {\n        let { undoCount } = this; // 撤销或者重做的向量步数\n        let redoLength = this.recycle.length; // 当前可以前进的步数\n        let undoLength = this.shapes.length; // 当前可以减去的步数\n        let avaliableUndoCount = this.maxUserHistory - undoCount;\n        if (undoLength < avaliableUndoCount) {\n            avaliableUndoCount = undoLength;\n        }\n        globalHub.emit('userShapes', this.account, avaliableUndoCount, this.recycle.length);\n    }\n    /**\n     * 这个接口是用于数据同步后还原之后，需要对undoCount进行一个计算\n     */\n    guessMyUndoCount() {\n        this.undoCount = this.recycle.length;\n    }\n    whenMouseDown(offset) {\n        this.prevOldMid = offset.clone();\n        this.prevEnd = offset.clone();\n        this.start = offset.clone();\n        this.oldMid = offset.clone();\n        this.end = offset.clone();\n    }\n    whenMouseMove(offset) {\n        this.prevOldMid = this.oldMid.clone();\n        this.prevEnd = this.end.clone();\n        this.oldMid = Point.middle(this.end, offset);\n        this.end = offset.clone();\n    }\n    whenMouseUp(offset) {\n        this.prevOldMid = this.oldMid.clone();\n        this.prevEnd = this.end.clone();\n        this.oldMid = Point.middle(this.end, offset);\n        this.end = offset.clone();\n    }\n    reset() {\n        this.update(this._resetCalibrate);\n        globalHub.emit('userUpdate', this.account, this._resetCalibrate);\n    }\n    destroy() {\n        if (this.shapes.length || this.recycle.length) {\n            this.clearShapes();\n        }\n        logger.user('delete user ctx:', this);\n        // delete this.ctx;\n    }\n}\nUser.PROPS = [\n    'mode',\n    'tool',\n    'size',\n    'color',\n    'fontsize',\n    'isMouseDown',\n    'flagPos',\n    'keyDown',\n];\nexport default User;\n","/**\n * 绘制层。将任务交给worker(DrawWorker)。同时将DrawWorker中发出的动作发送给服务器。\n *\n * 钟凯：感觉这一层是多余的。\n */\nimport DrawWorker from './DrawWorker/index';\nimport EventEmitter from 'eventemitter3';\nimport { formatColor } from './utils';\nimport createDebug from 'debug';\nimport logger from '../debug';\nimport { isValidTool } from './validator';\nconst adapterLog = createDebug('AdapterDraw');\nexport default class AdapterDraw extends EventEmitter {\n    constructor(container, opt) {\n        super();\n        this.onInited = () => {\n            this.emit('inited');\n        };\n        // opt.color = '#000000'\n        this.worker = new DrawWorker(container, opt);\n        this.worker.on('action', this.onAction.bind(this));\n        this.worker.on('instantAction', this.onInstantAction.bind(this));\n        this.worker.on('inited', this.onInited);\n    }\n    /**\n     *\n     *\n     * @param account\n     * @param action\n     */\n    act(account, action) {\n        // var action = this.command2Action(account, action)\n        if (!action)\n            return;\n        let anyAction = { account: account, action: action };\n        logger.m.adapter('act->', action, account);\n        this.worker.act(anyAction);\n    }\n    // 收到worker内部抛出的action，然后发送到服务器\n    onAction(anyAction) {\n        if (anyAction.account !== this.worker.account || !this.worker.isEnable)\n            return;\n        logger.m.adapter('onAction', anyAction);\n        if (!anyAction)\n            return;\n        this.emit('action', anyAction);\n    }\n    // 收到worker内部抛出的action，然后发送到服务器\n    onInstantAction(anyAction) {\n        logger.m.adapter('onInstantAction', anyAction);\n        if (!anyAction)\n            return;\n        this.emit('instantAction', anyAction);\n    }\n    enableDraw(value) {\n        return this.worker.enableDraw(value);\n    }\n    destroy() {\n        this.worker.destroy();\n        this.removeAllListeners();\n        // delete this.worker;\n        return;\n    }\n    useTool(value, account) {\n        logger.m.adapter(value, account);\n        if (isValidTool(value)) {\n            this.worker.useTool(value, account);\n        }\n        else {\n            console.warn('画笔工具不正确!->', value);\n        }\n    }\n    resize() {\n        return this.worker.resize();\n    }\n    removeUser(account) {\n        return this.worker.removeUser(account);\n    }\n    setContainer(container, opt) {\n        return this.worker.setContainer(container, opt);\n    }\n    image(opt, account) {\n        return this.worker.image(opt, account);\n    }\n    clearImage(account) {\n        return this.worker.clearImage(account);\n    }\n    undo(account) {\n        return this.worker.undo(account);\n    }\n    redo(account) {\n        return this.worker.redo(account);\n    }\n    clear(target, account, opt) {\n        return this.worker.clear(target, account, opt);\n    }\n    setColor(color, account) {\n        if (!color)\n            return;\n        if (formatColor(color, 10) === formatColor.INVALID) {\n            console.error('whiteboard::setColor:设置颜色失败:不合法的色值');\n        }\n        else {\n            console.log('adapterDraw::setColor', color);\n            this.worker.setColor(color, account);\n        }\n    }\n    setSize(size, account) {\n        if (!size)\n            return;\n        if (!/^[\\d]+$/.test('' + size)) {\n            console.error('whiteboard::setSize:设置画笔粗细失败:不合法的数值:', size);\n            return;\n        }\n        console.log('adapterDraw::setSize', size);\n        this.worker.setSize(size, account);\n    }\n    setFontsize(size, account) {\n        if (!size)\n            return;\n        if (!/^[\\d]+$/.test('' + size)) {\n            console.error('whiteboard::setFontsize:设置文字大小失败:不合法的数值:', size);\n            return;\n        }\n        console.log('adapterDraw::setFontsize', size);\n        this.worker.setFontsize(size, account);\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nimport createDebug from 'debug';\nimport EventEmitter from 'eventemitter3';\nimport pako from 'pako';\nimport logger from '../debug';\nimport Simulator from '../simulator';\nimport SyncManager from './ActionManager';\nimport { CalibrateAction, FileAction, SerialAction, VersionAction } from './Actions';\nimport * as ActionUtils from './ActionUtils';\nimport AdapterDraw from './adapterDraw';\nimport { WActions } from './Itypes';\nimport globalHub from './Model/GlobalHub';\nimport * as utils from './utils';\nimport { getKiloBytes, sleep } from './utils';\nconst logData = createDebug('data');\nconst fileTypeMap = {\n    '10': 'jpg',\n    '11': 'png',\n    '0': 'unknown'\n};\nconst toKB = (data) => getKiloBytes(data).toFixed(2) + 'KB';\nconst ungzip = (gziped) => {\n    let gzipedSize = gziped.length;\n    let data = pako.ungzip(gziped, { to: 'string' });\n    console.debug(`GZIP数据大小:${toKB(gzipedSize)},原始数据大小：${toKB(data)}，压缩比率为 ${(gzipedSize * 100 / data.length).toFixed(2)}%`);\n    return data;\n};\nexport default class WorkerManager extends EventEmitter {\n    constructor(container, opt = {}) {\n        super();\n        this.afterInit = () => {\n            this.state = 'inited';\n            this.syncManager.send({\n                toAccount: 0, actions: [\n                    {\n                        action: new VersionAction({\n                            ver: 1.0, account: this.account,\n                            gzip: true\n                        })\n                    }\n                ]\n            });\n            this.emit('inited');\n        };\n        this.afterSync = (snapshot) => {\n            this.syncState = 'done';\n            this.flushInCommingQueue();\n            this.emit('afterSync', snapshot);\n        };\n        this.readyToSyncData = () => {\n            if (this.identity === 'owner') {\n                this.syncState = 'begin';\n                this.syncBegin();\n            }\n            if (this.identity === 'normal') {\n                this.syncState = 'waiting';\n                this.syncRequest(this.ownerAccount); // 不是 owner 则向 owner 请求同步\n            }\n        };\n        this.onIframeMessage = (event) => {\n            logger.h5('onIframeMessage', event.data);\n            const data = event.data || {};\n            if (data.identity !== 'to_yunxin_wb') {\n                return;\n            }\n            let fileData = this.syncManager.fileData;\n            if (fileData) {\n                const currentFile = Object.assign({}, fileData);\n                let { page, anim, trigger, time } = data;\n                const isBack = data.isBack ? '1' : '0';\n                time = '0';\n                const h5Cmd = [page, anim, trigger, isBack, time].join('&');\n                console.warn('onIframeMessage');\n                console.warn(h5Cmd, currentFile.h5Cmd);\n                if (parseInt(page) === 0) {\n                    return;\n                }\n                if (currentFile.h5Cmd === h5Cmd) {\n                    console.warn('the same cmd');\n                }\n                if (currentFile.currentPage != page) { // page 不一样了，通过上下步翻页了，清空\n                    this.drawAdapter.clear();\n                }\n                currentFile.currentPage = parseInt(page);\n                currentFile.h5Cmd = h5Cmd;\n                logger.h5('onIframeMessage->emit action', event.data);\n                // setTimeout(() => {\n                //   this.pagedHtmlFile([page, anim, trigger, isBack, time])\n                // })\n                this.drawAdapter.worker.emitAction({\n                    account: this.account,\n                    action: new FileAction(currentFile)\n                });\n            }\n        };\n        this.simulator = new Simulator(this);\n        this.container = container;\n        this.opt = opt;\n        this.account = opt.account;\n        this.nim = opt.nim;\n        this.identity = opt.identity;\n        this.ownerAccount = opt.ownerAccount;\n        this.connector = opt.whiteboard;\n        this.incommingQueue = [];\n        this.actionProcessing = false;\n        console.log('init wb adapter');\n        // Model层 负责数据的存储与发送\n        this.syncManager = new SyncManager(this.account);\n        this.syncManager.on('flush', (data) => {\n            if (this.connector && this.connector.sendData) {\n                // this.emit('data', data) // 抛出给外部，看有没有必要\n                this.connector.sendData(data);\n            }\n        });\n        this.fileMap = {};\n        this.eventHub = globalHub;\n        // 当前状态\n        this.state = 'created';\n        this.syncState = 'inited';\n        // View层 负责绘制\n        this.drawAdapter = new AdapterDraw(container, this.opt);\n        this.drawAdapter.on('inited', this.afterInit);\n        this.drawAdapter.on('action', (anyAction) => {\n            console.log('syncState', this.syncState);\n            if (this.syncState !== 'waiting') { // 如果是在同步等待中，则不会发出请求\n                this.syncManager.broadcastAction(anyAction);\n            }\n        });\n        this.drawAdapter.on('instantAction', (anyAction) => {\n            console.warn('instant action', this.syncState);\n            if (this.syncState !== 'waiting') { // 如果是在同步等待中，则不会发出请求\n                setTimeout(() => {\n                    this.syncManager.send({ toAccount: 0, actions: [anyAction] }, 1);\n                });\n            }\n        });\n        this.connectorStatus = 'off'; // TODO: connector的状态监控\n        if (this.connector) {\n            // connector的事件绑定\n            this.connector.on('data', (obj) => {\n                this.execute(obj);\n            });\n            this.connector.on('joinChannel', (obj) => {\n                console.log('join channel ', obj);\n                if (obj.account === this.opt.ownerAccount) {\n                    // 说明房间的房主已经重新加入房间了，如果当前状态是waiting，需要将状态重置\n                    if (this.syncState === 'waiting') {\n                        this.syncState = 'done';\n                        this.flushInCommingQueue();\n                    }\n                }\n                // 每当有新用户加入的时候，看起来我们需要重制用户的状态，其实不用重制的，只需要保证用户上线之后，会广播一次自己当前的状态就可以了\n                // if (userManager.hasUser(obj.account)) {\n                //   let user = userManager.getUser(obj.account);\n                //   if (user) {\n                //     user.reset()\n                //   }\n                // }\n            });\n        }\n        this.timmer = setInterval(() => {\n            // 为了防止incommingQueue由于消息中断，或者其他原因，阻塞页面，所以需要设置超时20秒后，就抛弃一些数据，继续执行其他步骤\n            // TODO\n        }, 100);\n    }\n    // 该方法接收上层的数据包\n    /**\n     * 当 ignoreQueue 为false时\n     * 收到的普通数据，直接会通过并执行这个函数，不会推入消息队列。\n     * 收到的GZIP数据，如果长度为1，会解压后当作普通数据处理，直接执行这个普通消息。\n     * 收到的GZIP数据，如果长度不为1，会加入到消息队列中；\n     *    如果此时，队列里的GZIP数据不满足执行条件，会跳过本次执行。\n     *    如果此时队列里的GZIP数据满足执行条件，会调用[清空消息队列]函数，并跳过本次执行\n     * 如果普通数据长度为0，将会跳过本次执行。\n     * 如果当前状态为正在处理消息队列中，无论队列是否为空，都需要推入消息队列。\n     * 如果当前状态没有在处理消息队列，但是消息队列不为空，需要推入消息队列。\n     * @param param0\n     * @param enqueueIfNeeded 是否需要排队，默认状态下，如果incommings队列不为空，所有的消息都要推入这个队列。\n     */\n    execute({ account, data }) {\n        if (!account || !data || account === this.account)\n            return;\n        // 消息队列里的文件格式\n        let qactions;\n        let qid;\n        let qtype;\n        // 辅助信息\n        let alreadyInMessageQueue = false;\n        // fix 有时候data是数字类型的\n        if (typeof data === 'number') {\n            data = '' + data;\n        }\n        if (data.substr(0, 4) === 'GZIP') {\n            // GZIP 文件解析处理\n            let minimal = data.substr(5, 150); // 取一个小集合\n            let match1 = SyncManager.GZIP_TESTER_1.exec(minimal);\n            if (match1) {\n                minimal = '';\n                const [fullText, id, length, index] = match1;\n                qid = id;\n                qtype = 'gzip';\n                let gziped = data.substr(5 + fullText.length);\n                if (length === '1') {\n                    // 如果只有一条消息\n                    data = ungzip(gziped);\n                    qactions = ActionUtils.unpackBulk(data);\n                }\n                else {\n                    // 如果有多条消息，需要阻塞然后等到所有消息都收到后才继续\n                    let incomming = this.incommingQueue.find(x => x.id === id);\n                    if (!incomming) {\n                        // 队列中没有找到这个gzip包,就推入队列中去\n                        let _gzipArr = new Array(+length);\n                        _gzipArr[+index] = gziped;\n                        incomming = {\n                            account, type: qtype, id: qid,\n                            total: +length, curLen: 1, data: _gzipArr, result: [new SerialAction()]\n                        };\n                        this.incommingQueue.push(incomming);\n                        return; // 跳过，数据不完整\n                    }\n                    else {\n                        // 队列中找到这个gzip包\n                        incomming.curLen++;\n                        incomming.data[+index] = gziped;\n                        if (incomming.total === incomming.curLen) {\n                            // 说明所有的数据都已经齐全了\n                            // 如果在第一位，就可以执行下去了\n                            const unzipedText = ungzip(incomming.data.join(''));\n                            qactions = ActionUtils.unpackBulk(unzipedText);\n                            incomming.result = qactions;\n                            alreadyInMessageQueue = true;\n                        }\n                        else {\n                            return; // 跳过，数据不完整\n                        }\n                    }\n                }\n            }\n            else {\n                // 没有匹配到GZIP\n                console.error('未匹配到GZIP压缩格式', data);\n                return;\n            }\n        }\n        else {\n            // 普通文字消息的处理,判断是否需要推入队列\n            qactions = ActionUtils.unpackBulk(data);\n            qid = '' + Date.now() + Math.random();\n            qtype = 'text';\n        }\n        const queueIndex = alreadyInMessageQueue ? this.incommingQueue.findIndex(x => x.id === qid) : -1;\n        // 检测是否有同步消息,或者同步准备syncPrepare，如果有的话，就会优先执行\n        let vipActionIndex = qactions.findIndex(x => x.TYPE === WActions.SYNC || x.TYPE === WActions.SYNC_PREPARE);\n        if (vipActionIndex > -1) {\n            let vipAction = qactions[vipActionIndex];\n            if (vipAction.TYPE === WActions.SYNC) {\n                this.handleSyncAction(vipAction);\n            }\n            else {\n                this.executeActions(account, qactions);\n            }\n            // 注意！约定同步消息是单独一次性发出的，所以qactions的长度只有一个，所以后续操作可以忽略了。\n            return;\n        }\n        // 检测是否有syncPrepare消息，如果有的话，优先执行\n        if (this.syncState === 'waiting' || this.actionProcessing) {\n            // 当学生端在同步等待的时候，消息必须需要推入队列里。\n            // 当消息队列正在被处理的时候，消息必须需要推入队列。\n            // 如果消息队列里有数据，说明有消息阻塞了，新来的消息需要推入队列\n            if (!alreadyInMessageQueue) {\n                this.incommingQueue.push({\n                    account,\n                    type: qtype,\n                    id: qid,\n                    total: 1, curLen: 1, data: [],\n                    result: qactions\n                });\n            }\n        }\n        else if (this.incommingQueue.length == 0) {\n            // 如果不是等待状态，队列消息也没有处理中，消息队列的长度也为空，所以当前动作可以执行\n            logger.m.worker('execute:', account, qactions);\n            this.executeActions(account, qactions);\n        }\n        else {\n            // 如果不是等待状态，消息队列也没有在处理中，消息队列的长度不为空，\n            if (queueIndex === 0) {\n                // 如果当前消息是阻塞消息队列的原因的话，就批处理消息队列\n                this.flushInCommingQueue();\n            }\n            else {\n                // 如果当前消息不是阻塞消息队列的原因，那也推入队列里\n                if (!alreadyInMessageQueue) {\n                    this.incommingQueue.push({\n                        account,\n                        type: qtype,\n                        id: qid,\n                        total: 1, curLen: 1, data: [],\n                        result: qactions\n                    });\n                }\n            }\n        }\n    }\n    executeActions(account, actions) {\n        var actions_1, actions_1_1;\n        var e_1, _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { drawAdapter } = this;\n            try {\n                for (actions_1 = __asyncValues(actions); actions_1_1 = yield actions_1.next(), !actions_1_1.done;) {\n                    let action = actions_1_1.value;\n                    switch (action.TYPE) {\n                        case WActions.REVOKE:\n                        case WActions.REDO:\n                        case WActions.CALIBRATE:\n                        case WActions.TEXT:\n                        case WActions.START:\n                        case WActions.MOVE:\n                        case WActions.END:\n                        case WActions.LASER_PEN:\n                        case WActions.LASER_PEN_END:\n                            {\n                                drawAdapter.act(account, action);\n                                break;\n                            }\n                        case WActions.SERIAL:\n                            console.log('serial:', action);\n                            break;\n                        case WActions.CLEAR: {\n                            this.syncManager.clear();\n                            this.syncManager.makeClearAck(account);\n                            drawAdapter.clear(action.accounts, account, { force: this.ownerAccount === account, quiet: true });\n                            break;\n                        }\n                        case WActions.CLEAR_ACK: {\n                            // this.syncManager.clearCache(account)\n                            drawAdapter.act(account, action);\n                            break;\n                        }\n                        case WActions.SYNC_REQUEST: {\n                            console.warn('recive sync request from ', account);\n                            let snapshot = this.drawAdapter.worker.getSnapshot();\n                            this.syncManager.syncTo(account, snapshot);\n                            // drawAdapter.act(account, action)  // 这里不需要执行\n                            break;\n                        }\n                        case WActions.SYNC: {\n                            console.warn('recive sync from ', account);\n                            let syncAction = action;\n                            yield this.handleSyncAction(syncAction);\n                            // drawAdapter.act(account, action) // 这里不需要执行\n                            break;\n                        }\n                        case WActions.SYNC_PREPARE: {\n                            console.warn('recive sync prepare from ', account);\n                            this.syncResponse(account);\n                            // drawAdapter.act(account, action) // 这里不需要执行\n                            break;\n                        }\n                        case WActions.SYNC_PREPARE_ACK: {\n                            console.warn('recive sync prepare ack from ', account);\n                            break;\n                        }\n                        case WActions.FILE: {\n                            if (action.TYPE === WActions.FILE) {\n                                const file = action.file;\n                                logger.h5('recive h5 FileAction', file);\n                                const { fileData } = this.syncManager;\n                                const currentFile = fileData && Object.assign({}, fileData);\n                                if (JSON.stringify(fileData) === JSON.stringify(file)) {\n                                    return console.warn('same file data');\n                                }\n                                // 收到的文件类型是图片类型\n                                if (file.type === 'img') {\n                                    // 如果当前已经有文件内容了\n                                    if (currentFile) {\n                                        if (currentFile.type === 'h5') {\n                                            // 不同类型，需要清空之前的H5\n                                            this.clearHtmlFile();\n                                        }\n                                        if (file.docId && file.docId == currentFile.docId) { // 节约资源值传送了必要信息\n                                            // 是相同的一个文件\n                                            currentFile.currentPage = parseInt('' + (file.currentPage || 1));\n                                            currentFile.url = currentFile.urlStr.replace('{index}', '' + file.currentPage);\n                                            this.image(currentFile, account);\n                                        }\n                                        // 合并更新\n                                        const [fileDataNext] = FileAction.immuteUpdate(currentFile, file);\n                                        this.syncManager.setFileData(fileDataNext);\n                                    }\n                                    else {\n                                        // 当前第一次收到这个类型的文件，直接更新\n                                        let fileNext;\n                                        if (this.opt.handleFile) {\n                                            fileNext = yield this.opt.handleFile(file.type, file);\n                                        }\n                                        else {\n                                            fileNext = file;\n                                        }\n                                        this.syncManager.setFileData(fileNext);\n                                        this.image(file, account);\n                                    }\n                                }\n                                else if (file.type === 'h5') {\n                                    // 如果是h5类型的文件\n                                    // this.clearImage(account)\n                                    logger.h5('current file', currentFile);\n                                    if (currentFile) {\n                                        if (currentFile.type == 'img') {\n                                            // 不同类型\n                                            this.clearImage(account);\n                                        }\n                                        if (file.docId && file.docId == currentFile.docId) {\n                                            // 是相同的一个文件\n                                            logger.h5('current file h5 cmd is ', currentFile.h5Cmd);\n                                            logger.h5('file h5 cmd is ', file.h5Cmd);\n                                            if (currentFile.h5Cmd !== file.h5Cmd) {\n                                                this.pagedHtmlFile(file.h5Cmd.split('&'));\n                                            }\n                                        }\n                                        else {\n                                            // 是不同文件\n                                            this.syncManager.setFileData(file);\n                                            this.setHtmlFile(file, account);\n                                            if (file.h5Cmd) { // 初次进入就有页面时 等 3s ppt载入和初始动画……\n                                                setTimeout(this.pagedHtmlFile.bind(this, file.h5Cmd.split('&')), 3000);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        // 当前第一次收到这个类型的文件，直接更新\n                                        this.syncManager.setFileData(file);\n                                        this.setHtmlFile(file, account);\n                                        if (file.h5Cmd) { // 初次进入就有页面时 等 3s ppt载入和初始动画……\n                                            setTimeout(this.pagedHtmlFile.bind(this, file.h5Cmd.split('&')), 3000);\n                                        }\n                                    }\n                                }\n                                else {\n                                    logger.h5('delete file', currentFile);\n                                    this.syncManager.setFileData(undefined);\n                                    if (currentFile) {\n                                        if (currentFile.type === 'img') {\n                                            this.clearImage(account);\n                                        }\n                                        else if (currentFile.type === 'h5') {\n                                            this.clearHtmlFile();\n                                        }\n                                    }\n                                }\n                                break;\n                            }\n                        }\n                        case WActions.VERSION: {\n                            if (action.TYPE === WActions.VERSION) {\n                                break;\n                            }\n                        }\n                        default:\n                            const fullCaseChecker = action.TYPE;\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (actions_1_1 && !actions_1_1.done && (_a = actions_1.return)) yield _a.call(actions_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n    flushInCommingQueue() {\n        var e_2, _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.syncState === 'waiting') {\n                return;\n            }\n            let { length } = this.incommingQueue;\n            while (length) {\n                this.actionProcessing = true;\n                const flushQueue = this.incommingQueue.slice();\n                let doneLen = 0;\n                let forceWaiting = false;\n                try {\n                    try {\n                        for (var flushQueue_1 = (e_2 = void 0, __asyncValues(flushQueue)), flushQueue_1_1; flushQueue_1_1 = yield flushQueue_1.next(), !flushQueue_1_1.done;) {\n                            let incomming = flushQueue_1_1.value;\n                            switch (incomming.type) {\n                                case 'text':\n                                case 'gzip':\n                                    if (incomming.total === incomming.curLen) {\n                                        doneLen++;\n                                        if (!incomming.dirty) {\n                                            yield this.executeActions(incomming.account, incomming.result);\n                                        }\n                                    }\n                                    else {\n                                        forceWaiting = true;\n                                        throw new Error('message need waiting!');\n                                    }\n                                    break;\n                                case 'function': {\n                                    break;\n                                }\n                                default:\n                                    const fullCaseChecker = incomming.type;\n                            }\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (flushQueue_1_1 && !flushQueue_1_1.done && (_a = flushQueue_1.return)) yield _a.call(flushQueue_1);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                finally {\n                    this.incommingQueue = this.incommingQueue.slice(doneLen, this.incommingQueue.length);\n                }\n                if (forceWaiting) {\n                    //  必须强制等待\n                    break;\n                }\n                else {\n                    length = this.incommingQueue.length;\n                }\n            }\n            this.actionProcessing = false;\n        });\n    }\n    destroy() {\n        this.drawAdapter && this.drawAdapter.destroy();\n        this.syncManager && this.syncManager.destroy();\n        this.eventHub.removeAllListeners();\n        ;\n        this.removeAllListeners();\n        // delete this.eventHub;\n        // delete this.drawAdapter\n        // delete this.syncManager\n    }\n    // 是否允许绘图操作\n    enableDraw(enable) {\n        if (this.state === 'inited') {\n            this.drawAdapter && this.drawAdapter.enableDraw(enable);\n        }\n        else {\n            console.warn('inited');\n        }\n    }\n    handleSyncAction(action) {\n        var e_3, _a, e_4, _b, e_5, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log(action);\n            let rawSnapshot;\n            let usersRaw;\n            //\n            // 先处理图层\n            //\n            const { shapes, users, transhShapes, file, canvasRatio, canvasHeight, canvasWidth, ownerWidth, ownerHeight } = action.sync;\n            const shapeQueue = shapes.slice();\n            // 将用户回收站的图层也填充进去。\n            const shapeGen = function () {\n                return __asyncGenerator(this, arguments, function* () {\n                    while (shapeQueue.length) {\n                        yield yield __await(shapeQueue.shift());\n                    }\n                });\n            };\n            // 调整当前画布的比例\n            let containerManager = this.drawAdapter.worker.container;\n            containerManager.canvasRatio = canvasRatio;\n            containerManager.resize();\n            // 更新房主的画板的大小\n            containerManager.updateCanvasPropSize(ownerWidth, canvasHeight);\n            let lastSleepTime = Date.now();\n            // 用户到默认状态\n            let currentUserDefaultState = this.drawAdapter.worker.localUser.getCalibrateAction();\n            const prevActionProcessing = this.actionProcessing;\n            this.actionProcessing = true;\n            // 如果有背景文件\n            if (file) {\n                this.executeActions(this.ownerAccount, [new FileAction(file)]);\n            }\n            try {\n                for (var _d = __asyncValues(shapeGen()), _e; _e = yield _d.next(), !_e.done;) {\n                    let shape = _e.value;\n                    if (!shape) {\n                        continue;\n                    }\n                    try {\n                        yield this.drawAdapter.worker.restoreShape(shape, false);\n                    }\n                    catch (error) {\n                        console.error(error);\n                    }\n                    // 异步执行停顿,防止websocket心跳超时\n                    let currentTime = Date.now();\n                    if (currentTime - lastSleepTime > 200) {\n                        yield sleep(30);\n                        lastSleepTime = Date.now();\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) yield _a.call(_d);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            // 重新渲染出所有图像\n            this.drawAdapter.worker.container.fullRender();\n            try {\n                // 将用户回收站里的数据还原\n                for (var users_1 = __asyncValues(users), users_1_1; users_1_1 = yield users_1.next(), !users_1_1.done;) {\n                    let user = users_1_1.value;\n                    if (user.recycle && user.recycle.length) {\n                        try {\n                            for (var _f = (e_5 = void 0, __asyncValues(user.recycle)), _g; _g = yield _f.next(), !_g.done;) {\n                                let shape = _g.value;\n                                try {\n                                    yield this.drawAdapter.worker.restoreShape(shape, true);\n                                }\n                                catch (error) {\n                                    console.error(error);\n                                }\n                                // 异步执行停顿,防止websocket心跳超时\n                                let currentTime = Date.now();\n                                if (currentTime - lastSleepTime > 200) {\n                                    yield sleep(30);\n                                    lastSleepTime = Date.now();\n                                }\n                            }\n                        }\n                        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n                        finally {\n                            try {\n                                if (_g && !_g.done && (_c = _f.return)) yield _c.call(_f);\n                            }\n                            finally { if (e_5) throw e_5.error; }\n                        }\n                    }\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (users_1_1 && !users_1_1.done && (_b = users_1.return)) yield _b.call(users_1);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n            // 需要对图层进行排序,但是现在好像不用手动操作，这里约定，用户回收站里的数据是等效的还原的\n            this.drawAdapter.worker.users.all.forEach(user => {\n                user.guessMyUndoCount();\n                user.emitUserShape();\n            });\n            //\n            // 最后将所有用户的状态校准一下\n            //\n            usersRaw = users.map(userSnapshot => {\n                const { account, calibrate } = userSnapshot;\n                let action = ActionUtils.unpack(calibrate.toString());\n                // 当前用户的状态不需要恢复老师端保存的状态\n                const notCurrentUser = account !== this.drawAdapter.worker.account;\n                if (notCurrentUser && action) {\n                    this.drawAdapter.act(account, action);\n                }\n                if (!notCurrentUser && action) {\n                    currentUserDefaultState = action;\n                }\n                return {\n                    account,\n                    calibrate: action\n                };\n            });\n            // 再还原当前用户的状态，避免刚才\n            this.drawAdapter.act(this.account, currentUserDefaultState);\n            // 同步自己的状态给其他用户\n            this.declareCalibrate(currentUserDefaultState);\n            rawSnapshot = {\n                users: usersRaw,\n                shapes: shapes,\n                transhShapes: transhShapes\n            };\n            this.actionProcessing = prevActionProcessing;\n            this.afterSync(rawSnapshot);\n        });\n    }\n    // 设置宽度\n    setSize(size, account) {\n        this.syncManager.pushQueue(0, {\n            action: new CalibrateAction({ size: size })\n        });\n        this.drawAdapter.setSize(size, account);\n    }\n    // 设置宽度\n    setFontsize(size, account) {\n        this.drawAdapter.setFontsize(size, account);\n    }\n    // 设置颜色\n    setColor(color, account) {\n        this.drawAdapter.setColor(color, account);\n    }\n    // 撤销操作\n    undo() {\n        return this.drawAdapter.undo();\n    }\n    // 重做操作\n    redo() {\n        return this.drawAdapter.redo();\n    }\n    // 清除画布\n    clear(account, actAccount, option) {\n        this.drawAdapter.clear(account, actAccount, option);\n    }\n    // 绘制图片\n    image(option, account) {\n        this.drawAdapter.image(option, account);\n    }\n    // 清除背景图\n    clearImage(account = this.account) {\n        this.clear();\n        this.drawAdapter.clearImage(account);\n    }\n    setHtmlFile(obj, account = this.account) {\n        logger.h5('setHtmlFile', obj);\n        const { paddingLeft, paddingTop, canvasHeight, canvasWidth } = this.drawAdapter.worker.container;\n        if (this.iframe) {\n            console.warn('已经有iframe了');\n            return;\n        }\n        const iframe = document.createElement('iframe');\n        iframe.src = obj.url;\n        iframe.scrolling = 'no';\n        iframe.name = 'nimHtmlFile';\n        iframe.frameBorder = '0';\n        iframe.style.position = 'absolute';\n        iframe.style.top = '' + paddingTop + 'px';\n        iframe.style.left = '' + paddingLeft + 'px';\n        iframe.style.zIndex = '1';\n        // iframe.style.right = '0'\n        // iframe.style.bottom = '0'\n        iframe.style.width = canvasWidth + 'px';\n        iframe.style.height = canvasHeight + 'px';\n        iframe.width = \"\" + canvasWidth;\n        iframe.height = '' + canvasHeight;\n        this.container.insertBefore(iframe, this.container.children[0]);\n        // 改变背景颜色，记得要改回来\n        this.drawAdapter.worker.container.displayCanvas.style.backgroundColor = 'transparent';\n        this.iframe = iframe;\n        window.addEventListener('message', this.onIframeMessage, false);\n        this.drawAdapter.worker.emitAction({\n            account: account,\n            action: new FileAction(obj)\n        });\n        this.syncManager.setFileData(obj);\n    }\n    pagedHtmlFile(arr) {\n        // debugger\n        logger.h5('pagedHtmlFile', arr);\n        const iframe = this.iframe;\n        if (iframe) {\n            try {\n                if (!iframe.contentWindow || (iframe.contentDocument && iframe.contentDocument.readyState !== 'complete')) {\n                    setTimeout(this.pagedHtmlFile.bind(this, arr), 800);\n                    return;\n                }\n            }\n            catch (e) {\n                console.error(e);\n                return false;\n            }\n            const data = {\n                identity: 'from_yunxin_wb',\n                page: parseInt(arr[0]),\n                anim: parseInt(arr[1]),\n                trigger: parseInt(arr[2]),\n                isBack: arr[3] == '1',\n                time: 0 //+arr[4]\n            };\n            //@ts-ignore\n            iframe.currentPage = parseInt(data.page);\n            let { page, anim, trigger, time, isBack } = data;\n            const h5Cmd = [page, anim, trigger, isBack, time].join('&');\n            console.warn('toPage');\n            console.warn(h5Cmd, this.syncManager.fileData && this.syncManager.fileData.h5Cmd);\n            logger.h5('toHtmlPage', data);\n            iframe.contentWindow.postMessage(data, '*');\n        }\n    }\n    toPageHtmlFile(direction, index, num) {\n        const iframe = this.iframe;\n        logger.h5('toPageHtmlFile', direction, index, num);\n        if (iframe) {\n            try {\n                if (!iframe.contentWindow || (iframe.contentDocument && iframe.contentDocument.readyState !== 'complete')) {\n                    return false;\n                }\n            }\n            catch (e) {\n                return false;\n            }\n            let data;\n            switch (direction) {\n                case 'leftEnd':\n                    data = {\n                        page: 0,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                case 'left':\n                    data = {\n                        page: index - 1,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                case 'up':\n                    data = { which: 37 };\n                    break;\n                case 'down':\n                    data = { which: 39 };\n                    break;\n                case 'right':\n                    data = {\n                        page: index,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                case 'rightEnd':\n                    data = {\n                        page: num - 1,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                default:\n                    console.warn('');\n            }\n            if (typeof data !== 'undefined') {\n                data.identity = 'from_yunxin_wb';\n                logger.h5('current file h5 cmd is ', this.syncManager.fileData && this.syncManager.fileData.h5Cmd);\n                logger.h5('toPageHtmlFile->post', data);\n                iframe.contentWindow.postMessage(data, '*');\n                //@ts-ignore\n                iframe.currentPage = parseInt(data.page);\n                //@ts-ignore\n                iframe.pageNum = num;\n            }\n            return true;\n        }\n    }\n    clearHtmlFile() {\n        this.clear();\n        logger.h5('clearHtmlFile');\n        if (!this.iframe || !this.container || (this.iframe && this.iframe.parentNode !== this.container)) {\n            return;\n        }\n        this.syncManager.setFileData(undefined);\n        window.removeEventListener('message', this.onIframeMessage, false);\n        this.container.removeChild(this.iframe);\n        this.drawAdapter.worker.container.displayCanvas.style.backgroundColor = '#ffffff';\n    }\n    _image(option, account = this.account) {\n        console.log('_image', option);\n        const { docId, currentPage } = option;\n        if (!docId || currentPage - 0 === 0) {\n            this.clearImage(account);\n            return;\n        }\n        const nim = this.nim;\n        const file = this.fileMap[docId];\n        if (!file && !nim)\n            return;\n        console.log('file!!!', file);\n        if (file) {\n            const url = `${file.prefix}_${file.type}_${currentPage}.${fileTypeMap[file.transType]}`;\n            // this.draw!.image(url, account)\n            // this.drawAdapter.image(url)\n            return;\n        }\n        const that = this;\n        if (!nim) {\n            console.warn('缺少nim实例，无法拉取文件');\n            return;\n        }\n        nim.getFile({\n            docId,\n            success: function (data) {\n                // console.log('getFile success', data)\n                that.fileMap[docId] = data;\n                that._image(option, account);\n            },\n            error: function (error) {\n                console.error('getFile error', error);\n            }\n        });\n    }\n    setContainer(container, opt) {\n        this.drawAdapter.setContainer(container, opt);\n    }\n    removeUser(account) {\n        account && this.drawAdapter.removeUser(account);\n    }\n    /**\n     * 等比例调整画布大小，\n     * @public\n     */\n    resize() {\n        this.drawAdapter.resize();\n    }\n    useTool(tool, account) {\n        this.drawAdapter.useTool(tool, account);\n    }\n    // 同步准备清空，主播重新登录聊天室后，广播该协议给其他人，其他人收到后进行本地清空\n    syncBegin() {\n        logger.m.worker('owner sync begin');\n        this.syncManager.clear();\n        this.syncManager.makeSyncPrepare();\n        this.clear();\n        this.clearImage();\n        this.syncState = 'done';\n        this.declareCalibrate(); // 将自己的状态广播一下\n        this.afterSync();\n    }\n    // 同步请求，非主播重新登录后发请求给主播\n    syncRequest(account) {\n        this.syncState = 'waiting';\n        logger.m.worker('sync request->', account);\n        this.syncManager.makeSyncRequest(account);\n    }\n    // 同步响应，主播重新登录后,非主播响应请求给主播\n    syncResponse(account) {\n        logger.m.worker('sync response->', account);\n        this.clear(undefined, account, { force: true });\n        this.clearHtmlFile();\n        this.clearImage(account);\n        this.syncManager.clear();\n        this.syncManager.makeSyncPrepareAck(account);\n        this.declareCalibrate(); // 将自己的状态更新一下\n    }\n    declareCalibrate(action) {\n        if (!action) {\n            let selfCalibrateAction = this.drawAdapter.worker.getSelfCalibrate();\n            if (selfCalibrateAction) {\n                action = selfCalibrateAction;\n            }\n        }\n        if (action) {\n            // 同步自己的当前状态过去\n            logger.m.worker('sync response calibrate->', action);\n            // 这里不需要等待，必须发送，防止被删除\n            this.syncManager.send({ toAccount: 0, actions: [{ action: action }] });\n        }\n        else {\n            console.warn('no self calibrate action');\n        }\n    }\n    /**\n     *  观众切换到互动者, 可以进行绘图操作\n     *  @method changeRoleToPlayer\n     *  @memberOf WhiteBoard#\n     *  @return {Promise}\n     */\n    changeRoleToPlayer() {\n        if (this.role === 0)\n            return Promise.resolve({ role: 'player' });\n        this.enableDraw(true);\n        this.role = 0;\n        return Promise.resolve({ role: 'player' });\n    }\n    /**\n     *  互动者切换到观众, 禁止绘图操作\n     *  @method changeRoleToAudience\n     *  @memberOf WhiteBoard#\n     *  @return {Promise}\n     */\n    changeRoleToAudience() {\n        if (this.role === 1)\n            return Promise.resolve({ role: 'audience' });\n        this.enableDraw(false);\n        // 这么写的目的: 切换观众前，如果是标记，先发一个标记结束的通知\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                this.role = 1;\n                resolve({ role: 'audience' });\n            }, 1000);\n        });\n    }\n    // 主要是给断线重连之后的房主重连房间后，重制状态\n    resetState() {\n        this.syncManager.clear();\n        const { users, container, shapes } = this.drawAdapter.worker;\n        users.all.forEach(user => {\n            user.clearShapes();\n        });\n        shapes.clear();\n        this.drawAdapter.worker.updateCursor();\n        users.removeOtherUsers();\n    }\n}\nWorkerManager.util = utils;\n","export { default as pako } from 'pako';\n/**\n * 格式化颜色值, 默认为十六进制(16), 默认自动补齐\n * @param {string} color 十六进制请不要带#号\n * @param {number} format 需要转换的进制, 默认为十六进制\n */\nexport function formatColor(color, format = 16) {\n    if (!color)\n        return formatColor.INVALID;\n    let res;\n    if (format === 16) {\n        let colorNumber = +color;\n        if (colorNumber < 0) {\n            res = hex2rgb(colorNumber);\n            console.log('hex2rgb', colorNumber, res);\n            return res;\n        }\n        res = colorNumber.toString(16);\n        if (res.length < 3) {\n            res = ('000' + res).slice(-3);\n        }\n        if (res.length > 3 && res.length < 6) {\n            res = ('000' + res).slice(-6);\n        }\n        res = '#' + res;\n        // console.log('formatColor 16', color, res)\n        return res;\n    }\n    else if (format === 10) {\n        res = color.replace(/#/gi, '');\n        res = parseInt('0x' + res);\n        // console.log('formatColor 10', color, res)\n        return isNaN(res) ? formatColor.INVALID : '' + res;\n    }\n    else {\n        return formatColor.INVALID;\n    }\n}\nformatColor.INVALID = '++bad-color++';\n// rgba转rgb\nexport function hex2rgb(val) {\n    // return '#' + (0x00FFFFFF & val)\n    const alpha = (val >> 24) & 0xff;\n    let red = (val >> 16) & 0xff;\n    let green = (val >> 8) & 0xff;\n    let blue = val & 0xff;\n    let red$ = red.toString(16);\n    let green$ = green.toString(16);\n    let blue$ = blue.toString(16);\n    console.log('rgb', red$, green$, blue$);\n    return ('#' +\n        ('0' + red$).slice(-2) +\n        ('0' + green$).slice(-2) +\n        ('0' + blue$).slice(-2));\n}\n/**\n *  颜色模块，默认都是字符串类型的 16进制全称，不含透明度的字符串\n */\n// 得到KB 单位\nexport function getKiloBytes(length) {\n    if (typeof length === 'number') {\n        return length * 2 / 1024;\n    }\n    if (typeof length === 'string') {\n        return length.length * 2 / 1024;\n    }\n    return 0;\n}\nexport const sleep = (time = 100) => new Promise(res => {\n    setTimeout(res, time);\n});\nexport function sign(x) { return x ? x < 0 ? -1 : 1 : 0; }\n","export function isStandardCursor(cursor) {\n}\nexport function isStandardMode(mode) {\n    if (typeof mode !== 'string') {\n        return [false, '模式必须是字符串'];\n    }\n    mode = mode.trim();\n    if (mode === '') {\n        return [false, '模式不能为空！'];\n    }\n    if (mode === 'player') {\n        return [true];\n    }\n    if (!~mode.indexOf(':')) {\n        return [false, '模式格式不正确！没有找到分割符-> ：'];\n    }\n    let modeArr = mode.split(':');\n    // TODO: 验证mode Arr\n    return [true];\n}\nexport function isValidTool(tool) {\n    if (typeof tool !== 'string') {\n        return false;\n    }\n    switch (tool) {\n        case 'fill':\n        case 'flag':\n        case 'free':\n        case 'line':\n        case 'rect':\n        case 'circle':\n        case 'roundRect':\n        case 'solidRect':\n        case 'solidRoundRect':\n        case 'solidCircle':\n        case 'text':\n        // case 'select':\n        case 'ellipse':\n        case 'solidEllipse':\n        case 'erase':\n            {\n                return true;\n            }\n        default: {\n            const fullCaseChecker = tool;\n            return false;\n        }\n    }\n}\n","/**\n * debug 模块需要在浏览器的localstorage中，执行\n *  localstorage.Debug = \"*\"  -- 表明显示所有的debug. 可以在文件最下方，选择关闭哪些调试\n *\n *\n * 从这里创建一些共用的调试模块，\n * 大致分为有下面几类\n * - 鼠标相关事件\n * - 与服务器通信的事件比如收发包\n *  2.1 一个包从完整的接收到途径的过程\n *  2.2 对各种包的处理\n * - 模块\n * - 画板状态变更事件\n * - 画板的函数调用事件\n * - 具体的某个函数调用事件\n *\n * 模块内的调试在模块内创建\n */\nimport createDebug from 'debug';\nconst noop = () => { };\nconst logger = {\n    mouse: createDebug('mouse'),\n    h5: createDebug('h5'),\n    package: createDebug('package'),\n    shape: createDebug('shape'),\n    user: createDebug('user'),\n    command: createDebug('command'),\n    image: function (url, note = '') {\n        var image = new Image();\n        image.onload = function () {\n            var style = [\n                'font-size: 14px;',\n                'padding: ' + image.height / 2 + 'px ' + image.width / 2 + 'px;',\n                'background: url(' + url + ') no-repeat;',\n                'background-size: contain;'\n            ].join(' ');\n            console.log(note + '%c ', style);\n        };\n        image.src = url;\n    },\n    m: {\n        adapter: createDebug('adapter'),\n        worker: createDebug('worker'),\n        containermanager: createDebug('containermanager'),\n        shapemanager: createDebug('shapemanager'),\n        usermanager: createDebug('usermanager'),\n        syncmanager: createDebug('syncmanager'),\n    },\n    log: console.log.bind(console),\n    warn: console.warn.bind(console),\n    error: console.error.bind(console),\n};\n// 在这里替换掉原来的调试函数，控制哪些调试信息不输出\nif (!localStorage.getItem('debugMouse')) {\n    logger.mouse = noop;\n}\nexport default logger;\n","import Point from \"./core/Model/Point\";\nexport default class Simulator {\n    constructor(app) {\n        this.app = app;\n    }\n    freeDraw(times = 10, scale = 0.0003) {\n        this.app.useTool('free', this.app.account);\n        for (let i = 0; i < times; i++) {\n            const sx = Math.random();\n            const sy = Math.random();\n            const dx = Math.random() * scale;\n            const dy = Math.random() * scale;\n            this.app.drawAdapter.worker.mousedown(new Point(sx, sy), this.app.account);\n            this.app.drawAdapter.worker.mousemove(new Point(sx + dx, sy + dy), this.app.account);\n            this.app.drawAdapter.worker.mouseup(new Point(sx + dx, sy + dy), this.app.account);\n        }\n    }\n    rectDraw(times = 10, scale = 0.0003) {\n        this.app.useTool('rect', this.app.account);\n        for (let i = 0; i < times; i++) {\n            const sx = Math.random();\n            const sy = Math.random();\n            const dx = Math.random() * scale;\n            const dy = Math.random() * scale;\n            this.app.drawAdapter.worker.mousedown(new Point(sx, sy), this.app.account);\n            this.app.drawAdapter.worker.mousemove(new Point(sx + dx, sy + dy), this.app.account);\n            this.app.drawAdapter.worker.mouseup(new Point(sx + dx, sy + dy), this.app.account);\n        }\n    }\n}\n/**\n simulate mouse event in other products\nfunction mouseEventSimulate(canvas, x, y) {\n        let event = document.createEvent('MouseEvent')\n        event.initMouseEvent('mousedown', true, true, window, 0, event.screenX, event.screenY, x, y, false, false, false, false, 0, null)\n        canvas.dispatchEvent(event)\n\n        const dx = Math.random() * 30\n        const dy = Math.random() * 30\n\n        event = document.createEvent('MouseEvent')\n        event.initMouseEvent('mousemove', true, true, window, 0, event.screenX, event.screenY, x+dx, y+dy, false, false, false, false, 0, null)\n        canvas.dispatchEvent(event)\n\n        event = document.createEvent('MouseEvent')\n        event.initMouseEvent('mouseup', true, true, window, 0, event.screenX, event.screenY, x+dx, y+dy, false, false, false, false, 0, null)\n        canvas.dispatchEvent(event)\n    }\n\n    function multipleMouseSimulate(canvas, count, range=1000) {\n        for (let i = 0; i < count; i++) {\n            const sx = 100 + Math.random() * range\n            const sy = 100 + Math.random() * range\n            this.mouseEventSimulate(canvas, sx, sy)\n        }\n    }\n\n    //netless\n    whiteboard_div = document.getElementsByClassName('tx_board_canvas_wrap')\n    multipleMouseSimulate(whiteboard_div[0], 10, 100)\n\n    //tencent board\n    whiteboard_div = document.getElementsByClassName('tx_board_canvas_box')\n    multipleMouseSimulate(whiteboard_div[0], 10, 100)\n */ \n"],"sourceRoot":""}