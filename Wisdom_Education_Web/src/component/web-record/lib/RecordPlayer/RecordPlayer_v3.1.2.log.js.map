{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./node_modules/babel-runtime/helpers/classCallCheck.js","webpack://[name]/./node_modules/babel-runtime/helpers/createClass.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack://[name]/./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack://[name]/./node_modules/babel-runtime/helpers/inherits.js","webpack://[name]/./node_modules/core-js/library/modules/_core.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/assign.js","webpack://[name]/./node_modules/preact/dist/preact.min.js","webpack://[name]/./new_src/core/ops/Operation.ts","webpack://[name]/./node_modules/core-js/library/modules/_export.js","webpack://[name]/./node_modules/babel-runtime/core-js/get-iterator.js","webpack://[name]/./node_modules/core-js/library/modules/_wks.js","webpack://[name]/./node_modules/core-js/library/modules/_global.js","webpack://[name]/./node_modules/core-js/library/modules/_is-object.js","webpack://[name]/./node_modules/core-js/library/modules/_descriptors.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/keys.js","webpack://[name]/./node_modules/core-js/library/modules/_object-dp.js","webpack://[name]/./new_src/core/misc/shapeHelper.ts","webpack://[name]/./node_modules/core-js/library/modules/_an-object.js","webpack://[name]/./node_modules/css-loader/dist/runtime/api.js","webpack://[name]/./node_modules/style-loader/lib/addStyles.js","webpack://[name]/./node_modules/core-js/library/modules/_ctx.js","webpack://[name]/./node_modules/core-js/library/modules/_hide.js","webpack://[name]/./node_modules/babel-runtime/core-js/json/stringify.js","webpack://[name]/./node_modules/core-js/library/modules/_fails.js","webpack://[name]/./node_modules/core-js/library/modules/_has.js","webpack://[name]/./node_modules/core-js/library/modules/_to-object.js","webpack://[name]/./node_modules/babel-runtime/helpers/typeof.js","webpack://[name]/./node_modules/babel-runtime/core-js/promise.js","webpack://[name]/./node_modules/core-js/library/modules/_to-iobject.js","webpack://[name]/./node_modules/babel-runtime/helpers/slicedToArray.js","webpack://[name]/./node_modules/tapable/lib/Hook.js","webpack://[name]/./node_modules/core-js/library/modules/es6.string.iterator.js","webpack://[name]/./node_modules/core-js/library/modules/_iterators.js","webpack://[name]/./node_modules/tapable/lib/HookCodeFactory.js","webpack://[name]/./node_modules/eventemitter3/umd/eventemitter3.min.js","webpack://[name]/./new_src/component/toast/index.ts","webpack://[name]/./node_modules/core-js/library/modules/_object-keys.js","webpack://[name]/./node_modules/core-js/library/modules/web.dom.iterable.js","webpack://[name]/./new_src/core/ops/DrawOp/drawConfig.ts","webpack://[name]/./node_modules/core-js/library/modules/_property-desc.js","webpack://[name]/./node_modules/core-js/library/modules/_library.js","webpack://[name]/./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack://[name]/./node_modules/core-js/library/modules/_for-of.js","webpack://[name]/./node_modules/core-js/library/modules/_cof.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/define-properties.js","webpack://[name]/./new_src/core/ops/CameraOp/CameraBoundOp.ts","webpack://[name]/./node_modules/core-js/library/modules/_a-function.js","webpack://[name]/./node_modules/core-js/library/modules/_uid.js","webpack://[name]/./node_modules/core-js/library/modules/_object-pie.js","webpack://[name]/./node_modules/core-js/library/modules/_object-create.js","webpack://[name]/./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack://[name]/./node_modules/core-js/library/modules/_to-length.js","webpack://[name]/./new_src/core/ops/types.ts","webpack://[name]/./node_modules/babel-runtime/regenerator/index.js","webpack://[name]/./node_modules/core-js/library/modules/_wks-ext.js","webpack://[name]/./node_modules/core-js/library/modules/_meta.js","webpack://[name]/./node_modules/core-js/library/modules/_classof.js","webpack://[name]/./node_modules/core-js/library/modules/_object-sap.js","webpack://[name]/./node_modules/babel-runtime/core-js/set.js","webpack://[name]/./node_modules/core-js/library/modules/_to-primitive.js","webpack://[name]/./node_modules/core-js/library/modules/_iobject.js","webpack://[name]/./node_modules/core-js/library/modules/_defined.js","webpack://[name]/./node_modules/core-js/library/modules/_to-integer.js","webpack://[name]/./node_modules/core-js/library/modules/_shared-key.js","webpack://[name]/./node_modules/core-js/library/modules/_shared.js","webpack://[name]/./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gops.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-define.js","webpack://[name]/./node_modules/core-js/library/modules/_wks-define.js","webpack://[name]/./new_src/core/ops/util.ts","webpack://[name]/./new_src/core/ops/CameraOp/util.ts","webpack://[name]/./node_modules/core-js/library/modules/_dom-create.js","webpack://[name]/./node_modules/babel-runtime/core-js/symbol.js","webpack://[name]/./node_modules/core-js/library/modules/_an-instance.js","webpack://[name]/./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack://[name]/./node_modules/core-js/library/modules/_redefine-all.js","webpack://[name]/./node_modules/core-js/library/modules/_validate-collection.js","webpack://[name]/./src/debug.ts","webpack://[name]/./node_modules/core-js/library/modules/_object-gopd.js","webpack://[name]/./new_src/core/container/index.ts","webpack://[name]/./node_modules/babel-runtime/core-js/object/create.js","webpack://[name]/./new_src/core/ops/DrawOp/MouseMoveDrawOp.ts","webpack://[name]/./new_src/core/ops/SelectOp/index.ts","webpack://[name]/./new_src/core/config.ts","webpack://[name]/./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack://[name]/./node_modules/core-js/library/modules/_object-keys-internal.js","webpack://[name]/./node_modules/core-js/library/modules/_redefine.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gpo.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-step.js","webpack://[name]/./node_modules/core-js/library/modules/_is-array.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gopn.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/define-property.js","webpack://[name]/./node_modules/core-js/library/modules/_object-dps.js","webpack://[name]/./node_modules/core-js/library/modules/_html.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-call.js","webpack://[name]/./node_modules/core-js/library/modules/_is-array-iter.js","webpack://[name]/./node_modules/core-js/library/modules/_new-promise-capability.js","webpack://[name]/./node_modules/core-js/library/modules/_set-species.js","webpack://[name]/./node_modules/babel-runtime/core-js/array/from.js","webpack://[name]/./node_modules/core-js/library/modules/_collection-strong.js","webpack://[name]/./node_modules/core-js/library/modules/_collection.js","webpack://[name]/./node_modules/core-js/library/modules/_collection-to-json.js","webpack://[name]/./node_modules/core-js/library/modules/_set-collection-of.js","webpack://[name]/./node_modules/core-js/library/modules/_set-collection-from.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack://[name]/./new_src/core/types.ts","webpack://[name]/./new_src/core/ops/TextOp/textConfig.ts","webpack://[name]/./new_src/core/ops/ImageOp/util.ts","webpack://[name]/./new_src/core/resource/resourceCache.ts","webpack://[name]/./new_src/core/page/util.ts","webpack://[name]/./new_src/core/animation/index.ts","webpack://[name]/./src/core/Itypes.ts","webpack://[name]/./src/core/Actions/index.ts","webpack://[name]/./node_modules/core-js/library/modules/es6.symbol.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack://[name]/./new_src/core/misc/dom-events.ts","webpack://[name]/./node_modules/process/browser.js","webpack://[name]/./node_modules/babel-runtime/core-js/map.js","webpack://[name]/(webpack)/buildin/module.js","webpack://[name]/./node_modules/babel-runtime/core-js/number/is-integer.js","webpack://[name]/./new_src/core/misc/dispatcher.ts","webpack://[name]/./src/core/utils.ts","webpack://[name]/./node_modules/core-js/library/fn/object/assign.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.assign.js","webpack://[name]/./node_modules/core-js/library/modules/_object-assign.js","webpack://[name]/./node_modules/core-js/library/modules/_array-includes.js","webpack://[name]/./node_modules/core-js/library/modules/_to-absolute-index.js","webpack://[name]/./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack://[name]/./node_modules/core-js/library/fn/symbol/iterator.js","webpack://[name]/./node_modules/core-js/library/modules/_string-at.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-create.js","webpack://[name]/./node_modules/core-js/library/modules/es6.array.iterator.js","webpack://[name]/./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack://[name]/./node_modules/core-js/library/fn/symbol/index.js","webpack://[name]/./node_modules/core-js/library/modules/_enum-keys.js","webpack://[name]/./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack://[name]/./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack://[name]/./node_modules/core-js/library/modules/_species-constructor.js","webpack://[name]/./node_modules/core-js/library/modules/_task.js","webpack://[name]/./node_modules/core-js/library/modules/_perform.js","webpack://[name]/./node_modules/core-js/library/modules/_promise-resolve.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-detect.js","webpack://[name]/./node_modules/core-js/library/fn/object/define-property.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.define-property.js","webpack://[name]/./node_modules/core-js/library/fn/json/stringify.js","webpack://[name]/./node_modules/core-js/library/fn/object/keys.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.keys.js","webpack://[name]/./node_modules/core-js/library/fn/get-iterator.js","webpack://[name]/./node_modules/core-js/library/modules/core.get-iterator.js","webpack://[name]/./new_src/core/misc/util.ts","webpack://[name]/./node_modules/core-js/library/fn/set.js","webpack://[name]/./node_modules/core-js/library/modules/es6.set.js","webpack://[name]/./node_modules/core-js/library/modules/_array-methods.js","webpack://[name]/./node_modules/core-js/library/modules/_array-species-create.js","webpack://[name]/./node_modules/core-js/library/modules/_array-species-constructor.js","webpack://[name]/./node_modules/core-js/library/modules/es7.set.to-json.js","webpack://[name]/./node_modules/core-js/library/modules/_array-from-iterable.js","webpack://[name]/./node_modules/core-js/library/modules/es7.set.of.js","webpack://[name]/./node_modules/core-js/library/modules/es7.set.from.js","webpack://[name]/./node_modules/tapable/lib/SyncBailHook.js","webpack://[name]/./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack://[name]/./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack://[name]/./node_modules/core-js/library/modules/_set-proto.js","webpack://[name]/./node_modules/core-js/library/fn/object/create.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.create.js","webpack://[name]/./new_src/core/ops/DrawOp/PenOp.ts","webpack://[name]/./new_src/assets/cursors/pen.svg","webpack://[name]/./new_src/core/ops/DrawOp/LineOp.ts","webpack://[name]/./new_src/core/ops/SelectOp/SelectBase.ts","webpack://[name]/./new_src/core/ops/DrawOp/RectOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/EllipseOp.ts","webpack://[name]/./new_src/core/misc/text.ts","webpack://[name]/./node_modules/style-loader/lib/urls.js","webpack://[name]/./new_src/assets/cursors/element-eraser.svg","webpack://[name]/./new_src/component/toast/toast-ctrl.ts","webpack://[name]/./new_src/component/toast/toast.ts","webpack://[name]/./node_modules/core-js/library/fn/number/is-integer.js","webpack://[name]/./node_modules/core-js/library/modules/es6.number.is-integer.js","webpack://[name]/./node_modules/core-js/library/modules/_is-integer.js","webpack://[name]/./new_src/component/toast/toast.less?4a22","webpack://[name]/./new_src/component/toast/toast.less","webpack://[name]/./new_src/core/board/index.ts","webpack://[name]/./new_src/core/page/index.ts","webpack://[name]/./new_src/core/board/actions.ts","webpack://[name]/./new_src/core/room/util.ts","webpack://[name]/./new_src/util/validate.ts","webpack://[name]/./src/core/Model/GlobalHub.ts","webpack://[name]/./src/core/DrawWorker/CanvasHelper.ts","webpack://[name]/./node_modules/uuid/dist/esm-browser/rng.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/regex.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/validate.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v1.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/parse.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v35.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/md5.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v3.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v4.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/sha1.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v5.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/nil.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/version.js","webpack://[name]/./node_modules/util/util.js","webpack://[name]/./node_modules/debug/src/index.js","webpack://[name]/./src/core/ActionUtils.ts","webpack://[name]/./src/core/Model/Point.ts","webpack://[name]/./node_modules/core-js/library/fn/promise.js","webpack://[name]/./node_modules/core-js/library/modules/es6.promise.js","webpack://[name]/./node_modules/core-js/library/modules/_invoke.js","webpack://[name]/./node_modules/core-js/library/modules/_microtask.js","webpack://[name]/./node_modules/core-js/library/modules/_user-agent.js","webpack://[name]/./node_modules/core-js/library/modules/es7.promise.finally.js","webpack://[name]/./node_modules/core-js/library/modules/es7.promise.try.js","webpack://[name]/./new_src/core/index.ts","webpack://[name]/./node_modules/babel-runtime/core-js/is-iterable.js","webpack://[name]/./node_modules/core-js/library/fn/is-iterable.js","webpack://[name]/./node_modules/core-js/library/modules/core.is-iterable.js","webpack://[name]/./node_modules/core-js/library/fn/array/from.js","webpack://[name]/./node_modules/core-js/library/modules/es6.array.from.js","webpack://[name]/./node_modules/core-js/library/modules/_create-property.js","webpack://[name]/./new_src/core/ops/OpsManager.ts","webpack://[name]/./node_modules/tapable/lib/index.js","webpack://[name]/./node_modules/tapable/lib/Tapable.js","webpack://[name]/./node_modules/util/support/isBufferBrowser.js","webpack://[name]/./node_modules/inherits/inherits_browser.js","webpack://[name]/./node_modules/core-js/library/fn/object/define-properties.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.define-properties.js","webpack://[name]/./node_modules/tapable/lib/SyncHook.js","webpack://[name]/./node_modules/tapable/lib/SyncWaterfallHook.js","webpack://[name]/./node_modules/tapable/lib/SyncLoopHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncParallelHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncParallelBailHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncSeriesHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncSeriesBailHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncSeriesWaterfallHook.js","webpack://[name]/./node_modules/tapable/lib/HookMap.js","webpack://[name]/./node_modules/core-js/library/fn/map.js","webpack://[name]/./node_modules/core-js/library/modules/es6.map.js","webpack://[name]/./node_modules/core-js/library/modules/es7.map.to-json.js","webpack://[name]/./node_modules/core-js/library/modules/es7.map.of.js","webpack://[name]/./node_modules/core-js/library/modules/es7.map.from.js","webpack://[name]/./node_modules/tapable/lib/MultiHook.js","webpack://[name]/./new_src/core/misc/drawCurve.ts","webpack://[name]/./new_src/core/ops/EditOp/MoveOp.ts","webpack://[name]/./new_src/core/ops/EditOp/ScaleOp.ts","webpack://[name]/./new_src/core/ops/EditOp/DeleteOp.ts","webpack://[name]/./new_src/core/ops/HistoryOp/UndoOp.ts","webpack://[name]/./new_src/core/ops/HistoryOp/RedoOp.ts","webpack://[name]/./new_src/core/ops/ClearOp/index.ts","webpack://[name]/./new_src/core/ops/EraserOp/index.ts","webpack://[name]/./new_src/core/ops/TextOp/index.ts","webpack://[name]/./new_src/core/ops/TextOp/UIHelper.ts","webpack://[name]/./new_src/core/ops/TextOp/TextToolbar.ts","webpack://[name]/./new_src/core/ops/TextOp/TextToolbar.less?9e81","webpack://[name]/./new_src/core/ops/TextOp/TextToolbar.less","webpack://[name]/./new_src/core/ops/PageOp/index.ts","webpack://[name]/./new_src/core/ops/ImageOp/index.ts","webpack://[name]/./new_src/assets/image/imageIsLoading.svg","webpack://[name]/./new_src/core/ops/BoardOp/index.ts","webpack://[name]/./new_src/core/ops/EditOp/DupliateOp.ts","webpack://[name]/./node_modules/lodash.clonedeep/index.js","webpack://[name]/(webpack)/buildin/global.js","webpack://[name]/./new_src/core/ops/DrawOp/PenArrowOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/LineArrowOp.ts","webpack://[name]/./new_src/core/ops/EraserOp/ElementEraserOp.ts","webpack://[name]/./new_src/core/ops/LaserOp/index.ts","webpack://[name]/./new_src/core/ops/LockOp/index.ts","webpack://[name]/./new_src/core/ops/ImageOp/BackgroundOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/PanOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/ZoomOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/ResetCameraOp.ts","webpack://[name]/./new_src/core/ops/MousePointerOp/index.ts","webpack://[name]/./new_src/assets/cursors/cursor.svg","webpack://[name]/./new_src/core/ops/CameraOp/ResizeOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/FitToContent.ts","webpack://[name]/./new_src/core/ops/CameraOp/FitToDoc.ts","webpack://[name]/./new_src/core/ops/DrawOp/RectFillOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/EllipseFillOp.ts","webpack://[name]/./new_src/core/ops/VideoOp/index.ts","webpack://[name]/./new_src/core/room/index.ts","webpack://[name]/./new_src/core/page/render.ts","webpack://[name]/./new_src/core/page/completeFlow.ts","webpack://[name]/./new_src/core/page/incrementFlow.ts","webpack://[name]/./new_src/core/room/actions.ts","webpack://[name]/./new_src/core/dataHub/index.ts","webpack://[name]/./new_src/core/previewFactory/index.ts","webpack://[name]/./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime-module.js","webpack://[name]/./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime.js","webpack://[name]/./new_src/core/camera/index.ts","webpack://[name]/./new_src/core/player/index.ts","webpack://[name]/./new_src/core/simulator/index.ts","webpack://[name]/./new_src/core/camera/vision.ts","webpack://[name]/./new_src/core/media/util.ts","webpack://[name]/./node_modules/is-base64/is-base64.js","webpack://[name]/./new_src/recordPlayer/utils.ts","webpack://[name]/./node_modules/pako/dist/pako.min.js","webpack://[name]/./new_src/recordPlayer/Track/Track.ts","webpack://[name]/./node_modules/debug/src/common.js","webpack://[name]/./src/core/DrawWorker/UserManager.ts","webpack://[name]/./src/core/validator.ts","webpack://[name]/./new_src/recordPlayer/Track/WhiteboardTrack.ts","webpack://[name]/./new_src/recordPlayer/index.ts","webpack://[name]/./new_src/recordPlayer/Timeline.ts","webpack://[name]/./new_src/recordPlayer/TickTick.ts","webpack://[name]/./new_src/recordPlayer/ToolUI.tsx","webpack://[name]/./new_src/recordPlayer/assets/pause.svg","webpack://[name]/./new_src/recordPlayer/assets/play.svg","webpack://[name]/./new_src/recordPlayer/ToolUI.less?7363","webpack://[name]/./new_src/recordPlayer/ToolUI.less","webpack://[name]/./new_src/recordPlayer/Track/VideoTrack.ts","webpack://[name]/./new_src/recordPlayer/Track/Wb_V1V2.ts","webpack://[name]/./new_src/recordPlayer/Track/Record.ts","webpack://[name]/./src/core/ActionUtils.old.ts","webpack://[name]/./node_modules/debug/src/browser.js","webpack://[name]/./node_modules/ms/index.js","webpack://[name]/./node_modules/debug/src/node.js","webpack://[name]/./node_modules/tty-browserify/index.js","webpack://[name]/./node_modules/supports-color/browser.js","webpack://[name]/./src/core/index.ts","webpack://[name]/./src/simulator.ts","webpack://[name]/./src/core/ActionManager.ts","webpack://[name]/./src/core/adapterDraw.ts","webpack://[name]/./src/core/DrawWorker/index.ts","webpack://[name]/./src/core/Model/Shape.ts","webpack://[name]/./src/core/Model/User.ts","webpack://[name]/./src/core/DrawWorker/ShapesManger.ts","webpack://[name]/./src/core/DrawWorker/ContainerManager.ts","webpack://[name]/./new_src/recordPlayer/Track/Wb_V3.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","default","instance","Constructor","TypeError","obj","_defineProperty","_defineProperty2","defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","_typeof2","_typeof3","self","ReferenceError","_setPrototypeOf2","_interopRequireDefault","_create2","subClass","superClass","constructor","__proto__","core","version","__e","e","W","arguments","P","push","children","pop","a","T","nodeName","attributes","M","vnode","current","__d","V","debounceRendering","D","x","splitText","_componentConstructor","__n","toLowerCase","u","defaultProps","parentNode","removeChild","style","cssText","E","test","innerHTML","__html","replace","substring","addEventListener","_","removeEventListener","__l","removeAttribute","removeAttributeNS","setAttributeNS","setAttribute","className","this","type","event","f","A","shift","afterMount","componentDidMount","H","R","ownerSVGElement","B","h","appendChild","_component","nodeValue","document","createTextNode","replaceChild","v","__preactattr_","N","createElementNS","createElement","firstChild","nextSibling","dangerouslySetInnerHTML","y","childNodes","b","g","w","C","k","__k","trim","insertBefore","ref","lastChild","previousSibling","F","render","U","__b","splice","__x","__r","getDerivedStateFromProps","base","componentWillMount","componentWillReceiveProps","context","__c","__p","syncComponentUpdates","state","__s","S","shouldComponentUpdate","componentWillUpdate","getChildContext","getSnapshotBeforeUpdate","L","__u","componentDidUpdate","afterUpdate","__h","beforeUnmount","componentWillUnmount","Promise","resolve","then","setTimeout","setState","forceUpdate","j","cloneElement","slice","createRef","Component","rerender","options","lastGlobalOpId","lastSnapshotInfo","boardName","pageIndex","dependOn","undefined","timestamp","newOpFlag","genNewOpId","gen","inProgress","Array","isArray","join","includes","Operation","app","opsManager","registerHooks","exec","information","args","message","activate","console","warn","currPage","getNextOpId","getOpId","data","globalSnapshotTypes","indexOf","dispatchGlobalAction","dispatchPageAction","dispatchBoardAction","currBoard","room","boards","currIndex","now","Date","valueOf","opId","reuseOpType","account","newId","prepareNewOpId","snapshot","category","board","page","time","uid","dispatch","Number","dispatcher","emit","ctx","opts","draw","div","partial","container","isKeyDown","drawOpsOfPage","isMouseDown","opQueue","global","hide","has","$export","source","own","out","IS_FORCED","IS_GLOBAL","G","IS_STATIC","IS_PROTO","IS_BIND","IS_WRAP","expProto","apply","Function","virtual","store","USE_SYMBOL","Math","__g","it","anObject","IE8_DOM_DEFINE","toPrimitive","dP","O","Attributes","distSqrt","dist","rectCollide","rect1","rect2","sx","sy","pointCollideWithPoint","point","another","pointCollideWithLine","sp","ep","pointInRect","rect","getTransformedBoundary","dx","dy","scaleX","factor","coordinate","scaleY","getTransformedPoint","combineBoundary","b1","b2","min","ex","max","ey","getBoundaryBoxFromTwoPoints","p1","p2","sqrt","getArrowPoints","size","lastTwoPoints","tipXOffset","wingsXOffset","lineCoef","getLineCoef","arrowTipX","getXFromCoefAndOffset","arrowTipY","getLineFromPointsY","arrowWing1X","arrowWing1Y","getVerticalLineY","arrowWing2X","points","refPoint","z","pow","referencePoint","coef","isObject","useSourceMap","list","toString","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","sourceRoot","concat","cssWithMappingToString","mediaQuery","alreadyImportedModules","id","fn","memo","stylesInDom","isOldIE","all","atob","getTarget","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","parts","addStyle","listToStyles","newStyles","part","css","media","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","before","removeStyleElement","idx","createStyleElement","attrs","nonce","getNonce","addAttrs","el","keys","forEach","update","remove","result","transform","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssNode","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","aFunction","that","createDesc","defined","_iterator2","_symbol2","_typeof","IObject","_isIterable3","_getIterator3","arr","_arr","_n","_d","_e","_s","_i","next","done","err","sliceIterator","Hook","_args","taps","interceptors","_call","promise","_promise","callAsync","_callAsync","_x","compile","_runRegisterInterceptors","_insert","interceptor","register","newOptions","mergeOptions","opt","_withOptions","_withOptionsBase","newHook","tapAsync","tap","tapPromise","_resetCompilation","stage","xStage","delete","createCompileDelegate","_createCall","$at","String","iterated","_t","HookCodeFactory","config","init","header","onError","onResult","resultReturns","onDone","rethrowIfPossible","after","errorHelperUsed","code","deinit","needContext","getInterceptor","tapIndex","hasTapCached","getTap","getTapFn","cbCode","doneReturns","firstAsync","findIndex","somethingReturns","doneBreak","skipDone","callTap","error","syncOnly","every","loop","callTapsSeries","onTap","run","allArgs","EventEmitter3","require","1","once","_events","_eventsCount","eventNames","getOwnPropertySymbols","listeners","listenerCount","removeListener","on","removeAllListeners","off","addListener","prefixed","EventEmitter","showToast","option","msg","top","param","ToastCtrl","show","hideToast","$keys","enumBugKeys","Iterators","TO_STRING_TAG","DOMIterables","split","NAME","Collection","proto","drawConfig","strokeColor","pointsPerBatch","strokeWidth","opacity","color","width","bitmap","def","TAG","tag","stat","isArrayIter","toLength","getIterFn","BREAK","RETURN","iterable","entries","ITERATOR","step","iterator","iterFn","convertToCameraBoundSnapshot","camera","snapshotData","boundary","getNextCameraBound","height","log","skipUndo","animate","CameraBoundOp","description","sendCameraBound","px","random","propertyIsEnumerable","dPs","IE_PROTO","Empty","createDict","iframeDocument","iframe","display","src","contentWindow","open","write","lt","close","Properties","_from","_from2","arr2","toInteger","snapshotOutOfNormalFlowTypes","cameraSnapshotTypes","META","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","meta","KEY","NEED","fastKey","getWeak","onFreeze","cof","ARG","tryGet","callee","fails","exp","val","ceil","floor","isNaN","shared","copyright","LIBRARY","redefine","$iterCreate","setToStringTag","getPrototypeOf","BUGGY","returnThis","Base","DEFAULT","IS_SET","FORCED","methods","IteratorPrototype","getMethod","kind","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","values","wksExt","$Symbol","charAt","findOpsUnderRect","drawOps","mouseBoundary","res","snapshotSelectable","findOpsUnderMouse","mx","my","opIds","op","opMap","ifMouseOnOp","nonSelectableOpTypes","locked","roundRect","idsChanged","currIds","lastIds","arrayDeduce","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","stroke","fill","drawUserName","scale","py","bgColor","fontSize","textPadding","rectMarginBottom","rectHeight","textFillColor","font","textWidth","measureText","fillStyle","textAlign","textBaseline","fillText","shouldDispatch","vision","is","forbiddenField","classof","getIteratorMethod","safe","TYPE","logger","mouse","h5","package","shape","user","command","image","url","note","Image","onload","adapter","worker","containermanager","shapemanager","usermanager","syncmanager","localStorage","getItem","pIE","toIObject","gOPD","getOwnPropertyDescriptor","DPI","devicePixelRatio","Container","elInitW","elInitH","isLandscape","elesToResize","left","keyPressed","maybeClick","mouseEventCache","lastMx","lastMy","lastClientX","lastClientY","_resize","_a","getBoundingClientRect","containerRect","ifDeviceSupportOrientation","ele","HTMLCanvasElement","setElePosition","backgroundEl","imageEl","domEl","textAreaEl","lineCap","lineJoin","frontCtx","laserCtx","resize","unbindEvents","_ro","disconnect","_mousedown","_mouseleave","_mousemove","_mouseup","_mousewheel","_keyup","_keydown","body","_contextmenu","getEventClientPos","clientX","clientY","MouseEvent","touches","convertToPointInWorld","preventDefault","mouseEmitTimer","_emitMouseEvents","clearTimeout","mousemove","_b","click","mouseup","mouseleave","mousewheel","toLocaleLowerCase","keyup","keydown","position","setBackgroundColor","setupDivElement","temp","setupCanvasElement","canvas","frontCanvas","laserCanvas","backgroundColor","appConfig","canvas_bg_color","_bindEvents","transformOrigin","pointerEvents","getContext","parentContainer","MutationObserver","mutationList","observer","observe","attributeFilter","right","bottom","eventArg","MouseMoveDrawOp","shouldSaniteEp","movedDuringMouseDown","sampleSeq","hooks","pageChange","handlePageChange","beginBatch","isTargetOnContainer","cursor","toFixed","getSnapshot","getBoundaryRectOfLine","lineWidth","strokeOrFill","getBoundaryRectOfFreeDraw","save","globalAlpha","strokeStyle","restore","sanityEp","SelectOp","fillColor","eleContainerColor","eleContainerWidth","eleContainerPadding","selectedOpIds","inProgressSelectedOpIds","setLineWidth","setFillColor","setStrokeColor","setEleContainerColor","setEleContainerWidth","setEleContainerPadding","opChange","handleOpChange","newType","currOp","idsBeenSelected","lastSelectedOpIds","blurAt","nickname","drawSelectBox","boundaryArr","drawSelectedElementBox","showSelectNickname","strokeRect","fillRect","padding","reduce","dotSize","ids","selectChange","SelectBase","DEFAULT_FONTSIZE","setAppConfig","partialConfig","previewFactory","getAppConfig","showCursorNickname","showLaserNickname","cameraTransformEnabled","arrayIndexOf","names","toObject","ObjectProto","arg","hiddenKeys","getOwnPropertyNames","getKeys","documentElement","ret","ArrayProto","PromiseCapability","reject","$$resolve","$$reject","DESCRIPTORS","SPECIES","redefineAll","anInstance","forOf","$iterDefine","setSpecies","validate","SIZE","getEntry","entry","_f","getConstructor","wrapper","IS_MAP","ADDER","_l","clear","prev","callbackfn","setStrong","_k","each","common","IS_WEAK","_c","IS_ADDER","from","COLLECTION","of","mapping","cb","mapFn","nextItem","PlatformArray","TouchPlatformArray","CustomFontName","ValidTypes","textConfig","fontFamily","fontFaceSet","fontFace","fontFaceStr","format","newStyle","getImagePartOutOfContainer","addImage","pageName","pageNames","pages","resourceLoaded","img","getResource","dispatchImage","addWaitingResource","fetchResource","removeWaitingResource","preview","supportToDataUrl","cloneNode","userSelect","imageRendering","pxOverBorder","clipPath","drawImage","screenBound","getContainerWorldRect","centerX","centerY","getImageProperPosition","sanityWidth","sanityHeight","getBackgroundImagePorperPosition","resourceCache","videoResourceCache","crossOriginResourceCache","resourceReadyListeners","retryCount","crossOrigin","setResourceLoadedCallback","fetchVideoResource","isVideo","resource","onloadedmetadata","onerror","delay","complete","videoResourceLoaded","video","videoWidth","videoHeight","getVideoResource","loadingUrl","transformOp","drawOp","trasformOp","opNeedRefresh","drawOpTypes","getSelectedOpIds","currSelect","lastSelectOfUser","drawOpQueue","transitionToCameraBound","callback","end","start","total","isRecordPlayer","curr","percent","setCameraBound","cancelAnimationFrame","timer","requestAnimationFrame","WActions","StateRelatedActions","CALIBRATE","FILE","WB_MODE","WB_TOOL","encodeNumber","decodeNumber","str","parseFloat","unstringify","originStr","parse","IAction","StartAction","START","pis","MoveAction","MOVE","EndAction","END","RevokeAction","REVOKE","SerialAction","SERIAL","ClearAction","accounts","CLEAR","ClearAckAction","CLEAR_ACK","SyncRequestAction","SYNC_REQUEST","SyncAction","sync","SYNC","SyncPrepareAction","SYNC_PREPARE","SyncPrepareAckAction","SYNC_PREPARE_ACK","LaserPenAction","LASER_PEN","LaserPenEndAction","LASER_PEN_END","FileAction","file","fileType","docId","currentPage","pageCount","urlStr","h5Cmd","parseInt","fileA","fileB","gatherFile","diff","PROPS","propName","valueOld","valueNext","RedoAction","REDO","CalibrateAction","USER_PROPS","TextAction","text","TEXT","VersionAction","ver","gzip","VERSION","$fails","wks","wksDefine","enumKeys","_create","gOPNExt","$GOPD","$GOPS","$DP","gOPN","$JSON","_stringify","HIDDEN","TO_PRIMITIVE","isEnum","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","protoDesc","wrap","sym","isSymbol","$defineProperty","$defineProperties","$propertyIsEnumerable","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","set","es6Symbols","wellKnownSymbols","keyFor","useSetter","useSimple","FAILS_ON_PRIMITIVES","replacer","$replacer","windowNames","getWindowNames","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","len","marker","runClearTimeout","Item","array","noop","nextTick","title","browser","env","argv","versions","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","webpackPolyfill","deprecate","paths","Dispatcher","eventDict","formatColor","INVALID","colorNumber","hex2rgb","green","blue","red$","green$","blue$","getKiloBytes","sign","sleep","assign","gOPS","$assign","K","aLen","getSymbols","toAbsoluteIndex","IS_INCLUDES","$this","fromIndex","TO_STRING","pos","charCodeAt","addToUnscopables","Arguments","symbols","defer","channel","port","invoke","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","Dispatch","counter","listener","port2","port1","onmessage","postMessage","importScripts","newPromiseCapability","promiseCapability","SAFE_CLOSING","riter","skipClosing","iter","$Object","desc","getIterator","numbers","n1","n2","Set","strong","add","asc","$create","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","speciesConstructor","original","toJSON","SyncBailHook","setup","$getPrototypeOf","setPrototypeOf","check","buggy","PenOp","currOpId","pkg","opIdSnapshotMap","getFreeDrawCommonProperty","boundaryRect","transformedPoints","drawCurve","_draw","isPointInStroke","_mergePartial","ptrDiff","startIndex","LineOp","getTwoPointShapeCommonProperty","getStartEndPointFromSnapshot","baseOp","getSelectionSnapshot","idsUnderMouse","postMouseMove","postMouseUp","postClick","isHover","RectOp","EllipseOp","cx","cy","radiusX","abs","radiusY","ellipse","PI","isPointInPath","testFontSizeText","num","MAX_FONT_SIZE","MIN_FONT_SIZE","printTextInMultiLine","lineHeight","textArr","currentLine","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","_instance","Toast","inOptions","createInstance","destroy","toastDiv","onclick","borderColor","isInteger","isFinite","locals","Board","displayName","newPageIndex","Page","action","insertAfter","addPage","gotoPage","deletePage","addOpHook","payload","hiddenOpQueue","lastInProgressSelectOfUser","lastInProgressSnapshotOfUser","lastMousePointerOfUser","blockedResourceList","_currOpId","_nextOpId","nextOpInc","resUrl","blocked","pageReady","isCurrPage","pageToRefresh","doRefresh","calcDrawOpQueue","isReceivingBatchSnapshots","cleanNonCanvasElements","addIncrementSnapshot","includeBackground","refresh","drawInProgressSnapshots","boardOps","inPageSnapshotIds","prePageChange","setPayload","indexInPageNames","nextPageIndex","getCameraBoundFromGlobalOp","cameraBoundByUser","broadcaster","isUndefined","isDOM","HTMLElement","nodeType","isValidString","isBoolean","isFunction","isNumber","isValidArray","isValidHexColor","isValidObject","ruleObj","validateErrors","rule","dataValue","isRequire","enum","globalHub","EM","setLineStyle","setpixelated","setCavansStyleSize","cvs","setCanvasPropSize","skip","applyCanvasLayout","paddingLeft","paddingTop","clearCtx","free","control","debug","line","circle","center","arc","xRadius","yRadius","round","getImageData","fullDisplayHeight","fullDisplayWidth","substr","shapeImageData","createImageData","shapeData","Uint32Array","buffer","startColor","rgb","r_start","g_start","b_start","alpha_start","R_MIN","safeColorClamp","G_MIN","B_MIN","R_MAX","G_MAX","B_MAX","curPixel","maxX","maxY","canFill","alpha","seen","topLeft","Coord","bottomRight","getImageDataIndex","getColor","reachLeft","reachRight","imgDataIndex","finalArea","areaSize","corner","putImageData","smallImageData","toDataURL","strokeText","clearRect","getRandomValues","rnds8","Uint8Array","rng","crypto","msCrypto","uuid","byteToHex","_nodeId","_clockseq","offset","_lastMSecs","_lastNSecs","buf","node","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","generateUUID","namespace","bytes","stringToBytes","hashfunc","DNS","getOutputLength","inputLength8","safeAdd","lsw","md5cmn","q","cnt","md5ff","md5gg","md5hh","md5ii","v35","input","output","length32","hex","md5ToHexEncodedArray","olda","oldb","oldc","oldd","wordsToMd5","length8","bytesToWords","rnds","ROTL","_i2","_t2","getOwnPropertyDescriptors","descriptors","formatRegExp","isString","objects","inspect","isNull","noDeprecation","warned","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","stylize","stylizeNoColor","depth","colors","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","recurseTimes","primitive","simple","formatPrimitive","visibleKeys","hash","arrayToHash","isError","formatError","isRegExp","RegExp","isDate","braces","toUTCString","formatProperty","match","formatArray","cur","numLinesEst","reduceToSingleString","ar","re","objectToString","pad","debuglog","NODE_DEBUG","toUpperCase","pid","isNullOrUndefined","isPrimitive","isBuffer","months","getHours","getMinutes","getSeconds","getDate","getMonth","prop","inherits","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","newReason","promisify","promiseResolve","promiseReject","custom","callbackify","callbackified","maybeCb","rej","__nwjs","packBulk","anyActions","anyAction","pack","unpackBulk","actions","unpack","isP2P","assert","actionIndex","valueStr","fromString","POINT_MATCHER","Point","Internal","newGenericPromiseCapability","OwnPromiseCapability","Wrapper","task","microtask","newPromiseCapabilityModule","perform","userAgent","v8","$Promise","isNode","empty","FakePromise","PromiseRejectionEvent","isThenable","notify","isReject","chain","_v","ok","reaction","exited","handler","fail","domain","_h","onHandleUnhandled","enter","exit","onUnhandled","unhandled","isUnhandled","onunhandledrejection","onrejectionhandled","$reject","_w","$resolve","executor","onFulfilled","onRejected","capability","remaining","$index","alreadyCalled","race","un","macrotask","Observer","WebKitMutationObserver","last","flush","navigator","standalone","toggle","characterData","onFinally","App","editEnabled","showCursor","isConnected","platform","defaultCameraBound","cameraBound","disableAutoResize","nim","simulator","Simulator","configInstance","AppConfig","OpsManager","extendDefaultOps","dataHub","DataHub","connector","Room","addOpsManager","addContainer","Camera","Vision","PreviewFactory","player","Player","setContainer","getCount","isAvailable","isFocus","getSelectedIds","zoomFactor","appendTo","sendSyncRequest","connected","reset","allowMime","uploadAndAddImage","dataURL","popupImageChooserAndAddImage","backgroundSnapshot","docName","params","count","startsWith","addBoard","setPageBackground","toolName","fontsize","setFontFamily","setFontFace","updateFontFamily","setStrokeWidth","setOpacity","enableDrawChange","editable","enable","valid","builtInIndex","getPageBuiltInIndex","getCurrPageIndex","currPageIndex","activeIndex","pagePayloads","payloadOfPages","boardNames","currBoardDisplayName","boardDisplayNames","getBoardDisplayNames","bindPreviewContainer","events","getOpDoc","records","addRecordData","seekTo","viewer","setViewer","setSelfAsBroadcaster","unsetSelfAsBroadcaster","setSelfAsFollower","setSelfAsFreeObserver","generatePreviewToDataUrl","download","userList","isSynchronizing","DrawPlugin","getInstance","isIterable","createProperty","arrayLike","mapfn","mousedown","SyncHook","boardChange","extendOp","MousePointerOp","extendDrawOp","PenArrowOp","LineArrowOp","RectFillOp","EllipseFillOp","TextOp","LaserOp","ScaleOp","MoveOp","DeleteOp","DuplicateOp","UndoOp","RedoOp","ClearOp","EraserOp","ElementEraserOp","PageOp","BoardOp","ImageOp","VideoOp","BackgroundOp","LockOp","PanOp","ZoomOp","ResetCameraOp","ResizeCameraOp","FitToContentOp","FitToDocOp","setCurrOp","OpConstructor","eventsToListen","afterActivate","execCommand","strArr","_getOpDoc","info","handleResize","currOpIsCamera","handleMouseDown","handleMouseUp","handleMouseLeave","handleMouseWheel","handleMouseMove","handleClick","handleKeyUp","handleKeyDown","mergePartial","partial1","partial2","resetCount","selectOp","Tapable","SyncWaterfallHook","SyncLoopHook","AsyncParallelHook","AsyncParallelBailHook","AsyncSeriesHook","AsyncSeriesBailHook","AsyncSeriesWaterfallHook","HookMap","MultiHook","util","_pluginCompat","ch","hook","tapOpt","async","addCompatLayer","plugin","copy","readUInt8","ctor","superCtor","super_","TempCtor","callTapsLooping","callTapsParallel","_map","_factory","_interceptors","for","Map","isUsed","intercept","withOptions","lastP","currP","ctrlPtInLastSeg","ctrlPtInSeg1","ctrlPtInSeg2","idsBeenMoved","mouseInSelectedEleBoundary","mouseInProgressSelectedBoundary","mouseInSelectedBoundary","moveOpSnapshot","newData","KeepRatioSnapshotTypes","coordinateX","coordinateY","boundaryW","boundaryH","idsBeenScaled","mouseInfo","mousePosTest","cursorSuggestion","scaleInfo","snaps","factorX","factorY","scroll","thisScaleX","scaleList","thisScaleY","baseScaleX","baseScaleY","totalScaleX","totalScaleY","initX","initY","baseFactor","ev","deleteOpIds","hidden","idsCouldUndo","onOpAdded","undoOpId","opOfPage","opsOfPage","opAlreadyBeenUndo","opShouldBeSkiped","idsCouldRedo","redoOpId","onRefresh","available","eraserColor","setWidth","setColor","globalCompositeOperation","drawEraserSignpost","textBeforeEdit","isNewText","handleTextAreaChange","endsWith","pre","innerText","setElementsSize","textAreaContainer","textArea","handleTextAreaBlur","textFocusAtPage","_handleTextAreaBlur","opIdToDraw","clearTextArea","registerToolbar","TextToolbar","createElements","toolbar","oninput","onblur","handlePrePageChange","handleClickExistText","handleSelectChange","handleEnableDrawChange","setFontSize","currSelectTextId","getOpTypeByOpId","_handleSelectTextOp","preSelectedOpIds","preSelectTextId","lastSnapshotData","lastSnapshot","detectIfClickOnText","tempPre","getElementById","getIdPrefix","setElementsStyle","focus","getBoundaryRect","workingPre","ptsInWord","snapshotIsEditing","preId","drawSnapshot","paddingScale","PADDING","getFontFamily","DEFAULT_LINEHEIGHT","drawTextSnapshot","setFontsize","updatePosition","onFontSizeChange","onColorChange","textOpSnapshot","txts","getElementsByTagName","pres","opIdForseen","outline","overflow","background","border","boxSizing","visibility","margin","MIN_WIDTH","clientWidth","clientHeight","ID","fonts","fontInputPrevValue","colorCells","colorPlatteOpen","toolbarContainer","colorBtn","colorDot","colorPlatteContainer","onmousemove","stopPropagation","colorCell","fontInput","fontIncBtn","incText","fontDecBtn","decText","_registerEvents","_stopPropagation","setColorPlatteState","func","fontSizeCb","colorCb","_sendFontChangeCommand","setFontSizeByInput","blurAfterSet","fontSizeStr","textType","blur","onkeydown","onmousedown","ontouchstart","onPageChange","goto","initWidth","initHeight","dispatchFromPage","onBoardChange","COPY_PASTE_SHIFT","copiedSnapshotArray","snapshotsToCopy","newOpIds","duplicates","dup","snapshotFromKeyboardCopy","argsTag","funcTag","genTag","mapTag","setTag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","freeExports","freeModule","moduleExports","addMapEntry","pair","addSetEntry","arrayReduce","iteratee","accumulator","initAccum","isHostObject","mapToArray","overArg","setToArray","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","funcToString","reIsNative","Buffer","getPrototype","objectCreate","nativeGetSymbols","nativeIsBuffer","nativeKeys","DataView","getNative","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","ListCache","MapCache","Stack","__data__","arrayLikeKeys","inherited","isObjectLike","isArrayLike","isArrayLikeObject","isArguments","baseTimes","skipIndexes","isIndex","assignValue","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","stack","isArr","initCloneArray","copyArray","getTag","isFunc","cloneBuffer","isPrototype","initCloneObject","copyObject","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","byteOffset","byteLength","cloneDataView","typedArray","cloneTypedArray","cloneMap","regexp","lastIndex","cloneRegExp","cloneSet","symbol","initCloneByTag","stacked","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","baseIsNative","arrayBuffer","newValue","getMapData","getValue","cache","pairs","LARGE_ARRAY_SIZE","other","ArrayBuffer","ctorString","isLength","baseKeys","withArrow","arrowPoints","lastPointX","lastPointY","shadowColor","shadowBlur","lockOps","unlockOps","getBoundaryFromSnapshot","imgWidth","imgHeight","enableCameraTransform","lastPoint","zoomIn","zoomOut","zoomTo","deltaY","destScaleNum","penImg","elementEraserImg","cursorImg","penUrl","elementEraserUrl","cursorUrl","inContainer","getImageByOpType","mapPointInsideContainer","cursorSize","worldSx","worldSy","worldEx","worldEy","opType","updateTransParamAndRefresh","addVideo","dispatchVideo","controls","controlsList","playsInline","disablePictureInPicture","convertWorldPointInContainer","pkgIdOpIdMap","pageToIncRefresh","boardsSnapshotIds","globalSnapshotIds","_startRefreshLoop2","refreshAnimationTimer","incRefresh","_init","boundaries","hasBoardAction","lastBoundaryData","refreshPreviewsOfCurrBoard","refreshPreviewsOfCurrPage","isCameraSnapshot","fakeServerId","sendSnapshot","execSnapshot","pkgId","_pkg","recoverFullSnapshot","cacheSnapshot","pushSnapshotToQueue","getPage","addOpInPage","addOpInBoard","addGlobalOp","addOpInRoom","_pkgArr","pkgArr","allInPage","boundaryData","nonCameraPkg","needRefresh","endReceiveBatchSnapshots","beginReceiveBatchSnapshots","oldPkgId","_pushSnapshotInArray","pageSnapshotIds","dataArr","dataType","mergeTwoPartial","whiteboard","_startRefreshLoop","videos","convertPreviewCanvas","convertCanvas","drawMousePointer","sort","k1","k2","sp1","sp2","beginAt","userId","missOpSet","handleAbNormalQueue","separateNormalQueue","normalQueue","abNormalQueue","noHistOpQueue","removeHistoryOpQueue","noClearQueue","removeClearOpQueue","simpleQueue","removeDuplicateOpQueue","handleNormalQueue","filterSelectedOpIds","opQueueMap","dependOnIdArr","dependOpId","removeInprogressSnapshotIfBeenDepended","getDrawOpFromSnapshotQueue","setSelectedOpIds","inProgressSelectOfCurrUser","setInProgressSelectedOpIds","histSnapshotId","dependOnIds","addTextSnapshot","addSnapshotAndDrawOnlyIt","dependOnId","setInprogressSnapshot","fitToContentTimer","deleteBoard","gotoBoard","selectBoardIndex","nextBoardIndex","hasBackground","fitToContent","overwritableTypes","debounceData","clientIdToData","lastContinueServerPkgId","serverPkgSinceLast","lastPkgIdToSync","dataOfSync","_scheduleNextBroadcast","debounceDataEntry","_doBroadcastData","mergeDebouncedData","dataQueue","strategy","client_pkg_id","broadcastData","_setupResendSyncRequestTimer","currRetryCount","resendSyncRequestTimer","ResendSyncRequestInterval","bindEvents","onData","onBroadcastAck","onSendRequestAck","onSendRequestResponse","server_pkg_id","_updateServerPkgInfo","receiveBroadcaster","execBatchSnapshots","last_server_pkg_id","_updateAppAfterSync","start_server_pkg_id","end_server_pkg_id","packages","client_id","nextLocalFakeId","_getDataToSync","broadcasterData","receiveBroadcasterAfterSync","hasBoundary","lastServerPkgId","inUseClientIds","__awaiter","thisArg","_arguments","generator","fulfilled","rejected","previewContainerMap","isLoopBusy","onPageReady","setupExportToImgContainer","resizeElements","keepPrevContainer","newKeys","previewContainerSettings","getContainerKey","oldKeys","previewTasks","setupPreviewElements","canvasContainer","addPreviewTask","invalidatePreview","taskList","taskArray","reverse","taskInfo","taskIndexOfSamePage","getTaskIndexOfPage","unshift","startLoop","canvasContainerArr","getElementsByClassName","shiftNextReadyTask","generatePreview","ms","hadRuntime","regeneratorRuntime","oldRuntime","Op","hasOwn","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","inModule","runtime","ContinueSentinel","getProto","NativeIteratorPrototype","Gp","GeneratorFunctionPrototype","Generator","GeneratorFunction","isGeneratorFunction","genFun","mark","awrap","__await","defineIteratorMethods","AsyncIterator","innerFn","outerFn","tryLocsList","Context","skipTempReset","sent","_sent","delegate","method","tryEntries","resetTryEntry","stop","rootRecord","completion","rval","dispatchException","exception","handle","loc","caught","record","tryLoc","hasCatch","hasFinally","catchLoc","finallyLoc","abrupt","finallyEntry","afterLoc","finish","thrown","delegateYield","resultName","nextLoc","protoGenerator","_invoke","doneResult","delegateResult","maybeInvokeDelegate","tryCatch","makeInvokeMethod","previousPromise","callInvokeWithMethodAndArg","unwrapped","return","pushTryEntry","locs","iteratorMethod","translateX","translateY","dom","convertDom","translate","getTransParam","_roundBoundary","getCameraBoundPan","getCameraBoundZoom","getCameraBoundReset","getCameraBoundFitToContent","getCameraBoundFitToDoc","getCameraBoundResize","getContainerWorldRectByCameraBound","backgroundOp","horizontalPadding","verticalPadding","_width","_height","cameraWidth","cameraHeight","convertDomAndRefresh","nextRecordIndex","lastTime","offsetBegin","resetState","_lastTime","Infinity","forward","endIndex","recordsToEmit","snapshotsToEmit","observeModeData","receiveObserveModeAfterSync","_lastDirection","_interruptFreeDraw","rebuildSocket","resetApp","_simulateReconnect","readyToSyncData","repeat","intervalBtwPoints","intervalBtwLines","_generateRandomLines","_generateRandomLines2","offsetWidth","offsetHeight","dispatchEvent","_simulateMouseMove","lastXY","catch","_getDxDy","isBroadcasting","broadcasterNickname","setMode","setBroadcaster","broadcastRoomState","broadcasterName","lastVisionData","lastObserveModeOfAccount","drawPlugin","imageDimension","AcceptTypesArr","imageInput","accept","onchange","fileInput","files","nameParts","suffix","dimensions","previewFile","beginupload","isBase64","allowEmpty","regex","mimeRegex","mimeRequired","paddingRequired","parseUrl","RECORD_FILE","cid","chunk","lastIndexOfDot","lastIndexOf","ab2str","textDecoder","decode","fileReader","FileReader","readAsText","getID","TextEncoder","TextDecoder","fetchBlob","xhr","XMLHttpRequest","responseType","response","send","p0","getTime","showHour","second","minute","hour","pako","level","chunkSize","windowBits","memLevel","to","raw","ended","chunks","strm","avail_out","deflateInit2","deflateSetHeader","dictionary","string2buf","deflateSetDictionary","_dict_set","next_in","avail_in","Buf8","next_out","deflate","onEnd","buf2binstring","shrinkBuf","deflateEnd","flattenChunks","Deflate","deflateRaw","2","inflateInit2","Z_OK","inflateGetHeader","inflateSetDictionary","Z_FINISH","Z_NO_FLUSH","binstring2buf","inflate","Z_NEED_DICT","Z_BUF_ERROR","Z_STREAM_END","Z_SYNC_FLUSH","utf8border","buf2string","arraySet","inflateEnd","Inflate","inflateRaw","ungzip","3","Uint16Array","Int32Array","subarray","setTyped","Buf16","Buf32","4","fromCharCode","5","6","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_BLOCK","Z_TREES","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","7","8","I","pending","pending_buf","pending_out","total_out","_tr_flush_block","block_start","strstart","max_chain_length","prev_length","nice_match","w_size","w_mask","good_match","lookahead","match_start","window_size","hash_size","adler","total_in","insert","ins_h","hash_shift","hash_mask","match_length","_tr_tally","max_lazy_match","last_lit","prev_match","match_available","good_length","max_lazy","nice_length","max_chain","status","pending_buf_size","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","bl_count","heap","heap_len","heap_max","l_buf","lit_bufsize","d_buf","opt_len","static_len","matches","bi_buf","bi_valid","Y","data_type","_tr_init","deflateInit","deflateReset","deflateResetKeep","hcrc","extra","comment","os","_tr_align","_tr_stored_block","deflateInfo","9","xflags","extra_len","10","dmax","wsize","whave","wnext","hold","bits","lencode","distcode","lenbits","distbits","sane","11","Z","havedict","flags","wbits","ncode","nlen","ndist","have","lens","work","lendyn","distdyn","back","was","inflateReset","inflateReset2","inflateResetKeep","inflateInit","inflateInfo","12","13","0","14","static_tree","extra_bits","extra_base","elems","max_length","has_stree","dyn_tree","max_code","stat_desc","X","J","Q","15","Track","offsetEnd","showTrack","speed","showTrackCb","hideTrackCb","_awaitTrackHandler","hideTrack","play","jumpTo","doSetTrack","createDebug","prevTime","enabled","coerce","formatter","formatters","formatArgs","logFn","useColors","selectColor","extend","instances","delimiter","newDebug","toNamespace","disable","namespaces","skips","humanize","load","UserManager","maxUserHistory","userKeys","userMap","onUndo","onRedo","User","others","recycle","toSnapshot","calibrate","getCalibrateAction","isStandardCursor","isStandardMode","isValidTool","tool","WTrack","viewerArr","urlArray","originalParams","getRawRecordFromBlob","rawRecordsList","blobArray","endAt","listOfRawRecordList","rawDataByChannel","mergeRawDataByChannel","isChannelOverlapping","reader","readAsBinaryString","rawBuffer","dv","cLen","getInt32","contentLen","subb","rawDataByCid","rawData","oldRawData","listSortByBeginAt","first","formatTimeOffset","toLocaleString","RecordPlayer","tracks","v3TrackFileObjs","videoTracks","fileObj","VTrack","whiteboardTracks","V1V2Track","wbTrack","V3Track","drawManager","timeline","Timeline","_visibleChangeCallHandler","unmount","mount","setPlaySpeed","pause","whiteboardParams","urlArr","drawPluginParams","videoParams","ticker","TickTick","endTimeStamp","busy","handleTrackVisibleChange","track","_doPause","initTrack","bindTickerEvents","minTimestamp","getMinTimeStamp","readyQueue","getInitQueue","badTracks","getMaxTimeStamp","bindTrackEvents","beginTimeStamp","duration","handleTrackWaitingToPlay","handleTrackCanPlay","hasTrackWaiting","_doPlay","find","isWaiting","currTimeStamp","rate","DEFAULT_INTERVAL","setCurrentTime","destory","POSITIVE_INFINITY","maxTimestamp","NEGATIVE_INFINITY","isIPhone","pPipeline","lastRealTime","microTask","tick","passedGap","clearInterval","setInterval","timeStamp","React","ToolUI","Nothing","isPhone","toolUIEl","onMouseMove","getCurrentXAndTime","currentX","currentTime","labelText","labelLeft","pauseOrPlay","paused","onMouseDown","getAttribute","showLabel","drag","onMouseUp","hidePosition","handleClickSpeed","speedOptionShow","handleClickSpeedOption","showPosition","updator","search","fullWidth","renderTimeline","widthPercent","onClick","onMouseEnter","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","role","backgroundClip","renderPlayOrPause","backgroundImage","PLAY_BASE_64","PAUSE_BASE_64","currSpeed","speedText","timeDuration","durationStr","durationHour","renderSpeed","waitingForData","videoRef","oncanplay","onwaiting","pipe","setSpecialCheck","preload","onloadeddata","setVideoTime","findVideoRefInContainer","playbackRate","specialCheck","tagName","__asyncValues","__values","verb","settle","fetchData","dataList","isCompatible","Record","optimizeOldRecordList","needSkipFirstCleanFrame","findIndexBeyondTime","recordsToExecute","mangleRecords","clearImage","clearHtmlFile","executeActions","WorkerManager","lastColor","lastTool","leng","updateIndex","offsetBeing","lastClearFrameIndex","isClearFrame","recordToClean","toStateRelatedRecord","recordsToExecute_1","recordsToExecute_1_1","e_1","clearIndex","ActionUtilsOld","ActionUtils","curIndex","getStateRelatedActions","tmp","red","lastC","storage","setItem","removeItem","WebkitAppearance","firebug","table","localstorage","plural","msAbs","isPlural","long","fmtLong","fmtShort","tty","inspectOpts","stderr","colorCode","prefix","hideDate","toISOString","isatty","fd","supportsColor","ReadStream","WriteStream","stdout","utils","__asyncGenerator","resume","fulfill","toKB","gziped","gzipedSize","afterInit","syncManager","toAccount","afterSync","syncState","flushInCommingQueue","identity","syncBegin","syncRequest","ownerAccount","onIframeMessage","fileData","currentFile","anim","trigger","isBack","drawAdapter","emitAction","incommingQueue","actionProcessing","SyncManager","sendData","fileMap","eventHub","AdapterDraw","broadcastAction","connectorStatus","execute","timmer","qactions","qid","qtype","alreadyInMessageQueue","minimal","match1","GZIP_TESTER_1","fullText","incomming","_gzipArr","curLen","unzipedText","vipActionIndex","vipAction","handleSyncAction","actions_1","actions_1_1","act","makeClearAck","force","quiet","syncTo","syncAction","syncResponse","immuteUpdate","fileDataNext","setFileData","fileNext","handleFile","pagedHtmlFile","setHtmlFile","e_2","flushQueue","doneLen","forceWaiting","flushQueue_1","flushQueue_1_1","dirty","enableDraw","e_3","e_4","e_5","rawSnapshot","usersRaw","shapes","users","transhShapes","canvasRatio","canvasHeight","canvasWidth","ownerWidth","ownerHeight","shapeQueue","shapeGen","containerManager","updateCanvasPropSize","lastSleepTime","currentUserDefaultState","localUser","prevActionProcessing","restoreShape","fullRender","users_1","users_1_1","_g","guessMyUndoCount","emitUserShape","userSnapshot","notCurrentUser","declareCalibrate","pushQueue","setSize","undo","redo","actAccount","scrolling","frameBorder","zIndex","displayCanvas","readyState","direction","which","pageNum","transType","getFile","success","_image","removeUser","useTool","makeSyncPrepare","makeSyncRequest","makeSyncPrepareAck","selfCalibrateAction","getSelfCalibrate","clearShapes","updateCursor","removeOtherUsers","times","dataQue","lastDataMap","shadowUsers","doNotSendBefore","delayBase","dataStr","gzipStr","delayIndex","doTag","kiloBytes","begin","msTime","dq","onInited","DrawWorker","onAction","onInstantAction","isEnable","CanvasHelper","LOADING_IMAGE","handleInputDomBlur","inputDom","pointStr","ownerCanvasHeight","ownerCanvasWidth","prevEnd","renderText","originalEvent","displayCtx","changedTouches","ctrlKey","shiftKey","altKey","realX","realY","ShapesManager","ContainerManager","addUser","switchEventListener","cursorType","setCursor","clearFlag","canvasList","maskCanvas","addOrRemove","validTool","getUser","dispatchCalibrateAction","flagPos","renderFlag","ext","userKeyDown","keyDown","_afterKeyChange","newWhich","userCtx","isFlag","visibles","whenMouseDown","clone","lastStateAccount","applyState","Shape","pushShape","whenMouseMove","activeShape","some","shiftKeyTool","updateCorner","freeMove","oldMid","mid","middle","shapeCtx","needMoveUserCtxData","expandCorner","freeEnd","moveUserShapeToDisplay","endCoord","getCanvasCoord","iptWidth","verticalAlign","inputDomValue","getOwnerCoord","imgData","dataBytes","antiAlais","shapeWidth","shapeHeight","clearTransparentPix","imageSmoothingEnabled","maskCtx","posCoord","tmpUrl","backgroundUrl","classList","backgroundSize","uidToRemove","hasUser","userOptions","_removeUser","uids","transh","shapeSnapshotOption","isInTrash","actionStr","optimized","imageData","actionsLenth","toCoord","coordinateOffset","getStartAndEnd","startAction","endAction","startOffset","endOffset","minus","needClearPix","prevOldMid","calculateRadius","xOffset","yOffset","cornerRadius","textAction","insertAdjacentHTML","performance","timing","navigationStart","visible","shapeCanvas","userCanvas","coordWidth","coordHeight","path","detail","getCoord","toPoint","ownerCoord","startCoord","UID","undoCount","_resetCalibrate","configActiveShape","undoLength","avaliableUndoCount","clearListener","_usernameger","widthScale","heightScale","newWidth","newHeight","onResize","waiting","containerWidth","containerHeight","calcCanvasLayout","updateCanvasStyleSize","autofocus","buildInputDom","inited","shapesmanager","initEssential","adjustSize","ratio","containerRatio","heightGap","widthGap","displayStyle","maskStyle","prevHeight","prevWidth","resizeCanvas","currentAccount","targetCtx","shapeOrUser","Connector","fetchMultiData","listOfDataList","accountSet","_seekTo","recordListToPlay","currCid"],"mappings":"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","file":"RecordPlayer_v3.1.2.log.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RecordPlayer\"] = factory();\n\telse\n\t\troot[\"RecordPlayer\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 333);\n","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","var core = module.exports = { version: '2.6.11' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };","!function(){\"use strict\";function e(e,t){var n,o,r,i,l=W;for(i=arguments.length;i-- >2;)P.push(arguments[i]);t&&null!=t.children&&(P.length||P.push(t.children),delete t.children);while(P.length)if((o=P.pop())&&void 0!==o.pop)for(i=o.length;i--;)P.push(o[i]);else\"boolean\"==typeof o&&(o=null),(r=\"function\"!=typeof e)&&(null==o?o=\"\":\"number\"==typeof o?o+=\"\":\"string\"!=typeof o&&(r=!1)),r&&n?l[l.length-1]+=o:l===W?l=[o]:l.push(o),n=r;var a=new T;return a.nodeName=e,a.children=l,a.attributes=null==t?void 0:t,a.key=null==t?void 0:t.key,void 0!==M.vnode&&M.vnode(a),a}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,t){e&&(\"function\"==typeof e?e(t):e.current=t)}function o(n,o){return e(n.nodeName,t(t({},n.attributes),o),arguments.length>2?[].slice.call(arguments,2):n.children)}function r(e){!e.__d&&(e.__d=!0)&&1==V.push(e)&&(M.debounceRendering||D)(i)}function i(){var e;while(e=V.pop())e.__d&&x(e)}function l(e,t,n){return\"string\"==typeof t||\"number\"==typeof t?void 0!==e.splitText:\"string\"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function u(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===n[r]&&(n[r]=o[r]);return n}function c(e,t){var n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",e):document.createElement(e);return n.__n=e,n}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,o,r,i){if(\"className\"===t&&(t=\"class\"),\"key\"===t);else if(\"ref\"===t)n(o,null),n(r,e);else if(\"class\"!==t||i)if(\"style\"===t){if(r&&\"string\"!=typeof r&&\"string\"!=typeof o||(e.style.cssText=r||\"\"),r&&\"object\"==typeof r){if(\"string\"!=typeof o)for(var l in o)l in r||(e.style[l]=\"\");for(var l in r)e.style[l]=\"number\"==typeof r[l]&&!1===E.test(l)?r[l]+\"px\":r[l]}}else if(\"dangerouslySetInnerHTML\"===t)r&&(e.innerHTML=r.__html||\"\");else if(\"o\"==t[0]&&\"n\"==t[1]){var a=t!==(t=t.replace(/Capture$/,\"\"));t=t.toLowerCase().substring(2),r?o||e.addEventListener(t,_,a):e.removeEventListener(t,_,a),(e.__l||(e.__l={}))[t]=r}else if(\"list\"!==t&&\"type\"!==t&&!i&&t in e){try{e[t]=null==r?\"\":r}catch(e){}null!=r&&!1!==r||\"spellcheck\"==t||e.removeAttribute(t)}else{var u=i&&t!==(t=t.replace(/^xlink:?/,\"\"));null==r||!1===r?u?e.removeAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase()):e.removeAttribute(t):\"function\"!=typeof r&&(u?e.setAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||\"\"}function _(e){return this.__l[e.type](M.event&&M.event(e)||e)}function f(){var e;while(e=A.shift())M.afterMount&&M.afterMount(e),e.componentDidMount&&e.componentDidMount()}function d(e,t,n,o,r,i){H++||(R=null!=r&&void 0!==r.ownerSVGElement,B=null!=e&&!(\"__preactattr_\"in e));var l=h(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--H||(B=!1,i||f()),l}function h(e,t,n,o,r){var i=e,l=R;if(null!=t&&\"boolean\"!=typeof t||(t=\"\"),\"string\"==typeof t||\"number\"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),v(e,!0))),i.__preactattr_=!0,i;var u=t.nodeName;if(\"function\"==typeof u)return N(e,t,n,o);if(R=\"svg\"===u||\"foreignObject\"!==u&&R,u+=\"\",(!e||!a(e,u))&&(i=c(u,R),e)){while(e.firstChild)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),v(e,!0)}var p=i.firstChild,s=i.__preactattr_,_=t.children;if(null==s){s=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)s[f[d].name]=f[d].value}return!B&&_&&1===_.length&&\"string\"==typeof _[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=_[0]&&(p.nodeValue=_[0]):(_&&_.length||null!=p)&&m(i,_,n,o,B||null!=s.dangerouslySetInnerHTML),y(i,t.attributes,s),R=l,i}function m(e,t,n,o,r){var i,a,u,c,s,_=e.childNodes,f=[],d={},m=0,b=0,y=_.length,g=0,w=t?t.length:0;if(0!==y)for(var C=0;C<y;C++){var x=_[C],N=x.__preactattr_,k=w&&N?x._component?x._component.__k:N.key:null;null!=k?(m++,d[k]=x):(N||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(f[g++]=x)}if(0!==w)for(var C=0;C<w;C++){c=t[C],s=null;var k=c.key;if(null!=k)m&&void 0!==d[k]&&(s=d[k],d[k]=void 0,m--);else if(b<g)for(i=b;i<g;i++)if(void 0!==f[i]&&l(a=f[i],c,r)){s=a,f[i]=void 0,i===g-1&&g--,i===b&&b++;break}s=h(s,c,n,o),u=_[C],s&&s!==e&&s!==u&&(null==u?e.appendChild(s):s===u.nextSibling?p(u):e.insertBefore(s,u))}if(m)for(var C in d)void 0!==d[C]&&v(d[C],!1);while(b<=g)void 0!==(s=f[g--])&&v(s,!1)}function v(e,t){var o=e._component;o?k(o):(null!=e.__preactattr_&&n(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||p(e),b(e))}function b(e){e=e.lastChild;while(e){var t=e.previousSibling;v(e,!0),e=t}}function y(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||s(e,o,n[o],n[o]=void 0,R);for(o in t)\"children\"===o||\"innerHTML\"===o||o in n&&t[o]===(\"value\"===o||\"checked\"===o?e[o]:n[o])||s(e,o,n[o],n[o]=t[o],R)}function g(e,t,n){var o,r=F.length;e.prototype&&e.prototype.render?(o=new e(t,n),U.call(o,t,n)):(o=new U(t,n),o.constructor=e,o.render=w);while(r--)if(F[r].constructor===e)return o.__b=F[r].__b,F.splice(r,1),o;return o}function w(e,t,n){return this.constructor(e,n)}function C(e,t,o,i,l){e.__x||(e.__x=!0,e.__r=t.ref,e.__k=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||l?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i)),i&&i!==e.context&&(e.__c||(e.__c=e.context),e.context=i),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==o&&(1!==o&&!1===M.syncComponentUpdates&&e.base?r(e):x(e,1,l)),n(e.__r,e))}function x(e,n,o,r){if(!e.__x){var i,l,a,c=e.props,p=e.state,s=e.context,_=e.__p||c,h=e.__s||p,m=e.__c||s,b=e.base,y=e.__b,w=b||y,N=e._component,U=!1,S=m;if(e.constructor.getDerivedStateFromProps&&(p=t(t({},p),e.constructor.getDerivedStateFromProps(c,p)),e.state=p),b&&(e.props=_,e.state=h,e.context=m,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,p,s)?U=!0:e.componentWillUpdate&&e.componentWillUpdate(c,p,s),e.props=c,e.state=p,e.context=s),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!U){i=e.render(c,p,s),e.getChildContext&&(s=t(t({},s),e.getChildContext())),b&&e.getSnapshotBeforeUpdate&&(S=e.getSnapshotBeforeUpdate(_,h));var L,T,P=i&&i.nodeName;if(\"function\"==typeof P){var W=u(i);l=N,l&&l.constructor===P&&W.key==l.__k?C(l,W,1,s,!1):(L=l,e._component=l=g(P,W,s),l.__b=l.__b||y,l.__u=e,C(l,W,0,s,!1),x(l,1,o,!0)),T=l.base}else a=w,L=N,L&&(a=e._component=null),(w||1===n)&&(a&&(a._component=null),T=d(a,i,s,o||!b,w&&w.parentNode,!0));if(w&&T!==w&&l!==N){var D=w.parentNode;D&&T!==D&&(D.replaceChild(T,w),L||(w._component=null,v(w,!1)))}if(L&&k(L),e.base=T,T&&!r){var E=e,V=e;while(V=V.__u)(E=V).base=T;T._component=E,T._componentConstructor=E.constructor}}!b||o?A.push(e):U||(e.componentDidUpdate&&e.componentDidUpdate(_,h,S),M.afterUpdate&&M.afterUpdate(e));while(e.__h.length)e.__h.pop().call(e);H||r||f()}}function N(e,t,n,o){var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===t.nodeName,c=a,p=u(t);while(r&&!c&&(r=r.__u))c=r.constructor===t.nodeName;return r&&c&&(!o||r._component)?(C(r,p,3,n,o),e=r.base):(i&&!a&&(k(i),e=l=null),r=g(t.nodeName,p,n),e&&!r.__b&&(r.__b=e,l=null),C(r,p,1,n,o),e=r.base,l&&e!==l&&(l._component=null,v(l,!1))),e}function k(e){M.beforeUnmount&&M.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var o=e._component;o?k(o):t&&(null!=t.__preactattr_&&n(t.__preactattr_.ref,null),e.__b=t,p(t),F.push(e),b(t)),n(e.__r,null)}function U(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{},this.__h=[]}function S(e,t,n){return d(n,e,{},!1,t,!1)}function L(){return{}}var T=function(){},M={},P=[],W=[],D=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,E=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,V=[],A=[],H=0,R=!1,B=!1,F=[];t(U.prototype,{setState:function(e,n){this.__s||(this.__s=this.state),this.state=t(t({},this.state),\"function\"==typeof e?e(this.state,this.props):e),n&&this.__h.push(n),r(this)},forceUpdate:function(e){e&&this.__h.push(e),x(this,2)},render:function(){}});var j={h:e,createElement:e,cloneElement:o,createRef:L,Component:U,render:S,rerender:i,options:M};\"undefined\"!=typeof module?module.exports=j:self.preact=j}();\n//# sourceMappingURL=preact.min.js.map","import { globalSnapshotTypes } from './types';\nimport { v4 as uuidv4 } from 'uuid';\nlet lastGlobalOpId;\nlet lastSnapshotInfo = {\n    type: '',\n    boardName: 'whiteboard',\n    pageIndex: '0',\n    dependOn: undefined,\n    timestamp: 0\n};\nlet newOpFlag = false;\n/**\n * 下面情况会生成新的opId。\n * 1. 操作类型和上一次dispatch的快照类型不同\n * 2. 操作的dependOn和上一次dispatch的dependOn不同\n * 3. 有用beginBatch明确标识为下一个opId\n *\n * 4. 命令型操作，如undo，redo，image等等\n */\nfunction genNewOpId(type, dependOn, pageIndex, boardName) {\n    let gen = false;\n    if (lastSnapshotInfo.pageIndex !== pageIndex) {\n        gen = true;\n    }\n    else if (lastSnapshotInfo.boardName !== boardName) {\n        gen = true;\n    }\n    else if (!lastSnapshotInfo.inProgress) {\n        //上一个快照已经结束，不需要新的快照\n        gen = true;\n    }\n    else if (type !== lastSnapshotInfo.type) {\n        gen = true;\n    }\n    else if (typeof dependOn !== typeof lastSnapshotInfo.dependOn) {\n        gen = true;\n    }\n    else if (typeof dependOn === 'string' && dependOn !== lastSnapshotInfo.dependOn) {\n        gen = true;\n    }\n    else if (Array.isArray(dependOn) && Array.isArray(lastSnapshotInfo.dependOn) && dependOn.join(',') !== lastSnapshotInfo.dependOn.join(',')) {\n        gen = true;\n    }\n    else if (newOpFlag) {\n        gen = true;\n    }\n    else if (['undo', 'redo', 'image'].includes(type)) {\n        gen = true;\n    }\n    return gen;\n}\nclass Operation {\n    constructor(app) {\n        this.type = 'base';\n        this.app = app;\n        this.opsManager = app.opsManager;\n        this.registerHooks();\n    }\n    get isMouseDown() {\n        return this.app.container.isMouseDown;\n    }\n    /**\n     * 可以添加生命周期钩子。\n     */\n    registerHooks() { }\n    /**\n     * 注册监听事件及响应方式\n     * key: 事件名称\n     * value：响应方式\n     *\n     * 最基本的有两类事件，建议使用下面名字命名：\n     * exec: 当设置为true时，会调用this.execCommand()\n     * activate: 当设置为true时，OpsManager会拦截该请求，并设置活跃操作\n     * 接到其他事件时，会直接调用键值对应的value。\n     *\n     * UI层派发事件名称应该为：'op:${type}:{eventName}'。manager拦截事件后，会调用execCommand或者设置OpsManager中激活的Op。\n     */\n    eventsToListen() {\n        return {\n            exec: {\n                value: false,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            },\n            activate: {\n                value: false,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n        };\n    }\n    execCommand() {\n        console.warn('DEV-->', `若设置了exec为true，请继承execCommand函数，并作出对应的处理。`);\n    }\n    afterActivate() {\n        //如果operation激活后有后续事情处理，在该函数中可以处理\n    }\n    /**\n     * 返回操作快照\n     */\n    getSnapshot(...args) {\n        return {\n            type: this.type\n        };\n    }\n    /**\n     * op可以通过此函数查询如果它发送快照，它的快照id是什么?\n     * @param type\n     * @param dependOn\n     */\n    opIdForseen(type, dependOn) {\n        const newId = genNewOpId(type, dependOn, this.opsManager.currPage.pageIndex, this.opsManager.currPage.boardName);\n        if (newId) {\n            return this.opsManager.currPage.getNextOpId();\n        }\n        else {\n            return this.opsManager.currPage.getOpId();\n        }\n    }\n    /**\n     * 将操作快照发送给远程服务器，以及本地对应的操作队列\n     *\n     * @param snapshot\n     */\n    dispatch(data) {\n        if (!data.hasOwnProperty('type')) {\n            /**\n             * 发送部分数据\n             */\n            const snapshot = {\n                opId: this.opsManager.currPage.getOpId(),\n                data\n            };\n            this.app.room.dispatch(snapshot);\n        }\n        else if (globalSnapshotTypes.indexOf(data.type) > -1) {\n            this.dispatchGlobalAction(data);\n        }\n        else if (data.type === 'page') {\n            this.dispatchPageAction(data);\n        }\n        else if (data.type === 'board') {\n            this.dispatchBoardAction(data);\n        }\n        else {\n            /**\n             * 处理当前页面的操作\n             */\n            const currBoard = this.app.room.boards[this.app.room.currIndex];\n            const now = (new Date()).valueOf();\n            let opId;\n            if (data.reuseOpType) {\n                /**\n                 * 激光笔，鼠标位置等类型可以一直不改变opId\n                 */\n                opId = `${this.app.account}-${data.reuseOpType}`;\n                delete data['reuseOpType'];\n            }\n            else {\n                const newId = genNewOpId(data.type, data.dependOn, this.opsManager.currPage.pageIndex, this.opsManager.currPage.boardName);\n                newOpFlag = false;\n                lastSnapshotInfo = {\n                    type: data.type,\n                    dependOn: data.dependOn,\n                    timestamp: now,\n                    pageIndex: this.opsManager.currPage.pageIndex,\n                    boardName: this.opsManager.currPage.boardName,\n                    inProgress: data.inProgress\n                };\n                if (newId) {\n                    this.opsManager.currPage.prepareNewOpId();\n                }\n                opId = this.opsManager.currPage.getOpId();\n            }\n            const snapshot = {\n                category: 'inPageOp',\n                board: this.app.room.currIndex,\n                page: currBoard.currIndex,\n                time: now,\n                uid: this.app.account,\n                opId: opId,\n                data\n            };\n            this.app.room.dispatch(snapshot);\n        }\n    }\n    /**\n     * 某些异步快照发送的时候，currBoard和currPage可能发生了变化。\n     * 为了处理这些场景，需要说明快照是从哪个page中发出的。\n     * 这一类场景只可能是page里面的快照，因此不用处理PageAction和BoardAction\n     * @param data\n     * @param page\n     */\n    dispatchFromPage(data, page) {\n        /**\n         * 处理当前页面的操作\n         */\n        const now = (new Date()).valueOf();\n        //保险起见，准备新的opId\n        page.prepareNewOpId();\n        const snapshot = {\n            category: 'inPageOp',\n            board: page.boardName,\n            page: Number(page.pageIndex),\n            time: now,\n            uid: this.app.account,\n            opId: page.getOpId(),\n            data\n        };\n        lastSnapshotInfo = {\n            type: data.type,\n            dependOn: data.dependOn,\n            timestamp: now,\n            pageIndex: page.pageIndex,\n            boardName: page.boardName,\n            inProgress: data.inProgress\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    /**\n     * 处理页面相关操作，包括goto和delete两类page操作。\n     * @param data\n     */\n    dispatchPageAction(data) {\n        const now = (new Date()).valueOf();\n        const snapshot = {\n            category: 'pageOp',\n            board: this.app.room.currIndex,\n            time: now,\n            uid: this.app.account,\n            opId: uuidv4(),\n            data\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    /**\n     * 处理页面相关操作，包括goto和delete两类page操作。\n     * @param data\n     */\n    dispatchBoardAction(data) {\n        const now = (new Date()).valueOf();\n        const snapshot = {\n            category: 'boardOp',\n            time: now,\n            uid: this.app.account,\n            opId: uuidv4(),\n            data\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    dispatchGlobalAction(data) {\n        let opId;\n        const now = (new Date()).valueOf();\n        if (data.reuseOpType) {\n            opId = `${this.app.account}-${data.reuseOpType}`;\n            delete data['reuseOpType'];\n        }\n        else {\n            if (!lastGlobalOpId || newOpFlag) {\n                lastGlobalOpId = uuidv4();\n                newOpFlag = false;\n            }\n            opId = lastGlobalOpId;\n        }\n        const snapshot = {\n            category: 'globalOp',\n            time: now,\n            uid: this.app.account,\n            opId,\n            data\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    emit(event, ...args) {\n        this.app.dispatcher.emit(event, ...args);\n    }\n    draw(snapshot, ctx, opts) {\n        console.warn('DEV-->', `请实现${this.type}子类中draw函数。`);\n    }\n    //文本本来是绘制在dom上。由于preview需要绘制在图片上，因此使用preview方法重写\n    //TextOp需要重写此函数，其他Op不需要\n    preview(snapshot, ctx, opts) {\n        this.draw(snapshot, ctx, opts);\n    }\n    hide(snapshot, ctx, div) {\n        //如有需要，继承此函数清除被清空的图形\n    }\n    mergePartial(snapshot, partial) {\n        if (partial.hasOwnProperty('category')) {\n            return partial;\n        }\n        else {\n            return snapshot;\n        }\n    }\n    /**\n     * 连续动作开始，之后的快照会使用新的opId。\n     */\n    beginBatch() {\n        newOpFlag = true;\n    }\n    /**\n     * 判断某个按键是否按下，按键状态存储在container中\n     */\n    isKeyDown(key) {\n        return this.app.container.isKeyDown(key);\n    }\n    /**\n     * 同一页面的所有操作快照\n     */\n    get opsOfPage() {\n        return this.opsManager.currPage.opQueue;\n    }\n    /**\n     * 同一页面所有可直接绘制的操作快照\n     * TODO: 需要修改\n     */\n    get drawOpsOfPage() {\n        return this.opsManager.drawOpsOfPage;\n    }\n    getOpTypeByOpId(opId) {\n        if (this.opsManager.drawOpsOfPage.hasOwnProperty(opId)) {\n            return this.opsManager.drawOpsOfPage[opId].data.type;\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nexport default Operation;\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","/**\n * 图像检测帮助函数\n */\nimport { max, min } from \"./util\";\n/**\n * 两点之间距离的平方\n */\nexport function distSqrt(p1, p2) {\n    return (p1[0] - p2[0]) * (p1[0] - p2[0]) + (p1[1] - p2[1]) * (p1[1] - p2[1]);\n}\nexport function dist(p1, p2) {\n    return Math.sqrt(distSqrt(p1, p2));\n}\n/**\n * 检测两个矩形是否有重叠区域\n * @param rect1\n * @param rect2\n */\nexport function rectCollide(rect1, rect2) {\n    return !(rect1.sx > rect2.sx + rect2.w ||\n        rect1.sx + rect1.w < rect2.sx ||\n        rect1.sy > rect2.sy + rect2.h ||\n        rect1.sy + rect1.h < rect2.sy);\n}\n/**\n * 判断点与点之间是否碰撞。若点之间的距离小于r，则无碰撞\n */\nexport function pointCollideWithPoint(point, another, r) {\n    return distSqrt(point, another) <= r * r;\n}\n/**\n * 判断点是否和直线相交\n * r为点的半径\n *\n * distance(A, C) + distance(B, C) == distance(A, B)\n */\nexport function pointCollideWithLine(point, sp, ep, r) {\n    return (dist(point, sp) + dist(point, ep) - dist(sp, ep)) <= r;\n}\nexport function pointInRect(rect, point) {\n    return (point[0] > rect.sx &&\n        point[0] < rect.sx + rect.w &&\n        point[1] > rect.sy &&\n        point[1] < rect.sy + rect.h);\n}\n/**\n * 先根据scaleX，scaleY缩放，然后在根据dx，dy平移\n * @param rect\n * @param dx\n * @param dy\n * @param scale\n */\nexport function getTransformedBoundary(rect, dx = 0, dy = 0, scaleX = {\n    factor: 1,\n    coordinate: 0\n}, scaleY = {\n    factor: 1,\n    coordinate: 0\n}) {\n    let sx = scaleX.factor * (rect.sx - scaleX.coordinate) + scaleX.coordinate;\n    let sy = scaleY.factor * (rect.sy - scaleY.coordinate) + scaleY.coordinate;\n    sx = sx + (dx ? dx : 0);\n    sy = sy + (dy ? dy : 0);\n    let w = rect.w * scaleX.factor;\n    let h = rect.h * scaleY.factor;\n    if (w < 0) {\n        sx = sx + w;\n        w = -w;\n    }\n    if (h < 0) {\n        sy = sy + h;\n        h = -h;\n    }\n    return {\n        sx, sy, w, h\n    };\n}\nexport function getTransformedPoint(point, dx = 0, dy = 0, scaleX = {\n    factor: 1,\n    coordinate: 0\n}, scaleY = {\n    factor: 1,\n    coordinate: 0\n}) {\n    let x = scaleX.factor * (point[0] - scaleX.coordinate) + scaleX.coordinate;\n    let y = scaleY.factor * (point[1] - scaleY.coordinate) + scaleY.coordinate;\n    x = x + (dx ? dx : 0);\n    y = y + (dy ? dy : 0);\n    return [x, y];\n}\nexport function combineBoundary(b1, b2) {\n    let sx = min(b1.sx, b2.sx, b1.sx + b1.w, b2.sx + b2.w);\n    let sy = min(b1.sy, b2.sy, b1.sy + b1.h, b2.sy + b2.h);\n    let ex = max(b1.sx, b2.sx, b1.sx + b1.w, b2.sx + b2.w);\n    let ey = max(b1.sy, b2.sy, b1.sy + b1.h, b2.sy + b2.h);\n    return {\n        sx,\n        sy,\n        w: ex - sx,\n        h: ey - sy\n    };\n}\nexport function getBoundaryBoxFromTwoPoints(sp, ep) {\n    let sx = min(sp[0], ep[0]);\n    let ex = max(sp[0], ep[0]);\n    let sy = min(sp[1], ep[1]);\n    let ey = max(sp[1], ep[1]);\n    return {\n        sx,\n        sy,\n        w: ex - sx,\n        h: ey - sy\n    };\n}\nconst ARROW_TIP_X_OFFSET = 5;\nconst ARROW_WINGS_X_OFFSET = 2;\nexport const getArrowPoints = (size, lastTwoPoints) => {\n    var tipXOffset = ARROW_TIP_X_OFFSET * size, wingsXOffset = ARROW_WINGS_X_OFFSET * size, lineCoef = getLineCoef(lastTwoPoints);\n    var arrowTipX = lastTwoPoints[1][0] - lastTwoPoints[0][0] > 0 ?\n        getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, tipXOffset) :\n        2 * lastTwoPoints[1][0] - getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, tipXOffset);\n    var arrowTipY = lastTwoPoints[1][0] - lastTwoPoints[0][0] === 0 ?\n        lastTwoPoints[1][1] + (lastTwoPoints[1][1] - lastTwoPoints[0][1] > 0 ? tipXOffset : -tipXOffset) :\n        getLineFromPointsY(lastTwoPoints, arrowTipX);\n    var arrowWing1X = getXFromCoefAndOffset(lastTwoPoints[1], -1 / lineCoef, wingsXOffset);\n    var arrowWing1Y = lastTwoPoints[1][1] - lastTwoPoints[0][1] === 0 ?\n        lastTwoPoints[1][1] - wingsXOffset :\n        getVerticalLineY(lastTwoPoints[1], lineCoef, arrowWing1X);\n    var arrowWing2X = 2 * lastTwoPoints[1][0] - getXFromCoefAndOffset(lastTwoPoints[1], -1 / lineCoef, wingsXOffset);\n    var arrowWing2Y = lastTwoPoints[1][1] - lastTwoPoints[0][1] === 0 ?\n        lastTwoPoints[1][1] + wingsXOffset :\n        getVerticalLineY(lastTwoPoints[1], lineCoef, arrowWing2X);\n    return [\n        [arrowTipX, arrowTipY],\n        [arrowWing1X, arrowWing1Y],\n        [arrowWing2X, arrowWing2Y]\n    ];\n};\nexport const getLineCoef = (points) => {\n    return ((points[1][1] - points[0][1]) / (points[1][0] - points[0][0])) || 0;\n};\nexport const getXFromCoefAndOffset = (refPoint, k, z) => {\n    return Math.sqrt(Math.pow(z, 2) / (Math.pow(k, 2) + 1)) + refPoint[0];\n};\nexport const getVerticalLineY = (referencePoint, coef, x) => {\n    return (referencePoint[0] - x) / coef + referencePoint[1];\n};\nexport const getLineFromPointsY = (points, x) => {\n    return (Math.max(-1000000, ((points[1][1] - points[0][1]) / (points[1][0] - points[0][0])) || 0)) * (x - points[0][0]) + points[0][1];\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass Hook {\n\tconstructor(args) {\n\t\tif (!Array.isArray(args)) args = [];\n\t\tthis._args = args;\n\t\tthis.taps = [];\n\t\tthis.interceptors = [];\n\t\tthis.call = this._call;\n\t\tthis.promise = this._promise;\n\t\tthis.callAsync = this._callAsync;\n\t\tthis._x = undefined;\n\t}\n\n\tcompile(options) {\n\t\tthrow new Error(\"Abstract: should be overriden\");\n\t}\n\n\t_createCall(type) {\n\t\treturn this.compile({\n\t\t\ttaps: this.taps,\n\t\t\tinterceptors: this.interceptors,\n\t\t\targs: this._args,\n\t\t\ttype: type\n\t\t});\n\t}\n\n\ttap(options, fn) {\n\t\tif (typeof options === \"string\") options = { name: options };\n\t\tif (typeof options !== \"object\" || options === null)\n\t\t\tthrow new Error(\n\t\t\t\t\"Invalid arguments to tap(options: Object, fn: function)\"\n\t\t\t);\n\t\toptions = Object.assign({ type: \"sync\", fn: fn }, options);\n\t\tif (typeof options.name !== \"string\" || options.name === \"\")\n\t\t\tthrow new Error(\"Missing name for tap\");\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\ttapAsync(options, fn) {\n\t\tif (typeof options === \"string\") options = { name: options };\n\t\tif (typeof options !== \"object\" || options === null)\n\t\t\tthrow new Error(\n\t\t\t\t\"Invalid arguments to tapAsync(options: Object, fn: function)\"\n\t\t\t);\n\t\toptions = Object.assign({ type: \"async\", fn: fn }, options);\n\t\tif (typeof options.name !== \"string\" || options.name === \"\")\n\t\t\tthrow new Error(\"Missing name for tapAsync\");\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\ttapPromise(options, fn) {\n\t\tif (typeof options === \"string\") options = { name: options };\n\t\tif (typeof options !== \"object\" || options === null)\n\t\t\tthrow new Error(\n\t\t\t\t\"Invalid arguments to tapPromise(options: Object, fn: function)\"\n\t\t\t);\n\t\toptions = Object.assign({ type: \"promise\", fn: fn }, options);\n\t\tif (typeof options.name !== \"string\" || options.name === \"\")\n\t\t\tthrow new Error(\"Missing name for tapPromise\");\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\t_runRegisterInterceptors(options) {\n\t\tfor (const interceptor of this.interceptors) {\n\t\t\tif (interceptor.register) {\n\t\t\t\tconst newOptions = interceptor.register(options);\n\t\t\t\tif (newOptions !== undefined) options = newOptions;\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n\n\twithOptions(options) {\n\t\tconst mergeOptions = opt =>\n\t\t\tObject.assign({}, options, typeof opt === \"string\" ? { name: opt } : opt);\n\n\t\t// Prevent creating endless prototype chains\n\t\toptions = Object.assign({}, options, this._withOptions);\n\t\tconst base = this._withOptionsBase || this;\n\t\tconst newHook = Object.create(base);\n\n\t\t(newHook.tapAsync = (opt, fn) => base.tapAsync(mergeOptions(opt), fn)),\n\t\t\t(newHook.tap = (opt, fn) => base.tap(mergeOptions(opt), fn));\n\t\tnewHook.tapPromise = (opt, fn) => base.tapPromise(mergeOptions(opt), fn);\n\t\tnewHook._withOptions = options;\n\t\tnewHook._withOptionsBase = base;\n\t\treturn newHook;\n\t}\n\n\tisUsed() {\n\t\treturn this.taps.length > 0 || this.interceptors.length > 0;\n\t}\n\n\tintercept(interceptor) {\n\t\tthis._resetCompilation();\n\t\tthis.interceptors.push(Object.assign({}, interceptor));\n\t\tif (interceptor.register) {\n\t\t\tfor (let i = 0; i < this.taps.length; i++)\n\t\t\t\tthis.taps[i] = interceptor.register(this.taps[i]);\n\t\t}\n\t}\n\n\t_resetCompilation() {\n\t\tthis.call = this._call;\n\t\tthis.callAsync = this._callAsync;\n\t\tthis.promise = this._promise;\n\t}\n\n\t_insert(item) {\n\t\tthis._resetCompilation();\n\t\tlet before;\n\t\tif (typeof item.before === \"string\") before = new Set([item.before]);\n\t\telse if (Array.isArray(item.before)) {\n\t\t\tbefore = new Set(item.before);\n\t\t}\n\t\tlet stage = 0;\n\t\tif (typeof item.stage === \"number\") stage = item.stage;\n\t\tlet i = this.taps.length;\n\t\twhile (i > 0) {\n\t\t\ti--;\n\t\t\tconst x = this.taps[i];\n\t\t\tthis.taps[i + 1] = x;\n\t\t\tconst xStage = x.stage || 0;\n\t\t\tif (before) {\n\t\t\t\tif (before.has(x.name)) {\n\t\t\t\t\tbefore.delete(x.name);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (before.size > 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (xStage > stage) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ti++;\n\t\t\tbreak;\n\t\t}\n\t\tthis.taps[i] = item;\n\t}\n}\n\nfunction createCompileDelegate(name, type) {\n\treturn function lazyCompileHook(...args) {\n\t\tthis[name] = this._createCall(type);\n\t\treturn this[name](...args);\n\t};\n}\n\nObject.defineProperties(Hook.prototype, {\n\t_call: {\n\t\tvalue: createCompileDelegate(\"call\", \"sync\"),\n\t\tconfigurable: true,\n\t\twritable: true\n\t},\n\t_promise: {\n\t\tvalue: createCompileDelegate(\"promise\", \"promise\"),\n\t\tconfigurable: true,\n\t\twritable: true\n\t},\n\t_callAsync: {\n\t\tvalue: createCompileDelegate(\"callAsync\", \"async\"),\n\t\tconfigurable: true,\n\t\twritable: true\n\t}\n});\n\nmodule.exports = Hook;\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","module.exports = {};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass HookCodeFactory {\n\tconstructor(config) {\n\t\tthis.config = config;\n\t\tthis.options = undefined;\n\t\tthis._args = undefined;\n\t}\n\n\tcreate(options) {\n\t\tthis.init(options);\n\t\tlet fn;\n\t\tswitch (this.options.type) {\n\t\t\tcase \"sync\":\n\t\t\t\tfn = new Function(\n\t\t\t\t\tthis.args(),\n\t\t\t\t\t'\"use strict\";\\n' +\n\t\t\t\t\t\tthis.header() +\n\t\t\t\t\t\tthis.content({\n\t\t\t\t\t\t\tonError: err => `throw ${err};\\n`,\n\t\t\t\t\t\t\tonResult: result => `return ${result};\\n`,\n\t\t\t\t\t\t\tresultReturns: true,\n\t\t\t\t\t\t\tonDone: () => \"\",\n\t\t\t\t\t\t\trethrowIfPossible: true\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"async\":\n\t\t\t\tfn = new Function(\n\t\t\t\t\tthis.args({\n\t\t\t\t\t\tafter: \"_callback\"\n\t\t\t\t\t}),\n\t\t\t\t\t'\"use strict\";\\n' +\n\t\t\t\t\t\tthis.header() +\n\t\t\t\t\t\tthis.content({\n\t\t\t\t\t\t\tonError: err => `_callback(${err});\\n`,\n\t\t\t\t\t\t\tonResult: result => `_callback(null, ${result});\\n`,\n\t\t\t\t\t\t\tonDone: () => \"_callback();\\n\"\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"promise\":\n\t\t\t\tlet errorHelperUsed = false;\n\t\t\t\tconst content = this.content({\n\t\t\t\t\tonError: err => {\n\t\t\t\t\t\terrorHelperUsed = true;\n\t\t\t\t\t\treturn `_error(${err});\\n`;\n\t\t\t\t\t},\n\t\t\t\t\tonResult: result => `_resolve(${result});\\n`,\n\t\t\t\t\tonDone: () => \"_resolve();\\n\"\n\t\t\t\t});\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += '\"use strict\";\\n';\n\t\t\t\tcode += \"return new Promise((_resolve, _reject) => {\\n\";\n\t\t\t\tif (errorHelperUsed) {\n\t\t\t\t\tcode += \"var _sync = true;\\n\";\n\t\t\t\t\tcode += \"function _error(_err) {\\n\";\n\t\t\t\t\tcode += \"if(_sync)\\n\";\n\t\t\t\t\tcode += \"_resolve(Promise.resolve().then(() => { throw _err; }));\\n\";\n\t\t\t\t\tcode += \"else\\n\";\n\t\t\t\t\tcode += \"_reject(_err);\\n\";\n\t\t\t\t\tcode += \"};\\n\";\n\t\t\t\t}\n\t\t\t\tcode += this.header();\n\t\t\t\tcode += content;\n\t\t\t\tif (errorHelperUsed) {\n\t\t\t\t\tcode += \"_sync = false;\\n\";\n\t\t\t\t}\n\t\t\t\tcode += \"});\\n\";\n\t\t\t\tfn = new Function(this.args(), code);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.deinit();\n\t\treturn fn;\n\t}\n\n\tsetup(instance, options) {\n\t\tinstance._x = options.taps.map(t => t.fn);\n\t}\n\n\t/**\n\t * @param {{ type: \"sync\" | \"promise\" | \"async\", taps: Array<Tap>, interceptors: Array<Interceptor> }} options\n\t */\n\tinit(options) {\n\t\tthis.options = options;\n\t\tthis._args = options.args.slice();\n\t}\n\n\tdeinit() {\n\t\tthis.options = undefined;\n\t\tthis._args = undefined;\n\t}\n\n\theader() {\n\t\tlet code = \"\";\n\t\tif (this.needContext()) {\n\t\t\tcode += \"var _context = {};\\n\";\n\t\t} else {\n\t\t\tcode += \"var _context;\\n\";\n\t\t}\n\t\tcode += \"var _x = this._x;\\n\";\n\t\tif (this.options.interceptors.length > 0) {\n\t\t\tcode += \"var _taps = this.taps;\\n\";\n\t\t\tcode += \"var _interceptors = this.interceptors;\\n\";\n\t\t}\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.call) {\n\t\t\t\tcode += `${this.getInterceptor(i)}.call(${this.args({\n\t\t\t\t\tbefore: interceptor.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t}\n\t\t}\n\t\treturn code;\n\t}\n\n\tneedContext() {\n\t\tfor (const tap of this.options.taps) if (tap.context) return true;\n\t\treturn false;\n\t}\n\n\tcallTap(tapIndex, { onError, onResult, onDone, rethrowIfPossible }) {\n\t\tlet code = \"\";\n\t\tlet hasTapCached = false;\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.tap) {\n\t\t\t\tif (!hasTapCached) {\n\t\t\t\t\tcode += `var _tap${tapIndex} = ${this.getTap(tapIndex)};\\n`;\n\t\t\t\t\thasTapCached = true;\n\t\t\t\t}\n\t\t\t\tcode += `${this.getInterceptor(i)}.tap(${\n\t\t\t\t\tinterceptor.context ? \"_context, \" : \"\"\n\t\t\t\t}_tap${tapIndex});\\n`;\n\t\t\t}\n\t\t}\n\t\tcode += `var _fn${tapIndex} = ${this.getTapFn(tapIndex)};\\n`;\n\t\tconst tap = this.options.taps[tapIndex];\n\t\tswitch (tap.type) {\n\t\t\tcase \"sync\":\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += `var _hasError${tapIndex} = false;\\n`;\n\t\t\t\t\tcode += \"try {\\n\";\n\t\t\t\t}\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += `var _result${tapIndex} = _fn${tapIndex}(${this.args({\n\t\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t\t})});\\n`;\n\t\t\t\t} else {\n\t\t\t\t\tcode += `_fn${tapIndex}(${this.args({\n\t\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t\t})});\\n`;\n\t\t\t\t}\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += \"} catch(_err) {\\n\";\n\t\t\t\t\tcode += `_hasError${tapIndex} = true;\\n`;\n\t\t\t\t\tcode += onError(\"_err\");\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\tcode += `if(!_hasError${tapIndex}) {\\n`;\n\t\t\t\t}\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcode += onDone();\n\t\t\t\t}\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"async\":\n\t\t\t\tlet cbCode = \"\";\n\t\t\t\tif (onResult) cbCode += `(_err${tapIndex}, _result${tapIndex}) => {\\n`;\n\t\t\t\telse cbCode += `_err${tapIndex} => {\\n`;\n\t\t\t\tcbCode += `if(_err${tapIndex}) {\\n`;\n\t\t\t\tcbCode += onError(`_err${tapIndex}`);\n\t\t\t\tcbCode += \"} else {\\n\";\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcbCode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcbCode += onDone();\n\t\t\t\t}\n\t\t\t\tcbCode += \"}\\n\";\n\t\t\t\tcbCode += \"}\";\n\t\t\t\tcode += `_fn${tapIndex}(${this.args({\n\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined,\n\t\t\t\t\tafter: cbCode\n\t\t\t\t})});\\n`;\n\t\t\t\tbreak;\n\t\t\tcase \"promise\":\n\t\t\t\tcode += `var _hasResult${tapIndex} = false;\\n`;\n\t\t\t\tcode += `var _promise${tapIndex} = _fn${tapIndex}(${this.args({\n\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t\tcode += `if (!_promise${tapIndex} || !_promise${tapIndex}.then)\\n`;\n\t\t\t\tcode += `  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${tapIndex} + ')');\\n`;\n\t\t\t\tcode += `_promise${tapIndex}.then(_result${tapIndex} => {\\n`;\n\t\t\t\tcode += `_hasResult${tapIndex} = true;\\n`;\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcode += onDone();\n\t\t\t\t}\n\t\t\t\tcode += `}, _err${tapIndex} => {\\n`;\n\t\t\t\tcode += `if(_hasResult${tapIndex}) throw _err${tapIndex};\\n`;\n\t\t\t\tcode += onError(`_err${tapIndex}`);\n\t\t\t\tcode += \"});\\n\";\n\t\t\t\tbreak;\n\t\t}\n\t\treturn code;\n\t}\n\n\tcallTapsSeries({\n\t\tonError,\n\t\tonResult,\n\t\tresultReturns,\n\t\tonDone,\n\t\tdoneReturns,\n\t\trethrowIfPossible\n\t}) {\n\t\tif (this.options.taps.length === 0) return onDone();\n\t\tconst firstAsync = this.options.taps.findIndex(t => t.type !== \"sync\");\n\t\tconst somethingReturns = resultReturns || doneReturns || false;\n\t\tlet code = \"\";\n\t\tlet current = onDone;\n\t\tfor (let j = this.options.taps.length - 1; j >= 0; j--) {\n\t\t\tconst i = j;\n\t\t\tconst unroll = current !== onDone && this.options.taps[i].type !== \"sync\";\n\t\t\tif (unroll) {\n\t\t\t\tcode += `function _next${i}() {\\n`;\n\t\t\t\tcode += current();\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcurrent = () => `${somethingReturns ? \"return \" : \"\"}_next${i}();\\n`;\n\t\t\t}\n\t\t\tconst done = current;\n\t\t\tconst doneBreak = skipDone => {\n\t\t\t\tif (skipDone) return \"\";\n\t\t\t\treturn onDone();\n\t\t\t};\n\t\t\tconst content = this.callTap(i, {\n\t\t\t\tonError: error => onError(i, error, done, doneBreak),\n\t\t\t\tonResult:\n\t\t\t\t\tonResult &&\n\t\t\t\t\t(result => {\n\t\t\t\t\t\treturn onResult(i, result, done, doneBreak);\n\t\t\t\t\t}),\n\t\t\t\tonDone: !onResult && done,\n\t\t\t\trethrowIfPossible:\n\t\t\t\t\trethrowIfPossible && (firstAsync < 0 || i < firstAsync)\n\t\t\t});\n\t\t\tcurrent = () => content;\n\t\t}\n\t\tcode += current();\n\t\treturn code;\n\t}\n\n\tcallTapsLooping({ onError, onDone, rethrowIfPossible }) {\n\t\tif (this.options.taps.length === 0) return onDone();\n\t\tconst syncOnly = this.options.taps.every(t => t.type === \"sync\");\n\t\tlet code = \"\";\n\t\tif (!syncOnly) {\n\t\t\tcode += \"var _looper = () => {\\n\";\n\t\t\tcode += \"var _loopAsync = false;\\n\";\n\t\t}\n\t\tcode += \"var _loop;\\n\";\n\t\tcode += \"do {\\n\";\n\t\tcode += \"_loop = false;\\n\";\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.loop) {\n\t\t\t\tcode += `${this.getInterceptor(i)}.loop(${this.args({\n\t\t\t\t\tbefore: interceptor.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t}\n\t\t}\n\t\tcode += this.callTapsSeries({\n\t\t\tonError,\n\t\t\tonResult: (i, result, next, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += \"_loop = true;\\n\";\n\t\t\t\tif (!syncOnly) code += \"if(_loopAsync) _looper();\\n\";\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += `} else {\\n`;\n\t\t\t\tcode += next();\n\t\t\t\tcode += `}\\n`;\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone:\n\t\t\t\tonDone &&\n\t\t\t\t(() => {\n\t\t\t\t\tlet code = \"\";\n\t\t\t\t\tcode += \"if(!_loop) {\\n\";\n\t\t\t\t\tcode += onDone();\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\treturn code;\n\t\t\t\t}),\n\t\t\trethrowIfPossible: rethrowIfPossible && syncOnly\n\t\t});\n\t\tcode += \"} while(_loop);\\n\";\n\t\tif (!syncOnly) {\n\t\t\tcode += \"_loopAsync = true;\\n\";\n\t\t\tcode += \"};\\n\";\n\t\t\tcode += \"_looper();\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\tcallTapsParallel({\n\t\tonError,\n\t\tonResult,\n\t\tonDone,\n\t\trethrowIfPossible,\n\t\tonTap = (i, run) => run()\n\t}) {\n\t\tif (this.options.taps.length <= 1) {\n\t\t\treturn this.callTapsSeries({\n\t\t\t\tonError,\n\t\t\t\tonResult,\n\t\t\t\tonDone,\n\t\t\t\trethrowIfPossible\n\t\t\t});\n\t\t}\n\t\tlet code = \"\";\n\t\tcode += \"do {\\n\";\n\t\tcode += `var _counter = ${this.options.taps.length};\\n`;\n\t\tif (onDone) {\n\t\t\tcode += \"var _done = () => {\\n\";\n\t\t\tcode += onDone();\n\t\t\tcode += \"};\\n\";\n\t\t}\n\t\tfor (let i = 0; i < this.options.taps.length; i++) {\n\t\t\tconst done = () => {\n\t\t\t\tif (onDone) return \"if(--_counter === 0) _done();\\n\";\n\t\t\t\telse return \"--_counter;\";\n\t\t\t};\n\t\t\tconst doneBreak = skipDone => {\n\t\t\t\tif (skipDone || !onDone) return \"_counter = 0;\\n\";\n\t\t\t\telse return \"_counter = 0;\\n_done();\\n\";\n\t\t\t};\n\t\t\tcode += \"if(_counter <= 0) break;\\n\";\n\t\t\tcode += onTap(\n\t\t\t\ti,\n\t\t\t\t() =>\n\t\t\t\t\tthis.callTap(i, {\n\t\t\t\t\t\tonError: error => {\n\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\tcode += \"if(_counter > 0) {\\n\";\n\t\t\t\t\t\t\tcode += onError(i, error, done, doneBreak);\n\t\t\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonResult:\n\t\t\t\t\t\t\tonResult &&\n\t\t\t\t\t\t\t(result => {\n\t\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\t\tcode += \"if(_counter > 0) {\\n\";\n\t\t\t\t\t\t\t\tcode += onResult(i, result, done, doneBreak);\n\t\t\t\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\tonDone:\n\t\t\t\t\t\t\t!onResult &&\n\t\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\t\treturn done();\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\trethrowIfPossible\n\t\t\t\t\t}),\n\t\t\t\tdone,\n\t\t\t\tdoneBreak\n\t\t\t);\n\t\t}\n\t\tcode += \"} while(false);\\n\";\n\t\treturn code;\n\t}\n\n\targs({ before, after } = {}) {\n\t\tlet allArgs = this._args;\n\t\tif (before) allArgs = [before].concat(allArgs);\n\t\tif (after) allArgs = allArgs.concat(after);\n\t\tif (allArgs.length === 0) {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\treturn allArgs.join(\", \");\n\t\t}\n\t}\n\n\tgetTapFn(idx) {\n\t\treturn `_x[${idx}]`;\n\t}\n\n\tgetTap(idx) {\n\t\treturn `_taps[${idx}]`;\n\t}\n\n\tgetInterceptor(idx) {\n\t\treturn `_interceptors[${idx}]`;\n\t}\n}\n\nmodule.exports = HookCodeFactory;\n","!function(e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).EventEmitter3=e()}(function(){return function i(s,f,c){function u(t,e){if(!f[t]){if(!s[t]){var n=\"function\"==typeof require&&require;if(!e&&n)return n(t,!0);if(a)return a(t,!0);var r=new Error(\"Cannot find module '\"+t+\"'\");throw r.code=\"MODULE_NOT_FOUND\",r}var o=f[t]={exports:{}};s[t][0].call(o.exports,function(e){return u(s[t][1][e]||e)},o,o.exports,i,s,f,c)}return f[t].exports}for(var a=\"function\"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){\"use strict\";var r=Object.prototype.hasOwnProperty,v=\"~\";function o(){}function f(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,n,r,o){if(\"function\"!=typeof n)throw new TypeError(\"The listener must be a function\");var i=new f(n,r||e,o),s=v?v+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],i]:e._events[s].push(i):(e._events[s]=i,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(v=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(v?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=v?v+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,i=new Array(o);r<o;r++)i[r]=n[r].fn;return i},s.prototype.listenerCount=function(e){var t=v?v+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,r,o,i){var s=v?v+e:e;if(!this._events[s])return!1;var f,c=this._events[s],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,i),!0}for(p=1,f=new Array(u-1);p<u;p++)f[p-1]=arguments[p];c.fn.apply(c.context,f)}else for(var a,l=c.length,p=0;p<l;p++)switch(c[p].once&&this.removeListener(e,c[p].fn,void 0,!0),u){case 1:c[p].fn.call(c[p].context);break;case 2:c[p].fn.call(c[p].context,t);break;case 3:c[p].fn.call(c[p].context,t,n);break;case 4:c[p].fn.call(c[p].context,t,n,r);break;default:if(!f)for(a=1,f=new Array(u-1);a<u;a++)f[a-1]=arguments[a];c[p].fn.apply(c[p].context,f)}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,r){var o=v?v+e:e;if(!this._events[o])return this;if(!t)return u(this,o),this;var i=this._events[o];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||u(this,o);else{for(var s=0,f=[],c=i.length;s<c;s++)(i[s].fn!==t||r&&!i[s].once||n&&i[s].context!==n)&&f.push(i[s]);f.length?this._events[o]=1===f.length?f[0]:f:u(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=v?v+e:e,this._events[t]&&u(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=v,s.EventEmitter=s,void 0!==t&&(t.exports=s)},{}]},{},[1])(1)});","/*\n * @Author: lduoduo\n * @Date: 2018-01-27 22:09:41\n * @Last Modified by: lduoduo\n * @Last Modified time: 2018-01-27 22:16:25\n * toast 消息提示组件\n */\nimport ToastCtrl from './toast-ctrl';\n/**\n * option.msg toast内容\n * option.time 停留时间: 默认2s，设置null: 无限期显示\n * @param {*} option\n */\nexport const showToast = (option) => {\n    const { msg, time = 2, type = 'info', top = 30 } = option;\n    const param = {\n        message: msg.constructor === String ? msg : JSON.stringify(msg),\n        time,\n        type,\n        top\n    };\n    ToastCtrl.show(param);\n};\nexport const hideToast = () => {\n    ToastCtrl.hide();\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","class DrawConfig {\n    constructor() {\n        this.strokeColor = 'rgb(0,0,0)';\n        /**\n         * 本来是每3-5次鼠标移动发送一次动作的。\n         * 后来加上了增量发送数据，以及数据延迟发送，导致3-5次鼠标移动动作会被打到一个包中发送，且没有数据重复。\n         * 又因为3-5次才发送会影响本地绘制，因此，将发送频次改回1次鼠标动作发送一个包（实际会延时批量发送)\n         */\n        this.pointsPerBatch = 1;\n        this.strokeWidth = 5;\n        this.opacity = 1;\n    }\n    // setStrokeColor(color: Array<number>) {\n    //     if (color.length < 3 || color.length > 4) {\n    //         console.error('白板--> setStrokeColor的参数必须为长度为3或者4的数组, 传入的参数为', color)\n    //     } else {\n    //         let hasError = false\n    //         for (let i = 0; i < 3; i++) {\n    //             if (color[i] < 0 || color[i] > 255) {\n    //                 console.error('白板--> setStrokeColor的参数数组前三位必须为0-255之间的数值, 传入的参数为', color)\n    //                 hasError = true\n    //             }\n    //         }\n    //         if (color.length === 4 && (color[3] < 0 || color[3] > 1)) {\n    //             console.error('白板--> setStrokeColor的参数数组第四位必须为0-1之间的数值, 传入的参数为', color)\n    //             hasError = true\n    //         }\n    //         if (!hasError && color.length === 3) {\n    //             this.strokeColor = `rgb(${color[0]},${color[1]},${color[2]})`\n    //         } else if (!hasError) {\n    //             this.strokeColor = `rgb(${color[0]},${color[1]},${color[2]},${color[3]})`\n    //         }\n    //     }\n    // }\n    setStrokeColor(color) {\n        this.strokeColor = color;\n    }\n    setStrokeWidth(width) {\n        this.strokeWidth = width;\n    }\n    setOpacity(value) {\n        this.opacity = value;\n    }\n}\nconst drawConfig = new DrawConfig();\nexport default drawConfig;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","module.exports = true;\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };","import Operation from '../Operation';\nexport const convertToCameraBoundSnapshot = (camera, snapshotData) => {\n    const boundary = camera.getNextCameraBound(snapshotData);\n    /**\n     * boundary的大小要被限制\n     */\n    const MAX_ALLOWED_WIDTH = 100000;\n    if (boundary.width > MAX_ALLOWED_WIDTH || boundary.height > MAX_ALLOWED_WIDTH) {\n        if (boundary.width > boundary.height) {\n            boundary.height = boundary.height * MAX_ALLOWED_WIDTH / boundary.width;\n            boundary.width = MAX_ALLOWED_WIDTH;\n        }\n        else {\n            boundary.width = boundary.width * MAX_ALLOWED_WIDTH / boundary.height;\n            boundary.height = MAX_ALLOWED_WIDTH;\n        }\n    }\n    /**\n     * 防止width，height崩溃\n     */\n    if (boundary.width === 0 || boundary.height === 0) {\n        boundary.width = 1000;\n        boundary.height = 1000;\n    }\n    if (LOG) {\n        console.log(`白板--> convert camera bound op: ${JSON.stringify(snapshotData)} -> ${JSON.stringify(boundary)}`);\n    }\n    return {\n        type: 'camera-bound',\n        boundary,\n        skipUndo: true,\n        animate: snapshotData.animate,\n        reuseOpType: 'camera-bound'\n    };\n};\nclass CameraBoundOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'camera-bound';\n        this.description = \"视角位置\";\n    }\n    eventsToListen() {\n        return {\n            'camera-bound:send': {\n                value: this.sendCameraBound.bind(this),\n                information: {\n                    args: 'boundary: {centerX: number, centerY: number, width: number, width: number}, animate: boolean',\n                    message: `发送当前用户的camera-bound，常用于主播同步自己的camera-bound`\n                }\n            }\n        };\n    }\n    sendCameraBound(boundary, animate) {\n        this.dispatch({\n            type: 'camera-bound',\n            boundary,\n            skipUndo: true,\n            animate,\n            reuseOpType: 'camera-bound'\n        });\n    }\n}\nexport default CameraBoundOp;\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","exports.f = {}.propertyIsEnumerable;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","/**\n * 不处于常规处理流程的快照类型，即该快照不会被撤销，重做，清空等等\n *\n * 主要包括ppt转码的图片，h5, video等等\n */\nexport const snapshotOutOfNormalFlowTypes = ['background', 'pan', 'zoom', 'mouse-pointer', 'select', 'laser', 'camera-bound'];\n/**\n * 会影响房间内所有白板的动作\n */\nexport const globalSnapshotTypes = ['camera-bound'];\nexport const cameraSnapshotTypes = ['pan', 'zoom', 'camera-bound', 'reset-camera', 'fit-to-content', 'fit-to-doc', 'resize-camera'];\n","module.exports = require(\"regenerator-runtime\");\n","exports.f = require('./_wks');\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/set\"), __esModule: true };","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","exports.f = Object.getOwnPropertySymbols;\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","import { getBoundaryBoxFromTwoPoints, getTransformedBoundary, rectCollide } from \"../misc/shapeHelper\";\n/**\n* 返回起始点到终点围成的矩形中的快照id数组\n*/\nexport const findOpsUnderRect = (points, drawOps) => {\n    if (points.length === 0)\n        return [];\n    const mouseBoundary = getBoundaryBoxFromTwoPoints(points[0], points[points.length - 1]);\n    const res = [];\n    for (let opId in drawOps) {\n        const snapshot = drawOps[opId];\n        if (snapshot.data.boundary && snapshotSelectable(snapshot)) {\n            const boundary = getTransformedBoundary(snapshot.data.boundary, snapshot.data.dx, snapshot.data.dy, snapshot.data.scaleX, snapshot.data.scaleY);\n            if (rectCollide(boundary, mouseBoundary)) {\n                res.push(opId);\n            }\n        }\n    }\n    return res;\n};\n/**\n * 返回在终点下面的快照id。仅返回一个就好了。否则相互重叠元素永远分不开\n */\nexport const findOpsUnderMouse = (points, drawOps, opsManager) => {\n    if (points.length === 0)\n        return [];\n    const mouseBoundary = getBoundaryBoxFromTwoPoints(points[0], points[points.length - 1]);\n    const [mx, my] = points[points.length - 1];\n    const opIds = Object.keys(drawOps);\n    for (let i = opIds.length - 1; i >= 0; i--) {\n        /**\n         * 最后画的元素最先进行判定\n         */\n        const snapshot = drawOps[opIds[i]];\n        const op = opsManager.opMap[snapshot.data.type];\n        if (snapshot.data.boundary && snapshotSelectable(snapshot)) {\n            const boundary = getTransformedBoundary(snapshot.data.boundary, snapshot.data.dx, snapshot.data.dy, snapshot.data.scaleX, snapshot.data.scaleY);\n            if (rectCollide(boundary, mouseBoundary)) {\n                if (op && 'ifMouseOnOp' in op) {\n                    //先检测矩阵是否碰撞，如果碰撞，再进一步检查鼠标是否再图形上\n                    if (op.ifMouseOnOp(snapshot, mx, my)) {\n                        return [opIds[i]];\n                    }\n                }\n                else {\n                    return [opIds[i]];\n                }\n            }\n        }\n    }\n    return [];\n};\nconst nonSelectableOpTypes = ['mouse-pointer', 'eraser'];\nexport const snapshotSelectable = (snapshot) => {\n    return !nonSelectableOpTypes.includes(snapshot.data.type) && !snapshot.data.locked;\n};\n/**\n * 判断数组是否变化\n * @param currIds\n * @param lastIds\n */\nexport const idsChanged = (currIds, lastIds) => {\n    if (currIds.length !== lastIds.length)\n        return true;\n    for (let id of currIds) {\n        if (lastIds.indexOf(id) === -1)\n            return true;\n    }\n    return false;\n};\n/**\n * 返回currIds - lastIds\n * @param currIds\n * @param lastIds\n */\nexport const arrayDeduce = (currIds, lastIds) => {\n    const res = [];\n    for (let id of currIds) {\n        if (lastIds.indexOf(id) === -1) {\n            res.push(id);\n        }\n    }\n    return res;\n};\n/**\n * Draws a rounded rectangle using the current state of the canvas.\n * If you omit the last three params, it will draw a rectangle\n * outline with a 5 pixel border radius\n * @param {CanvasRenderingContext2D} ctx\n * @param {Number} x The top left x coordinate\n * @param {Number} y The top left y coordinate\n * @param {Number} width The width of the rectangle\n * @param {Number} height The height of the rectangle\n * @param {Number} [radius = 5] The corner radius; It can also be an object\n *                 to specify different radii for corners\n * @param {Number} [radius.tl = 0] Top left\n * @param {Number} [radius.tr = 0] Top right\n * @param {Number} [radius.br = 0] Bottom right\n * @param {Number} [radius.bl = 0] Bottom left\n * @param {Boolean} [fill = false] Whether to fill the rectangle.\n * @param {Boolean} [stroke = true] Whether to stroke the rectangle.\n */\nexport const roundRect = (ctx, x, y, width, height, radius, type) => {\n    ctx.beginPath();\n    ctx.moveTo(x + radius, y);\n    ctx.lineTo(x + width - radius, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n    ctx.lineTo(x + width, y + height - radius);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n    ctx.lineTo(x + radius, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n    ctx.lineTo(x, y + radius);\n    ctx.quadraticCurveTo(x, y, x + radius, y);\n    ctx.closePath();\n    if (type === 'stroke') {\n        ctx.stroke();\n    }\n    else {\n        ctx.fill();\n    }\n};\nexport const drawUserName = (opt) => {\n    let { ctx, account, scale, px, py, bgColor, fontSize = 24, textPadding = 15, rectMarginBottom = 15, radius = 10 } = opt;\n    let rectHeight = (fontSize + 12) / scale;\n    textPadding = textPadding / scale;\n    rectMarginBottom = rectMarginBottom / scale;\n    fontSize = fontSize / scale;\n    radius = radius / scale;\n    let textFillColor = (bgColor === 'white' || bgColor === 'rgb(255,255,255)') ? 'black' : 'white';\n    ctx.beginPath();\n    ctx.font = `${fontSize}px Arial`;\n    const textWidth = ctx.measureText(account).width;\n    ctx.fillStyle = bgColor;\n    roundRect(ctx, px - textWidth / 2 - textPadding, py - rectMarginBottom - rectHeight, textWidth + textPadding * 2, rectHeight, radius, 'fill');\n    ctx.fillStyle = textFillColor;\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(account, px - textWidth / 2, py - rectMarginBottom - rectHeight / 2);\n};\n","export const shouldDispatch = (app) => {\n    const mode = app.vision.mode;\n    if (mode === 'broadcaster' || mode === 'freeObserver') {\n        return true;\n    }\n    else {\n        return false;\n    }\n};\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n","/**\n * debug 模块需要在浏览器的localstorage中，执行\n *  localstorage.Debug = \"*\"  -- 表明显示所有的debug. 可以在文件最下方，选择关闭哪些调试\n *\n *\n * 从这里创建一些共用的调试模块，\n * 大致分为有下面几类\n * - 鼠标相关事件\n * - 与服务器通信的事件比如收发包\n *  2.1 一个包从完整的接收到途径的过程\n *  2.2 对各种包的处理\n * - 模块\n * - 画板状态变更事件\n * - 画板的函数调用事件\n * - 具体的某个函数调用事件\n *\n * 模块内的调试在模块内创建\n */\nimport createDebug from 'debug';\nconst noop = () => { };\nconst logger = {\n    mouse: createDebug('mouse'),\n    h5: createDebug('h5'),\n    package: createDebug('package'),\n    shape: createDebug('shape'),\n    user: createDebug('user'),\n    command: createDebug('command'),\n    image: function (url, note = '') {\n        var image = new Image();\n        image.onload = function () {\n            var style = [\n                'font-size: 14px;',\n                'padding: ' + image.height / 2 + 'px ' + image.width / 2 + 'px;',\n                'background: url(' + url + ') no-repeat;',\n                'background-size: contain;'\n            ].join(' ');\n            console.log(note + '%c ', style);\n        };\n        image.src = url;\n    },\n    m: {\n        adapter: createDebug('adapter'),\n        worker: createDebug('worker'),\n        containermanager: createDebug('containermanager'),\n        shapemanager: createDebug('shapemanager'),\n        usermanager: createDebug('usermanager'),\n        syncmanager: createDebug('syncmanager'),\n    },\n    log: console.log.bind(console),\n    warn: console.warn.bind(console),\n    error: console.error.bind(console),\n};\n// 在这里替换掉原来的调试函数，控制哪些调试信息不输出\nif (!localStorage.getItem('debugMouse')) {\n    logger.mouse = noop;\n}\nexport default logger;\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","import { off, on } from \"../misc/dom-events\";\nimport { distSqrt } from \"../misc/shapeHelper\";\nexport const DPI = window.devicePixelRatio || 1;\nconsole.log(\"白板--> DPI\", DPI);\n//click不能超过100ms\nconst TIMER_THRESHOLD = 150;\n//超过5px的移动就不能被判定为click\nconst MOVE_THRESHOLD = 5;\nclass Container {\n    constructor(app) {\n        this.elInitW = 1920;\n        this.elInitH = 1080;\n        this.isLandscape = false;\n        this.elesToResize = [];\n        this.top = 0;\n        this.left = 0;\n        this.keyPressed = {};\n        /**\n         * 若不判定为click，则发送mousedown,mousemove[], mouseup事件\n         * 否则发送click事件\n         */\n        //怀疑本次操作是点击操作\n        this.maybeClick = false;\n        //怀疑本次操作是连续点击操作\n        //发射鼠标动作前，将动作存在这里\n        this.mouseEventCache = [];\n        this.isMouseDown = false;\n        this.sx = 0;\n        this.sy = 0;\n        this.lastMx = 0;\n        this.lastMy = 0;\n        this.lastClientX = 0;\n        this.lastClientY = 0;\n        this._resize = (event) => {\n            var _a;\n            const rect = this.el.getBoundingClientRect();\n            this.containerRect = rect;\n            if (this.app.ifDeviceSupportOrientation) {\n                //触摸屏横竖屏切换时，需要设置isLandscape\n                this.isLandscape = rect.width > rect.height;\n            }\n            for (let ele of this.elesToResize) {\n                if (ele instanceof HTMLCanvasElement) {\n                    ele.width = rect.width * DPI;\n                    ele.height = rect.height * DPI;\n                }\n                ele.style.width = `${rect.width}px`;\n                ele.style.height = `${rect.height}px`;\n            }\n            this.top = rect.top;\n            this.left = rect.left;\n            this.setElePosition(this.backgroundEl, 'fixed');\n            this.setElePosition(this.imageEl, 'fixed');\n            this.setElePosition(this.domEl, 'fixed');\n            this.setElePosition(this.textAreaEl, 'fixed');\n            //很不喜欢使用eventEmitter，但是不这样做不好解决text工具栏大小没动态更新的bug\n            this.dispatcher.emit('container:resize');\n            /**\n             * 必须设置canvas宽高后才能够设置lineCap, lineJoin\n             */\n            this.ctx.lineCap = 'round';\n            this.ctx.lineJoin = 'round';\n            this.frontCtx.lineCap = 'round';\n            this.frontCtx.lineJoin = 'round';\n            this.laserCtx.lineCap = 'round';\n            this.laserCtx.lineJoin = 'round';\n            /**\n             * 初始化时不要用resize发送camera-bound\n             */\n            if (event) {\n                (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.resize(event, rect.width, rect.height);\n            }\n        };\n        this.unbindEvents = () => {\n            var _a;\n            (_a = this._ro) === null || _a === void 0 ? void 0 : _a.disconnect();\n            window.removeEventListener('scroll', this._resize);\n            window.removeEventListener('resize', this._resize);\n            window.removeEventListener('orientationchange', this._resize);\n            off(this.el, 'mousedown', this._mousedown);\n            off(this.el, 'mouseleave', this._mouseleave);\n            off(window.document, 'mousemove', this._mousemove);\n            off(window.document, 'mouseup', this._mouseup);\n            off(window.document, 'mousewheel', this._mousewheel);\n            off(this.el, 'touchstart', this._mousedown);\n            off(this.el, 'touchmove', this._mousemove);\n            off(this.el, 'touchend', this._mouseup);\n            off(window.document, 'keyup', this._keyup);\n            off(window.document, 'keydown', this._keydown);\n            off(document.body, 'contextmenu', this._contextmenu);\n        };\n        this.getEventClientPos = (event) => {\n            let clientX;\n            let clientY;\n            if (event instanceof MouseEvent) {\n                clientX = event.clientX;\n                clientY = event.clientY;\n            }\n            else {\n                clientX = event.touches[0].clientX;\n                clientY = event.touches[0].clientY;\n            }\n            //减去canvas到browser左上角的差值\n            clientX = clientX - this.left;\n            clientY = clientY - this.top;\n            //前两个是在世界坐标系\n            //后两个是在canvas上的位置\n            return [...this.app.camera.convertToPointInWorld(clientX, clientY), clientX, clientY];\n        };\n        this._contextmenu = (event) => {\n            event.preventDefault();\n        };\n        this._mousedown = (event) => {\n            if (this.isMouseDown) {\n                //忽略暴力测试下的连续mousedown操作\n                return;\n            }\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            this.lastMx = mx;\n            this.lastMy = my;\n            this.lastClientX = clientX;\n            this.lastClientY = clientY;\n            this.isMouseDown = true;\n            //怀疑可能是点击操作\n            this.maybeClick = true;\n            this.sx = mx;\n            this.sy = my;\n            this.mouseEventCache.push({\n                type: 'mousedown',\n                args: [event, this.sx, this.sy, clientX, clientY]\n            });\n            this.mouseEmitTimer = setTimeout(() => {\n                //时间过长，不是点击操作\n                this.maybeClick = false;\n                this._emitMouseEvents();\n            }, TIMER_THRESHOLD);\n        };\n        this._mousemove = (event) => {\n            var _a;\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            this.lastMx = mx;\n            this.lastMy = my;\n            this.lastClientX = clientX;\n            this.lastClientY = clientY;\n            if (this.maybeClick) {\n                //如果鼠标移动过多，则不是点击操作\n                this.maybeClick = distSqrt([mx, my], [this.sx, this.sy]) <= MOVE_THRESHOLD;\n            }\n            if (!this.maybeClick) {\n                /**\n                 * 确定不是点击操作，直接发送鼠标移动事件，以及之前缓存的鼠标动作\n                 */\n                if (this.mouseEmitTimer) {\n                    this.mouseEmitTimer = clearTimeout(this.mouseEmitTimer);\n                    this._emitMouseEvents();\n                }\n                (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mousemove(event, mx, my, clientX, clientY);\n            }\n            else {\n                /**\n                 * 不确定是不是点击操作，先将动作存放起来\n                 */\n                this.mouseEventCache.push({\n                    type: 'mousemove',\n                    args: [event, mx, my, clientX, clientY]\n                });\n            }\n        };\n        this._mouseup = (event) => {\n            var _a, _b;\n            const [mx, my, clientX, clientY] = [this.lastMx, this.lastMy, this.lastClientX, this.lastClientY];\n            if (!this.maybeClick) {\n                //确定不是点击操作，将之前缓存的操作，以及本次mouseup发送出去\n                if (this.mouseEmitTimer) {\n                    this.mouseEmitTimer = clearTimeout(this.mouseEmitTimer);\n                    this._emitMouseEvents();\n                }\n                this.mouseEventCache = [];\n                (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mouseup(event, mx, my, clientX, clientY);\n            }\n            else {\n                //是点击操作，不用发送down，up以及move\n                this.mouseEmitTimer = clearTimeout(this.mouseEmitTimer);\n                this.mouseEventCache = [];\n                this.maybeClick = false;\n                //发送点击操作\n                (_b = this.opsManager) === null || _b === void 0 ? void 0 : _b.click(event, mx, my, clientX, clientY);\n            }\n            this.isMouseDown = false;\n        };\n        this._mouseleave = (event) => {\n            var _a;\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mouseleave(event, mx, my, clientX, clientY);\n        };\n        this._mousewheel = (event) => {\n            var _a;\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mousewheel(event, mx, my, clientX, clientY);\n        };\n        //处理完事件后，再将key状态置为松开\n        this._keyup = (event) => {\n            var _a;\n            const key = event.key.toLocaleLowerCase();\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.keyup(event);\n            this.keyPressed[key] = false;\n        };\n        this._keydown = (event) => {\n            var _a;\n            const key = event.key.toLocaleLowerCase();\n            this.keyPressed[key] = true;\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.keydown(event);\n        };\n        this.app = app;\n        this.dispatcher = app.dispatcher;\n        this.el = document.createElement('div');\n        this.el.style.position = 'relative';\n        this.el.style.width = '100%';\n        this.el.style.height = '100%';\n        this.setBackgroundColor();\n        this.backgroundEl = this.setupDivElement('bg-el');\n        this.imageEl = this.setupDivElement('image-el');\n        let temp = this.setupCanvasElement('bg-canvas');\n        this.canvas = temp.canvas;\n        this.ctx = temp.ctx;\n        temp = this.setupCanvasElement('front-canvas');\n        this.frontCanvas = temp.canvas;\n        this.frontCtx = temp.ctx;\n        this.domEl = this.setupDivElement('dom-el');\n        this.textAreaEl = this.setupDivElement('toolbar-el');\n        temp = this.setupCanvasElement('laser-canvas');\n        this.laserCanvas = temp.canvas;\n        this.laserCtx = temp.ctx;\n    }\n    /**\n     * config变动时，需要调用此函数修改背景色\n     */\n    setBackgroundColor() {\n        this.el.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n    }\n    appendTo(container) {\n        container.appendChild(this.el);\n        this._resize();\n        this.dispatcher.emit('container:set');\n        this._bindEvents(container);\n    }\n    addOpsManager(opsManager) {\n        this.opsManager = opsManager;\n    }\n    isKeyDown(key) {\n        return this.keyPressed.hasOwnProperty(key) && this.keyPressed[key];\n    }\n    /**\n     * 测试鼠标在container或者其子元素上面\n     * @param div\n     */\n    isTargetOnContainer(div) {\n        var _a;\n        return div === this.el || (div === null || div === void 0 ? void 0 : div.parentNode) === this.el || ((_a = div === null || div === void 0 ? void 0 : div.parentNode) === null || _a === void 0 ? void 0 : _a.parentNode) === this.el;\n    }\n    setupDivElement(className) {\n        const ele = document.createElement('div');\n        ele.style.transformOrigin = 'left top';\n        ele.className = className;\n        this.el.appendChild(ele);\n        return ele;\n    }\n    setupCanvasElement(className) {\n        const ele = document.createElement('canvas');\n        this.setElePosition(ele);\n        ele.className = className;\n        ele.style.pointerEvents = 'none';\n        const ctx = ele.getContext('2d');\n        this.el.appendChild(ele);\n        this.elesToResize.push(ele);\n        return { canvas: ele, ctx };\n    }\n    _bindEvents(parentContainer) {\n        var _a;\n        this.unbindEvents();\n        this._ro = new MutationObserver((mutationList, observer) => {\n            this._resize(true);\n        });\n        (_a = this._ro) === null || _a === void 0 ? void 0 : _a.observe(parentContainer, {\n            attributes: true,\n            attributeFilter: ['style'],\n        });\n        window.addEventListener('scroll', this._resize);\n        window.addEventListener('resize', this._resize);\n        window.addEventListener(\"orientationchange\", this._resize);\n        on(this.el, 'mousedown', this._mousedown);\n        on(this.el, 'mouseleave', this._mouseleave);\n        on(window.document, 'mousemove', this._mousemove);\n        on(window.document, 'mouseup', this._mouseup);\n        on(window.document, 'mousewheel', this._mousewheel);\n        on(this.el, 'touchstart', this._mousedown);\n        on(this.el, 'touchmove', this._mousemove);\n        on(this.el, 'touchend', this._mouseup);\n        on(window.document, 'keyup', this._keyup);\n        on(window.document, 'keydown', this._keydown);\n        on(document.body, 'contextmenu', this._contextmenu);\n    }\n    destroy() {\n        this.unbindEvents();\n    }\n    get width() {\n        if (this.containerRect) {\n            return this.containerRect.width;\n        }\n        else {\n            return this.canvas.width;\n        }\n    }\n    get height() {\n        if (this.containerRect) {\n            return this.containerRect.height;\n        }\n        else {\n            return this.canvas.height;\n        }\n    }\n    setElePosition(ele, position = 'absolute') {\n        if (position === 'absolute') {\n            ele.style.position = position;\n            ele.style.left = '0px';\n            ele.style.right = '0px';\n            ele.style.top = '0px';\n            ele.style.bottom = '0px';\n        }\n        else {\n            /**\n             * 若textarea编辑时，文本超出屏幕宽度，即使body的overflow为hidden，\n             * 依旧会导致body向右侧scroll。\n             *\n             * 此时，将textarea的任意一个祖先元素设置为fixed，就能够解决该问题。\n             *\n             * 但是，如果除了fixed祖先元素之外，还有其他祖先元素带有transform属性，依然\n             * 会有上述问题。\n             *\n             * 如果将带有transform属性的祖先元素带有fixed属性，该问题就能被解决。\n             *\n             * 综上，将带有transform属性的textarea的祖先元素设置为fixed，能解决textarea\n             * 编辑时导致页面横移的缺陷。\n             */\n            ele.style.position = 'fixed';\n            ele.style.left = `${this.left}px`;\n            ele.style.width = `${this.width}px`;\n            ele.style.top = `${this.top}px`;\n            ele.style.height = `${this.height}px`;\n        }\n    }\n    /**\n     * 确定不是点击事件后，发送之前缓存的事件\n     */\n    _emitMouseEvents() {\n        for (let eventArg of this.mouseEventCache) {\n            this.opsManager[eventArg.type](...eventArg.args);\n        }\n        this.mouseEventCache = [];\n    }\n}\nexport default Container;\n","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","import { max, min } from \"../../misc/util\";\nimport Operation from \"../Operation\";\nimport drawConfig from \"./drawConfig\";\nclass MouseMoveDrawOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = '';\n        /**\n         * 是否需要清洗ep。使其距离sp的x，y距离至少为1。对于矩形来说，必须sanite ep，否则矩形会退化为线段或者点\n         */\n        this.shouldSaniteEp = false;\n        this.movedDuringMouseDown = false;\n        this.points = [];\n        /**\n         * 连续动作只用采一半的点即可。用sampleSeq记录mousemove的序列号\n         */\n        this.sampleSeq = 0;\n    }\n    get lineWidth() {\n        return Number(drawConfig.strokeWidth);\n    }\n    get opacity() {\n        return Number(drawConfig.opacity);\n    }\n    get color() {\n        return drawConfig.strokeColor;\n    }\n    get sp() {\n        return this.points[0];\n    }\n    get ep() {\n        let point = this.points[this.points.length - 1];\n        if (this.shouldSaniteEp) {\n            point = this.sanityEp(point);\n        }\n        return point;\n    }\n    registerHooks() {\n        this.opsManager.hooks.pageChange.tap('PageChange', this.handlePageChange.bind(this));\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    handlePageChange() {\n        this.beginBatch();\n        this.sampleSeq = 0;\n        this.points = [];\n        this.movedDuringMouseDown = false;\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.isMouseDown || this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = `url(${require('../../../assets/cursors/pen.svg')}) -1 17, auto`;\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n        if (this.isMouseDown) {\n            this.movedDuringMouseDown = true;\n            mx = Number(mx.toFixed(1));\n            my = Number(my.toFixed(1));\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot(true));\n            this.sampleSeq += 1;\n        }\n    }\n    handleMouseDown(event, mx, my) {\n        this.beginBatch();\n        mx = Number(mx.toFixed(1));\n        my = Number(my.toFixed(1));\n        this.points = [[mx, my]];\n        this.movedDuringMouseDown = false;\n        this.sampleSeq = 0;\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown && this.movedDuringMouseDown) {\n            mx = Number(mx.toFixed(1));\n            my = Number(my.toFixed(1));\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot(false));\n            this.points = [];\n        }\n    }\n    getTwoPointShapeCommonProperty(opt) {\n        let obj = {\n            type: this.type,\n            boundary: this.getBoundaryRectOfLine(),\n            sp: this.sp,\n            ep: this.ep,\n            lineWidth: this.lineWidth,\n            inProgress: opt.inProgress,\n            opacity: this.opacity\n        };\n        if (opt.strokeOrFill === 'stroke') {\n            obj.stroke = this.color;\n        }\n        else if (opt.strokeOrFill === 'fill') {\n            obj.fill = this.color;\n        }\n        else {\n            obj.color = this.color;\n        }\n        return obj;\n    }\n    getFreeDrawCommonProperty(opt) {\n        let obj = {\n            type: this.type,\n            boundary: this.getBoundaryRectOfFreeDraw(),\n            lineWidth: this.lineWidth,\n            inProgress: opt.inProgress,\n            opacity: this.opacity\n        };\n        obj.color = this.color;\n        return obj;\n    }\n    getBoundaryRectOfFreeDraw() {\n        const points = this.points;\n        if (points.length === 0) {\n            throw new Error('涂鸦没有记录任何数据');\n        }\n        else {\n            let sx = points[0][0];\n            let sy = points[0][1];\n            let ex = sx;\n            let ey = sy;\n            for (let point of points) {\n                sx = min(point[0], sx);\n                sy = min(point[1], sy);\n                ex = max(point[0], ex);\n                ey = max(point[1], ey);\n            }\n            return {\n                sx,\n                sy,\n                w: ex - sx,\n                h: ey - sy\n            };\n        }\n    }\n    getBoundaryRectOfLine() {\n        let sx = min(this.sp[0], this.ep[0]);\n        let sy = min(this.sp[1], this.ep[1]);\n        let ex = max(this.sp[0], this.ep[0]);\n        let ey = max(this.sp[1], this.ep[1]);\n        return {\n            sx: sx,\n            sy: sy,\n            w: ex - sx,\n            h: ey - sy\n        };\n    }\n    strokeOrFill(ctx, opt) {\n        ctx.save();\n        ctx.lineWidth = opt.lineWidth;\n        if (opt.opacity) {\n            ctx.globalAlpha = Number(opt.opacity);\n        }\n        if (opt.stroke) {\n            ctx.strokeStyle = opt.stroke;\n            ctx.stroke();\n        }\n        else if (opt.fill) {\n            ctx.fillStyle = opt.fill;\n            ctx.fill();\n        }\n        ctx.restore();\n    }\n    /**\n     * 控制rect最小宽高为1\n     * @param ep\n     */\n    sanityEp(ep) {\n        if (ep[0] - this.sp[0] >= 0 && ep[0] - this.sp[0] < 1) {\n            ep[0] = this.sp[0] + 1;\n        }\n        if (ep[1] - this.sp[1] >= 0 && ep[1] - this.sp[1] < 1) {\n            ep[1] = this.sp[1] + 1;\n        }\n        return ep;\n    }\n}\nexport default MouseMoveDrawOp;\n","/**\n * 选择操作。支持区域选中\n *\n * 如果已经选中一些对象，然后点击选中的区域进行拖拽，此时不会产生新的选择操作，否则选中元素的包含盒无法显示\n */\nimport { combineBoundary, getBoundaryBoxFromTwoPoints, getTransformedBoundary } from \"../../misc/shapeHelper\";\nimport SelectBase from \"./SelectBase\";\nimport drawConfig from \"../DrawOp/drawConfig\";\nimport { drawUserName } from \"../util\";\nclass SelectOp extends SelectBase {\n    constructor() {\n        super(...arguments);\n        this.type = 'select';\n        this.lineWidth = 0;\n        this.fillColor = 'rgba(230, 100, 100, 0.4)';\n        this.eleContainerColor = 'rgb(0, 0, 0)';\n        this.eleContainerWidth = 2;\n        this.eleContainerPadding = 3;\n        this.activate = false;\n        this.selectedOpIds = [];\n        this.inProgressSelectedOpIds = [];\n        this.description = \"选择操作工具。\\n首先使用op:select:activate设置画布为选择模式。\" +\n            \"通过。然后画布会监听鼠标动作，生成选择框。具体用法如下：\";\n    }\n    getSelectedIds() {\n        return this.selectedOpIds.slice();\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n            'select:width': {\n                value: this.setLineWidth.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置选择框线段宽度`\n                }\n            },\n            'select:fill:color': {\n                value: this.setFillColor.bind(this),\n                information: {\n                    args: 'color: ColorString',\n                    message: `设置选择框填充色`\n                }\n            },\n            'select:stroke:color': {\n                value: this.setStrokeColor.bind(this),\n                information: {\n                    args: 'color: ColorString',\n                    message: `设置选择框填充色`\n                }\n            },\n            'select:eleContainer:color': {\n                value: this.setEleContainerColor.bind(this),\n                information: {\n                    args: 'color: ColorString',\n                    message: `设置被选中元素包含盒颜色`\n                }\n            },\n            'select:eleContainer:width': {\n                value: this.setEleContainerWidth.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置被选中元素包含盒线段宽度`\n                }\n            },\n            'select:eleContainerPadding': {\n                value: this.setEleContainerPadding.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置被选中元素包含盒的padding`\n                }\n            },\n        };\n    }\n    registerHooks() {\n        this.opsManager.hooks.opChange.tap('OpChange', this.handleOpChange.bind(this));\n        this.opsManager.hooks.pageChange.tap('pageChange', this.handlePageChange.bind(this));\n    }\n    /**\n     * 页面变化时，先清空选择的元素，否则可能会造成元素找不到的缺陷\n     */\n    handlePageChange(snapshot) {\n        if (snapshot.uid === this.app.account && this.selectedOpIds.length > 0) {\n            //当page change是由当前用户操作引起的，清空select元素\n            //如果没有该判断，每个可编辑用户都会发送该快照\n            this.dispatch(this.getSnapshot([]));\n        }\n    }\n    /**\n     * 当操作类型变化时，清空选择的元素\n     */\n    handleOpChange(newType) {\n        var _a;\n        if (newType !== 'select' && ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'select') {\n            this.dispatch(this.getSnapshot([]));\n        }\n        this.beginBatch();\n    }\n    postMouseUp(idsBeenSelected) {\n        this.dispatch(this.getSnapshot(idsBeenSelected));\n        this.lastSelectedOpIds = idsBeenSelected;\n    }\n    postClick(idsBeenSelected) {\n        if (idsBeenSelected.length === 0) {\n            const curr = (new Date()).valueOf();\n            if (curr - this.opsManager.opMap['text'].blurAt < 100) {\n                //点击发生在失焦之后，忽略这次点击\n                return;\n            }\n        }\n        this.dispatch(this.getSnapshot(idsBeenSelected));\n    }\n    /**\n     * 选择操作可能是个连续的过程\n     * 连续过程中产生的快照在selectbase中被处理了。\n     * getSnapshot产生的是连续过程结束时产生的快照\n     * @param idsBeenSelected\n     */\n    getSnapshot(idsBeenSelected) {\n        return {\n            type: 'select',\n            sp: this.sp,\n            ep: this.ep,\n            inProgress: false,\n            selectedOpIds: idsBeenSelected.slice(),\n            reuseOpType: 'select',\n            skipUndo: true,\n            color: drawConfig.strokeColor,\n            nickname: this.app.nickname\n        };\n    }\n    draw(snapshot, ctx) {\n        // log('draw', snapshot)\n        const color = snapshot.data.color ? snapshot.data.color : 'rgb(0,0,0)';\n        this.drawSelectBox(snapshot, ctx);\n        const boundaryArr = this.drawSelectedElementBox(snapshot, ctx, color);\n        if (!snapshot.data.inProgress\n            && snapshot.uid !== this.app.account\n            && Array.isArray(boundaryArr)\n            && boundaryArr.length === 1) {\n            const px = boundaryArr[0].sx + boundaryArr[0].w / 2;\n            const py = boundaryArr[0].sy;\n            if (!this.app.appConfig.showSelectNickname)\n                return;\n            drawUserName({\n                ctx,\n                account: snapshot.data.nickname ? snapshot.data.nickname : snapshot.uid,\n                scale: this.app.camera.scale,\n                px,\n                py,\n                bgColor: color,\n                fontSize: 16,\n                textPadding: 8,\n                radius: 6\n            });\n        }\n    }\n    /**\n     * 绘制选择框\n     */\n    drawSelectBox(snapshot, ctx) {\n        const data = snapshot.data;\n        let sp;\n        let ep;\n        if (Array.isArray(data.points) && data.points.length >= 2) {\n            sp = data.points[0];\n            ep = data.points[data.points.length - 1];\n        }\n        else if (data.sp && data.ep) {\n            if (data.sp[0] !== data.ep[0] || data.sp[1] !== data.ep[1]) {\n                sp = data.sp;\n                ep = data.ep;\n            }\n        }\n        if (data.inProgress && sp && ep) {\n            const { sx, sy, w, h } = getBoundaryBoxFromTwoPoints(sp, ep);\n            ctx.beginPath();\n            if (this.strokeColor && this.lineWidth) {\n                ctx.strokeStyle = this.strokeColor;\n                ctx.lineWidth = this.lineWidth;\n                ctx.strokeRect(sx, sy, w, h);\n            }\n            if (this.fillColor) {\n                ctx.fillStyle = this.fillColor;\n                ctx.fillRect(sx, sy, w, h);\n            }\n        }\n    }\n    /**\n     * 绘制选中元素的包含盒\n     * @param snapshot\n     * @param ctx\n     * @param div\n     */\n    drawSelectedElementBox(snapshot, ctx, color) {\n        const data = snapshot.data;\n        const selectedOpIds = data.selectedOpIds.filter(opId => this.drawOpsOfPage[opId]);\n        const padding = this.eleContainerPadding;\n        if (selectedOpIds.length === 0)\n            return;\n        let boundaryArr = selectedOpIds.map(id => {\n            const op = this.drawOpsOfPage[id];\n            return getTransformedBoundary(op.data.boundary, op.data.dx, op.data.dy, op.data.scaleX, op.data.scaleY);\n        });\n        /**\n         * 若已经松开，则只绘制整体的包含盒\n         */\n        if (!data.inProgress) {\n            boundaryArr = [boundaryArr.reduce((b1, b2) => {\n                    return combineBoundary(b1, b2);\n                })];\n        }\n        //绘制包含盒\n        ctx.strokeStyle = color;\n        ctx.fillStyle = color;\n        ctx.lineWidth = this.eleContainerWidth;\n        const dotSize = 5 / this.app.camera.scale;\n        for (let boundary of boundaryArr) {\n            ctx.beginPath();\n            ctx.strokeRect(boundary.sx - padding, boundary.sy - padding, boundary.w + padding * 2, boundary.h + padding * 2);\n            //点击包含盒上四个角上的点拉伸图形\n            if (!data.inProgress && this.opsManager.currOp instanceof SelectOp) {\n                ctx.fillRect(boundary.sx - padding - dotSize / 2, boundary.sy - padding - dotSize / 2, dotSize, dotSize);\n                ctx.fillRect(boundary.sx + boundary.w + padding - dotSize / 2, boundary.sy + boundary.h + padding - dotSize / 2, dotSize, dotSize);\n                ctx.fillRect(boundary.sx + boundary.w + padding - dotSize / 2, boundary.sy - padding - dotSize / 2, dotSize, dotSize);\n                ctx.fillRect(boundary.sx - padding - dotSize / 2, boundary.sy + boundary.h + padding - dotSize / 2, dotSize, dotSize);\n            }\n        }\n        return boundaryArr;\n    }\n    setSelectedOpIds(ids) {\n        if (this.selectedOpIds.join(',') !== ids.join(',')) {\n            this.emit('event:appState:change', 'selectChange', this.selectedOpIds.slice(), ids.slice());\n            this.opsManager.hooks.selectChange.call(this.selectedOpIds.slice(), ids.slice());\n            this.selectedOpIds = ids;\n            this.dispatch(this.getSnapshot(ids.slice()));\n        }\n    }\n    setInProgressSelectedOpIds(ids) {\n        this.inProgressSelectedOpIds = ids.slice();\n    }\n    setLineWidth(width) {\n        this.lineWidth = width;\n    }\n    setFillColor(color) {\n        this.fillColor = color;\n    }\n    setStrokeColor(color) {\n        this.strokeColor = color;\n    }\n    setEleContainerColor(color) {\n        this.eleContainerColor = color;\n    }\n    setEleContainerWidth(width) {\n        this.eleContainerWidth = width;\n    }\n    setEleContainerPadding(padding) {\n        this.eleContainerPadding = padding;\n    }\n}\nexport default SelectOp;\n","export const DEFAULT_FONTSIZE = 32;\n//之所以设计为类，是想要创建多个DrawPlugin实例时，各个实例之间的配置支持相互独立\nclass AppConfig {\n    constructor(app) {\n        this.setAppConfig = (partialConfig) => {\n            var _a;\n            if (Object.keys(partialConfig).length === 0) {\n                console.error('白板-->', '调用了setAppConfig, 但传入的参数为空', partialConfig);\n            }\n            else {\n                for (let key in partialConfig) {\n                    if (!this.config.hasOwnProperty(key)) {\n                        console.error('白板-->', `setAppConfig传入的参数键值${key}不是有效的配置项`);\n                        console.error('白板-->', `目前支持的配置项有：${Object.keys(this.config)}`);\n                    }\n                    else if (key === 'canvas_bg_color') {\n                        //设置背景色\n                        this.config.canvas_bg_color = partialConfig.canvas_bg_color;\n                        this.app.container.setBackgroundColor();\n                        (_a = this.app.previewFactory) === null || _a === void 0 ? void 0 : _a.setBackgroundColor();\n                    }\n                    else {\n                        this.config[key] = partialConfig[key];\n                    }\n                }\n            }\n            Object.assign(this.config, partialConfig);\n        };\n        this.getAppConfig = () => {\n            return this.config;\n        };\n        this.app = app;\n        this.config = {\n            canvas_bg_color: '#f5f5f7',\n            showCursorNickname: true,\n            showSelectNickname: true,\n            showLaserNickname: true,\n            cameraTransformEnabled: true\n        };\n    }\n}\nexport default AppConfig;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","module.exports = require('./_hide');\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar meta = require('./_meta');\nvar fails = require('./_fails');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar setToStringTag = require('./_set-to-string-tag');\nvar dP = require('./_object-dp').f;\nvar each = require('./_array-methods')(0);\nvar DESCRIPTORS = require('./_descriptors');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","export const PlatformArray = ['android', 'ios', 'pc', 'mac', 'pad', 'web'];\nexport const TouchPlatformArray = ['android', 'ios', 'pad'];\n","export const CustomFontName = \"WhiteBoardFont\";\nconst ValidTypes = ['embedded-opentype', 'woff', 'truetype', 'svg', 'opentype', 'woff2'];\nclass TextConfig {\n    constructor() {\n        this.fontFamily = '';\n        this.fontFaceSet = false;\n    }\n    getFontFamily() {\n        if (this.fontFamily && this.fontFaceSet) {\n            return `\"${this.fontFamily}\", \"${CustomFontName}\"`;\n        }\n        else if (this.fontFamily) {\n            return this.fontFamily;\n        }\n        else if (this.fontFaceSet) {\n            return CustomFontName;\n        }\n        else {\n            return 'Helvetica';\n        }\n    }\n    setFontFamily(fontFamily) {\n        this.fontFamily = fontFamily;\n    }\n    setFontFace(fontFace) {\n        this.fontFaceSet = true;\n        const fontFaceStr = fontFace.map(opt => {\n            if (opt.format && !ValidTypes.includes(opt.format)) {\n                console.error(`字体format应该为以下值中的一个: ${ValidTypes.join(',')}, 或者不设置format`);\n                return `url(\"${opt.url}\")`;\n            }\n            else if (opt.format) {\n                return `url(\"${opt.url}\") format(\"${opt.format}\")`;\n            }\n            else {\n                return `url(\"${opt.url}\")`;\n            }\n        }).join(',\\n');\n        const newStyle = document.createElement('style');\n        newStyle.setAttribute('type', 'text/css');\n        newStyle.appendChild(document.createTextNode(`\n@font-face {\n    font-family: \"${CustomFontName}\";\n    src: ${fontFaceStr};\n}\n`));\n        document.head.appendChild(newStyle);\n    }\n}\nconst textConfig = new TextConfig();\nexport default textConfig;\n","import { fetchResource, getResource, resourceLoaded } from \"../../resource/resourceCache\";\nexport const addImage = (op, url, opts) => {\n    const currBoard = op.app.room.currBoard;\n    let currPage = op.opsManager.currPage;\n    if (opts && opts.hasOwnProperty('pageIndex')) {\n        const pageName = currBoard.pageNames[opts.pageIndex];\n        if (currBoard.pages.hasOwnProperty(pageName)) {\n            currPage = currBoard.pages[pageName];\n        }\n    }\n    if (resourceLoaded(url)) {\n        const img = getResource(url);\n        const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : img.width;\n        const height = (opts === null || opts === void 0 ? void 0 : opts.height) ? opts.height : img.height;\n        op.dispatchImage(url, width, height, currPage);\n    }\n    else if ((opts === null || opts === void 0 ? void 0 : opts.width) && (opts === null || opts === void 0 ? void 0 : opts.height)) {\n        op.dispatchImage(url, opts === null || opts === void 0 ? void 0 : opts.width, opts === null || opts === void 0 ? void 0 : opts.height, currPage);\n    }\n    else {\n        //TODO: 这里是错误的。dispatch调用时连接的boardIndex和pageIndex和addImage调用时不一样了。\n        currPage.addWaitingResource(url);\n        fetchResource(url, (img) => {\n            const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : img.width;\n            const height = (opts === null || opts === void 0 ? void 0 : opts.height) ? opts.height : img.height;\n            op.dispatchImage(url, width, height, currPage);\n            currPage.removeWaitingResource(url);\n        });\n    }\n};\n/**\n * TODO：可能存在问题。初始化时，会同步房间的信息。目前的写法是接收每个快照时都会refresh一次。这可能会导致多个页面的图片不断被删除，再创建。\n * 从用户角度看，会有明显的闪烁效果。\n * @param ctx\n * @param url\n * @param boundary\n * @param opts\n */\nexport const draw = (ctx, url, boundary, opts) => {\n    /**\n     * page是该图片的容器页面。this.opsManager.currPage是当前打开的页面。\n     * 生成预览图时，currPage和图片的容器页面不是同一个页面\n     */\n    let { page, div, preview, id, supportToDataUrl } = opts;\n    if (resourceLoaded(url) && !preview && div && id) {\n        let image = div.querySelector(`[id='image-${id}']`);\n        if (!image) {\n            if (opts.type === 'background') {\n                /**\n                 * 背景图片的URL不会在同一page中出现两次，因此不需要cloneNode\n                 */\n                image = getResource(url);\n            }\n            else {\n                image = getResource(url).cloneNode(true);\n            }\n            image.id = `image-${id}`;\n            image.style.userSelect = 'none';\n            image.style.pointerEvents = 'none';\n            image.style.position = 'absolute';\n            image.style.imageRendering = '-webkit-optimize-contrast';\n            div.appendChild(image);\n        }\n        image.width = boundary.w;\n        image.height = boundary.h;\n        image.style.left = `${boundary.sx}px`;\n        image.style.top = `${boundary.sy}px`;\n        const pxOverBorder = getImagePartOutOfContainer(boundary, opts.page.app.camera);\n        if (pxOverBorder) {\n            image.style.clipPath = `inset(${pxOverBorder.top}px ${pxOverBorder.right}px ${pxOverBorder.bottom}px ${pxOverBorder.left}px)`;\n        }\n        else {\n            image.style.clipPath = 'none';\n        }\n    }\n    else if (supportToDataUrl && resourceLoaded(url)) {\n        ctx.drawImage(getResource(url, true), boundary.sx, boundary.sy, boundary.w, boundary.h);\n    }\n    else if (!supportToDataUrl && resourceLoaded(url)) {\n        ctx.drawImage(getResource(url, false), boundary.sx, boundary.sy, boundary.w, boundary.h);\n    }\n    else if (resourceLoaded('imageLoading')) {\n        /**\n         * 图片还未下载下来时，先用图片正在加载中代替\n         */\n        ctx.drawImage(getResource('imageLoading'), boundary.sx + 5, boundary.sy + 5, Math.max(0, boundary.w - 10), Math.max(0, boundary.h - 10));\n    }\n    if (!resourceLoaded(url)) {\n        //回调函数中必须用变量currPage，而不是this.opsManager.currPage，否则被调用时引用的page可能不对\n        page.addWaitingResource(url);\n        fetchResource(url, () => {\n            page.removeWaitingResource(url);\n        });\n    }\n};\n/**\n * 返回图片boundary在container之外的部分。在container外面的部分要用clippath隐藏\n * @param boundary\n */\nconst getImagePartOutOfContainer = (boundary, camera) => {\n    const { sx, sy, w, h } = boundary;\n    const ex = sx + w;\n    const ey = sy + h;\n    const screenBound = camera.getContainerWorldRect();\n    const left = Math.max(0, screenBound.centerX - screenBound.width / 2 - sx); //screen左侧 - boundary左侧\n    const right = Math.max(0, ex - (screenBound.centerX + screenBound.width / 2)); //boundary右侧 - screen右侧\n    const top = Math.max(0, screenBound.centerY - screenBound.height / 2 - sy); //screen顶部 - boundary顶部\n    const bottom = Math.max(0, ey - (screenBound.centerY + screenBound.height / 2)); //boundary底部 - screen底部\n    if (left > 0 || right > 0 || top > 0 || bottom > 0) {\n        return {\n            left, right, top, bottom\n        };\n    }\n    else {\n        return null;\n    }\n};\n/**\n * 根据图片的宽高，容器的宽高，获得图片合适的宽高，及位置。\n *\n * 合适的宽高，位置应该使图片不被遮挡的情况下尽可能大，同时不超过图片本身的尺寸\n *\n * ImageOp的宽高在addImage时确定，所有用户那里ImageOp和其他快照的相对位置固定（不随容器宽高resize而变化）\n * BackgroundOp的宽高在draw时确定，图片位置总是相对于容器的最佳位置\n *\n * width, height可能是图片的固有宽高，用户也可以在上传图片时指定图片的初始宽高\n */\nexport const getImageProperPosition = (op, width, height) => {\n    const sanityWidth = op.app.container.width;\n    const sanityHeight = op.app.container.height;\n    const MAX_ALLOWED_WIDTH = sanityWidth;\n    const MAX_ALLOWED_HEIGHT = sanityHeight;\n    if (width > MAX_ALLOWED_WIDTH && height < MAX_ALLOWED_HEIGHT) {\n        height = height * MAX_ALLOWED_WIDTH / width;\n        width = MAX_ALLOWED_WIDTH;\n    }\n    else if (width < MAX_ALLOWED_WIDTH && height > MAX_ALLOWED_HEIGHT) {\n        width = width * MAX_ALLOWED_HEIGHT / height;\n        height = MAX_ALLOWED_HEIGHT;\n    }\n    else if (width > MAX_ALLOWED_WIDTH && height > MAX_ALLOWED_HEIGHT) {\n        if (width / height > MAX_ALLOWED_WIDTH / MAX_ALLOWED_HEIGHT) {\n            height = height * MAX_ALLOWED_WIDTH / width;\n            width = MAX_ALLOWED_WIDTH;\n        }\n        else {\n            width = width * MAX_ALLOWED_HEIGHT / height;\n            height = MAX_ALLOWED_HEIGHT;\n        }\n    }\n    width = width / op.app.camera.scale;\n    height = height / op.app.camera.scale;\n    let sx = op.app.camera.centerX - width / 2;\n    let sy = op.app.camera.centerY - height / 2;\n    return {\n        sx, sy, width, height\n    };\n};\n/**\n * 背景图应该是100%位置的时，大概撑满页面\n * @param op\n * @param width\n * @param height\n */\nexport const getBackgroundImagePorperPosition = (op, width, height) => {\n    let sx = -width / 2;\n    let sy = -height / 2;\n    return {\n        sx, sy, width, height\n    };\n};\n","import loadingUrl from '../../assets/image/imageIsLoading.svg';\nconst resourceCache = {};\nconst videoResourceCache = {};\n/**\n * 跨域图片。设置了crossOrigin属性的图片。配置了crossOrigin之后，才能够使用导出图片功能\n */\nconst crossOriginResourceCache = {};\nconst resourceReadyListeners = {};\nconst retryCount = {};\nconst RETRY_LIMIT = 10;\nexport const fetchResource = (url, cb) => {\n    if (!resourceCache.hasOwnProperty(url)) {\n        resourceCache[url] = new Image();\n        crossOriginResourceCache[url] = new Image();\n        //https://stackoverflow.com/questions/22710627/tainted-canvases-may-not-be-exported\n        // resourceCache[url].crossOrigin = \"anonymous\";\n        crossOriginResourceCache[url].crossOrigin = \"anonymous\";\n        resourceCache[url].src = url;\n        crossOriginResourceCache[url].src = url;\n    }\n    if (typeof cb === 'function') {\n        setResourceLoadedCallback(url, cb);\n    }\n};\nexport const fetchVideoResource = (url, cb) => {\n    if (!videoResourceCache.hasOwnProperty(url)) {\n        videoResourceCache[url] = document.createElement(\"video\");\n        videoResourceCache[url].src = url;\n    }\n    if (typeof cb === 'function') {\n        setResourceLoadedCallback(url, cb, true);\n    }\n};\nconst setResourceLoadedCallback = (url, cb, isVideo = false) => {\n    resourceReadyListeners[url] = resourceReadyListeners[url] || [];\n    resourceReadyListeners[url].push(cb);\n    const resource = isVideo ? videoResourceCache[url] : resourceCache[url];\n    if (isVideo) {\n        resource.onloadedmetadata = () => {\n            const arr = resourceReadyListeners[url] || [];\n            for (let cb of arr) {\n                cb(resource);\n            }\n        };\n    }\n    else {\n        resource.onload = () => {\n            const arr = resourceReadyListeners[url] || [];\n            for (let cb of arr) {\n                cb(resource);\n            }\n        };\n    }\n    resource.onerror = () => {\n        retryCount[url] || (retryCount[url] = 0);\n        if (retryCount[url] < RETRY_LIMIT) {\n            /**\n             * 图片加载失败，尝试重新加载\n             * 间隔时间为2s, 4s, 6s, 8s, .... 20s\n             */\n            delete resourceCache[url];\n            delete resourceReadyListeners[url];\n            const delay = (retryCount[url] + 1) * 2000;\n            setTimeout(() => {\n                if (LOG) {\n                    console.warn(`白板--> ${isVideo ? '视频' : '图片'}加载失败，第${retryCount[url]}次重新加载: ${url}`);\n                }\n                if (isVideo) {\n                    fetchVideoResource(url, cb);\n                }\n                else {\n                    fetchResource(url, cb);\n                }\n            }, delay);\n        }\n        retryCount[url] += 1;\n    };\n};\nexport const resourceLoaded = (url, crossOrigin = false) => {\n    const img = crossOrigin ? crossOriginResourceCache[url] : resourceCache[url];\n    return img && img.complete && img.width > 0 && img.height > 0;\n};\nexport const getResource = (url, crossOrigin = false) => {\n    return crossOrigin ? crossOriginResourceCache[url] : resourceCache[url];\n};\nexport const videoResourceLoaded = (url) => {\n    const video = videoResourceCache[url];\n    return video && video.videoWidth > 0 && video.videoHeight > 0;\n};\nexport const getVideoResource = (url) => {\n    return videoResourceCache[url];\n};\n/**\n * 加载图片正在加载中的图片\n */\nresourceCache['imageLoading'] = new Image();\nresourceCache['imageLoading'].src = loadingUrl;\n//https://stackoverflow.com/questions/22710627/tainted-canvases-may-not-be-exported\ncrossOriginResourceCache['imageLoading'] = new Image();\ncrossOriginResourceCache['imageLoading'].src = loadingUrl;\ncrossOriginResourceCache['imageLoading'].setAttribute('crossorigin', 'anonymous');\n","/**\n * 使用trasformOp对drawOp进行转换\n * @param drawOp\n * @param opSnapshot\n */\nexport const transformOp = (page, drawOp, trasformOp) => {\n    const op = page.opsManager.opMap[trasformOp.data.type];\n    try {\n        if (\"transformOp\" in op) {\n            return op.transformOp(drawOp, trasformOp);\n        }\n        else {\n            return drawOp;\n        }\n    }\n    catch (err) {\n        console.warn('transform op error');\n        console.warn(drawOp);\n        console.warn(err);\n        return drawOp;\n    }\n};\n/**\n * 若快照需要白板完全重绘，返回true\n * @param snapshot\n */\nexport const opNeedRefresh = (page, snapshot) => {\n    //文本永远是增量绘制\n    // if (snapshot.data.type === 'text') {\n    //     return false\n    // }\n    //下面的快照操作为增量绘制\n    const isIncrementOp = ['select', 'laser', 'text'].includes(snapshot.data.type) || page.opsManager.drawOpTypes.includes(snapshot.data.type);\n    if (isIncrementOp && snapshot.data.inProgress) {\n        return false;\n    }\n    else if (snapshot.data.type === 'mouse-pointer') {\n        return false;\n    }\n    return true;\n};\n/**\n * 根据lastSelectOfUser推导出当前用户选中了哪些元素\n *\n * 应该是当前用户select - 之后的select快照的包含了当前的元素\n * @param page\n */\nexport const getSelectedOpIds = (page) => {\n    let selectedOpIds = [];\n    let currSelect = page.lastSelectOfUser[page.app.account];\n    if (currSelect) {\n        selectedOpIds = currSelect.data.selectedOpIds.slice();\n        // for (let userId in page.lastSelectOfUser) {\n        //     if (page.lastSelectOfUser[userId].time > currSelect.time) {\n        //         const otherSelect = page.lastSelectOfUser[userId].data.selectedOpIds.slice() as string[]\n        //         for (let id of otherSelect) {\n        //             const index = selectedOpIds.indexOf(id as string)\n        //             if (index !== -1) {\n        //                 selectedOpIds.splice(index, 1)\n        //             }\n        //         }\n        //     }\n        // }\n    }\n    selectedOpIds = selectedOpIds.filter(id => {\n        return page.drawOpQueue.hasOwnProperty(id) && !page.drawOpQueue[id].data.locked;\n    });\n    return selectedOpIds;\n};\n","let timer;\nexport const transitionToCameraBound = (camera, boundary, callback) => {\n    const end = boundary;\n    const start = {\n        centerX: camera.centerX,\n        centerY: camera.centerY,\n        width: camera.width,\n        height: camera.height\n    };\n    /**\n     * 录像回放时，不要用动画，否则位置有些问题\n     */\n    const total = camera.app.isRecordPlayer ? 1 : 15;\n    animate({\n        total: total,\n        worker: (curr) => {\n            const percent = (curr + 1) / total;\n            camera.setCameraBound({\n                centerX: end.centerX * percent + start.centerX * (1 - percent),\n                centerY: end.centerY * percent + start.centerY * (1 - percent),\n                width: end.width * percent + start.width * (1 - percent),\n                height: end.height * percent + start.height * (1 - percent)\n            });\n        },\n        callback: callback\n    });\n};\nexport const animate = (opt) => {\n    cancelAnimationFrame(timer);\n    step(0, opt);\n};\nconst step = (curr, opt) => {\n    if (curr >= opt.total) {\n        if (typeof opt.callback === 'function') {\n            opt.callback();\n        }\n    }\n    else {\n        requestAnimationFrame(() => {\n            opt.worker(curr);\n            step(curr + 1, opt);\n        });\n    }\n};\n","// type OP_MODE = '' | 'flag' | 'free' | 'erase' | 'fill' | 'select' | 'draw' | 'image' // todo\nexport var WActions;\n(function (WActions) {\n    WActions[WActions[\"VERSION\"] = 0] = \"VERSION\";\n    WActions[WActions[\"START\"] = 1] = \"START\";\n    WActions[WActions[\"MOVE\"] = 2] = \"MOVE\";\n    WActions[WActions[\"END\"] = 3] = \"END\";\n    WActions[WActions[\"REVOKE\"] = 4] = \"REVOKE\";\n    WActions[WActions[\"SERIAL\"] = 5] = \"SERIAL\";\n    WActions[WActions[\"CLEAR\"] = 6] = \"CLEAR\";\n    WActions[WActions[\"CLEAR_ACK\"] = 7] = \"CLEAR_ACK\";\n    WActions[WActions[\"SYNC_REQUEST\"] = 8] = \"SYNC_REQUEST\";\n    WActions[WActions[\"SYNC\"] = 9] = \"SYNC\";\n    WActions[WActions[\"SYNC_PREPARE\"] = 10] = \"SYNC_PREPARE\";\n    WActions[WActions[\"SYNC_PREPARE_ACK\"] = 11] = \"SYNC_PREPARE_ACK\";\n    WActions[WActions[\"LASER_PEN\"] = 12] = \"LASER_PEN\";\n    WActions[WActions[\"LASER_PEN_END\"] = 13] = \"LASER_PEN_END\";\n    WActions[WActions[\"FILE\"] = 14] = \"FILE\";\n    WActions[WActions[\"REDO\"] = 15] = \"REDO\";\n    WActions[WActions[\"CALIBRATE\"] = 16] = \"CALIBRATE\";\n    WActions[WActions[\"TEXT\"] = 17] = \"TEXT\";\n})(WActions || (WActions = {}));\nexport const StateRelatedActions = [\n    WActions.CALIBRATE,\n    WActions.FILE\n];\n// 这个是表示白板组件整体处于一个什么状态的\nexport var WB_MODE;\n(function (WB_MODE) {\n    WB_MODE[WB_MODE[\"readonly\"] = -1] = \"readonly\";\n    WB_MODE[WB_MODE[\"draw\"] = 1] = \"draw\";\n    // mousedown = 3, // 鼠标按下了\n    // mousemove = 4, // 鼠标移动中\n    // mouseup = 5,   // 鼠标抬起\n})(WB_MODE || (WB_MODE = {}));\nexport var WB_TOOL;\n(function (WB_TOOL) {\n    WB_TOOL[WB_TOOL[\"flag\"] = -1] = \"flag\";\n    WB_TOOL[WB_TOOL[\"free\"] = 1] = \"free\";\n    WB_TOOL[WB_TOOL[\"line\"] = 2] = \"line\";\n    WB_TOOL[WB_TOOL[\"rect\"] = 3] = \"rect\";\n    WB_TOOL[WB_TOOL[\"solidRect\"] = 4] = \"solidRect\";\n    WB_TOOL[WB_TOOL[\"roundRect\"] = 5] = \"roundRect\";\n    WB_TOOL[WB_TOOL[\"solidRoundRect\"] = 6] = \"solidRoundRect\";\n    WB_TOOL[WB_TOOL[\"circle\"] = 7] = \"circle\";\n    WB_TOOL[WB_TOOL[\"solidCircle\"] = 8] = \"solidCircle\";\n    WB_TOOL[WB_TOOL[\"ellipse\"] = 9] = \"ellipse\";\n    WB_TOOL[WB_TOOL[\"solidEllipse\"] = 10] = \"solidEllipse\";\n    WB_TOOL[WB_TOOL[\"fill\"] = 11] = \"fill\";\n    WB_TOOL[WB_TOOL[\"text\"] = 12] = \"text\";\n    WB_TOOL[WB_TOOL[\"erase\"] = 13] = \"erase\";\n    // select = 14, //  TODO 选择工具\n})(WB_TOOL || (WB_TOOL = {}));\n","/**\n * 定义如何从字符串中解析动作，以及如何将动作转换为字符串(command)。\n */\nimport { WActions } from \"../Itypes\";\nconst encodeNumber = (n) => {\n    if (n === 0 || n < 0) {\n        return '0';\n    }\n    if (n === 1 || n > 1) {\n        return '1';\n    }\n    return n.toFixed(4).slice(2); // 4位已经够了\n};\nconst decodeNumber = (str) => {\n    if (str === '0') {\n        return 0;\n    }\n    if (str === '1') {\n        return 1;\n    }\n    return parseFloat('0.' + str);\n};\nconst stringify = (obj, props) => {\n    if (typeof obj === 'string') {\n        return obj;\n    }\n    else {\n        let str = JSON.stringify(obj, props);\n        return str.replace(/;/gm, '；')\n            .replace(/,/gm, '，')\n            .replace(/:/gm, '¦');\n    }\n};\nconst unstringify = (str) => {\n    let originStr = str.replace(/；/gm, ';')\n        .replace(/，/gm, ',')\n        .replace(/¦/gm, ':');\n    return JSON.parse(originStr);\n};\nclass IAction {\n    constructor() { }\n}\nexport class StartAction extends IAction {\n    constructor(x, y) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.START;\n    }\n    static fromString(str) {\n        // version 1: x, y\n        let pis = str.split(',');\n        let action = new StartAction(decodeNumber(pis[0]), decodeNumber(pis[1]));\n        return action;\n    }\n    toString() {\n        let x = encodeNumber(this.x);\n        let y = encodeNumber(this.y);\n        return `${this.TYPE}:${x},${y}`;\n    }\n}\nexport class MoveAction extends StartAction {\n    constructor(x, y) {\n        super(x, y);\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.MOVE;\n    }\n    static fromString(str) {\n        let pis = str.split(',');\n        return new MoveAction(decodeNumber(pis[0]), decodeNumber(pis[1]));\n    }\n}\nexport class EndAction extends StartAction {\n    constructor(x, y) {\n        super(x, y);\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.END;\n    }\n    static fromString(str) {\n        let pis = str.split(',');\n        return new EndAction(decodeNumber(pis[0]), decodeNumber(pis[1]));\n    }\n}\nexport class RevokeAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.REVOKE;\n        this.TYPE = WActions.REVOKE;\n    }\n    static fromString(str) {\n        return new RevokeAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class SerialAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SERIAL;\n    }\n    static fromString(str) {\n        return new SerialAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class ClearAction extends IAction {\n    constructor(accounts) {\n        super();\n        this.TYPE = WActions.CLEAR;\n        if (Array.isArray(accounts)) {\n            this.accounts = accounts;\n        }\n        else if (accounts) {\n            this.accounts = [accounts];\n        }\n        else {\n            this.accounts = [];\n        }\n    }\n    static fromString(str) {\n        let accounts = unstringify(str);\n        return new ClearAction(accounts);\n    }\n    toString() {\n        let str = stringify(this.accounts);\n        return `${this.TYPE}:${str}`;\n    }\n}\nexport class ClearAckAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.CLEAR_ACK;\n    }\n    static fromString(str) {\n        return new ClearAckAction();\n    }\n    toString() {\n        return `${this.TYPE}:`;\n    }\n}\nexport class SyncRequestAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SYNC_REQUEST;\n    }\n    static fromString(str) {\n        return new SyncRequestAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class SyncAction extends IAction {\n    constructor(sync) {\n        super();\n        this.sync = sync;\n        this.TYPE = WActions.SYNC;\n    }\n    static fromString(str) {\n        let snapshot = unstringify(str);\n        return new SyncAction(snapshot);\n    }\n    toString() {\n        let sync = this.sync;\n        let originStr = stringify(sync);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nexport class SyncPrepareAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SYNC_PREPARE;\n    }\n    static fromString(str) {\n        return new SyncPrepareAction();\n    }\n    toString() {\n        let originStr = stringify(this, ['']);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nexport class SyncPrepareAckAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SYNC_PREPARE_ACK;\n    }\n    static fromString(str) {\n        return new SyncPrepareAckAction();\n    }\n    toString() {\n        return `${this.TYPE}:`;\n    }\n}\nexport class LaserPenAction extends StartAction {\n    constructor(x, y) {\n        super(x, y);\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.LASER_PEN;\n    }\n    static fromString(str) {\n        let pis = str.split(',');\n        return new LaserPenAction(+pis[0], +pis[1]);\n    }\n}\nexport class LaserPenEndAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.LASER_PEN_END;\n    }\n    static fromString(str) {\n        return new LaserPenEndAction();\n    }\n    toString() {\n        return `${this.TYPE}:`;\n    }\n}\nexport class FileAction extends IAction {\n    constructor(file) {\n        super();\n        this.file = file;\n        this.TYPE = WActions.FILE;\n    }\n    static fromString(str) {\n        let value = str.split(',');\n        let fileType;\n        if (value[3] === '0') {\n            fileType = 'img';\n        }\n        else if (value[3] === '1') {\n            fileType = 'h5';\n        }\n        else {\n            fileType = 'clear';\n        }\n        let file = {\n            docId: value[0] || '',\n            currentPage: parseInt(value[1] || '1'),\n            pageCount: parseInt(value[2] || '1'),\n            type: fileType || 'img',\n            url: value[4] || '',\n            urlStr: value[5] || '',\n            h5Cmd: value[6] || ''\n        };\n        return new FileAction(file);\n    }\n    static immuteUpdate(fileA, fileB) {\n        const gatherFile = {};\n        const diff = {};\n        FileAction.PROPS.forEach(propName => {\n            let valueOld = fileA[propName];\n            let valueNext = fileB[propName];\n            if (typeof valueNext === 'undefined' || valueNext === '') {\n                gatherFile[propName] = valueOld;\n            }\n            else {\n                if (valueNext !== valueOld) {\n                    diff[propName] = valueNext;\n                    gatherFile[propName] = valueNext;\n                }\n                else {\n                    gatherFile[propName] = valueOld;\n                }\n            }\n        });\n        return [gatherFile, diff];\n    }\n    toString() {\n        let file = this.file;\n        let fileType;\n        if (file.type === 'img') {\n            fileType = '0';\n        }\n        else if (file.type === 'h5') {\n            fileType = '1';\n        }\n        else {\n            fileType = '-1';\n        }\n        return `${this.TYPE}:${file.docId || ''},${file.currentPage || ''},${file.pageCount || ''},${fileType},${file.url || ''},${file.urlStr || ''},${file.h5Cmd || ''}`;\n    }\n}\nFileAction.PROPS = [\n    'docId', 'currentPage',\n    'pageCount', 'type', 'url',\n    'urlStr', 'h5Cmd'\n];\nexport class RedoAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.REDO;\n    }\n    static fromString(str) {\n        return new RedoAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class CalibrateAction extends IAction {\n    constructor(opt) {\n        super();\n        this.TYPE = WActions.CALIBRATE;\n        Object.assign(this, opt);\n    }\n    static fromString(str) {\n        const opt = unstringify(str);\n        return new CalibrateAction(opt);\n    }\n    toString() {\n        const originStr = stringify(this, CalibrateAction.PROPS);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\n// static readonly PROPS = [\n//   'mode', 'tool', 'size', 'color', 'fontsize',\n// ]\nCalibrateAction.USER_PROPS = [\n    'mode', 'tool', 'size', 'color', 'fontsize',\n    'isMouseDown', 'keyDown', 'flagPos',\n];\nCalibrateAction.PROPS = [\n    ...CalibrateAction.USER_PROPS,\n    ...['altKey', 'shiftKey', 'which', 'ctrlKey'],\n    ...['ownerCanvasHeight', 'ownerCanvasWidth'],\n];\nexport class TextAction extends IAction {\n    constructor(x, y, text) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.text = text;\n        this.TYPE = WActions.TEXT;\n    }\n    static fromString(str) {\n        // str.split(',') 不能用，分割，因为用户可能会输入‘，’\n        const { x, y, text } = unstringify(str);\n        return new TextAction(x, y, text);\n    }\n    toString() {\n        const originStr = stringify(this, TextAction.PROPS);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nTextAction.PROPS = ['x', 'y', 'text'];\nexport class VersionAction extends IAction {\n    constructor({ ver, account, gzip, }) {\n        super();\n        this.TYPE = WActions.VERSION;\n        this.ver = ver;\n        this.account = account;\n        this.gzip = gzip;\n    }\n    static fromString(str) {\n        // str.split(',') 不能用，分割，因为用户可能会输入‘，’\n        const { ver, account, gzip, } = unstringify(str);\n        return new VersionAction({\n            ver,\n            account,\n            gzip,\n        });\n    }\n    toString() {\n        const originStr = stringify(this, VersionAction.PROPS);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nVersionAction.PROPS = ['ver', 'account', 'gzip'];\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toObject = require('./_to-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $GOPS = require('./_object-gops');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","/**\n * 解决注册事件时兼容性问题\n * @param el\n * @param name\n * @param cb\n */\nexport function on(el, name, cb) {\n    el.addEventListener(name, cb);\n}\nexport function off(el, name, cb) {\n    el.removeEventListener(name, cb);\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/number/is-integer\"), __esModule: true };","import EventEmitter from 'eventemitter3';\nclass Dispatcher extends EventEmitter {\n    subMany(eventDict) {\n        for (const key in eventDict) {\n            this.on(key, eventDict[key]);\n        }\n    }\n    destroy() {\n        this.eventNames().forEach(name => {\n            this.removeAllListeners(name);\n        });\n    }\n}\nexport default Dispatcher;\n","export { default as pako } from 'pako';\n/**\n * 格式化颜色值, 默认为十六进制(16), 默认自动补齐\n * @param {string} color 十六进制请不要带#号\n * @param {number} format 需要转换的进制, 默认为十六进制\n */\nexport function formatColor(color, format = 16) {\n    if (!color)\n        return formatColor.INVALID;\n    let res;\n    if (format === 16) {\n        let colorNumber = +color;\n        if (colorNumber < 0) {\n            res = hex2rgb(colorNumber);\n            console.log('hex2rgb', colorNumber, res);\n            return res;\n        }\n        res = colorNumber.toString(16);\n        if (res.length < 3) {\n            res = ('000' + res).slice(-3);\n        }\n        if (res.length > 3 && res.length < 6) {\n            res = ('000' + res).slice(-6);\n        }\n        res = '#' + res;\n        // console.log('formatColor 16', color, res)\n        return res;\n    }\n    else if (format === 10) {\n        res = color.replace(/#/gi, '');\n        res = parseInt('0x' + res);\n        // console.log('formatColor 10', color, res)\n        return isNaN(res) ? formatColor.INVALID : '' + res;\n    }\n    else {\n        return formatColor.INVALID;\n    }\n}\nformatColor.INVALID = '++bad-color++';\n// rgba转rgb\nexport function hex2rgb(val) {\n    // return '#' + (0x00FFFFFF & val)\n    const alpha = (val >> 24) & 0xff;\n    let red = (val >> 16) & 0xff;\n    let green = (val >> 8) & 0xff;\n    let blue = val & 0xff;\n    let red$ = red.toString(16);\n    let green$ = green.toString(16);\n    let blue$ = blue.toString(16);\n    console.log('rgb', red$, green$, blue$);\n    return ('#' +\n        ('0' + red$).slice(-2) +\n        ('0' + green$).slice(-2) +\n        ('0' + blue$).slice(-2));\n}\n/**\n *  颜色模块，默认都是字符串类型的 16进制全称，不含透明度的字符串\n */\n// 得到KB 单位\nexport function getKiloBytes(length) {\n    if (typeof length === 'number') {\n        return length * 2 / 1024;\n    }\n    if (typeof length === 'string') {\n        return length.length * 2 / 1024;\n    }\n    return 0;\n}\nexport const sleep = (time = 100) => new Promise(res => {\n    setTimeout(res, time);\n});\nexport function sign(x) { return x ? x < 0 ? -1 : 1 : 0; }\n","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","module.exports = function () { /* empty */ };\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","export function min(...numbers) {\n    return numbers.reduce((n1, n2) => {\n        return Math.min(n1, n2);\n    });\n}\nexport function max(...numbers) {\n    return numbers.reduce((n1, n2) => {\n        return Math.max(n1, n2);\n    });\n}\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nrequire('../modules/es7.set.of');\nrequire('../modules/es7.set.from');\nmodule.exports = require('../modules/_core').Set;\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Set', { toJSON: require('./_collection-to-json')('Set') });\n","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\nrequire('./_set-collection-of')('Set');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\nrequire('./_set-collection-from')('Set');\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonResult: (i, result, next) =>\n\t\t\t\t`if(${result} !== undefined) {\\n${onResult(\n\t\t\t\t\tresult\n\t\t\t\t)};\\n} else {\\n${next()}}\\n`,\n\t\t\tresultReturns,\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncBailHookCodeFactory();\n\nclass SyncBailHook extends Hook {\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncBailHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncBailHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncBailHook;\n","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nimport drawConfig from \"./drawConfig\";\nimport { drawCurve } from \"../../misc/drawCurve\";\nclass PenOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'pen';\n        this.description = \"涂鸦操作工具。\\n首先使用op:pen:activate设置画布为涂鸦模式。\" +\n            \"通过op:pen:lineWidth, op:pen:color设置涂鸦的宽度和颜色。然后画布会监听鼠标动作，生成涂鸦。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getSnapshot(inProgress) {\n        const points = this.points;\n        const currOpId = this.opsManager.currPage.getOpId();\n        const pkg = this.app.room.opIdSnapshotMap[currOpId];\n        if (!pkg || !pkg.snapshot.hasOwnProperty('category')) {\n            /**\n             * 保险措施，如果已经发送的是旧的数据，则发送一份完整的数据出去\n             */\n            return Object.assign({ points: points.slice(), total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n        let boundaryRect = {\n            boundary: this.getBoundaryRectOfFreeDraw()\n        };\n        if (this.sampleSeq > 0 && inProgress) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), total: points.length });\n        }\n        else if (this.sampleSeq > 0) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), total: points.length, inProgress: inProgress });\n        }\n        else {\n            return Object.assign({ points: points.slice(), total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n    }\n    _draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const points = data.points;\n        const transformedPoints = points.map(p => getTransformedPoint(p, data.dx, data.dy, data.scaleX, data.scaleY));\n        drawCurve(ctx, transformedPoints, 0.5);\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        this._draw(snapshot, ctx);\n        this.strokeOrFill(ctx, {\n            stroke: data.color,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n    ifMouseOnOp(snapshot, mx, my) {\n        const ctx = this.app.container.ctx;\n        this._draw(snapshot, ctx);\n        //稍微增大一些选择线段的宽度范围，否则线段很细时，判定可能过于灵敏\n        ctx.lineWidth = snapshot.data.lineWidth + 20;\n        ctx.strokeStyle = 'rgba(0,0,0,0)';\n        ctx.stroke();\n        return ctx.isPointInStroke(mx, my);\n    }\n    mergePartial(snapshot, partial) {\n        const sp = this._mergePartial(snapshot, partial);\n        if (sp.data.points.length !== sp.data.total) {\n            console.warn('merge ........', snapshot, partial);\n        }\n        return sp;\n    }\n    _mergePartial(snapshot, partial) {\n        try {\n            const ptrDiff = partial.data.total - snapshot.data.total;\n            if (ptrDiff === 0) {\n                return Object.assign(Object.assign({}, snapshot), { data: Object.assign(Object.assign(Object.assign({}, snapshot.data), partial.data), { points: snapshot.data.points }) });\n            }\n            else if (ptrDiff < 0) {\n                return snapshot;\n            }\n            else if (ptrDiff <= partial.data.points.length) {\n                const startIndex = partial.data.points.length - ptrDiff;\n                return Object.assign(Object.assign({}, snapshot), { data: Object.assign(Object.assign(Object.assign({}, snapshot.data), partial.data), { points: snapshot.data.points.concat(partial.data.points.slice(startIndex)) }) });\n            }\n            else {\n                if (LOG) {\n                    console.warn('白板--> mergePartial error', snapshot, partial);\n                }\n                return snapshot;\n            }\n        }\n        catch (_a) {\n            if (LOG) {\n                console.warn('白板--> mergePartial error', snapshot, partial);\n            }\n            return snapshot;\n        }\n    }\n}\nexport default PenOp;\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi41Mzg2IDIuNDYwMzRDMTMuMTUyNCAxLjg0NjU2IDE0LjE0NzUgMS44NDY1NSAxNC43NjEzIDIuNDYwMzRMMTcuNTM5NyA1LjIzODcxQzE4LjE1MzQgNS44NTI0OSAxOC4xNTM0IDYuODQ3NjIgMTcuNTM5NyA3LjQ2MTRMNy44MDEyMiAxNy4xOTk4QzcuNTQyMjIgMTcuNDU4OCA3LjIwMDkgMTcuNjE5MiA2LjgzNjIyIDE3LjY1MzRMMy4xODEyNyAxNy45OTUyQzIuNTA3MTMgMTguMDU4MiAxLjk0MTc2IDE3LjQ5MjkgMi4wMDQ4MSAxNi44MTg3TDIuMzQ2NjQgMTMuMTYzOEMyLjM4MDc1IDEyLjc5OTEgMi41NDExNSAxMi40NTc4IDIuODAwMTUgMTIuMTk4OEwxMi41Mzg2IDIuNDYwMzRaTTEzLjkyNzggMy4yOTM4NUMxMy43NzQzIDMuMTQwNCAxMy41MjU2IDMuMTQwNCAxMy4zNzIxIDMuMjkzODVMMy42MzM2NiAxMy4wMzIzQzMuNTY4OTEgMTMuMDk3IDMuNTI4ODEgMTMuMTgyNCAzLjUyMDI4IDEzLjI3MzVMMy4xODk0OSAxNi44MTA1TDYuNzI2NDYgMTYuNDc5N0M2LjgxNzYzIDE2LjQ3MTIgNi45MDI5NiAxNi40MzExIDYuOTY3NyAxNi4zNjYzTDE2LjcwNjIgNi42Mjc4OUMxNi44NTk2IDYuNDc0NDUgMTYuODU5NiA2LjIyNTY2IDE2LjcwNjIgNi4wNzIyMkwxMy45Mjc4IDMuMjkzODVaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjYyMjQgOS41NDUxOEwxMC40NTQ4IDUuMzc3NjJMMTEuMjg4MyA0LjU0NDExTDE1LjQ1NTkgOC43MTE2N0wxNC42MjI0IDkuNTQ1MThaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K\"","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nclass LineOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'line';\n        this.description = \"绘制线段。\\n首先使用op:line:activate设置画布为线段模式。\" +\n            \"通过op:line:lineWidth, op:line:color设置线段的宽度和颜色。然后画布会监听鼠标动作，生成线段。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            inProgress\n        });\n    }\n    getBoundaryRect() {\n        return this.getBoundaryRectOfLine();\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const { sp, ep } = this.getStartEndPointFromSnapshot(data);\n        ctx.beginPath();\n        ctx.moveTo(...getTransformedPoint(sp, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.lineTo(...getTransformedPoint(ep, data.dx, data.dy, data.scaleX, data.scaleY));\n        this.strokeOrFill(ctx, {\n            stroke: data.color,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n    ifMouseOnOp(baseOp, mx, my) {\n        const ctx = this.app.container.ctx;\n        const data = baseOp.data;\n        const { sp, ep } = this.getStartEndPointFromSnapshot(data);\n        ctx.beginPath();\n        ctx.moveTo(...getTransformedPoint(sp, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.lineTo(...getTransformedPoint(ep, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.strokeStyle = 'rgba(0,0,0,0)';\n        ctx.lineWidth = data.lineWidth + 20;\n        ctx.stroke();\n        return ctx.isPointInStroke(mx, my);\n    }\n    getStartEndPointFromSnapshot(data) {\n        let sp;\n        let ep;\n        if (Array.isArray(data.points)) {\n            sp = data.points[0];\n            ep = data.points[data.points.length - 1];\n        }\n        else {\n            sp = data.sp;\n            ep = data.ep;\n        }\n        return {\n            sp, ep\n        };\n    }\n}\nexport default LineOp;\n","/**\n * 移动鼠标删除元素\n */\nimport Operation from \"../Operation\";\nimport { arrayDeduce, findOpsUnderMouse, findOpsUnderRect, idsChanged } from \"../util\";\nimport drawConfig from \"../DrawOp/drawConfig\";\nclass SelectBase extends Operation {\n    constructor() {\n        super(...arguments);\n        this.points = [];\n        this.lastSelectedOpIds = [];\n    }\n    postMouseUp(idsBeenSelected) { }\n    postClick(idsBeenSelected) { }\n    postMouseMove(event, idsBeenSelected) { }\n    get sp() {\n        return this.points.length > 0 ? this.points[0] : undefined;\n    }\n    get ep() {\n        return this.points.length > 0 ? this.points[this.points.length - 1] : undefined;\n    }\n    handleMouseDown(event, mx, my) {\n        //鼠标按下时，先清空已有的选择元素\n        this.dispatch(this.getSelectionSnapshot(false, []));\n        this.points = [[mx, my]];\n        const idsBeenSelected = findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n        this.dispatch(this.getSelectionSnapshot(true, idsBeenSelected));\n        this.lastSelectedOpIds = idsBeenSelected;\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.isMouseDown) {\n            this.points.push([mx, my]);\n        }\n        else {\n            this.points = [[mx, my]];\n        }\n        let idsBeenSelected;\n        if (this.isMouseDown) {\n            //鼠标按下时，搜索鼠标选择区域内的元素\n            idsBeenSelected = findOpsUnderRect(this.points, this.drawOpsOfPage);\n            this.dispatch(this.getSelectionSnapshot(true, idsBeenSelected));\n        }\n        else {\n            //若鼠标松开，只有当选中的点发生变化时，才有必要发送事件来触发重绘\n            //鼠标松开时，当且仅当\n            const idsUnderMouse = findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n            idsBeenSelected = arrayDeduce(idsUnderMouse, this.opsManager.selectedOpIds);\n            if (idsChanged(idsBeenSelected, this.lastSelectedOpIds)) {\n                this.dispatch(this.getSelectionSnapshot(true, idsBeenSelected, true));\n            }\n        }\n        this.lastSelectedOpIds = idsBeenSelected;\n        this.postMouseMove(event, idsBeenSelected);\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown) {\n            const idsBeenSelected = this.isMouseDown ?\n                findOpsUnderRect(this.points, this.drawOpsOfPage) :\n                findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n            this.postMouseUp(idsBeenSelected);\n        }\n    }\n    /**\n     * container中如果判断是click，就不会发送mousedown, mousemove和mouseup事件\n     * 因此需要额外判断是不是click事件\n     * @param event\n     * @param mx\n     * @param my\n     */\n    handleClick(event, mx, my) {\n        this.points = [[mx, my]];\n        const idsBeenSelected = findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n        this.postClick(idsBeenSelected);\n    }\n    getSelectionSnapshot(inProgress = false, selectedOpIds, isHover = false) {\n        return {\n            type: 'select',\n            sp: this.sp,\n            ep: this.ep,\n            inProgress: inProgress,\n            selectedOpIds: selectedOpIds.slice(),\n            reuseOpType: isHover ? 'select-hover' : 'select',\n            skipUndo: true,\n            color: drawConfig.strokeColor,\n            nickname: this.app.nickname\n        };\n    }\n}\nexport default SelectBase;\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nclass RectOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'rect';\n        this.shouldSaniteEp = true;\n        this.description = \"绘制矩形。\\n首先使用op:rect:activate设置画布为矩形模式。\" +\n            \"通过op:rect:lineWidth, op:rect:stroke, op:rect:fill设置矩形的宽度和颜色。然后画布会监听鼠标动作，生成矩形。具体用法如下：\";\n    }\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'stroke',\n            inProgress\n        });\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const sp = getTransformedPoint(data.sp, data.dx, data.dy, data.scaleX, data.scaleY);\n        const ep = getTransformedPoint(data.ep, data.dx, data.dy, data.scaleX, data.scaleY);\n        ctx.beginPath();\n        ctx.rect(sp[0], sp[1], ep[0] - sp[0], ep[1] - sp[1]);\n        this.strokeOrFill(ctx, {\n            stroke: data.stroke,\n            fill: data.fill,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n}\nexport default RectOp;\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nclass EllipseOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'ellipse';\n        this.shouldSaniteEp = true;\n        this.description = \"绘制椭圆形\";\n    }\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'stroke',\n            inProgress\n        });\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const sp = getTransformedPoint(data.sp, data.dx, data.dy, data.scaleX, data.scaleY);\n        const ep = getTransformedPoint(data.ep, data.dx, data.dy, data.scaleX, data.scaleY);\n        const cx = sp[0] / 2 + ep[0] / 2;\n        const cy = sp[1] / 2 + ep[1] / 2;\n        const radiusX = Math.abs(ep[0] - sp[0]) / 2;\n        const radiusY = Math.abs(ep[1] - sp[1]) / 2;\n        ctx.beginPath();\n        ctx.ellipse(cx, cy, radiusX, radiusY, 0, 0, Math.PI * 2, true);\n        this.strokeOrFill(ctx, {\n            stroke: data.stroke,\n            fill: data.fill,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n    ifMouseOnOp(baseOp, mx, my) {\n        const ctx = this.app.container.ctx;\n        const data = baseOp.data;\n        const sp = getTransformedPoint(data.sp, data.dx, data.dy, data.scaleX, data.scaleY);\n        const ep = getTransformedPoint(data.ep, data.dx, data.dy, data.scaleX, data.scaleY);\n        const cx = sp[0] / 2 + ep[0] / 2;\n        const cy = sp[1] / 2 + ep[1] / 2;\n        const radiusX = Math.abs(ep[0] - sp[0]) / 2;\n        const radiusY = Math.abs(ep[1] - sp[1]) / 2;\n        ctx.beginPath();\n        ctx.ellipse(cx, cy, radiusX, radiusY, 0, 0, Math.PI * 2, true);\n        ctx.fillStyle = 'rgba(0,0,0,0)';\n        ctx.fill();\n        return ctx.isPointInPath(mx, my);\n    }\n}\nexport default EllipseOp;\n","/**\n * 检测工具栏中的字体大小是否有效\n * @param text\n */\nexport function testFontSizeText(text) {\n    const num = Number(text);\n    if (isNaN(num)) {\n        return 'nan';\n    }\n    else if (num > MAX_FONT_SIZE) {\n        return 'exceed_max';\n    }\n    else if (num <= MIN_FONT_SIZE) {\n        return 'exceed_min';\n    }\n    else {\n        return 'valid';\n    }\n}\nexport const printTextInMultiLine = (context, text, x, y, lineHeight) => {\n    const textArr = text.split(/\\r?\\n/g);\n    let currentLine = 0;\n    for (let str of textArr) {\n        context.fillText(str, x, y + (lineHeight * currentLine));\n        currentLine++;\n    }\n};\nexport const MAX_FONT_SIZE = 999;\nexport const MIN_FONT_SIZE = 12;\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMTIiIHk9IjEuNDQyMjkiIHdpZHRoPSI4LjM4OTY3IiBoZWlnaHQ9IjE0LjY4MTkiIHJ4PSIxIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSAxMiAxLjQ0MjI5KSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxLjIiLz4KPHBhdGggZD0iTTQuNTg0NSA4Ljg1Nzc5TDEwLjUxNjkgMTQuNzkwMiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxLjIiLz4KPHBhdGggZD0iTTQuMjI0NjQgMTcuNjgxOEgxNS43NjA0IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEuMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+Cjwvc3ZnPgo=\"","/*\n * @Author: lduoduo\n * @Date: 2018-01-26 20:12:09\n * @Last Modified by: lduoduo\n * @Last Modified time: 2018-01-27 23:06:46\n * toast控制器\n */\nimport Toast from './toast';\nlet timer;\nexport default class ToastCtrl {\n    static createInstance() {\n        this._instance = this._instance || new Toast();\n        return this._instance;\n    }\n    static show(inOptions) {\n        const { time = 3 } = inOptions;\n        if (!this._instance) {\n            this.createInstance();\n        }\n        this._instance.show(inOptions);\n        if (timer) {\n            clearTimeout(timer);\n        }\n        if (time) {\n            timer = setTimeout(() => {\n                this.hide();\n            }, time * 1000);\n        }\n    }\n    static hide() {\n        if (timer) {\n            clearTimeout(timer);\n        }\n        if (this._instance) {\n            this._instance.hide();\n        }\n    }\n    static destory() {\n        if (this._instance) {\n            this._instance.destroy();\n            this._instance = null;\n        }\n    }\n}\nToastCtrl._instance = null;\n","/*\n * @Author: lduoduo\n * @Date: 2018-01-26 19:45:27\n * @Last Modified by: lduoduo\n * @Last Modified time: 2018-01-28 15:34:14\n * toast 消息提示组件\n */\nimport './toast.less';\nexport default class Toast {\n    constructor() {\n        this.toastDiv = document.createElement('div');\n        this.toastDiv.className = 'whiteboard-toast';\n        this.toastDiv.onclick = this.hide.bind(this);\n        document.body.appendChild(this.toastDiv);\n    }\n    show(inOptions) {\n        const toastDiv = this.toastDiv;\n        toastDiv.style.display = 'block';\n        if (inOptions.type === 'warn') {\n            toastDiv.style.color = '#8a6d3b';\n            toastDiv.style.backgroundColor = '#fcf8e3';\n            toastDiv.style.borderColor = '#faebcc';\n        }\n        else if (inOptions.type === 'info') {\n            toastDiv.style.color = '#31708f';\n            toastDiv.style.backgroundColor = '#d9edf7';\n            toastDiv.style.borderColor = '#bce8f1';\n        }\n        else if (inOptions.type === 'error') {\n            toastDiv.style.color = '#a94442';\n            toastDiv.style.backgroundColor = '#f2dede';\n            toastDiv.style.borderColor = '#ebccd1';\n        }\n        else {\n            toastDiv.style.color = '#3c763d';\n            toastDiv.style.backgroundColor = '#dff0d8';\n            toastDiv.style.borderColor = '#d6e9c6';\n        }\n        if (Number.isInteger(inOptions.top)) {\n            toastDiv.style.top = `${inOptions.top}px`;\n        }\n        toastDiv.innerHTML = inOptions.message;\n    }\n    hide() {\n        if (this.toastDiv) {\n            this.toastDiv.style.display = 'none';\n        }\n    }\n    destroy() {\n        if (this.toastDiv) {\n            document.body.removeChild(this.toastDiv);\n            this.toastDiv = null;\n        }\n    }\n}\n","require('../../modules/es6.number.is-integer');\nmodule.exports = require('../../modules/_core').Number.isInteger;\n","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/postcss-loader/src/index.js??postcss!./toast.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/postcss-loader/src/index.js??postcss!./toast.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/postcss-loader/src/index.js??postcss!./toast.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".whiteboard-toast {\\n    display: none;\\n    position: fixed;\\n    left: 50%;\\n    transform: translate(-50%);\\n    top: 200px;\\n    padding: 8px 15px;\\n    margin-bottom: 20px;\\n    border: 1px solid transparent;\\n    border-radius: 4px;\\n    color: #3c763d;\\n    background-color: #dff0d8;\\n    border-color: #d6e9c6;\\n    z-index: 100;\\n}\", \"\"]);\n\n","/**\n * 默认白板中所有页都属于同一个Board实例。\n *\n * 每添加一个文件（图片除外），都会添加一个Board。多页文件的Board含有多页Page。\n *\n * 引入Board概念是希望能够方便用户快速定位，切换多文件，以及原有白板。\n */\nimport Page from \"../page\";\nimport { addPage, deletePage, gotoPage } from \"./actions\";\nclass Board {\n    constructor(app, boardName, displayName) {\n        this.pages = {};\n        //pages中的key的顺序通过pageNames来控制。\n        this.pageNames = [];\n        //创建新页面时，新页面的索引号。该索引号会随着新页面创建而递增\n        this.newPageIndex = 1;\n        this.app = app;\n        this.dispatch = app.dispatcher;\n        this.boardName = boardName;\n        this.displayName = displayName;\n        this.pages = {\n            '0': new Page(app, boardName, '0')\n        };\n        this.pageNames = ['0'];\n        this.currIndex = 0;\n    }\n    get currPage() {\n        return this.pages[this.currIndex];\n    }\n    get payloadOfPages() {\n        return this.pageNames.map(name => {\n            return this.pages[name].payload;\n        });\n    }\n    /**\n     * currIndex是page的内在索引。\n     *\n     * 添加页面时，新页面会获得一个内在索引。内在索引从0开始递增\n     * 下面这个函数会返回当前页面在所有页面当中的位置。\n     *\n     * 举个例子：\n     * 添加三个页面，三个页面的内在索引为0,1,2\n     * 删除第二个页面，剩余下面的内在索引为0，2\n     *\n     * 2这个页面的currPageIndex为1，\n     * 0的currPageIndex为0\n     */\n    getCurrPageIndex() {\n        return this.pageNames.indexOf(this.currIndex.toString());\n    }\n    getPageBuiltInIndex(index) {\n        return Number(this.pageNames[index]);\n    }\n    addOpInBoard(snapshot) {\n        const { action, page, insertAfter } = snapshot.data;\n        if (action === 'add') {\n            addPage(this, insertAfter, snapshot);\n        }\n        if (action === 'goto') {\n            gotoPage(this, page, snapshot);\n        }\n        if (action === 'delete') {\n            deletePage(this, page, snapshot);\n        }\n        this.app.opsManager.hooks.addOpHook.call(snapshot, true);\n    }\n}\nexport default Board;\n","/**\n * 同一时间只会显示一个Page。显示的Page由{board = room.boards[room.currIndex]; page = board.pages[board.currIndex]}确定\n *\n * 每个Page中有Op快照队列。快照内容和协议传输内容一致，是Json对象。Op快照队列描述了Page该如何渲染。\n */\nimport { resourceLoaded } from \"../resource/resourceCache\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { refresh, cleanNonCanvasElements, drawInProgressSnapshots } from \"./render\";\nimport { calcDrawOpQueue } from \"./completeFlow\";\nimport { opNeedRefresh } from \"./util\";\nimport { addIncrementSnapshot } from \"./incrementFlow\";\nclass Page {\n    constructor(app, boardName, pageIndex) {\n        //只保留拥有draw方法的Op\n        this.drawOpQueue = {};\n        this.hiddenOpQueue = {};\n        /*\n         * 每个用户的快照队列中最后一个选择快照。选择快照只需要绘制最新的即可。注意selectOp和element-eraser Op都可以发送选择快照\n         */\n        this.lastSelectOfUser = {};\n        // lastSelectSnapshot: IDrawOpSnapshot | undefined\n        /**\n         * 当前用户正在选择中的select快照\n         */\n        this.lastInProgressSelectOfUser = {};\n        this.lastInProgressSnapshotOfUser = {};\n        /**\n         * 鼠标位置和其他连续动作可以共存，因此不放在lastInProgressSnapshotOfUser中\n         */\n        this.lastMousePointerOfUser = {};\n        /**\n         * 对于preview页面，若当前页面因为资源未下载而阻塞，则不渲染预览。\n         * 对于正常页面，仍渲染页面，但是不渲染未下载的资源\n         *\n         * 当资源全部下载好了，会发送event:page:ready事件，预览工厂及board根据此事件刷新相应的canvas\n         */\n        this.blockedResourceList = [];\n        this._currOpId = uuidv4();\n        this._nextOpId = uuidv4();\n        this.app = app;\n        this.opsManager = app.opsManager;\n        this.boardName = boardName;\n        this.pageIndex = pageIndex;\n        window.page = this;\n    }\n    prepareNewOpId() {\n        this._currOpId = this._nextOpId;\n        this._nextOpId = uuidv4();\n    }\n    getOpId() {\n        return this.app.account + '-' + this._currOpId;\n    }\n    /**\n     * 如果nextOpInc为false，那只是看一看下一个opId是什么\n     * 如果为true，则将opId递增，并返回\n     */\n    getNextOpId(nextOpInc = false) {\n        if (nextOpInc) {\n            this.prepareNewOpId();\n            return this.getOpId();\n        }\n        else {\n            return this.app.account + '-' + this._nextOpId;\n        }\n    }\n    get opQueue() {\n        const room = this.app.room;\n        try {\n            return room.boardOps[this.boardName].pages[this.pageIndex].inPageSnapshotIds.map(id => room.opIdSnapshotMap[id].snapshot);\n        }\n        catch (_a) {\n            return [];\n        }\n    }\n    /**\n     * 是否为当前文档的当前页面\n     */\n    get isCurrPage() {\n        return this.app.room.currBoard.currPage === this;\n    }\n    get ctx() {\n        return this.app.container.ctx;\n    }\n    get frontCtx() {\n        return this.app.container.frontCtx;\n    }\n    get laserCtx() {\n        return this.app.container.laserCtx;\n    }\n    get width() {\n        return this.app.container.width;\n    }\n    get height() {\n        return this.app.container.height;\n    }\n    get blocked() {\n        return this.blockedResourceList.length > 0;\n    }\n    setPayload(payload) {\n        this.payload = payload;\n    }\n    addWaitingResource(resUrl) {\n        if (!this.blockedResourceList.includes(resUrl) && !resourceLoaded(resUrl)) {\n            this.blockedResourceList.push(resUrl);\n        }\n    }\n    removeWaitingResource(resUrl) {\n        const index = this.blockedResourceList.indexOf(resUrl);\n        if (index > -1) {\n            this.blockedResourceList.splice(index, 1);\n            if (!this.blocked) {\n                //通知外界页面已经准备好了。\n                this.app.opsManager.hooks.pageReady.call(this.boardName, this.pageIndex);\n                if (this.isCurrPage) {\n                    this.app.room.pageToRefresh = this;\n                    // return this.refresh()\n                }\n            }\n        }\n    }\n    /**\n     * 将snapshot加入队列中\n     *\n     * @param snapshot\n     */\n    addOpInPage(snapshot, doRefresh = true) {\n        if (snapshot.opId === 'none') {\n            console.error('DEV-->', 'snapshot no opid', snapshot);\n            return false;\n        }\n        /**\n         * 用户(uid)有新的快照，或者快照已完成，删除他/她之前的进行中的快照，否则会重复绘制\n         *\n         * 排查mouse-pointer是因为进行中的快照可能和鼠标位置快照同时产生\n         */\n        if (this.lastInProgressSnapshotOfUser.hasOwnProperty(snapshot.uid)\n            && !['mouse-pointer'].includes(snapshot.data.type)) {\n            if (!snapshot.data.inProgress\n                || snapshot.opId !== this.lastInProgressSnapshotOfUser[snapshot.uid].snapshot.opId) {\n                delete this.lastInProgressSnapshotOfUser[snapshot.uid];\n            }\n        }\n        // if (lastOp === null && snapshot.data.type !== 'select') {\n        //     console.warn('DEV-->', 'New Op created', snapshot)\n        // }\n        // if (!snapshot.data.inProgress && snapshot.data.type !== 'select') {\n        //     console.warn('DEV-->', 'New op finished', snapshot)\n        // }\n        /**\n         * 批量接收快照时，也要调用calcDrawOpQueue,\n         * 否则recovery模块缓存时，backgroundOp可能未被设置，导致刷新时丢失所有文档背景图\n         */\n        if (opNeedRefresh(this, snapshot)) {\n            this.calcDrawOpQueue();\n        }\n        if (!this.app.room.isReceivingBatchSnapshots) {\n            if (opNeedRefresh(this, snapshot)) {\n                if (['undo', 'redo', 'clear'].includes(snapshot.data.type)) {\n                    this.cleanNonCanvasElements(false);\n                }\n                if (doRefresh) {\n                    /**\n                     * 只有Page是当前Page才重绘\n                     */\n                    if (this.boardName === this.app.room.currIndex &&\n                        this.pageIndex === this.app.room.currBoard.currIndex.toString()) {\n                        this.app.room.pageToRefresh = this;\n                        // this.refresh()\n                    }\n                }\n            }\n            else {\n                addIncrementSnapshot(this, snapshot);\n            }\n        }\n        /**\n         * 埋入钩子。\n         * undo, redo可以使用该钩子更新可撤销，可重做操作数量\n         */\n        this.opsManager.hooks.addOpHook.call(snapshot);\n        return opNeedRefresh(this, snapshot);\n    }\n    /**\n     * 将完整操作队列转为绘制操作队列\n     * 选择也会输出DrawOpSnapshot。因为它也有绘制方式。但是只有最后一个，且激活的选择操作会显示内容\n     *\n     * 步骤一：建立依赖链表队列，比如说\n     * {\n     *  [涂鸦1，移动1，缩放1，移动1]，\n     *  [矩形2，移动1]，\n     *  [最后一次选择]\n     * }\n     * 步骤二：计算图形变形后的结果。然后输出图形队列\n     */\n    calcDrawOpQueue() {\n        calcDrawOpQueue(this, this.app.room.isReceivingBatchSnapshots);\n    }\n    /**\n     * 切换页面时，以及撤销，回退，清空时，应该清空container中属于切换前页面的dom元素\n     *\n     * 撤销，回退不要清空背景元素。清空背景元素会造成背景图闪烁。只在绝对必要时清空背景图（换页）\n     */\n    cleanNonCanvasElements(includeBackground = true) {\n        cleanNonCanvasElements(this, includeBackground);\n    }\n    refresh(opt = {}) {\n        refresh(this, opt);\n    }\n    incRefresh() {\n        drawInProgressSnapshots(this);\n    }\n}\nexport default Page;\n","import Page from \"../page\";\n/**\n * snapshot为引起addPage动作的快照，它可能来自于Board类快照\n */\nexport const addPage = (board, insertAfter, snapshot) => {\n    board.app.opsManager.hooks.prePageChange.call(snapshot);\n    board.pages[board.currIndex].cleanNonCanvasElements();\n    board.pages[board.newPageIndex] = new Page(board.app, board.boardName, board.newPageIndex.toString());\n    if (snapshot.category === 'pageOp') {\n        board.pages[board.newPageIndex].setPayload(snapshot.data.payload);\n    }\n    insertAfter = insertAfter === undefined ? board.pageNames.length - 1 : insertAfter;\n    board.pageNames.splice(insertAfter + 1, 0, board.newPageIndex.toString());\n    if (!board.app.room.isReceivingBatchSnapshots) {\n        board.pages[board.newPageIndex].calcDrawOpQueue();\n        // board.pages[board.newPageIndex].refresh()\n        board.app.room.pageToRefresh = board.pages[board.newPageIndex];\n    }\n    //更新新页面index\n    board.currIndex = board.newPageIndex;\n    board.newPageIndex += 1;\n    board.app.opsManager.hooks.pageChange.call(snapshot);\n};\n/**\n * snapshot为引起gotoPage动作的快照，它可能来自于Board类快照\n */\nexport const gotoPage = (board, index, snapshot) => {\n    if (!board.pages.hasOwnProperty(index)) {\n        throw new Error('跳转至不存在的页面');\n    }\n    board.app.opsManager.hooks.prePageChange.call(snapshot);\n    board.pages[board.currIndex].cleanNonCanvasElements();\n    board.currIndex = Number(index);\n    board.app.opsManager.hooks.pageChange.call(snapshot);\n    if (!board.app.room.isReceivingBatchSnapshots) {\n        board.pages[index].calcDrawOpQueue();\n        // board.pages[index].refresh()\n        board.app.room.pageToRefresh = board.pages[index];\n    }\n};\n/**\n * snapshot为引起deletePage动作的快照，它可能来自于Board类快照\n */\nexport const deletePage = (board, index, snapshot) => {\n    if (!board.pages.hasOwnProperty(index)) {\n        if (LOG) {\n            console.error('白板-->', `删除页面:${index}, 但是页面不存在`);\n        }\n    }\n    else if (Object.keys(board.pages).length === 1) {\n        if (LOG) {\n            console.error('白板-->', `不能删除最后一页`);\n        }\n    }\n    else {\n        board.app.opsManager.hooks.prePageChange.call(snapshot);\n        board.pages[board.currIndex].cleanNonCanvasElements();\n        delete board.pages[index];\n        const indexInPageNames = board.pageNames.indexOf(index.toString());\n        if (indexInPageNames !== -1) {\n            board.pageNames.splice(indexInPageNames, 1);\n        }\n        let nextPageIndex = indexInPageNames;\n        if (indexInPageNames === board.pageNames.length) {\n            //被删除的是最后一页，跳到被删除页面的前一页\n            nextPageIndex = indexInPageNames - 1;\n        }\n        board.currIndex = Number(board.pageNames[nextPageIndex]);\n        board.app.opsManager.hooks.pageChange.call(snapshot);\n        if (!board.app.room.isReceivingBatchSnapshots) {\n            board.pages[board.currIndex].calcDrawOpQueue();\n            // board.pages[board.currIndex].refresh()\n            board.app.room.pageToRefresh = board.pages[board.currIndex];\n        }\n    }\n};\n","/**\n* 返回非null时，才需要更新本地视角\n* @param snapshot\n*/\nexport const getCameraBoundFromGlobalOp = (room, snapshot) => {\n    const camera = room.app.camera;\n    const vision = room.app.vision;\n    if (snapshot.data.type === 'camera-bound') {\n        camera.cameraBoundByUser[snapshot.uid] = snapshot.data.boundary;\n        if (vision.mode === 'freeObserver' && snapshot.uid === room.app.account) {\n            return snapshot.data.boundary;\n        }\n        else if (vision.mode === 'broadcaster' && snapshot.uid === room.app.account) {\n            return snapshot.data.boundary;\n        }\n        else if (vision.mode === 'follower' && snapshot.uid === vision.broadcaster) {\n            return snapshot.data.boundary;\n        }\n        else if (vision.mode === 'follower' && snapshot.uid === room.app.account) {\n            /**\n             * 本地窗口resize时，设置cameraBound调整canvas缩放值\n             */\n            return snapshot.data.boundary;\n        }\n    }\n    return null;\n};\n","// schema = { // 登录参数规则\n//     appKey: {\n//       type: 'string',\n//       isRequire: true\n//     },\n//     account: {\n//       type: 'string',\n//       isRequire: true\n//     },\n//     token: {\n//       type: 'string',\n//       isRequire: true\n//     },\n//     record: {\n//       type: 'boolean',\n//       defaultValue: false\n//     },\n//     channelName: {\n//       type: 'string|number',\n//       isRequire: true\n//     },\n//     platform: {\n//       type: 'string',\n//       isRequire: true,\n//       enum: PlatformArray\n//     }\n//   }\n// validate(schema)\n// ===>>\n// [{key, message}]\nexport default {\n    isUndefined(value) {\n        return typeof value === 'undefined';\n    },\n    isDOM(value) {\n        if (typeof HTMLElement === 'object') {\n            return value instanceof HTMLElement;\n        }\n        return value && typeof value === 'object' && value.nodeType === 1 && typeof value.nodeName === 'string';\n    },\n    isValidString(value) {\n        return Object.prototype.toString.call(value) === '[object String]';\n    },\n    isBoolean(value) {\n        return typeof value === 'boolean';\n    },\n    isFunction(value) {\n        return typeof value === 'function';\n    },\n    isNumber(value) {\n        return typeof value === 'number';\n    },\n    isValidArray(value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n    },\n    isValidHexColor(value) {\n        return /^#[0-9abcdef]{6}$/gi.test(value);\n    },\n    isObject(value) {\n        return typeof value === 'object';\n    },\n    isValidObject(value) {\n        if (typeof value !== 'object') {\n            return false;\n        }\n        value = Object.assign({}, value);\n        if (Object.keys && Object.keys(value).length === 0) {\n            return false;\n        }\n        try {\n            return JSON.stringify(value) !== '{}';\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    // 检查参数\n    // data 检查的对象，rule 对象键值规则，skipKey 需要跳过的键，resObj 通过检查的赋值对象\n    /* rule 例：\n    {\n      account: {\n        type: 'string', // dom string boolean function number string|number\n        isRequire: true\n      }\n     }\n     */\n    validate(position, data, ruleObj) {\n        let validateErrors = [];\n        Object.keys(ruleObj).map((key) => {\n            const rule = ruleObj[key];\n            let dataValue = data[key];\n            if (this.isUndefined(dataValue)) {\n                /**\n                 * 值空缺\n                 */\n                if (rule.isRequire) {\n                    validateErrors.push({\n                        key: key,\n                        message: `${key} is required`\n                    });\n                }\n            }\n            else {\n                /**\n                 * 检查类型\n                 */\n                switch (rule.type.toLowerCase()) {\n                    case 'dom':\n                        if (!this.isDOM(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected dom, but get other type`\n                            });\n                        }\n                        break;\n                    case 'string':\n                        if (!this.isValidString(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected string, but get other type`\n                            });\n                        }\n                        break;\n                    case 'boolean':\n                        if (!this.isBoolean(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected boolean, but get other type`\n                            });\n                        }\n                        break;\n                    case 'function':\n                        if (!this.isFunction(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected function, but get other type`\n                            });\n                        }\n                        break;\n                    case 'number':\n                        if (!this.isNumber(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected number, but get other type`\n                            });\n                        }\n                        break;\n                    case 'object':\n                        if (!this.isObject(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected object, but get other type`\n                            });\n                        }\n                        break;\n                    case 'array':\n                        if (!this.isValidArray(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected array, but get other type`\n                            });\n                        }\n                        break;\n                    default:\n                        validateErrors.push({\n                            key: key,\n                            message: `${key}的类型未知: ${rule.type.toLowerCase()}`\n                        });\n                }\n                /**\n                 * 检查是否为枚举之一\n                 */\n                if (rule.enum && !rule.enum.includes(dataValue)) {\n                    validateErrors.push({\n                        key,\n                        message: `Expected ${key} to be one of ${JSON.stringify(rule.enum)}, but it is not`\n                    });\n                }\n            }\n        });\n        if (validateErrors.length > 0) {\n            console.error('白板-->', `${position}参数异常`);\n            console.error('白板-->', '错误信息：', validateErrors);\n            console.error('白板-->', '参数为：', data);\n        }\n        return validateErrors.length === 0;\n    }\n};\n","import EM from 'eventemitter3';\nconst globalHub = new EM();\nexport default globalHub;\n","import { Coord } from '../Model/Point';\nimport Debug from 'debug';\nimport logger from '../../debug';\n/**\n * 为什么每次开始都需要调用beginPath\n * https://codetheory.in/why-clearrect-might-not-be-clearing-canvas-pixels/\n */\nconst debug = Debug('DrawWorker/CanvasHelper');\nexport function setLineStyle(ctx) {\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n}\n/* eslint-disable camelcase */\nexport function setpixelated(context) {\n    if (context === null) {\n        return;\n    }\n    // context.translate(0.5, 0.5)\n    // context.lineWidth = .5;\n    context['imageSmoothingEnabled'] = false; /* standard */\n    context['mozImageSmoothingEnabled'] = false; /* Firefox */\n    context['oImageSmoothingEnabled'] = false; /* Opera */\n    context['webkitImageSmoothingEnabled'] = false; /* Safari */\n    context['msImageSmoothingEnabled'] = false; /* IE */\n    /* tslint:enable */\n}\n/**\n * 等比例缩放Canvas\n * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n * @param {ResizeCanvasOption} option 缩放比例\n * @private\n */\nexport function setCavansStyleSize(ctx, width, height) {\n    const cvs = ctx.canvas;\n    cvs.style.width = width + 'px';\n    cvs.style.height = height + 'px';\n}\n/**\n * 改变canvas的 width 和大小等等\n *\n * zhongkai: 将ctx内容拷贝到临时画布上，然后再将临时画布的内容拷贝回ctx上。这样做应该是比较低效的(todo)\n *\n * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n * @param {ResizeCanvasOption} option 缩放比例\n * @private\n */\nexport function setCanvasPropSize(ctx, option) {\n    const canvas = ctx.canvas;\n    let skip = false;\n    if (canvas.width == 0 || canvas.height == 0) {\n        skip = true;\n    }\n    const temp = document.createElement('canvas').getContext('2d');\n    if (!skip) {\n        temp.canvas.width = canvas.width;\n        temp.canvas.height = canvas.height;\n        setpixelated(temp);\n        setLineStyle(temp);\n        temp.drawImage(canvas, 0, 0, canvas.width, canvas.height);\n    }\n    canvas.width = option.width;\n    canvas.height = option.height;\n    // canvas.width = option.canvasWidth\n    // canvas.height = option.canvasHeight;\n    setLineStyle(ctx);\n    setpixelated(ctx);\n    if (!skip) {\n        setpixelated(temp);\n        ctx.drawImage(temp.canvas, 0, 0, canvas.width, canvas.height);\n    }\n}\nexport function applyCanvasLayout(canvas, { paddingLeft, paddingTop }) {\n    canvas.style.left = paddingLeft + 'px';\n    canvas.style.top = paddingTop + 'px';\n}\n/**\n   * 清除某个画板的内容\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @private\n   */\nexport function clearCtx(ctx) {\n    ctx.clearRect(-40, -40, ctx.canvas.width + 80, ctx.canvas.height + 80);\n}\n/**\n   * 绘制曲线\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {Coord} start 起始点\n   * @param {Coord} control 控制点\n   * @param {Coord} end 终止点\n   * @param {string} color 颜色\n   * @param {number} size 宽度，笔大小\n   * @private\n   */\nexport function free(ctx, start, control, end, color, size) {\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    ctx.beginPath();\n    // 用三个点画二次曲线，使笔迹光滑，降低锯齿感\n    if (start.x === end.x && start.y === end.y) {\n        // IE下使用quadraticCurveTo无法画点\n        ctx.lineTo(start.x, start.y);\n        //  rect(ctx, start, size / 4, size / 4, false, color)\n        return;\n    }\n    // ctx.beginPath()\n    ctx.moveTo(start.x, start.y);\n    ctx.quadraticCurveTo(control.x, control.y, end.x, end.y);\n    ctx.stroke();\n    debug('free');\n}\n/**\n   * 绘制直线\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {Coord} start 起始点\n   * @param {Coord} end 终止点\n   * @private\n   */\nexport function line(ctx, start, end, color) {\n    logger.log('line', arguments);\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    // ctx.save()\n    ctx.beginPath();\n    ctx.moveTo(start.x, start.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.stroke();\n    // ctx.closePath();\n    // ctx.restore()\n    debug('line');\n}\n/**\n   * 绘制矩形\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {Coord} start 起始点\n   * @param {number} w 宽度，单位px\n   * @param {number} h 高度，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function rect(ctx, start, w, h, fill = false, color) {\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fillRect(start.x, start.y, w, h);\n    }\n    else {\n        ctx.strokeRect(start.x, start.y, w, h);\n    }\n}\n/**\n   * 绘制圆角矩形\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} start 起始点\n   * @param {number} w 宽度，单位px\n   * @param {number} h 高度，单位px\n   * @param {*} radius 圆角半径，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function roundRect(ctx, start, w, h, radius, fill = false, color) {\n    const sx = start.x;\n    const sy = start.y;\n    const radiusX = w < 0 ? -radius : radius;\n    const radiusY = h < 0 ? -radius : radius;\n    ctx.beginPath();\n    ctx.moveTo(sx + radiusX, sy);\n    ctx.lineTo(sx + w - radiusX, sy);\n    ctx.quadraticCurveTo(sx + w, sy, sx + w, sy + radiusY);\n    ctx.lineTo(sx + w, sy + h - radiusY);\n    ctx.quadraticCurveTo(sx + w, sy + h, sx + w - radiusX, sy + h);\n    ctx.lineTo(sx + radiusX, sy + h);\n    ctx.quadraticCurveTo(sx, sy + h, sx, sy + h - radiusY);\n    ctx.lineTo(sx, sy + radiusY);\n    ctx.quadraticCurveTo(sx, sy, sx + radiusX, sy);\n    ctx.stroke();\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n}\n/**\n   * 绘制圆形\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} center 圆心\n   * @param {number} radius 半径，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function circle(ctx, center, radius, fill = false, color) {\n    // console.log('circle', center, radius, fill, color);\n    if (color) {\n        ctx.strokeStyle = color;\n    }\n    ctx.beginPath();\n    // arc(x,y,r,start,stop)\n    // ctx.arc(center.x, center.y, radius, 0, Math.PI * 2, true);\n    ctx.arc(center.x, center.y, radius, 0, Math.PI * 2);\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n    ctx.stroke();\n}\n/**\n   * 绘制椭圆\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} center 圆心\n   * @param {number} xRadius x半径，单位px\n   * @param {number} yRadius y半径，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function ellipse(ctx, center, xRadius, yRadius, fill = false, color) {\n    // console.log('ellipse', center, fill, color);\n    if (color) {\n        ctx.strokeStyle = color;\n    }\n    ctx.beginPath();\n    // arc(x,y,r,start,stop)\n    // ctx.arc(center.x, center.y, radius, 0, Math.PI * 2, true);\n    ctx.ellipse(center.x, center.y, xRadius, yRadius, 0, 0, Math.PI * 2);\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n    ctx.stroke();\n}\nfunction safeColorClamp(x) {\n    if (x < 0) {\n        return 0;\n    }\n    else if (x > 255) {\n        return 255;\n    }\n    else {\n        return x;\n    }\n}\n/**\n   * 为封闭区域填充颜色\n   * 算法是 flood fill（https://en.m.wikipedia.org/wiki/Flood_fill），找了个效率比较高的实现改成了js；也可能是scanline fill。\n   * TODO 为IE做Typed Array的polyfill\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {Coord} s 起始点\n   * @param {String} color 需要填充的颜色\n   * @param {Shape} shape 需要填充的颜色\n   * @private\n   */\nexport function fill(ctx, s, color, shape) {\n    const sx = Math.round(s.x);\n    const sy = Math.round(s.y);\n    ctx.save();\n    ctx.beginPath();\n    const img = ctx.getImageData(0, 0, Math.round(ctx.canvas.width), Math.round(ctx.canvas.height));\n    // logger.image(ctx.canvas.toDataURL(), 'fill, playground')\n    const { height: fullDisplayHeight, width: fullDisplayWidth } = img;\n    if (shape) {\n        shape.ctx.canvas.width = fullDisplayWidth;\n        shape.ctx.canvas.height = fullDisplayHeight;\n        setpixelated(shape.ctx);\n        setLineStyle(shape.ctx);\n    }\n    const X = 0;\n    const Y = 1;\n    const stroke = color || ctx.strokeStyle;\n    const r = parseInt(stroke.substr(1, 2), 16);\n    const g = parseInt(stroke.substr(3, 2), 16);\n    const b = parseInt(stroke.substr(5, 2), 16);\n    // >>> 0 运算转换为无符号32位整数\n    const fillColor = ((255 << 24) | (b << 16) | (g << 8) | r) >>> 0;\n    const start = [sx, sy];\n    // 临时空间，用来缓存填充区域的数据，然后注入到Shape里\n    let shapeImageData = shape.ctx.createImageData(fullDisplayWidth, fullDisplayHeight);\n    const shapeData = new Uint32Array(shapeImageData.data.buffer);\n    // buf8.set(img.data);\n    const data = new Uint32Array(img.data.buffer);\n    const startColor = data[sy * fullDisplayWidth + sx];\n    if (((startColor ^ fillColor) & 0xffffff) === 0) { // 颜色值相等\n        if (startColor >>> 24 === fillColor >>> 24) {\n            return;\n        }\n    }\n    const rgb = startColor & 0x00ffffff;\n    const r_start = (rgb & 0xff) >>> 0;\n    const g_start = (rgb & 0xff00) >>> 8;\n    const b_start = (rgb & 0xff0000) >>> 16;\n    const alpha_start = (startColor & 0xff000000) >>> 24;\n    // 色彩抖动范围\n    const R_MIN = safeColorClamp(r_start - 15);\n    const G_MIN = safeColorClamp(g_start - 15);\n    const B_MIN = safeColorClamp(b_start - 15);\n    const R_MAX = safeColorClamp(r_start + 15);\n    const G_MAX = safeColorClamp(g_start + 15);\n    const B_MAX = safeColorClamp(b_start + 15);\n    // 起点入队列\n    const queue = [start];\n    let curPixel;\n    const maxX = fullDisplayWidth - 1;\n    const maxY = fullDisplayHeight - 1;\n    // 比较颜色是否可以填充\n    function canFill(color) {\n        // return color === startColor\n        if (color === startColor) {\n            return true;\n        }\n        const alpha = (color & 0xff000000) >>> 24;\n        if (alpha_start < 10) { // 如果一开始的颜色是透明的，那么透明色是可以填充的\n            if (alpha === 0) {\n                return true;\n            }\n        }\n        const rgb = (color & 0x00ffffff) >>> 0;\n        const r = (rgb & 0xff) >>> 0;\n        const g = (rgb & 0xff00) >>> 8;\n        const b = (rgb & 0xff0000) >>> 16;\n        // 在颜色抖动范围内\n        if (r >= R_MIN && r <= R_MAX && g >= G_MIN && g <= G_MAX && b >= B_MIN && b <= B_MAX) {\n            // 如果颜色相同 ,且透明度变化在20内\n            if (Math.abs(alpha_start - alpha) < 10) {\n                return true;\n            }\n        }\n        return false;\n        // return color === startColor || (color & 0xff000000) >>> 0 < 0xff000000;\n    }\n    const seen = {};\n    let topLeft = new Coord(Math.round(fullDisplayWidth), Math.round(fullDisplayHeight));\n    let bottomRight = new Coord(0, 0);\n    const getImageDataIndex = (x, y) => y * fullDisplayWidth + x;\n    const getColor = (x, y) => data[getImageDataIndex(x, y)];\n    while ((curPixel = queue.pop())) {\n        const x = curPixel[X];\n        let y = curPixel[Y];\n        // 从当前点往上查找，\n        while (--y >= 0 && canFill(getColor(x, y))) { }\n        y++;\n        let reachLeft = false;\n        let reachRight = false;\n        while (y++ < maxY && canFill(getColor(x, y))) {\n            // 设置坐标点边界，好切出正确的大小\n            topLeft.topLeft(x, y);\n            bottomRight.bottomRight(x + 1, y + 1);\n            let imgDataIndex = getImageDataIndex(x, y); // curPixel[Y] * fullDisplayWidth + curPixel[X]\n            data[imgDataIndex] = fillColor;\n            shapeData[imgDataIndex] = fillColor;\n            seen[imgDataIndex] = true;\n            if (x > 0 && !seen[imgDataIndex - 1]) {\n                if (canFill(data[imgDataIndex - 1])) {\n                    if (!reachLeft) {\n                        queue.push([x - 1, y]);\n                        reachLeft = true;\n                    }\n                }\n                else if (reachLeft) {\n                    reachLeft = false;\n                }\n            }\n            if (x < maxX && !seen[imgDataIndex + 1]) {\n                if (canFill(data[imgDataIndex + 1])) {\n                    if (!reachRight) {\n                        if (!seen[imgDataIndex + 1]) {\n                            queue.push([x + 1, y]);\n                        }\n                        reachRight = true;\n                    }\n                }\n                else if (reachRight) {\n                    reachRight = false;\n                }\n            }\n        }\n    }\n    // img.data.set(buf8);\n    const finalArea = Coord.areaSize(topLeft, bottomRight);\n    logger.log('fill area is ', finalArea);\n    logger.log('fill corner is ', topLeft, bottomRight);\n    shape.corner = [topLeft, bottomRight];\n    shape.ctx.putImageData(shapeImageData, 0, 0);\n    let smallImageData = shape.ctx.getImageData(topLeft.x, topLeft.y, finalArea.width, finalArea.height);\n    logger.log(smallImageData);\n    shape.ctx.canvas.height = smallImageData.height;\n    shape.ctx.canvas.width = smallImageData.width;\n    setpixelated(shape.ctx);\n    setLineStyle(shape.ctx);\n    shape.ctx.putImageData(smallImageData, 0, 0);\n    console.log('shape:', shape.ctx.canvas.toDataURL());\n    clearCtx(ctx);\n    logger.image(ctx.canvas.toDataURL(), 'ctx.canvas');\n    logger.image(shape.ctx.canvas.toDataURL(), 'shape.ctx');\n    ctx.putImageData(img, 0, 0);\n    console.error(shape.ctx.canvas.toDataURL());\n    logger.image(ctx.canvas.toDataURL(), 'final');\n    shape.ctx.beginPath();\n    ctx.restore();\n}\n/**\n   * 绘制字\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} start 起始点\n   * @param {string} text 文本内容\n   * @param {number} size 字体大小，单位px\n   * @param {boolean} fill 是否填充\n   * @private\n   */\nexport function text(ctx, start, text, size, fill = true, color) {\n    const x = start.x;\n    const y = start.y;\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    ctx.font = size + 'px \"微软雅黑\",Arial';\n    ctx.textBaseline = 'top';\n    // ctx.textBaseline = 'bottom';\n    ctx.textAlign = 'left';\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fillText(text, x, y);\n    }\n    else {\n        ctx.strokeText(text, x, y);\n    }\n    ctx.beginPath();\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","import logger from \"../debug\";\nimport { WActions } from \"./Itypes\";\nimport { StartAction, MoveAction, EndAction, ClearAckAction, LaserPenAction, LaserPenEndAction, SyncAction, RevokeAction, SerialAction, ClearAction, RedoAction, FileAction, CalibrateAction, SyncRequestAction, SyncPrepareAction, SyncPrepareAckAction, TextAction, VersionAction } from \"./Actions\";\n/**\n *  在WebSocket里传输的是Command, 白板内使用的是Action\n */\n/**\n * 将Array<Action>转化为command字符串。command之间用分号连接\n *\n * @param anyActions\n */\nexport function packBulk(anyActions) {\n    let str = anyActions.map(anyAction => pack(anyAction)).join(';') + ';';\n    logger.m.syncmanager('packBulk anyAction', str);\n    return str;\n}\n/**\n * 将动作转化为字符串(command)\n *\n * 示例：\n * 输入： MoveAction(x=0.3, y=0.5)\n * 输出： “2:0.3, 0.5”\n *\n * @param anyAction\n * @param isP2P\n */\nexport function pack(anyAction, isP2P) {\n    logger.m.syncmanager('pack anyAction', anyAction);\n    console.assert(anyAction.action !== undefined, 'ooops');\n    let { action } = anyAction;\n    let str = action.toString();\n    return str;\n}\n/**\n * 将连续的command转换为Array<Action>\n *\n * @param data\n */\nexport function unpackBulk(data) {\n    var actions = [];\n    const ops = data.split(';');\n    ops.forEach(op => {\n        const action = unpack(op);\n        if (action) {\n            actions.push(action);\n        }\n    });\n    return actions;\n}\n/**\n * 将command转化为action。action是js对象，包含动作的各个属性值。\n *\n * 示例：\n * 输入： \"2:0.3,0.5\"\n * 输出： MoveAction(x=0.3, y=0.5)\n *\n * @param data\n */\nexport function unpack(data) {\n    if (!data) {\n        return;\n    }\n    const actionIndex = data.indexOf(':');\n    logger.m.syncmanager('unpack command ', data);\n    let action;\n    let valueStr;\n    /**\n     * +data将data转换为数值\n     * 若actionIndex == -1, 则该命令没有附加valueStr。\n     */\n    if (actionIndex == -1) {\n        action = +data;\n        valueStr = '';\n    }\n    else {\n        action = +(data.slice(0, actionIndex));\n        valueStr = data.slice(actionIndex + 1, data.length);\n    }\n    logger.command('unpack', data);\n    switch (action) {\n        case WActions.START:\n            return StartAction.fromString(valueStr);\n        case WActions.MOVE:\n            return MoveAction.fromString(valueStr);\n        case WActions.END:\n            return EndAction.fromString(valueStr);\n        case WActions.REVOKE:\n            return RevokeAction.fromString(valueStr);\n        case WActions.SERIAL:\n            return SerialAction.fromString(valueStr);\n        case WActions.CLEAR:\n            return ClearAction.fromString(valueStr);\n        case WActions.CLEAR_ACK:\n            return ClearAckAction.fromString(valueStr);\n        case WActions.LASER_PEN:\n            return LaserPenAction.fromString(valueStr);\n        case WActions.SYNC_REQUEST:\n            return SyncRequestAction.fromString(valueStr); // TODO\n        case WActions.SYNC:\n            return SyncAction.fromString(valueStr);\n        // return {\n        //   action: action,\n        //   sync: {\n        //     account: value[0],\n        //     dataMap: {},\n        //     all: value[1] as '0' | '1',\n        //     index: +value[2],\n        //     num: +value[3]\n        //   }\n        // }\n        case WActions.SYNC_PREPARE:\n            return SyncPrepareAction.fromString(valueStr);\n        case WActions.SYNC_PREPARE_ACK:\n            return SyncPrepareAckAction.fromString(valueStr);\n        case WActions.LASER_PEN_END:\n            return LaserPenEndAction.fromString(valueStr);\n        case WActions.FILE:\n            return FileAction.fromString(valueStr);\n        // return {\n        //   action: action,\n        //   file: {\n        //     docId: value[0] || '',\n        //     currentPage: value[1] || '',\n        //     pageCount: value[2] || '',\n        //     type: value[3] === '0' ? 'img' : (value[3] === '1' ? 'h5' : ''),\n        //     url: value[4] || '',\n        //     urlStr: value[5] || '',\n        //     h5Cmd: value[6] || ''\n        //   }\n        // }\n        case WActions.REDO:\n            return RedoAction.fromString(valueStr);\n        case WActions.CALIBRATE:\n            return CalibrateAction.fromString(valueStr);\n        case WActions.TEXT:\n            return TextAction.fromString(valueStr);\n        case WActions.VERSION:\n            return VersionAction.fromString(valueStr);\n        default:\n            const fullCaseChecker = action;\n    }\n}\n","const POINT_MATCHER = /\\(x:([.\\d]+),y:([.\\d]+)\\)/;\n// 点坐标，只能是相对位置的百分比\nclass Point {\n    constructor(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    destroy() {\n    }\n    clone() {\n        return new Point(this.x, this.y);\n    }\n    static fromString(str) {\n        let match = POINT_MATCHER.exec(str);\n        if (match) {\n            return new Point(+match[1], +match[2]);\n        }\n        else {\n            return new Point(0, 0);\n        }\n    }\n    toString() {\n        return `(x:${(this.x).toFixed(8)},y:${(this.y).toFixed(8)})`;\n    }\n    toCoord(width, height) {\n        return new Coord(this.x * width, this.y * height);\n    }\n    copy(point) {\n        this.x = point.x;\n        this.y = point.y;\n    }\n    minus(p) {\n        return new Point(this.x - p.x, this.y - p.y);\n    }\n    topLeft(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x < this.x) {\n                this.x = x;\n            }\n            if (y < this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Point) {\n            this.topLeft(x.x, x.y);\n        }\n        return this;\n    }\n    bottomRight(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x > this.x) {\n                this.x = x;\n            }\n            if (y > this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Point) {\n            this.bottomRight(x.x, x.y);\n        }\n        return this;\n    }\n    static middle(a, b) {\n        return new Point((a.x + b.x) / 2, (a.y + b.y) / 2);\n    }\n    static areaSize(a, b) {\n        return {\n            width: Math.ceil(Math.abs(a.x - b.x)),\n            height: Math.ceil(Math.abs(a.y - b.y)),\n        };\n    }\n    static clone({ x, y }) {\n        return new Point(x, y);\n    }\n}\nexport default Point;\nexport class Coord {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    destroy() {\n    }\n    clone() {\n        return new Coord(this.x, this.y);\n    }\n    static fromString(str, width, height) {\n        let match = POINT_MATCHER.exec(str);\n        if (match) {\n            return new Coord(Math.round(+match[1] * width), Math.round(+match[2] * height));\n        }\n        else {\n            return new Coord(0, 0);\n        }\n    }\n    toPoint(width, height) {\n        return new Point(this.x / width, this.y / height);\n    }\n    copy(point) {\n        this.x = point.x;\n        this.y = point.y;\n    }\n    minus(p) {\n        return new Coord(this.x - p.x, this.y - p.y);\n    }\n    topLeft(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x < this.x) {\n                this.x = x;\n            }\n            if (y < this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Coord) {\n            this.topLeft(x.x, x.y);\n        }\n        return this;\n    }\n    bottomRight(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x > this.x) {\n                this.x = x;\n            }\n            if (y > this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Coord) {\n            this.bottomRight(x.x, x.y);\n        }\n        return this;\n    }\n    static middle(a, b) {\n        return new Coord((a.x + b.x) / 2, (a.y + b.y) / 2);\n    }\n    static areaSize(a, b) {\n        return {\n            width: Math.ceil(Math.abs(a.x - b.x)),\n            height: Math.ceil(Math.abs(a.y - b.y)),\n        };\n    }\n    static clone({ x, y }) {\n        return new Coord(x, y);\n    }\n}\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n","/**\n * page，board类操作都必须生成快照，然后通过connector的sendData方法发送给其他客户端。\n *\n * syncRequest，resetRequest这一类同步操作不需要生成快照。它们属于同步逻辑。\n */\nimport Container from \"./container\";\nimport OpsManager from \"./ops/OpsManager\";\nimport Dispatcher from \"./misc/dispatcher\";\nimport Room from \"./room\";\nimport DataHub from \"./dataHub\";\nimport { TouchPlatformArray, PlatformArray } from \"./types\";\nimport PreviewFactory from \"./previewFactory\";\nimport AppConfig from \"./config\";\nimport Camera from \"./camera\";\nimport validate from \"../util/validate\";\nimport Player from \"./player\";\nimport drawConfig from \"./ops/DrawOp/drawConfig\";\nimport Simulator from \"./simulator\";\nimport Vision from \"./camera/vision\";\nimport { showToast } from \"../component/toast\";\nimport { popupImageChooserAndAddImage, uploadAndAddImage } from \"./media/util\";\nimport isBase64 from 'is-base64';\nimport textConfig from \"./ops/TextOp/textConfig\";\nclass App {\n    constructor(opts) {\n        /**\n         * 是否是录像模式\n         */\n        this.isRecordPlayer = false;\n        /**\n         * 编辑权限是否开启\n         */\n        this.editEnabled = false;\n        /**\n         * 是否展示鼠标\n         */\n        this.showCursor = false;\n        /**\n         * 信令是否处于连接状态\n         */\n        this.isConnected = false;\n        this.account = opts.account;\n        this.nickname = opts.nickname ? opts.nickname : opts.account;\n        this.platform = opts.platform;\n        this.defaultCameraBound = opts.cameraBound;\n        this.disableAutoResize = opts.disableAutoResize !== undefined ? opts.disableAutoResize : true;\n        this.nim = opts.nim;\n        this.simulator = new Simulator(this);\n        this.configInstance = new AppConfig(this);\n        this.dispatcher = new Dispatcher();\n        this.opsManager = new OpsManager(this);\n        this.opsManager.extendDefaultOps();\n        this.dataHub = new DataHub(this, opts.connector);\n        this.container = new Container(this);\n        this.room = new Room(this, this.dataHub);\n        this.container.addOpsManager(this.opsManager);\n        this.opsManager.addContainer(this.container);\n        this.camera = new Camera(this, this.defaultCameraBound);\n        this.vision = new Vision(this);\n        this.isRecordPlayer = opts.isRecordPlayer ? true : false;\n        if (!opts.isRecordPlayer) {\n            this.previewFactory = new PreviewFactory(this);\n        }\n        if (opts.isRecordPlayer) {\n            this.player = new Player(this);\n        }\n        this.setContainer(opts.container);\n    }\n    get ifDeviceSupportOrientation() {\n        return TouchPlatformArray.includes(this.platform.toLowerCase());\n    }\n    /**\n     * 当编辑权限开启，且不处于同步时，才能够编辑\n     */\n    get editable() {\n        return this.editEnabled && !this.dataHub.isSynchronizing && this.isConnected;\n    }\n    get appConfig() {\n        return this.configInstance.getAppConfig();\n    }\n    getStrokeWidth() {\n        return drawConfig.strokeWidth;\n    }\n    getOpacity() {\n        return drawConfig.opacity;\n    }\n    getColor() {\n        return drawConfig.strokeColor;\n    }\n    getRedoCount() {\n        return this.opsManager.opMap['redo'].getCount();\n    }\n    getUndoCount() {\n        return this.opsManager.opMap['undo'].getCount();\n    }\n    isClearAvailable() {\n        return this.opsManager.opMap['clear'].isAvailable();\n    }\n    isTextAreaFocus() {\n        return this.opsManager.opMap['text'].isFocus;\n    }\n    getSelectedIds() {\n        return this.opsManager.opMap['select'].getSelectedIds();\n    }\n    getZoomFactor() {\n        return this.camera.zoomFactor;\n    }\n    getCameraBound() {\n        return this.camera.getContainerWorldRect();\n    }\n    setAppConfig(config) {\n        this.configInstance.setAppConfig(config);\n    }\n    setContainer(el) {\n        el.innerHTML = '';\n        this.container.appendTo(el);\n    }\n    /**\n     * sdk初始化之后，请求同步数据\n     *\n     * 主播登录后，首先尝试恢复数据。恢复数据后，向其他用户广播恢复的数据\n     * 主播登录需要置空所有其他用户\n     * 非主播登录则需要向主播发送同步请求\n     */\n    readyToSyncData() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.readyToSyncData');\n        }\n        document.body.style.cursor = 'auto';\n        this.dataHub.sendSyncRequest();\n    }\n    setIsConnected(connected) {\n        this.isConnected = connected;\n        if (!this.isConnected) {\n            document.body.style.cursor = 'auto';\n        }\n    }\n    resetState() {\n        this.room.reset();\n        this.dataHub.reset();\n    }\n    addImage(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addImage', opt);\n        }\n        validate.validate('drawPlugin.addImage', opt, {\n            url: {\n                type: 'string',\n                isRequire: true\n            },\n            width: {\n                type: 'number'\n            },\n            height: {\n                type: 'number'\n            }\n        });\n        if (isBase64(opt.url) || isBase64(opt.url, { allowMime: true })) {\n            /**\n             * 先将base64图片上传到nos服务器，再加入白板中\n             */\n            uploadAndAddImage(this, { dataURL: opt.url }, { width: opt.width, height: opt.height });\n        }\n        else if (opt.url.length > 10000) {\n            console.error('白板-->', 'drawPlugin.addImage opt.url长度不应该大于10000');\n        }\n        else {\n            this.emit('op:image:upload', opt.url, {\n                width: opt.width,\n                height: opt.height\n            });\n        }\n    }\n    /**\n     * 选择本地图片\n     */\n    addLocalImage(opt = {}) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addLocalImage', opt);\n        }\n        validate.validate('drawPlugin.addLocalImage', opt, {\n            width: {\n                type: 'number'\n            },\n            height: {\n                type: 'number'\n            }\n        });\n        popupImageChooserAndAddImage(this, { width: opt.width, height: opt.height });\n    }\n    addVideo(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addVideo', opt);\n        }\n        validate.validate('drawPlugin.addVideo', opt, {\n            url: {\n                type: 'string',\n                isRequire: true\n            },\n            width: {\n                type: 'number'\n            }\n        });\n        this.emit('op:video:insert', opt.url, {\n            width: opt.width\n        });\n    }\n    /**\n     * 设置页面的背景\n     * @param url\n     * @param width\n     * @param height\n     */\n    setPageBackground(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setPageBackground', opt);\n        }\n        validate.validate('drawPlugin.setPageBackground', opt, {\n            url: {\n                type: 'string',\n                isRequire: true\n            },\n            width: {\n                type: 'number',\n                isRequire: true\n            },\n            height: {\n                type: 'number',\n                isRequire: true\n            }\n        });\n        this.emit('op:background:imageUpload', opt.url, {\n            width: opt.width,\n            height: opt.height,\n            pageIndex: opt.pageIndex\n        });\n    }\n    /**\n     * 当前页面是否有background\n     */\n    hasBackground() {\n        return this.room.currBoard.currPage.backgroundSnapshot ? true : false;\n    }\n    /**\n     * 添加文档\n     */\n    addDoc(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addDoc', opt);\n        }\n        validate.validate('drawPlugin.addDoc', opt, {\n            docName: {\n                type: 'string',\n                isRequire: true\n            },\n            params: {\n                type: 'array',\n                isRequire: true\n            }\n        });\n        for (let i = 0; i < opt.params.length; i++) {\n            validate.validate(`drawPlugin.addDoc opt.params[${i}]`, opt.params[i], {\n                url: {\n                    type: 'string',\n                    isRequire: true\n                },\n                width: {\n                    type: 'number',\n                    isRequire: true\n                },\n                height: {\n                    type: 'number',\n                    isRequire: true\n                }\n            });\n        }\n        if (opt.params.length === 0) {\n            throw new Error('addDoc参数中params的数组长度必须大于0');\n        }\n        const { docName, params } = opt;\n        const count = Object.keys(this.room.boards).filter(name => {\n            return name.startsWith(docName);\n        }).length;\n        if (count === 0) {\n            this.addBoard(docName, params.length);\n        }\n        else {\n            this.addBoard(docName + '-' + count, params.length);\n        }\n        for (let i = 0; i < params.length; i++) {\n            this.setPageBackground({\n                url: params[i].url,\n                width: params[i].width,\n                height: params[i].height,\n                pageIndex: i\n            });\n        }\n    }\n    setTool(toolName) {\n        this.emit(`op:${toolName}:activate`);\n    }\n    setFontsize(fontsize) {\n        this.emit('op:text:fontsize', fontsize);\n    }\n    setFontFamily(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setFontFamily', JSON.stringify(opt));\n        }\n        if (!opt.fontFace && !opt.fontFamily) {\n            return console.error('白板--> drawPlugin.setFontFamily必须提供fontFamily或者fontFace');\n        }\n        if (opt.fontFace && Array.isArray(opt.fontFace) && opt.fontFace.length === 0) {\n            return console.error('白板--> setFontFamily。你设置了fontFace为数组, 但是数组长度为0');\n        }\n        if (opt.fontFamily && LOG) {\n            console.log(`白板--> 设置字体为: ${opt.fontFamily}, 您提供的字体应该在各个设备中均可用。如果某些设备中字体不可用，请同时设置opt.fontFace，作为字体的下载地址`);\n        }\n        if (opt.fontFace && LOG) {\n            console.log(`你设置了fontFace, 请保证该URL能被您用户的设备访问, 可以通过在web端检查浏览器的Network->font检测字体是否被下载`);\n        }\n        if (opt.fontFamily) {\n            textConfig.setFontFamily(opt.fontFamily);\n        }\n        if (opt.fontFace && Array.isArray(opt.fontFace)) {\n            textConfig.setFontFace(opt.fontFace);\n        }\n        else if (opt.fontFace) {\n            textConfig.setFontFace([opt.fontFace]);\n        }\n        /**\n         * 更新已实例化的textArea，pre元素的fontfamily\n         */\n        this.opsManager.opMap['text'].updateFontFamily();\n    }\n    setColor(color) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setColor', color);\n        }\n        drawConfig.setStrokeColor(color);\n        this.emit('event:appState:change', 'renderColor', color);\n    }\n    setShapeFill() {\n        console.error('setShapeFill已弃用。如果你需要设置图形填充，可以直接设置tool为rect-fill, 或者ellipse-fill');\n    }\n    setStrokeWidth(width) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setStrokeWidth', width);\n        }\n        drawConfig.setStrokeWidth(width);\n        this.emit('event:appState:change', 'renderWidth', width);\n    }\n    setOpacity(opacity) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setOpacity', opacity);\n        }\n        if (opacity > 1 || opacity < 0) {\n            return console.error('drawPlugin.setOpacity的透明度必须大于0，小于等于1');\n        }\n        drawConfig.setOpacity(opacity);\n        this.emit('event:appState:change', 'opacity', opacity);\n    }\n    setShowCursor(value) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setShowCursor', value);\n        }\n        this.showCursor = value;\n    }\n    enableDraw(editEnabled) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.enableDraw', editEnabled);\n        }\n        validate.validate('drawPlugin.enableDraw', { editEnabled }, {\n            editEnabled: {\n                type: 'boolean',\n                isRequire: true\n            }\n        });\n        if (this.editEnabled === editEnabled) {\n            return;\n        }\n        /**\n         * 不可编辑时，鼠标样式需要还原\n         */\n        if (!editEnabled) {\n            document.body.style.cursor = 'auto';\n        }\n        this.editEnabled = editEnabled;\n        this.opsManager.hooks.enableDrawChange.call(editEnabled);\n        this.emit('event:editable:change', this.editable);\n    }\n    enableCameraTransform(enable = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.enableCameraTransform', enable);\n        }\n        this.setAppConfig({\n            cameraTransformEnabled: enable\n        });\n    }\n    resetCamera(animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.resetCamera');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:reset-camera:exec', animate);\n        }\n    }\n    setCameraBound(boundary, animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setCameraBound boundary: ', boundary, 'animate: ', animate);\n        }\n        const valid = validate.validate('drawPlugin.setCameraBound', boundary, {\n            centerX: {\n                type: 'number',\n                isRequire: true\n            },\n            centerY: {\n                type: 'number',\n                isRequire: true\n            },\n            width: {\n                type: 'number',\n                isRequire: true\n            },\n            height: {\n                type: 'number',\n                isRequire: true\n            }\n        });\n        if (valid) {\n            this.emit('op:camera-bound:send', boundary, animate);\n        }\n    }\n    fitToContent(animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.fitToContent');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:fit-to-content:exec', animate);\n        }\n    }\n    fitToDoc(animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.fitToDoc');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:fit-to-doc:exec', animate);\n        }\n    }\n    zoomIn() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.zoomIn');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:zoom:in');\n        }\n    }\n    zoomOut() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.zoomOut');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:zoom:out');\n        }\n    }\n    zoomTo(scale, animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.zoomTo: ', scale, ' animate: ', animate);\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:zoom:to', scale, animate);\n        }\n    }\n    undo() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.undo');\n        }\n        this.emit('op:undo:exec');\n    }\n    redo() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.redo');\n        }\n        this.emit('op:redo:exec');\n    }\n    clear() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.clear');\n        }\n        this.emit('op:clear:exec');\n    }\n    duplicate() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.duplicate');\n        }\n        this.emit('op:duplicate:exec');\n    }\n    /**\n     * 删除白板中选中的元素\n     */\n    deleteSelectedElements() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.deleteSelectedElements');\n        }\n        this.emit('op:delete:exec');\n    }\n    addPage(opt) {\n        if (LOG && typeof opt === 'object') {\n            console.log('白板-->', 'drawPlugin.addPage', JSON.stringify(opt));\n        }\n        else if (LOG) {\n            console.log('白板-->', 'drawPlugin.addPage, insertAfter', opt);\n        }\n        if (typeof opt === 'number') {\n            opt = {\n                insertAfter: opt\n            };\n        }\n        else if (!opt) {\n            opt = {};\n        }\n        this.emit('op:page:add', opt);\n    }\n    deletePage(index) {\n        const board = this.room.currBoard;\n        const builtInIndex = board.getPageBuiltInIndex(index);\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.deletePage: ', index, 'builtInIndex', builtInIndex);\n        }\n        this.emit('op:page:delete', builtInIndex);\n    }\n    gotoPage(index) {\n        const board = this.room.currBoard;\n        const builtInIndex = board.getPageBuiltInIndex(index);\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoPage: ', index, 'buildInIndex', builtInIndex);\n        }\n        if (isNaN(builtInIndex)) {\n            console.error(`白板--> 第${index + 1}不存在，当前文档内的页面总数为: ${this.room.currBoard.pageNames.length}`);\n        }\n        else {\n            this.emit('op:page:goto', builtInIndex);\n        }\n    }\n    gotoFirstPage() {\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex > 0) {\n            this.gotoPage(0);\n        }\n    }\n    gotoPrevPage() {\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex > 0) {\n            this.gotoPage(currPageIndex - 1);\n        }\n    }\n    gotoNextPage() {\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex < board.pageNames.length - 1) {\n            this.gotoPage(currPageIndex + 1);\n        }\n    }\n    gotoLastPage() {\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex < board.pageNames.length - 1) {\n            this.gotoPage(board.pageNames.length - 1);\n        }\n    }\n    gotoBoard(boardName) {\n        validate.validate('drawPlugin.gotoBoard', { boardName }, {\n            boardName: {\n                type: 'string',\n                isRequire: true\n            }\n        });\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoBoard:', boardName);\n        }\n        this.emit('op:board:goto', boardName);\n    }\n    addBoard(boardName, pageCount) {\n        validate.validate('drawPlugin.addBoard', { boardName }, {\n            boardName: {\n                type: 'string',\n                isRequire: true\n            }\n        });\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addBoard, boardName:', boardName, ' pageCount:', pageCount);\n        }\n        this.emit('op:board:add', boardName, pageCount);\n    }\n    deleteBoard(boardName) {\n        validate.validate('drawPlugin.deleteBoard', { boardName }, {\n            boardName: {\n                type: 'string',\n                isRequire: true\n            }\n        });\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.deleteBoard: ', boardName);\n        }\n        this.emit('op:board:delete', boardName);\n    }\n    getPageInfos() {\n        return {\n            pageNames: this.opsManager.currBoard.pageNames.slice(),\n            currPage: this.opsManager.currBoard.currIndex,\n            activeIndex: this.opsManager.currBoard.getCurrPageIndex(),\n            pagePayloads: this.opsManager.currBoard.payloadOfPages\n        };\n    }\n    getBoardInfos() {\n        return {\n            boardNames: Object.keys(this.room.boards),\n            currBoard: this.room.currIndex,\n            currBoardDisplayName: this.room.currBoard.displayName,\n            boardDisplayNames: this.room.getBoardDisplayNames()\n        };\n    }\n    bindPreviewContainer(opts) {\n        var _a;\n        (_a = this.previewFactory) === null || _a === void 0 ? void 0 : _a.bindPreviewContainer(opts);\n    }\n    /**\n     * 开发者调用app.emit向内部模块发送事件\n     * @param rest\n     */\n    emit(events, ...args) {\n        this.dispatcher.emit(events, ...args);\n    }\n    /**\n     * 开发者调用app.on监听内部模块派发的事件\n     */\n    on(event, fn) {\n        this.dispatcher.on(event, fn);\n    }\n    /**\n     * 开发者调用app.on监听内部模块派发的事件\n     */\n    off(event, fn) {\n        this.dispatcher.off(event, fn);\n    }\n    getOpDoc(type) {\n        return this.opsManager.getOpDoc(type);\n    }\n    getCurrTool() {\n        var _a;\n        return (_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type;\n    }\n    /**\n     * 销毁各类事件监听，否则可能会造成内存泄漏\n     */\n    destroy() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.destroy');\n        }\n        this.dispatcher.destroy();\n        this.container.destroy();\n        document.body.style.cursor = 'auto';\n    }\n    addRecordData(records) {\n        var _a;\n        (_a = this.player) === null || _a === void 0 ? void 0 : _a.addRecordData(records);\n    }\n    seekTo(time) {\n        var _a;\n        (_a = this.player) === null || _a === void 0 ? void 0 : _a.seekTo(time);\n    }\n    /**\n     * 录像回放时，切换观看者的视角\n     * @param viewer\n     */\n    setViewer(viewer) {\n        var _a;\n        (_a = this.player) === null || _a === void 0 ? void 0 : _a.setViewer(viewer);\n    }\n    setSelfAsBroadcaster() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setSelfAsBroadcaster');\n        }\n        this.vision.setSelfAsBroadcaster();\n    }\n    /**\n     * 停止设置自己为广播者\n     */\n    unsetSelfAsBroadcaster() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.unsetSelfAsBroadcaster');\n        }\n        this.vision.unsetSelfAsBroadcaster();\n    }\n    /**\n     * 设置当前用户为跟随者，只有房间状态存在broadcaster时才可用\n     * 设置的目的是为了回放时接收到此数据，然后正确的还原用户当时的视角\n     */\n    setSelfAsFollower() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setSelfAsFollower');\n        }\n        this.vision.setSelfAsFollower();\n    }\n    /**\n     * 设置自己为自由视角。通过setSelfAsFollower可以重新设置为跟随者\n     */\n    setSelfAsFreeObserver() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setSelfAsFreeObserver');\n        }\n        this.vision.setSelfAsFreeObserver();\n    }\n    exportAsImage() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.exportAsImage');\n        }\n        //导出图片\n        const data = this.previewFactory.generatePreviewToDataUrl({\n            pageIndex: this.room.currBoard.currIndex.toString(),\n            boardName: this.room.currIndex,\n            state: 'ready'\n        });\n        var a = document.createElement(\"a\"); //Create <a>\n        a.href = data;\n        let boardName = this.room.currBoard.boardName === 'whiteboard' ? '白板' : this.room.currBoard.boardName;\n        let pageName = this.room.currBoard.currPage.pageIndex;\n        let pageIndex = this.room.currBoard.pageNames.indexOf(pageName);\n        a.download = `${boardName}-${pageIndex + 1}.png`; //File name Here\n        a.click(); //Downloaded file\n    }\n    /**\n     * 从白板服务器得到userList，并通过事件传递给外部。\n     * 外部可以根据此事件做出响应\n     */\n    setMemberList(userList) {\n        this.emit('event:member:change', userList.slice());\n    }\n}\nconst DrawPlugin = ({\n    getInstance: function (opt) {\n        if (LOG) {\n            console.log('白板-->', 'DrawPlugin.getInstance arguments:', opt);\n        }\n        validate.validate('DrawPlugin.instance', opt, {\n            account: {\n                type: 'string',\n                isRequire: true\n            },\n            nickname: {\n                type: 'string',\n                isRequire: false\n            },\n            container: {\n                type: 'dom',\n                isRequire: true\n            },\n            platform: {\n                type: 'string',\n                isRequire: true,\n                enum: PlatformArray\n            },\n            connector: {\n                type: 'object',\n                isRequire: true\n            },\n            nim: {\n                type: 'object',\n                isRequire: true\n            }\n        });\n        const app = new App(opt);\n        return app;\n    }\n});\nexport { App };\nexport default DrawPlugin;\n","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","/**\n * OpsManager将UI组件中的动作，canvas中的鼠标动作，键盘动作等等路由给对应的操作处理。\n *\n * 同时它还保存了当前Page的操作快照集合。\n */\nimport { cameraSnapshotTypes } from \"./types\";\nimport { SyncBailHook, SyncHook } from \"tapable\";\nimport PenOp from \"./DrawOp/PenOp\";\nimport LineOp from \"./DrawOp/LineOp\";\nimport SelectOp from \"./SelectOp\";\nimport MoveOp from \"./EditOp/MoveOp\";\nimport ScaleOp from \"./EditOp/ScaleOp\";\nimport DeleteOp from \"./EditOp/DeleteOp\";\nimport UndoOp from \"./HistoryOp/UndoOp\";\nimport RedoOp from \"./HistoryOp/RedoOp\";\nimport ClearOp from \"./ClearOp\";\nimport EraserOp from \"./EraserOp\";\nimport RectOp from \"./DrawOp/RectOp\";\nimport EllipseOp from \"./DrawOp/EllipseOp\";\nimport TextOp from \"./TextOp\";\nimport PageOp from \"./PageOp\";\nimport ImageOp from \"./ImageOp\";\nimport BoardOp from \"./BoardOp\";\nimport DuplicateOp from \"./EditOp/DupliateOp\";\nimport PenArrowOp from \"./DrawOp/PenArrowOp\";\nimport LineArrowOp from \"./DrawOp/LineArrowOp\";\nimport ElementEraserOp from \"./EraserOp/ElementEraserOp\";\nimport LaserOp from \"./LaserOp\";\nimport LockOp from './LockOp';\nimport BackgroundOp from \"./ImageOp/BackgroundOp\";\nimport PanOp from \"./CameraOp/PanOp\";\nimport ZoomOp from \"./CameraOp/ZoomOp\";\nimport ResetCameraOp from \"./CameraOp/ResetCameraOp\";\nimport MousePointerOp from \"./MousePointerOp\";\nimport ResizeCameraOp from \"./CameraOp/ResizeOp\";\nimport FitToContentOp from \"./CameraOp/FitToContent\";\nimport FitToDocOp from \"./CameraOp/FitToDoc\";\nimport CameraBoundOp from \"./CameraOp/CameraBoundOp\";\nimport RectFillOp from \"./DrawOp/RectFillOp\";\nimport EllipseFillOp from \"./DrawOp/EllipseFillOp\";\nimport VideoOp from \"./VideoOp\";\nclass OpsManager {\n    constructor(app) {\n        this.currOp = null;\n        this.opMap = {};\n        this.drawOpTypes = [];\n        this.app = app;\n        this.dispatcher = app.dispatcher;\n        /**\n         * ***********************侵入生命周期函数************************\n         *\n         * 目前可以侵入mousedown, mousemove, mouseup等函数。\n         * 钩子设置方式可以查看EditOp/MoveOp.ts\n         *\n         * 如果操作只在激活时监听鼠标动作，则不需要侵入生命周期函数。鼠标动作默认调用被激活操作（currOp）的鼠标处理函数。\n         * 如果非激活操作需要处理鼠标动作，比如移动操作，则需要添加hooks\n         *\n         * 当指定的处理函数返回任何值时，鼠标处理函数不再处理别的bailHook，并且不再处理激活操作的鼠标处理函数。\n         *\n         * **************************************************************\n         */\n        this.hooks = {\n            mousedown: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mouseup: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mousemove: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mouseleave: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mousewheel: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            resize: new SyncBailHook(['event', 'width', 'height']),\n            click: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            keyup: new SyncBailHook(['event']),\n            keydown: new SyncBailHook(['event']),\n            /**\n             * 添加操作时触发\n             */\n            addOpHook: new SyncHook(['snapshot', 'isNew']),\n            refresh: new SyncHook([]),\n            /**\n             * Op类型改变时触发\n             */\n            opChange: new SyncHook(['type']),\n            selectChange: new SyncHook(['prevSelectedOpIds', 'selectedOpIds']),\n            /**\n             * 页面信息变化时触发\n             */\n            prePageChange: new SyncHook(['snapshot']),\n            pageChange: new SyncHook(['snapshot']),\n            boardChange: new SyncHook([]),\n            /**\n             * 页面中资源加载完毕时触发\n             */\n            pageReady: new SyncHook(['boardName, pageIndex']),\n            /**\n             * enableDraw\n             */\n            enableDrawChange: new SyncHook(['enable'])\n        };\n    }\n    extendDefaultOps() {\n        this.extendOp(MousePointerOp);\n        this.extendDrawOp(PenOp);\n        this.extendDrawOp(PenArrowOp);\n        this.extendDrawOp(LineArrowOp);\n        this.extendDrawOp(LineOp);\n        this.extendDrawOp(RectOp);\n        this.extendDrawOp(RectFillOp);\n        this.extendDrawOp(EllipseFillOp);\n        this.extendDrawOp(EllipseOp);\n        this.extendOp(TextOp);\n        /** Laser的opChange函数应该在select之前处理 */\n        this.extendOp(LaserOp);\n        this.extendOp(SelectOp);\n        this.extendOp(ScaleOp);\n        this.extendOp(MoveOp);\n        this.extendOp(DeleteOp);\n        this.extendOp(DuplicateOp);\n        this.extendOp(UndoOp);\n        this.extendOp(RedoOp);\n        this.extendOp(ClearOp);\n        this.extendOp(EraserOp);\n        this.extendOp(ElementEraserOp);\n        this.extendOp(PageOp);\n        this.extendOp(BoardOp);\n        this.extendOp(ImageOp);\n        this.extendOp(VideoOp);\n        this.extendOp(BackgroundOp);\n        this.extendOp(LockOp);\n        this.extendOp(PanOp);\n        this.extendOp(ZoomOp);\n        this.extendOp(ResetCameraOp);\n        this.extendOp(ResizeCameraOp);\n        this.extendOp(CameraBoundOp);\n        this.extendOp(FitToContentOp);\n        this.extendOp(FitToDocOp);\n        this.setCurrOp('pen');\n    }\n    get currPage() {\n        return this.currBoard.pages[this.currBoard.currIndex];\n    }\n    get currBoard() {\n        return this.app.room.boards[this.app.room.currIndex];\n    }\n    get drawOpsOfPage() {\n        return this.currPage.drawOpQueue || {};\n    }\n    addContainer(container) {\n        this.container = container;\n    }\n    extendDrawOp(OpConstructor) {\n        const op = this.extendOp(OpConstructor);\n        this.drawOpTypes.push(op.type);\n    }\n    /**\n     * 注册Op。\n     *\n     * OpConstructor的类型应该为Operation Constructor。但是typescript设置为Operation Constrctor之后，印象中会有些奇怪的地方。\n     * 因此，这里用any定义，然后创建之后转为Operation类型。\n     *\n     */\n    extendOp(OpConstructor) {\n        var _a, _b;\n        const op = (new OpConstructor(this.app));\n        this.opMap[op.type] = op;\n        /**\n         * ***********************注册监听事件****************************\n         *\n         * 比如eventsToListen中返回事件key为pen:color, 会在app上注册op:pen:color事件。\n         * 用户通过app.on('op:pen:color', color)设置线段颜色。\n         *\n         * activate和exec是特殊事件。activate若设置为true，会在app上注册op:${type}:activate事件，\n         * 用户发送该事件会使此工具处于激活状态。比如可以设置当前操作为涂鸦。\n         *\n         * exec若设置为true，会在app上注册op:${type}:exec事件，\n         * 用户发送该事件会调用此操作的execCommand方法。通过发送该事件可以执行命令，如撤销，重做。\n         *\n         * **************************************************************\n         */\n        const eventsToListen = op.eventsToListen();\n        if (((_a = eventsToListen.activate) === null || _a === void 0 ? void 0 : _a.value) && ((_b = eventsToListen.exec) === null || _b === void 0 ? void 0 : _b.value)) {\n            throw new Error('DEV--> 操作不能同时设置activate和exec为true。操作不同同时为命令类操作，及状态类操作');\n        }\n        else if (eventsToListen.activate && eventsToListen.activate.value) {\n            this.dispatcher.on(`op:${op.type}:activate`, () => {\n                const isOpSet = this.setCurrOp(op.type);\n                if (isOpSet) {\n                    this.currOp.afterActivate();\n                }\n            });\n        }\n        else if (eventsToListen.exec && eventsToListen.exec.value) {\n            this.dispatcher.on(`op:${op.type}:exec`, op.execCommand.bind(op));\n        }\n        for (let key in eventsToListen) {\n            if (key !== 'activate' && key !== 'exec') {\n                this.dispatcher.on(`op:${key}`, eventsToListen[key].value);\n            }\n        }\n        return op;\n    }\n    getOpDoc(type) {\n        let strArr = [];\n        if (type !== undefined) {\n            strArr = this._getOpDoc(type);\n        }\n        else {\n            for (let type in this.opMap) {\n                strArr = strArr.concat(this._getOpDoc(type));\n                strArr.push('*************************************');\n            }\n            strArr.push(\"全局事件\\n\\n\" +\n                \"用法：app.on('event:add:snapshot', (data: {local: boolean, snapshot: IOPSnapshot}) => {})\\n\" +\n                \"作用： 接收到新的快照时发送此事件\\n\");\n            strArr.push('*************************************');\n        }\n        return strArr.join('\\n\\n');\n    }\n    /**\n     * 获取op和外界的接口。包括从外界接收的消息，以及发送给外界的消息两部分\n     * @param type\n     */\n    _getOpDoc(type) {\n        const strArr = [];\n        if (!this.opMap.hasOwnProperty(type)) {\n            console.log('DEV-->', `op:${type}不存在!!!!!!`);\n        }\n        else {\n            const op = this.opMap[type];\n            if (op.description) {\n                strArr.push(op.description);\n            }\n            const eventsToListen = op.eventsToListen();\n            for (const key in eventsToListen) {\n                const info = eventsToListen[key].information;\n                let event = `op:${key}`;\n                if (key === 'activate' || key === 'exec') {\n                    event = `op:${op.type}:${key}`;\n                }\n                strArr.push(`用法：app.emit('${event}'${info.args.length > 0 ? ', ' + info.args : ''})\\n作用：${info.message}`);\n            }\n        }\n        return strArr;\n    }\n    setCurrOp(type) {\n        var _a;\n        if (LOG) {\n            console.log('白板-->', `设置当前op为：${type}`);\n        }\n        if (((_a = this.currOp) === null || _a === void 0 ? void 0 : _a.type) !== type) {\n            document.body.style.cursor = 'default';\n            this.hooks.opChange.call(type);\n            this.currOp = this.opMap[type];\n            this.app.emit('event:appState:change', 'currTool', type);\n            return true;\n        }\n        return false;\n    }\n    currOpIsCamera() {\n        var _a;\n        return this.currOp && cameraSnapshotTypes.indexOf((_a = this.currOp) === null || _a === void 0 ? void 0 : _a.type) !== -1;\n    }\n    resize(event, width, height) {\n        // if (!this.app.editable && !this.currOpIsCamera()) return\n        const bailed = this.hooks.resize.call(event, width, height);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleResize' in this.currOp) {\n            this.currOp.handleResize(event, width, height);\n        }\n    }\n    mousedown(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mousedown.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseDown' in this.currOp) {\n            this.currOp.handleMouseDown(event, mx, my, clientX, clientY);\n        }\n    }\n    mouseup(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mouseup.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseUp' in this.currOp) {\n            this.currOp.handleMouseUp(event, mx, my, clientX, clientY);\n        }\n    }\n    mouseleave(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mouseleave.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseLeave' in this.currOp) {\n            this.currOp.handleMouseLeave(event, mx, my, clientX, clientY);\n        }\n    }\n    mousewheel(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mousewheel.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseWheel' in this.currOp) {\n            this.currOp.handleMouseWheel(event, mx, my, clientX, clientY);\n        }\n    }\n    mousemove(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mousemove.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseMove' in this.currOp) {\n            this.currOp.handleMouseMove(event, mx, my, clientX, clientY);\n        }\n    }\n    click(event, mx, my, clientX, clientY) {\n        if (!this.app.editable)\n            return;\n        const bailed = this.hooks.click.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleClick' in this.currOp) {\n            this.currOp.handleClick(event, mx, my, clientX, clientY);\n        }\n    }\n    keyup(event) {\n        if (!this.app.editable)\n            return;\n        const bailed = this.hooks.keyup.call(event);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleKeyUp' in this.currOp) {\n            this.currOp.handleKeyUp(event);\n        }\n    }\n    keydown(event) {\n        if (!this.app.editable)\n            return;\n        const bailed = this.hooks.keydown.call(event);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleKeyDown' in this.currOp) {\n            this.currOp.handleKeyDown(event);\n        }\n    }\n    draw(snapshot, ctx, opts) {\n        try {\n            const type = snapshot.data.type;\n            if (this.opMap[type]) {\n                this.opMap[type].draw(snapshot, ctx, opts);\n            }\n        }\n        catch (err) {\n            console.error('opsManager.draw error', err);\n        }\n    }\n    preview(snapshot, ctx, opts) {\n        try {\n            const type = snapshot.data.type;\n            this.opMap[type].preview(snapshot, ctx, opts);\n        }\n        catch (err) {\n            console.error('opsManager.preview error', err);\n        }\n    }\n    hide(snapshot, ctx, div) {\n        try {\n            const type = snapshot.data.type;\n            if (this.opMap[type]) {\n                this.opMap[type].hide(snapshot, ctx, div);\n            }\n        }\n        catch (err) {\n            console.error('opsManager.hide error', err);\n        }\n    }\n    /**\n     * 将快照及它的一部分合并\n     */\n    mergePartial(snapshot, partial) {\n        const type = snapshot.data.type;\n        if (this.opMap[type]) {\n            return this.opMap[type].mergePartial(snapshot, partial);\n        }\n        else {\n            console.error(`找不到type为${type}的教具类型`, JSON.stringify(snapshot));\n            return snapshot;\n        }\n    }\n    /**\n     * 合并两个增量数据，覆盖式合并。数组会累加在一起\n     * @param partial1\n     * @param partial2\n     * @returns\n     */\n    mergeTwoPartial(partial1, partial2) {\n        const res = {\n            opId: partial1.opId,\n            data: partial1.data\n        };\n        for (let key in partial2.data) {\n            if (Array.isArray(partial2.data[key])) {\n                if (Array.isArray(res.data[key])) {\n                    res.data[key] = res.data[key].concat(partial2.data[key]);\n                }\n                else {\n                    res.data[key] = partial2.data[key];\n                }\n            }\n            else {\n                res.data[key] = partial2.data[key];\n            }\n        }\n        return res;\n    }\n    /**\n     * 重置undo，redo次数\n     * 当主播从localStorage中恢复后，需要重置undo，redo的可用次数\n     */\n    resetUndoRedoCount() {\n        this.opMap['undo'].resetCount();\n        this.opMap['redo'].resetCount();\n    }\n    get selectOp() {\n        return this.opMap['select'];\n    }\n    get selectedOpIds() {\n        if (this.currOp !== this.opMap['select']) {\n            return [];\n        }\n        else {\n            return this.selectOp.selectedOpIds;\n        }\n    }\n    get inProgressSelectedOpIds() {\n        if (this.currOp !== this.opMap['select']) {\n            return [];\n        }\n        else {\n            return this.selectOp.inProgressSelectedOpIds;\n        }\n    }\n}\nexport default OpsManager;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nexports.__esModule = true;\nexports.Tapable = require(\"./Tapable\");\nexports.SyncHook = require(\"./SyncHook\");\nexports.SyncBailHook = require(\"./SyncBailHook\");\nexports.SyncWaterfallHook = require(\"./SyncWaterfallHook\");\nexports.SyncLoopHook = require(\"./SyncLoopHook\");\nexports.AsyncParallelHook = require(\"./AsyncParallelHook\");\nexports.AsyncParallelBailHook = require(\"./AsyncParallelBailHook\");\nexports.AsyncSeriesHook = require(\"./AsyncSeriesHook\");\nexports.AsyncSeriesBailHook = require(\"./AsyncSeriesBailHook\");\nexports.AsyncSeriesWaterfallHook = require(\"./AsyncSeriesWaterfallHook\");\nexports.HookMap = require(\"./HookMap\");\nexports.MultiHook = require(\"./MultiHook\");\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst util = require(\"util\");\nconst SyncBailHook = require(\"./SyncBailHook\");\n\nfunction Tapable() {\n\tthis._pluginCompat = new SyncBailHook([\"options\"]);\n\tthis._pluginCompat.tap(\n\t\t{\n\t\t\tname: \"Tapable camelCase\",\n\t\t\tstage: 100\n\t\t},\n\t\toptions => {\n\t\t\toptions.names.add(\n\t\t\t\toptions.name.replace(/[- ]([a-z])/g, (str, ch) => ch.toUpperCase())\n\t\t\t);\n\t\t}\n\t);\n\tthis._pluginCompat.tap(\n\t\t{\n\t\t\tname: \"Tapable this.hooks\",\n\t\t\tstage: 200\n\t\t},\n\t\toptions => {\n\t\t\tlet hook;\n\t\t\tfor (const name of options.names) {\n\t\t\t\thook = this.hooks[name];\n\t\t\t\tif (hook !== undefined) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hook !== undefined) {\n\t\t\t\tconst tapOpt = {\n\t\t\t\t\tname: options.fn.name || \"unnamed compat plugin\",\n\t\t\t\t\tstage: options.stage || 0\n\t\t\t\t};\n\t\t\t\tif (options.async) hook.tapAsync(tapOpt, options.fn);\n\t\t\t\telse hook.tap(tapOpt, options.fn);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t);\n}\nmodule.exports = Tapable;\n\nTapable.addCompatLayer = function addCompatLayer(instance) {\n\tTapable.call(instance);\n\tinstance.plugin = Tapable.prototype.plugin;\n\tinstance.apply = Tapable.prototype.apply;\n};\n\nTapable.prototype.plugin = util.deprecate(function plugin(name, fn) {\n\tif (Array.isArray(name)) {\n\t\tname.forEach(function(name) {\n\t\t\tthis.plugin(name, fn);\n\t\t}, this);\n\t\treturn;\n\t}\n\tconst result = this._pluginCompat.call({\n\t\tname: name,\n\t\tfn: fn,\n\t\tnames: new Set([name])\n\t});\n\tif (!result) {\n\t\tthrow new Error(\n\t\t\t`Plugin could not be registered at '${name}'. Hook was not found.\\n` +\n\t\t\t\t\"BREAKING CHANGE: There need to exist a hook at 'this.hooks'. \" +\n\t\t\t\t\"To create a compatibility layer for this hook, hook into 'this._pluginCompat'.\"\n\t\t);\n\t}\n}, \"Tapable.plugin is deprecated. Use new API on `.hooks` instead\");\n\nTapable.prototype.apply = util.deprecate(function apply() {\n\tfor (var i = 0; i < arguments.length; i++) {\n\t\targuments[i].apply(this);\n\t}\n}, \"Tapable.apply is deprecated. Call apply on the plugin directly instead\");\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D) {\n  return $Object.defineProperties(T, D);\n};\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncHookCodeFactory();\n\nclass SyncHook extends Hook {\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncWaterfallHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonResult: (i, result, next) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += `${this._args[0]} = ${result};\\n`;\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcode += next();\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone: () => onResult(this._args[0]),\n\t\t\tdoneReturns: resultReturns,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncWaterfallHookCodeFactory();\n\nclass SyncWaterfallHook extends Hook {\n\tconstructor(args) {\n\t\tsuper(args);\n\t\tif (args.length < 1)\n\t\t\tthrow new Error(\"Waterfall hooks must have at least one argument\");\n\t}\n\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncWaterfallHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncWaterfallHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncWaterfallHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncLoopHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsLooping({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncLoopHookCodeFactory();\n\nclass SyncLoopHook extends Hook {\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncLoopHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncLoopHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncLoopHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncParallelHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone }) {\n\t\treturn this.callTapsParallel({\n\t\t\tonError: (i, err, done, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncParallelHookCodeFactory();\n\nclass AsyncParallelHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncParallelHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncParallelHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncParallelBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, onDone }) {\n\t\tlet code = \"\";\n\t\tcode += `var _results = new Array(${this.options.taps.length});\\n`;\n\t\tcode += \"var _checkDone = () => {\\n\";\n\t\tcode += \"for(var i = 0; i < _results.length; i++) {\\n\";\n\t\tcode += \"var item = _results[i];\\n\";\n\t\tcode += \"if(item === undefined) return false;\\n\";\n\t\tcode += \"if(item.result !== undefined) {\\n\";\n\t\tcode += onResult(\"item.result\");\n\t\tcode += \"return true;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"if(item.error) {\\n\";\n\t\tcode += onError(\"item.error\");\n\t\tcode += \"return true;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"return false;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += this.callTapsParallel({\n\t\t\tonError: (i, err, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${i} < _results.length && ((_results.length = ${i +\n\t\t\t\t\t1}), (_results[${i}] = { error: ${err} }), _checkDone())) {\\n`;\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\tcode += done();\n\t\t\t\tcode += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonResult: (i, result, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${i} < _results.length && (${result} !== undefined && (_results.length = ${i +\n\t\t\t\t\t1}), (_results[${i}] = { result: ${result} }), _checkDone())) {\\n`;\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\tcode += done();\n\t\t\t\tcode += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonTap: (i, run, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tcode += `if(${i} >= _results.length) {\\n`;\n\t\t\t\t\tcode += done();\n\t\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\t}\n\t\t\t\tcode += run();\n\t\t\t\tif (i > 0) code += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone\n\t\t});\n\t\treturn code;\n\t}\n}\n\nconst factory = new AsyncParallelBailHookCodeFactory();\n\nclass AsyncParallelBailHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncParallelBailHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncParallelBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesHookCodeFactory();\n\nclass AsyncSeriesHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncSeriesHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncSeriesHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonResult: (i, result, next) =>\n\t\t\t\t`if(${result} !== undefined) {\\n${onResult(\n\t\t\t\t\tresult\n\t\t\t\t)};\\n} else {\\n${next()}}\\n`,\n\t\t\tresultReturns,\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesBailHookCodeFactory();\n\nclass AsyncSeriesBailHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncSeriesBailHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncSeriesBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesWaterfallHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonResult: (i, result, next) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += `${this._args[0]} = ${result};\\n`;\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcode += next();\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone: () => onResult(this._args[0])\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesWaterfallHookCodeFactory();\n\nclass AsyncSeriesWaterfallHook extends Hook {\n\tconstructor(args) {\n\t\tsuper(args);\n\t\tif (args.length < 1)\n\t\t\tthrow new Error(\"Waterfall hooks must have at least one argument\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncSeriesWaterfallHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncSeriesWaterfallHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass HookMap {\n\tconstructor(factory) {\n\t\tthis._map = new Map();\n\t\tthis._factory = factory;\n\t\tthis._interceptors = [];\n\t}\n\n\tget(key) {\n\t\treturn this._map.get(key);\n\t}\n\n\tfor(key) {\n\t\tconst hook = this.get(key);\n\t\tif (hook !== undefined) {\n\t\t\treturn hook;\n\t\t}\n\t\tlet newHook = this._factory(key);\n\t\tconst interceptors = this._interceptors;\n\t\tfor (let i = 0; i < interceptors.length; i++) {\n\t\t\tnewHook = interceptors[i].factory(key, newHook);\n\t\t}\n\t\tthis._map.set(key, newHook);\n\t\treturn newHook;\n\t}\n\n\tintercept(interceptor) {\n\t\tthis._interceptors.push(\n\t\t\tObject.assign(\n\t\t\t\t{\n\t\t\t\t\tfactory: (key, hook) => hook\n\t\t\t\t},\n\t\t\t\tinterceptor\n\t\t\t)\n\t\t);\n\t}\n\n\ttap(key, options, fn) {\n\t\treturn this.for(key).tap(options, fn);\n\t}\n\n\ttapAsync(key, options, fn) {\n\t\treturn this.for(key).tapAsync(options, fn);\n\t}\n\n\ttapPromise(key, options, fn) {\n\t\treturn this.for(key).tapPromise(options, fn);\n\t}\n}\n\nmodule.exports = HookMap;\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nrequire('../modules/es7.map.of');\nrequire('../modules/es7.map.from');\nmodule.exports = require('../modules/_core').Map;\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\n\nclass MultiHook {\n\tconstructor(hooks) {\n\t\tthis.hooks = hooks;\n\t}\n\n\ttap(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tap(options, fn);\n\t\t}\n\t}\n\n\ttapAsync(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tapAsync(options, fn);\n\t\t}\n\t}\n\n\ttapPromise(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tapPromise(options, fn);\n\t\t}\n\t}\n\n\tisUsed() {\n\t\tfor (const hook of this.hooks) {\n\t\t\tif (hook.isUsed()) return true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tintercept(interceptor) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.intercept(interceptor);\n\t\t}\n\t}\n\n\twithOptions(options) {\n\t\treturn new MultiHook(this.hooks.map(h => h.withOptions(options)));\n\t}\n}\n\nmodule.exports = MultiHook;\n","export const drawCurve = (ctx, points, k = 0.3) => {\n    if (k > 0.5 || k <= 0) {\n        console.error('k should be between 0 and 0.5');\n    }\n    ctx.beginPath();\n    if (points.length <= 2) {\n        if (points.length === 2) {\n            ctx.moveTo(...points[0]);\n            ctx.lineTo(...points[1]);\n        }\n    }\n    else {\n        ctx.moveTo(...points[0]);\n        let lastP = points[0];\n        let currP = points[1];\n        // let segPoint1: Point = [k * lastP[0] + (1-k) * currP[0], k * lastP[1] + (1-k) * currP[1]]\n        let ctrlPtInLastSeg = [k * lastP[0] + (1 - k) * currP[0], k * lastP[1] + (1 - k) * currP[1]];\n        if (Math.abs(k - 0.5) > 0.01) {\n            ctx.lineTo(...ctrlPtInLastSeg);\n        }\n        lastP = currP;\n        for (let i = 2; i < points.length; i++) {\n            currP = points[i];\n            let ctrlPtInSeg1 = [(1 - k) * lastP[0] + k * currP[0], (1 - k) * lastP[1] + k * currP[1]];\n            let ctrlPtInSeg2 = [k * lastP[0] + (1 - k) * currP[0], k * lastP[1] + (1 - k) * currP[1]];\n            ctx.quadraticCurveTo(...lastP, ...ctrlPtInSeg1);\n            ctx.lineTo(...ctrlPtInSeg2);\n            ctrlPtInLastSeg = ctrlPtInSeg2;\n            lastP = currP;\n        }\n        ctx.lineTo(...points[points.length - 1]);\n    }\n};\n","/**\n * 移动操作。\n * 移动操作必须跟在选择操作之后\n */\nimport Operation from \"../Operation\";\nimport { combineBoundary, getTransformedBoundary, pointInRect } from \"../../misc/shapeHelper\";\nimport { arrayDeduce, findOpsUnderMouse } from \"../util\";\nimport SelectOp from \"../SelectOp\";\nclass MoveOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'move';\n        this.points = [];\n        this.activate = false;\n        this.description = \"移动操作工具。内部使用，不提供对外接口\";\n        this.idsBeenMoved = [];\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousedown.tap(\"MousedownPlugin\", this.handleMouseDown.bind(this));\n        this.opsManager.hooks.mousemove.tap(\"MousemovePlugin\", this.handleMouseMove.bind(this));\n        this.opsManager.hooks.mouseup.tap(\"MouseupPlugin\", this.handleMouseUp.bind(this));\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            if (this.activate) {\n                this.points.push([mx, my]);\n                this.dispatch(this.getSnapshot(true, this.idsBeenMoved));\n                return true;\n            }\n            if (!this.isMouseDown && document.body.style.cursor !== 'nwse-resize' && document.body.style.cursor !== 'nesw-resize') {\n                if (this.mouseInSelectedEleBoundary(mx, my, this.opsManager.selectedOpIds) ||\n                    this.opsManager.inProgressSelectedOpIds.length > 0) {\n                    //鼠标在已选中的图形上方\n                    document.body.style.cursor = 'move';\n                }\n                else {\n                    const idsUnderMouse = findOpsUnderMouse([[mx, my]], this.drawOpsOfPage, this.opsManager);\n                    const idsBeenSelected = arrayDeduce(idsUnderMouse, this.opsManager.selectedOpIds.concat(this.opsManager.inProgressSelectedOpIds));\n                    if (idsBeenSelected.length > 0) {\n                        //鼠标在尚未选中的图形上方\n                        document.body.style.cursor = 'move';\n                    }\n                    else {\n                        document.body.style.cursor = 'default';\n                    }\n                }\n            }\n        }\n    }\n    handleMouseDown(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            const mouseInProgressSelectedBoundary = this.mouseInSelectedEleBoundary(mx, my, this.opsManager.inProgressSelectedOpIds);\n            const mouseInSelectedBoundary = this.mouseInSelectedEleBoundary(mx, my, this.opsManager.selectedOpIds);\n            if (mouseInProgressSelectedBoundary) {\n                /**\n                 * 拖动鼠标悬浮的元素\n                 */\n                const idsUnderMouse = this.opsManager.inProgressSelectedOpIds.slice();\n                this.dispatch(this.opsManager.selectOp.getSnapshot(idsUnderMouse));\n                this.beginBatch();\n                document.body.style.cursor = 'move';\n                this.idsBeenMoved = idsUnderMouse.slice();\n                this.points = [[mx, my]];\n                this.activate = true;\n                return true;\n            }\n            else if (mouseInSelectedBoundary) {\n                /**\n                 * 拖动早就被选中的元素\n                 */\n                this.beginBatch();\n                document.body.style.cursor = 'move';\n                this.idsBeenMoved = this.opsManager.selectedOpIds;\n                this.points = [[mx, my]];\n                this.activate = true;\n                return true;\n            }\n            else {\n                /**\n                 * 适配移动端触摸屏\n                 * 支持移动端直接拖动未选中的图形移动\n                 */\n                const idsUnderMouse = findOpsUnderMouse([[mx, my]], this.drawOpsOfPage, this.opsManager);\n                if (idsUnderMouse.length > 0) {\n                    //将拖动的元素转为被选择状态\n                    this.dispatch(this.opsManager.selectOp.getSnapshot(idsUnderMouse));\n                    this.beginBatch();\n                    document.body.style.cursor = 'move';\n                    this.idsBeenMoved = idsUnderMouse.slice();\n                    this.points = [[mx, my]];\n                    this.activate = true;\n                    return true;\n                }\n            }\n        }\n        this.activate = false;\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.activate) {\n            this.activate = false;\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot(false, this.idsBeenMoved));\n            return true;\n        }\n    }\n    getSnapshot(inProgress, idsBeenMoved) {\n        return {\n            type: this.type,\n            sp: this.points[0],\n            ep: this.points[this.points.length - 1],\n            selectedOpIds: idsBeenMoved.slice(),\n            dependOn: idsBeenMoved.slice(),\n            inProgress: inProgress\n        };\n    }\n    /**\n     * 鼠标位置是否在已选中元素的包含盒内\n     */\n    mouseInSelectedEleBoundary(mx, my, selectedOpIds) {\n        selectedOpIds = selectedOpIds.filter(id => {\n            return this.drawOpsOfPage.hasOwnProperty(id);\n        });\n        if (selectedOpIds.length === 0)\n            return false;\n        const padding = this.opsManager.selectOp.eleContainerPadding;\n        const boundary = selectedOpIds.map(id => {\n            const op = this.drawOpsOfPage[id];\n            return getTransformedBoundary(op.data.boundary, op.data.dx, op.data.dy, op.data.scaleX, op.data.scaleY);\n        }).reduce((b1, b2) => {\n            return combineBoundary(b1, b2);\n        });\n        return pointInRect({\n            sx: boundary.sx - padding,\n            sy: boundary.sy - padding,\n            w: boundary.w + padding * 2,\n            h: boundary.h + padding * 2\n        }, [mx, my]);\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const moveOpSnapshot = transformOp.data;\n        let dx;\n        let dy;\n        if (Array.isArray(moveOpSnapshot.points)) {\n            /**\n             * 3.0.2之前\n             */\n            dx = moveOpSnapshot.points[moveOpSnapshot.points.length - 1][0] - moveOpSnapshot.points[0][0];\n            dy = moveOpSnapshot.points[moveOpSnapshot.points.length - 1][1] - moveOpSnapshot.points[0][1];\n        }\n        else {\n            dx = moveOpSnapshot.ep[0] - moveOpSnapshot.sp[0];\n            dy = moveOpSnapshot.ep[1] - moveOpSnapshot.sp[1];\n        }\n        const newData = Object.assign({}, baseOp.data, {\n            dx: dx + (baseOp.data.dx || 0),\n            dy: dy + (baseOp.data.dy || 0),\n            inProgress: moveOpSnapshot.inProgress\n        });\n        const res = Object.assign({}, baseOp, {\n            data: newData\n        });\n        return res;\n    }\n}\nexport default MoveOp;\n","/**\n * 缩放操作\n *\n * 同选择操作一样，缩放操作也要跟在选择操作之后\n */\nimport Operation from \"../Operation\";\nimport SelectOp from \"../SelectOp\";\nimport { combineBoundary, getTransformedBoundary, getTransformedPoint, pointCollideWithPoint } from \"../../misc/shapeHelper\";\nimport { TouchPlatformArray } from \"../../types\";\n//鼠标落下位置和包含盒角落要在SCALE_TEST_RADIUS之内\nconst SCALE_TEST_RADIUS = 15;\nconst KeepRatioSnapshotTypes = ['text', 'video'];\nclass ScaleOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'scale';\n        /**\n         * 选择操作选中的元素集合\n         */\n        /**\n         * 若拉伸位置是包含盒的东北角，则coordinateX和coodinateY为包含盒的西南角\n         */\n        this.coordinateX = 0;\n        this.coordinateY = 0;\n        this.boundaryW = 1;\n        this.boundaryH = 1;\n        this.activate = false;\n        this.idsBeenScaled = [];\n        this.description = \"缩放操作工具。内部使用，不提供对外接口\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousemove.tap(\"MouseMovePlugin\", this.handleMouseMove.bind(this));\n        this.opsManager.hooks.mousedown.tap(\"MouseMovePlugin\", this.handleMouseDown.bind(this));\n        this.opsManager.hooks.mouseup.tap(\"MouseMovePlugin\", this.handleMouseUp.bind(this));\n    }\n    handleMouseDown(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            const mouseInfo = this.mousePosTest(mx, my);\n            document.body.style.cursor = mouseInfo.cursorSuggestion;\n            if (mouseInfo.value === true) {\n                this.beginBatch();\n                this.activate = true;\n                this.coordinateX = mouseInfo.coordinateX;\n                this.coordinateY = mouseInfo.coordinateY;\n                this.boundaryW = mouseInfo.w === 0 ? 1 : mouseInfo.w;\n                this.boundaryH = mouseInfo.h === 0 ? 1 : mouseInfo.h;\n                this.idsBeenScaled = this.opsManager.selectedOpIds.slice();\n                return true;\n            }\n        }\n        this.activate = false;\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            if (this.activate) {\n                this.scaleInfo = {\n                    scaleX: {\n                        coordinate: this.coordinateX,\n                        factor: (mx - this.coordinateX) / this.boundaryW\n                    },\n                    scaleY: {\n                        coordinate: this.coordinateY,\n                        factor: (my - this.coordinateY) / this.boundaryH\n                    }\n                };\n                this.dispatch(this.getSnapshot(true, this.idsBeenScaled));\n                /**\n                 * 必须return true，否则会交替产生select和scale快照\n                 */\n                return true;\n            }\n            else if (this.opsManager.currOp instanceof SelectOp && !this.isMouseDown && this.opsManager.currOp.selectedOpIds.length > 0) {\n                const mouseInfo = this.mousePosTest(mx, my);\n                document.body.style.cursor = mouseInfo.cursorSuggestion;\n            }\n            else {\n                document.body.style.cursor = 'default';\n            }\n        }\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.activate && this.scaleInfo) {\n            this.activate = false;\n            this.dispatch(this.getSnapshot(false, this.idsBeenScaled));\n            this.scaleInfo = undefined;\n            return true;\n        }\n    }\n    /**\n     * 判断鼠标是否在被选择的包含盒的角落上。\n     */\n    mousePosTest(mx, my) {\n        let selectedOpIds = this.opsManager.selectedOpIds;\n        selectedOpIds = selectedOpIds.filter(id => {\n            return this.drawOpsOfPage.hasOwnProperty(id);\n        });\n        if (selectedOpIds.length === 0) {\n            return {\n                value: false,\n                cursorSuggestion: 'default',\n                coordinateX: 0,\n                coordinateY: 0,\n                w: 1,\n                h: 1\n            };\n        }\n        const boundary = this.opsManager.selectedOpIds.map(id => {\n            const op = this.drawOpsOfPage[id];\n            return getTransformedBoundary(op.data.boundary, op.data.dx, op.data.dy, op.data.scaleX, op.data.scaleY);\n        }).reduce((b1, b2) => {\n            return combineBoundary(b1, b2);\n        });\n        let radius = SCALE_TEST_RADIUS;\n        if (TouchPlatformArray.includes(this.app.platform)) {\n            radius = radius * 2.2;\n        }\n        //如果视角有缩放，要反向缩放抵消，使得缩放的热点区域固定\n        radius = radius * Math.max(1 / this.app.camera.zoomFactor, 1);\n        if (pointCollideWithPoint([mx, my], [boundary.sx, boundary.sy], radius)) {\n            //左上角\n            return {\n                value: true,\n                cursorSuggestion: 'nwse-resize',\n                coordinateX: boundary.sx + boundary.w,\n                coordinateY: boundary.sy + boundary.h,\n                w: -boundary.w,\n                h: -boundary.h\n            };\n        }\n        else if (pointCollideWithPoint([mx, my], [boundary.sx + boundary.w, boundary.sy], radius)) {\n            //右上角\n            return {\n                value: true,\n                cursorSuggestion: 'nesw-resize',\n                coordinateX: boundary.sx,\n                coordinateY: boundary.sy + boundary.h,\n                w: boundary.w,\n                h: -boundary.h\n            };\n        }\n        else if (pointCollideWithPoint([mx, my], [boundary.sx, boundary.sy + boundary.h], radius)) {\n            //左下角\n            return {\n                value: true,\n                cursorSuggestion: 'nesw-resize',\n                coordinateX: boundary.sx + boundary.w,\n                coordinateY: boundary.sy,\n                w: -boundary.w,\n                h: boundary.h\n            };\n        }\n        else if (pointCollideWithPoint([mx, my], [boundary.sx + boundary.w, boundary.sy + boundary.h], radius)) {\n            //右下角\n            return {\n                value: true,\n                cursorSuggestion: 'nwse-resize',\n                coordinateX: boundary.sx,\n                coordinateY: boundary.sy,\n                w: boundary.w,\n                h: boundary.h\n            };\n        }\n        else {\n            return {\n                value: false,\n                cursorSuggestion: 'default',\n                coordinateX: 0,\n                coordinateY: 0,\n                w: boundary.w,\n                h: boundary.h\n            };\n        }\n    }\n    getSnapshot(inProgress, idsBeenScaled) {\n        return {\n            type: this.type,\n            inProgress: inProgress,\n            scaleInfo: this.scaleInfo,\n            selectedOpIds: idsBeenScaled.slice(),\n            dependOn: idsBeenScaled.slice()\n        };\n    }\n    /**\n     * 获取本次缩放的参数\n     * @param transformOp\n     */\n    getScaleParameterBySnapshot(transformOp) {\n        const snaps = transformOp.data;\n        let factorX = 1;\n        let factorY = 1;\n        let dx = 0;\n        let dy = 0;\n        let scroll;\n        if (Array.isArray(snaps.scaleList)) {\n            scroll = snaps.scaleList[snaps.scaleList.length - 1];\n        }\n        else {\n            scroll = snaps.scaleInfo;\n        }\n        //本次快照缩放值\n        let thisScaleX = scroll.scaleX.factor;\n        let thisScaleY = scroll.scaleY.factor;\n        factorX *= thisScaleX;\n        factorY *= thisScaleY;\n        dx = thisScaleX * (dx - scroll.scaleX.coordinate) + scroll.scaleX.coordinate;\n        dy = thisScaleY * (dy - scroll.scaleY.coordinate) + scroll.scaleY.coordinate;\n        return {\n            dx,\n            dy,\n            factorX,\n            factorY\n        };\n    }\n    /**\n     * 将scale应用到baseOp中，计算baseOp新的dx，dy和scaleFactor\n     *\n     * 新的scaleFactor就是baseOp.data.scaleFactor * 当前操作的缩放乘积\n     * 新的scaleFactor的左上角\n     */\n    transformOp(baseOp, transformOp) {\n        var _a, _b;\n        const snaps = transformOp.data;\n        //baseOp快照缩放值\n        let baseScaleX = ((_a = baseOp.data.scaleX) === null || _a === void 0 ? void 0 : _a.factor) || 1;\n        let baseScaleY = ((_b = baseOp.data.scaleY) === null || _b === void 0 ? void 0 : _b.factor) || 1;\n        //结合了之前和这次Op快照的总体缩放值\n        let totalScaleX = baseScaleX;\n        let totalScaleY = baseScaleY;\n        //baseOp的boundary的左上角。计算baseOp最终左上角位置来反推dx，dy\n        const initX = baseOp.data.boundary.sx;\n        const initY = baseOp.data.boundary.sy;\n        let [left, top] = getTransformedPoint([initX, initY], baseOp.data.dx, baseOp.data.dy, baseOp.data.scaleX, baseOp.data.scaleY);\n        let scroll;\n        if (Array.isArray(snaps.scaleList)) {\n            scroll = snaps.scaleList[snaps.scaleList.length - 1];\n        }\n        else {\n            scroll = snaps.scaleInfo;\n        }\n        if (!scroll) {\n            return baseOp;\n        }\n        //本次快照缩放值\n        let thisScaleX = scroll.scaleX.factor;\n        let thisScaleY = scroll.scaleY.factor;\n        totalScaleX *= thisScaleX;\n        totalScaleY *= thisScaleY;\n        if (KeepRatioSnapshotTypes.includes(baseOp.data.type)) {\n            /**\n             * 如果是文字的话，宽高要同比例缩放。\n             * 比如若为3，-6，则改为4.5, -4.5\n             */\n            let baseFactor = Math.abs(totalScaleX) / 2 + Math.abs(totalScaleY) / 2;\n            totalScaleX *= baseFactor / Math.abs(totalScaleX);\n            totalScaleY *= baseFactor / Math.abs(totalScaleY);\n            thisScaleX = totalScaleX / baseScaleX;\n            thisScaleY = totalScaleY / baseScaleY;\n        }\n        left = thisScaleX * (left - scroll.scaleX.coordinate) + scroll.scaleX.coordinate;\n        top = thisScaleY * (top - scroll.scaleY.coordinate) + scroll.scaleY.coordinate;\n        const dx = left - totalScaleX * initX;\n        const dy = top - totalScaleY * initY;\n        const newData = Object.assign({}, baseOp.data, {\n            scaleX: {\n                factor: totalScaleX,\n                coordinate: 0\n            },\n            scaleY: {\n                factor: totalScaleY,\n                coordinate: 0\n            },\n            dx,\n            dy\n        });\n        let res;\n        if (baseOp.data.type !== 'text') {\n            res = Object.assign({}, baseOp, {\n                data: newData\n            });\n        }\n        else {\n            //处理文本。\n            //文本宽高缩放必须等比例。且缩放会修改文本的fontSize\n            newData.fontSize = Math.abs(baseOp.data.fontSize * totalScaleX / baseScaleX);\n            res = Object.assign({}, baseOp, {\n                data: newData\n            });\n        }\n        return res;\n    }\n}\nexport default ScaleOp;\n","/**\n * 删除操作，可通过ctrl-v还原\n */\nimport Operation from \"../Operation\";\nclass DeleteOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'delete';\n        this.description = \"删除元素。\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `删除当前选中的元素`\n                }\n            }\n        };\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (['backspace', 'delete'].includes(key)) {\n            this.execCommand();\n            return true;\n        }\n    }\n    execCommand() {\n        if (this.opsManager.selectedOpIds.length > 0) {\n            this.dispatch(this.getSnapshot());\n        }\n    }\n    getSnapshot() {\n        return {\n            type: this.type,\n            deleteOpIds: this.opsManager.selectedOpIds.slice(),\n            dependOn: this.opsManager.selectedOpIds.slice()\n        };\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const newData = Object.assign({}, baseOp.data, {\n            hidden: true\n        });\n        return Object.assign({}, baseOp, {\n            data: newData\n        });\n    }\n}\nexport default DeleteOp;\n","/**\n * 撤销操作\n */\nimport Operation from \"../Operation\";\nimport { snapshotOutOfNormalFlowTypes } from \"../types\";\nclass UndoOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'undo';\n        this.description = \"撤销操作\";\n        this.idsCouldUndo = [];\n    }\n    getCount() {\n        return this.idsCouldUndo.length;\n    }\n    registerHooks() {\n        this.opsManager.hooks.addOpHook.tap(\"AddOpSnapshotPlugin\", this.onOpAdded.bind(this));\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (key === 'z' && (this.isKeyDown('control') || this.isKeyDown('command'))) {\n            ev.preventDefault();\n            this.execCommand();\n        }\n    }\n    resetCount() {\n        this.idsCouldUndo = [];\n        this.emit('event:appState:change', 'undoCount', 0);\n    }\n    onOpAdded(snapshot) {\n        if (snapshot.category === 'pageOp' || snapshot.category === 'boardOp') {\n            this.idsCouldUndo = [];\n        }\n        else if (snapshot.data.skipUndo || snapshot.data.inProgress || snapshotOutOfNormalFlowTypes.includes(snapshot.data.type)) {\n            return;\n        }\n        else if (snapshot.data.type === 'undo') {\n            const index = this.idsCouldUndo.indexOf(snapshot.data.undoOpId);\n            if (index !== -1) {\n                this.idsCouldUndo.splice(index, 1);\n            }\n        }\n        else if (snapshot.data.type !== 'undo') {\n            if (!this.idsCouldUndo.includes(snapshot.opId)) {\n                this.idsCouldUndo.push(snapshot.opId);\n            }\n        }\n        this.emit('event:appState:change', 'undoCount', this.idsCouldUndo.length);\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand() {\n        if (this.idsCouldUndo.length === 0)\n            return;\n        this.dispatch(this.getSnapshot());\n    }\n    /**\n     * select，以及过程中的快照不需要undo\n     */\n    getSnapshot() {\n        const opOfPage = this.opsOfPage;\n        let undoOpId = '';\n        //记录每个快照当前是否可以被undo\n        /**\n         * 当处理到非undo，redo，非inProgress，非skipUndo的快照时，\n         * 若该快照未被undo，redo处理过，则opUndoCount中不存在该快照的entry，则该快照可以被undo\n         * 若该快照已经被undo了，则其opUndoCount[opId]应该为1\n         * 若该快照已经被undo，然后又被redo，则处理redo后（逆向处理），它的opUndoCount[opId]应该为-1，处理undo后，它的opUndoCount[opId]应该为0。\n\n         * 比如W1 U1 W2 W3 W4 W5 U5 U4 W6 U6 U3\n         *\n         * 若要寻找U3对应的撤销快照Id。从U6开始，每一步后opUndoCount的变化为：\n         * {W6}             (U6 + W6)\n         * {W6, W4}         (U4)\n         * {W6, W4, W5}     (U5 + W5 + W4)\n         * 处理到W3时，发现W3尚未被Undo，因此W3就是要撤销的快照\n         */\n        const opAlreadyBeenUndo = new Set();\n        for (let i = opOfPage.length - 1; i >= 0; i--) {\n            //该快照应该被跳过\n            const op = opOfPage[i];\n            const opShouldBeSkiped = op.data.inProgress || op.data.skipUndo || snapshotOutOfNormalFlowTypes.includes(op.data.type);\n            if (op.data.type !== 'undo' && !opShouldBeSkiped && !opAlreadyBeenUndo.has(op.opId)) {\n                undoOpId = op.opId;\n                break;\n            }\n            else if (op.data.type === 'undo') {\n                opAlreadyBeenUndo.add(op.data.undoOpId);\n            }\n        }\n        return {\n            type: this.type,\n            undoOpId\n        };\n    }\n}\nexport default UndoOp;\n","/**\n * 重做操作。重做只能跟在撤销操作后面\n */\nimport Operation from \"../Operation\";\nimport { snapshotOutOfNormalFlowTypes } from \"../types\";\nclass RedoOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'redo';\n        this.description = \"重做操作\";\n        this.idsCouldRedo = [];\n    }\n    getCount() {\n        return this.idsCouldRedo.length;\n    }\n    registerHooks() {\n        this.opsManager.hooks.addOpHook.tap(\"AddOpSnapshotPlugin\", this.onOpAdded.bind(this));\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (key === 'y' && (this.isKeyDown('control') || this.isKeyDown('command'))) {\n            ev.preventDefault();\n            this.execCommand();\n        }\n    }\n    resetCount() {\n        this.idsCouldRedo = [];\n        this.emit('event:appState:change', 'redoCount', 0);\n    }\n    onOpAdded(snapshot) {\n        if (snapshot.category === 'pageOp' || snapshot.category === 'boardOp') {\n            this.idsCouldRedo = [];\n        }\n        else if (snapshot.data.inProgress || snapshot.data.skipUndo || snapshotOutOfNormalFlowTypes.includes(snapshot.data.type)) {\n            return;\n        }\n        else if (snapshot.data.type === 'redo') {\n            const index = this.idsCouldRedo.indexOf(snapshot.data.redoOpId);\n            if (index !== -1) {\n                this.idsCouldRedo.splice(index, 1);\n            }\n        }\n        else if (snapshot.data.type === 'undo') {\n            if (!this.idsCouldRedo.includes(snapshot.opId)) {\n                this.idsCouldRedo.push(snapshot.opId);\n            }\n        }\n        else {\n            this.idsCouldRedo = [];\n        }\n        this.emit('event:appState:change', 'redoCount', this.idsCouldRedo.length);\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            },\n        };\n    }\n    execCommand() {\n        if (this.idsCouldRedo.length === 0)\n            return;\n        this.dispatch(this.getSnapshot());\n    }\n    /**\n     * 每碰到一个redo计数+1，每碰到一个undo计数-1，当计数为0，且为undo时，就是要操作的对象。\n     * 比如W1 W2 W3 W4 U4 U3 U2 R2 R3 R4对应的计数为1 2 1 0，此时遇到U4，即为要操作的对象\n     */\n    getSnapshot() {\n        const opOfPage = this.opsOfPage;\n        let redoOpId = '';\n        let count = 0;\n        for (let i = opOfPage.length - 1; i >= 0; i--) {\n            const op = opOfPage[i];\n            if (op.data.type === 'undo' && count === 0) {\n                redoOpId = op.opId;\n                break;\n            }\n            else if (op.data.type === 'undo') {\n                count--;\n            }\n            else if (op.data.type === 'redo') {\n                count++;\n            }\n            else if (!op.data.skipUndo && !snapshotOutOfNormalFlowTypes.includes(op.data.type)) {\n                console.warn('DEV-->', 'redo操作之前有非undo操作。请查看具体细节', opOfPage);\n            }\n        }\n        return {\n            type: this.type,\n            redoOpId\n        };\n    }\n}\nexport default RedoOp;\n","/**\n * 重做操作。重做只能跟在撤销操作后面\n */\nimport Operation from \"../Operation\";\nclass ClearOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'clear';\n        this.description = \"清空操作\";\n    }\n    isAvailable() {\n        return Object.keys(this.drawOpsOfPage).length > 0;\n    }\n    registerHooks() {\n        this.opsManager.hooks.refresh.tap(\"RefreshPlugin\", this.onRefresh.bind(this));\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            },\n        };\n    }\n    execCommand() {\n        if (Object.keys(this.drawOpsOfPage).length > 0) {\n            this.dispatch(this.getSnapshot());\n        }\n    }\n    getSnapshot() {\n        return {\n            type: this.type\n        };\n    }\n    onRefresh() {\n        const available = Object.keys(this.drawOpsOfPage).length > 0;\n        this.emit('event:appState:change', 'clearAvailable', available);\n    }\n}\nexport default ClearOp;\n","import Operation from \"../Operation\";\nclass EraserOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'eraser';\n        this.eraserColor = 'rgba(230, 100, 100, .4)';\n        this.width = 20;\n        this.points = [];\n        this.description = \"橡皮擦。\\n首先使用op:eraser:activate设置画布为橡皮擦模式。\" +\n            \"具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n            'eraser:width': {\n                value: this.setWidth.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置橡皮擦宽度`\n                }\n            },\n            'eraser:color': {\n                value: this.setColor.bind(this),\n                information: {\n                    args: 'color: Color',\n                    message: `设置橡皮擦聚光灯颜色`\n                }\n            }\n        };\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.isMouseDown) {\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot());\n        }\n    }\n    handleMouseDown(event, mx, my) {\n        this.beginBatch();\n        this.points = [];\n        this.points.push([mx, my]);\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown) {\n            this.dispatch(this.getSnapshot());\n            this.points = [];\n        }\n    }\n    getSnapshot() {\n        return {\n            type: this.type,\n            points: this.points.slice(),\n            width: this.width,\n        };\n    }\n    draw(snapshot, ctx) {\n        ctx.save();\n        //需要将透明度设置为1。否则可能会出错。\n        ctx.fillStyle = 'rgb(0, 0, 0)';\n        const data = snapshot.data;\n        const points = data.points;\n        ctx.beginPath();\n        ctx.globalCompositeOperation = 'destination-out';\n        for (let i = 1; i < points.length; i++) {\n            ctx.moveTo(points[i][0], points[i][1]);\n            ctx.arc(points[i][0], points[i][1], this.width, 0, Math.PI * 2, true);\n        }\n        ctx.fill();\n        ctx.restore();\n        this.drawEraserSignpost(ctx);\n    }\n    /**\n     * 绘制橡皮擦聚光灯\n     */\n    drawEraserSignpost(ctx) {\n        if (this.opsManager.currOp instanceof EraserOp && this.isMouseDown) {\n            ctx.beginPath();\n            ctx.arc(this.points[this.points.length - 1][0], this.points[this.points.length - 1][1], this.width, 0, Math.PI * 2, true);\n            ctx.fillStyle = this.eraserColor;\n            ctx.fill();\n        }\n    }\n    setWidth(width) {\n        this.width = width;\n    }\n    setColor(color) {\n        this.eraserColor = color;\n    }\n}\nexport default EraserOp;\n","/**\n * 文本操作。\n *\n * 文本有两类模式：\n * 一是判断文本框是否是新的文本框: isNewText\n * 二是判断文本框是否聚焦：isFocus\n *\n * isNewText为false时，快照会包含dependOn，dependOn指向被编辑的文本框opId\n * isFocus为true时，快照的boundary使用this.pre以及鼠标落下的位置计算。为false时，boundary使用快照对应的pre计算。\n *\n * TextOp有两种pre。一种是isFocus时，和textArea内容一一对应的pre，这个pre用于辅助计算内容的宽高。另一种pre是快照pre。文本不处于focus时，使用快照pre绘制。\n *\n *\n *                  点击画布\n * 激活文本模式   -------->>>>>   文本框聚焦(创建模式+正在编辑)  -----\n *                                                                 \\     失焦\n *                                                                  -------------> 文本框选中（编辑模式）\n *              点击文本框                                          /\n * 选择模式   --------->>>>>>   文本框聚焦（编辑模式+正在编辑） -----\n *              单选文本框\n *           ---------->>>>>   文本框选中（编辑模式）\n *\n *\n */\nimport Operation from \"../Operation\";\nimport { getTransformedBoundary, pointInRect } from \"../../misc/shapeHelper\";\nimport SelectOp from \"../SelectOp\";\nimport { clearTextArea, createElements, setElementsStyle, drawTextSnapshot, setElementsSize, PADDING, DEFAULT_LINEHEIGHT } from \"./UIHelper\";\nimport TextToolbar from \"./TextToolbar\";\nimport { DEFAULT_FONTSIZE } from \"../../config\";\nimport textConfig from \"./textConfig\";\nimport { printTextInMultiLine } from \"../../misc/text\";\nclass TextOp extends Operation {\n    constructor(app) {\n        super(app);\n        this.type = 'text';\n        this.dependOn = undefined;\n        /**\n         * 失焦时间。失焦之后的点击事件会被selectOp忽略。如果不忽略，点击空白区域时，失焦会导致文本框不被选中。\n         */\n        this.blurAt = 0;\n        this.color = 'black';\n        this.text = '';\n        this.textBeforeEdit = '';\n        this.fontSize = DEFAULT_FONTSIZE;\n        this.isFocus = false;\n        this.isNewText = true;\n        this.description = \"绘制文字\\n首先使用op:text:activate设置画布为文字模式。\" +\n            \"通过op:text:color, op:text:fontSize, 设置文字的颜色和字体大小。然后画布会监听鼠标动作，生成文本框。具体用法如下：\";\n        /**\n         * 文本修改时，利用pre计算textArea的宽，高\n         */\n        this.handleTextAreaChange = (event) => {\n            let text = event.target.value;\n            if (text.endsWith(\"\\n\")) {\n                text += \"\\n\";\n            }\n            this.text = text;\n            this.pre.innerText = text || ' ';\n            /**\n             * 这里不需要设置scale。因为pre.clientWidth * pre.scale === textArea.width * textArea.scale\n             */\n            setElementsSize(this.textAreaContainer, this.textArea, this.pre, this.fontSize);\n            this.dispatch(this.getSnapshot(true));\n        };\n        this.handleTextAreaBlur = (event) => {\n            setTimeout(() => {\n                /**\n                 * 失焦函数处理时，如果页面和聚焦时的页面不同，则无需进一步处理\n                 */\n                if (this.opsManager.currPage !== this.textFocusAtPage) {\n                    return;\n                }\n                this._handleTextAreaBlur();\n            }, 0);\n        };\n        this._handleTextAreaBlur = () => {\n            /**\n             * 重置文本\n             */\n            const opId = this.opIdToDraw;\n            /**\n             * 如果这次编辑未修改文本，则视为无效编辑，undo操作不会对其做出反应\n             */\n            this.dispatch(this.getSnapshot(false, this.text === this.textBeforeEdit));\n            this.isFocus = false;\n            this.text = ' ';\n            clearTextArea(this.textAreaContainer, this.textArea);\n            /**\n             * 若文本框为空，则不选中任何图形\n             * 若文本框不为空，则选中该文本框\n             *\n             * 若blur是由click事件引发的，设置currOp为selectOp后，blur之后selectOp会接收click事件\n             * 而点击空白区域的click事件会导致选中元素清空。\n             *\n             * 为了点击空白区域仍旧会选中文本框，记录blur的时间点，然后再selectlOp中会判断是不是这次点击是在blur事件之后，\n             * 如果是在之后，且点击处空白，则忽略这次点击事件\n             */\n            this.blurAt = (new Date()).valueOf();\n            this.opsManager.setCurrOp('select');\n            this.opsManager.selectOp.dispatch(this.opsManager.selectOp.getSnapshot([opId]));\n        };\n        this.registerToolbar(new TextToolbar());\n        const { textAreaContainer, textArea, pre } = createElements();\n        this.textAreaContainer = textAreaContainer;\n        this.textArea = textArea;\n        this.pre = pre;\n        this.app.on('container:set', () => {\n            this.app.container.textAreaEl.appendChild(textAreaContainer);\n            this.app.container.textAreaEl.appendChild(pre);\n        });\n        this.app.on('container:resize', () => {\n            var _a;\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.resize(1 / this.app.camera.scale);\n        });\n        this.textArea.oninput = this.handleTextAreaChange;\n        this.textArea.onblur = this.handleTextAreaBlur;\n        //TODO: 统一textArea，pre宽高更新的函数\n        setElementsSize(this.textAreaContainer, this.textArea, this.pre, this.fontSize);\n    }\n    registerHooks() {\n        this.opsManager.hooks.prePageChange.tap('PrePageChange', this.handlePrePageChange.bind(this));\n        this.opsManager.hooks.click.tap(\"ClickPlugin\", this.handleClickExistText.bind(this));\n        this.opsManager.hooks.selectChange.tap('SelectChangePlugin', this.handleSelectChange.bind(this));\n        this.opsManager.hooks.enableDrawChange.tap('EnableDrawChange', this.handleEnableDrawChange.bind(this));\n    }\n    /**\n     * 根据board id, page id得到id前缀\n     */\n    getIdPrefix(boardName, pageIndex) {\n        return `${boardName}-${pageIndex}`.replace(/[\\W_]+/g, '-');\n    }\n    /**\n     * 返回当前编辑的文本框对应的opId。\n     * 若状态为新建，则直接返回opId\n     * 若状态为编辑旧文本框，返回旧文本框的opId\n     */\n    get opIdToDraw() {\n        if (this.isNewText) {\n            return this.opIdForseen(this.type, this.dependOn);\n        }\n        else {\n            return this.dependOn;\n        }\n    }\n    /**\n     * 当前编辑是作用于哪个pre上面\n     */\n    get workingPre() {\n        if (this.isFocus) {\n            //编辑模式\n            return this.pre;\n        }\n        else {\n            const boardName = this.app.room.currIndex;\n            const pageIndex = this.app.room.currBoard.currIndex.toString();\n            return document.getElementById(`${this.getIdPrefix(boardName, pageIndex)}-${this.dependOn}-pre`);\n        }\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n            'register:toolbar': {\n                value: this.registerToolbar.bind(this),\n                information: {\n                    args: 'toolbar: IToolbar',\n                    message: '自定义工具栏'\n                }\n            },\n            'text:color': {\n                value: this.setColor.bind(this),\n                information: {\n                    args: 'color: string',\n                    message: `设置文本颜色`\n                }\n            },\n            'text:fontsize': {\n                value: this.setFontSize.bind(this),\n                information: {\n                    args: 'size: number',\n                    message: `设置矩形边框颜色`\n                }\n            }\n        };\n    }\n    /**\n     * 页面切换时，如果文本处于聚焦状态，先使其失焦\n     */\n    handlePrePageChange() {\n        if (this.isFocus) {\n            this._handleTextAreaBlur();\n        }\n    }\n    handleEnableDrawChange(editEnabled) {\n        var _a, _b;\n        if (!editEnabled) {\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.hide();\n        }\n        else {\n            const selectedOpIds = this.opsManager.selectedOpIds;\n            let currSelectTextId = (selectedOpIds.length === 1 && this.getOpTypeByOpId(selectedOpIds[0]) === 'text') ? selectedOpIds[0] : undefined;\n            if (currSelectTextId && this.opsManager.currOp instanceof SelectOp) {\n                return this._handleSelectTextOp(currSelectTextId);\n            }\n            else {\n                (_b = this.toolbar) === null || _b === void 0 ? void 0 : _b.hide();\n            }\n        }\n    }\n    /**\n     * 文本框单独被选中时，弹出工具栏\n     */\n    handleSelectChange(preSelectedOpIds, selectedOpIds) {\n        var _a;\n        let preSelectTextId = (preSelectedOpIds.length === 1 && this.getOpTypeByOpId(preSelectedOpIds[0]) === 'text') ? preSelectedOpIds[0] : undefined;\n        let currSelectTextId = (selectedOpIds.length === 1 && this.getOpTypeByOpId(selectedOpIds[0]) === 'text') ? selectedOpIds[0] : undefined;\n        if (preSelectTextId !== currSelectTextId) {\n            if (currSelectTextId && this.opsManager.currOp instanceof SelectOp) {\n                return this._handleSelectTextOp(currSelectTextId);\n            }\n        }\n        (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n    _handleSelectTextOp(currSelectTextId) {\n        var _a;\n        //选中文本框\n        const data = this.drawOpsOfPage[currSelectTextId].data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        this.color = data.color,\n            this.fontSize = data.fontSize;\n        this.text = data.text;\n        this.isFocus = false;\n        clearTextArea(this.textAreaContainer, this.textArea);\n        this.isNewText = false;\n        this.lastSnapshotData = data;\n        this.dependOn = currSelectTextId;\n        return (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.show({\n            left: boundary.sx,\n            top: boundary.sy,\n            container: this.app.container.textAreaEl,\n            fontSize: data.fontSize,\n            scale: 1 / this.app.camera.scale,\n            color: data.color\n        });\n    }\n    /**\n     * 处于选择模式下，点击已有文本，开始编辑模式。\n     */\n    handleClickExistText(event, mx, my) {\n        var _a, _b;\n        if (this.opsManager.currOp instanceof SelectOp) {\n            const lastSnapshot = this.detectIfClickOnText(mx, my);\n            //点击已有文本\n            if (lastSnapshot) {\n                //编辑文本框时，没有任何元素被应该被选中\n                if (this.opsManager.selectedOpIds.length > 0) {\n                    this.opsManager.currOp.dispatch(this.opsManager.currOp.getSnapshot([]));\n                }\n                this.opsManager.setCurrOp('text');\n                //移除之前绘制的文本框\n                const tempPre = document.getElementById(`${this.getIdPrefix(lastSnapshot.board, lastSnapshot.page.toString())}-${lastSnapshot.opId}-pre`);\n                (_a = tempPre === null || tempPre === void 0 ? void 0 : tempPre.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(tempPre);\n                const data = lastSnapshot.data;\n                this.isFocus = true;\n                this.textFocusAtPage = this.opsManager.currPage;\n                this.isNewText = false;\n                this.lastSnapshotData = data;\n                this.dependOn = lastSnapshot.opId;\n                this.text = data.text;\n                this.textBeforeEdit = this.text;\n                this.textArea.value = this.text;\n                this.pre.innerText = this.text;\n                this.fontSize = data.fontSize;\n                this.color = data.color;\n                const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n                setElementsStyle(this.textAreaContainer, this.textArea, this.pre, Object.assign({ fontSize: data.fontSize, color: data.color }, boundary));\n                (_b = this.toolbar) === null || _b === void 0 ? void 0 : _b.show({\n                    left: boundary.sx,\n                    top: boundary.sy,\n                    container: this.app.container.textAreaEl,\n                    fontSize: data.fontSize,\n                    scale: 1 / this.app.camera.scale,\n                    color: data.color\n                });\n                this.textArea.focus();\n                this.beginBatch();\n                return true;\n            }\n        }\n    }\n    /**\n     * 当用户点击速度很慢时，会触发mouseup来创建文本\n     */\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown) {\n            this.handleClick(event, mx, my);\n        }\n    }\n    handleMouseMove(event) {\n        if (!this.isFocus) {\n            if (this.app.container.isTargetOnContainer(event.target)) {\n                document.body.style.cursor = 'text';\n            }\n            else {\n                document.body.style.cursor = 'auto';\n            }\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n    }\n    /**\n     * 点击空白处创建一个空白版\n     */\n    handleClick(event, mx, my) {\n        var _a;\n        if (!this.isFocus) {\n            //创建新文本\n            this.isNewText = true;\n            this.isFocus = true;\n            this.textFocusAtPage = this.opsManager.currPage;\n            this.dependOn = undefined;\n            this.text = ' ';\n            this.textBeforeEdit = this.text;\n            this.pre.innerText = this.text;\n            setElementsStyle(this.textAreaContainer, this.textArea, this.pre, {\n                fontSize: this.fontSize,\n                color: this.color,\n                sx: mx,\n                sy: my\n            });\n            this.beginBatch();\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.show({\n                left: mx,\n                top: my,\n                container: this.app.container.textAreaEl,\n                fontSize: this.fontSize,\n                scale: 1 / this.app.camera.scale,\n                color: this.color\n            });\n            this.textArea.focus();\n        }\n    }\n    getSnapshot(inProgress, skipUndo = false) {\n        if (this.isNewText) {\n            return {\n                boundary: this.getBoundaryRect(this.isNewText),\n                type: this.type,\n                color: this.color,\n                text: this.text,\n                fontSize: this.fontSize,\n                inProgress: inProgress,\n                skipUndo: inProgress || skipUndo\n            };\n        }\n        else {\n            /**\n             * EditText中得到的boundary已经包含了之前操作的转换结果。\n             */\n            return {\n                type: this.type,\n                color: this.color,\n                text: this.text,\n                fontSize: this.fontSize,\n                boundary: this.getBoundaryRect(this.isNewText),\n                dependOn: this.dependOn,\n                inProgress: inProgress,\n                skipUndo: inProgress || skipUndo\n            };\n        }\n    }\n    /**\n     * 若处于编辑状态，使用this.pre，否则使用被选择的pre\n     */\n    getBoundaryRect(isNewText) {\n        const rect = this.workingPre.getBoundingClientRect();\n        let w = rect.width;\n        let h = rect.height;\n        w = w / this.app.camera.scale;\n        h = h / this.app.camera.scale;\n        let ptsInWord;\n        if (isNewText) {\n            const sx = rect.x - this.app.container.left;\n            const sy = rect.y - this.app.container.top;\n            ptsInWord = this.app.camera.convertToPointInWorld(sx, sy);\n        }\n        else {\n            /**\n             * ios上不能用rect.y - this.app.container.top确定sy。\n             * https://openradar.appspot.com/radar?id=6668472289329152\n             *\n             * ios上如果容器有fixed，且键盘将webview向上推时，getBoundingClientRect的top值是错误的。\n             *\n             * 由于ios上暂时不支持创建文本。编辑旧文本时，文本的sx，sy又不会变化，因此，可以用之前快照的\n             * sx，sy来确定位置。\n             */\n            const data = this.lastSnapshotData;\n            const rect = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n            ptsInWord = [rect.sx, rect.sy];\n        }\n        return {\n            sx: ptsInWord[0],\n            sy: ptsInWord[1],\n            w, h\n        };\n    }\n    draw(snapshot, ctx, opts) {\n        const div = opts.div;\n        /**\n         * 只有当文本模式下正在编辑，且该快照是正被编辑的快照，才跳过绘制。\n         */\n        const snapshotIsEditing = snapshot.opId === this.dependOn || snapshot.opId === this.opIdToDraw;\n        if (!this.isFocus || !snapshotIsEditing) {\n            const boardName = this.app.room.currIndex;\n            const pageIndex = this.app.room.currBoard.currIndex;\n            const preId = `${this.getIdPrefix(boardName, pageIndex.toString())}-${snapshot.opId}-pre`;\n            if (!div.querySelector(`[id='${preId}']`)) {\n                const temp = document.createElement('pre');\n                temp.id = preId;\n                div.appendChild(temp);\n            }\n            const pre = div.querySelector(`[id='${preId}']`);\n            if (pre) {\n                this.drawSnapshot(snapshot.data, pre, snapshot.opId);\n            }\n            else {\n                console.error('DEV-->', `找不到id为: ${preId} 的pre`);\n            }\n        }\n    }\n    //在预览中绘制，不能依赖于pre\n    preview(snapshot, ctx) {\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        const { sx, sy } = boundary;\n        const paddingScale = PADDING * data.fontSize / DEFAULT_FONTSIZE;\n        ctx.save();\n        ctx.fillStyle = data.color;\n        ctx.font = `${data.fontSize}px ${textConfig.getFontFamily()}`;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'top';\n        printTextInMultiLine(ctx, data.text, sx + paddingScale, sy + paddingScale * 2, data.fontSize * DEFAULT_LINEHEIGHT);\n        // ctx.fillText(data.text, sx + paddingScale, sy + paddingScale)\n        ctx.restore();\n    }\n    hide(snapshot, ctx, div) {\n        var _a;\n        //移除之前绘制的文本框\n        const tempPre = document.getElementById(`${this.getIdPrefix(snapshot.board, snapshot.page.toString())}-${snapshot.opId}-pre`);\n        (_a = tempPre === null || tempPre === void 0 ? void 0 : tempPre.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(tempPre);\n    }\n    drawSnapshot(data, pre, opId) {\n        var _a, _b, _c;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        const { sx, sy } = boundary;\n        drawTextSnapshot(pre, {\n            text: data.text,\n            sx,\n            sy,\n            fontSize: data.fontSize,\n            color: data.color\n        });\n        //选中的文本框位置更新时，更新工具栏位置\n        if (this.opsManager.selectedOpIds.length === 1 && this.opsManager.selectedOpIds[0] === opId) {\n            this.fontSize = data.fontSize;\n            this.color = data.color;\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.setFontsize(data.fontSize);\n            (_b = this.toolbar) === null || _b === void 0 ? void 0 : _b.setColor(data.color);\n            (_c = this.toolbar) === null || _c === void 0 ? void 0 : _c.updatePosition({\n                left: sx,\n                top: sy\n            });\n        }\n    }\n    detectIfClickOnText(mx, my) {\n        for (let opId in this.drawOpsOfPage) {\n            if (this.drawOpsOfPage[opId].data.type !== 'text') {\n                continue;\n            }\n            else {\n                const data = this.drawOpsOfPage[opId].data;\n                const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n                if (pointInRect(boundary, [mx, my])) {\n                    return this.drawOpsOfPage[opId];\n                }\n            }\n        }\n        return undefined;\n    }\n    setFontSize(fontSize) {\n        if (this.fontSize !== fontSize) {\n            this.fontSize = fontSize;\n            this.isNewText = false;\n            this.lastSnapshotData = this.drawOpsOfPage[this.dependOn].data;\n            this.text = this.lastSnapshotData.text;\n            setElementsSize(this.textAreaContainer, this.textArea, this.workingPre, this.fontSize);\n            this.dispatch(this.getSnapshot(false));\n        }\n    }\n    setColor(color) {\n        if (this.color !== color) {\n            this.color = color;\n            this.isNewText = false;\n            this.lastSnapshotData = this.drawOpsOfPage[this.dependOn].data;\n            this.text = this.lastSnapshotData.text;\n            this.dispatch(this.getSnapshot(false));\n        }\n    }\n    registerToolbar(toolbar) {\n        this.toolbar = toolbar;\n        this.toolbar.onFontSizeChange(this.setFontSize.bind(this));\n        this.toolbar.onColorChange(this.setColor.bind(this));\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const textOpSnapshot = transformOp.data;\n        const newData = Object.assign({}, baseOp.data);\n        for (let key in textOpSnapshot) {\n            if (key !== 'dependOn') {\n                newData[key] = textOpSnapshot[key];\n            }\n        }\n        /**\n         * EditText的boundary已经将之前编辑操作的结果包含进去了。\n         */\n        newData.dx = 0;\n        newData.dy = 0;\n        newData.scaleX = {\n            coordinate: 0,\n            factor: 1\n        };\n        newData.scaleY = {\n            coordinate: 0,\n            factor: 1\n        };\n        const res = Object.assign({}, baseOp, {\n            data: newData\n        });\n        return res;\n    }\n    /**\n     * 更新textArea和pre的字体\n     */\n    updateFontFamily() {\n        const txts = this.app.container.el.getElementsByTagName('textarea');\n        const pres = this.app.container.el.getElementsByTagName('pre');\n        for (let i = 0; i < txts.length; i++) {\n            txts[i].style.fontFamily = textConfig.getFontFamily();\n        }\n        for (let i = 0; i < pres.length; i++) {\n            pres[i].style.fontFamily = textConfig.getFontFamily();\n        }\n    }\n}\nexport default TextOp;\n","import { DEFAULT_FONTSIZE } from \"../../config\";\nimport textConfig from \"./textConfig\";\nexport const MIN_WIDTH = 20;\nexport const PADDING = 4;\nexport const DEFAULT_LINEHEIGHT = 1.2;\n//创建一个textArea用于编辑文字\n//创建pre用于辅助textArea确定文字的宽，高\nexport function createElements() {\n    const textArea = document.createElement('textarea');\n    const pre = document.createElement('pre');\n    const textAreaContainer = document.createElement('div');\n    textAreaContainer.style.position = 'absolute';\n    textAreaContainer.style.display = 'none';\n    textAreaContainer.style.outline = '1px dashed black';\n    // textArea.style.position = 'absolute'\n    textArea.style.resize = 'none';\n    textArea.style.overflow = 'hidden';\n    textArea.style['white-space'] = 'nowrap';\n    textArea.style.background = 'transparent';\n    //进入编辑模式时才显示textArea\n    // textArea.style.display = 'none'\n    textArea.style.fontFamily = textConfig.getFontFamily();\n    textArea.style.fontSize = `${DEFAULT_FONTSIZE}px`;\n    textArea.style.transformOrigin = 'left top';\n    textArea.style.padding = `${PADDING}px`;\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxSizing = 'content-box';\n    textArea.style.lineHeight = `${DEFAULT_LINEHEIGHT}`;\n    pre.style.width = 'fit-content';\n    pre.style.position = 'absolute';\n    pre.style.userSelect = 'none';\n    pre.style.pointerEvents = 'none';\n    pre.style.visibility = 'hidden';\n    pre.style.fontFamily = textConfig.getFontFamily();\n    pre.style.fontSize = `${DEFAULT_FONTSIZE}px`;\n    pre.style.transformOrigin = 'left top';\n    pre.style.padding = `${PADDING}px`;\n    pre.style.margin = '0';\n    pre.style.lineHeight = `${DEFAULT_LINEHEIGHT}`;\n    //设置为border-box时，getBoundingClientRect返回pre内容的宽高\n    pre.style.boxSizing = 'border-box';\n    textAreaContainer.appendChild(textArea);\n    return {\n        textAreaContainer,\n        textArea,\n        pre\n    };\n}\nexport function setElementsStyle(textAreaContainer, textArea, pre, opts) {\n    textAreaContainer.style.display = 'block';\n    textAreaContainer.style.left = `${opts.sx}px`;\n    textAreaContainer.style.top = `${opts.sy}px`;\n    pre.style.left = `${opts.sx}px`;\n    pre.style.top = `${opts.sy}px`;\n    textArea.style.color = opts.color;\n    textArea.style.width = `${(opts.w || MIN_WIDTH) * DEFAULT_FONTSIZE / opts.fontSize - PADDING * 2}px`;\n    textArea.style.height = `${(opts.h || (opts.fontSize + 12)) * DEFAULT_FONTSIZE / opts.fontSize - PADDING * 2}px`;\n    setElementsSize(textAreaContainer, textArea, pre, opts.fontSize);\n}\n/**\n * 根据fontSize，设置缩放量\n * 由于浏览器有最小字体大小限制，因此textAera使用transform修改字体大小，而不是改变fontSize。\n *\n *\n * 设置文本框，文本框包含盒，以及pre的宽高，及缩放值\n * 先设置pre缩放值和textArea的缩放值。\n * 然后根据pre的宽高，设置textArea的宽高, 以及textAreaContainer的宽高\n * @param textAreaContainer\n * @param textArea\n * @param pre\n * @param fontSize\n */\nexport function setElementsSize(textAreaContainer, textArea, pre, fontSize) {\n    pre.style.transform = `scale(${(fontSize) / DEFAULT_FONTSIZE})`;\n    textArea.style.transform = `scale(${(fontSize) / DEFAULT_FONTSIZE})`;\n    //clientWidth，clientHeight包含了padding\n    textArea.style.width = `${pre.clientWidth - PADDING * 2}px`;\n    textArea.style.height = `${pre.clientHeight - PADDING * 2}px`;\n    textAreaContainer.style.width = `${(pre.clientWidth) * fontSize / DEFAULT_FONTSIZE}px`;\n    textAreaContainer.style.height = `${(pre.clientHeight) * fontSize / DEFAULT_FONTSIZE}px`;\n}\n/**\n * 绘制快照\n */\nexport function drawTextSnapshot(pre, opts) {\n    pre.innerText = opts.text;\n    pre.style.color = opts.color;\n    pre.style.left = `${opts.sx}px`;\n    pre.style.top = `${opts.sy}px`;\n    pre.style.position = 'absolute';\n    pre.style.fontFamily = textConfig.getFontFamily();\n    pre.style.fontSize = `${DEFAULT_FONTSIZE}px`;\n    pre.style.margin = '0';\n    pre.style.transform = `scale(${opts.fontSize / DEFAULT_FONTSIZE})`;\n    pre.style.userSelect = 'none';\n    pre.style.transformOrigin = 'left top';\n    pre.style.padding = `${PADDING}px`;\n    pre.style.pointerEvents = 'none';\n}\nexport function clearTextArea(textAreaContainer, textArea) {\n    textArea.value = '';\n    textAreaContainer.style.display = 'none';\n}\n","/**\n * 文本编辑框工具栏\n */\nimport { DEFAULT_FONTSIZE } from \"../../config\";\nimport { MAX_FONT_SIZE, MIN_FONT_SIZE, testFontSizeText } from \"../../misc/text\";\nimport './TextToolbar.less';\nconst ID = 'iower-23nsdf090sd';\nclass TextToolbar {\n    constructor() {\n        this.fontSize = DEFAULT_FONTSIZE;\n        this.color = 'black';\n        //powerpoint中的字体大小表\n        this.fonts = [8, 9, 10, 11, 12, 14, 16, 18, 20, 24, 28, 32, 36, 40, 44, 48, 54, 60, 66, 72, 80, 88];\n        this.colors = [\n            'rgb(224,32,32)',\n            'rgb(250,100,0)',\n            'rgb(247,181,0)',\n            'rgb(109,212,0)',\n            'rgb(68,215,182)',\n            'rgb(50,197,255)',\n            'rgb(0,145,255)',\n            'rgb(98,54,255)',\n            'rgb(182,32,224)',\n            'rgb(109,114,120)',\n            'rgb(0,0,0)',\n            'rgb(255,255,255)'\n        ];\n        this.fontInputPrevValue = '';\n        this.colorCells = [];\n        this.colorPlatteOpen = false;\n        this.toolbarContainer = document.createElement('div');\n        this.toolbarContainer.className = 'text-toolbar';\n        this.toolbarContainer.id = ID;\n        //颜色按钮，点击弹出颜色选择弹窗\n        this.colorBtn = document.createElement('div');\n        this.colorBtn.innerText = '';\n        this.colorBtn.className = 'color flex-cell';\n        const colorDot = document.createElement('span');\n        this.colorBtn.appendChild(colorDot);\n        //颜色选择弹窗及弹窗内的元素\n        this.colorPlatteContainer = document.createElement('div');\n        this.colorPlatteContainer.className = 'platte-container';\n        this.colorPlatteContainer.onmousemove = (ev) => {\n            ev.stopPropagation();\n        };\n        for (let i = 0; i < this.colors.length; i++) {\n            const colorCell = document.createElement('div');\n            colorCell.className = 'color-cell';\n            colorCell.style.backgroundColor = this.colors[i];\n            const isWhite = this.colors[i] === 'rgb(255,255,255)';\n            if (isWhite) {\n                colorCell.style.border = '1px solid #D9D9DB';\n            }\n            this.colorPlatteContainer.appendChild(colorCell);\n            this.colorCells.push(colorCell);\n        }\n        //字体输入框\n        this.fontInput = document.createElement('input');\n        this.fontInput.className = 'fontsize input';\n        //字体增加按钮\n        this.fontIncBtn = document.createElement('div');\n        this.fontIncBtn.className = 'fontsize inc flex-cell';\n        const incText = document.createElement('span');\n        incText.innerText = '+';\n        this.fontIncBtn.appendChild(incText);\n        //字体减小按钮\n        this.fontDecBtn = document.createElement('div');\n        this.fontDecBtn.className = 'fontsize dec flex-cell';\n        const decText = document.createElement('span');\n        decText.innerText = '-';\n        this.fontDecBtn.appendChild(decText);\n        this.toolbarContainer.appendChild(this.fontInput);\n        this.toolbarContainer.appendChild(this.fontIncBtn);\n        this.toolbarContainer.appendChild(this.fontDecBtn);\n        this.toolbarContainer.appendChild(this.colorBtn);\n        this.toolbarContainer.appendChild(this.colorPlatteContainer);\n        this._registerEvents();\n        this._stopPropagation();\n    }\n    show(args) {\n        const { left, top, container, fontSize, color, scale } = args;\n        this.setFontsize(fontSize);\n        this.setColor(color);\n        if (!document.getElementById(ID)) {\n            container.appendChild(this.toolbarContainer);\n        }\n        this.toolbarContainer.style.display = 'flex';\n        this.toolbarContainer.style.transformOrigin = 'left bottom';\n        this.toolbarContainer.style.transform = `scale(${scale})`;\n        this.colorPlatteContainer.style.display = 'none';\n        this.updatePosition({\n            left, top\n        });\n    }\n    resize(scale) {\n        this.toolbarContainer.style.transform = `scale(${scale})`;\n    }\n    updatePosition(args) {\n        const { left, top } = args;\n        this.toolbarContainer.style.left = `${left - 23}px`;\n        this.toolbarContainer.style.top = `${top - 78}px`;\n    }\n    hide() {\n        this.toolbarContainer.style.display = 'none';\n    }\n    setFontsize(fontSize) {\n        this.fontSize = fontSize;\n        this.fontInputPrevValue = Math.round(fontSize).toString();\n        this.fontInput.value = this.fontInputPrevValue;\n    }\n    setColor(color) {\n        this.color = color;\n        this.colorBtn.firstChild.style.backgroundColor = this.color;\n        this.setColorPlatteState(false);\n    }\n    setColorPlatteState(open) {\n        this.colorPlatteOpen = open;\n        if (open) {\n            this.colorPlatteContainer.style.display = 'flex';\n        }\n        else {\n            this.colorPlatteContainer.style.display = 'none';\n        }\n    }\n    /**\n     * 修改字体大小时，调用外界注册的回调函数\n     */\n    onFontSizeChange(func) {\n        this.fontSizeCb = func;\n    }\n    /**\n     * 修改颜色时，调用外界注册的回调函数\n     */\n    onColorChange(func) {\n        this.colorCb = func;\n    }\n    _registerEvents() {\n        for (let i = 0; i < this.colorCells.length; i++) {\n            this.colorCells[i].onclick = (event) => {\n                this.setColor(this.colors[i]);\n                if (this.colorCb) {\n                    this.colorCb(this.color);\n                }\n            };\n        }\n        this.colorBtn.onclick = (event) => {\n            this.setColorPlatteState(!this.colorPlatteOpen);\n        };\n        this.fontIncBtn.onclick = (event) => {\n            if (this.fontSize < MAX_FONT_SIZE) {\n                this._sendFontChangeCommand(Math.min(this.fontSize + 8, MAX_FONT_SIZE));\n            }\n        };\n        this.fontDecBtn.onclick = (event) => {\n            if (this.fontSize > MIN_FONT_SIZE) {\n                this._sendFontChangeCommand(Math.max(this.fontSize - 8, MIN_FONT_SIZE));\n            }\n        };\n        const setFontSizeByInput = (blurAfterSet) => {\n            const fontSizeStr = this.fontInput.value;\n            if (fontSizeStr === '') {\n                return;\n            }\n            else {\n                const textType = testFontSizeText(fontSizeStr);\n                let fontSize;\n                if (textType === 'exceed_max') {\n                    fontSize = MAX_FONT_SIZE;\n                }\n                else if (textType === 'exceed_min') {\n                    fontSize = MIN_FONT_SIZE;\n                }\n                else {\n                    fontSize = Number(fontSizeStr);\n                }\n                this.fontInput.value = fontSize;\n                this.fontInputPrevValue = fontSize.toString();\n                this._sendFontChangeCommand(this.fontInput.value);\n                if (blurAfterSet) {\n                    this.fontInput.blur();\n                }\n            }\n        };\n        this.fontInput.onkeydown = (event) => {\n            event.stopPropagation();\n            if (event.key === 'Enter') {\n                setFontSizeByInput(true);\n            }\n        };\n        this.fontInput.onblur = () => {\n            setFontSizeByInput(false);\n        };\n        this.fontInput.oninput = (event) => {\n            let text = event.target.value;\n            text = text.replace(/\\D/g, '');\n            this.fontInput.value = text;\n        };\n    }\n    /**\n     * 通过文本框工具栏发送字体变化事件\n     * @param text\n     */\n    _sendFontChangeCommand(text) {\n        const fontSize = typeof text === 'string' ? Number(text) : text;\n        this.setFontsize(fontSize);\n        if (this.fontSizeCb) {\n            this.fontSizeCb(this.fontSize);\n        }\n    }\n    /**\n     * 点击文本框按钮的操作不应该传递给上层容器\n     */\n    _stopPropagation() {\n        this.toolbarContainer.onmousedown = (event) => {\n            event.stopPropagation();\n        };\n        this.toolbarContainer.ontouchstart = (event) => {\n            event.stopPropagation();\n        };\n        //mouseup还是往上传，否则如果鼠标在文本框工具栏上松开，应用会以为鼠标一直处于按下状态\n        // this.toolbarContainer.onmouseup = (event) => {\n        //     event.stopPropagation()\n        // }\n    }\n}\nexport default TextToolbar;\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./TextToolbar.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./TextToolbar.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./TextToolbar.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".text-toolbar {\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    justify-content: space-around;\\n\\n    position: absolute;\\n\\n    box-sizing: border-box;\\n    height: 48px;\\n    margin: 12px 12px 24px;\\n\\n    -webkit-user-select: none;\\n\\n       -moz-user-select: none;\\n\\n        -ms-user-select: none;\\n\\n            user-select: none;\\n    background-color: white;\\n    border-radius: 4px;\\n    box-shadow: 0 8px 24px -4px rgba(0,0,0,0.1);\\n\\n    z-index: 7;\\n}\\n\\n    .text-toolbar .flex-cell {\\n        display: flex;\\n        flex: 1;\\n        justify-content: center;\\n        align-items: center;\\n        cursor: pointer;\\n        border: none;\\n        width: 40px;\\n        height: 40px;\\n    }\\n\\n    .text-toolbar .color {\\n        border-radius: 12px;\\n    }\\n\\n    .text-toolbar .color span {\\n            width: 18px;\\n            height: 18px;\\n            border-radius: 9px;\\n        }\\n\\n    .text-toolbar .fontsize.input {\\n        height: 24px;\\n        vertical-align: top;\\n        box-sizing: border-box;\\n        width: 40px;\\n        outline: none;\\n        border: 1px solid rgba(0, 0, 0, 0.3);\\n        margin: 0 6px 0 8px;\\n        text-align: center;\\n    }\\n\\n    .text-toolbar .fontsize.inc, .text-toolbar .fontsize.dec {\\n        border-radius: 12px;\\n        font-size: 32px;\\n        line-height: 24px;\\n        text-align: center;\\n        vertical-align: top;\\n        position: relative;\\n        top: -3px;\\n    }\\n\\n    .text-toolbar .platte-container {\\n        position: absolute;\\n        display: none;\\n        flex-direction: row;\\n        flex-wrap: wrap;\\n\\n        align-items: center;\\n        justify-content: space-around;\\n        box-shadow: 0 8px 24px -4px rgba(0,0,0,0.1);\\n\\n        bottom: 56px;\\n        right: 0;\\n        background-color: white;\\n        width: 100%;\\n    }\\n\\n    .text-toolbar .platte-container .color-cell {\\n            width: 20px;\\n            height: 20px;\\n            border-radius: 10px;\\n            margin: 10px;\\n            display: inline-block;\\n            box-sizing: border-box\\n        }\\n\\n    .text-toolbar .platte-container .color-cell:hover {\\n                cursor: pointer;\\n            }\", \"\"]);\n\n","/**\n * 页面操作\n */\nimport Operation from \"../Operation\";\nclass PageOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'page';\n        this.description = \"页面相关操作\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.pageChange.tap(\"pageChangePlugin\", this.onPageChange.bind(this));\n    }\n    onPageChange() {\n        return this.emit('event:appState:change', 'page', {\n            activeIndex: this.opsManager.currBoard.getCurrPageIndex(),\n            pageNames: this.opsManager.currBoard.pageNames.slice(),\n            currPage: this.opsManager.currBoard.currIndex,\n            pagePayloads: this.opsManager.currBoard.payloadOfPages\n        });\n    }\n    eventsToListen() {\n        return {\n            'page:goto': {\n                value: this.goto.bind(this),\n                information: {\n                    args: 'page: number',\n                    message: `跳转至页面`\n                }\n            },\n            'page:add': {\n                value: this.add.bind(this),\n                information: {\n                    args: 'opt: {insertAfter?: number, payload?: any}',\n                    message: `添加页面。默认添加至当前board最后`\n                }\n            },\n            'page:delete': {\n                value: this.delete.bind(this),\n                information: {\n                    args: 'page: number',\n                    message: '删除页面。只有当页面数量大于1时可以删除页面'\n                }\n            }\n        };\n    }\n    add(opt) {\n        this.dispatch({\n            type: this.type,\n            action: 'add',\n            insertAfter: opt.insertAfter,\n            payload: opt.payload\n        });\n    }\n    goto(page) {\n        //跳转至页面\n        if (page !== this.opsManager.currBoard.currIndex &&\n            this.opsManager.currBoard.pageNames.includes(page.toString())) {\n            this.dispatch({\n                type: this.type,\n                action: 'goto',\n                page: page,\n            });\n        }\n    }\n    delete(page) {\n        const pages = this.opsManager.currBoard.pages;\n        if (page in pages && Object.keys(pages).length > 1) {\n            this.dispatch({\n                type: this.type,\n                action: 'delete',\n                page: page\n            });\n        }\n    }\n}\nexport default PageOp;\n","/**\n * 图片相关操作\n */\nimport Operation from \"../Operation\";\nimport { addImage, draw, getImageProperPosition } from \"./util\";\nimport { getTransformedBoundary } from \"../../misc/shapeHelper\";\nclass ImageOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'image';\n        this.description = \"图片操作\";\n        /**\n         * initWidth, initHeight可能是图片的固有宽高，也可以是用户指定的该图片的显示宽高\n         *\n         * ImageOp快照中的boundary完全决定了图片相对于其他快照的位置\n         *\n         * @param url\n         * @param initWidth\n         * @param initHeight\n         * @param page\n         */\n        this.dispatchImage = (url, initWidth, initHeight, page) => {\n            const { sx, sy, width, height } = getImageProperPosition(this, initWidth, initHeight);\n            if (page) {\n                this.dispatchFromPage({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                }, page);\n            }\n            else {\n                this.dispatch({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                });\n            }\n        };\n    }\n    eventsToListen() {\n        return {\n            'image:upload': {\n                value: this.addImage.bind(this),\n                information: {\n                    args: `url: string, opts?: {\n                        width?: number,\n                        height?: number\n                    }`,\n                    message: `上传图片`\n                }\n            },\n        };\n    }\n    addImage(url, opts) {\n        return addImage(this, url, opts);\n    }\n    preview(snapshot, ctx, opts) {\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        return draw(ctx, data.url, boundary, {\n            page: opts.page,\n            supportToDataUrl: opts.supportToDataUrl,\n            preview: true\n        });\n    }\n    draw(snapshot, ctx, opts) {\n        /**\n         * page是该图片的容器页面。this.opsManager.currPage是当前打开的页面。\n         * 生成预览图时，currPage和图片的容器页面不是同一个页面\n         */\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        return draw(ctx, data.url, boundary, {\n            page: opts.page,\n            div: opts.div,\n            id: snapshot.opId,\n            type: 'image'\n        });\n    }\n    hide(snapshot, ctx, div) {\n        var _a;\n        //移除之前绘制的文本框\n        let image = div.querySelector(`[id='image-${snapshot.opId}']`);\n        (_a = image === null || image === void 0 ? void 0 : image.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(image);\n    }\n}\nexport default ImageOp;\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgwIiBoZWlnaHQ9IjM2MCIgdmlld0JveD0iMCAwIDQ4MCAzNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wIDBINDgwVjM2MEgwVjBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQ3OCAySDJWMzU4SDQ3OFYyWk0wIDBWMzYwSDQ4MFYwSDBaIiBmaWxsPSIjRDlEOURCIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTY2LjI5NCAxMjZIMzE1TDMxNSAxODkuMzg2TDI5NS4wNDkgMTY3LjY0QzI5MS4xNDQgMTYzLjM4NCAyODQuNDU2IDE2My4zMTEgMjgwLjQ2IDE2Ny40ODNMMjM4Ljc5MiAyMTAuOTc3TDIxOS45MTcgMTkxLjU3MkMyMTYuNzg0IDE4OC4zNTEgMjExLjYxMyAxODguMzQxIDIwOC40NjggMTkxLjU1MUwxNjcuMzM4IDIzMy41MjlIMTY2LjI5NEwxNjYuMjk0IDEyNlpNMTY2LjI5NCAyNDEuNTI5QzE2NC40NzggMjQxLjUyOSAxNjIuODAzIDI0MC45MjQgMTYxLjQ2IDIzOS45MDRIMTYxLjA5MkwxNjEuMjUyIDIzOS43NDFDMTU5LjQ0NyAyMzguMjc0IDE1OC4yOTQgMjM2LjAzNiAxNTguMjk0IDIzMy41MjlWMTI2QzE1OC4yOTQgMTIxLjU4MiAxNjEuODc2IDExOCAxNjYuMjk0IDExOEgzMTVDMzE5LjQxOCAxMTggMzIzIDEyMS41ODIgMzIzIDEyNlYyMzMuNTI5QzMyMyAyMzcuOTQ4IDMxOS40MTggMjQxLjUyOSAzMTUgMjQxLjUyOUgxNjYuMjk0Wk0yMDEgMTcxLjgwNEMyMDkuMjg0IDE3MS44MDQgMjE2IDE2NS4wODggMjE2IDE1Ni44MDRDMjE2IDE0OC41MiAyMDkuMjg0IDE0MS44MDQgMjAxIDE0MS44MDRDMTkyLjcxNiAxNDEuODA0IDE4NiAxNDguNTIgMTg2IDE1Ni44MDRDMTg2IDE2NS4wODggMTkyLjcxNiAxNzEuODA0IDIwMSAxNzEuODA0WiIgZmlsbD0iI0U2RTdFQiIvPgo8L3N2Zz4K\"","/**\n * board操作，一个board可以对应于一个文档。\n */\nimport Operation from \"../Operation\";\nclass BoardOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'board';\n        this.description = \"board相关操作\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.boardChange.tap(\"boardChangePlugin\", this.onBoardChange.bind(this));\n    }\n    onBoardChange() {\n        return this.emit('event:appState:change', 'board', {\n            boardNames: Object.keys(this.app.room.boards),\n            boardDisplayNames: this.app.room.getBoardDisplayNames(),\n            currBoard: this.app.room.currIndex,\n            currBoardDisplayName: this.app.room.currBoard.displayName\n        });\n    }\n    eventsToListen() {\n        return {\n            'board:goto': {\n                value: this.goto.bind(this),\n                information: {\n                    args: 'boardName: string',\n                    message: `跳转至board。若board不存在，则创建board`\n                }\n            },\n            'board:add': {\n                value: this.add.bind(this),\n                information: {\n                    args: 'boardName: string, pageCount: number',\n                    message: `创建[pageCount]页数的board`\n                }\n            },\n            'board:delete': {\n                value: this.delete.bind(this),\n                information: {\n                    args: 'boardName: string',\n                    message: '删除board。只有当board数量大于1时可以删除board'\n                }\n            }\n        };\n    }\n    goto(boardName) {\n        //跳转至board。若board不存在，则创建board\n        if (boardName !== this.app.room.currIndex) {\n            this.dispatch({\n                type: this.type,\n                action: 'goto',\n                boardName: boardName\n            });\n        }\n    }\n    add(displayName, pageCount) {\n        const boardName = `${displayName}_${new Date().valueOf()}`;\n        this.dispatch({\n            type: this.type,\n            action: 'add',\n            boardName: boardName,\n            displayName: displayName,\n            pageCount\n        });\n    }\n    delete(boardName) {\n        const boards = this.app.room.boards;\n        if (boardName in boards && Object.keys(boards).length > 1) {\n            this.dispatch({\n                type: this.type,\n                action: 'delete',\n                boardName: boardName\n            });\n        }\n    }\n}\nexport default BoardOp;\n","/**\n * 复制操作\n */\nimport Operation from \"../Operation\";\nimport deepClone from 'lodash.clonedeep';\nexport const COPY_PASTE_SHIFT = 50;\nclass DuplicateOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'duplicate';\n        this.description = \"拷贝drawable快照\";\n        this.copiedSnapshotArray = [];\n    }\n    registerHooks() {\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `复制当前选中的元素`\n                }\n            }\n        };\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (key === 'c' && (this.isKeyDown('control') || this.isKeyDown('command')) && this.opsManager.selectedOpIds.length > 0) {\n            ev.preventDefault();\n            let selectedOpIds = this.opsManager.selectedOpIds.filter(opId => {\n                return this.drawOpsOfPage.hasOwnProperty(opId);\n            });\n            this.copiedSnapshotArray = deepClone(selectedOpIds.map(opId => this.drawOpsOfPage[opId]));\n            return true;\n        }\n        else if (key === 'v' && (this.isKeyDown('control') || this.isKeyDown('command')) && this.copiedSnapshotArray.length > 0) {\n            ev.preventDefault();\n            this.execCommand(this.copiedSnapshotArray.slice());\n            return true;\n        }\n    }\n    execCommand(snapshotsToCopy) {\n        if (this.opsManager.selectedOpIds.length > 0\n            || (snapshotsToCopy && snapshotsToCopy.length > 0)) {\n            const snapshot = this.getSnapshot(snapshotsToCopy);\n            this.dispatch(snapshot);\n            const newOpIds = snapshot.duplicates.map(dup => dup.opId);\n            this.opsManager.selectOp.dispatch(this.opsManager.selectOp.getSnapshot(newOpIds));\n        }\n    }\n    getSnapshot(snapshotsToCopy) {\n        const snapshotFromKeyboardCopy = snapshotsToCopy ? true : false;\n        if (!snapshotsToCopy) {\n            const selectedOpIds = this.opsManager.selectedOpIds;\n            snapshotsToCopy = [];\n            for (let i = 0; i < selectedOpIds.length; i++) {\n                const id = selectedOpIds[i];\n                if (this.drawOpsOfPage.hasOwnProperty(id)) {\n                    const snapshot = this.drawOpsOfPage[id];\n                    snapshotsToCopy.push(snapshot);\n                }\n            }\n        }\n        snapshotsToCopy = snapshotsToCopy.map(snapshot => {\n            snapshot = deepClone(snapshot);\n            snapshot.data.dx = (snapshot.data.dx ? snapshot.data.dx : 0) + COPY_PASTE_SHIFT;\n            snapshot.data.dy = (snapshot.data.dy ? snapshot.data.dy : 0) + COPY_PASTE_SHIFT;\n            snapshot.opId = this.opsManager.currPage.getNextOpId(true);\n            return snapshot;\n        });\n        //ctrl-c, ctrl-v后更新copiedSnapshotArray， 若不更新，连续更新会复制在相同的位置\n        if (snapshotFromKeyboardCopy) {\n            this.copiedSnapshotArray = snapshotsToCopy.slice();\n        }\n        return {\n            type: this.type,\n            duplicates: snapshotsToCopy,\n        };\n    }\n}\nexport default DuplicateOp;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { getArrowPoints, getTransformedPoint, getLineCoef, getXFromCoefAndOffset, getLineFromPointsY, dist } from \"../../misc/shapeHelper\";\nimport PenOp from \"./PenOp\";\nimport drawConfig from \"./drawConfig\";\nclass PenArrowOp extends PenOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'pen-arrow';\n        this.description = \"带箭头的涂鸦操作工具。\\n首先使用op:pen-arrow:activate设置画布为涂鸦模式。\" +\n            \"通过op:pen-arrow:lineWidth, op:pen-arrow:color设置涂鸦的宽度和颜色。然后画布会监听鼠标动作，生成涂鸦。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getArrowPoints(points, withArrow) {\n        let arrowPoints = [];\n        if (points.length > 1 && withArrow) {\n            var lastTwoPoints = points.length > 2 ? [points[points.length - 3], points[points.length - 1]] : points.slice(points.length - 2), lineCoef = getLineCoef(lastTwoPoints);\n            // if we have last two points far apart, we want to add another point closer to the last one\n            // so that the doesn't get cut by quadraticCurveTo and so that arrow is not disconnected from the line\n            if (dist(lastTwoPoints[0], lastTwoPoints[1]) > 1) {\n                var lastPointX = lastTwoPoints[1][0] - lastTwoPoints[0][0] > 0 ?\n                    getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, 1) :\n                    2 * lastTwoPoints[1][0] - getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, 1);\n                var lastPointY = lastTwoPoints[1][0] - lastTwoPoints[0][0] === 0 ?\n                    lastTwoPoints[1][1] + (lastTwoPoints[1][1] - lastTwoPoints[0][1] > 0 ? 1 : -1) :\n                    getLineFromPointsY(lastTwoPoints, lastPointX);\n                lastTwoPoints.push([lastPointX, lastPointY]);\n            }\n            arrowPoints = getArrowPoints(this.lineWidth + 1, lastTwoPoints);\n        }\n        return arrowPoints;\n    }\n    getSnapshot(inProgress) {\n        const points = this.points;\n        const withArrow = !inProgress && points.length > 2;\n        let arrowPoints = this.getArrowPoints(points, withArrow);\n        const currOpId = this.opsManager.currPage.getOpId();\n        const pkg = this.app.room.opIdSnapshotMap[currOpId];\n        if (!pkg || !pkg.snapshot.hasOwnProperty('category')) {\n            /**\n             * 保险措施，如果之前发送的opId是部分数据，则发送一份完整的数据出去\n             */\n            return Object.assign({ points: points.slice(), arrowPoints, total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n        let boundaryRect = {\n            boundary: this.getBoundaryRectOfFreeDraw()\n        };\n        if (this.sampleSeq > 0 && inProgress) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), total: points.length });\n        }\n        else if (this.sampleSeq > 0) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), arrowPoints, inProgress: inProgress, total: points.length });\n        }\n        else {\n            return Object.assign({ points: points.slice(), arrowPoints, total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n    }\n    draw(snapshot, ctx) {\n        ctx.save();\n        const data = snapshot.data;\n        this._draw(snapshot, ctx);\n        ctx.strokeStyle = data.color;\n        ctx.lineWidth = data.lineWidth;\n        ctx.globalAlpha = data.opacity;\n        ctx.stroke();\n        const arrowPoints = data.arrowPoints;\n        if (arrowPoints.length === 3) {\n            ctx.beginPath();\n            ctx.moveTo(...getTransformedPoint(arrowPoints[0], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[1], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[2], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.fillStyle = data.color;\n            ctx.fill();\n        }\n        ctx.restore();\n    }\n}\nexport default PenArrowOp;\n","import { getArrowPoints, getTransformedPoint } from \"../../misc/shapeHelper\";\nimport LineOp from \"./LineOp\";\nclass LineArrowOp extends LineOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'line-arrow';\n        this.description = \"绘制带箭头线段。\\n首先使用op:line-arrow:activate设置画布为线段模式。\" +\n            \"通过op:line-arrow:lineWidth, op:line-arrow:color设置线段的宽度和颜色。然后画布会监听鼠标动作，生成线段。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getSnapshot(inProgress) {\n        const withArrow = !inProgress && this.points.length > 2;\n        let arrowPoints = [];\n        if (this.points.length > 1 && withArrow) {\n            const lastTwoPoints = [this.sp, this.ep];\n            arrowPoints = getArrowPoints(this.lineWidth + 1, lastTwoPoints);\n        }\n        return Object.assign({ arrowPoints }, this.getTwoPointShapeCommonProperty({\n            inProgress\n        }));\n    }\n    draw(snapshot, ctx) {\n        ctx.save();\n        const data = snapshot.data;\n        const { sp, ep } = this.getStartEndPointFromSnapshot(data);\n        ctx.beginPath();\n        ctx.moveTo(...getTransformedPoint(sp, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.lineTo(...getTransformedPoint(ep, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.strokeStyle = data.color;\n        ctx.lineWidth = data.lineWidth;\n        ctx.globalAlpha = data.opacity;\n        ctx.stroke();\n        const arrowPoints = data.arrowPoints;\n        if (arrowPoints.length === 3) {\n            ctx.beginPath();\n            ctx.moveTo(...getTransformedPoint(arrowPoints[0], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[1], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[2], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.fillStyle = data.color;\n            ctx.fill();\n        }\n        ctx.restore();\n    }\n}\nexport default LineArrowOp;\n","import SelectBase from \"../SelectOp/SelectBase\";\nclass ElementEraserOp extends SelectBase {\n    constructor() {\n        super(...arguments);\n        this.type = 'element-eraser';\n        this.description = \"删除元素。\";\n        this.lastSelectedOpIds = [];\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    postMouseMove(event) {\n        if (this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = `url(${require('../../../assets/cursors/element-eraser.svg')}) -1 17, auto`;\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n    }\n    postMouseUp(idsBeenSelected) {\n        this.postClick(idsBeenSelected);\n    }\n    postClick(idsBeenSelected) {\n        this.dispatch(this.getSelectionSnapshot(false, []));\n        if (idsBeenSelected.length > 0) {\n            this.dispatch(this.getSnapshot(idsBeenSelected));\n        }\n        this.lastSelectedOpIds = [];\n    }\n    getSnapshot(idsBeenSelected) {\n        let deleteOpIds = idsBeenSelected.slice();\n        return {\n            type: 'element-eraser',\n            deleteOpIds: deleteOpIds,\n            dependOn: deleteOpIds\n        };\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const newData = Object.assign({}, baseOp.data, {\n            hidden: true\n        });\n        return Object.assign({}, baseOp, {\n            data: newData\n        });\n    }\n}\nexport default ElementEraserOp;\n","import Operation from \"../Operation\";\nimport drawConfig from \"../DrawOp/drawConfig\";\nimport { drawUserName } from \"../util\";\nclass LaserOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'laser';\n        this.description = \"镭射灯\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    registerHooks() {\n        this.opsManager.hooks.opChange.tap('OpChange', this.handleOpChange.bind(this));\n    }\n    /**\n     * 当操作类型变化时，关闭镭射灯\n     */\n    handleOpChange(newType) {\n        var _a;\n        if (newType !== 'laser' && ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'laser') {\n            document.body.style.cursor = 'default';\n            this.dispatch(this.getSnapshot(false));\n        }\n    }\n    handleMouseLeave(event, mx, my) {\n        this.dispatch(this.getSnapshot(false));\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = 'none';\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n        this.dispatch(this.getSnapshot(true, [mx, my]));\n    }\n    getSnapshot(inProgress, point) {\n        return {\n            type: 'laser',\n            point,\n            inProgress: inProgress,\n            skipUndo: true,\n            reuseOpType: 'laser',\n            color: drawConfig.strokeColor\n        };\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        /**\n         * 激光笔大小固定为12 * 12的红色圆形\n         */\n        const r = 6 / this.app.camera.scale;\n        if (snapshot.data.inProgress && data.point) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.arc(data.point[0], data.point[1], r, 0, Math.PI * 2, true);\n            ctx.shadowColor = 'rgba(255, 0, 0, 0.5)';\n            ctx.shadowBlur = 8;\n            ctx.fillStyle = '#ff0000';\n            ctx.fill();\n            ctx.restore();\n            if (snapshot.uid !== this.app.account && this.app.appConfig.showLaserNickname) {\n                drawUserName({\n                    ctx,\n                    account: snapshot.uid,\n                    scale: this.app.camera.scale,\n                    px: data.point[0],\n                    py: data.point[1],\n                    bgColor: data.color\n                });\n            }\n        }\n    }\n}\nexport default LaserOp;\n","/**\n * 删除操作，可通过ctrl-v还原\n */\nimport Operation from \"../Operation\";\nclass LockOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'lock';\n        this.description = \"锁定元素。\";\n    }\n    eventsToListen() {\n        return {\n            'lock': {\n                value: this.lockOps.bind(this),\n                information: {\n                    args: 'opIds',\n                    message: `锁定元素`\n                }\n            },\n            'unlock': {\n                value: this.unlockOps.bind(this),\n                information: {\n                    args: 'opIds',\n                    message: `解锁元素`\n                }\n            }\n        };\n    }\n    lockOps(opIds) {\n        this.dispatch(this.getSnapshot(opIds, 'lock'));\n    }\n    unlockOps(opIds) {\n        this.dispatch(this.getSnapshot(opIds, 'unlock'));\n    }\n    getSnapshot(opIds, action) {\n        return {\n            type: this.type,\n            action,\n            dependOn: opIds.slice()\n        };\n    }\n    /**\n     * 锁定，或者解锁元素\n     */\n    transformOp(baseOp, transformOp) {\n        const newData = Object.assign({}, baseOp.data, {\n            locked: transformOp.data.action === 'lock' ? true : false\n        });\n        return Object.assign({}, baseOp, {\n            data: newData\n        });\n    }\n}\nexport default LockOp;\n","/**\n * 背景Op\n *\n * 背景Op和ImageOp类似。区别在于背景Op不会进入快照队列中被undo，redo，clear等操作处理\n */\n/**\n * 图片相关操作\n */\nimport Operation from \"../Operation\";\nimport { addImage, draw, getBackgroundImagePorperPosition, getImageProperPosition } from \"./util\";\nclass BackgroundOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'background';\n        this.description = \"设置背景操作\";\n        this.getBoundaryFromSnapshot = (snapshot) => {\n            let boundary;\n            if (snapshot.data.hasOwnProperty('imgWidth')) {\n                //老版本：背景图片盛满canvas, 快照数据中包含imgWidth, imgHeight\n                const { sx, sy, width, height } = getImageProperPosition(this, snapshot.data.imgWidth, snapshot.data.imgHeight);\n                boundary = {\n                    sx, sy, w: width, h: height\n                };\n            }\n            else {\n                //3.0.2之后的版本\n                //背景快照和其他快照一样，使用世界坐标系，即无论容器大小如何，无论如何缩放，\n                //背景快照和其他元素的相对位置不变\n                boundary = snapshot.data.boundary;\n            }\n            return boundary;\n        };\n        this.dispatchImage = (url, imgWidth, imgHeight, page) => {\n            const { sx, sy, width, height } = getBackgroundImagePorperPosition(this, imgWidth, imgHeight);\n            if (page) {\n                this.dispatchFromPage({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                }, page);\n            }\n            else {\n                this.dispatch({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                });\n            }\n        };\n    }\n    eventsToListen() {\n        return {\n            'background:imageUpload': {\n                value: this.addImage.bind(this),\n                information: {\n                    args: `url: string, opts?: {\n                        width?: number,\n                        height?: number,\n                        pageIndex?: number\n                    }`,\n                    message: `上传背景图片`\n                }\n            },\n        };\n    }\n    addImage(url, opts) {\n        return addImage(this, url, opts);\n    }\n    preview(snapshot, ctx, opts) {\n        const data = snapshot.data;\n        return draw(ctx, data.url, this.getBoundaryFromSnapshot(snapshot), {\n            page: opts.page,\n            supportToDataUrl: opts.supportToDataUrl,\n            preview: true\n        });\n    }\n    draw(snapshot, ctx, opts) {\n        const data = snapshot.data;\n        return draw(ctx, data.url, this.getBoundaryFromSnapshot(snapshot), {\n            page: opts.page,\n            div: opts.div,\n            id: snapshot.opId,\n            type: 'background'\n        });\n    }\n}\nexport default BackgroundOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from './CameraBoundOp';\nimport { shouldDispatch } from \"./util\";\nimport { showToast } from \"../../../component/toast\";\nclass PanOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'pan';\n        this.activate = false;\n        this.description = \"平移操作\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    handleMouseMove(event, mx, my, clientX, clientY) {\n        if (!this.app.enableCameraTransform) {\n            return;\n        }\n        if (!shouldDispatch(this.app))\n            return;\n        if (this.activate) {\n            document.body.style.cursor = 'grabbing';\n        }\n        else if (this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = 'grab';\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n        if (this.activate && this.lastPoint) {\n            this.dispatch(this.getSnapshot(clientX - this.lastPoint[0], clientY - this.lastPoint[1]));\n            this.lastPoint = [clientX, clientY];\n        }\n    }\n    handleMouseDown(event, mx, my, clientX, clientY) {\n        if (!this.app.appConfig.cameraTransformEnabled) {\n            return;\n        }\n        if (!shouldDispatch(this.app)) {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n            return;\n        }\n        this.activate = true;\n        this.beginBatch();\n        this.lastPoint = [clientX, clientY];\n    }\n    handleMouseUp(event, mx, my, clientX, clientY) {\n        if (!this.app.appConfig.cameraTransformEnabled) {\n            return;\n        }\n        if (!shouldDispatch(this.app))\n            return;\n        if (this.activate && this.lastPoint) {\n            this.dispatch(this.getSnapshot(clientX - this.lastPoint[0], clientY - this.lastPoint[1]));\n            this.lastPoint = undefined;\n        }\n        this.activate = false;\n    }\n    getSnapshot(dx, dy) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'pan',\n            dx: -dx,\n            dy: -dy,\n            animate: false\n        });\n    }\n}\nexport default PanOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nimport { showToast } from \"../../../component/toast\";\nconst FACTOR = 1 / 0.86;\nconst UPPER_BOUND = 20;\nconst LOWER_BOUND = 0.03;\nclass ZoomOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'zoom';\n        this.sp = [0, 0];\n        this.description = \"缩放操作\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousewheel.tap(\"MousewheelPlugin\", this.handleMouseWheel.bind(this));\n    }\n    eventsToListen() {\n        return {\n            'zoom:in': {\n                value: this.zoomIn.bind(this),\n                information: {\n                    args: '',\n                    message: `缩放`\n                }\n            },\n            'zoom:out': {\n                value: this.zoomOut.bind(this),\n                information: {\n                    args: '',\n                    message: `缩放`\n                }\n            },\n            'zoom:to': {\n                value: this.zoomTo.bind(this),\n                information: {\n                    args: 'scale: number, animate: boolean',\n                    message: `缩放`\n                }\n            }\n        };\n    }\n    handleMouseWheel(event, mx, my, clientX, clientY) {\n        if (!this.app.appConfig.cameraTransformEnabled) {\n            return;\n        }\n        if (!shouldDispatch(this.app)) {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n            return;\n        }\n        let scale;\n        if (event.deltaY > 0) {\n            scale = FACTOR;\n        }\n        else {\n            scale = 1 / FACTOR;\n        }\n        if (this.app.camera.zoomFactor * scale >= UPPER_BOUND && scale > 1) {\n            return;\n        }\n        else if (this.app.camera.zoomFactor * scale <= LOWER_BOUND && scale < 1) {\n            return;\n        }\n        if (this.isMouseDown) {\n            return;\n        }\n        if (!this.app.container.isTargetOnContainer(event.target)) {\n            return;\n        }\n        this.beginBatch();\n        this.dispatch(this.getSnapshot(scale, false, [clientX, clientY]));\n    }\n    zoomIn() {\n        if (!shouldDispatch(this.app))\n            return;\n        if ((this.app.camera.zoomFactor * FACTOR) >= UPPER_BOUND) {\n            return;\n        }\n        this.beginBatch();\n        return this.dispatch(this.getSnapshot(FACTOR, false));\n    }\n    zoomOut() {\n        if (!shouldDispatch(this.app))\n            return;\n        if ((this.app.camera.zoomFactor / FACTOR) <= LOWER_BOUND) {\n            return;\n        }\n        this.beginBatch();\n        return this.dispatch(this.getSnapshot(1 / FACTOR, false));\n    }\n    zoomTo(destScaleNum, animate) {\n        if (!shouldDispatch(this.app))\n            return;\n        this.beginBatch();\n        return this.dispatch(this.getSnapshot(destScaleNum / this.app.camera.zoomFactor, animate));\n    }\n    getSnapshot(scale, animate, center) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'zoom',\n            animate: animate,\n            center,\n            scale\n        });\n    }\n}\nexport default ZoomOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nclass ResetCameraOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'reset-camera';\n        this.description = \"重置视角\";\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand(animate = true) {\n        if (!shouldDispatch(this.app))\n            return;\n        return this.dispatch(this.getSnapshot(animate));\n    }\n    getSnapshot(animate) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'reset-camera',\n            animate\n        });\n    }\n}\nexport default ResetCameraOp;\n","/**\n * 移动操作。\n * 移动操作必须跟在选择操作之后\n */\nimport Operation from \"../Operation\";\nimport penUrl from '../../../assets/cursors/pen.svg';\nimport elementEraserUrl from '../../../assets/cursors/element-eraser.svg';\nimport cursorUrl from '../../../assets/cursors/cursor.svg';\nimport drawConfig from \"../DrawOp/drawConfig\";\nimport { drawUserName } from \"../util\";\nconst penImg = new Image();\nconst elementEraserImg = new Image();\nconst cursorImg = new Image();\npenImg.src = penUrl;\nelementEraserImg.src = elementEraserUrl;\ncursorImg.src = cursorUrl;\nclass MousePointerOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'mouse-pointer';\n        this.description = \"展示鼠标位置\";\n        this.sampleSeq = 0;\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousemove.tap(\"MousemovePlugin\", this.handleMouseMove.bind(this));\n        this.opsManager.hooks.mouseleave.tap(\"MousemovePlugin\", this.handleMouseLeave.bind(this));\n    }\n    handleMouseMove(event, mx, my) {\n        var _a;\n        if (!this.app.showCursor || ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'laser')\n            return;\n        const inContainer = this.app.container.isTargetOnContainer(event.target);\n        /**\n         * 减少网络传输数据量。每pointsPerBatch才传输一次数据\n         */\n        if (this.sampleSeq % 6 === 0) {\n            this.dispatch(this.getSnapshot([mx, my], inContainer));\n        }\n        this.sampleSeq += 1;\n    }\n    handleMouseLeave(event, mx, my) {\n        var _a;\n        if (!this.app.showCursor || ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'laser')\n            return;\n        this.dispatch(this.getSnapshot([mx, my], false));\n        this.sampleSeq = 0;\n    }\n    getSnapshot(point, inContainer) {\n        return {\n            type: 'mouse-pointer',\n            point: [Number(point[0].toFixed(1)), Number(point[1].toFixed(1))],\n            c: drawConfig.strokeColor,\n            show: inContainer ? 1 : 0,\n            op: this.opsManager.currOp ? this.opsManager.currOp.type : '',\n            reuseOpType: 'mouse-pointer',\n            nickname: this.app.nickname\n        };\n    }\n    preview() {\n        return;\n    }\n    draw(snapshot, ctx) {\n        const now = new Date().valueOf();\n        if (now - snapshot.time > 5000) {\n            return;\n        }\n        const data = snapshot.data;\n        if (snapshot.uid === this.app.account || !data.show || !data.point) {\n            return;\n        }\n        const img = this.getImageByOpType(data.op);\n        let [px, py] = this.mapPointInsideContainer(data.point[0], data.point[1]);\n        if (this.opsManager.drawOpTypes.includes(data.op)) {\n            /**\n             * 画笔的图片位置需要微调\n             */\n            px = px - 1 / this.app.camera.scale;\n            py = py - 27 / this.app.camera.scale;\n        }\n        let cursorSize = 32 / this.app.camera.scale;\n        ctx.drawImage(img, px, py, cursorSize, cursorSize);\n        if (!this.app.appConfig.showCursorNickname)\n            return;\n        drawUserName({\n            ctx,\n            account: data.nickname || snapshot.uid,\n            scale: this.app.camera.scale,\n            px,\n            py,\n            bgColor: data.c\n        });\n    }\n    /**\n     * 另一个用户的鼠标位置可能超出屏幕，若超出屏幕，找到屏幕边缘位置绘制\n     * @param point\n     */\n    mapPointInsideContainer(px, py) {\n        const [worldSx, worldSy] = this.app.camera.convertToPointInWorld(0, 0);\n        const [worldEx, worldEy] = this.app.camera.convertToPointInWorld(this.app.container.width, this.app.container.height);\n        if (px < worldSx + 30) {\n            px = worldSx + 30;\n        }\n        else if (px > worldEx - 25) {\n            px = worldEx - 25;\n        }\n        if (py < worldSy + 30) {\n            py = worldSy + 30;\n        }\n        else if (py > worldEy - 15) {\n            py = worldEy - 15;\n        }\n        return [px, py];\n    }\n    getImageByOpType(opType) {\n        if (opType === 'element-eraser') {\n            return elementEraserImg;\n        }\n        else if (this.opsManager.drawOpTypes.includes(opType)) {\n            return penImg;\n        }\n        else {\n            return cursorImg;\n        }\n    }\n}\nexport default MousePointerOp;\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MzA2MTkyNDQ5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwOTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU2IDBsNjEyLjY1MDY2NyA1NzMuODI0LTI1MC4yODI2NjcgMjIuNzQxMzMzLTQ1LjQ0IDQuMDk2IDE4LjkwMTMzMyA0MS41NTczMzMgMTUxLjg1MDY2NyAzMzIuNTQ0TDYzMS42OCAxMDI0bC0xNDQuODk2LTMzNi4xMjgtMTguMTc2LTQyLjM2OC0zMy41Nzg2NjcgMzEuNTMwNjY3LTE3Ny43OTIgMTY2Ljc0MTMzM0wyNTYgMCIgcC1pZD0iMjA5NyI+PC9wYXRoPjwvc3ZnPg==\"","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nclass ResizeCameraOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'resize-camera';\n        this.description = \"重置视角\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.resize.tap(\"ResizePlugin\", this.handleResize.bind(this));\n    }\n    handleResize(event, width, height) {\n        if (width === 0 || height === 0) {\n            return;\n        }\n        if (this.app.vision.mode === 'follower') {\n            /**\n             * 如果是跟随者，则用现在的camera-bound重新计算一遍自己的位置\n             */\n            this.app.camera.updateTransParamAndRefresh();\n        }\n        else {\n            this.dispatch(this.getSnapshot(width, height));\n        }\n    }\n    getSnapshot(width, height) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'resize-camera',\n            width,\n            height,\n            animate: false\n        });\n    }\n}\nexport default ResizeCameraOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nclass FitToContentOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'fit-to-content';\n        this.description = \"缩放至完全包含内容\";\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand(animate = true) {\n        if (!shouldDispatch(this.app))\n            return;\n        return this.dispatch(this.getSnapshot(animate));\n    }\n    getSnapshot(animate) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'fit-to-content',\n            animate\n        });\n    }\n}\nexport default FitToContentOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nclass FitToDocOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'fit-to-doc';\n        this.description = \"缩放至完全包含文档\";\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand(animate = true) {\n        if (!shouldDispatch(this.app))\n            return;\n        if (!this.app.room.currBoard.currPage.backgroundSnapshot)\n            return;\n        return this.dispatch(this.getSnapshot(animate));\n    }\n    getSnapshot(animate) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'fit-to-doc',\n            animate\n        });\n    }\n}\nexport default FitToDocOp;\n","import RectOp from \"./RectOp\";\nclass RectFillOp extends RectOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'rect-fill';\n    }\n    /**\n     * 这个是新版本的动作。由于需要和老版本互通，因此将type设置为rect，老版本没有rect-fill op，如果type为rect-fill, 则老版本无法理解如何绘制该图形\n     */\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'fill',\n            inProgress\n        });\n    }\n}\nexport default RectFillOp;\n","import EllipseOp from \"./EllipseOp\";\nclass EllipseFillOp extends EllipseOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'ellipse-fill';\n    }\n    /**\n     * 这个是新版本的动作。由于需要和老版本互通，因此将type设置为rect，老版本没有rect-fill op，如果type为rect-fill, 则老版本无法理解如何绘制该图形\n     */\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'fill',\n            inProgress\n        });\n    }\n}\nexport default EllipseFillOp;\n","/**\n * 视频\n */\nimport Operation from \"../Operation\";\nimport { getTransformedBoundary } from \"../../misc/shapeHelper\";\nimport { fetchVideoResource, getVideoResource, videoResourceLoaded } from \"../../resource/resourceCache\";\nimport { getImageProperPosition } from \"../ImageOp/util\";\nclass VideoOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'video';\n        this.description = \"视频操作\";\n    }\n    eventsToListen() {\n        return {\n            'video:insert': {\n                value: this.addVideo.bind(this),\n                information: {\n                    args: `url: string, opts: {\n                         width: number,\n                         pageIndex?: number\n                     }`,\n                    message: `上传视频`\n                }\n            },\n        };\n    }\n    addVideo(url, opts) {\n        const currBoard = this.app.room.currBoard;\n        let currPage = this.opsManager.currPage;\n        if (opts && opts.hasOwnProperty('pageIndex')) {\n            const pageName = currBoard.pageNames[opts.pageIndex];\n            if (currBoard.pages.hasOwnProperty(pageName)) {\n                currPage = currBoard.pages[pageName];\n            }\n        }\n        if (videoResourceLoaded(url)) {\n            const video = getVideoResource(url);\n            const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : video.videoWidth;\n            const height = width / video.videoWidth * video.videoHeight;\n            this.dispatchVideo({ url, width, height, page: currPage });\n        }\n        else {\n            currPage.addWaitingResource(url);\n            fetchVideoResource(url, (video) => {\n                const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : video.videoWidth;\n                const height = width / video.videoWidth * video.videoHeight;\n                this.dispatchVideo({ url, width, height, page: currPage });\n                currPage.removeWaitingResource(url);\n            });\n        }\n    }\n    dispatchVideo(opt) {\n        const { sx, sy, width, height } = getImageProperPosition(this, opt.width, opt.height);\n        this.dispatch({\n            type: this.type,\n            url: opt.url,\n            boundary: {\n                w: width,\n                h: height,\n                sx,\n                sy\n            }\n        });\n    }\n    preview() { }\n    draw(snapshot, ctx, opts) {\n        /**\n         * page是该图片的容器页面。this.opsManager.currPage是当前打开的页面。\n         * 生成预览图时，currPage和图片的容器页面不是同一个页面\n         */\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        const div = this.app.container.el;\n        const url = data.url;\n        if (videoResourceLoaded(url) && div) {\n            let video = div.querySelector(`[id='video-${snapshot.opId}']`);\n            if (!video) {\n                video = getVideoResource(url).cloneNode(true);\n                video.id = `video-${snapshot.opId}`;\n                video.style.userSelect = 'none';\n                video.style.position = 'absolute';\n                video.controls = true;\n                video.controlsList.value = \"nodownload nofullscreen\";\n                video.playsInline = true;\n                video.disablePictureInPicture = true;\n                div.appendChild(video);\n            }\n            /**\n             * 将视频加载在container顶层容器中。顶层容器没有用scale。不会影响video控制按钮的功能\n             */\n            const [sx, sy] = this.app.camera.convertWorldPointInContainer(boundary.sx, boundary.sy);\n            const [ex, ey] = this.app.camera.convertWorldPointInContainer(boundary.sx + boundary.w, boundary.sy + boundary.h);\n            video.style.width = `${ex - sx}px`;\n            video.style.height = `${ey - sy}px`;\n            video.style.left = `${sx}px`;\n            video.style.top = `${sy}px`;\n        }\n        if (!videoResourceLoaded(url)) {\n            //回调函数中必须用变量currPage，而不是this.opsManager.currPage，否则被调用时引用的page可能不对\n            opts.page.addWaitingResource(url);\n            fetchVideoResource(url, () => {\n                opts.page.removeWaitingResource(url);\n            });\n        }\n    }\n    hide(snapshot, ctx, div) {\n        var _a;\n        //移除之前绘制的文本框\n        div = this.app.container.el;\n        let video = div.querySelector(`[id='video-${snapshot.opId}']`);\n        (_a = video === null || video === void 0 ? void 0 : video.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(video);\n    }\n}\nexport default VideoOp;\n","/**\n * 一个白板应用中含有一个房间。房间在通信中和频道一一对应\n *\n * 一个房间包含一个白板(WhiteBoard)，以及0到N个文件白板(FileBoard)。\n *\n * 每个白板包含1到N个子页面\n */\nimport Board from \"../board\";\nimport { cameraSnapshotTypes } from \"../ops/types\";\nimport { transitionToCameraBound } from \"../animation\";\nimport { addGlobalOp, addOpInRoom } from \"./actions\";\nimport { getCameraBoundFromGlobalOp } from \"./util\";\nclass Room {\n    constructor(app, dataHub) {\n        this.currIndex = 'whiteboard';\n        this.isReceivingBatchSnapshots = false;\n        this.boards = {};\n        this.pkgIdOpIdMap = {};\n        this.pageToRefresh = undefined;\n        this.pageToIncRefresh = undefined;\n        /**\n         * 所有快照的数据之源\n         */\n        this.opIdSnapshotMap = {};\n        //文档类快照的opId\n        this.boardsSnapshotIds = [];\n        //全局快照的opId\n        this.globalSnapshotIds = [];\n        this.boardOps = {};\n        this._startRefreshLoop2 = () => {\n            cancelAnimationFrame(this.refreshAnimationTimer);\n            this.refreshAnimationTimer = requestAnimationFrame(this._startRefreshLoop2);\n            if (this.pageToRefresh && this.pageToRefresh === this.currBoard.currPage) {\n                this.currBoard.currPage.refresh();\n                this.pageToRefresh = undefined;\n            }\n            if (this.pageToIncRefresh && this.pageToIncRefresh === this.currBoard.currPage) {\n                this.currBoard.currPage.incRefresh();\n                this.pageToIncRefresh = undefined;\n            }\n        };\n        this.app = app;\n        this.dataHub = dataHub;\n        this._init();\n    }\n    get currBoard() {\n        return this.boards[this.currIndex];\n    }\n    getBoardDisplayNames() {\n        return Object.keys(this.boards).map(boardName => {\n            return this.boards[boardName].displayName;\n        });\n    }\n    getPage(boardName, pageIndex) {\n        const board = this.boards[boardName];\n        if (!board) {\n            throw new Error(`找不到名字为${boardName}的白板，当前房间白板列表为: ${Object.keys(this.app.room.boards).join(\",\")}`);\n        }\n        const page = board.pages[pageIndex];\n        if (!page) {\n            throw new Error(`找不到索引为${pageIndex}的白板页，当前房间白板页码为: ${board.pageNames.join(\",\")}`);\n        }\n        return page;\n    }\n    /**\n     * @param partial\n     * @returns\n     */\n    recoverFullSnapshot(partial) {\n        if (!this.opIdSnapshotMap.hasOwnProperty(partial.opId)) {\n            return partial;\n        }\n        const baseOp = this.opIdSnapshotMap[partial.opId].snapshot;\n        return this.app.opsManager.mergePartial(baseOp, partial);\n    }\n    /**\n     * 清空当前会话周期中所有的快照信息。\n     * 连接云信白板2.0服务器时使用该函数，在主播重新连接时，主播和听众使用该函数清空所有白板状态\n     */\n    reset() {\n        var _a, _b, _c;\n        if (LOG) {\n            console.log('白板-->', 'room.reset');\n        }\n        this._init();\n        (_b = (_a = this.currBoard) === null || _a === void 0 ? void 0 : _a.currPage) === null || _b === void 0 ? void 0 : _b.cleanNonCanvasElements();\n        // this.currBoard?.currPage?.refresh()\n        this.pageToRefresh = (_c = this.currBoard) === null || _c === void 0 ? void 0 : _c.currPage;\n    }\n    /**\n     * 开启批量接收快照\n     * 批量接收期间，中间的许多快照的refresh可以省略\n     */\n    beginReceiveBatchSnapshots() {\n        this.isReceivingBatchSnapshots = true;\n    }\n    /**\n     * 结束批量接收快照\n     * 批量接收结束时，refresh应该被refresh的部分\n     */\n    endReceiveBatchSnapshots(boundaries, hasBoardAction, cb) {\n        var _a, _b, _c;\n        this.isReceivingBatchSnapshots = false;\n        this.currBoard.currPage.calcDrawOpQueue();\n        if (boundaries.length > 0) {\n            const lastBoundaryData = boundaries[boundaries.length - 1];\n            if (lastBoundaryData.boundary.width > 0 && lastBoundaryData.boundary.height > 0) {\n                if (lastBoundaryData.animate) {\n                    transitionToCameraBound(this.app.camera, lastBoundaryData.boundary, () => {\n                        var _a;\n                        (_a = this.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n                        if (typeof cb === 'function') {\n                            cb(true);\n                        }\n                    });\n                }\n                else {\n                    this.app.camera.setCameraBound(lastBoundaryData.boundary);\n                    (_a = this.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n                    if (typeof cb === 'function') {\n                        cb(true);\n                    }\n                }\n            }\n            else if (typeof cb === 'function') {\n                cb(false);\n            }\n        }\n        else {\n            // this.currBoard.currPage.refresh()\n            this.pageToRefresh = this.currBoard.currPage;\n            /**\n             * 有文档新增，删除，跳转等操作时，整个文档都需要重新制作\n             */\n            if (hasBoardAction) {\n                (_b = this.app.previewFactory) === null || _b === void 0 ? void 0 : _b.refreshPreviewsOfCurrBoard();\n            }\n            else {\n                (_c = this.app.previewFactory) === null || _c === void 0 ? void 0 : _c.refreshPreviewsOfCurrPage();\n            }\n            if (typeof cb === 'function') {\n                cb(false);\n            }\n        }\n    }\n    /**\n     * 发送本地动作快照给远程服务器\n     * @param snapshot\n     */\n    dispatch(snapshot) {\n        // if (snapshot.data.type !== 'mouse-pointer') {\n        //     console.warn('dispatch', snapshot)\n        // }\n        /**\n         * 本地动作，且当前属于不可编辑状态，且动作不是camera动作时，返回\n         */\n        const isCameraSnapshot = cameraSnapshotTypes.indexOf(snapshot.data.type) !== -1;\n        //如果camera-bound的宽高设置为0，则出现了一些意外\n        if (snapshot.data.type === 'camera-bound' && (snapshot.data.boundary.width === 0 || snapshot.data.boundary.height === 0)) {\n            console.error('白板--> error, camera-bound的宽高为0', snapshot);\n            return;\n        }\n        if (!this.app.editable && !isCameraSnapshot) {\n            // return this.editEnabled && !this.dataHub.isSynchronizing && this.isConnected\n            if (this.app.isRecordPlayer) {\n                return;\n            }\n            if (!this.app.editEnabled) {\n                console.warn('白板--> 请先开启编辑再修改白板');\n            }\n            else if (!this.app.isConnected) {\n                console.warn('白板--> 网络未连接，请等待网络恢复再修改白板');\n            }\n            else if (!this.dataHub.isSynchronizing) {\n                console.warn('白板--> 请等待同步完成再修改白板');\n            }\n            return;\n        }\n        if (this.dataHub.isSynchronizing) {\n            return;\n        }\n        const fakeServerId = this.dataHub.sendSnapshot(snapshot);\n        this.execSnapshot({\n            snapshot,\n            //TODO\n            pkgId: fakeServerId\n        });\n    }\n    execSnapshot(_pkg) {\n        const pkg = {\n            pkgId: _pkg.pkgId,\n            snapshot: this.recoverFullSnapshot(_pkg.snapshot)\n        };\n        this.cacheSnapshot(pkg);\n        this.pushSnapshotToQueue(pkg);\n        const snapshot = pkg.snapshot;\n        if (snapshot.category === 'inPageOp') {\n            //页面内操作\n            const page = this.getPage(snapshot.board, snapshot.page.toString());\n            page.addOpInPage(snapshot);\n        }\n        else if (snapshot.category === 'pageOp') {\n            //页面操作: add/goto/delete\n            const board = this.boards[snapshot.board];\n            if (board) {\n                board.addOpInBoard(snapshot);\n            }\n        }\n        else if (snapshot.category === 'globalOp') {\n            //全局操作： pan/zoom\n            addGlobalOp(this, snapshot);\n        }\n        else {\n            //文档操作\n            addOpInRoom(this, snapshot);\n        }\n    }\n    /**\n     * 从远程批量接收快照\n     * 同步或者录像回放的seekTo时触发\n     * @param snapshots\n     */\n    execBatchSnapshots(_pkgArr, cb) {\n        const pkgArr = _pkgArr.map(_pkg => {\n            const pkg = {\n                pkgId: _pkg.pkgId,\n                snapshot: this.recoverFullSnapshot(_pkg.snapshot)\n            };\n            this.cacheSnapshot(pkg);\n            return pkg;\n        });\n        /**\n         * allInPage: 同一个批次里的数据都是页面内数据\n         */\n        const allInPage = pkgArr.filter(pkg => {\n            return pkg.snapshot.category !== 'inPageOp';\n        }).length === 0;\n        const hasBoardAction = pkgArr.filter(pkg => {\n            return pkg.snapshot.category === 'boardOp';\n        }).length > 0;\n        let boundaryData = pkgArr\n            .filter(pkg => {\n            return pkg.snapshot.category === 'globalOp' && pkg.snapshot.data.type === 'camera-bound';\n        })\n            .map(pkg => {\n            return {\n                animate: pkg.snapshot.data.animate,\n                boundary: getCameraBoundFromGlobalOp(this, pkg.snapshot)\n            };\n        })\n            .filter(boundary => boundary.boundary);\n        let nonCameraPkg = pkgArr.filter(pkg => {\n            return pkg.snapshot.category !== 'globalOp' || pkg.snapshot.data.type !== 'camera-bound';\n        });\n        if (allInPage) {\n            /**\n             * 都是页面内数据，将快照一个个加到页面中(addInPage)处理。\n             * 如果需要refresh，则记录下来，统一处理完之后再refresh。\n             * 如果不需要refresh，则每次调用addOpSnapshot会增量绘制\n             */\n            let needRefresh = false;\n            nonCameraPkg.forEach((pkg) => {\n                this.pushSnapshotToQueue(pkg);\n                const snapshot = pkg.snapshot;\n                const page = this.getPage(snapshot.board, snapshot.page.toString());\n                needRefresh = page.addOpInPage(snapshot, false) || needRefresh;\n            });\n            /**\n             * 之所以和含有非inPageOp分开处理，是因为allInPage可能不需要refresh\n             * 比如说连续的涂鸦操作，在addOpInPage时会绘制增量部分，不会全部refresh\n             */\n            if (needRefresh) {\n                this.endReceiveBatchSnapshots([], false, cb);\n            }\n            else if (typeof cb === 'function') {\n                cb(false);\n            }\n        }\n        else {\n            this.beginReceiveBatchSnapshots();\n            try {\n                for (let pkg of nonCameraPkg) {\n                    this.execSnapshot(pkg);\n                }\n            }\n            finally {\n                this.endReceiveBatchSnapshots(boundaryData, hasBoardAction, cb);\n            }\n        }\n    }\n    /**\n     * 将快照缓存起来\n     * @param pkg\n     */\n    cacheSnapshot(pkg) {\n        var _a;\n        const opId = pkg.snapshot.opId;\n        const pkgId = pkg.pkgId;\n        if (this.opIdSnapshotMap[opId]) {\n            pkg.snapshot = this.recoverFullSnapshot(pkg.snapshot);\n            /**\n             * 该快照之前已经存在, 从pkgIdOpIdMap中删除原来pkg对应的入口\n             */\n            const oldPkgId = this.opIdSnapshotMap[opId].pkgId;\n            const index = this.pkgIdOpIdMap[oldPkgId].indexOf(opId);\n            this.pkgIdOpIdMap[oldPkgId].splice(index, 1);\n            if (this.pkgIdOpIdMap[oldPkgId].length === 0) {\n                delete this.pkgIdOpIdMap[oldPkgId];\n            }\n        }\n        this.opIdSnapshotMap[opId] = pkg;\n        (_a = this.pkgIdOpIdMap)[pkgId] || (_a[pkgId] = []);\n        this.pkgIdOpIdMap[pkgId].push(opId);\n    }\n    pushSnapshotToQueue(pkg) {\n        var _a, _b;\n        const category = pkg.snapshot.category;\n        const opId = pkg.snapshot.opId;\n        const pkgId = pkg.pkgId;\n        if (category === 'globalOp') {\n            this._pushSnapshotInArray(opId, pkgId, this.globalSnapshotIds);\n        }\n        else if (category === 'boardOp') {\n            this._pushSnapshotInArray(opId, pkgId, this.boardsSnapshotIds);\n        }\n        else if (pkg.snapshot.category === 'pageOp') {\n            const board = pkg.snapshot.board;\n            if (!this.boardOps.hasOwnProperty(board)) {\n                this.boardOps[board] = {\n                    pageSnapshotIds: [],\n                    pages: {}\n                };\n            }\n            (_a = this.boardOps[board]).pageSnapshotIds || (_a.pageSnapshotIds = []);\n            this._pushSnapshotInArray(opId, pkgId, this.boardOps[board].pageSnapshotIds);\n        }\n        else if (pkg.snapshot.category === 'inPageOp') {\n            const board = pkg.snapshot.board;\n            const page = pkg.snapshot.page;\n            if (!this.boardOps.hasOwnProperty(board)) {\n                this.boardOps[board] = {\n                    pageSnapshotIds: [],\n                    pages: {}\n                };\n            }\n            if (!this.boardOps[board].pages.hasOwnProperty(page)) {\n                this.boardOps[board].pages[page] = {\n                    inPageSnapshotIds: []\n                };\n            }\n            (_b = this.boardOps[board].pages[page]).inPageSnapshotIds || (_b.inPageSnapshotIds = []);\n            this._pushSnapshotInArray(opId, pkgId, this.boardOps[board].pages[page].inPageSnapshotIds);\n        }\n    }\n    /**\n     * 将opId push到arr中，要求如果：\n     * 1. arr中不能有重复的opId\n     * 2. arr中每一个opId代表的包都递增。包可以通过snapshotMap查询\n     *\n     * 若opId不存在于arr中，则找到合适的位置插入\n     * 若opId存在，则先将原来的元素删除，然后找到合适的位置插入\n     * @param opId\n     * @param arr\n     */\n    _pushSnapshotInArray(opId, pkgId, arr) {\n        const index = arr.indexOf(opId);\n        if (index !== -1) {\n            arr.splice(index, 1);\n        }\n        for (let i = arr.length; i >= 0; i--) {\n            if (i === 0) {\n                arr.splice(i, 0, opId);\n                break;\n            }\n            else {\n                const pkgIdInArr = this.opIdSnapshotMap[arr[i - 1]].pkgId;\n                if (pkgIdInArr <= pkgId) {\n                    arr.splice(i, 0, opId);\n                    break;\n                }\n            }\n        }\n    }\n    /**\n     * 合并延迟发送的数据\n     *\n     * 从第一个到最后一个遍历：\n     * 1. 没有相同的opId，加到队列中\n     * 2. 有相同的opId，自己是partial，如果之前有完整的，则合并到完整的，如果之前是partial，则合并到partial\n     *    有相同的opId，自己是完整，则覆盖之前的快照\n     * @param data\n     */\n    mergeDebouncedData(dataArr, dataType) {\n        if (dataType !== 'snapshot' && dataArr.length > 0) {\n            return dataArr[dataArr.length - 1];\n        }\n        else if (dataType !== 'snapshot') {\n            throw new Error('白板--> mergeDebounceData, dataArr is empty!!');\n        }\n        const map = {};\n        for (let entry of dataArr) {\n            if (entry.type === 'vision') {\n                map['vision'] = entry;\n            }\n            else if (!map.hasOwnProperty(entry.value.opId)) {\n                map[entry.value.opId] = entry.value;\n            }\n            else if (!entry.value.hasOwnProperty('category')) {\n                //之前有数据存在, 当前数据是部分数据\n                if (map[entry.value.opId].hasOwnProperty('category')) {\n                    map[entry.value.opId] = this.app.opsManager.mergePartial(map[entry.value.opId], entry.value);\n                }\n                else {\n                    map[entry.value.opId] = this.app.opsManager.mergeTwoPartial(map[entry.value.opId], entry.value);\n                }\n            }\n            else {\n                //之前有数据存在，但新数据是完整数据，直接覆盖旧数据就好\n                map[entry.value.opId] = entry.value;\n            }\n        }\n        if (Object.keys(map).length === 1) {\n            return {\n                type: 'snapshot',\n                value: Object.keys(map).map(id => map[id])[0]\n            };\n        }\n        else {\n            return {\n                type: 'snapshotArr',\n                value: Object.keys(map).map(id => map[id])\n            };\n        }\n    }\n    _init() {\n        const whiteboard = new Board(this.app, 'whiteboard', 'whiteboard');\n        this.boards = {\n            'whiteboard': whiteboard\n        };\n        this.currIndex = 'whiteboard';\n        this.pkgIdOpIdMap = {};\n        this.opIdSnapshotMap = {};\n        this.boardsSnapshotIds = [];\n        this.globalSnapshotIds = [];\n        this.boardOps = {};\n        this._startRefreshLoop();\n    }\n    _startRefreshLoop() {\n        cancelAnimationFrame(this.refreshAnimationTimer);\n        this._startRefreshLoop2();\n    }\n}\nexport default Room;\n","import { DPI } from \"../container\";\n/**\n * 切换页面时，以及撤销，回退，清空时，应该清空container中属于切换前页面的dom元素\n *\n * 撤销，回退不要清空背景元素。清空背景元素会造成背景图闪烁。只在绝对必要时清空背景图（换页）\n */\nexport const cleanNonCanvasElements = (page, includeBackground = true) => {\n    var _a;\n    if (page.app.container && page.app.container.imageEl) {\n        page.app.container.imageEl.innerHTML = '';\n    }\n    if (page.app.container && page.app.container.domEl) {\n        page.app.container.domEl.innerHTML = '';\n    }\n    if (includeBackground && page.app.container && page.app.container.backgroundEl) {\n        page.app.container.backgroundEl.innerHTML = '';\n    }\n    const videos = page.app.container.el.getElementsByTagName('video');\n    for (let i = 0; i < videos.length; i++) {\n        (_a = videos[i].parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(videos[i]);\n    }\n};\nexport const refresh = (page, opt = {}) => {\n    let { ctx, preview } = opt;\n    if (!ctx)\n        ctx = page.ctx;\n    const frontCtx = preview ? ctx : page.frontCtx;\n    page.opsManager.hooks.refresh.call();\n    ctx.save();\n    ctx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n    if (opt.supportToDataUrl) {\n        ctx.fillStyle = page.app.appConfig.canvas_bg_color;\n        ctx.fillRect(0, 0, page.width * DPI, page.height * DPI);\n    }\n    if (!preview) {\n        page.app.camera.convertCanvas(ctx);\n    }\n    else {\n        page.app.camera.convertPreviewCanvas(ctx);\n    }\n    if (!preview) {\n        frontCtx.save();\n        page.laserCtx.save();\n        frontCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n        page.laserCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n        page.app.camera.convertCanvas(frontCtx);\n        page.app.camera.convertCanvas(page.laserCtx);\n    }\n    if (page.backgroundSnapshot && !preview) {\n        page.opsManager.draw(page.backgroundSnapshot, ctx, {\n            div: page.app.container.backgroundEl,\n            page: page\n        });\n    }\n    else if (page.backgroundSnapshot) {\n        page.opsManager.preview(page.backgroundSnapshot, ctx, {\n            page: page,\n            supportToDataUrl: opt.supportToDataUrl\n        });\n    }\n    drawSelectBox(page, frontCtx);\n    if (!preview) {\n        drawMousePointer(page, page.laserCtx);\n    }\n    if (!preview) {\n        for (let key in page.drawOpQueue) {\n            const div = page.drawOpQueue[key].data.type === 'image' ? page.app.container.imageEl : page.app.container.domEl;\n            page.opsManager.draw(page.drawOpQueue[key], ctx, {\n                div,\n                page: page\n            });\n        }\n        for (let key in page.hiddenOpQueue) {\n            const div = page.hiddenOpQueue[key].data.type === 'image' ? page.app.container.imageEl : page.app.container.domEl;\n            page.opsManager.hide(page.hiddenOpQueue[key], ctx, div);\n        }\n    }\n    else {\n        /**\n         * 预览模式下图片在canvas上绘制，需要将图片排到最下层\n         */\n        let keys = Object.keys(page.drawOpQueue);\n        keys = keys.sort((k1, k2) => {\n            if (page.drawOpQueue[k1].data.type === 'image' && page.drawOpQueue[k2].data.type !== 'image') {\n                return -1;\n            }\n            else if (page.drawOpQueue[k1].data.type !== 'image' && page.drawOpQueue[k2].data.type === 'image') {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        for (let key of keys) {\n            page.opsManager.preview(page.drawOpQueue[key], ctx, {\n                page: page,\n                supportToDataUrl: opt.supportToDataUrl\n            });\n        }\n    }\n    ctx.restore();\n    page.frontCtx.restore();\n    if (!preview) {\n        page.laserCtx.restore();\n    }\n};\nexport const drawInProgressSnapshots = (page) => {\n    page.laserCtx.save();\n    page.frontCtx.save();\n    page.laserCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n    page.frontCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n    page.app.camera.convertCanvas(page.laserCtx);\n    page.app.camera.convertCanvas(page.frontCtx);\n    const snapshots = Object.keys(page.lastInProgressSnapshotOfUser)\n        .map(key => page.lastInProgressSnapshotOfUser[key])\n        .sort((sp1, sp2) => {\n        /**\n         * 根据时间固定图层关系，避免连续绘制时由于相对图层变化导致的闪烁\n         */\n        return sp1.beginAt - sp2.beginAt;\n    });\n    snapshots.forEach(sp => {\n        page.opsManager.draw(sp.snapshot, page.frontCtx, {\n            div: page.app.container.domEl,\n            page: page\n        });\n    });\n    drawSelectBox(page, page.frontCtx);\n    drawMousePointer(page, page.laserCtx);\n    page.laserCtx.restore();\n    page.frontCtx.restore();\n};\nconst drawSelectBox = (page, ctx) => {\n    for (const userId in page.lastSelectOfUser) {\n        /**\n         * select，即选择时的框选框，需要放到frontCanvas上绘制\n         * 绘制文本时，选择框需要重绘。如果放到背景canvas上，选择框无法被清空，会导致多重选择框的出现\n         */\n        page.opsManager.draw(page.lastSelectOfUser[userId], ctx);\n    }\n    for (const userId in page.lastInProgressSelectOfUser) {\n        /**\n         * select，即选择时的框选框，需要放到frontCanvas上绘制\n         * 绘制文本时，选择框需要重绘。如果放到背景canvas上，选择框无法被清空，会导致多重选择框的出现\n         */\n        page.opsManager.draw(page.lastInProgressSelectOfUser[userId], ctx);\n    }\n};\n/**\n * 绘制鼠标位置\n * @param ctx\n */\nconst drawMousePointer = (page, ctx) => {\n    for (let key in page.lastMousePointerOfUser) {\n        const snapshot = page.lastMousePointerOfUser[key];\n        page.opsManager.draw(snapshot, ctx);\n    }\n};\n","/**\n * 将opQueue转化为drawOpQueue和hiddenOpQueue的流程\n *\n * opQueue为当前页面所有快照的集合，drawOpQueue和hiddenOpQueue为该页面需要被绘制（隐藏）的快照集合\n */\nimport { snapshotOutOfNormalFlowTypes } from \"../ops/types\";\nimport { transformOp, getSelectedOpIds } from \"./util\";\nconst missOpSet = new Set();\nexport const calcDrawOpQueue = (page, isReceivingBatchSnapshots = false) => {\n    page.drawOpQueue = {};\n    page.hiddenOpQueue = {};\n    const { normalQueue, abNormalQueue } = separateNormalQueue(page, page.opQueue);\n    const noHistOpQueue = removeHistoryOpQueue(page, normalQueue);\n    const noClearQueue = removeClearOpQueue(page, noHistOpQueue);\n    const simpleQueue = removeDuplicateOpQueue(page, noClearQueue);\n    handleAbNormalQueue(page, abNormalQueue);\n    handleNormalQueue(page, simpleQueue);\n    if (!isReceivingBatchSnapshots) {\n        filterSelectedOpIds(page);\n    }\n};\nconst handleAbNormalQueue = (page, abNormalQueue) => {\n    page.backgroundSnapshot = undefined;\n    for (let i = 0; i < abNormalQueue.length; i++) {\n        const snapshot = abNormalQueue[i];\n        if (snapshot.data.type === 'background') {\n            page.backgroundSnapshot = snapshot;\n        }\n        else if (snapshot.data.type === 'select') {\n            if (snapshot.data.inProgress) {\n                page.lastInProgressSelectOfUser[snapshot.uid] = snapshot;\n            }\n            else {\n                //如果选择快照在“正在选择”快照之后，则“正在选择”快照内容无效\n                delete page.lastInProgressSelectOfUser[snapshot.uid];\n                page.lastSelectOfUser[snapshot.uid] = snapshot;\n            }\n        }\n        else if (snapshot.data.type === 'mouse-pointer') {\n            page.lastMousePointerOfUser[snapshot.uid] = snapshot;\n        }\n        else if (snapshot.data.type === 'laser') {\n            //跳过激光笔，激光笔绘制都是增量绘制，均使用addSnapshotAndDrawOnlyIt绘制\n        }\n    }\n};\nconst handleNormalQueue = (page, simpleQueue) => {\n    /**\n     * 将快照按照绘制快照分成多个数组。每个数组第一个元素为绘制快照，后面的元素为对绘制快照的修改\n     */\n    const opQueueMap = {};\n    const dependOnIdArr = [];\n    for (let snapshot of simpleQueue) {\n        //只有最后一个inProgressSelectSnapshot才有效\n        page.lastInProgressSelectOfUser = {};\n        if (Array.isArray(snapshot.data.dependOn)) {\n            for (let dependOpId of snapshot.data.dependOn) {\n                if (!opQueueMap.hasOwnProperty(dependOpId)) {\n                    if (LOG && !missOpSet.has(dependOpId)) {\n                        missOpSet.add(dependOpId);\n                        console.error('DEV-->', 'miss op', opQueueMap, snapshot, dependOpId, simpleQueue);\n                    }\n                }\n                else {\n                    dependOnIdArr.push(dependOpId);\n                    opQueueMap[dependOpId].push(snapshot);\n                }\n            }\n        }\n        else if (typeof snapshot.data.dependOn === 'string') {\n            if (!opQueueMap.hasOwnProperty(snapshot.data.dependOn)) {\n                if (LOG && !missOpSet.has(snapshot.data.dependOn)) {\n                    missOpSet.add(snapshot.data.dependOn);\n                    console.error('DEV-->', 'miss op', opQueueMap, snapshot, snapshot.data.dependOn, simpleQueue);\n                }\n            }\n            else {\n                dependOnIdArr.push(snapshot.data.dependOn);\n                opQueueMap[snapshot.data.dependOn].push(snapshot);\n            }\n        }\n        else {\n            //新的图形类快照\n            opQueueMap[snapshot.opId] = [snapshot];\n        }\n    }\n    removeInprogressSnapshotIfBeenDepended(page, dependOnIdArr);\n    for (let key in opQueueMap) {\n        let drawOp = getDrawOpFromSnapshotQueue(page, key, opQueueMap);\n        if (!drawOp.data.hidden) {\n            page.drawOpQueue[key] = drawOp;\n        }\n        else {\n            page.hiddenOpQueue[key] = drawOp;\n        }\n    }\n};\n/*\n * 找出当前用户选择的图形。首先选择当前用户最后一个选择操作，然后减去其他用户之后选择操作中重复的图形，再删除画布中已经不存在的图形\n */\nconst filterSelectedOpIds = (page) => {\n    //注意下面语句顺序必须在drawOpQueue设置完成之后，因为selectids变化会触发textOp显示工具栏的判断逻辑，该逻辑又依赖于drawOpQueue\n    if (page.app.room.currBoard.currPage !== page) {\n        //非当前页面（通常在预览时被调用，直接跳过对selectOp的修改)\n        return;\n    }\n    const selectedOpIds = getSelectedOpIds(page);\n    page.opsManager.selectOp.setSelectedOpIds(selectedOpIds);\n    const inProgressSelectOfCurrUser = page.lastInProgressSelectOfUser[page.app.account];\n    if (inProgressSelectOfCurrUser) {\n        page.opsManager.selectOp.setInProgressSelectedOpIds(inProgressSelectOfCurrUser.data.selectedOpIds);\n    }\n    else {\n        page.opsManager.selectOp.setInProgressSelectedOpIds([]);\n    }\n};\n/**\n * 根据opIntermediateMap[dependOpId]: Array<IOpSnapshot>，生成一个绘制快照\n */\nconst getDrawOpFromSnapshotQueue = (page, opId, opQueueMap) => {\n    let drawOp = opQueueMap[opId][0];\n    for (let i = 1; i < opQueueMap[opId].length; i++) {\n        drawOp = transformOp(page, drawOp, opQueueMap[opId][i]);\n    }\n    return drawOp;\n};\n/**\n * 将正常的快照和非正常快照分离\n * 非正常快照包括：背景快照，h5快照，video快照等等，这些快照不受clear，undo，redo影响\n */\nconst separateNormalQueue = (page, opQueue) => {\n    //normalQueue, abNormalQueue\n    let normalQueue = [];\n    let abNormalQueue = [];\n    for (let op of opQueue) {\n        if (snapshotOutOfNormalFlowTypes.includes(op.data.type)) {\n            abNormalQueue.push(op);\n        }\n        else {\n            normalQueue.push(op);\n        }\n    }\n    return {\n        normalQueue,\n        abNormalQueue\n    };\n};\n/**\n * 移除历史类操作\n */\nconst removeHistoryOpQueue = (page, opQueue) => {\n    const res = opQueue.slice();\n    for (let i = res.length - 1; i >= 0; i--) {\n        const snapshot = res[i];\n        if (snapshot.data.type === 'undo' || snapshot.data.type === 'redo') {\n            let histSnapshotId = snapshot.data.undoOpId || snapshot.data.redoOpId;\n            for (let k = i - 1; k >= 0; k--) {\n                if (res[k].opId === histSnapshotId) {\n                    //找到要撤销的操作，删除该操作，以及撤销操作\n                    res.splice(i, 1);\n                    res.splice(k, 1);\n                    i--;\n                }\n            }\n        }\n    }\n    return res;\n};\n/**\n * 移除清空操作，以及其之前的所有操作\n * @param opQueue\n */\nconst removeClearOpQueue = (page, opQueue) => {\n    let res = opQueue.slice();\n    for (let i = res.length - 1; i >= 0; i--) {\n        const snapshot = res[i];\n        if (snapshot.data.type === 'clear') {\n            /**\n             * 删除clear之前的inProgress的动作\n             */\n            removeInprogressSnapshotIfBeenDepended(page, res.slice(0, i + 1).map(_ => _.opId));\n            res = res.slice(i + 1);\n            return res;\n        }\n    }\n    return res;\n};\n/**\n * 将复制类操作复制的图形插入到队列中\n * @param opQueue\n */\nconst removeDuplicateOpQueue = (page, opQueue) => {\n    let res = [];\n    for (let i = 0; i < opQueue.length; i++) {\n        const snapshot = opQueue[i];\n        if (snapshot.data.type === 'duplicate') {\n            res = res.concat(snapshot.data.duplicates);\n        }\n        else {\n            res.push(opQueue[i]);\n        }\n    }\n    return res;\n};\n/**\n * 如果快照被依赖，且该快照为未完成的快照，则该快照不应该在inProgressSnapshotOfUser中。\n * 否则，refresh时会绘制依赖后计算出来的快照，增量绘制则会绘制inProgressSnapshotOfUser中未完成快照的原始模样\n *\n * 这个函数主要是为了修复部分涂鸦，因为网络等原因，没有发送已完成的数据快照，导致该涂鸦永远处于未完成的状态。此时，任何对该涂鸦的修改都可能会造成画面闪烁\n * @param page\n * @param dependOn\n */\nconst removeInprogressSnapshotIfBeenDepended = (page, dependOnIds) => {\n    for (let uid in page.lastInProgressSnapshotOfUser) {\n        const sp = page.lastInProgressSnapshotOfUser[uid];\n        if (dependOnIds.includes(sp.snapshot.opId)) {\n            delete page.lastInProgressSnapshotOfUser[uid];\n        }\n    }\n};\n","/**\n * 增量绘制时的一些帮助函数\n */\nimport { transformOp } from \"./util\";\n/**\n * 增加增量式快照到页面中，然后绘制\n * @param page\n * @param snapshot\n */\nexport const addIncrementSnapshot = (page, snapshot) => {\n    if (snapshot.data.type === 'text') {\n        addTextSnapshot(page, snapshot);\n    }\n    else {\n        addSnapshotAndDrawOnlyIt(page, snapshot);\n    }\n};\n/**\n* 添加文本。重绘文本相关内容\n*/\nconst addTextSnapshot = (page, snapshot) => {\n    /**\n     * 只有Page是当前Page才重绘\n     * 重绘文本，需要重绘文本本身，以及文本的select包含盒。\n     * 如果是修改之前的文本，需要在drawOpQueue中覆盖之前的文本\n     */\n    if (page.boardName === page.app.room.currIndex &&\n        page.pageIndex === page.app.room.currBoard.currIndex.toString()) {\n        if (snapshot.data.dependOn) {\n            //修改已有文本\n            const dependOnId = snapshot.data.dependOn;\n            let drawOp = page.drawOpQueue[dependOnId];\n            if (drawOp) {\n                drawOp = transformOp(page, drawOp, snapshot);\n                page.drawOpQueue[dependOnId] = drawOp;\n                setInprogressSnapshot(page, drawOp);\n            }\n        }\n        else {\n            //新文本，不需要修改选择框，因为文本focus时，不用重复绘制选择框\n            page.drawOpQueue[snapshot.opId] = snapshot;\n            setInprogressSnapshot(page, snapshot);\n        }\n        page.app.room.pageToIncRefresh = page;\n        // drawInProgressSnapshots(page)\n    }\n};\n/**\n* 增量绘制快照\n* @param snapshot\n*/\nconst addSnapshotAndDrawOnlyIt = (page, snapshot) => {\n    /**\n     * 只有Page是当前Page才重绘\n     */\n    setInprogressSnapshot(page, snapshot);\n    if (page.boardName === page.app.room.currIndex &&\n        page.pageIndex === page.app.room.currBoard.currIndex.toString()) {\n        if (snapshot.data.type !== 'laser' && snapshot.data.type !== 'mouse-pointer') {\n            page.drawOpQueue[snapshot.opId] = snapshot;\n        }\n        page.app.room.pageToIncRefresh = page;\n        // drawInProgressSnapshots(page)\n    }\n};\n/**\n * 设置inProgress快照。如果是已有快照，不更新时间\n * @param snapshot\n */\nconst setInprogressSnapshot = (page, snapshot) => {\n    if (snapshot.data.type === 'select') {\n        if (snapshot.data.inProgress) {\n            page.lastInProgressSelectOfUser[snapshot.uid] = snapshot;\n        }\n    }\n    else if (snapshot.data.type === 'mouse-pointer') {\n        page.lastMousePointerOfUser[snapshot.uid] = snapshot;\n    }\n    else if (page.lastInProgressSnapshotOfUser.hasOwnProperty(snapshot.uid) &&\n        page.lastInProgressSnapshotOfUser[snapshot.uid].snapshot.opId === snapshot.opId) {\n        page.lastInProgressSnapshotOfUser[snapshot.uid] = {\n            snapshot: snapshot,\n            beginAt: page.lastInProgressSnapshotOfUser[snapshot.uid].beginAt\n        };\n    }\n    else {\n        page.lastInProgressSnapshotOfUser[snapshot.uid] = {\n            snapshot: snapshot,\n            beginAt: Date.now()\n        };\n    }\n};\n","import { transitionToCameraBound } from \"../animation\";\nimport Board from \"../board\";\nimport { addPage, gotoPage } from \"../board/actions\";\nimport { getCameraBoundFromGlobalOp } from \"./util\";\nlet fitToContentTimer;\n/**\n * 添加全局快照，目前属于整个房间的快照仅包含视角快照\n *\n * 该函数仅在非批量场景中使用。批量场景需要在dispatchBatch中处理camera的逻辑\n *\n * @param snapshot\n */\nexport const addGlobalOp = (room, snapshot) => {\n    var _a;\n    const camera = room.app.camera;\n    /**\n     * 以下情况下不会返回null\n     * 1. 自由视角 + 当前用户快照\n     * 2. 主播视角 + 当前用户快照\n     * 3. 跟随视角 + 主播快照\n     * 4. 跟随视角 + 当前用户快照（resize时发射）\n     */\n    const boundary = getCameraBoundFromGlobalOp(room, snapshot);\n    if (boundary) {\n        if (snapshot.data.animate) {\n            transitionToCameraBound(camera, boundary, () => {\n                var _a;\n                (_a = room.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n            });\n        }\n        else {\n            room.app.camera.setCameraBound(boundary);\n            (_a = room.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n        }\n    }\n};\nexport const addOpInRoom = (room, snapshot) => {\n    var _a;\n    const { action, boardName } = snapshot.data;\n    if (action === 'goto') {\n        gotoBoard(room, boardName, snapshot);\n    }\n    if (action === 'delete') {\n        deleteBoard(room, boardName, snapshot);\n    }\n    if (action === 'add') {\n        addBoard(room, boardName, snapshot);\n    }\n    room.app.opsManager.hooks.addOpHook.call(snapshot, true);\n    (_a = room.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n};\nexport const deleteBoard = (room, boardName, snapshot) => {\n    if (!room.boards.hasOwnProperty(boardName)) {\n        if (LOG) {\n            console.error('白板-->', `删除board:${boardName}, 但是board不存在`);\n        }\n    }\n    else if (Object.keys(room.boards).length === 1) {\n        if (LOG) {\n            console.error('白板-->', `不能删除最后一个board`);\n        }\n    }\n    else {\n        const boardNames = Object.keys(room.boards);\n        //boardName在this.boards中是第几个\n        const selectBoardIndex = boardNames.indexOf(boardName);\n        delete room.boards[boardName];\n        //选中被删除的board的下一个board\n        let nextBoardIndex = selectBoardIndex;\n        if (selectBoardIndex === boardNames.length - 1) {\n            //被删除的是最后一个board\n            nextBoardIndex = selectBoardIndex - 1;\n        }\n        room.currIndex = Object.keys(room.boards)[nextBoardIndex];\n        const currBoard = room.boards[room.currIndex];\n        room.app.opsManager.hooks.boardChange.call();\n        gotoPage(currBoard, currBoard.currIndex, snapshot);\n        clearTimeout(fitToContentTimer);\n        if (!room.isReceivingBatchSnapshots) {\n            fitToContentTimer = setTimeout(() => {\n                if (room.app.hasBackground()) {\n                    room.app.fitToContent(false);\n                }\n            }, 0);\n        }\n    }\n};\n/**\n * 添加新board，snapshot中包含了该board的页数\n * @param boardName\n * @param snapshot\n */\nexport const addBoard = (room, boardName, snapshot) => {\n    const displayName = snapshot.data.displayName ? snapshot.data.displayName : boardName;\n    room.boards[boardName] = new Board(room.app, boardName, displayName);\n    room.currIndex = boardName;\n    const currBoard = room.boards[room.currIndex];\n    room.app.opsManager.hooks.boardChange.call();\n    for (let i = 1; i < snapshot.data.pageCount; i++) {\n        addPage(currBoard, undefined, snapshot);\n    }\n    gotoPage(currBoard, 0, snapshot);\n    clearTimeout(fitToContentTimer);\n    if (!room.isReceivingBatchSnapshots) {\n        fitToContentTimer = setTimeout(() => {\n            if (room.app.hasBackground()) {\n                room.app.fitToContent(false);\n            }\n        }, 0);\n    }\n};\nexport const gotoBoard = (room, boardName, snapshot) => {\n    if (!room.boards.hasOwnProperty(boardName)) {\n        room.boards[boardName] = new Board(room.app, boardName, boardName);\n    }\n    room.currIndex = boardName;\n    const currBoard = room.boards[room.currIndex];\n    room.app.opsManager.hooks.boardChange.call();\n    gotoPage(currBoard, currBoard.currIndex, snapshot);\n    if (room.app.hasBackground() && !room.isReceivingBatchSnapshots) {\n        room.app.fitToContent(false);\n    }\n};\n","/**\n * 管理和服务器之间的数据传输\n *\n * 同步流程：\n * 1. 客户端向服务器发送最后一个包id: A\n * 2. 服务器向客户端发送最后一个包id: B\n * 3. 服务器向客户端发送这两个id之间的所有包, A => B\n * 4. 客户端完全接收到A => B，客户端判定同步完成，并执行接收到的数据快照\n * 5. 若客户端长时间没有收到这些包，则客户端再次向服务器发送同步指令\n *\n * 如果在同步过程中，接收到广播数据，暂时先不执行这些命令。保存起来，待同步结束一并执行\n */\nimport { showToast } from \"../../component/toast\";\n/**\n * 每个dataType队列，两个包之间的最小间隔\n */\nconst MINIMUM_BROADCAST_GAP_PER_DATATYPE = 70;\nconst overwritableTypes = ['select', 'select-hover', 'camera-bound', 'mouse-pointer', 'laser'];\n/**\n * 若10s内同步未完成，重新发送同步请求\n */\nconst ResendSyncRequestInterval = 10;\n/**\n * 发送5次还没有得到所有的同步数据时，不再请求同步\n */\nconst ResendSyncRequestLimit = 8;\nclass DataHub {\n    constructor(app, handler) {\n        /**\n         * 延迟广播发送数据\n         * 不同dataType应该走不同的timer队列，避免发送到一个包里面\n         */\n        this.debounceData = {};\n        /**\n         * 本地数据发送前，会猜测其在远程写入服务器时的server_pkg_id, 这里的id就是本地猜测的id，value是对应的数据\n         * 收到广播回包后，会根据这个id和回包实际得到的server_pkg_id比较，判断是否需要进一步修改\n         */\n        this.clientIdToData = {};\n        /**\n         * 0...lastContinueServerPkgId都已经在本地\n         */\n        this.lastContinueServerPkgId = -1;\n        /**\n         * id > serverPkgSinceLast的所有包的seq id数组\n         */\n        this.serverPkgSinceLast = [];\n        /**\n         * 本次同步最后一个包的id\n         */\n        this.lastPkgIdToSync = -1;\n        this.dataOfSync = {};\n        /**\n         * 是否正在同步中\n         */\n        this.isSynchronizing = false;\n        this._scheduleNextBroadcast = (debounceDataEntry, dataType) => {\n            return requestAnimationFrame(() => {\n                const now = new Date().valueOf();\n                if (now - debounceDataEntry.time < MINIMUM_BROADCAST_GAP_PER_DATATYPE) {\n                    /**\n                     * 生成该dataType的广播队列后，至少要隔一定时间才会发送\n                     * 如果没有到该间隔，则安排下一次requestAnimationFrame检查\n                     */\n                    debounceDataEntry.timer = this._scheduleNextBroadcast(debounceDataEntry, dataType);\n                }\n                else {\n                    this._doBroadcastData(debounceDataEntry, dataType);\n                }\n            });\n        };\n        this._doBroadcastData = (debounceDataEntry, dataType) => {\n            /**\n             * 时间到，发送数据\n             */\n            const data = this.app.room.mergeDebouncedData(debounceDataEntry.dataQueue, dataType);\n            const params = {\n                strategy: (dataType === 'snapshot') ? 1 : 2,\n                data: JSON.stringify(data),\n                client_pkg_id: debounceDataEntry.client_pkg_id\n            };\n            if (dataType !== 'snapshot') {\n                params.dataType = dataType;\n            }\n            this.handler.broadcastData(params);\n            this.clientIdToData[params.client_pkg_id] = data;\n            this.debounceData[dataType] = {\n                timer: null,\n                client_pkg_id: -1,\n                time: 0,\n                dataQueue: []\n            };\n        };\n        /**\n         * 一段时间后，没有完全收到同步需要的数据，则重试\n         */\n        this._setupResendSyncRequestTimer = (currRetryCount = 1) => {\n            /**\n             * 如果不clear，则连续两次同步请求时，第一个timer的句柄无法再获取，\n             * 导致clearTimeout无法取消第一个timer的回调函数\n             */\n            clearTimeout(this.resendSyncRequestTimer);\n            this.resendSyncRequestTimer = setTimeout(() => {\n                if (currRetryCount <= ResendSyncRequestLimit) {\n                    console.error(`白板-->，同步数据超时，第${currRetryCount + 1}次请求同步数据, ${this.lastContinueServerPkgId}`);\n                    this.handler.sendSyncRequest(this.lastContinueServerPkgId);\n                    this._setupResendSyncRequestTimer(currRetryCount + 1);\n                }\n                else {\n                    showToast({\n                        type: 'error',\n                        msg: '无法同步数据，请检查你的网络',\n                        time: 1000\n                    });\n                    console.error(`白板-->多次同步数据失败`);\n                }\n            }, ResendSyncRequestInterval * 1000);\n        };\n        this.app = app;\n        this.handler = handler;\n        this.bindEvents();\n    }\n    get room() {\n        return this.app.room;\n    }\n    /**\n     * 本地接收到的最后一个服务器包\n     */\n    get lastServerPkgId() {\n        if (this.serverPkgSinceLast.length > 0) {\n            return this.serverPkgSinceLast[this.serverPkgSinceLast.length - 1];\n        }\n        else {\n            return this.lastContinueServerPkgId;\n        }\n    }\n    /**\n     * 给本地包赋予一个服务器包id\n     * 该id需要大于最后一个服务器包id，以及上一个本地包虚拟id\n     */\n    get nextLocalFakeId() {\n        const lastServerPkgId = this.lastServerPkgId;\n        const inUseClientIds = Object.keys(this.clientIdToData).map(_ => Number(_)).sort();\n        if (inUseClientIds.length === 0) {\n            return lastServerPkgId + 1;\n        }\n        else if (lastServerPkgId >= inUseClientIds[inUseClientIds.length - 1]) {\n            return lastServerPkgId + 1;\n        }\n        else {\n            return inUseClientIds[inUseClientIds.length - 1] + 1;\n        }\n    }\n    /**\n     * 应用状态重置。一般用于测试\n     */\n    reset() {\n        for (let key in this.debounceData) {\n            if (this.debounceData[key].timer) {\n                cancelAnimationFrame(this.debounceData[key].timer);\n            }\n        }\n        this.debounceData = {};\n        this.clientIdToData = {};\n        this.lastContinueServerPkgId = -1;\n        this.serverPkgSinceLast = [];\n        this.lastPkgIdToSync = -1;\n        this.dataOfSync = {};\n        this.isSynchronizing = false;\n        clearTimeout(this.resendSyncRequestTimer);\n    }\n    bindEvents() {\n        this.handler.on('data', this.onData.bind(this));\n        this.handler.on('broadcastAck', this.onBroadcastAck.bind(this));\n        this.handler.on('syncRequestAck', this.onSendRequestAck.bind(this));\n        this.handler.on('syncRequestResponse', this.onSendRequestResponse.bind(this));\n    }\n    /**\n     * 接到其他用户发来的广播数据\n     * @param msg\n     */\n    onData(msg) {\n        const { data, server_pkg_id } = msg;\n        this._updateServerPkgInfo(server_pkg_id, server_pkg_id);\n        if (this.isSynchronizing) {\n            /**\n             * 正在同步中，暂时不执行\n             */\n            this.dataOfSync[server_pkg_id] = data;\n        }\n        else {\n            let { type, value } = data;\n            if (type === 'snapshot') {\n                this.room.execSnapshot({\n                    snapshot: value,\n                    pkgId: server_pkg_id\n                });\n            }\n            else if (type === 'broadcaster') {\n                this.app.vision.receiveBroadcaster(value);\n            }\n            else if (type === 'snapshotArr') {\n                this.room.execBatchSnapshots(value.map(_ => {\n                    return {\n                        snapshot: _,\n                        pkgId: server_pkg_id\n                    };\n                }));\n            }\n        }\n    }\n    /**\n     * 同步步骤一：\n     * 客户端通知服务器客户端最后一个包的序列号\n     */\n    sendSyncRequest() {\n        console.log('白板--> 请求同步数据, 是否正在同步数据', this.isSynchronizing);\n        if (this.isSynchronizing) {\n            return;\n        }\n        this.isSynchronizing = true;\n        this.handler.sendSyncRequest(this.lastContinueServerPkgId);\n        // 设置服务器最后一个包为-1，收到syncRequestAck之后，会更新该变量\n        this.lastPkgIdToSync = -1;\n        /**\n         * 服务器上存在，本地不存在的数据。同步后执行\n         */\n        this.dataOfSync = {};\n        /**\n         * 一段时间后，没有完全收到同步需要的数据，则重试\n         */\n        this._setupResendSyncRequestTimer();\n    }\n    /**\n     * 同步步骤二：\n     * 服务器通知客户端，服务器中的最后一个包的序列号\n     */\n    onSendRequestAck(message) {\n        this.lastPkgIdToSync = message.last_server_pkg_id;\n        this._updateAppAfterSync();\n    }\n    /**\n     * 同步步骤三：\n     * 服务器给客户端返回客户端缺失的包，会分块返回\n     * 当所有包都补齐了之后，客户端执行这些包\n     */\n    onSendRequestResponse(message) {\n        //步骤二告知客户端没有新包需要同步\n        if (!this.isSynchronizing)\n            return;\n        let { start_server_pkg_id, end_server_pkg_id, packages } = message;\n        if (!Array.isArray(packages)) {\n            packages = [];\n        }\n        for (let pkg of packages) {\n            this.dataOfSync[pkg.server_pkg_id] = pkg.data;\n        }\n        this._updateServerPkgInfo(start_server_pkg_id, end_server_pkg_id);\n        this._updateAppAfterSync();\n    }\n    /**\n     * 收到广播回包\n     * 更新应用最后一个连续的server_pkg_id, 以及server_pkg_id之后的不连续包的数组\n     * @param message\n     */\n    onBroadcastAck(message) {\n        const { server_pkg_id, client_pkg_id } = message;\n        this._updateServerPkgInfo(server_pkg_id, server_pkg_id);\n        const data = this.clientIdToData[client_pkg_id];\n        delete this.clientIdToData[client_pkg_id];\n        /**\n         * 如果服务器中该包的顺序和预测的不同，则需要更新room中的快照数据\n         */\n        if (!data) {\n            console.warn(`白板--> broadcastAck, client_pkg_id:${client_pkg_id}的数据不存在`);\n        }\n        if (data && data.type === 'snapshot' && client_pkg_id !== server_pkg_id) {\n            this.app.room.cacheSnapshot({\n                pkgId: server_pkg_id,\n                snapshot: data.value\n            });\n        }\n        else if (data && data.type === 'snapshotArr' && client_pkg_id !== server_pkg_id) {\n            data.value.forEach(_ => {\n                this.app.room.cacheSnapshot({\n                    pkgId: server_pkg_id,\n                    snapshot: _\n                });\n            });\n        }\n    }\n    sendSnapshot(snapshot) {\n        if (overwritableTypes.includes(snapshot.data.type)) {\n            return this.broadcastData({\n                data: {\n                    type: 'snapshot',\n                    value: snapshot\n                }\n            }, snapshot.opId);\n        }\n        else {\n            return this.broadcastData({\n                data: {\n                    type: 'snapshot',\n                    value: snapshot\n                }\n            }, 'snapshot');\n        }\n    }\n    broadcastRoomState(value, dataType) {\n        return this.broadcastData({\n            data: {\n                type: dataType,\n                value: value\n            }\n        }, dataType);\n    }\n    broadcastData(params, dataType) {\n        if (!this.debounceData.hasOwnProperty(dataType) || !this.debounceData[dataType].timer) {\n            const client_id = this.nextLocalFakeId;\n            this.debounceData[dataType] = {\n                timer: null,\n                time: new Date().valueOf(),\n                client_pkg_id: client_id,\n                dataQueue: []\n            };\n            /**\n             * 占位。这样计算nextLocalFakeId时，不会和现在的client_id重复\n             */\n            this.clientIdToData[client_id] = {};\n        }\n        const debounceDataEntry = this.debounceData[dataType];\n        debounceDataEntry.dataQueue.push(params.data);\n        if (debounceDataEntry.timer) {\n            return debounceDataEntry.client_pkg_id;\n        }\n        debounceDataEntry.timer = this._scheduleNextBroadcast(debounceDataEntry, dataType);\n        return debounceDataEntry.client_pkg_id;\n    }\n    /**\n     * 判断是否同步结束，若同步结束，则执行同步时拉取的数据\n     */\n    _updateAppAfterSync() {\n        if (this.lastContinueServerPkgId >= this.lastPkgIdToSync) {\n            /**\n             * 防御性编程。防止isSynchronizing为false时，依旧有同步timer正在运行，然后报同步失败的错误\n             */\n            clearTimeout(this.resendSyncRequestTimer);\n        }\n        if (this.lastContinueServerPkgId >= this.lastPkgIdToSync && this.isSynchronizing) {\n            console.log(`白板--> 同步数据接收完毕: ${this.lastContinueServerPkgId}--${this.lastPkgIdToSync}`);\n            this.isSynchronizing = false;\n            if (LOG) {\n                console.log('白板-->', 'event:sync_finished');\n            }\n            this.app.emit('event:editable:change', this.app.editable);\n            this.app.dispatcher.emit('event:sync_finished');\n            const data = this._getDataToSync();\n            let broadcasterData;\n            for (let i = data.length - 1; i >= 0; i--) {\n                if (data[i].data.type === 'broadcaster') {\n                    broadcasterData = data[i].data.value;\n                    break;\n                }\n            }\n            const snapshotData = [];\n            for (let pkg of data) {\n                if (pkg.data.type === 'snapshot') {\n                    snapshotData.push({\n                        pkgId: pkg.pkgId,\n                        snapshot: pkg.data.value\n                    });\n                }\n                else if (pkg.data.type === 'snapshotArr') {\n                    for (let snapshot of pkg.data.value) {\n                        snapshotData.push({\n                            pkgId: pkg.pkgId,\n                            snapshot: snapshot\n                        });\n                    }\n                }\n            }\n            if (broadcasterData) {\n                this.app.vision.receiveBroadcasterAfterSync(broadcasterData);\n            }\n            this.app.room.execBatchSnapshots(snapshotData, (hasBoundary) => {\n                if (!hasBoundary) {\n                    /**\n                     * 如果未设置过boundary, 且存在文档页面，则设置初始boundary\n                     */\n                    if (this.app.defaultCameraBound) {\n                        this.app.setCameraBound(this.app.defaultCameraBound);\n                    }\n                    else if (this.app.hasBackground()) {\n                        this.app.fitToContent(false);\n                    }\n                }\n            });\n        }\n    }\n    _getDataToSync() {\n        const seqIds = Object.keys(this.dataOfSync).sort((a, b) => {\n            return Number(a) - Number(b);\n        });\n        return seqIds.map(id => {\n            try {\n                return {\n                    data: JSON.parse(this.dataOfSync[id]),\n                    pkgId: Number(id)\n                };\n            }\n            catch (_a) {\n                return undefined;\n            }\n        }).filter(_ => _);\n    }\n    /**\n     * 更新 lastContinueServerPkgId, 以及serverPkgSinceLast\n     * @param start: 第一个包\n     * @param end :  最后一个包 [start, end]的每个包均存在\n     *\n     * 首先将start->end序列号均加入serverPkgSinceLast中，然后再更新\n     */\n    _updateServerPkgInfo(start, end) {\n        let i = 0, curr = start;\n        //合并serverPkgSinceLast和[start, end]\n        while (i <= this.serverPkgSinceLast.length) {\n            if (curr > end) {\n                break;\n            }\n            else if (curr <= this.lastContinueServerPkgId) {\n                curr++;\n                continue;\n            }\n            else if (i === this.serverPkgSinceLast.length) {\n                /**\n                 * 将[curr, end]压入serverPkgSinceLast的队尾\n                 */\n                const arr = [];\n                while (curr <= end) {\n                    arr.push(curr);\n                    curr += 1;\n                }\n                this.serverPkgSinceLast.splice(i, 0, ...arr);\n            }\n            else if (this.serverPkgSinceLast[i] < curr) {\n                i++;\n            }\n            else if (this.serverPkgSinceLast[i] === curr) {\n                curr++;\n                i++;\n            }\n            else {\n                this.serverPkgSinceLast.splice(i, 0, curr);\n                curr++;\n                i++;\n            }\n        }\n        //将serverPkgSinceLast中接在lastContinueServerPkgId后面的包提取出来，然后更新lastContinueServerPkgId\n        i = 0;\n        for (; i < this.serverPkgSinceLast.length; i++) {\n            if (this.serverPkgSinceLast[i] === this.lastContinueServerPkgId + i + 1) {\n                continue;\n            }\n            else {\n                break;\n            }\n        }\n        this.lastContinueServerPkgId += i;\n        this.serverPkgSinceLast.splice(0, i);\n    }\n}\nexport default DataHub;\n","/**\n * 预览生成工厂\n *\n * 当接到生产任务时，会压入任务堆栈\n *\n * 任务堆栈会一个一个的渲染白板，并生成base64字符串。只有当白板以来的资源文件准备好了，才会开始渲染任务。\n *\n * 每有一个preview准备好了，会发送事件通知外界。\n * 当page加入新的快照时，该page的preview缓存会丢失。\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DPI } from \"../container\";\nclass PreviewFactory {\n    constructor(app) {\n        /**\n         * key是boardName129*&^ljdfh893pageIndex\n         * 只有在previewContainerMap中的boardName和pageIndex，才会去生成preview task\n         *\n         * 通过bindPreviewContainer设置previewContainerMap\n         */\n        this.previewContainerMap = new Map();\n        this.task = [];\n        this.isLoopBusy = false;\n        this.container = document.createElement('div');\n        this.canvas = document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n        this.app = app;\n        this.app.opsManager.hooks.pageReady.tap('PageReadyPlugin', this.onPageReady.bind(this));\n        this.app.opsManager.hooks.addOpHook.tap(\"AddOpSnapshotPlugin\", this.onOpAdded.bind(this));\n        this.setupExportToImgContainer();\n        this.resizeElements();\n    }\n    /**\n     * 用户将容器传给preview factory, preview factory直接在容器中渲染\n     */\n    bindPreviewContainer(opts) {\n        const reset = opts.hasOwnProperty('reset') ? opts.reset : true;\n        const keepPrevContainer = opts.hasOwnProperty('keepPrevContainer') ? opts.keepPrevContainer : true;\n        const newKeys = opts.previewContainerSettings.map(opt => {\n            return this.getContainerKey(opt);\n        });\n        const oldKeys = Array.from(this.previewContainerMap.keys());\n        if (reset) {\n            for (let key of oldKeys) {\n                if (!newKeys.includes(key) || !keepPrevContainer) {\n                    this.previewContainerMap.delete(key);\n                }\n            }\n            this.task = [];\n        }\n        const previewTasks = [];\n        opts.previewContainerSettings.forEach(opt => {\n            const key = this.getContainerKey(opt);\n            /**\n             * 如果不替换原有容器，且容器存在，则不要重新设置该容器，也不要设置task\n             */\n            if (oldKeys.includes(key) && keepPrevContainer) {\n                return;\n            }\n            const { ctx, canvasContainer } = this.setupPreviewElements(opt.container);\n            const rect = opt.container.getBoundingClientRect();\n            previewTasks.push({\n                pageIndex: opt.pageIndex,\n                boardName: opt.boardName\n            });\n            this.previewContainerMap.set(key, {\n                container: canvasContainer,\n                ctx: ctx,\n                width: rect.width,\n                height: rect.height\n            });\n        });\n        this.addPreviewTask(previewTasks);\n    }\n    generatePreviewToDataUrl(task) {\n        const page = this.app.room.getPage(task.boardName, task.pageIndex);\n        page.calcDrawOpQueue();\n        page.refresh({\n            ctx: this.ctx,\n            preview: true,\n            supportToDataUrl: true\n        });\n        const preview = this.canvas.toDataURL();\n        return preview;\n    }\n    setBackgroundColor() {\n        for (let obj of this.previewContainerMap.values()) {\n            obj.container.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n        }\n        this.container.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n    }\n    /**\n     * 更新视角位置后，要当前文档所有预览页面的绘制\n     */\n    refreshPreviewsOfCurrBoard() {\n        if (this.app.room.isReceivingBatchSnapshots) {\n            return;\n        }\n        this.task = [];\n        const board = this.app.room.currBoard;\n        const pages = board.pageNames;\n        for (let page of pages) {\n            this.invalidatePreview(page, board.boardName);\n        }\n        /**\n         * 优先启动当前白板的task\n         */\n        const taskList = [{\n                boardName: board.boardName,\n                pageIndex: board.currIndex.toString()\n            }].concat(pages.map(page => {\n            return {\n                boardName: board.boardName,\n                pageIndex: page.toString()\n            };\n        }));\n        this.addPreviewTask(taskList);\n    }\n    refreshPreviewsOfCurrPage() {\n        if (this.app.room.isReceivingBatchSnapshots) {\n            return;\n        }\n        const board = this.app.room.currBoard;\n        this.invalidatePreview(board.currPage.pageIndex, board.boardName);\n        /**\n         * 优先启动当前白板的task\n         */\n        const taskList = [{\n                boardName: board.boardName,\n                pageIndex: board.currIndex.toString()\n            }];\n        this.addPreviewTask(taskList);\n    }\n    resizeElements() {\n        this.container.style.width = `${this.app.container.width}px`;\n        this.container.style.height = `${this.app.container.height}px`;\n        const rect = this.container.getBoundingClientRect();\n        this.canvas.width = rect.width;\n        this.canvas.height = rect.height;\n    }\n    /**\n     * 将task.boardName + task.pageIndex页面白板内容输出为string，并缓存在previewCache中\n     * @param task\n     */\n    generatePreview(task) {\n        const key = this.getContainerKey(task);\n        if (this.previewContainerMap.has(key)) {\n            const obj = this.previewContainerMap.get(key);\n            const page = this.app.room.getPage(task.boardName, task.pageIndex);\n            page.calcDrawOpQueue();\n            page.refresh({\n                ctx: obj === null || obj === void 0 ? void 0 : obj.ctx,\n                preview: true\n            });\n        }\n    }\n    invalidatePreview(pageIndex, boardName) {\n        const key = this.getContainerKey({ pageIndex, boardName });\n        const obj = this.previewContainerMap.get(key);\n        obj === null || obj === void 0 ? void 0 : obj.ctx.clearRect(0, 0, obj.width, obj.height);\n    }\n    /**\n     * 添加预览生成任务\n     * @param taskArray\n     */\n    addPreviewTask(taskArray) {\n        /**\n         * 必须要异步执行。\n         * 因为page.blocked需要在page.refresh调用后才知道是否阻塞。\n         * 为了保证该函数执行顺序晚于page.refresh，因此将其放入setTimeout中异步执行\n         *\n         * 越晚加入的task应该放在队列越前面。因为执行task的顺序是从队列前面往后面，越晚加入的\n         * 应该越早执行\n         */\n        setTimeout(() => {\n            taskArray.reverse().forEach(taskInfo => {\n                const taskIndexOfSamePage = this.getTaskIndexOfPage(taskInfo.pageIndex, taskInfo.boardName);\n                if (taskIndexOfSamePage !== -1) {\n                    //将之前的任务删掉。如果预览图没有准备好，插入的新任务会移动到队列头部\n                    //这样能够使得最新刷新的页面的预览图能够优先生成\n                    //如果预览图已经准备好了，那么任务队列里该页面的任务直接删除就好了\n                    this.task.splice(taskIndexOfSamePage, 1);\n                }\n                const board = this.app.room.boards[taskInfo.boardName];\n                if (board) {\n                    const page = board.pages[taskInfo.pageIndex];\n                    if (page) {\n                        const key = this.getContainerKey(taskInfo);\n                        /**\n                         * 只有绑定了container的时候，才计算preview\n                         */\n                        if (this.previewContainerMap.has(key)) {\n                            this.task.unshift({\n                                pageIndex: taskInfo.pageIndex,\n                                boardName: taskInfo.boardName,\n                                state: page.blocked ? 'waiting' : 'ready'\n                            });\n                        }\n                    }\n                }\n            });\n            this.startLoop();\n        }, 0);\n    }\n    /**\n     * 任务队列中是否已经存在同一页面的任务\n     * @param pageIndex\n     * @param boardName\n     */\n    getTaskIndexOfPage(pageIndex, boardName) {\n        for (let i = 0; i < this.task.length; i++) {\n            if (this.task[i].pageIndex === pageIndex && this.task[i].boardName === boardName) {\n                return i;\n            }\n        }\n        return -1;\n    }\n    getContainerKey(opt) {\n        return opt.boardName + '129*&^ljdfh893' + opt.pageIndex.toString();\n    }\n    setupPreviewElements(container) {\n        const rect = container.getBoundingClientRect();\n        const canvasContainerArr = container.getElementsByClassName('preview-canvas-container');\n        if (canvasContainerArr.length === 0) {\n            const el = document.createElement('div');\n            el.className = 'preview-canvas-container';\n            el.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n            el.style.position = 'absolute';\n            el.style.left = '0';\n            el.style.right = '0';\n            el.style.top = '0';\n            el.style.bottom = '0';\n            container.appendChild(el);\n            const canvas = document.createElement('canvas');\n            canvas.width = rect.width * DPI;\n            canvas.height = rect.height * DPI;\n            canvas.style.width = `${rect.width}px`;\n            canvas.style.height = `${rect.height}px`;\n            canvas.style.imageRendering = 'optimize-contrast';\n            el.appendChild(canvas);\n            const ctx = canvas.getContext('2d');\n            ctx.lineCap = 'round';\n            ctx.lineJoin = 'round';\n            return {\n                ctx,\n                canvasContainer: el\n            };\n        }\n        else {\n            const canvas = canvasContainerArr[0].getElementsByTagName('canvas')[0];\n            const ctx = canvas.getContext('2d');\n            return {\n                ctx,\n                canvasContainer: canvasContainerArr[0]\n            };\n        }\n    }\n    /**\n     * 页面快照变化时，刷新其页面预览缓存。\n     * TODO: 这个函数实际上存在缺陷，它没有考虑非当前页面快照可能变化\n     */\n    onOpAdded(snapshot) {\n        if (snapshot.category !== 'inPageOp') {\n            return;\n        }\n        else if (snapshot.data.inProgress) {\n            return;\n        }\n        else if (snapshot.data.type === 'laser') {\n            return;\n        }\n        else if (snapshot.data.type === 'mouse-pointer') {\n            return;\n        }\n        else if (this.app.room.isReceivingBatchSnapshots) {\n            return;\n        }\n        const boardName = snapshot.board;\n        const pageIndex = snapshot.page;\n        this.invalidatePreview(pageIndex.toString(), boardName);\n        this.addPreviewTask([{\n                pageIndex: pageIndex.toString(),\n                boardName: boardName\n            }]);\n    }\n    /**\n     * 页面资源获取好了，清空之前绘制的内容，并重新生成预览图\n     * @param boardName\n     * @param pageIndex\n     */\n    onPageReady(boardName, pageIndex) {\n        this.invalidatePreview(pageIndex.toString(), boardName);\n        this.addPreviewTask([{\n                pageIndex: pageIndex.toString(),\n                boardName: boardName\n            }]);\n    }\n    /**\n     * 异步生成预览图。异步生成是为了防止长时间连续任务造成卡顿。\n     */\n    startLoop() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.isLoopBusy) {\n                return;\n            }\n            this.isLoopBusy = true;\n            //第一个task需要是异步事件，否则可能会造成事件依赖关系存在问题\n            yield new Promise(res => {\n                setTimeout(res, 0);\n            });\n            while (this.task.length > 0) {\n                let task = yield this.shiftNextReadyTask();\n                while (task === null) {\n                    yield this.delay(30);\n                    task = yield this.shiftNextReadyTask();\n                }\n                const key = this.getContainerKey(task);\n                if (!this.previewContainerMap.has(key)) {\n                    continue;\n                }\n                yield new Promise(res => {\n                    try {\n                        this.generatePreview(task);\n                    }\n                    catch (err) {\n                        console.error(err);\n                    }\n                    finally {\n                        //继续下一个task\n                        res();\n                    }\n                });\n                yield this.delay(100);\n            }\n            this.isLoopBusy = false;\n        });\n    }\n    /**\n     * 移除下一个ready的task\n     */\n    shiftNextReadyTask() {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (let i = 0; i < this.task.length; i++) {\n                if (this.task[i].state === 'ready') {\n                    const task = this.task[i];\n                    this.task.splice(i, 1);\n                    try {\n                        /**\n                         * 若页面不存在，则跳到下一个任务\n                         */\n                        const page = this.app.room.getPage(task.boardName, task.pageIndex);\n                        if (page) {\n                            return task;\n                        }\n                        else {\n                            i--;\n                            continue;\n                        }\n                    }\n                    catch (err) {\n                        i--;\n                        continue;\n                    }\n                }\n            }\n            return null;\n        });\n    }\n    delay(ms) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise(res => {\n                setTimeout(() => {\n                    res();\n                }, ms);\n            });\n        });\n    }\n    setupExportToImgContainer() {\n        const el = document.createElement('div');\n        el.style.position = 'relative';\n        el.style.visibility = 'hidden';\n        document.body.appendChild(el);\n        this.container = el;\n        this.setBackgroundColor();\n        this.canvas = document.createElement('canvas');\n        el.appendChild(this.canvas);\n        this.ctx = this.canvas.getContext('2d');\n        this.ctx.lineCap = 'round';\n        this.ctx.lineJoin = 'round';\n    }\n}\nexport default PreviewFactory;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n","/**\n * 在白板应用中，存在以白板容器左上角为起点的屏幕坐标系。以及一个虚拟的世界坐标系。世界坐标系的初始原点为（0，0），在屏幕的中心位置。所有操作的坐标均以世界坐标系记录。\n *\n * 在任一时刻，应用都有一个世界坐标系范围，该范围可以通过setCameraBound设置。白板容器显示的内容要大于等于世界此刻世界坐标系范围。\n *\n * *****<------------------>********\n * *****<---世界坐标系范围--->********\n * *****<------------------>********\n *\n * 单机模式下，以下操作会更新世界坐标系范围：\n * 1. 缩放\n * 2. 平移\n * 3. 重置世界坐标系\n * 4. 移动设备旋转。根据模式不同，可以设置世界坐标系宽高互换，或者竖屏时显示横屏所有内容，或者反过来\n * 5. 白板容器缩放，根据默认世界的宽高比，重新设置新的屏幕对应的世界坐标系\n *\n * 联机模式下，以下操作会更新世界坐标系范围：\n * 1. 跟随主播，世界坐标系与主播保持同步\n * 2. 与主播解绑\n *\n *\n * 初始世界坐标系范围有两个选择：\n * 1. 所有机器均保持一致，如1920*1080， 竖屏时为1080*1920\n * 2. 所有机器使用1920*1080的世界坐标系，倒推其屏幕的世界坐标系（如上图，可能为2500，1080），然后将该坐标系作为自己的世界坐标系\n *\n * 单机模式下两者没有区别。\n * 第一种模式在视角跟随时有些吃亏，因为主播需要额外上传自己屏幕代表的世界坐标系范围\n * 第二种模式相对较为简单直接。在视角跟随，以及世界坐标系范围更新时，要将自己的世界坐标系快照上传\n */\nimport { DPI } from \"../container\";\nimport { getTransformedBoundary } from \"../misc/shapeHelper\";\nclass Camera {\n    constructor(app, defaultCameraBound) {\n        this.scale = 1;\n        /**\n         *  > 10%, < 1000%\n         * 初始缩放比例为100%\n         */\n        // zoomFactor: number = 1\n        this.cameraBoundByUser = {};\n        this.app = app;\n        this.translateX = 0;\n        this.translateY = 0;\n        this.scale = 1;\n        if (defaultCameraBound) {\n            this.width = defaultCameraBound.width;\n            this.height = defaultCameraBound.height;\n            this.centerX = defaultCameraBound.centerX;\n            this.centerY = defaultCameraBound.centerY;\n        }\n        else {\n            this.width = 1920;\n            this.height = 1080;\n            this.centerX = 0;\n            this.centerY = 0;\n        }\n        this.app.on('container:set', () => {\n            this.updateTransParamAndRefresh();\n        });\n    }\n    get zoomFactor() {\n        return this.scale;\n    }\n    get container() {\n        return this.app.container;\n    }\n    /**\n     * 获取当前容器在世界坐标系的显示区域\n     */\n    getContainerWorldRect() {\n        const rect = this.container.el.getBoundingClientRect();\n        const w = rect.width;\n        const h = rect.height;\n        const [sx, sy] = this.convertToPointInWorld(0, 0);\n        const [ex, ey] = this.convertToPointInWorld(w, h);\n        return {\n            centerX: sx / 2 + ex / 2,\n            centerY: sy / 2 + ey / 2,\n            width: ex - sx,\n            height: ey - sy\n        };\n    }\n    /**\n     * 计算给定世界坐标时，返回屏幕的四个角落的在世界坐标系代表的范围\n     */\n    getContainerWorldRectByCameraBound(opts) {\n        const w = this.container.width;\n        const h = this.container.height;\n        if (w / h > opts.width / opts.height) {\n            opts.width = opts.height / h * w;\n        }\n        else {\n            opts.height = opts.width / w * h;\n        }\n        return opts;\n    }\n    /**\n     * 转换屏幕上的坐标。\n     * 转换后在不同大小的屏幕上点击相似的位置，会得到大致相似的坐标\n     * @param mx\n     * @param my\n     */\n    convertToPointInWorld(mx, my) {\n        mx = (mx - this.translateX) / this.scale;\n        my = (my - this.translateY) / this.scale;\n        return [mx, my];\n    }\n    /**\n     * 将世界坐标系上的点转化成container上的坐标\n     * @param mx\n     * @param my\n     */\n    convertWorldPointInContainer(mx, my) {\n        mx = mx * this.scale + this.translateX;\n        my = my * this.scale + this.translateY;\n        return [mx, my];\n    }\n    convertDom(dom) {\n        dom.style.transform = `translate(${this.translateX}px, ${this.translateY}px) scale(${this.scale})`;\n    }\n    convertDomAndRefresh() {\n        var _a, _b, _c;\n        this.convertDom(this.container.backgroundEl);\n        this.convertDom(this.container.imageEl);\n        this.convertDom(this.container.domEl);\n        this.convertDom(this.container.textAreaEl);\n        // this.app.room?.currBoard?.currPage?.refresh()\n        this.app.room.pageToRefresh = (_b = (_a = this.app.room) === null || _a === void 0 ? void 0 : _a.currBoard) === null || _b === void 0 ? void 0 : _b.currPage;\n        (_c = this.app.previewFactory) === null || _c === void 0 ? void 0 : _c.resizeElements();\n    }\n    convertCanvas(ctx) {\n        ctx.translate(this.translateX * DPI, this.translateY * DPI);\n        ctx.scale(this.scale * DPI, this.scale * DPI);\n    }\n    /**\n     * 预览窗口的canvas大小和container中canvas大小不一致，需要单独计算缩放属性\n     * @param ctx\n     */\n    convertPreviewCanvas(ctx) {\n        const width = ctx.canvas.width;\n        const height = ctx.canvas.height;\n        const { scale, translateX, translateY } = this.getTransParam(width, height);\n        ctx.translate(translateX, translateY);\n        ctx.scale(scale, scale);\n    }\n    /**\n     * 也由快照引发，快照的type为: cameraBound\n     * @param opts\n     */\n    setCameraBound(opts) {\n        //各个终端会调整自身的translate及scale，确保boundary范围内的元素是可见的。且boundary至少有一边会顶着终端窗口的边界\n        this.centerX = opts.centerX;\n        this.centerY = opts.centerY;\n        this.width = opts.width;\n        this.height = opts.height;\n        this.updateTransParamAndRefresh();\n    }\n    /**\n     * 计算经过snapshot变化后，屏幕显示范围代表的世界坐标系\n     * @param snapshot\n     */\n    getNextCameraBound(data) {\n        if (data.type === 'pan') {\n            return this._roundBoundary(this.getCameraBoundPan(data));\n        }\n        else if (data.type === 'zoom') {\n            return this._roundBoundary(this.getCameraBoundZoom(data));\n        }\n        else if (data.type === 'reset-camera') {\n            return this._roundBoundary(this.getCameraBoundReset());\n        }\n        else if (data.type === 'fit-to-content') {\n            return this._roundBoundary(this.getCameraBoundFitToContent());\n        }\n        else if (data.type === 'fit-to-doc') {\n            return this._roundBoundary(this.getCameraBoundFitToDoc());\n        }\n        else if (data.type === 'resize-camera') {\n            return this._roundBoundary(this.getCameraBoundResize());\n        }\n        else {\n            throw new Error(`不应该进入此分支(getCameraBound), data类型为：${data}`);\n        }\n    }\n    _roundBoundary(boundary) {\n        return {\n            centerX: Number(boundary.centerX.toFixed(1)),\n            centerY: Number(boundary.centerY.toFixed(1)),\n            width: Number(boundary.width.toFixed(1)),\n            height: Number(boundary.height.toFixed(1)),\n        };\n    }\n    getCameraBoundPan(data) {\n        let cx = this.centerX;\n        let cy = this.centerY;\n        let w = this.width;\n        let h = this.height;\n        cx += data.dx / this.scale;\n        cy += data.dy / this.scale;\n        return this.getContainerWorldRectByCameraBound({\n            centerX: cx,\n            centerY: cy,\n            width: w,\n            height: h\n        });\n    }\n    getCameraBoundZoom(data) {\n        let cx = this.centerX;\n        let cy = this.centerY;\n        let w = this.width;\n        let h = this.height;\n        let center;\n        if (data.center) {\n            center = this.convertToPointInWorld(data.center[0], data.center[1]);\n        }\n        else {\n            center = [cx, cy];\n        }\n        const scale = data.scale;\n        cx = center[0] - (center[0] - cx) / scale;\n        cy = center[1] - (center[1] - cy) / scale;\n        w = w / scale;\n        h = h / scale;\n        return this.getContainerWorldRectByCameraBound({\n            centerX: cx,\n            centerY: cy,\n            width: w,\n            height: h\n        });\n    }\n    getCameraBoundReset() {\n        return {\n            centerX: 0,\n            centerY: 0,\n            width: this.container.width,\n            height: this.container.height\n        };\n    }\n    getCameraBoundFitToDoc() {\n        const backgroundOp = this.app.room.currBoard.currPage.backgroundSnapshot;\n        if (!backgroundOp) {\n            return {\n                centerX: this.centerX,\n                centerY: this.centerY,\n                width: this.width,\n                height: this.height\n            };\n        }\n        else {\n            const { sx, sy, w, h } = backgroundOp.data.boundary;\n            return this.getContainerWorldRectByCameraBound({\n                centerX: sx + w / 2,\n                centerY: sy + h / 2,\n                width: w,\n                height: h\n            });\n        }\n    }\n    getCameraBoundFitToContent() {\n        /**\n         * 缩放至和内容的boundary一致\n         */\n        const page = this.app.room.currBoard.currPage;\n        const drawOpQueue = page.drawOpQueue;\n        const backgroundOp = page.backgroundSnapshot;\n        if (Object.keys(drawOpQueue).length === 0 && !backgroundOp) {\n            return this.getCameraBoundReset();\n        }\n        const boundary = {\n            sx: 10000000,\n            sy: 10000000,\n            ex: -10000000,\n            ey: -10000000\n        };\n        if (backgroundOp) {\n            const { sx, sy, w, h } = backgroundOp.data.boundary;\n            boundary.sx = Math.min(boundary.sx, sx);\n            boundary.sy = Math.min(boundary.sy, sy);\n            boundary.ex = Math.max(boundary.ex, sx + w);\n            boundary.ey = Math.max(boundary.ey, sy + h);\n        }\n        for (let key in drawOpQueue) {\n            const data = drawOpQueue[key].data;\n            if (!data.boundary ||\n                (data.boundary.sx === null || data.boundary.sx === undefined) ||\n                (data.boundary.sy === null || data.boundary.sy === undefined) ||\n                (data.boundary.w === null || data.boundary.w === undefined) ||\n                (data.boundary.h === null || data.boundary.h === undefined)) {\n                continue;\n            }\n            const { sx, sy, w, h } = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n            boundary.sx = Math.min(boundary.sx, sx);\n            boundary.sy = Math.min(boundary.sy, sy);\n            boundary.ex = Math.max(boundary.ex, sx + w);\n            boundary.ey = Math.max(boundary.ey, sy + h);\n        }\n        if ((boundary.ex - boundary.sx) < 100 && (boundary.ey - boundary.sy) < 100) {\n            //如果范围太小, 则适当的扩大范围至100 * 100。\n            let horizontalPadding = 100 - (boundary.ex - boundary.sx);\n            let verticalPadding = 100 - (boundary.ey - boundary.ex);\n            boundary.sx = boundary.sx - horizontalPadding / 2;\n            boundary.ex = boundary.ex + horizontalPadding / 2;\n            boundary.sy = boundary.sy - verticalPadding / 2;\n            boundary.ey = boundary.ey + verticalPadding / 2;\n        }\n        let padding = 0;\n        return this.getContainerWorldRectByCameraBound({\n            centerX: boundary.sx / 2 + boundary.ex / 2,\n            centerY: boundary.sy / 2 + boundary.ey / 2,\n            width: boundary.ex - boundary.sx + padding * 2,\n            height: boundary.ey - boundary.sy + padding * 2\n        });\n    }\n    getCameraBoundResize() {\n        if (this.app.disableAutoResize) {\n            /**\n             * 保持窗口内元素大小不变\n             * 屏幕中心点位置不变, scale不变\n             */\n            return {\n                centerX: this.centerX,\n                centerY: this.centerY,\n                width: this.container.width / this.zoomFactor,\n                height: this.container.height / this.zoomFactor\n            };\n        }\n        else {\n            /**\n             * 窗口内内容不变。大小改变\n             *\n             * 由于变化前后的宽高比可能发生变化，因此以宽作为基准。保持同样宽度内的内容不变\n             */\n            return {\n                centerX: this.centerX,\n                centerY: this.centerY,\n                width: this.width,\n                height: this.width / this.container.width * this.container.height\n            };\n        }\n    }\n    /**\n     * 根据世界坐标系设置dom的transform。计算后dom能够完全包含世界坐标系的范围，并且高度，或者宽度和世界坐标系的范围一致\n     * @param opt\n     */\n    getTransParam(_width, _height) {\n        const cameraWidth = this.width;\n        const cameraHeight = this.height;\n        const centerX = this.centerX;\n        const centerY = this.centerY;\n        let scale, translateX, translateY;\n        const cameraWhRatio = cameraWidth / cameraHeight;\n        if (_width / _height > cameraWhRatio) {\n            //容器较宽，根据容器高度和摄像机视野高度的比值，来确定缩放值\n            //缩放后，容器垂直范围内显示的内容和摄像机垂直范围内显示高度一致\n            scale = _height / cameraHeight;\n        }\n        else {\n            scale = _width / cameraWidth;\n        }\n        translateX = _width / 2 - centerX * scale;\n        translateY = _height / 2 - centerY * scale;\n        return { scale, translateX, translateY };\n    }\n    updateTransParamAndRefresh() {\n        const { scale, translateX, translateY } = this.getTransParam(this.container.width, this.container.height);\n        this.scale = scale;\n        this.translateX = translateX;\n        this.translateY = translateY;\n        this.convertDomAndRefresh();\n        this.app.emit('event:appState:change', 'zoomFactor', this.zoomFactor);\n    }\n}\nexport default Camera;\n","/**\n * 录像回放控制器\n */\nclass Player {\n    constructor(app) {\n        this.records = [];\n        this.nextRecordIndex = 0;\n        this.lastTime = 0;\n        this.offsetBegin = 0;\n        this.pkgId = 0;\n        this.app = app;\n    }\n    addRecordData(records) {\n        this.records = records.slice();\n        this.app.resetState();\n        this.nextRecordIndex = 0;\n    }\n    /**\n     * 切换时，vision.mode变化比较复杂。为了避免麻烦，重置account，然后重算一遍\n     * @param viewer\n     */\n    setViewer(viewer) {\n        this.app.account = viewer;\n        /**\n         * 重算一遍\n         */\n        const _lastTime = this.lastTime;\n        this.lastTime = Infinity;\n        this.seekTo(_lastTime);\n    }\n    seekTo(time) {\n        const forward = time > this.lastTime ? true : false;\n        this.lastTime = time;\n        const nextRecordIndex = forward ? this.nextRecordIndex : 0;\n        let endIndex = nextRecordIndex;\n        for (; endIndex < this.records.length; endIndex++) {\n            const record = this.records[endIndex];\n            if (record.time + this.offsetBegin > time) {\n                break;\n            }\n        }\n        const recordsToEmit = this.records.slice(nextRecordIndex, endIndex);\n        this.nextRecordIndex = endIndex;\n        if (!forward) {\n            this.app.resetState();\n            this.pkgId = 0;\n        }\n        let snapshotsToEmit = [];\n        let broadcasterData;\n        let observeModeData;\n        for (let i = 0; i < recordsToEmit.length; i++) {\n            if (recordsToEmit[i].record.type === 'snapshot') {\n                snapshotsToEmit.push({\n                    snapshot: recordsToEmit[i].record.value,\n                    pkgId: this.pkgId\n                });\n                this.pkgId += 1;\n            }\n            else if (recordsToEmit[i].record.type === 'snapshotArr') {\n                for (let snapshot of recordsToEmit[i].record.value) {\n                    snapshotsToEmit.push({\n                        snapshot,\n                        pkgId: this.pkgId\n                    });\n                    this.pkgId += 1;\n                }\n            }\n            else if (recordsToEmit[i].record.type === 'broadcaster') {\n                broadcasterData = recordsToEmit[i].record.value;\n            }\n            else if (recordsToEmit[i].record.type === 'observeMode') {\n                if (recordsToEmit[i].record.value.account === this.app.account) {\n                    observeModeData = recordsToEmit[i].record.value;\n                }\n            }\n        }\n        if (broadcasterData) {\n            this.app.vision.receiveBroadcasterAfterSync(broadcasterData);\n        }\n        if (observeModeData) {\n            this.app.vision.receiveObserveModeAfterSync(observeModeData);\n        }\n        this.app.room.execBatchSnapshots(snapshotsToEmit);\n    }\n}\nexport default Player;\n","class Simulator {\n    constructor(app) {\n        this._lastDirection = 0;\n        this._interruptFreeDraw = false;\n        this.app = app;\n    }\n    reconnect(rebuildSocket = false, resetApp = false) {\n        console.log(`DEV--> 模拟重连， 是否清空数据: ${resetApp}, 是否重新创建socket连接: ${rebuildSocket}`);\n        if (resetApp) {\n            this.app.resetState();\n        }\n        if (rebuildSocket) {\n            this.app.dataHub.handler._simulateReconnect();\n        }\n        else {\n            /**\n             * 不断开socket，重新请求同步数据\n             */\n            this.app.readyToSyncData();\n        }\n    }\n    generateRandomLines(points, repeat, intervalBtwPoints = 15, intervalBtwLines = 1000) {\n        this._interruptFreeDraw = false;\n        this._generateRandomLines(points, repeat, intervalBtwPoints, intervalBtwLines);\n    }\n    interruptRandomLines() {\n        this._interruptFreeDraw = true;\n    }\n    _generateRandomLines(points, repeat, intervalBtwPoints = 15, intervalBtwLines = 1000) {\n        console.log(`正在生成随机线段，还剩余${repeat}次`);\n        if (this._interruptFreeDraw) {\n            return console.log('随机涂鸦被打断');\n        }\n        if (repeat <= 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._generateRandomLines2(points, intervalBtwPoints)\n                .then(() => {\n                return this._generateRandomLines(points, repeat - 1, intervalBtwPoints, intervalBtwLines);\n            });\n        }, intervalBtwLines);\n    }\n    _generateRandomLines2(total, intervalBtwPoints) {\n        const el = this.app.container.el;\n        const width = el.offsetWidth;\n        const height = el.offsetHeight;\n        let x = Math.random() * width;\n        let y = Math.random() * height;\n        let event = new MouseEvent('mousedown', {\n            clientX: x,\n            clientY: y\n        });\n        this.app.container.el.dispatchEvent(event);\n        let promise = this._simulateMouseMove(x, y, 0);\n        for (let i = 0; i < total; i++) {\n            promise = promise\n                .then(lastXY => {\n                if (intervalBtwPoints > 0) {\n                    return new Promise(res => {\n                        setTimeout(() => {\n                            res(lastXY);\n                        }, intervalBtwPoints);\n                    });\n                }\n                else {\n                    return lastXY;\n                }\n            })\n                .then(res => {\n                if (this._interruptFreeDraw) {\n                    return Promise.reject(res);\n                }\n                return this._simulateMouseMove(res.x, res.y, i);\n            });\n        }\n        return promise\n            .catch((res) => {\n            return res;\n        })\n            .then(res => {\n            event = new MouseEvent('mouseup', {\n                clientX: res.x,\n                clientY: res.y\n            });\n            document.dispatchEvent(event);\n        });\n    }\n    _simulateMouseMove(x, y, currIndex) {\n        return new Promise((res) => {\n            setTimeout(() => {\n                const [dx, dy] = this._getDxDy(currIndex);\n                x += dx;\n                y += dy;\n                let event = new MouseEvent('mousemove', {\n                    clientX: x,\n                    clientY: y\n                });\n                document.dispatchEvent(event);\n                res({\n                    x, y\n                });\n            }, 0);\n        });\n    }\n    _getDxDy(currIndex) {\n        const RANDOM_BASE = 10;\n        const TURN_AFTER = 30;\n        if (currIndex % TURN_AFTER === 0) {\n            this._lastDirection = Math.floor(Math.random() * 4);\n        }\n        if (this._lastDirection === 0) {\n            return [Math.random() * RANDOM_BASE, Math.random() * RANDOM_BASE];\n        }\n        else if (this._lastDirection === 1) {\n            return [Math.random() * RANDOM_BASE, Math.random() * -RANDOM_BASE];\n        }\n        else if (this._lastDirection === 2) {\n            return [Math.random() * -RANDOM_BASE, Math.random() * RANDOM_BASE];\n        }\n        else {\n            return [Math.random() * -RANDOM_BASE, Math.random() * -RANDOM_BASE];\n        }\n    }\n}\nexport default Simulator;\n","import { showToast } from \"../../component/toast\";\nimport { transitionToCameraBound } from \"../animation\";\nclass Vision {\n    constructor(app) {\n        /**\n         * 当前用户的身份\n         */\n        this.mode = 'freeObserver';\n        this.app = app;\n        this.camera = this.app.camera;\n    }\n    get broadcasterName() {\n        return this.broadcasterNickname ? this.broadcasterNickname : this.broadcaster;\n    }\n    setMode(mode) {\n        this.mode = mode;\n        this.app.emit('event:appState:change', 'vision', {\n            mode: mode,\n            isBroadcasting: this.broadcaster !== undefined\n        });\n    }\n    setBroadcaster(value, nickname) {\n        this.broadcaster = value;\n        this.broadcasterNickname = nickname;\n        // this.app.emit('event:vision:isBroadcasting', this.broadcaster !== undefined)\n        this.app.emit('event:appState:change', 'vision', {\n            mode: this.mode,\n            isBroadcasting: this.broadcaster !== undefined\n        });\n    }\n    /**\n     * 设置当前用户为广播者, 并将消息广播给其他用户\n     */\n    setSelfAsBroadcaster() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        const account = this.app.account;\n        const nickname = this.app.nickname;\n        this.setMode('broadcaster');\n        this.setBroadcaster(account, nickname);\n        showToast({\n            type: 'success',\n            msg: '其他用户将与您保持视角同步',\n            time: 3\n        });\n        this.app.dataHub.broadcastRoomState({\n            broadcaster: account,\n            nickname: nickname\n        }, 'broadcaster');\n        /**\n         * 将本机的camera-bound发送给其他用户\n         */\n        this.app.emit('op:camera-bound:send', this.camera.getContainerWorldRect(), true);\n    }\n    /**\n     * 停止设置自己为广播者\n     */\n    unsetSelfAsBroadcaster() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        if (this.mode === 'broadcaster') {\n            if (this.broadcaster !== this.app.account) {\n                //运行时不应该走到该分支\n                console.error('白板--> 取消广播。但事实上目前用户并不是房间的广播者', this.broadcaster, this.app.account);\n            }\n            this.setMode('freeObserver');\n            this.setBroadcaster(undefined);\n            showToast({\n                type: 'success',\n                msg: '其他用户将停止与您保持视角同步'\n            });\n            this.app.dataHub.broadcastRoomState({\n                broadcaster: undefined\n            }, 'broadcaster');\n        }\n    }\n    /**\n     * 设置当前用户为跟随者，只有房间状态存在broadcaster时才可用\n     * 设置的目的是为了回放时接收到此数据，然后正确的还原用户当时的视角\n     */\n    setSelfAsFollower() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        if (this.mode === 'broadcaster') {\n            console.error('请先停止广播');\n        }\n        else if (this.mode === 'freeObserver') {\n            this.setMode('follower');\n            const boundary = this.camera.cameraBoundByUser[this.broadcaster];\n            transitionToCameraBound(this.camera, boundary);\n            showToast({\n                type: 'success',\n                msg: `与${this.broadcasterName}保持视角同步`\n            });\n            this.app.dataHub.broadcastRoomState({\n                account: this.app.account,\n                mode: 'follower'\n            }, 'observeMode');\n        }\n    }\n    /**\n     * 设置自己为自由视角。通过setSelfAsFollower可以重新设置为跟随者\n     */\n    setSelfAsFreeObserver() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        if (this.mode === 'broadcaster') {\n            console.error('请先停止广播');\n        }\n        else if (this.mode === 'follower') {\n            this.setMode('freeObserver');\n            showToast({\n                type: 'success',\n                msg: `与${this.broadcasterName}解除视角同步`\n            });\n            this.app.dataHub.broadcastRoomState({\n                account: this.app.account,\n                mode: 'freeObserver'\n            }, 'observeMode');\n            /**\n             * 发送切换时的camera-bound\n             * 保证录像回放时，若切换到freeObserver, 能够通过自己的camera-bound查询到目前的camera\n             * 若没有发送，回放时则需要追溯上一次broadcaster的camera-bound是多少，并且还要截止到broadcaster结束主播前的camera，逻辑非常复杂\n             */\n            this.app.emit('op:camera-bound:send', this.camera.getContainerWorldRect(), false);\n        }\n    }\n    receiveBroadcaster(value) {\n        const { broadcaster, nickname } = value;\n        if (broadcaster) {\n            this.setMode('follower');\n            this.setBroadcaster(broadcaster, nickname);\n            //设置主播：account\n            showToast({\n                msg: `正在与${this.broadcasterName}保持视角同步`,\n                type: 'success',\n                time: 3\n            });\n        }\n        else {\n            showToast({\n                msg: `${this.broadcasterName}取消了视角同步`,\n                type: 'success',\n                time: 3\n            });\n            this.setMode('freeObserver');\n            this.setBroadcaster(undefined);\n        }\n    }\n    /**\n     * 同步之后设置当前视角状态。\n     * @param visionData\n     */\n    receiveBroadcasterAfterSync(lastVisionData) {\n        if (lastVisionData.broadcaster === this.app.account) {\n            showToast({\n                type: 'success',\n                msg: '其他用户正在与您保持视角同步',\n                time: 3\n            });\n            this.setMode('broadcaster');\n            this.setBroadcaster(this.app.account, this.app.nickname);\n        }\n        else if (lastVisionData.broadcaster) {\n            this.setMode('follower');\n            this.setBroadcaster(lastVisionData.broadcaster, lastVisionData.nickname);\n            showToast({\n                msg: `正在与${this.broadcasterName}保持视角同步`,\n                type: 'success',\n                time: 3\n            });\n        }\n        else {\n            this.setMode('freeObserver');\n            this.setBroadcaster(undefined);\n        }\n    }\n    /**\n     * 录像回放时，根据该函数设置用户的观看状态：是自由视角，还是跟随视角\n     * @param lastFree\n     */\n    receiveObserveModeAfterSync(lastObserveModeOfAccount) {\n        if (lastObserveModeOfAccount.account !== this.app.account)\n            return;\n        if (lastObserveModeOfAccount.mode === 'follower') {\n            this.setMode('follower');\n            const boundary = this.camera.cameraBoundByUser[this.broadcaster];\n            transitionToCameraBound(this.camera, boundary);\n            showToast({\n                type: 'success',\n                msg: `正在与${this.broadcasterName}保持视角同步`,\n            });\n        }\n        else {\n            this.setMode('freeObserver');\n            const boundary = this.camera.cameraBoundByUser[this.app.account];\n            transitionToCameraBound(this.camera, boundary);\n            showToast({\n                type: 'success',\n                msg: `与${this.broadcasterName}解除视角同步`\n            });\n        }\n    }\n}\nexport default Vision;\n","import { hideToast, showToast } from \"../../component/toast\";\nlet drawPlugin;\nlet imageDimension = {};\nconst AcceptTypesArr = ['jpg', 'jpeg', 'png', 'bmp', 'webp'];\nconst imageInput = document.createElement('input');\nwindow.onload = () => {\n    document.body.appendChild(imageInput);\n    imageInput.style.position = 'absolute';\n    imageInput.style.visibility = 'hidden';\n    imageInput.type = 'file';\n    imageInput.accept = 'image/*';\n    imageInput.onchange = (ev) => {\n        if (!drawPlugin) {\n            return console.error('白板--> uploadAndAddImage必须先设置drawPlugin');\n        }\n        const fileInput = ev.target;\n        const file = ev.target.files[0];\n        if (file && file.size && file.size > 10 * 1024 * 1024) {\n            return showToast({\n                msg: '图片大小不能超过10M',\n                type: 'error'\n            });\n        }\n        const nameParts = file.name.split('.');\n        const suffix = nameParts[nameParts.length - 1];\n        const isValidType = AcceptTypesArr.includes(suffix.toLowerCase());\n        if (!isValidType) {\n            return showToast({\n                msg: `当前仅支持${AcceptTypesArr.join(',')}格式文件`,\n                time: 3,\n                type: 'error'\n            });\n        }\n        uploadAndAddImage(drawPlugin, { fileInput }, imageDimension);\n    };\n};\n/**\n * 先将base64图片上传到nos中，然后添加到白板中\n * @param app\n * @param base64Url\n */\nexport const uploadAndAddImage = (app, opt, dimensions) => {\n    if (!opt.dataURL && !opt.fileInput) {\n        return console.error('白板--> uploadAndAddImage dataURL和fileInput至少提供一个');\n    }\n    const nim = app.nim;\n    nim.previewFile(Object.assign(Object.assign({}, opt), { beginupload(data) {\n            // - 如果开发者传入 fileInput, 在此回调之前不能修改 fileInput\n            // - 在此回调之后可以取消图片上传, 此回调会接收一个参数 `upload`, 调用 `upload.abort()` 来取消文件上传\n            // 重置input的value为null，否则重新选择相同的文件不会触发onChange\n            // 在这里修改fileInput的感觉很不好。previewFile这个函数不应该依赖于fileInput的\n            if (opt.fileInput) {\n                opt.fileInput.value = '';\n            }\n        }, done: function (err, res) {\n            hideToast();\n            if (err) {\n                console.error('图片上传失败', err);\n                showToast({\n                    msg: '上传失败',\n                    type: 'error',\n                    time: 3\n                });\n            }\n            else {\n                app.addImage({\n                    url: res.url,\n                    width: dimensions.width,\n                    height: dimensions.height\n                });\n            }\n        } }));\n    showToast({\n        msg: '上传图片中...',\n        time: 100000,\n        type: 'info'\n    });\n};\nexport const popupImageChooserAndAddImage = (app, dimensions) => {\n    drawPlugin = app;\n    imageDimension = dimensions;\n    imageInput.click();\n};\n",";(function(root) {\n  'use strict';\n\n  function isBase64(v, opts) {\n    if (v instanceof Boolean || typeof v === 'boolean') {\n      return false\n    }\n\n    if (!(opts instanceof Object)) {\n      opts = {}\n    }\n\n    if (opts.allowEmpty === false && v === '') {\n      return false\n    }\n\n    var regex = '(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?'\n    var mimeRegex = '(data:\\\\w+\\\\/[a-zA-Z\\\\+\\\\-\\\\.]+;base64,)'\n\n    if (opts.mimeRequired === true) {\n      regex =  mimeRegex + regex\n    } else if (opts.allowMime === true) {\n      regex = mimeRegex + '?' + regex\n    }\n\n    if (opts.paddingRequired === false) {\n      regex = '(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}(==)?|[A-Za-z0-9+\\\\/]{3}=?)?'\n    }\n\n    return (new RegExp('^' + regex + '$', 'gi')).test(v)\n  }\n\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = isBase64\n    }\n    exports.isBase64 = isBase64\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return isBase64\n    })\n  } else {\n    root.isBase64 = isBase64\n  }\n})(this);\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const RECORD_FILE = /(\\d+)-(\\d+)-(\\d+)-(\\d+)(-mixed)?\\.(mp4|aac|flv|gz)$/i;\nexport function parseUrl(url) {\n    let match = RECORD_FILE.exec(url || '');\n    if (match) {\n        return {\n            uid: match[1],\n            cid: match[2],\n            timestamp: parseInt(match[3]),\n            chunk: parseInt(match[4]),\n            type: match[6],\n            url\n        };\n    }\n    else {\n        const lastIndexOfDot = url.lastIndexOf('.');\n        return {\n            url,\n            type: url.slice(lastIndexOfDot + 1)\n        };\n    }\n}\nexport const getID = () => ~~(Math.random() * 10000);\nlet textDecoder;\nif (typeof window.TextEncoder === 'function') {\n    textDecoder = new window.TextDecoder(\"utf-8\");\n}\nexport function ab2str(buf) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (textDecoder) {\n            return textDecoder.decode(buf);\n        }\n        else {\n            return yield new Promise((resolve, reject) => {\n                let fileReader = new FileReader();\n                fileReader.onload = () => {\n                    resolve(fileReader.result);\n                };\n                fileReader.onerror = reject;\n                fileReader.readAsText(new Blob([new Uint8Array(buf)]));\n            });\n        }\n    });\n}\nexport const fetchBlob = (url) => {\n    return new Promise((resolve, reject) => {\n        let xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n        xhr.responseType = 'blob';\n        xhr.onload = () => {\n            resolve(xhr.response);\n        };\n        xhr.onerror = reject;\n        xhr.send();\n    });\n};\nconst p0 = (n) => n < 10 ? '0' + n : '' + n;\nexport const getTime = (n, showHour = false) => {\n    n = ~~(n / 1000);\n    let second = n % 60;\n    n -= second;\n    n = ~~(n / 60); // 有多少分钟\n    let minute = (n % 60); // \n    let hour = ~~(n / 60);\n    if (hour === 0 && showHour === false) {\n        return [`${p0(minute)}:${p0(second)}`, hour];\n    }\n    return [`${hour}:${p0(minute)}:${p0(second)}`, hour];\n};\n","!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).pako=t()}}(function(){return function r(s,o,l){function h(e,t){if(!o[e]){if(!s[e]){var a=\"function\"==typeof require&&require;if(!t&&a)return a(e,!0);if(d)return d(e,!0);var i=new Error(\"Cannot find module '\"+e+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var n=o[e]={exports:{}};s[e][0].call(n.exports,function(t){return h(s[e][1][t]||t)},n,n.exports,r,s,o,l)}return o[e].exports}for(var d=\"function\"==typeof require&&require,t=0;t<l.length;t++)h(l[t]);return h}({1:[function(t,e,a){\"use strict\";var s=t(\"./zlib/deflate\"),o=t(\"./utils/common\"),l=t(\"./utils/strings\"),n=t(\"./zlib/messages\"),r=t(\"./zlib/zstream\"),h=Object.prototype.toString,d=0,f=-1,_=0,u=8;function c(t){if(!(this instanceof c))return new c(t);this.options=o.assign({level:f,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:\"\"},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==d)throw new Error(n[a]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i=\"string\"==typeof e.dictionary?l.string2buf(e.dictionary):\"[object ArrayBuffer]\"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(a=s.deflateSetDictionary(this.strm,i))!==d)throw new Error(n[a]);this._dict_set=!0}}function i(t,e){var a=new c(e);if(a.push(t,!0),a.err)throw a.msg||n[a.err];return a.result}c.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,\"string\"==typeof t?n.input=l.string2buf(t):\"[object ArrayBuffer]\"===h.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(r),n.next_out=0,n.avail_out=r),1!==(a=s.deflate(n,i))&&a!==d)return this.onEnd(a),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||(\"string\"===this.options.to?this.onData(l.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==a);return 4===i?(a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===d):2!==i||(this.onEnd(d),!(n.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===d&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=c,a.deflate=i,a.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},a.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{\"./utils/common\":3,\"./utils/strings\":4,\"./zlib/deflate\":8,\"./zlib/messages\":13,\"./zlib/zstream\":15}],2:[function(t,e,a){\"use strict\";var f=t(\"./zlib/inflate\"),_=t(\"./utils/common\"),u=t(\"./utils/strings\"),c=t(\"./zlib/constants\"),i=t(\"./zlib/messages\"),n=t(\"./zlib/zstream\"),r=t(\"./zlib/gzheader\"),b=Object.prototype.toString;function s(t){if(!(this instanceof s))return new s(t);this.options=_.assign({chunkSize:16384,windowBits:0,to:\"\"},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var a=f.inflateInit2(this.strm,e.windowBits);if(a!==c.Z_OK)throw new Error(i[a]);if(this.header=new r,f.inflateGetHeader(this.strm,this.header),e.dictionary&&(\"string\"==typeof e.dictionary?e.dictionary=u.string2buf(e.dictionary):\"[object ArrayBuffer]\"===b.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=f.inflateSetDictionary(this.strm,e.dictionary))!==c.Z_OK))throw new Error(i[a])}function o(t,e){var a=new s(e);if(a.push(t,!0),a.err)throw a.msg||i[a.err];return a.result}s.prototype.push=function(t,e){var a,i,n,r,s,o=this.strm,l=this.options.chunkSize,h=this.options.dictionary,d=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?c.Z_FINISH:c.Z_NO_FLUSH,\"string\"==typeof t?o.input=u.binstring2buf(t):\"[object ArrayBuffer]\"===b.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new _.Buf8(l),o.next_out=0,o.avail_out=l),(a=f.inflate(o,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&h&&(a=f.inflateSetDictionary(this.strm,h)),a===c.Z_BUF_ERROR&&!0===d&&(a=c.Z_OK,d=!1),a!==c.Z_STREAM_END&&a!==c.Z_OK)return this.onEnd(a),!(this.ended=!0);o.next_out&&(0!==o.avail_out&&a!==c.Z_STREAM_END&&(0!==o.avail_in||i!==c.Z_FINISH&&i!==c.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(n=u.utf8border(o.output,o.next_out),r=o.next_out-n,s=u.buf2string(o.output,n),o.next_out=r,o.avail_out=l-r,r&&_.arraySet(o.output,o.output,n,r,0),this.onData(s)):this.onData(_.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(d=!0)}while((0<o.avail_in||0===o.avail_out)&&a!==c.Z_STREAM_END);return a===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(a=f.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===c.Z_OK):i!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(o.avail_out=0))},s.prototype.onData=function(t){this.chunks.push(t)},s.prototype.onEnd=function(t){t===c.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=s,a.inflate=o,a.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},a.ungzip=o},{\"./utils/common\":3,\"./utils/strings\":4,\"./zlib/constants\":6,\"./zlib/gzheader\":9,\"./zlib/inflate\":11,\"./zlib/messages\":13,\"./zlib/zstream\":15}],3:[function(t,e,a){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;a.assign=function(t){for(var e,a,i=Array.prototype.slice.call(arguments,1);i.length;){var n=i.shift();if(n){if(\"object\"!=typeof n)throw new TypeError(n+\"must be non-object\");for(var r in n)e=n,a=r,Object.prototype.hasOwnProperty.call(e,a)&&(t[r]=n[r])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+i),n);else for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(e=i=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),e=n=0,a=t.length;e<a;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],4:[function(t,e,a){\"use strict\";var l=t(\"./common\"),n=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var h=new l.Buf8(256),i=0;i<256;i++)h[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function d(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&n))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var a=\"\",i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a}h[254]=h[254]=1,a.string2buf=function(t){var e,a,i,n,r,s=t.length,o=0;for(n=0;n<s;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new l.Buf8(o),n=r=0;r<o;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),a<128?e[r++]=a:(a<2048?e[r++]=192|a>>>6:(a<65536?e[r++]=224|a>>>12:(e[r++]=240|a>>>18,e[r++]=128|a>>>12&63),e[r++]=128|a>>>6&63),e[r++]=128|63&a);return e},a.buf2binstring=function(t){return d(t,t.length)},a.binstring2buf=function(t){for(var e=new l.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,i,n,r,s=e||t.length,o=new Array(2*s);for(a=i=0;a<s;)if((n=t[a++])<128)o[i++]=n;else if(4<(r=h[n]))o[i++]=65533,a+=r-1;else{for(n&=2===r?31:3===r?15:7;1<r&&a<s;)n=n<<6|63&t[a++],r--;1<r?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return d(o,i)},a.utf8border=function(t,e){var a;for((e=e||t.length)>t.length&&(e=t.length),a=e-1;0<=a&&128==(192&t[a]);)a--;return a<0?e:0===a?e:a+h[t[a]]>e?a:e}},{\"./common\":3}],5:[function(t,e,a){\"use strict\";e.exports=function(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){for(a-=s=2e3<a?2e3:a;r=r+(n=n+e[i++]|0)|0,--s;);n%=65521,r%=65521}return n|r<<16|0}},{}],6:[function(t,e,a){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,a){\"use strict\";var o=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();e.exports=function(t,e,a,i){var n=o,r=i+a;t^=-1;for(var s=i;s<r;s++)t=t>>>8^n[255&(t^e[s])];return-1^t}},{}],8:[function(t,e,a){\"use strict\";var l,_=t(\"../utils/common\"),h=t(\"./trees\"),u=t(\"./adler32\"),c=t(\"./crc32\"),i=t(\"./messages\"),d=0,f=4,b=0,g=-2,m=-1,w=4,n=2,p=8,v=9,r=286,s=30,o=19,k=2*r+1,y=15,x=3,z=258,B=z+x+1,S=42,E=113,A=1,Z=2,R=3,C=4;function N(t,e){return t.msg=i[e],e}function O(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function I(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(_.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function U(t,e){h._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,I(t.strm)}function T(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-B?t.strstart-(t.w_size-B):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+z,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(a=e)+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(i=z-(_-r),r=_-z,s<i){if(t.match_start=e,o<=(s=i))break;u=h[r+s-1],c=h[r+s]}}}while((e=f[e&d])>l&&0!=--n);return s<=t.lookahead?s:t.lookahead}function H(t){var e,a,i,n,r,s,o,l,h,d,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-B)){for(_.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=a=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--a;);for(e=a=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--a;);n+=f}if(0===t.strm.avail_in)break;if(s=t.strm,o=t.window,l=t.strstart+t.lookahead,h=n,d=void 0,d=s.avail_in,h<d&&(d=h),a=0===d?0:(s.avail_in-=d,_.arraySet(o,s.input,s.next_in,d,l),1===s.state.wrap?s.adler=u(s.adler,o,d,l):2===s.state.wrap&&(s.adler=c(s.adler,o,d,l)),s.next_in+=d,s.total_in+=d,d),t.lookahead+=a,t.lookahead+t.insert>=x)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+x-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<B&&0!==t.strm.avail_in)}function j(t,e){for(var a,i;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a)),t.match_length>=x)if(i=h._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function K(t,e){for(var a,i,n;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=h._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(U(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=h._tr_tally(t,0,t.window[t.strstart-1]))&&U(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=h._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function M(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(2*k),this.dyn_dtree=new _.Buf16(2*(2*s+1)),this.bl_tree=new _.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(y+1),this.heap=new _.Buf16(2*r+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(2*r+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?S:E,t.adler=2===e.wrap?0:1,e.last_flush=d,h._tr_init(e),b):N(t,g)}function q(t){var e,a=Y(t);return a===b&&((e=t.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0),a}function G(t,e,a,i,n,r){if(!t)return g;var s=1;if(e===m&&(e=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),n<1||v<n||a!==p||i<8||15<i||e<0||9<e||r<0||w<r)return N(t,g);8===i&&(i=9);var o=new P;return(t.state=o).strm=t,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new _.Buf8(2*o.w_size),o.head=new _.Buf16(o.hash_size),o.prev=new _.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new _.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=a,q(t)}l=[new M(0,0,0,0,function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(H(t),0===t.lookahead&&e===d)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,U(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-B&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):(t.strstart>t.block_start&&(U(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,j),new M(4,5,16,8,j),new M(4,6,32,32,j),new M(4,4,16,16,K),new M(8,16,32,32,K),new M(8,16,128,128,K),new M(8,32,128,256,K),new M(32,128,258,1024,K),new M(32,258,258,4096,K)],a.deflateInit=function(t,e){return G(t,e,p,15,8,0)},a.deflateInit2=G,a.deflateReset=q,a.deflateResetKeep=Y,a.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,b):g},a.deflate=function(t,e){var a,i,n,r;if(!t||!t.state||5<e||e<0)return t?N(t,g):g;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return N(t,0===t.avail_out?-5:g);if(i.strm=t,a=i.last_flush,i.last_flush=e,i.status===S)if(2===i.wrap)t.adler=0,T(i,31),T(i,139),T(i,8),i.gzhead?(T(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),T(i,255&i.gzhead.time),T(i,i.gzhead.time>>8&255),T(i,i.gzhead.time>>16&255),T(i,i.gzhead.time>>24&255),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(T(i,255&i.gzhead.extra.length),T(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=c(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(T(i,0),T(i,0),T(i,0),T(i,0),T(i,0),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,3),i.status=E);else{var s=p+(i.w_bits-8<<4)<<8;s|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=E,F(i,s),0!==i.strstart&&(F(i,t.adler>>>16),F(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending!==i.pending_buf_size));)T(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&I(t),i.pending+2<=i.pending_buf_size&&(T(i,255&t.adler),T(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(I(t),0===t.avail_out)return i.last_flush=-1,b}else if(0===t.avail_in&&O(e)<=O(a)&&e!==f)return N(t,-5);if(666===i.status&&0!==t.avail_in)return N(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==d&&666!==i.status){var o=2===i.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(e===d)return A;break}if(t.match_length=0,a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):3===i.strategy?function(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=z){if(H(t),t.lookahead<=z&&e===d)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=s[n=t.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){r=t.strstart+z;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<r);t.match_length=z-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(a=h._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):l[i.level].func(i,e);if(o!==R&&o!==C||(i.status=666),o===A||o===R)return 0===t.avail_out&&(i.last_flush=-1),b;if(o===Z&&(1===e?h._tr_align(i):5!==e&&(h._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),I(t),0===t.avail_out))return i.last_flush=-1,b}return e!==f?b:i.wrap<=0?1:(2===i.wrap?(T(i,255&t.adler),T(i,t.adler>>8&255),T(i,t.adler>>16&255),T(i,t.adler>>24&255),T(i,255&t.total_in),T(i,t.total_in>>8&255),T(i,t.total_in>>16&255),T(i,t.total_in>>24&255)):(F(i,t.adler>>>16),F(i,65535&t.adler)),I(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?b:1)},a.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==S&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?N(t,g):(t.state=null,e===E?N(t,-3):b):g},a.deflateSetDictionary=function(t,e){var a,i,n,r,s,o,l,h,d=e.length;if(!t||!t.state)return g;if(2===(r=(a=t.state).wrap)||1===r&&a.status!==S||a.lookahead)return g;for(1===r&&(t.adler=u(t.adler,e,d,0)),a.wrap=0,d>=a.w_size&&(0===r&&(D(a.head),a.strstart=0,a.block_start=0,a.insert=0),h=new _.Buf8(a.w_size),_.arraySet(h,e,d-a.w_size,a.w_size,0),e=h,d=a.w_size),s=t.avail_in,o=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,H(a);a.lookahead>=x;){for(i=a.strstart,n=a.lookahead-(x-1);a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+x-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++,--n;);a.strstart=i,a.lookahead=x-1,H(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=x-1,a.match_available=0,t.next_in=o,t.input=l,t.avail_in=s,a.wrap=r,b},a.deflateInfo=\"pako deflate (from Nodeca project)\"},{\"../utils/common\":3,\"./adler32\":5,\"./crc32\":7,\"./messages\":13,\"./trees\":14}],9:[function(t,e,a){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,a){\"use strict\";e.exports=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S;a=t.state,i=t.next_in,B=t.input,n=i+(t.avail_in-5),r=t.next_out,S=t.output,s=r-(e-t.avail_out),o=r+(t.avail_out-257),l=a.dmax,h=a.wsize,d=a.whave,f=a.wnext,_=a.window,u=a.hold,c=a.bits,b=a.lencode,g=a.distcode,m=(1<<a.lenbits)-1,w=(1<<a.distbits)-1;t:do{c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=b[u&m];e:for(;;){if(u>>>=v=p>>>24,c-=v,0===(v=p>>>16&255))S[r++]=65535&p;else{if(!(16&v)){if(0==(64&v)){p=b[(65535&p)+(u&(1<<v)-1)];continue e}if(32&v){a.mode=12;break t}t.msg=\"invalid literal/length code\",a.mode=30;break t}k=65535&p,(v&=15)&&(c<v&&(u+=B[i++]<<c,c+=8),k+=u&(1<<v)-1,u>>>=v,c-=v),c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=g[u&w];a:for(;;){if(u>>>=v=p>>>24,c-=v,!(16&(v=p>>>16&255))){if(0==(64&v)){p=g[(65535&p)+(u&(1<<v)-1)];continue a}t.msg=\"invalid distance code\",a.mode=30;break t}if(y=65535&p,c<(v&=15)&&(u+=B[i++]<<c,(c+=8)<v&&(u+=B[i++]<<c,c+=8)),l<(y+=u&(1<<v)-1)){t.msg=\"invalid distance too far back\",a.mode=30;break t}if(u>>>=v,c-=v,(v=r-s)<y){if(d<(v=y-v)&&a.sane){t.msg=\"invalid distance too far back\",a.mode=30;break t}if(z=_,(x=0)===f){if(x+=h-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}}else if(f<v){if(x+=h+f-v,(v-=f)<k){for(k-=v;S[r++]=_[x++],--v;);if(x=0,f<k){for(k-=v=f;S[r++]=_[x++],--v;);x=r-y,z=S}}}else if(x+=f-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}for(;2<k;)S[r++]=z[x++],S[r++]=z[x++],S[r++]=z[x++],k-=3;k&&(S[r++]=z[x++],1<k&&(S[r++]=z[x++]))}else{for(x=r-y;S[r++]=S[x++],S[r++]=S[x++],S[r++]=S[x++],2<(k-=3););k&&(S[r++]=S[x++],1<k&&(S[r++]=S[x++]))}break}}break}}while(i<n&&r<o);i-=k=c>>3,u&=(1<<(c-=k<<3))-1,t.next_in=i,t.next_out=r,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=r<o?o-r+257:257-(r-o),a.hold=u,a.bits=c}},{}],11:[function(t,e,a){\"use strict\";var Z=t(\"../utils/common\"),R=t(\"./adler32\"),C=t(\"./crc32\"),N=t(\"./inffast\"),O=t(\"./inftrees\"),D=1,I=2,U=0,T=-2,F=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Z.Buf16(320),this.work=new Z.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg=\"\",e.wrap&&(t.adler=1&e.wrap),e.mode=F,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Z.Buf32(i),e.distcode=e.distdyn=new Z.Buf32(n),e.sane=1,e.back=-1,U):T}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):T}function l(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?T:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,o(t))):T}function h(t,e){var a,i;return t?(i=new r,(t.state=i).window=null,(a=l(t,e))!==U&&(t.state=null),a):T}var d,f,_=!0;function H(t){if(_){var e;for(d=new Z.Buf32(512),f=new Z.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(O(D,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;O(I,t.lens,0,32,f,0,t.work,{bits:5}),_=!1}t.lencode=d,t.lenbits=9,t.distcode=f,t.distbits=5}function j(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Z.Buf8(r.wsize)),i>=r.wsize?(Z.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(i<(n=r.wsize-r.wnext)&&(n=i),Z.arraySet(r.window,e,a-i,n,r.wnext),(i-=n)?(Z.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}a.inflateReset=o,a.inflateReset2=l,a.inflateResetKeep=s,a.inflateInit=function(t){return h(t,15)},a.inflateInit2=h,a.inflate=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S=0,E=new Z.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;12===(a=t.state).mode&&(a.mode=13),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,f=o,_=l,x=U;t:for(;;)switch(a.mode){case F:if(0===a.wrap){a.mode=13;break}for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(2&a.wrap&&35615===h){E[a.check=0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0),d=h=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg=\"incorrect header check\",a.mode=30;break}if(8!=(15&h)){t.msg=\"unknown compression method\",a.mode=30;break}if(d-=4,y=8+(15&(h>>>=4)),0===a.wbits)a.wbits=y;else if(y>a.wbits){t.msg=\"invalid window size\",a.mode=30;break}a.dmax=1<<y,t.adler=a.check=1,a.mode=512&h?10:12,d=h=0;break;case 2:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.flags=h,8!=(255&a.flags)){t.msg=\"unknown compression method\",a.mode=30;break}if(57344&a.flags){t.msg=\"unknown header flags set\",a.mode=30;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=3;case 3:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,E[2]=h>>>16&255,E[3]=h>>>24&255,a.check=C(a.check,E,4,0)),d=h=0,a.mode=4;case 4:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=5;case 5:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(o<(u=a.length)&&(u=o),u&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),Z.arraySet(a.head.extra,i,r,u,y)),512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,a.length-=u),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(65535&a.check)){t.msg=\"header crc mismatch\",a.mode=30;break}d=h=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=12;break;case 10:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}t.adler=a.check=L(h),d=h=0,a.mode=11;case 11:if(0===a.havedict)return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,2;t.adler=a.check=1,a.mode=12;case 12:if(5===e||6===e)break t;case 13:if(a.last){h>>>=7&d,d-=7&d,a.mode=27;break}for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}switch(a.last=1&h,d-=1,3&(h>>>=1)){case 0:a.mode=14;break;case 1:if(H(a),a.mode=20,6!==e)break;h>>>=2,d-=2;break t;case 2:a.mode=17;break;case 3:t.msg=\"invalid block type\",a.mode=30}h>>>=2,d-=2;break;case 14:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg=\"invalid stored block lengths\",a.mode=30;break}if(a.length=65535&h,d=h=0,a.mode=15,6===e)break t;case 15:a.mode=16;case 16:if(u=a.length){if(o<u&&(u=o),l<u&&(u=l),0===u)break t;Z.arraySet(n,i,r,u,s),o-=u,r+=u,l-=u,s+=u,a.length-=u;break}a.mode=12;break;case 17:for(;d<14;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,286<a.nlen||30<a.ndist){t.msg=\"too many length or distance symbols\",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.lens[A[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[A[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,z={bits:a.lenbits},x=O(0,a.lens,0,19,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg=\"invalid code lengths set\",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(w<16)h>>>=g,d-=g,a.lens[a.have++]=w;else{if(16===w){for(B=g+2;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h>>>=g,d-=g,0===a.have){t.msg=\"invalid bit length repeat\",a.mode=30;break}y=a.lens[a.have-1],u=3+(3&h),h>>>=2,d-=2}else if(17===w){for(B=g+3;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=3+(7&(h>>>=g)),h>>>=3,d-=3}else{for(B=g+7;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=11+(127&(h>>>=g)),h>>>=7,d-=7}if(a.have+u>a.nlen+a.ndist){t.msg=\"invalid bit length repeat\",a.mode=30;break}for(;u--;)a.lens[a.have++]=y}}if(30===a.mode)break;if(0===a.lens[256]){t.msg=\"invalid code -- missing end-of-block\",a.mode=30;break}if(a.lenbits=9,z={bits:a.lenbits},x=O(D,a.lens,0,a.nlen,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg=\"invalid literal/lengths set\",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,z={bits:a.distbits},x=O(I,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,z),a.distbits=z.bits,x){t.msg=\"invalid distances set\",a.mode=30;break}if(a.mode=20,6===e)break t;case 20:a.mode=21;case 21:if(6<=o&&258<=l){t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,N(t,_),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(m&&0==(240&m)){for(p=g,v=m,k=w;m=(S=a.lencode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,a.length=w,0===m){a.mode=26;break}if(32&m){a.back=-1,a.mode=12;break}if(64&m){t.msg=\"invalid literal/length code\",a.mode=30;break}a.extra=15&m,a.mode=22;case 22:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;m=(S=a.distcode[h&(1<<a.distbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(0==(240&m)){for(p=g,v=m,k=w;m=(S=a.distcode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,64&m){t.msg=\"invalid distance code\",a.mode=30;break}a.offset=w,a.extra=15&m,a.mode=24;case 24:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg=\"invalid distance too far back\",a.mode=30;break}a.mode=25;case 25:if(0===l)break t;if(u=_-l,a.offset>u){if((u=a.offset-u)>a.whave&&a.sane){t.msg=\"invalid distance too far back\",a.mode=30;break}u>a.wnext?(u-=a.wnext,c=a.wsize-u):c=a.wnext-u,u>a.length&&(u=a.length),b=a.window}else b=n,c=s-a.offset,u=a.length;for(l<u&&(u=l),l-=u,a.length-=u;n[s++]=b[c++],--u;);0===a.length&&(a.mode=21);break;case 26:if(0===l)break t;n[s++]=a.length,l--,a.mode=21;break;case 27:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[r++]<<d,d+=8}if(_-=l,t.total_out+=_,a.total+=_,_&&(t.adler=a.check=a.flags?C(a.check,n,_,s-_):R(a.check,n,_,s-_)),_=l,(a.flags?h:L(h))!==a.check){t.msg=\"incorrect data check\",a.mode=30;break}d=h=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(4294967295&a.total)){t.msg=\"incorrect length check\",a.mode=30;break}d=h=0}a.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return T}return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||_!==t.avail_out&&a.mode<30&&(a.mode<27||4!==e))&&j(t,t.output,t.next_out,_-t.avail_out)?(a.mode=31,-4):(f-=t.avail_in,_-=t.avail_out,t.total_in+=f,t.total_out+=_,a.total+=_,a.wrap&&_&&(t.adler=a.check=a.flags?C(a.check,n,_,t.next_out-_):R(a.check,n,_,t.next_out-_)),t.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===f&&0===_||4===e)&&x===U&&(x=-5),x)},a.inflateEnd=function(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,U},a.inflateGetHeader=function(t,e){var a;return t&&t.state?0==(2&(a=t.state).wrap)?T:((a.head=e).done=!1,U):T},a.inflateSetDictionary=function(t,e){var a,i=e.length;return t&&t.state?0!==(a=t.state).wrap&&11!==a.mode?T:11===a.mode&&R(1,e,i,0)!==a.check?-3:j(t,e,i,i)?(a.mode=31,-4):(a.havedict=1,U):T},a.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":3,\"./adler32\":5,\"./crc32\":7,\"./inffast\":10,\"./inftrees\":12}],12:[function(t,e,a){\"use strict\";var D=t(\"../utils/common\"),I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],F=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,a,i,n,r,s,o){var l,h,d,f,_,u,c,b,g,m=o.bits,w=0,p=0,v=0,k=0,y=0,x=0,z=0,B=0,S=0,E=0,A=null,Z=0,R=new D.Buf16(16),C=new D.Buf16(16),N=null,O=0;for(w=0;w<=15;w++)R[w]=0;for(p=0;p<i;p++)R[e[a+p]]++;for(y=m,k=15;1<=k&&0===R[k];k--);if(k<y&&(y=k),0===k)return n[r++]=20971520,n[r++]=20971520,o.bits=1,0;for(v=1;v<k&&0===R[v];v++);for(y<v&&(y=v),w=B=1;w<=15;w++)if(B<<=1,(B-=R[w])<0)return-1;if(0<B&&(0===t||1!==k))return-1;for(C[1]=0,w=1;w<15;w++)C[w+1]=C[w]+R[w];for(p=0;p<i;p++)0!==e[a+p]&&(s[C[e[a+p]]++]=p);if(0===t?(A=N=s,u=19):1===t?(A=I,Z-=257,N=U,O-=257,u=256):(A=T,N=F,u=-1),w=v,_=r,z=p=E=0,d=-1,f=(S=1<<(x=y))-1,1===t&&852<S||2===t&&592<S)return 1;for(;;){for(c=w-z,s[p]<u?(b=0,g=s[p]):s[p]>u?(b=N[O+s[p]],g=A[Z+s[p]]):(b=96,g=0),l=1<<w-z,v=h=1<<x;n[_+(E>>z)+(h-=l)]=c<<24|b<<16|g|0,0!==h;);for(l=1<<w-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,p++,0==--R[w]){if(w===k)break;w=e[a+s[p]]}if(y<w&&(E&f)!==d){for(0===z&&(z=y),_+=v,B=1<<(x=w-z);x+z<k&&!((B-=R[x+z])<=0);)x++,B<<=1;if(S+=1<<x,1===t&&852<S||2===t&&592<S)return 1;n[d=E&f]=y<<24|x<<16|_-r|0}}return 0!==E&&(n[_+E]=w-z<<24|64<<16|0),o.bits=y,0}},{\"../utils/common\":3}],13:[function(t,e,a){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],14:[function(t,e,a){\"use strict\";var l=t(\"../utils/common\"),o=0,h=1;function i(t){for(var e=t.length;0<=--e;)t[e]=0}var d=0,s=29,f=256,_=f+1+s,u=30,c=19,g=2*_+1,m=15,n=16,b=7,w=256,p=16,v=17,k=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(_+2));i(S);var E=new Array(2*u);i(E);var A=new Array(512);i(A);var Z=new Array(256);i(Z);var R=new Array(s);i(R);var C,N,O,D=new Array(u);function I(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function U(t){return t<256?A[t]:A[256+(t>>>7)]}function T(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,a){t.bi_valid>n-a?(t.bi_buf|=e<<t.bi_valid&65535,T(t,t.bi_buf),t.bi_buf=e>>n-t.bi_valid,t.bi_valid+=a-n):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function L(t,e,a){F(t,a[2*e],a[2*e+1])}function H(t,e){for(var a=0;a|=1&t,t>>>=1,a<<=1,0<--e;);return a>>>1}function j(t,e,a){var i,n,r=new Array(m+1),s=0;for(i=1;i<=m;i++)r[i]=s=s+a[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=H(r[o]++,o))}}function K(t){var e;for(e=0;e<_;e++)t.dyn_ltree[2*e]=0;for(e=0;e<u;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?T(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function Y(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&P(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!P(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function q(t,e,a){var i,n,r,s,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(r=Z[n])+f+1,e),0!==(s=y[r])&&F(t,n-=R[r],s),L(t,r=U(--i),a),0!==(s=x[r])&&F(t,i-=D[r],s)),o<t.last_lit;);L(t,w,e)}function G(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=g,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)r[2*(n=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;1<=a;a--)Y(t,r,a);for(n=l;a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Y(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,Y(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;r<=m;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<g;a++)c<(r=l[2*l[2*(i=t.heap[a])+1]+1]+1)&&(r=c,b++),l[2*i+1]=r,h<i||(t.bl_count[r]++,s=0,u<=i&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(0<b);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)h<(n=t.heap[--a])||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}(t,e),j(r,h,t.bl_count)}function X(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*p]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*k]++,r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function W(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),i=0;i<=a;i++)if(n=s,s=e[2*(i+1)+1],!(++o<l&&n===s)){if(o<h)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==r&&(L(t,n,t.bl_tree),o--),L(t,p,t.bl_tree),F(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),F(t,o-3,3)):(L(t,k,t.bl_tree),F(t,o-11,7));r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4)}}i(D);var J=!1;function Q(t,e,a,i){var n,r,s,o;F(t,(d<<1)+(i?1:0),3),r=e,s=a,o=!0,M(n=t),o&&(T(n,s),T(n,~s)),l.arraySet(n.pending_buf,n.window,r,s,n.pending),n.pending+=s}a._tr_init=function(t){J||(function(){var t,e,a,i,n,r=new Array(m+1);for(i=a=0;i<s-1;i++)for(R[i]=a,t=0;t<1<<y[i];t++)Z[a++]=i;for(Z[a-1]=i,i=n=0;i<16;i++)for(D[i]=n,t=0;t<1<<x[i];t++)A[n++]=i;for(n>>=7;i<u;i++)for(D[i]=n<<7,t=0;t<1<<x[i]-7;t++)A[256+n++]=i;for(e=0;e<=m;e++)r[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,r[8]++;for(;t<=255;)S[2*t+1]=9,t++,r[9]++;for(;t<=279;)S[2*t+1]=7,t++,r[7]++;for(;t<=287;)S[2*t+1]=8,t++,r[8]++;for(j(S,_+1,r),t=0;t<u;t++)E[2*t+1]=5,E[2*t]=H(t,5);C=new I(S,y,f+1,_,m),N=new I(E,x,0,u,m),O=new I(new Array(0),z,0,c,b)}(),J=!0),t.l_desc=new r(t.dyn_ltree,C),t.d_desc=new r(t.dyn_dtree,N),t.bl_desc=new r(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,K(t)},a._tr_stored_block=Q,a._tr_flush_block=function(t,e,a,i){var n,r,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return h;for(e=32;e<f;e++)if(0!==t.dyn_ltree[2*e])return h;return o}(t)),G(t,t.l_desc),G(t,t.d_desc),s=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=c-1;3<=e&&0===t.bl_tree[2*B[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=n&&(n=r)):n=r=a+5,a+4<=n&&-1!==e?Q(t,e,a,i):4===t.strategy||r===n?(F(t,2+(i?1:0),3),q(t,S,E)):(F(t,4+(i?1:0),3),function(t,e,a,i){var n;for(F(t,e-257,5),F(t,a-1,5),F(t,i-4,4),n=0;n<i;n++)F(t,t.bl_tree[2*B[n]+1],3);W(t,t.dyn_ltree,e-1),W(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),q(t,t.dyn_ltree,t.dyn_dtree)),K(t),i&&M(t)},a._tr_tally=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(Z[a]+f+1)]++,t.dyn_dtree[2*U(e)]++),t.last_lit===t.lit_bufsize-1},a._tr_align=function(t){var e;F(t,2,3),L(t,w,S),16===(e=t).bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{\"../utils/common\":3}],15:[function(t,e,a){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},{}],\"/\":[function(t,e,a){\"use strict\";var i={};(0,t(\"./lib/utils/common\").assign)(i,t(\"./lib/deflate\"),t(\"./lib/inflate\"),t(\"./lib/zlib/constants\")),e.exports=i},{\"./lib/deflate\":1,\"./lib/inflate\":2,\"./lib/utils/common\":3,\"./lib/zlib/constants\":6}]},{},[])(\"/\")});\n","/**\n * Track，轨道，代表音视频数据，或者白板数据。数据是一系列带时间戳的数组。\n * 音视频轨道由浏览器的<video />组件播放，白板由sdk控制播放。\n *\n * 音视频播放由video.play, video.pause控制。白板播放由ticktick发送tick事件，然后白板轨道根据此事件绘制截至到某个时间戳的所有动作。\n *\n * 音视频轨道数据量较大，不一定完全载入就会播放，播放过程中可能存在数据延时。白板播放过程中，可能会加载文档/图片，加载过程与音视频加载类似，也是异步过程。\n *\n * 在多人会议场景中，随着演讲人的切换，可能音视频的位置会变化，显示状态会变化。所以需要轨道将当前可见的音视频告诉开发者，开发者根据此信息调整容器位置\n * 当音视频/白板容器准备好之前，应该暂停音视频/白板的播放\n *\n *\n *\n *\n * Track有很多维度的状态\n * init:            Track还未抓取轨道数据\n * ready:           Track已抓取轨道metadata（如轨道长度等数据）\n * show / hide:     Track是否显示。默认为隐藏，需要开发者提供容器显示\n * play / pause:    是否正在播放。video有这个属性。白板的播放需要TickTick来主动调用，因此它永远处于pause状态\n * waitingForData:  是否正在等待数据。video track触发onwaiting时，需要等待track数据。onloadeddata触发时，waitingForData为false。\n *\n *\n * Track的几个方法：\n *\n * play/pause:      开始/暂停当前播放的Track。只对video，audio有效。白板永远处于暂停状态\n * seekTo:          跳转到目前位置。Track更新时间戳，且更新自己的状态\n * tick：           更新下一帧。video无需处理该函数，因为播放中的视频会自己调整自己的状态。白板Track需要更新自己的状态\n *\n * Track的几个事件：\n * notifyPause：\n * notifyPlay：\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from \"eventemitter3\";\nexport default class Track extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.offsetBegin = 0;\n        this.offsetEnd = 0;\n    }\n    get duration() {\n        return this.offsetEnd - this.offsetBegin;\n    }\n    playUtilBtwTimeAndReady(time) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.showTrack();\n        });\n    }\n    isWaiting(time) {\n        if (time < this.offsetBegin || time > this.offsetEnd) {\n            return false;\n        }\n        return false;\n    }\n    setViewer(viewer) { }\n    setPlaySpeed(speed) { }\n    showTrack() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.state = 'beforeshow';\n            yield new Promise(resolve => {\n                this.emit('visibleChange', 'show', this.params, (el) => {\n                    this.showTrackCb(el);\n                    resolve();\n                });\n            });\n            this.state = 'playing';\n            setTimeout(() => {\n                this.emit('showTrack');\n            });\n        });\n    }\n    hideTrack() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.state = 'beforefinish';\n            yield new Promise((resolve) => {\n                this.emit('visibleChange', 'hide', this.params, () => {\n                    this.hideTrackCb();\n                    resolve();\n                });\n            });\n            setTimeout(() => {\n                this.emit('hideTrack');\n            });\n            this.state = 'finished';\n        });\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._awaitTrackHandler();\n            if (this.state === 'playing') {\n                yield this.hideTrack();\n            }\n            this.eventNames().forEach(name => this.off(name));\n        });\n    }\n    update(time) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.seekTo(time, true, false);\n            //update是通过ticker.tick方法调用的。\n            //update后track应该处于播放状态\n            //timeline.play并不会启动ready状态的视频tag，也不应该启动ready状态的tag。\n            //因为一些ready状态的tag在play被调用时并不在时间范围内。\n            //所以需要在update时启动。\n            this.play();\n        });\n    }\n    seekTo(time, forward, jumpTo = true) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state === 'init' || this.state === 'error')\n                return;\n            yield this._awaitTrackHandler();\n            /**\n             * 时间没有到当前轨道开始时间，维持原状，不进行任何处理\n             */\n            if (time < this.offsetBegin) {\n                if (this.state === 'playing') {\n                    yield this.hideTrack();\n                }\n                return this.state = 'ready';\n            }\n            else if (time > this.offsetEnd) {\n                if (this.state === 'playing') {\n                    yield this.hideTrack();\n                }\n                return this.state = 'finished';\n            }\n            else {\n                if (this.state === 'ready' || this.state === 'finished') {\n                    yield this.showTrack();\n                }\n                this.state = 'playing';\n                yield this.doSetTrack(time, forward, jumpTo);\n            }\n        });\n    }\n    _awaitTrackHandler() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state === 'beforeshow') {\n                yield new Promise((resolve) => {\n                    this.once('showTrack', resolve);\n                });\n                this.state = 'playing';\n            }\n            if (this.state === 'beforefinish') {\n                yield new Promise((resolve) => {\n                    this.once('hideTrack', resolve);\n                });\n                this.state = 'finished';\n            }\n        });\n    }\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * 所有用户的合集管理\n */\nimport User from \"../Model/User\";\nimport { EventEmitter } from \"eventemitter3\";\nexport class UserManager extends EventEmitter {\n    constructor({ account, maxUserHistory }) {\n        super();\n        this.userKeys = [];\n        this.userMap = new Map();\n        this.onUndo = (user) => {\n            this.emit('undo', user);\n        };\n        this.onRedo = (user) => {\n            this.emit('redo', user);\n        };\n        this.account = account;\n        this.maxUserHistory = typeof maxUserHistory === 'number' ? maxUserHistory : 10;\n    }\n    getUser(account) {\n        return this.userMap.get(account);\n    }\n    addUser(account) {\n        if (this.userMap.has(account)) {\n            return this.userMap.get(account);\n        }\n        else {\n            let user = new User(account, this.maxUserHistory);\n            // 创建监听\n            user.on('undo', this.onUndo);\n            user.on('redo', this.onRedo);\n            this.userMap.set(account, user);\n            return user;\n        }\n    }\n    hasUser(account) {\n        return this.userMap.has(account);\n    }\n    get myself() { return this.userMap.get(this.account); }\n    ;\n    get others() {\n        let others = [];\n        this.userMap.forEach((user, uid) => {\n            if (uid === this.account) {\n            }\n            else {\n                others.push(user);\n            }\n        });\n        return others;\n    }\n    get uids() {\n        return [...this.userMap.keys()];\n    }\n    get all() {\n        return [...this.userMap.values()];\n    }\n    remove(account) {\n        // 清除监听\n        if (this.userMap.has(account)) {\n            let user = this.userMap.get(account);\n            user.removeAllListeners();\n        }\n        return this.userMap.delete(account);\n    }\n    removeOtherUsers() {\n        this.others.forEach(user => {\n            user.removeAllListeners();\n            this.userMap.delete(user.account);\n        });\n    }\n    destroy() {\n        // 清除监听\n        this.all.forEach(user => user.removeAllListeners());\n        this.userMap.clear();\n        // delete this.account\n    }\n    toSnapshot(opt) {\n        return this.all.map(user => ({\n            account: user.account,\n            recycle: user.recycle.map(shape => shape.toSnapshot(opt)),\n            calibrate: user.getCalibrateAction().toString()\n        }));\n    }\n}\n","export function isStandardCursor(cursor) {\n}\nexport function isStandardMode(mode) {\n    if (typeof mode !== 'string') {\n        return [false, '模式必须是字符串'];\n    }\n    mode = mode.trim();\n    if (mode === '') {\n        return [false, '模式不能为空！'];\n    }\n    if (mode === 'player') {\n        return [true];\n    }\n    if (!~mode.indexOf(':')) {\n        return [false, '模式格式不正确！没有找到分割符-> ：'];\n    }\n    let modeArr = mode.split(':');\n    // TODO: 验证mode Arr\n    return [true];\n}\nexport function isValidTool(tool) {\n    if (typeof tool !== 'string') {\n        return false;\n    }\n    switch (tool) {\n        case 'fill':\n        case 'flag':\n        case 'free':\n        case 'line':\n        case 'rect':\n        case 'circle':\n        case 'roundRect':\n        case 'solidRect':\n        case 'solidRoundRect':\n        case 'solidCircle':\n        case 'text':\n        // case 'select':\n        case 'ellipse':\n        case 'solidEllipse':\n        case 'erase':\n            {\n                return true;\n            }\n        default: {\n            const fullCaseChecker = tool;\n            return false;\n        }\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Track from './Track';\nimport { pako } from '../../../src/core/utils';\nimport { ab2str, fetchBlob } from '../utils';\nexport default class WTrack extends Track {\n    constructor(params, opt) {\n        super();\n        this.params = params;\n        this.viewerArr = [];\n        this.urlArray = [];\n        this.type = 'gz';\n        this.offsetBegin = 0;\n        this.offsetEnd = 0;\n        let timestamp;\n        if (Array.isArray(params)) {\n            this.originalParams = params.slice();\n            timestamp = params[0].timestamp;\n            this.urlArray = params.map(param => param.url);\n        }\n        else {\n            this.originalParams = [params];\n            timestamp = params.timestamp;\n            this.url = params.url;\n        }\n        this.timestamp = timestamp;\n        this.opt = opt;\n        this.state = 'init';\n        this.nextRecordIndex = 0;\n        this.viewer = 'unknown';\n    }\n    /**\n     * 白板1.0，2.0版本的处理\n     */\n    fetchData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('init wb track ');\n            let blob;\n            try {\n                blob = yield fetchBlob(this.url);\n            }\n            catch (e) {\n                return ['error', []];\n            }\n            const rawRecordsList = yield this.getRawRecordFromBlob(blob);\n            if (rawRecordsList.length) {\n                this.offsetEnd = Math.max(this.offsetBegin + rawRecordsList[rawRecordsList.length - 1].time + 1000, this.offsetEnd);\n            }\n            return ['ready', rawRecordsList];\n        });\n    }\n    fetchMultiData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let blobArray = [];\n            try {\n                for (let i = 0; i < this.urlArray.length; i++) {\n                    blobArray[i] = yield fetchBlob(this.urlArray[i]);\n                }\n            }\n            catch (e) {\n                return ['error', []];\n            }\n            const listOfRawRecordList = yield Promise.all(blobArray.map((blob, index) => __awaiter(this, void 0, void 0, function* () {\n                //每一个录像文件得到一个rawRecordsList\n                const rawRecordsList = yield this.getRawRecordFromBlob(blob);\n                const params = this.originalParams[index];\n                const offsetBegin = params.timestamp - this.timestamp;\n                let endAt = 0;\n                if (rawRecordsList.length) {\n                    endAt = rawRecordsList[rawRecordsList.length - 1].time;\n                    this.offsetEnd = Math.max(offsetBegin + endAt + 1000, this.offsetEnd);\n                }\n                return {\n                    cid: params.cid,\n                    beginAt: offsetBegin,\n                    endAt: offsetBegin + endAt,\n                    records: rawRecordsList\n                };\n            })));\n            /**\n             * 将同一个channel的多个录像文件合并到一起\n             */\n            const rawDataByChannel = this.mergeRawDataByChannel(listOfRawRecordList);\n            /**\n             * 如果不同channel之间的时间有重叠，则返回error\n             */\n            if (this.isChannelOverlapping(rawDataByChannel)) {\n                return ['error', []];\n            }\n            return ['ready', rawDataByChannel];\n        });\n    }\n    getRawRecordFromBlob(blob) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rawRecordsList = yield new Promise((resolve) => {\n                let result = [];\n                let reader = new FileReader();\n                reader.readAsBinaryString(blob);\n                reader.onload = () => __awaiter(this, void 0, void 0, function* () {\n                    let rawBuffer = pako.ungzip(reader.result);\n                    let dv = new DataView(rawBuffer.buffer);\n                    let length = dv.byteLength;\n                    let current = 0;\n                    while (current < length) {\n                        let cLen = dv.getInt32(current, true);\n                        let time = dv.getInt32(current + 4, true);\n                        let contentLen = cLen - 8;\n                        let offset = current + 8;\n                        let subb = rawBuffer.slice(offset, offset + contentLen);\n                        // console.log(subb)\n                        let str = yield ab2str(subb);\n                        result.push({\n                            time: time,\n                            str: str\n                        });\n                        current = current + cLen;\n                    }\n                    //@ts-ignore\n                    dv = null; // window.rawstring = rawBuffer = null;\n                    resolve(result);\n                });\n            });\n            return rawRecordsList;\n        });\n    }\n    /**\n     * 将数据按照cid合并\n     */\n    mergeRawDataByChannel(listOfRawRecordList) {\n        const rawDataByCid = {};\n        for (let i = 0; i < listOfRawRecordList.length; i++) {\n            const rawData = listOfRawRecordList[i];\n            if (rawDataByCid.hasOwnProperty(rawData.cid)) {\n                //合并\n                const oldRawData = rawDataByCid[rawData.cid];\n                rawDataByCid[rawData.cid] = {\n                    cid: rawData.cid,\n                    beginAt: Math.min(oldRawData.beginAt, rawData.beginAt),\n                    endAt: Math.max(oldRawData.endAt, rawData.endAt),\n                    records: oldRawData.records.concat(rawData.records)\n                };\n            }\n            else {\n                rawDataByCid[rawData.cid] = rawData;\n            }\n        }\n        const result = [];\n        for (let cid in rawDataByCid) {\n            rawDataByCid[cid].records = rawDataByCid[cid].records.sort((a, b) => {\n                return a.time - b.time;\n            });\n            result.push(rawDataByCid[cid]);\n        }\n        return result;\n    }\n    /**\n     * 不同cid的录像时间之间是否存在重叠区域\n     */\n    isChannelOverlapping(listOfRawRecordList) {\n        const listSortByBeginAt = listOfRawRecordList.sort((a, b) => {\n            return a.beginAt - b.beginAt;\n        });\n        for (let i = 0; i < listSortByBeginAt.length - 1; i++) {\n            const first = listSortByBeginAt[i];\n            const second = listSortByBeginAt[i + 1];\n            if (first.endAt > second.beginAt) {\n                console.error(`\nchannel:${first.cid}与channel:${second.cid}之间的时间存在重叠区域，\nchannel:${first.cid}的开始结束时间为: ${this.formatTimeOffset(first.beginAt)}-${this.formatTimeOffset(first.endAt)},\nchannel:${second.cid}的开始结束时间为: ${this.formatTimeOffset(second.beginAt)}-${this.formatTimeOffset(second.endAt)}\n        `);\n                return true;\n            }\n        }\n        return false;\n    }\n    formatTimeOffset(offset) {\n        return new Date(offset + this.timestamp).toLocaleString();\n    }\n    hideTrackCb() { }\n    pause() { }\n    play() { }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from 'eventemitter3';\nimport Timeline from './Timeline';\nimport { mount } from './ToolUI';\nimport VTrack from './Track/VideoTrack';\nimport V1V2Track from './Track/Wb_V1V2';\nimport V3Track from './Track/Wb_V3';\nimport { parseUrl } from './utils';\nclass RecordPlayer extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.speed = 1;\n        this.init = (opt) => {\n            let tracks = [];\n            let v3TrackFileObjs = [];\n            opt.videoTracks.forEach(fileObj => {\n                tracks.push(new VTrack(fileObj));\n            });\n            opt.whiteboardTracks.forEach(fileObj => {\n                if (opt.version === '1.0' || opt.version === '2.0') {\n                    //白板1.0，2.0版本的录像文件\n                    tracks.push(new V1V2Track(fileObj, {\n                        version: opt.version\n                    }));\n                }\n                else {\n                    //白板3.0版本的录像文件\n                    v3TrackFileObjs.push(fileObj);\n                }\n            });\n            let drawPlugin = undefined;\n            if (v3TrackFileObjs.length > 0) {\n                const wbTrack = new V3Track(v3TrackFileObjs, {\n                    version: opt.version\n                });\n                tracks.push(wbTrack);\n                drawPlugin = wbTrack.drawManager;\n            }\n            this.timeline = new Timeline(tracks);\n            this.timeline.on('tick', (time) => this.emit('tick', time));\n            this.timeline.on('pause', () => this.emit('pause'));\n            this.timeline.on('play', () => this.emit('play'));\n            this.timeline.on('finished', () => { this.emit('finished'); });\n            this.timeline.on('visibleChange', (type, option, callback) => {\n                this._visibleChangeCallHandler(type, option, callback);\n                this.emit('visibleChange', type, option);\n            });\n            const player = this;\n            return new Promise((res, rej) => {\n                this.timeline.once('ready', (params) => {\n                    res({\n                        player,\n                        params,\n                        drawPlugin\n                    });\n                });\n                this.timeline.once('error', err => {\n                    rej(err);\n                });\n            });\n        };\n        this._visibleChangeCallHandler = (type, option, callback) => {\n            if (type === 'show') {\n                // 展示白板\n                const dom = option.container;\n                // 开发者可以在这个时候展示白板容器区域，完成后，将dom传入callback\n                callback(dom);\n            }\n            else {\n                // 开发者可以在这个时候隐藏白板容器区域，完成后，调用callback回调\n                callback();\n            }\n        };\n    }\n    static getInstance(opt) {\n        const whiteboardParams = opt.whiteboardParams.urlArr\n            .map((url) => {\n            const params = parseUrl(url);\n            if (params && opt.whiteboardParams.timestamp) {\n                params.timestamp = opt.whiteboardParams.timestamp;\n            }\n            if (!params.timestamp) {\n                throw new Error(`replay--> 无法获取白板录像文件的开始时间, 请仔细检查你的参数`);\n            }\n            if (!opt.whiteboardParams.container) {\n                throw new Error('replay--> 白板容器不可用，请仔细检查你的参数');\n            }\n            params.container = opt.whiteboardParams.container;\n            params.drawPluginParams = opt.whiteboardParams.drawPluginParams;\n            return params;\n        })\n            .filter(param => param);\n        let videoParams;\n        if (!opt.videoParams) {\n            videoParams = [];\n        }\n        else {\n            videoParams = opt.videoParams.map((opt, index) => {\n                const params = parseUrl(opt.url);\n                if (params && opt.timestamp) {\n                    params.timestamp = opt.timestamp;\n                }\n                if (!params.timestamp) {\n                    throw new Error(`replay--> 无法获取第${index + 1}个视频录像的开始时间, 请仔细检查你的参数`);\n                }\n                if (!opt.container) {\n                    console.error(`replay--> 第${index + 1}个录像文件的容器为空，请仔细检查你的参数`);\n                }\n                params.container = opt.container;\n                return params;\n            });\n        }\n        if (LOG) {\n            console.log('replay--> 录像回放参数为', whiteboardParams, videoParams, opt.version);\n        }\n        const player = new RecordPlayer();\n        if (DEV) {\n            window.player = player;\n        }\n        return player.init({\n            whiteboardTracks: whiteboardParams,\n            videoTracks: videoParams,\n            version: opt.version || '3.0' // 是否是兼容模式，对于老版本的录制文件，需要做不同的解析\n        });\n    }\n    bindControlContainer(div) {\n        if (typeof this.unmount === 'function') {\n            this.unmount();\n        }\n        this.unmount = mount(div, this);\n    }\n    setPlaySpeed(speed) {\n        if (speed <= 0.1 || speed >= 100) {\n            throw new Error('播放速度不能大于100，或者小于0.1');\n        }\n        else {\n            if (this.timeline) {\n                this.timeline.setPlaySpeed(speed);\n                this.speed = speed;\n                this.emit('speedChange', speed);\n            }\n        }\n    }\n    setViewer(viewer) {\n        if (this.timeline) {\n            this.timeline.setViewer(viewer);\n        }\n    }\n    play() {\n        if (this.timeline) {\n            return this.timeline.play();\n        }\n    }\n    pause() {\n        if (this.timeline) {\n            return this.timeline.pause();\n        }\n    }\n    seekTo(time) {\n        if (this.timeline) {\n            this.timeline.seekTo(time);\n        }\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.timeline) {\n                yield this.timeline.destroy();\n            }\n            if (typeof this.unmount === 'function') {\n                this.unmount();\n                this.unmount = undefined;\n            }\n            delete this.timeline;\n            this.eventNames().forEach(name => this.off(name));\n        });\n    }\n}\nexport default RecordPlayer;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from \"eventemitter3\";\nimport TickTick, { DEFAULT_INTERVAL } from \"./TickTick\";\nexport default class Timeline extends EventEmitter {\n    constructor(tracks) {\n        super();\n        this.tracks = tracks;\n        this.ticker = new TickTick();\n        this.endTimeStamp = 0;\n        /**\n         * waitingToPlay表示部分Track暂时无法播放。\n         * 一旦所有Track准备好了(canplay), timeline将自动开始播放\n         */\n        this.state = 'pause';\n        this.busy = false; // 主要是用于异步操作时，防止多次调用导致的状态不统一\n        this.handleTrackVisibleChange = (type, params, callback) => {\n            this.emit('visibleChange', type, params, callback);\n        };\n        /**\n         * ticktick发送tick事件，将track播放至ticktick发送的时间(time)\n         * @param time\n         */\n        this.update = (time) => __awaiter(this, void 0, void 0, function* () {\n            if (this.state !== 'play') {\n                console.error('update应该处于play状态下才调用');\n            }\n            yield Promise.all(this.tracks.map(track => track.update(time)));\n            if (this.tracks.every(track => track.state === 'finished')) {\n                setTimeout(() => {\n                    this._doPause();\n                    this.state = 'finished';\n                    this.emit('finished');\n                });\n            }\n        });\n        this.initTrack(tracks);\n        this.bindTickerEvents();\n    }\n    initTrack(tracks) {\n        this.tracks = tracks.slice();\n        // 计算出轨道的起始时间戳\n        let minTimestamp = getMinTimeStamp(tracks);\n        let readyQueue = getInitQueue(tracks, minTimestamp);\n        console.log('init every track');\n        // 先初始化白板的录制文件\n        Promise.all(readyQueue).then(list => {\n            console.log('every track inited');\n            const badTracks = this.tracks.filter((t, index) => list[index] === 'error');\n            this.tracks = this.tracks.filter((t, index) => list[index] === 'ready');\n            if (badTracks.length > 0) {\n                this.emit('error', 'bad track');\n            }\n            this.endTimeStamp = getMaxTimeStamp(tracks);\n            this.bindTrackEvents();\n            console.log('timeline ready');\n            const viewerArr = [];\n            this.tracks.forEach(track => {\n                if (Array.isArray(track['viewerArr'])) {\n                    track['viewerArr'].forEach(viewer => {\n                        if (!viewerArr.includes(viewer)) {\n                            viewerArr.push(viewer);\n                        }\n                    });\n                }\n            });\n            if (viewerArr.length === 0) {\n                viewerArr.push('unknown');\n            }\n            this.emit('ready', {\n                beginTimeStamp: minTimestamp,\n                endTimeStamp: this.endTimeStamp + minTimestamp,\n                duration: this.endTimeStamp,\n                viewerArr: viewerArr\n            });\n        });\n    }\n    bindTrackEvents() {\n        this.tracks.forEach(track => {\n            // 给每个轨道绑定事件\n            track.on('visibleChange', this.handleTrackVisibleChange);\n            track.on('waitingToPlay', () => this.handleTrackWaitingToPlay());\n            track.on('canplay', () => this.handleTrackCanPlay());\n        });\n    }\n    bindTickerEvents() {\n        this.ticker.on('tick', (time) => {\n            this.emit('tick', time);\n            this.update(time);\n        });\n        this.ticker.on('pause', () => {\n            this.emit('pause');\n        });\n        this.ticker.on('play', () => {\n            this.emit('play');\n        });\n    }\n    /**\n     * Track发送waitingToPlay消息，表示Track目前阻塞中。\n     * 如果Timeline状态为播放中，改为等待播放。如果为暂停，或者结束，则不用额外处理\n     */\n    handleTrackWaitingToPlay() {\n        if (this.state === 'play' && this.hasTrackWaiting()) {\n            this.state = 'waitingToPlay';\n            this._doPause();\n        }\n    }\n    /**\n     * 某个Track转为非阻塞状态。\n     * 如果当前状态为等待播放，且没有track阻塞，则开始播放轨道\n     */\n    handleTrackCanPlay() {\n        if (this.state === 'waitingToPlay' && !this.hasTrackWaiting()) {\n            this.state = 'play';\n            this._doPlay();\n        }\n    }\n    /**\n     * 某些track在currTimeStamp这个时间点上还没准备好数据或者容器\n     */\n    hasTrackWaiting() {\n        return this.tracks.find(track => track.isWaiting(this.ticker.currTimeStamp)) !== undefined;\n    }\n    /**\n     * 暂停播放。\n     * 停止ticker，ticker会停止tick事件，这会阻止白板播放\n     * 停止track, 会暂停音视频Track播放\n     */\n    pause() {\n        if (this.busy) {\n            //  繁忙状态下，不允许二次操作\n            console.warn('busy pause');\n            return;\n        }\n        if (this.state === 'play') {\n            this._doPause();\n        }\n        if (this.state !== 'finished') {\n            this.state = 'pause';\n        }\n    }\n    /**\n     * 播放。要每段track都能够播放，才能够继续播放\n     * 如果处于waitingToPlay，则还有资源被阻塞\n     */\n    play() {\n        if (this.busy) {\n            //  繁忙状态下，不允许二次操作\n            console.warn('busy play');\n            return;\n        }\n        if (this.state !== 'finished') {\n            if (!this.hasTrackWaiting()) {\n                this.state = 'play';\n                this._doPlay();\n            }\n            else {\n                this.state = 'waitingToPlay';\n            }\n        }\n        else {\n            //重新开始播放\n            this.state = 'play';\n            this.seekTo(0);\n        }\n    }\n    setPlaySpeed(speed) {\n        this.ticker.rate = speed;\n        this.tracks.forEach(track => {\n            track.setPlaySpeed(speed);\n        });\n    }\n    setViewer(viewer) {\n        this.tracks.forEach((track) => track.setViewer(viewer));\n    }\n    /**\n     * 跳转track至time\n     * @param time\n     */\n    seekTo(time) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.busy)\n                return;\n            //时间范围不能超出录像时间范围\n            time = Math.min(Math.max(time, 0), this.endTimeStamp);\n            //  如果在下两个时钟周期内，那么这个跳转就丢弃\n            if (this.ticker.currTimeStamp < time && time < this.ticker.currTimeStamp + DEFAULT_INTERVAL * 2)\n                return;\n            if (time < this.ticker.currTimeStamp) {\n                // 往回退\n                if (this.state === 'finished') {\n                    this.state = 'pause';\n                }\n                this.busy = true;\n                this.ticker.setCurrentTime(time);\n                try {\n                    yield Promise.all(this.tracks.map(track => track.seekTo(time, false)));\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                this.busy = false;\n            }\n            else {\n                // 往前进\n                this.busy = true;\n                this.ticker.setCurrentTime(time);\n                try {\n                    yield Promise.all(this.tracks.map(track => track.seekTo(time, true)));\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                this.busy = false;\n            }\n            //seekTo前后，一些视频的启动，暂停状态可能有转换。下面根据timeline的状态重设所有Track的状态\n            if (this.state === 'play') {\n                this._doPlay();\n            }\n            else {\n                this._doPause();\n            }\n        });\n    }\n    _doPause() {\n        this.ticker.pause();\n        this.tracks.forEach((track) => track.pause());\n    }\n    /**\n     * ticker.play会开启ticker定时tick事件。白板Track依赖于tick事件更新\n     */\n    _doPlay() {\n        this.ticker.play();\n        this.tracks.forEach((track) => track.play());\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.ticker.destory();\n            yield Promise.all(this.tracks.map(track => track.destroy()));\n            this.eventNames().forEach(name => this.off(name));\n        });\n    }\n}\n/**\n * 返回多个track的起始时间戳\n * @param tracks\n */\nconst getMinTimeStamp = (tracks) => {\n    let minTimestamp = Number.POSITIVE_INFINITY;\n    tracks.forEach(track => {\n        if (minTimestamp > track.timestamp) {\n            minTimestamp = track.timestamp;\n        }\n    });\n    return minTimestamp;\n};\n/**\n * 返回多个track的结束时间戳\n * @param tracks\n */\nconst getMaxTimeStamp = (tracks) => {\n    let maxTimestamp = Number.NEGATIVE_INFINITY;\n    tracks.forEach(track => {\n        // 计算出轨道的结束时间戳\n        if (maxTimestamp < track.offsetEnd) {\n            maxTimestamp = track.offsetEnd;\n        }\n    });\n    return maxTimestamp;\n};\n/**\n * 获取track异步初始化Promise Array\n * @param tracks\n * @param minTimestamp\n */\nconst getInitQueue = (tracks, minTimestamp) => {\n    let isIPhone = /iphone/i.test(navigator.userAgent);\n    let pPipeline = Promise.resolve('got lucky ~');\n    // 判断是否是iPhone,如果是iPhone,video轨道需要一个一个的初始化\n    let readyQueue = tracks.map(track => {\n        // 计算开始时间\n        track.offsetBegin = track.timestamp - minTimestamp;\n        if (isIPhone) {\n            if (track.type === 'mp4' || track.type === 'flv' || track.type === 'aac') {\n                // 如果是视频轨道，需要一个接一个的初始化\n                let result = track.init(pPipeline);\n                pPipeline = result;\n                return result; // 提前返回\n            }\n        }\n        return track.init();\n    });\n    return readyQueue;\n};\n","/**\n * 滴答滴答报时器。\n *\n * 处于play状态时，每隔一段时间会向外发送tick事件。\n */\nimport { EventEmitter } from \"eventemitter3\";\nexport const DEFAULT_INTERVAL = 10;\nexport default class TickTick extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.state = 'pause';\n        //currTimeStamp是相对于最早Track的起始时间偏移量\n        this.currTimeStamp = 0;\n        //lastRealTime是上一次记录的真实时间\n        this.lastRealTime = undefined;\n        this.rate = 1;\n        this.microTask = () => {\n            if (this.state === 'play') {\n                this.tick();\n            }\n        };\n    }\n    destory() {\n        this.pause();\n        this.eventNames().forEach(name => this.off(name));\n    }\n    tick() {\n        let now = Date.now();\n        if (this.lastRealTime === undefined) {\n            this.lastRealTime = now;\n            return;\n        }\n        else {\n            let passedGap = ((now - this.lastRealTime) * this.rate);\n            this.currTimeStamp = this.currTimeStamp + passedGap;\n            this.lastRealTime = now;\n            this.emit('tick', this.currTimeStamp);\n        }\n    }\n    pause() {\n        if (this.timer) {\n            window.clearInterval(this.timer);\n        }\n        this.timer = undefined;\n        this.lastRealTime = undefined;\n        this.state = 'pause';\n        this.emit('pause');\n    }\n    play() {\n        if (!this.timer) {\n            this.timer = setInterval(this.microTask, DEFAULT_INTERVAL);\n        }\n        this.state = 'play';\n        this.emit('play');\n    }\n    setCurrentTime(timeStamp = 0) {\n        this.currTimeStamp = timeStamp;\n        this.lastRealTime = undefined;\n    }\n}\n","import React, { render, createRef } from 'preact';\n// Tell Babel to transform JSX into preact.h() calls:\n/** @jsx preact.h */\nimport { getTime } from './utils';\nimport PAUSE_BASE_64 from './assets/pause.svg';\nimport PLAY_BASE_64 from './assets/play.svg';\nimport './ToolUI.less';\nconst isPhone = /iphone|android/i.test(navigator.userAgent);\nexport default class ToolUI extends React.Component {\n    constructor(props) {\n        super(props);\n        this.toolUIEl = createRef();\n        this.onMouseMove = (e) => {\n            const { currentX, currentTime } = this.getCurrentXAndTime(e);\n            let [labelText] = getTime(currentTime);\n            this.setState({\n                labelLeft: currentX,\n                labelText: labelText,\n            });\n        };\n        this.pauseOrPlay = (e) => {\n            const { paused } = this.state;\n            if (paused) {\n                this.props.player.play();\n            }\n            else {\n                this.props.player.pause();\n            }\n            this.setState({ paused: !paused });\n        };\n        this.onMouseDown = (e) => {\n            let role = e.target.getAttribute('role');\n            if (role === 'slider') {\n                this.setState({\n                    showLabel: true,\n                    drag: true\n                });\n                this.onMouseMove(e);\n            }\n        };\n        this.onMouseUp = (e) => {\n            if (this.state.drag) {\n                this.seekTo(e);\n            }\n            this.hidePosition(e);\n        };\n        this.handleClickSpeed = (e) => {\n            this.setState({\n                speedOptionShow: !this.state.speedOptionShow\n            });\n        };\n        this.handleClickSpeedOption = (ev, speed) => {\n            ev.stopPropagation();\n            this.setState({\n                speedOptionShow: false\n            });\n            this.props.player.setPlaySpeed(speed);\n        };\n        this.showPosition = (e) => {\n            this.setState({\n                showLabel: true\n            });\n            this.onMouseMove(e);\n        };\n        this.hidePosition = (e) => {\n            this.setState({\n                showLabel: false\n            });\n        };\n        this.seekTo = (e) => {\n            let { currentX, currentTime } = this.getCurrentXAndTime(e);\n            this.props.player.seekTo(currentTime);\n            let updator = {\n                labelLeft: currentX,\n                time: currentTime,\n                drag: false,\n            };\n            // 如果是鼠标事件，不隐藏光标\n            if (isPhone) {\n                updator.showLabel = false;\n            }\n            this.setState(updator);\n        };\n        this.getCurrentXAndTime = (e) => {\n            let currentX = 0;\n            let left = this.toolUIEl.current.getBoundingClientRect().left;\n            if (e.type.search(/mouse|click/) > -1) {\n                currentX = e.clientX - left;\n            }\n            else {\n                currentX = e.touches[0].clientX - left;\n            }\n            let fullWidth = this.toolUIEl.current.offsetWidth;\n            // 防止越界\n            if (currentX < 0) {\n                currentX = 0;\n            }\n            if (currentX > fullWidth) {\n                currentX = fullWidth;\n            }\n            const currentTime = this.state.duration * (currentX / fullWidth);\n            return {\n                currentX,\n                currentTime\n            };\n        };\n        this.renderTimeline = (widthPercent) => {\n            const { showLabel, labelLeft, labelText, drag } = this.state;\n            return (React.createElement(\"div\", { ref: this.toolUIEl, className: 'player-timeline', onClick: this.seekTo, onMouseEnter: this.showPosition, onMouseLeave: this.hidePosition, onMouseDown: this.onMouseDown, onMouseMove: this.onMouseMove, onTouchStart: this.onMouseDown, onTouchMove: this.onMouseMove, onTouchEnd: this.onMouseUp, role: \"timeline\" },\n                React.createElement(\"span\", { role: \"currentLabel\", className: 'player-timeline-label', style: {\n                        display: showLabel ? 'inline-block' : 'none',\n                        left: `${labelLeft}px`\n                    } }, labelText),\n                React.createElement(\"span\", { role: \"label-background\", className: 'player-timeline-bg', style: {\n                        display: showLabel ? 'inline-block' : 'none',\n                        height: 20,\n                        left: `${labelLeft}px`\n                    } }),\n                React.createElement(\"div\", { role: \"blue-line\", className: 'player-timeline-blueline', style: {\n                        width: `${widthPercent + '%'}`\n                    } }),\n                React.createElement(\"div\", { role: \"slider\", className: 'player-timeline-slider', style: {\n                        left: `${drag ? labelLeft + 'px' : widthPercent + '%'}`,\n                        backgroundClip: `${drag ? 'border-box' : 'content-box'}`\n                    } })));\n        };\n        this.renderPlayOrPause = () => {\n            const { paused } = this.state;\n            return (React.createElement(\"div\", { className: 'player-play-icon-wrapper', role: \"icon\", onClick: this.pauseOrPlay },\n                React.createElement(\"span\", { className: 'player-play-icon', style: {\n                        backgroundImage: `url(${(paused ? PLAY_BASE_64 : PAUSE_BASE_64)})`\n                    } })));\n        };\n        const { player } = props;\n        this.state = {\n            time: player.timeline.ticker.currTimeStamp,\n            duration: player.timeline.endTimeStamp,\n            showLabel: false,\n            labelLeft: 0,\n            labelText: '',\n            paused: player.timeline.ticker.state === 'pause',\n            currSpeed: player.speed,\n            speedOptionShow: false,\n            drag: false\n        };\n        player.on('tick', (time) => {\n            this.setState({ time: time });\n        });\n        player.on('play', () => {\n            this.setState({ paused: false });\n        });\n        player.on('pause', () => {\n            this.setState({ paused: true });\n        });\n        player.on('speedChange', (speed) => {\n            this.setState({ currSpeed: speed });\n        });\n    }\n    renderSpeed() {\n        const speedText = this.state.currSpeed === 1 ? '倍数' : `${this.state.currSpeed}x`;\n        const speedArr = [2, 1.5, 1.25, 1, 0.75, 0.5];\n        return (React.createElement(\"div\", { className: 'player-speed', onClick: this.handleClickSpeed },\n            React.createElement(\"div\", { className: 'player-speed-text' }, speedText),\n            this.state.speedOptionShow && (React.createElement(\"div\", { className: 'player-speed-options' }, speedArr.map(speed => {\n                return (React.createElement(\"div\", { className: 'option', key: speed, onClick: (ev) => this.handleClickSpeedOption(ev, speed) },\n                    speed,\n                    \"x\"));\n            })))));\n    }\n    render(props, state) {\n        const { time, duration } = state;\n        let widthPercent = 0;\n        if (time >= duration) {\n            widthPercent = 100;\n        }\n        else if (time <= 0) {\n            widthPercent = 0;\n        }\n        else {\n            widthPercent = time / duration * 100;\n        }\n        let timeDuration;\n        if (time > duration) {\n            let [durationStr] = getTime(duration);\n            timeDuration = durationStr + '/' + durationStr;\n        }\n        else {\n            let [durationStr, durationHour] = getTime(duration);\n            let [currentStr] = getTime(time, durationHour > 0);\n            timeDuration = currentStr + '/' + durationStr;\n        }\n        return (React.createElement(\"div\", { className: \"player-container\" },\n            this.renderPlayOrPause(),\n            this.renderTimeline(widthPercent),\n            this.renderSpeed(),\n            React.createElement(\"div\", { role: \"duration\", className: 'player-duration' }, timeDuration)));\n    }\n}\nconst Nothing = () => null;\nexport function mount(dom, player) {\n    if (!dom) {\n        throw new Error('RecordPlayer mount传入的容器不能为空');\n    }\n    if (!player) {\n        throw new Error('请传入录制回放实例');\n    }\n    const root = render(React.createElement(ToolUI, { player: player }), dom);\n    function unmount() {\n        render(React.createElement(Nothing, null), dom, root);\n    }\n    return unmount;\n}\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTUxOTYxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5MDgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU5Ljk0NzkyOTA5IDEzMy45MjE4OTNoMTI2LjAyNjAzNDgxYzIzLjMzODE1NDczIDAgNDIuMDA4Njc4MjcgMTguNjcwNTIzNTMgNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZ2NjcyLjEzODg1NzQ4YzAgMjMuMzM4MTU0NzMtMTguNjcwNTIzNTMgNDIuMDA4Njc4MjctNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZIMjU5Ljk0NzkyOTA5Yy0yMy4zMzgxNTQ3MyAwLTQyLjAwODY3ODI3LTE4LjY3MDUyMzUzLTQyLjAwODY3OTU2LTQyLjAwODY3ODI2VjE3NS45MzA1NzEyNmMwLTIzLjMzODE1NDczIDE4LjY3MDUyMzUzLTQyLjAwODY3ODI3IDQyLjAwODY3OTU2LTQyLjAwODY3ODI2ek02MzguMDI2MDM2MSAxMzMuOTIxODkzaDEyNi4wMjYwMzQ4MWMyMy4zMzgxNTQ3MyAwIDQyLjAwODY3ODI3IDE4LjY3MDUyMzUzIDQyLjAwODY3OTU2IDQyLjAwODY3ODI2djY3Mi4xMzg4NTc0OGMwIDIzLjMzODE1NDczLTE4LjY3MDUyMzUzIDQyLjAwODY3ODI3LTQyLjAwODY3OTU2IDQyLjAwODY3ODI2aC0xMjYuMDI2MDM0ODFjLTIzLjMzODE1NDczIDAtNDIuMDA4Njc4MjctMTguNjcwNTIzNTMtNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZWMTc1LjkzMDU3MTI2YzAtMjMuMzM4MTU0NzMgMTguNjcwNTIzNTMtNDIuMDA4Njc4MjcgNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZ6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyOTA5Ij48L3BhdGg+PC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTI0MjE2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIxMzEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNOTEyLjcyNDg4NCA0MjkuMzU1NjgxTDIwOC43OTc1NDUgMTMuMTk4NjM4QzE1MS42MDM0NDktMjAuNTk3ODc0IDY0LjAxMjQ5IDEyLjE5ODc0MSA2NC4wMTI0OSA5NS43OTAxMTJWOTI3LjkwNDIxOWMwIDc0Ljk5MjI1OSA4MS4zOTE1OTkgMTIwLjE4NzU5NCAxNDQuNzg1MDU1IDgyLjU5MTQ3NWw3MDMuOTI3MzM5LTQxNS45NTcwNjRjNjIuNzkzNTE4LTM2Ljk5NjE4MSA2Mi45OTM0OTgtMTI4LjE4Njc2OCAwLTE2NS4xODI5NDl6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyMTMyIj48L3BhdGg+PC9zdmc+\"","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../node_modules/postcss-loader/src/index.js??postcss!./ToolUI.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../node_modules/postcss-loader/src/index.js??postcss!./ToolUI.less\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../node_modules/postcss-loader/src/index.js??postcss!./ToolUI.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".player-container {\\n    display: block;\\n    position: relative;\\n    height: 30px;\\n    background: rgba(113, 113, 113, 0.23);\\n    -webkit-user-select: none;\\n       -moz-user-select: none;\\n        -ms-user-select: none;\\n            user-select: none;\\n    display: flex;\\n}\\n\\n    .player-container .player-play-icon-wrapper {\\n        cursor: pointer;\\n        position: relative;\\n        width: 20px;\\n        height: 20px;\\n        padding: 5px;\\n    }\\n\\n    .player-container .player-play-icon-wrapper .player-play-icon {\\n            display:inline-block;\\n            height:inherit;\\n            width:inherit;\\n            background-size:cover;\\n        }\\n\\n    .player-container .player-speed {\\n        padding: 5px;\\n        height: 20px;\\n        font-size: 14px;\\n        font-family: sans-serif;\\n        cursor: pointer;\\n    }\\n\\n    .player-container .player-speed .player-speed-text {\\n            text-align: center;\\n        }\\n\\n    .player-container .player-speed .player-speed-options {\\n            position: absolute;\\n            bottom: 27px;\\n            background: rgba(0,0,0,.8);\\n            padding: 0 10px;\\n            color: white;\\n            text-align: center;\\n        }\\n\\n    .player-container .player-speed .player-speed-options .option {\\n                margin: 10px 0;\\n            }\\n\\n    .player-container .player-duration {\\n        height:20px;\\n        font-size:14px;\\n        font-family:sans-serif;\\n        padding: 5px;\\n    }\\n\\n    .player-container .player-timeline {\\n        flex: 1;\\n        height: 6px;\\n        cursor: pointer;\\n        background: rgba(0,0,0,0.12);\\n        margin: 12px 5px;\\n        position: relative;\\n    }\\n\\n    .player-container .player-timeline-label {\\n        position: absolute;\\n        height: 20px;\\n        background: white;\\n        border-radius: 3px;\\n        bottom: 10px;\\n        padding: 4px 6px;\\n        transform: translateX(-50%);\\n    }\\n\\n    .player-container .player-timeline-bg {\\n        position: absolute;\\n        height: 20px;\\n        background: 'white';\\n        width: 2px;\\n        bottom: -5px;\\n        pointer-events: none;\\n    }\\n\\n    .player-container .player-timeline-blueline {\\n        position: absolute;\\n        background: rgba(24, 121, 226, 0.7);\\n        height: inherit;\\n        pointer-events: none;\\n    }\\n\\n    .player-container .player-timeline-slider {\\n        position: absolute;\\n        top: -5px;\\n        bottom: -5px;\\n        background: white;\\n        box-sizing: content-box;\\n        padding:0 4px;\\n        width: 4px;\\n        transform:translateX(-6px);\\n    }\", \"\"]);\n\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Track from './Track';\nexport default class VTrack extends Track {\n    // 2550102203-51349077821394-1567049495368-0.mp4\n    constructor(params) {\n        super();\n        this.params = params;\n        this.offsetBegin = 0;\n        this.offsetEnd = 0;\n        this.waitingForData = true;\n        const { type, url, timestamp } = params;\n        this.type = type;\n        this.timestamp = timestamp;\n        this.url = url;\n        this.state = 'init';\n        this.videoRef = document.createElement('video');\n        this.videoRef.oncanplay = () => {\n            this.waitingForData = false;\n            this.emit('canplay');\n        };\n        this.videoRef.onwaiting = () => {\n            this.waitingForData = true;\n            this.emit('waitingToPlay');\n        };\n    }\n    init(pipe) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (pipe) {\n                yield pipe;\n            }\n            console.log('init video track');\n            let result = yield new Promise((res) => {\n                const videoRef = this.videoRef;\n                videoRef.src = this.url;\n                setSpecialCheck(videoRef);\n                videoRef.preload = 'metadata';\n                videoRef.onloadeddata = (ev) => {\n                    let duration = videoRef.duration;\n                    if (duration !== duration) {\n                        duration = Number.NEGATIVE_INFINITY;\n                    }\n                    else {\n                        duration = duration * 1000;\n                    }\n                    this.offsetEnd = this.offsetBegin + duration;\n                    videoRef.pause();\n                    this.state = 'ready';\n                    console.log('init video ready');\n                    res('ready');\n                };\n                videoRef.onerror = (ev) => {\n                    console.error(ev);\n                    res('error');\n                };\n            });\n            return result;\n        });\n    }\n    doSetTrack(time, forward, jumpTo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (jumpTo) {\n                this.setVideoTime(time);\n            }\n        });\n    }\n    showTrackCb(dom) {\n        if (!dom)\n            return;\n        if (!findVideoRefInContainer(dom)) {\n            dom.appendChild(this.videoRef);\n        }\n    }\n    hideTrackCb() {\n        if (this.videoRef) {\n            this.videoRef.pause();\n        }\n    }\n    setPlaySpeed(speed) {\n        if (this.videoRef) {\n            this.videoRef.playbackRate = speed;\n        }\n    }\n    pause() {\n        if (this.videoRef) {\n            this.videoRef.pause();\n        }\n    }\n    play() {\n        if (this.videoRef && this.state === 'playing') {\n            this.videoRef.play();\n        }\n        else {\n            this.videoRef.pause();\n        }\n    }\n    setVideoTime(time) {\n        this.videoRef.currentTime = (time - this.offsetBegin) / 1000;\n    }\n    isWaiting(time) {\n        if (time < this.offsetBegin || time > this.offsetEnd) {\n            return false;\n        }\n        else {\n            return this.waitingForData;\n        }\n    }\n}\nconst setSpecialCheck = (el) => {\n    el.setAttribute('data-x-4wb', 'true');\n    el.setAttribute('playsinline', 'playsinline');\n    el.setAttribute('webkit-playsinline', 'webkit-playsinline');\n};\nconst specialCheck = (el) => el.getAttribute('data-x-4wb') === 'true';\nconst findVideoRefInContainer = (dom) => {\n    if (dom.children.length > 0) {\n        for (let i = 0, len = dom.children.length; i < len; i++) {\n            let el = dom.children[i];\n            if (el.tagName.toLowerCase() === 'video' && specialCheck(el)) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport Record from './Record';\nimport { CalibrateAction } from '../../../src/core/Actions';\nimport { WActions } from '../../../src/core/Itypes';\nimport WorkerManager from '../../../src/core';\nimport WTrack from './WhiteboardTrack';\n/**\n * 白板1.0， 2.0\n */\nexport default class V1V2Track extends WTrack {\n    constructor(params, opt) {\n        super(params, opt);\n        this.params = params;\n        this.drawManager = null;\n        this.records = [];\n    }\n    get isCompatible() {\n        return this.opt.version === '1.0';\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const [state, dataList] = yield this.fetchData();\n            console.log('init ', state, dataList);\n            if (state === 'error') {\n                this.state = 'error';\n                return 'error';\n            }\n            else {\n                let result = [];\n                if (this.isCompatible) {\n                    /**\n                     * 紧急修复：修复白板1.0由于缺少画布设置同步的命令，导致无法绘制的缺陷\n                     */\n                    result.push(new Record(10, '16:{\"mode\"¦\"draw\"，\"tool\"¦\"flag\"，\"size\"¦1，\"color\"¦\"#000000\"，\"fontsize\"¦24};', false));\n                    result.push(new Record(20, '16:{\"color\"¦\"#000\"};16:{\"size\"¦1};', false));\n                    result.push(new Record(30, '16:{\"ownerCanvasHeight\"¦1000，\"ownerCanvasWidth\"¦1300};', false));\n                }\n                dataList.forEach(data => {\n                    result.push(new Record(data.time, data.str, this.isCompatible));\n                });\n                if (this.isCompatible) {\n                    if (result.length) {\n                        optimizeOldRecordList(result);\n                    }\n                }\n                this.records = result;\n                this.state = 'ready';\n                return 'ready';\n            }\n        });\n    }\n    doSetTrack(time, forward, jumpTo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const nextRecordIndex = forward ? this.nextRecordIndex : 0;\n            if (nextRecordIndex === 0) {\n                console.warn('seek back', time, jumpTo, nextRecordIndex);\n            }\n            if (this.records.length && this.drawManager) {\n                let needSkipFirstCleanFrame = false; // 第一次的动作是否需要跳过\n                // 先取出中间所有的动作\n                let endIndex = findIndexBeyondTime(this.records, time, this.offsetBegin, nextRecordIndex);\n                let recordsToExecute = this.records.slice(nextRecordIndex, endIndex);\n                // 在执行前更新索引，防止executeAction出错后，卡死在这里\n                this.nextRecordIndex = endIndex;\n                if (jumpTo) {\n                    const res = mangleRecords(recordsToExecute);\n                    recordsToExecute = res.recordsToExecute;\n                    needSkipFirstCleanFrame = res.needSkipFirstCleanFrame;\n                }\n                if (recordsToExecute.length) {\n                    //等于0时，是向后seekTo，需要清空画布重新绘制\n                    if (nextRecordIndex === 0) {\n                        const { account } = this.params;\n                        this.drawManager.clear(account);\n                        this.drawManager.clearImage();\n                        this.drawManager.clearHtmlFile();\n                        this.drawManager.resetState();\n                    }\n                    executeActions(recordsToExecute, needSkipFirstCleanFrame, this.drawManager, this.params.account);\n                }\n                if (this.nextRecordIndex === this.records.length) {\n                    yield this.hideTrack();\n                }\n            }\n            else {\n                // 这个没有解析出轨道出来，那就直接结束\n                yield this.hideTrack();\n            }\n        });\n    }\n    showTrackCb(el) {\n        if (el && !this.drawManager) {\n            this.drawManager = new WorkerManager(el);\n        }\n    }\n}\nfunction optimizeOldRecordList(list) {\n    if (!list)\n        return [];\n    if (list.length === 0)\n        return list;\n    // 状态机标记位有，\n    let lastColor;\n    let lastTool = 'flag';\n    for (let i = 0, leng = list.length; i < leng; i++) {\n        let curRecord = list[i];\n        let actions = curRecord.actions;\n        for (let j = 0; j < actions.length;) {\n            let action = actions[j];\n            switch (action.TYPE) {\n                case WActions.CALIBRATE: {\n                    const { color } = action;\n                    if (color) {\n                        if (color === lastColor) {\n                            actions.splice(j, 1);\n                            continue;\n                        }\n                        else {\n                            lastColor = color;\n                        }\n                    }\n                    j++;\n                    continue;\n                }\n                case WActions.START: {\n                    if (lastTool === 'flag') {\n                        lastTool = 'free';\n                        console.log('deleted');\n                        actions.splice(j, 0, new CalibrateAction({ tool: 'free' }));\n                        ++j;\n                    }\n                    ++j;\n                    continue;\n                }\n                case WActions.LASER_PEN: {\n                    if (lastTool === 'free') {\n                        lastTool = 'flag';\n                        console.log('insert flage');\n                        actions.splice(j, 0, new CalibrateAction({ tool: 'flag' }));\n                        ++j;\n                    }\n                    ++j;\n                    continue;\n                }\n                case WActions.LASER_PEN_END: {\n                    ++j;\n                }\n                default: {\n                    ++j;\n                }\n            }\n        }\n    }\n    list.forEach(r => r.updateIndex());\n}\n/**\n * records按时间升序排列。\n * 从startIndex开始，寻找第一个时间大于time的Record的索引\n * 若records中时间都小于time，则返回records的长度\n * @param records\n * @param time\n * @param startIndex\n */\nfunction findIndexBeyondTime(records, time, offsetBeing, startIndex = 0) {\n    let endIndex = startIndex;\n    for (; endIndex < records.length; endIndex++) {\n        const record = records[endIndex];\n        if (record.time + offsetBeing > time) {\n            return endIndex;\n        }\n    }\n    return endIndex;\n}\nfunction mangleRecords(recordsToExecute) {\n    let needSkipFirstCleanFrame = false;\n    // 如果是快进的播放流程，需要对中间的动作进行处理\n    // 如果有关键帧,需要将关键帧之前的其他动作全部清除，只保留状态相关的动作\n    let lastClearFrameIndex = recordsToExecute.length;\n    while (lastClearFrameIndex--) {\n        let record = recordsToExecute[lastClearFrameIndex];\n        if (record.isClearFrame) {\n            break;\n        }\n    }\n    if (lastClearFrameIndex !== -1) {\n        //找到关键帧， 对关键帧之前的Record进行清洗\n        for (let i = 0; i < lastClearFrameIndex; i++) {\n            let recordToClean = recordsToExecute[i];\n            recordsToExecute[i] = recordToClean.toStateRelatedRecord();\n        }\n        needSkipFirstCleanFrame = true;\n        // 过滤掉没有任何数据的记录\n        recordsToExecute = recordsToExecute.filter(record => record.actions.length !== 0);\n    }\n    return {\n        needSkipFirstCleanFrame,\n        recordsToExecute\n    };\n}\nfunction executeActions(recordsToExecute, needSkipFirstCleanFrame, drawManager, account) {\n    var recordsToExecute_1, recordsToExecute_1_1;\n    var e_1, _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            try {\n                for (recordsToExecute_1 = __asyncValues(recordsToExecute); recordsToExecute_1_1 = yield recordsToExecute_1.next(), !recordsToExecute_1_1.done;) {\n                    let record = recordsToExecute_1_1.value;\n                    if (record.isClearFrame && needSkipFirstCleanFrame) {\n                        // 跳过其他的动作，直接执行到第一个清除\n                        let { actions, clearIndex } = record;\n                        yield drawManager.executeActions(account, actions.slice(clearIndex[0]));\n                        needSkipFirstCleanFrame = false;\n                    }\n                    else {\n                        yield drawManager.executeActions(account, record.actions);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (recordsToExecute_1_1 && !recordsToExecute_1_1.done && (_a = recordsToExecute_1.return)) yield _a.call(recordsToExecute_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n    });\n}\n","import { WActions, StateRelatedActions } from \"../../../src/core/Itypes\";\nimport * as ActionUtilsOld from '../../../src/core/ActionUtils.old';\nimport * as ActionUtils from '../../../src/core/ActionUtils';\nexport default class Record {\n    constructor(time, data, isCompatible) {\n        this.time = time;\n        this.isCompatible = isCompatible;\n        if (typeof data === 'string') {\n            this.data = data;\n            if (isCompatible) {\n                this.actions = ActionUtilsOld.unpackBulk(data);\n            }\n            else {\n                this.actions = ActionUtils.unpackBulk(data);\n            }\n        }\n        else {\n            this.data = '';\n            this.actions = data;\n        }\n        this.clearIndex = [];\n        this.isClearFrame = false;\n        this.updateIndex();\n    }\n    ;\n    updateIndex() {\n        this.clearIndex = this.actions.reduce((ret, action, curIndex) => {\n            if (action.TYPE === WActions.CLEAR) {\n                ret.push(curIndex);\n            }\n            return ret;\n        }, []);\n        this.isClearFrame = this.clearIndex.length !== 0;\n    }\n    getStateRelatedActions() {\n        return this.actions.filter(action => StateRelatedActions.indexOf(action.TYPE) > -1);\n    }\n    toStateRelatedRecord() {\n        return new Record(this.time, this.getStateRelatedActions(), this.isCompatible);\n    }\n}\n","import logger from \"../debug\";\nimport { StartAction, MoveAction, EndAction, ClearAckAction, LaserPenAction, LaserPenEndAction, RevokeAction, SerialAction, ClearAction, FileAction, CalibrateAction, SyncRequestAction, SyncPrepareAction, SyncPrepareAckAction } from \"./Actions\";\n/**\n *  这个文件是新白板的录制回放，需要播放以前录制的白板文件，所以需要兼容老旧的第一版协议,来适配新版本.\n *\n */\n/**\n * 老版本不需要发松消息，如果想做兼容的，所以这个没什么用\n */\nexport function packBulk(anyActions) {\n    let str = anyActions.map(anyAction => pack(anyAction)).join(';') + ';';\n    logger.m.syncmanager('packBulk anyAction', str);\n    return str;\n}\n/**\n * 老版本不需要发松消息，如果想做兼容的，所以这个没什么用\n */\nexport function pack(anyAction, isP2P) {\n    logger.m.syncmanager('pack anyAction', anyAction);\n    console.assert(anyAction.action !== undefined, 'ooops');\n    let { action } = anyAction;\n    let str = action.toString();\n    return str;\n}\nexport function unpackBulk(data) {\n    var actions = [];\n    const ops = data.split(';');\n    ops.forEach(op => {\n        const action = unpack(op);\n        if (action) {\n            if (Array.isArray(action)) {\n                while (action.length) {\n                    let tmp = action.shift();\n                    if (tmp) {\n                        actions.push(tmp);\n                    }\n                }\n            }\n            else {\n                actions.push(action);\n            }\n        }\n    });\n    return actions;\n}\nexport function unpack(data) {\n    if (!data) {\n        return;\n    }\n    const actionIndex = data.indexOf(':');\n    logger.m.syncmanager('unpack command ', data);\n    let action;\n    let valueStr;\n    if (actionIndex == -1) {\n        action = +data;\n        valueStr = '';\n    }\n    else {\n        action = +(data.slice(0, actionIndex));\n        valueStr = data.slice(actionIndex + 1, data.length);\n    }\n    let value = valueStr.length > 1 ? valueStr.split(',') : [];\n    logger.command('unpack', data);\n    switch (action) {\n        case 1 /* START */: {\n            let ret = [new StartAction(+value[0], +value[1])];\n            if (value[2]) {\n                ret.unshift(new CalibrateAction({ color: formatColor(value[2]) }));\n            }\n            return ret;\n        }\n        case 2 /* MOVE */: {\n            let ret = [new MoveAction(+value[0], +value[1])];\n            if (value[2]) {\n                ret.unshift(new CalibrateAction({ color: formatColor(value[2]) }));\n            }\n            return ret;\n        }\n        case 3 /* END */: {\n            let ret = [new EndAction(+value[0], +value[1])];\n            if (value[2]) {\n                ret.unshift(new CalibrateAction({ color: formatColor(value[2]) }));\n            }\n            return ret;\n        }\n        case 12 /* LASER_PEN */: {\n            return new LaserPenAction(+value[0], +value[1]);\n        }\n        case 13 /* LASER_PEN_END */:\n            return new LaserPenEndAction();\n        case 4 /* REVOKE */:\n            return new RevokeAction();\n        case 5 /* SERIAL */:\n            return new SerialAction();\n        case 6 /* CLEAR */:\n            return new ClearAction();\n        case 7 /* CLEAR_ACK */:\n            return new ClearAckAction();\n        case 8 /* SYNC_REQUEST */:\n            return new SyncRequestAction(); // TODO\n        case 9 /* SYNC */:\n            console.warn('收到了同步指令，未做兼容，请联系云信技术支持');\n            return undefined;\n        // return {\n        //   action: action,\n        //   sync: {\n        //     account: value[0],\n        //     dataMap: {},\n        //     all: value[1] as '0' | '1',\n        //     index: +value[2],\n        //     num: +value[3]\n        //   }\n        // }\n        case 10 /* SYNC_PREPARE */:\n            return new SyncPrepareAction();\n        case 11 /* SYNC_PREPARE_ACK */:\n            return new SyncPrepareAckAction();\n        case 14 /* FILE */:\n            return new FileAction({\n                docId: value[0],\n                currentPage: +value[1],\n                pageCount: +value[2],\n                type: value[2] == '0' ? 'clear' : 'img'\n            });\n        // return {\n        //   action: action,\n        //   file: {\n        //     docId: value[0] || '',\n        //     currentPage: value[1] || '',\n        //     pageCount: value[2] || '',\n        //     type: value[3] === '0' ? 'img' : (value[3] === '1' ? 'h5' : ''),\n        //     url: value[4] || '',\n        //     urlStr: value[5] || '',\n        //     h5Cmd: value[6] || ''\n        //   }\n        // }\n        // case OLD_ACTION.REDO:\n        //   return RedoAction.fromString(valueStr)\n        // case OLD_ACTION.CALIBRATE:\n        //   return CalibrateAction.fromString(valueStr)\n        // case OLD_ACTION.TEXT:\n        //   return TextAction.fromString(valueStr)\n        default:\n            const fullCaseChecker = action;\n    }\n}\nexport function formatColor(color, format = 16) {\n    if (!color)\n        return -1;\n    let res = '';\n    if (format === 16) {\n        color = +color;\n        if (color < 0) {\n            res = hex2rgb(color);\n            console.log('hex2rgb', color, res);\n            return res;\n        }\n        res = color.toString(16);\n        if (res.length < 3) {\n            res = ('000' + res).slice(-3);\n        }\n        if (res.length > 3 && res.length < 6) {\n            res = ('000' + res).slice(-6);\n        }\n        res = '#' + res;\n        //console.log('formatColor 16', color, res)\n        return res;\n    }\n    else if (format === 10) {\n        res = color.replace(/#/gi, '');\n        res = parseInt('0x' + res);\n        //console.log('formatColor 10', color, res)\n        return isNaN(res) ? -1 : res;\n    }\n}\n// rgba转rgb\nexport function hex2rgb(val) {\n    // return '#' + (0x00FFFFFF & val)\n    let alpha = (val >> 24) & 0xff;\n    let red = (val >> 16) & 0xff;\n    let green = (val >> 8) & 0xff;\n    let blue = val & 0xff;\n    red = red.toString(16);\n    green = green.toString(16);\n    blue = blue.toString(16);\n    console.log('rgb', red, green, blue);\n    return ('#' +\n        ('0' + red).slice(-2) +\n        ('0' + green).slice(-2) +\n        ('0' + blue).slice(-2));\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.format(...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.replace(/\\s*\\n\\s*/g, ' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","exports.isatty = function () { return false; };\n\nfunction ReadStream() {\n  throw new Error('tty.ReadStream is not implemented');\n}\nexports.ReadStream = ReadStream;\n\nfunction WriteStream() {\n  throw new Error('tty.ReadStream is not implemented');\n}\nexports.WriteStream = WriteStream;\n","'use strict';\nmodule.exports = {\n\tstdout: false,\n\tstderr: false\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nimport createDebug from 'debug';\nimport EventEmitter from 'eventemitter3';\nimport pako from 'pako';\nimport logger from '../debug';\nimport Simulator from '../simulator';\nimport SyncManager from './ActionManager';\nimport { CalibrateAction, FileAction, SerialAction, VersionAction } from './Actions';\nimport * as ActionUtils from './ActionUtils';\nimport AdapterDraw from './adapterDraw';\nimport { WActions } from './Itypes';\nimport globalHub from './Model/GlobalHub';\nimport * as utils from './utils';\nimport { getKiloBytes, sleep } from './utils';\nconst logData = createDebug('data');\nconst fileTypeMap = {\n    '10': 'jpg',\n    '11': 'png',\n    '0': 'unknown'\n};\nconst toKB = (data) => getKiloBytes(data).toFixed(2) + 'KB';\nconst ungzip = (gziped) => {\n    let gzipedSize = gziped.length;\n    let data = pako.ungzip(gziped, { to: 'string' });\n    console.debug(`GZIP数据大小:${toKB(gzipedSize)},原始数据大小：${toKB(data)}，压缩比率为 ${(gzipedSize * 100 / data.length).toFixed(2)}%`);\n    return data;\n};\nexport default class WorkerManager extends EventEmitter {\n    constructor(container, opt = {}) {\n        super();\n        this.afterInit = () => {\n            this.state = 'inited';\n            this.syncManager.send({\n                toAccount: 0, actions: [\n                    {\n                        action: new VersionAction({\n                            ver: 1.0, account: this.account,\n                            gzip: true\n                        })\n                    }\n                ]\n            });\n            this.emit('inited');\n        };\n        this.afterSync = (snapshot) => {\n            this.syncState = 'done';\n            this.flushInCommingQueue();\n            this.emit('afterSync', snapshot);\n        };\n        this.readyToSyncData = () => {\n            if (this.identity === 'owner') {\n                this.syncState = 'begin';\n                this.syncBegin();\n            }\n            if (this.identity === 'normal') {\n                this.syncState = 'waiting';\n                this.syncRequest(this.ownerAccount); // 不是 owner 则向 owner 请求同步\n            }\n        };\n        this.onIframeMessage = (event) => {\n            logger.h5('onIframeMessage', event.data);\n            const data = event.data || {};\n            if (data.identity !== 'to_yunxin_wb') {\n                return;\n            }\n            let fileData = this.syncManager.fileData;\n            if (fileData) {\n                const currentFile = Object.assign({}, fileData);\n                let { page, anim, trigger, time } = data;\n                const isBack = data.isBack ? '1' : '0';\n                time = '0';\n                const h5Cmd = [page, anim, trigger, isBack, time].join('&');\n                console.warn('onIframeMessage');\n                console.warn(h5Cmd, currentFile.h5Cmd);\n                if (parseInt(page) === 0) {\n                    return;\n                }\n                if (currentFile.h5Cmd === h5Cmd) {\n                    console.warn('the same cmd');\n                }\n                if (currentFile.currentPage != page) { // page 不一样了，通过上下步翻页了，清空\n                    this.drawAdapter.clear();\n                }\n                currentFile.currentPage = parseInt(page);\n                currentFile.h5Cmd = h5Cmd;\n                logger.h5('onIframeMessage->emit action', event.data);\n                // setTimeout(() => {\n                //   this.pagedHtmlFile([page, anim, trigger, isBack, time])\n                // })\n                this.drawAdapter.worker.emitAction({\n                    account: this.account,\n                    action: new FileAction(currentFile)\n                });\n            }\n        };\n        this.simulator = new Simulator(this);\n        this.container = container;\n        this.opt = opt;\n        this.account = opt.account;\n        this.nim = opt.nim;\n        this.identity = opt.identity;\n        this.ownerAccount = opt.ownerAccount;\n        this.connector = opt.whiteboard;\n        this.incommingQueue = [];\n        this.actionProcessing = false;\n        console.log('init wb adapter');\n        // Model层 负责数据的存储与发送\n        this.syncManager = new SyncManager(this.account);\n        this.syncManager.on('flush', (data) => {\n            if (this.connector && this.connector.sendData) {\n                // this.emit('data', data) // 抛出给外部，看有没有必要\n                this.connector.sendData(data);\n            }\n        });\n        this.fileMap = {};\n        this.eventHub = globalHub;\n        // 当前状态\n        this.state = 'created';\n        this.syncState = 'inited';\n        // View层 负责绘制\n        this.drawAdapter = new AdapterDraw(container, this.opt);\n        this.drawAdapter.on('inited', this.afterInit);\n        this.drawAdapter.on('action', (anyAction) => {\n            console.log('syncState', this.syncState);\n            if (this.syncState !== 'waiting') { // 如果是在同步等待中，则不会发出请求\n                this.syncManager.broadcastAction(anyAction);\n            }\n        });\n        this.drawAdapter.on('instantAction', (anyAction) => {\n            console.warn('instant action', this.syncState);\n            if (this.syncState !== 'waiting') { // 如果是在同步等待中，则不会发出请求\n                setTimeout(() => {\n                    this.syncManager.send({ toAccount: 0, actions: [anyAction] }, 1);\n                });\n            }\n        });\n        this.connectorStatus = 'off'; // TODO: connector的状态监控\n        if (this.connector) {\n            // connector的事件绑定\n            this.connector.on('data', (obj) => {\n                this.execute(obj);\n            });\n            this.connector.on('joinChannel', (obj) => {\n                console.log('join channel ', obj);\n                if (obj.account === this.opt.ownerAccount) {\n                    // 说明房间的房主已经重新加入房间了，如果当前状态是waiting，需要将状态重置\n                    if (this.syncState === 'waiting') {\n                        this.syncState = 'done';\n                        this.flushInCommingQueue();\n                    }\n                }\n                // 每当有新用户加入的时候，看起来我们需要重制用户的状态，其实不用重制的，只需要保证用户上线之后，会广播一次自己当前的状态就可以了\n                // if (userManager.hasUser(obj.account)) {\n                //   let user = userManager.getUser(obj.account);\n                //   if (user) {\n                //     user.reset()\n                //   }\n                // }\n            });\n        }\n        this.timmer = setInterval(() => {\n            // 为了防止incommingQueue由于消息中断，或者其他原因，阻塞页面，所以需要设置超时20秒后，就抛弃一些数据，继续执行其他步骤\n            // TODO\n        }, 100);\n    }\n    // 该方法接收上层的数据包\n    /**\n     * 当 ignoreQueue 为false时\n     * 收到的普通数据，直接会通过并执行这个函数，不会推入消息队列。\n     * 收到的GZIP数据，如果长度为1，会解压后当作普通数据处理，直接执行这个普通消息。\n     * 收到的GZIP数据，如果长度不为1，会加入到消息队列中；\n     *    如果此时，队列里的GZIP数据不满足执行条件，会跳过本次执行。\n     *    如果此时队列里的GZIP数据满足执行条件，会调用[清空消息队列]函数，并跳过本次执行\n     * 如果普通数据长度为0，将会跳过本次执行。\n     * 如果当前状态为正在处理消息队列中，无论队列是否为空，都需要推入消息队列。\n     * 如果当前状态没有在处理消息队列，但是消息队列不为空，需要推入消息队列。\n     * @param param0\n     * @param enqueueIfNeeded 是否需要排队，默认状态下，如果incommings队列不为空，所有的消息都要推入这个队列。\n     */\n    execute({ account, data }) {\n        if (!account || !data || account === this.account)\n            return;\n        // 消息队列里的文件格式\n        let qactions;\n        let qid;\n        let qtype;\n        // 辅助信息\n        let alreadyInMessageQueue = false;\n        // fix 有时候data是数字类型的\n        if (typeof data === 'number') {\n            data = '' + data;\n        }\n        if (data.substr(0, 4) === 'GZIP') {\n            // GZIP 文件解析处理\n            let minimal = data.substr(5, 150); // 取一个小集合\n            let match1 = SyncManager.GZIP_TESTER_1.exec(minimal);\n            if (match1) {\n                minimal = '';\n                const [fullText, id, length, index] = match1;\n                qid = id;\n                qtype = 'gzip';\n                let gziped = data.substr(5 + fullText.length);\n                if (length === '1') {\n                    // 如果只有一条消息\n                    data = ungzip(gziped);\n                    qactions = ActionUtils.unpackBulk(data);\n                }\n                else {\n                    // 如果有多条消息，需要阻塞然后等到所有消息都收到后才继续\n                    let incomming = this.incommingQueue.find(x => x.id === id);\n                    if (!incomming) {\n                        // 队列中没有找到这个gzip包,就推入队列中去\n                        let _gzipArr = new Array(+length);\n                        _gzipArr[+index] = gziped;\n                        incomming = {\n                            account, type: qtype, id: qid,\n                            total: +length, curLen: 1, data: _gzipArr, result: [new SerialAction()]\n                        };\n                        this.incommingQueue.push(incomming);\n                        return; // 跳过，数据不完整\n                    }\n                    else {\n                        // 队列中找到这个gzip包\n                        incomming.curLen++;\n                        incomming.data[+index] = gziped;\n                        if (incomming.total === incomming.curLen) {\n                            // 说明所有的数据都已经齐全了\n                            // 如果在第一位，就可以执行下去了\n                            const unzipedText = ungzip(incomming.data.join(''));\n                            qactions = ActionUtils.unpackBulk(unzipedText);\n                            incomming.result = qactions;\n                            alreadyInMessageQueue = true;\n                        }\n                        else {\n                            return; // 跳过，数据不完整\n                        }\n                    }\n                }\n            }\n            else {\n                // 没有匹配到GZIP\n                console.error('未匹配到GZIP压缩格式', data);\n                return;\n            }\n        }\n        else {\n            // 普通文字消息的处理,判断是否需要推入队列\n            qactions = ActionUtils.unpackBulk(data);\n            qid = '' + Date.now() + Math.random();\n            qtype = 'text';\n        }\n        const queueIndex = alreadyInMessageQueue ? this.incommingQueue.findIndex(x => x.id === qid) : -1;\n        // 检测是否有同步消息,或者同步准备syncPrepare，如果有的话，就会优先执行\n        let vipActionIndex = qactions.findIndex(x => x.TYPE === WActions.SYNC || x.TYPE === WActions.SYNC_PREPARE);\n        if (vipActionIndex > -1) {\n            let vipAction = qactions[vipActionIndex];\n            if (vipAction.TYPE === WActions.SYNC) {\n                this.handleSyncAction(vipAction);\n            }\n            else {\n                this.executeActions(account, qactions);\n            }\n            // 注意！约定同步消息是单独一次性发出的，所以qactions的长度只有一个，所以后续操作可以忽略了。\n            return;\n        }\n        // 检测是否有syncPrepare消息，如果有的话，优先执行\n        if (this.syncState === 'waiting' || this.actionProcessing) {\n            // 当学生端在同步等待的时候，消息必须需要推入队列里。\n            // 当消息队列正在被处理的时候，消息必须需要推入队列。\n            // 如果消息队列里有数据，说明有消息阻塞了，新来的消息需要推入队列\n            if (!alreadyInMessageQueue) {\n                this.incommingQueue.push({\n                    account,\n                    type: qtype,\n                    id: qid,\n                    total: 1, curLen: 1, data: [],\n                    result: qactions\n                });\n            }\n        }\n        else if (this.incommingQueue.length == 0) {\n            // 如果不是等待状态，队列消息也没有处理中，消息队列的长度也为空，所以当前动作可以执行\n            logger.m.worker('execute:', account, qactions);\n            this.executeActions(account, qactions);\n        }\n        else {\n            // 如果不是等待状态，消息队列也没有在处理中，消息队列的长度不为空，\n            if (queueIndex === 0) {\n                // 如果当前消息是阻塞消息队列的原因的话，就批处理消息队列\n                this.flushInCommingQueue();\n            }\n            else {\n                // 如果当前消息不是阻塞消息队列的原因，那也推入队列里\n                if (!alreadyInMessageQueue) {\n                    this.incommingQueue.push({\n                        account,\n                        type: qtype,\n                        id: qid,\n                        total: 1, curLen: 1, data: [],\n                        result: qactions\n                    });\n                }\n            }\n        }\n    }\n    executeActions(account, actions) {\n        var actions_1, actions_1_1;\n        var e_1, _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { drawAdapter } = this;\n            try {\n                for (actions_1 = __asyncValues(actions); actions_1_1 = yield actions_1.next(), !actions_1_1.done;) {\n                    let action = actions_1_1.value;\n                    switch (action.TYPE) {\n                        case WActions.REVOKE:\n                        case WActions.REDO:\n                        case WActions.CALIBRATE:\n                        case WActions.TEXT:\n                        case WActions.START:\n                        case WActions.MOVE:\n                        case WActions.END:\n                        case WActions.LASER_PEN:\n                        case WActions.LASER_PEN_END:\n                            {\n                                drawAdapter.act(account, action);\n                                break;\n                            }\n                        case WActions.SERIAL:\n                            console.log('serial:', action);\n                            break;\n                        case WActions.CLEAR: {\n                            this.syncManager.clear();\n                            this.syncManager.makeClearAck(account);\n                            drawAdapter.clear(action.accounts, account, { force: this.ownerAccount === account, quiet: true });\n                            break;\n                        }\n                        case WActions.CLEAR_ACK: {\n                            // this.syncManager.clearCache(account)\n                            drawAdapter.act(account, action);\n                            break;\n                        }\n                        case WActions.SYNC_REQUEST: {\n                            console.warn('recive sync request from ', account);\n                            let snapshot = this.drawAdapter.worker.getSnapshot();\n                            this.syncManager.syncTo(account, snapshot);\n                            // drawAdapter.act(account, action)  // 这里不需要执行\n                            break;\n                        }\n                        case WActions.SYNC: {\n                            console.warn('recive sync from ', account);\n                            let syncAction = action;\n                            yield this.handleSyncAction(syncAction);\n                            // drawAdapter.act(account, action) // 这里不需要执行\n                            break;\n                        }\n                        case WActions.SYNC_PREPARE: {\n                            console.warn('recive sync prepare from ', account);\n                            this.syncResponse(account);\n                            // drawAdapter.act(account, action) // 这里不需要执行\n                            break;\n                        }\n                        case WActions.SYNC_PREPARE_ACK: {\n                            console.warn('recive sync prepare ack from ', account);\n                            break;\n                        }\n                        case WActions.FILE: {\n                            if (action.TYPE === WActions.FILE) {\n                                const file = action.file;\n                                logger.h5('recive h5 FileAction', file);\n                                const { fileData } = this.syncManager;\n                                const currentFile = fileData && Object.assign({}, fileData);\n                                if (JSON.stringify(fileData) === JSON.stringify(file)) {\n                                    return console.warn('same file data');\n                                }\n                                // 收到的文件类型是图片类型\n                                if (file.type === 'img') {\n                                    // 如果当前已经有文件内容了\n                                    if (currentFile) {\n                                        if (currentFile.type === 'h5') {\n                                            // 不同类型，需要清空之前的H5\n                                            this.clearHtmlFile();\n                                        }\n                                        if (file.docId && file.docId == currentFile.docId) { // 节约资源值传送了必要信息\n                                            // 是相同的一个文件\n                                            currentFile.currentPage = parseInt('' + (file.currentPage || 1));\n                                            currentFile.url = currentFile.urlStr.replace('{index}', '' + file.currentPage);\n                                            this.image(currentFile, account);\n                                        }\n                                        // 合并更新\n                                        const [fileDataNext] = FileAction.immuteUpdate(currentFile, file);\n                                        this.syncManager.setFileData(fileDataNext);\n                                    }\n                                    else {\n                                        // 当前第一次收到这个类型的文件，直接更新\n                                        let fileNext;\n                                        if (this.opt.handleFile) {\n                                            fileNext = yield this.opt.handleFile(file.type, file);\n                                        }\n                                        else {\n                                            fileNext = file;\n                                        }\n                                        this.syncManager.setFileData(fileNext);\n                                        this.image(file, account);\n                                    }\n                                }\n                                else if (file.type === 'h5') {\n                                    // 如果是h5类型的文件\n                                    // this.clearImage(account)\n                                    logger.h5('current file', currentFile);\n                                    if (currentFile) {\n                                        if (currentFile.type == 'img') {\n                                            // 不同类型\n                                            this.clearImage(account);\n                                        }\n                                        if (file.docId && file.docId == currentFile.docId) {\n                                            // 是相同的一个文件\n                                            logger.h5('current file h5 cmd is ', currentFile.h5Cmd);\n                                            logger.h5('file h5 cmd is ', file.h5Cmd);\n                                            if (currentFile.h5Cmd !== file.h5Cmd) {\n                                                this.pagedHtmlFile(file.h5Cmd.split('&'));\n                                            }\n                                        }\n                                        else {\n                                            // 是不同文件\n                                            this.syncManager.setFileData(file);\n                                            this.setHtmlFile(file, account);\n                                            if (file.h5Cmd) { // 初次进入就有页面时 等 3s ppt载入和初始动画……\n                                                setTimeout(this.pagedHtmlFile.bind(this, file.h5Cmd.split('&')), 3000);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        // 当前第一次收到这个类型的文件，直接更新\n                                        this.syncManager.setFileData(file);\n                                        this.setHtmlFile(file, account);\n                                        if (file.h5Cmd) { // 初次进入就有页面时 等 3s ppt载入和初始动画……\n                                            setTimeout(this.pagedHtmlFile.bind(this, file.h5Cmd.split('&')), 3000);\n                                        }\n                                    }\n                                }\n                                else {\n                                    logger.h5('delete file', currentFile);\n                                    this.syncManager.setFileData(undefined);\n                                    if (currentFile) {\n                                        if (currentFile.type === 'img') {\n                                            this.clearImage(account);\n                                        }\n                                        else if (currentFile.type === 'h5') {\n                                            this.clearHtmlFile();\n                                        }\n                                    }\n                                }\n                                break;\n                            }\n                        }\n                        case WActions.VERSION: {\n                            if (action.TYPE === WActions.VERSION) {\n                                break;\n                            }\n                        }\n                        default:\n                            const fullCaseChecker = action.TYPE;\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (actions_1_1 && !actions_1_1.done && (_a = actions_1.return)) yield _a.call(actions_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n    flushInCommingQueue() {\n        var e_2, _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.syncState === 'waiting') {\n                return;\n            }\n            let { length } = this.incommingQueue;\n            while (length) {\n                this.actionProcessing = true;\n                const flushQueue = this.incommingQueue.slice();\n                let doneLen = 0;\n                let forceWaiting = false;\n                try {\n                    try {\n                        for (var flushQueue_1 = (e_2 = void 0, __asyncValues(flushQueue)), flushQueue_1_1; flushQueue_1_1 = yield flushQueue_1.next(), !flushQueue_1_1.done;) {\n                            let incomming = flushQueue_1_1.value;\n                            switch (incomming.type) {\n                                case 'text':\n                                case 'gzip':\n                                    if (incomming.total === incomming.curLen) {\n                                        doneLen++;\n                                        if (!incomming.dirty) {\n                                            yield this.executeActions(incomming.account, incomming.result);\n                                        }\n                                    }\n                                    else {\n                                        forceWaiting = true;\n                                        throw new Error('message need waiting!');\n                                    }\n                                    break;\n                                case 'function': {\n                                    break;\n                                }\n                                default:\n                                    const fullCaseChecker = incomming.type;\n                            }\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (flushQueue_1_1 && !flushQueue_1_1.done && (_a = flushQueue_1.return)) yield _a.call(flushQueue_1);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                finally {\n                    this.incommingQueue = this.incommingQueue.slice(doneLen, this.incommingQueue.length);\n                }\n                if (forceWaiting) {\n                    //  必须强制等待\n                    break;\n                }\n                else {\n                    length = this.incommingQueue.length;\n                }\n            }\n            this.actionProcessing = false;\n        });\n    }\n    destroy() {\n        this.drawAdapter && this.drawAdapter.destroy();\n        this.syncManager && this.syncManager.destroy();\n        this.eventHub.removeAllListeners();\n        ;\n        this.removeAllListeners();\n        // delete this.eventHub;\n        // delete this.drawAdapter\n        // delete this.syncManager\n    }\n    // 是否允许绘图操作\n    enableDraw(enable) {\n        if (this.state === 'inited') {\n            this.drawAdapter && this.drawAdapter.enableDraw(enable);\n        }\n        else {\n            console.warn('inited');\n        }\n    }\n    handleSyncAction(action) {\n        var e_3, _a, e_4, _b, e_5, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log(action);\n            let rawSnapshot;\n            let usersRaw;\n            //\n            // 先处理图层\n            //\n            const { shapes, users, transhShapes, file, canvasRatio, canvasHeight, canvasWidth, ownerWidth, ownerHeight } = action.sync;\n            const shapeQueue = shapes.slice();\n            // 将用户回收站的图层也填充进去。\n            const shapeGen = function () {\n                return __asyncGenerator(this, arguments, function* () {\n                    while (shapeQueue.length) {\n                        yield yield __await(shapeQueue.shift());\n                    }\n                });\n            };\n            // 调整当前画布的比例\n            let containerManager = this.drawAdapter.worker.container;\n            containerManager.canvasRatio = canvasRatio;\n            containerManager.resize();\n            // 更新房主的画板的大小\n            containerManager.updateCanvasPropSize(ownerWidth, canvasHeight);\n            let lastSleepTime = Date.now();\n            // 用户到默认状态\n            let currentUserDefaultState = this.drawAdapter.worker.localUser.getCalibrateAction();\n            const prevActionProcessing = this.actionProcessing;\n            this.actionProcessing = true;\n            // 如果有背景文件\n            if (file) {\n                this.executeActions(this.ownerAccount, [new FileAction(file)]);\n            }\n            try {\n                for (var _d = __asyncValues(shapeGen()), _e; _e = yield _d.next(), !_e.done;) {\n                    let shape = _e.value;\n                    if (!shape) {\n                        continue;\n                    }\n                    try {\n                        yield this.drawAdapter.worker.restoreShape(shape, false);\n                    }\n                    catch (error) {\n                        console.error(error);\n                    }\n                    // 异步执行停顿,防止websocket心跳超时\n                    let currentTime = Date.now();\n                    if (currentTime - lastSleepTime > 200) {\n                        yield sleep(30);\n                        lastSleepTime = Date.now();\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) yield _a.call(_d);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            // 重新渲染出所有图像\n            this.drawAdapter.worker.container.fullRender();\n            try {\n                // 将用户回收站里的数据还原\n                for (var users_1 = __asyncValues(users), users_1_1; users_1_1 = yield users_1.next(), !users_1_1.done;) {\n                    let user = users_1_1.value;\n                    if (user.recycle && user.recycle.length) {\n                        try {\n                            for (var _f = (e_5 = void 0, __asyncValues(user.recycle)), _g; _g = yield _f.next(), !_g.done;) {\n                                let shape = _g.value;\n                                try {\n                                    yield this.drawAdapter.worker.restoreShape(shape, true);\n                                }\n                                catch (error) {\n                                    console.error(error);\n                                }\n                                // 异步执行停顿,防止websocket心跳超时\n                                let currentTime = Date.now();\n                                if (currentTime - lastSleepTime > 200) {\n                                    yield sleep(30);\n                                    lastSleepTime = Date.now();\n                                }\n                            }\n                        }\n                        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n                        finally {\n                            try {\n                                if (_g && !_g.done && (_c = _f.return)) yield _c.call(_f);\n                            }\n                            finally { if (e_5) throw e_5.error; }\n                        }\n                    }\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (users_1_1 && !users_1_1.done && (_b = users_1.return)) yield _b.call(users_1);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n            // 需要对图层进行排序,但是现在好像不用手动操作，这里约定，用户回收站里的数据是等效的还原的\n            this.drawAdapter.worker.users.all.forEach(user => {\n                user.guessMyUndoCount();\n                user.emitUserShape();\n            });\n            //\n            // 最后将所有用户的状态校准一下\n            //\n            usersRaw = users.map(userSnapshot => {\n                const { account, calibrate } = userSnapshot;\n                let action = ActionUtils.unpack(calibrate.toString());\n                // 当前用户的状态不需要恢复老师端保存的状态\n                const notCurrentUser = account !== this.drawAdapter.worker.account;\n                if (notCurrentUser && action) {\n                    this.drawAdapter.act(account, action);\n                }\n                if (!notCurrentUser && action) {\n                    currentUserDefaultState = action;\n                }\n                return {\n                    account,\n                    calibrate: action\n                };\n            });\n            // 再还原当前用户的状态，避免刚才\n            this.drawAdapter.act(this.account, currentUserDefaultState);\n            // 同步自己的状态给其他用户\n            this.declareCalibrate(currentUserDefaultState);\n            rawSnapshot = {\n                users: usersRaw,\n                shapes: shapes,\n                transhShapes: transhShapes\n            };\n            this.actionProcessing = prevActionProcessing;\n            this.afterSync(rawSnapshot);\n        });\n    }\n    // 设置宽度\n    setSize(size, account) {\n        this.syncManager.pushQueue(0, {\n            action: new CalibrateAction({ size: size })\n        });\n        this.drawAdapter.setSize(size, account);\n    }\n    // 设置宽度\n    setFontsize(size, account) {\n        this.drawAdapter.setFontsize(size, account);\n    }\n    // 设置颜色\n    setColor(color, account) {\n        this.drawAdapter.setColor(color, account);\n    }\n    // 撤销操作\n    undo() {\n        return this.drawAdapter.undo();\n    }\n    // 重做操作\n    redo() {\n        return this.drawAdapter.redo();\n    }\n    // 清除画布\n    clear(account, actAccount, option) {\n        this.drawAdapter.clear(account, actAccount, option);\n    }\n    // 绘制图片\n    image(option, account) {\n        this.drawAdapter.image(option, account);\n    }\n    // 清除背景图\n    clearImage(account = this.account) {\n        this.clear();\n        this.drawAdapter.clearImage(account);\n    }\n    setHtmlFile(obj, account = this.account) {\n        logger.h5('setHtmlFile', obj);\n        const { paddingLeft, paddingTop, canvasHeight, canvasWidth } = this.drawAdapter.worker.container;\n        if (this.iframe) {\n            console.warn('已经有iframe了');\n            return;\n        }\n        const iframe = document.createElement('iframe');\n        iframe.src = obj.url;\n        iframe.scrolling = 'no';\n        iframe.name = 'nimHtmlFile';\n        iframe.frameBorder = '0';\n        iframe.style.position = 'absolute';\n        iframe.style.top = '' + paddingTop + 'px';\n        iframe.style.left = '' + paddingLeft + 'px';\n        iframe.style.zIndex = '1';\n        // iframe.style.right = '0'\n        // iframe.style.bottom = '0'\n        iframe.style.width = canvasWidth + 'px';\n        iframe.style.height = canvasHeight + 'px';\n        iframe.width = \"\" + canvasWidth;\n        iframe.height = '' + canvasHeight;\n        this.container.insertBefore(iframe, this.container.children[0]);\n        // 改变背景颜色，记得要改回来\n        this.drawAdapter.worker.container.displayCanvas.style.backgroundColor = 'transparent';\n        this.iframe = iframe;\n        window.addEventListener('message', this.onIframeMessage, false);\n        this.drawAdapter.worker.emitAction({\n            account: account,\n            action: new FileAction(obj)\n        });\n        this.syncManager.setFileData(obj);\n    }\n    pagedHtmlFile(arr) {\n        // debugger\n        logger.h5('pagedHtmlFile', arr);\n        const iframe = this.iframe;\n        if (iframe) {\n            try {\n                if (!iframe.contentWindow || (iframe.contentDocument && iframe.contentDocument.readyState !== 'complete')) {\n                    setTimeout(this.pagedHtmlFile.bind(this, arr), 800);\n                    return;\n                }\n            }\n            catch (e) {\n                console.error(e);\n                return false;\n            }\n            const data = {\n                identity: 'from_yunxin_wb',\n                page: parseInt(arr[0]),\n                anim: parseInt(arr[1]),\n                trigger: parseInt(arr[2]),\n                isBack: arr[3] == '1',\n                time: 0 //+arr[4]\n            };\n            //@ts-ignore\n            iframe.currentPage = parseInt(data.page);\n            let { page, anim, trigger, time, isBack } = data;\n            const h5Cmd = [page, anim, trigger, isBack, time].join('&');\n            console.warn('toPage');\n            console.warn(h5Cmd, this.syncManager.fileData && this.syncManager.fileData.h5Cmd);\n            logger.h5('toHtmlPage', data);\n            iframe.contentWindow.postMessage(data, '*');\n        }\n    }\n    toPageHtmlFile(direction, index, num) {\n        const iframe = this.iframe;\n        logger.h5('toPageHtmlFile', direction, index, num);\n        if (iframe) {\n            try {\n                if (!iframe.contentWindow || (iframe.contentDocument && iframe.contentDocument.readyState !== 'complete')) {\n                    return false;\n                }\n            }\n            catch (e) {\n                return false;\n            }\n            let data;\n            switch (direction) {\n                case 'leftEnd':\n                    data = {\n                        page: 0,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                case 'left':\n                    data = {\n                        page: index - 1,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                case 'up':\n                    data = { which: 37 };\n                    break;\n                case 'down':\n                    data = { which: 39 };\n                    break;\n                case 'right':\n                    data = {\n                        page: index,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                case 'rightEnd':\n                    data = {\n                        page: num - 1,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                default:\n                    console.warn('');\n            }\n            if (typeof data !== 'undefined') {\n                data.identity = 'from_yunxin_wb';\n                logger.h5('current file h5 cmd is ', this.syncManager.fileData && this.syncManager.fileData.h5Cmd);\n                logger.h5('toPageHtmlFile->post', data);\n                iframe.contentWindow.postMessage(data, '*');\n                //@ts-ignore\n                iframe.currentPage = parseInt(data.page);\n                //@ts-ignore\n                iframe.pageNum = num;\n            }\n            return true;\n        }\n    }\n    clearHtmlFile() {\n        this.clear();\n        logger.h5('clearHtmlFile');\n        if (!this.iframe || !this.container || (this.iframe && this.iframe.parentNode !== this.container)) {\n            return;\n        }\n        this.syncManager.setFileData(undefined);\n        window.removeEventListener('message', this.onIframeMessage, false);\n        this.container.removeChild(this.iframe);\n        this.drawAdapter.worker.container.displayCanvas.style.backgroundColor = '#ffffff';\n    }\n    _image(option, account = this.account) {\n        console.log('_image', option);\n        const { docId, currentPage } = option;\n        if (!docId || currentPage - 0 === 0) {\n            this.clearImage(account);\n            return;\n        }\n        const nim = this.nim;\n        const file = this.fileMap[docId];\n        if (!file && !nim)\n            return;\n        console.log('file!!!', file);\n        if (file) {\n            const url = `${file.prefix}_${file.type}_${currentPage}.${fileTypeMap[file.transType]}`;\n            // this.draw!.image(url, account)\n            // this.drawAdapter.image(url)\n            return;\n        }\n        const that = this;\n        if (!nim) {\n            console.warn('缺少nim实例，无法拉取文件');\n            return;\n        }\n        nim.getFile({\n            docId,\n            success: function (data) {\n                // console.log('getFile success', data)\n                that.fileMap[docId] = data;\n                that._image(option, account);\n            },\n            error: function (error) {\n                console.error('getFile error', error);\n            }\n        });\n    }\n    setContainer(container, opt) {\n        this.drawAdapter.setContainer(container, opt);\n    }\n    removeUser(account) {\n        account && this.drawAdapter.removeUser(account);\n    }\n    /**\n     * 等比例调整画布大小，\n     * @public\n     */\n    resize() {\n        this.drawAdapter.resize();\n    }\n    useTool(tool, account) {\n        this.drawAdapter.useTool(tool, account);\n    }\n    // 同步准备清空，主播重新登录聊天室后，广播该协议给其他人，其他人收到后进行本地清空\n    syncBegin() {\n        logger.m.worker('owner sync begin');\n        this.syncManager.clear();\n        this.syncManager.makeSyncPrepare();\n        this.clear();\n        this.clearImage();\n        this.syncState = 'done';\n        this.declareCalibrate(); // 将自己的状态广播一下\n        this.afterSync();\n    }\n    // 同步请求，非主播重新登录后发请求给主播\n    syncRequest(account) {\n        this.syncState = 'waiting';\n        logger.m.worker('sync request->', account);\n        this.syncManager.makeSyncRequest(account);\n    }\n    // 同步响应，主播重新登录后,非主播响应请求给主播\n    syncResponse(account) {\n        logger.m.worker('sync response->', account);\n        this.clear(undefined, account, { force: true });\n        this.clearHtmlFile();\n        this.clearImage(account);\n        this.syncManager.clear();\n        this.syncManager.makeSyncPrepareAck(account);\n        this.declareCalibrate(); // 将自己的状态更新一下\n    }\n    declareCalibrate(action) {\n        if (!action) {\n            let selfCalibrateAction = this.drawAdapter.worker.getSelfCalibrate();\n            if (selfCalibrateAction) {\n                action = selfCalibrateAction;\n            }\n        }\n        if (action) {\n            // 同步自己的当前状态过去\n            logger.m.worker('sync response calibrate->', action);\n            // 这里不需要等待，必须发送，防止被删除\n            this.syncManager.send({ toAccount: 0, actions: [{ action: action }] });\n        }\n        else {\n            console.warn('no self calibrate action');\n        }\n    }\n    /**\n     *  观众切换到互动者, 可以进行绘图操作\n     *  @method changeRoleToPlayer\n     *  @memberOf WhiteBoard#\n     *  @return {Promise}\n     */\n    changeRoleToPlayer() {\n        if (this.role === 0)\n            return Promise.resolve({ role: 'player' });\n        this.enableDraw(true);\n        this.role = 0;\n        return Promise.resolve({ role: 'player' });\n    }\n    /**\n     *  互动者切换到观众, 禁止绘图操作\n     *  @method changeRoleToAudience\n     *  @memberOf WhiteBoard#\n     *  @return {Promise}\n     */\n    changeRoleToAudience() {\n        if (this.role === 1)\n            return Promise.resolve({ role: 'audience' });\n        this.enableDraw(false);\n        // 这么写的目的: 切换观众前，如果是标记，先发一个标记结束的通知\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                this.role = 1;\n                resolve({ role: 'audience' });\n            }, 1000);\n        });\n    }\n    // 主要是给断线重连之后的房主重连房间后，重制状态\n    resetState() {\n        this.syncManager.clear();\n        const { users, container, shapes } = this.drawAdapter.worker;\n        users.all.forEach(user => {\n            user.clearShapes();\n        });\n        shapes.clear();\n        this.drawAdapter.worker.updateCursor();\n        users.removeOtherUsers();\n    }\n}\nWorkerManager.util = utils;\n","import Point from \"./core/Model/Point\";\nexport default class Simulator {\n    constructor(app) {\n        this.app = app;\n    }\n    freeDraw(times = 10, scale = 0.0003) {\n        this.app.useTool('free', this.app.account);\n        for (let i = 0; i < times; i++) {\n            const sx = Math.random();\n            const sy = Math.random();\n            const dx = Math.random() * scale;\n            const dy = Math.random() * scale;\n            this.app.drawAdapter.worker.mousedown(new Point(sx, sy), this.app.account);\n            this.app.drawAdapter.worker.mousemove(new Point(sx + dx, sy + dy), this.app.account);\n            this.app.drawAdapter.worker.mouseup(new Point(sx + dx, sy + dy), this.app.account);\n        }\n    }\n    rectDraw(times = 10, scale = 0.0003) {\n        this.app.useTool('rect', this.app.account);\n        for (let i = 0; i < times; i++) {\n            const sx = Math.random();\n            const sy = Math.random();\n            const dx = Math.random() * scale;\n            const dy = Math.random() * scale;\n            this.app.drawAdapter.worker.mousedown(new Point(sx, sy), this.app.account);\n            this.app.drawAdapter.worker.mousemove(new Point(sx + dx, sy + dy), this.app.account);\n            this.app.drawAdapter.worker.mouseup(new Point(sx + dx, sy + dy), this.app.account);\n        }\n    }\n}\n/**\n simulate mouse event in other products\nfunction mouseEventSimulate(canvas, x, y) {\n        let event = document.createEvent('MouseEvent')\n        event.initMouseEvent('mousedown', true, true, window, 0, event.screenX, event.screenY, x, y, false, false, false, false, 0, null)\n        canvas.dispatchEvent(event)\n\n        const dx = Math.random() * 30\n        const dy = Math.random() * 30\n\n        event = document.createEvent('MouseEvent')\n        event.initMouseEvent('mousemove', true, true, window, 0, event.screenX, event.screenY, x+dx, y+dy, false, false, false, false, 0, null)\n        canvas.dispatchEvent(event)\n\n        event = document.createEvent('MouseEvent')\n        event.initMouseEvent('mouseup', true, true, window, 0, event.screenX, event.screenY, x+dx, y+dy, false, false, false, false, 0, null)\n        canvas.dispatchEvent(event)\n    }\n\n    function multipleMouseSimulate(canvas, count, range=1000) {\n        for (let i = 0; i < count; i++) {\n            const sx = 100 + Math.random() * range\n            const sy = 100 + Math.random() * range\n            this.mouseEventSimulate(canvas, sx, sy)\n        }\n    }\n\n    //netless\n    whiteboard_div = document.getElementsByClassName('tx_board_canvas_wrap')\n    multipleMouseSimulate(whiteboard_div[0], 10, 100)\n\n    //tencent board\n    whiteboard_div = document.getElementsByClassName('tx_board_canvas_box')\n    multipleMouseSimulate(whiteboard_div[0], 10, 100)\n */ \n","import { WActions } from './Itypes';\nimport { ClearAckAction, SyncPrepareAction, SyncRequestAction, SyncPrepareAckAction, SyncAction } from './Actions';\nimport logger from '../debug';\nimport EventEmitter from 'eventemitter3';\nimport * as ActionUtils from './ActionUtils';\nimport { getKiloBytes } from './utils';\nimport pako from 'pako';\nimport globalHub from './Model/GlobalHub';\n/**\n *  在WebSocket里传输的是Command, 白板内使用的是Action\n */\nwindow.pako = pako;\nexport default class SyncManager extends EventEmitter {\n    constructor(account) {\n        super();\n        /**\n         * 是广播消息给所有用户吗？？ 不太确定。account === 0的时候表示发送给所有用户么？\n         *\n         * 文件动作如果是重复文件，则不重复推送\n         *\n         * @param anyAction\n         */\n        this.broadcastAction = (anyAction) => {\n            // 广播消息前 预处理一些数据\n            let action = anyAction.action;\n            if (action.TYPE === WActions.FILE) {\n                let fileAction = action;\n                let { file } = fileAction;\n                console.log(file);\n                const isSameDoc = this.fileData && file.docId && file.docId === this.fileData.docId;\n                if (this.fileData && JSON.stringify(file) === JSON.stringify(this.fileData)) {\n                    return; // 如果两次文件相同，就不推入队列了\n                }\n                if (file.type === 'clear') {\n                    this.setFileData(undefined);\n                }\n                else {\n                    this.setFileData(file);\n                }\n            }\n            this.pushQueue(0, anyAction);\n            //   this.commandManager.revoke(this.account)\n        };\n        this.account = account;\n        this.dataQue = {}; // Map<uid, List<command>>\n        // this.fileData // Map<uid, command>\n        this.lastDataMap = {}; // Map<uid, command>\n        this.shadowUsers = {};\n        this.doNotSendBefore = Date.now();\n        this.startLoop();\n    }\n    /**\n     * 将用户的动作推入该用户的队列中：this.dataQue[account]\n     *\n     * @param account\n     * @param action\n     */\n    pushQueue(account, action) {\n        logger.m.syncmanager('pushQueue', account, action);\n        if (typeof action.action === 'undefined') {\n            let error = new Error('ss');\n            console.log(error.stack);\n        }\n        // const commandStr = JSON.stringify(action)\n        // if (this.lastDataMap[account] === commandStr) {\n        //   return\n        // }\n        // this.lastDataMap[account] = commandStr\n        this.dataQue[account] = this.dataQue[account] || [];\n        this.dataQue[account].push(action);\n    }\n    /**\n     * 将obj转化为协议中约定的格式，然后调用flush函数发送数据\n     *\n     * @param obj\n     * @param delayBase\n     */\n    send(obj, delayBase) {\n        const { toAccount, actions } = obj;\n        if (!actions || actions.length < 1)\n            return;\n        const dataStr = ActionUtils.packBulk(actions.filter(x => !!x));\n        console.log('send', dataStr);\n        // 如果文本长度超过10个字，就使用gzip压缩方式传输,这个方式的传输比较\n        if (dataStr.length > 10 && (\"\" + toAccount !== '0')) {\n            let datas = this.gzipStr(dataStr);\n            datas.forEach((data, index) => {\n                this.flush({ toAccount, data }, index, delayBase);\n            });\n        }\n        else {\n            const data = { toAccount, data: dataStr };\n            this.flush(data, 0, delayBase);\n            logger.m.syncmanager('sendRaw:\\n', data);\n        }\n    }\n    /**\n     * 触发'flush'事件。\n     *\n     * 在core/index.js中，syncManager监听flush事件，然后调用connector.sendData发送数据\n     */\n    flush(data, delayIndex = 0, delayBase = 200) {\n        setTimeout(() => {\n            this.emit('flush', data);\n        }, delayBase * delayIndex);\n    }\n    /**\n     * 发送“清除响应”\n     *\n     * @param account\n     */\n    makeClearAck(account) {\n        this.send({\n            toAccount: account,\n            actions: [{ action: new ClearAckAction() }]\n        });\n    }\n    /**\n     * 发送“同步准备”\n     */\n    makeSyncPrepare() {\n        this.send({\n            toAccount: 0,\n            actions: [{ action: new SyncPrepareAction() }]\n        });\n    }\n    /**\n     * 发送“同步准备回应”\n     *\n     * @param account\n     */\n    makeSyncPrepareAck(account) {\n        this.send({\n            toAccount: 0,\n            actions: [{ action: new SyncPrepareAckAction() }]\n        });\n    }\n    gzipStr(str, doTag = true) {\n        console.log('gzip stirng:', str);\n        const gziped = pako.gzip(str, { to: 'string' });\n        console.log('gzip stirng:', pako.gzip(str));\n        const kiloBytes = getKiloBytes(gziped);\n        let dataArr = [];\n        if (kiloBytes > 49) {\n            const len = gziped.length;\n            let begin = 0;\n            while (begin < len) {\n                //每次取的字符长度 =  49KB（长度限制） * 1024 Byte/KB / 2 Byte（每个字符占用两个字节）\n                dataArr.push(gziped.substr(begin, 25088));\n                begin += 25088;\n            }\n        }\n        else {\n            dataArr.push(gziped);\n        }\n        if (doTag) {\n            const version = 1;\n            let { length } = dataArr;\n            let id = '' + Date.now() + '.' + Math.floor(Math.random() * 1000) +\n                Math.floor(Math.random() * 1000) +\n                Math.floor(Math.random() * 1000);\n            dataArr = dataArr.map((data, index) => `GZIP:${version}|${id}|${length}|${index}|=||=|${data}`);\n        }\n        return dataArr;\n    }\n    /**\n     * 发送“同步请求”\n     *\n     * @param account\n     */\n    makeSyncRequest(account) {\n        this.send({\n            toAccount: account,\n            actions: [{ action: new SyncRequestAction() }]\n        });\n    }\n    // 向account发送同步数据；TODO：做 相互抵消的重做、撤销 命令的过滤\n    /**\n     * 向toAccount发送同步数据, snapshot包含现有图形\n     *\n     * @param toAccount\n     * @param snapshot\n     */\n    syncTo(toAccount, snapshot) {\n        if (this.fileData) {\n            snapshot.file = this.fileData;\n        }\n        let action = new SyncAction(snapshot);\n        this.send({ toAccount, actions: [{ action }] });\n    }\n    /**\n     * 清空画布\n     */\n    clear() {\n        console.warn('clear sync manager');\n        this.dataQue = {};\n    }\n    /**\n     * 在msTime到来前，先不要发送数据\n     *\n     * @param msTime\n     */\n    delayMS(msTime) {\n        this.doNotSendBefore = Date.now() + msTime;\n    }\n    /**\n     * 每100ms将队列中所有动作发出。\n     */\n    startLoop() {\n        this.timer = setInterval(() => {\n            if (Date.now() < this.doNotSendBefore) {\n                return;\n            }\n            var dq = this.dataQue;\n            Object.keys(dq).forEach(key => {\n                if (!dq[key] || dq[key].length < 1) {\n                    return;\n                }\n                if (this.send) {\n                    this.send({ toAccount: key, actions: dq[key] });\n                    dq[key].length = 0;\n                }\n            });\n        }, 100);\n    }\n    /**\n     * 销毁syncManager\n     */\n    destroy() {\n        this.timer && clearInterval(this.timer);\n        this.timer = undefined;\n        this.dataQue = {};\n    }\n    /**\n     * 设置文件数据\n     * @param data\n     */\n    setFileData(data) {\n        this.fileData = data;\n        globalHub.emit('globalFile', this.fileData);\n    }\n}\nSyncManager.GZIP_TESTER_1 = /1\\|([\\d.]+)\\|(\\d+)\\|(\\d+)\\|=\\|\\|=\\|/;\n","/**\n * 绘制层。将任务交给worker(DrawWorker)。同时将DrawWorker中发出的动作发送给服务器。\n *\n * 钟凯：感觉这一层是多余的。\n */\nimport DrawWorker from './DrawWorker/index';\nimport EventEmitter from 'eventemitter3';\nimport { formatColor } from './utils';\nimport createDebug from 'debug';\nimport logger from '../debug';\nimport { isValidTool } from './validator';\nconst adapterLog = createDebug('AdapterDraw');\nexport default class AdapterDraw extends EventEmitter {\n    constructor(container, opt) {\n        super();\n        this.onInited = () => {\n            this.emit('inited');\n        };\n        // opt.color = '#000000'\n        this.worker = new DrawWorker(container, opt);\n        this.worker.on('action', this.onAction.bind(this));\n        this.worker.on('instantAction', this.onInstantAction.bind(this));\n        this.worker.on('inited', this.onInited);\n    }\n    /**\n     *\n     *\n     * @param account\n     * @param action\n     */\n    act(account, action) {\n        // var action = this.command2Action(account, action)\n        if (!action)\n            return;\n        let anyAction = { account: account, action: action };\n        logger.m.adapter('act->', action, account);\n        this.worker.act(anyAction);\n    }\n    // 收到worker内部抛出的action，然后发送到服务器\n    onAction(anyAction) {\n        if (anyAction.account !== this.worker.account || !this.worker.isEnable)\n            return;\n        logger.m.adapter('onAction', anyAction);\n        if (!anyAction)\n            return;\n        this.emit('action', anyAction);\n    }\n    // 收到worker内部抛出的action，然后发送到服务器\n    onInstantAction(anyAction) {\n        logger.m.adapter('onInstantAction', anyAction);\n        if (!anyAction)\n            return;\n        this.emit('instantAction', anyAction);\n    }\n    enableDraw(value) {\n        return this.worker.enableDraw(value);\n    }\n    destroy() {\n        this.worker.destroy();\n        this.removeAllListeners();\n        // delete this.worker;\n        return;\n    }\n    useTool(value, account) {\n        logger.m.adapter(value, account);\n        if (isValidTool(value)) {\n            this.worker.useTool(value, account);\n        }\n        else {\n            console.warn('画笔工具不正确!->', value);\n        }\n    }\n    resize() {\n        return this.worker.resize();\n    }\n    removeUser(account) {\n        return this.worker.removeUser(account);\n    }\n    setContainer(container, opt) {\n        return this.worker.setContainer(container, opt);\n    }\n    image(opt, account) {\n        return this.worker.image(opt, account);\n    }\n    clearImage(account) {\n        return this.worker.clearImage(account);\n    }\n    undo(account) {\n        return this.worker.undo(account);\n    }\n    redo(account) {\n        return this.worker.redo(account);\n    }\n    clear(target, account, opt) {\n        return this.worker.clear(target, account, opt);\n    }\n    setColor(color, account) {\n        if (!color)\n            return;\n        if (formatColor(color, 10) === formatColor.INVALID) {\n            console.error('whiteboard::setColor:设置颜色失败:不合法的色值');\n        }\n        else {\n            console.log('adapterDraw::setColor', color);\n            this.worker.setColor(color, account);\n        }\n    }\n    setSize(size, account) {\n        if (!size)\n            return;\n        if (!/^[\\d]+$/.test('' + size)) {\n            console.error('whiteboard::setSize:设置画笔粗细失败:不合法的数值:', size);\n            return;\n        }\n        console.log('adapterDraw::setSize', size);\n        this.worker.setSize(size, account);\n    }\n    setFontsize(size, account) {\n        if (!size)\n            return;\n        if (!/^[\\d]+$/.test('' + size)) {\n            console.error('whiteboard::setFontsize:设置文字大小失败:不合法的数值:', size);\n            return;\n        }\n        console.log('adapterDraw::setFontsize', size);\n        this.worker.setFontsize(size, account);\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from 'eventemitter3';\nimport * as CanvasHelper from './CanvasHelper';\nimport Point, { Coord } from '../Model/Point';\nimport Shape from '../Model/Shape';\nimport logger from '../../debug';\nimport { UserManager } from './UserManager';\nimport ShapesManager from './ShapesManger';\nimport ContainerManager, { applyState } from './ContainerManager';\nimport { WActions } from '../Itypes';\nimport { isValidTool } from '../validator';\nimport { StartAction, LaserPenEndAction, MoveAction, EndAction, RevokeAction, RedoAction, ClearAction, CalibrateAction, TextAction, FileAction } from '../Actions';\nimport { unpackBulk } from '../ActionUtils';\nimport { sign } from '../utils';\nimport globalHub from '../Model/GlobalHub';\n// * @param { string } opt.account uid\n//   * @param { number } opt.width\n//   * @param { number } opt.height\n//   * @param { string } opt.backgroundUrl 默认背景图\n//   * @param { string } opt.color\n//   * @param { string } opt.mode 绘图模式：激光笔flag 、 free\n//   * @param { number } opt.zIndex\nconst LOADING_IMAGE = 'data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAAANACwAAAAAEAAQAAAEPbDJSau9OOvNew0AEHDA8wCkiW6g6AXHMU4LgizUYRgEZdsUggFAQCgUP+AERggcFYHaDaMgEBQchBNhiQAAIfkECQAADQAsAAAAABAAEAAABDuwyUmrvTYAEDAFzwN4EyiSksaRyHF06GEYBNoQ82EHBwHbCIUCYRMKiwSCYoFALDCIwLDZBFJtTKclAgAh+QQJAAANACwAAAAAEAAQAAAEPrDJGQAIM2vwHtAUcVTdBzaHYRCKip2EepxacBAvjSgKQmc83m+iILCGEkSgh5wsEIhFEwqdUpvPaHPLnUQAACH5BAkAAA0ALAAAAAAQABAAAAQ+sMkZyAkz62MM0ROiKAjRXQCATeOIHEQAPA+QKQShZHOdIQFSRqaSLBCIBQiERC41TcQzc0xOr9isdsvtPiMAIfkECQAADQAsAAAAABAAEAAABD2wyYmUQjNra/VcCLIoBKEExBFkYRtcBGAQbJsdhnFkoMimGI8wAACshBnA4wFAJpdNp4RolFqv2Kx2q4kAACH5BAkAAA0ALAAAAAAQABAAAAQ9sMm5EFoza2u1b5ylKMjXVFdAjGamrEo7IWMpz8QR3A0BGATewWA48BA5mykAAOxugMcDwItOeUwnb9uKAAAh+QQJAAANACwAAAAAEAAQAAAEO7DJSau92C6EVp4c90khMjZbd5KKYo4B0Z4KIZ9I4H7IQQSng8FwwAQAgJgBQMAAHo+kD3h5Rk/HpCUCACH5BAkAAA0ALAAAAAAQABAAAAQ8sMlJq7046827nwuCLJwoliYXjlIAAAGFKApCAc8DULQSTzgd4kCYEQgKigt2MBgOC5rtQnAeOAHilBIBADs=';\nexport default class DrawWorker extends EventEmitter {\n    constructor(container, opt) {\n        super();\n        this.handleInputDomBlur = () => {\n            console.log('blur');\n            const { inputDom } = this.container;\n            const account = this.account;\n            if (!this.localUser) {\n                return;\n            }\n            let pointStr = inputDom.getAttribute('data-point');\n            if (!pointStr)\n                return;\n            const { ownerCanvasHeight, ownerCanvasWidth } = this.container;\n            let prevEnd = Point.fromString(pointStr);\n            inputDom.style.display = 'none';\n            const text = (inputDom.value || '').trim();\n            inputDom.value = '';\n            if (ownerCanvasHeight && ownerCanvasWidth && text) {\n                const action = new TextAction(prevEnd.x, prevEnd.y, text);\n                this.renderText(action, account);\n                this.emitAction({ account, action });\n            }\n        };\n        /**\n         * 对事件数据进行预处理，再调用对应的处理函数\n         * @param {Event} e 鼠标或触摸屏事件\n         * @private\n         */\n        this.dispatcher = (e) => {\n            if (e.type !== 'keydown' && e.type !== 'keyup') {\n                e.preventDefault();\n            }\n            e = e.originalEvent ? e.originalEvent : e;\n            if (!this.container.displayCtx)\n                return;\n            const rect = this.container.displayCtx.canvas.getBoundingClientRect();\n            let x, y;\n            if (e.touches && e.touches.length === 1) {\n                x = e.touches[0].clientX;\n                y = e.touches[0].clientY;\n            }\n            else if (e.changedTouches && e.changedTouches.length === 1) {\n                x = e.changedTouches[0].clientX;\n                y = e.changedTouches[0].clientY;\n            }\n            else {\n                x = e.clientX;\n                y = e.clientY;\n            }\n            const { ctrlKey, shiftKey, altKey, which } = e;\n            if (!x && x !== 0)\n                x = 0;\n            if (!y && y !== 0)\n                y = 0;\n            let realX = Math.round(x - rect.left);\n            let realY = Math.round(y - rect.top);\n            const { ownerCanvasHeight, ownerCanvasWidth, canvasWidth, canvasHeight } = this.container;\n            if (!ownerCanvasHeight || !ownerCanvasWidth || !canvasWidth || !canvasHeight) {\n                return;\n            }\n            // 点坐标转换为相对位置\n            const offset = new Point(+(realX / canvasWidth).toFixed(4), +(realY / canvasHeight).toFixed(4));\n            let type = e.type;\n            if (type === 'touchstart')\n                type = 'mousedown';\n            if (type === 'touchmove')\n                type = 'mousemove';\n            if (type === 'touchend')\n                type = 'mouseup';\n            // debug(type)\n            if (which === 2 || which === 3) {\n                // 如果是右键或者中键，就不触发对应的\n                return;\n            }\n            // console.log(e.buttons);\n            this[type](offset, this.account, { ctrlKey, shiftKey, altKey, which });\n        };\n        if (typeof opt === 'undefined') {\n            throw new Error('Option is Undefined!');\n        }\n        this.state = 'created';\n        this.opt = opt;\n        this.account = opt.account || 0; // 本地用户的UID\n        // 组装层级关系\n        this.users = new UserManager(opt);\n        this.shapes = new ShapesManager(); // 所有用户绘制内容的列表\n        this.shapes.wrap(this.users);\n        this.container = new ContainerManager(container, opt);\n        this.container.on('init-canvas', () => {\n            // 创建cancas之后才创建用户，因为需要用到canvas的宽高\n            logger.m.worker('init-canvas event');\n            const user = this.addUser(this.account);\n            this.localUser = user; // 缓存一下自己\n            this.state = 'inited';\n            this.afterInit();\n        });\n        this.container.on('ownerCanavasUpdate', (() => {\n            let timmer;\n            return (width, height) => {\n                console.log('ownerCanavasUpdate timmer');\n                clearTimeout(timmer);\n                timmer = setTimeout(() => {\n                    console.log('ownerCanavasUpdate timmer');\n                    this.emit('instantAction', {\n                        account: this.account,\n                        action: new CalibrateAction({\n                            ownerCanvasHeight: height,\n                            ownerCanvasWidth: width,\n                        })\n                    });\n                }, 200);\n            };\n        })());\n        this.container.wrap(this.shapes, this.users);\n        this.container.inputDom.addEventListener('blur', this.handleInputDomBlur);\n        this.isEnable = false; // 默认情况下都不可以写\n    }\n    setContainer(container, opt) {\n        logger.m.worker('setContainer');\n        this.container.setContainer(container, opt);\n    }\n    isDrawEnable() {\n        return this.isEnable;\n    }\n    // 是否有权限进行画布操作\n    enableDraw(enable) {\n        logger.m.worker('enableDraw', enable);\n        this.isEnable = !!enable;\n        globalHub.emit('canDraw', this.isEnable);\n        this.switchEventListener(!!enable);\n        // 切换为观众后，如果当前在激光笔，先保存当前状态\n        if (this.localUser) {\n            const { tool } = this.localUser;\n            if (!enable) {\n                if (/flag/.test(this.localUser.tool)) {\n                    this.clearFlag();\n                    this.emitAction({ account: this.account, action: new LaserPenEndAction() });\n                }\n                this.setCursor('not-allowed');\n            }\n            else {\n                let cursorType;\n                if (tool === 'flag') {\n                    cursorType = 'flag';\n                }\n                else {\n                    cursorType = 'crosshair';\n                }\n                this.setCursor(cursorType);\n            }\n        }\n    }\n    updateCursor() {\n        if (this.localUser) {\n            const { tool } = this.localUser;\n            if (!this.isEnable) {\n                if (/flag/.test(this.localUser.tool)) {\n                    this.clearFlag();\n                    this.emitAction({ account: this.account, action: new LaserPenEndAction() });\n                }\n                this.setCursor('not-allowed');\n            }\n            else {\n                let cursorType;\n                if (tool === 'flag') {\n                    cursorType = 'flag';\n                }\n                else {\n                    cursorType = 'crosshair';\n                }\n                this.setCursor(cursorType);\n            }\n        }\n    }\n    /**\n     * 增加或移除事件监听\n     * @param {Boolean} add 是否增加事件监听\n     * @private\n     */\n    switchEventListener(add) {\n        const op = add ? 'add' : 'remove';\n        const canvasList = [this.container.maskCanvas];\n        // const currentUserCanvas = this.users.myself.ctx.canvas\n        // if (currentUserCanvas) {\n        //   currentUserCanvas.style.visibility = add ? 'visible' : 'hidden'\n        //   canvasList.push(currentUserCanvas)\n        // }\n        const dispatcher = this.dispatcher;\n        // 绑定到canvas上的事件\n        canvasList.forEach(canvas => {\n            ['mouseleave', 'mousedown', 'mousemove', 'touchmove', 'touchstart']\n                .forEach(event => {\n                let addOrRemove = op + 'EventListener';\n                canvas[addOrRemove](event, dispatcher);\n            });\n        });\n        // 绑定在body上的事件\n        ['mouseup', 'touchend']\n            .forEach(event => {\n            let addOrRemove = op + 'EventListener';\n            this.container.container[addOrRemove](event, dispatcher);\n        });\n        ['keydown', 'keyup']\n            .forEach(event => {\n            let addOrRemove = op + 'EventListener';\n            document.documentElement[addOrRemove](event, dispatcher);\n        });\n    }\n    // 设置光标样式\n    setCursor(type = 'not-allowed') {\n        logger.m.worker('setCursor', type);\n        const canvasList = [\n            this.container.maskCanvas\n        ];\n        type = /(flag|crosshair|not-allowed)/.test(type) ? type : 'crosshair';\n        this.cursor = type || this.cursor;\n        if (this.cursor === 'flag') {\n            this.cursor = 'none';\n        }\n        canvasList.forEach(c => {\n            c.style.cursor = this.cursor;\n        });\n    }\n    afterInit() {\n        this.emit('inited');\n    }\n    emitAction(anyAction) {\n        this.emit('action', anyAction);\n    }\n    /**\n     * 获取或者设置操作模式。Worker的模式设置必须是标准的，对外暴露可以使用转换\n     * @param {string} tool 'flag', 'free', 'erase', 'fill', 'select'\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    useTool(tool, account = this.account) {\n        logger.m.worker('use tool:', tool, account);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        let validTool = isValidTool(tool);\n        if (!validTool) {\n            console.error('useTool 参数不正确！', tool);\n            return;\n        }\n        let user = this.getUser(account);\n        if (!tool)\n            return user.tool;\n        if (!user) {\n            user = this.addUser(account);\n        }\n        logger.m.worker('use tool:', user);\n        // 如果要设置的模式就是当前模式，直接返回\n        if (user.tool === tool)\n            return;\n        const updator = { tool: tool, };\n        user.update(updator);\n        if (tool === 'flag') {\n            user.ctx.canvas.style.visibility = 'visible';\n        }\n        else {\n            this.clearFlag(account);\n        }\n        logger.m.worker('useTool check account', account);\n        if (account !== this.account) {\n            return;\n        }\n        // // 当前是观众模式\n        // if (!this.isEnable) {\n        //   return\n        // }\n        if (user.tool !== 'text') { // 修改为非 text 模式隐藏输入框\n            this.container.inputDom.style.display = 'none';\n        }\n        this.setCursor(user.tool);\n        logger.m.worker('useTool check account', account);\n        this.dispatchCalibrateAction(updator);\n    }\n    clearFlag(account = this.account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        user.flagPos = new Point(3, 3).toString();\n        this.renderFlag();\n        this.emitAction({\n            account,\n            action: new LaserPenEndAction(),\n        });\n    }\n    /**\n     * 获取或者设置笔&橡皮擦的大小\n     * @param {number} value 笔&橡皮擦的大小\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    setSize(value, account = this.account) {\n        let user = this.getUser(account);\n        logger.m.worker('setSize', value, account, user);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        if (!user) {\n            user = this.addUser(account);\n        }\n        if (!value)\n            return user.size;\n        if (typeof +value !== 'number') {\n            throw new Error('Type Error: size');\n        }\n        let updator = { size: +value, };\n        user.update(updator);\n        this.dispatchCalibrateAction(updator);\n    }\n    // 获取自己的按钮坐标等等的参数\n    getSelfCalibrate() {\n        if (this.localUser) {\n            return this.localUser.getCalibrateAction();\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * 获取或者设置笔的颜色\n     * @param {number} value 笔的颜色\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    setColor(value, account = this.account) {\n        let user = this.getUser(account);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        if (!user) {\n            user = this.addUser(account);\n        }\n        if (!value)\n            return user.color;\n        const updator = { color: value.toLowerCase() };\n        this.dispatchCalibrateAction(updator);\n        user.update(updator);\n    }\n    /**\n     * 获取或者设置文字的大小\n     * @param {number} value 字体大小\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    setFontsize(value, account = this.account) {\n        let user = this.getUser(account);\n        logger.m.worker('set font size', value, account, user);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        if (!user) {\n            user = this.addUser(account);\n        }\n        if (!value)\n            return user.fontsize;\n        if (typeof (+value) !== 'number') {\n            throw new Error('Type Error: fontsize');\n        }\n        const updator = { fontsize: +value };\n        user.update(updator);\n        this.dispatchCalibrateAction(updator);\n        // this.container.inputDom.style.height = value + 'px'\n        this.container.inputDom.style.fontSize = value + 'px';\n    }\n    keydown(point, account, ext) {\n        let user = this.users.getUser(account);\n        if (!user) {\n            user = this.addUser(account);\n        }\n        const { ctrlKey, shiftKey, altKey, which } = ext;\n        // 当前只响应 ctrl shift alt 这三个键的响应\n        // 17-ctrl  16-shif 18-alt\n        if ([16, 17, 18].indexOf(which) > -1) {\n            let userKeyDown = user.keyDown;\n            let newWhich = userKeyDown === null ? -1 : userKeyDown.which;\n            // 如果后期需要对其他更多按键进行处理的话，就在这里处理\n            // 没有其他按键的情况下， whichkey 传输-1过去\n            const updator = {\n                keyDown: {\n                    ctrlKey, altKey, shiftKey,\n                    which: newWhich\n                }\n            };\n            user.update(updator);\n            this.dispatchCalibrateAction(updator);\n            this._afterKeyChange(user, account, ext);\n        }\n    }\n    keyup(point, account, ext) {\n        const { ctrlKey, shiftKey, altKey, which } = ext;\n        let user = this.users.getUser(account);\n        if (!user) {\n            user = this.addUser(account);\n        }\n        // 当前只响应 ctrl shift alt 这三个键的响应\n        // 17-ctrl  16-shif 18-alt\n        if ([16, 17, 18].indexOf(which) > -1) {\n            let userKeyDown = user.keyDown;\n            let newWhich = userKeyDown === null ? -1 : userKeyDown.which;\n            if (which === newWhich) {\n                newWhich = -1;\n            }\n            const updator = {\n                keyDown: {\n                    altKey, shiftKey, ctrlKey,\n                    which\n                }\n            };\n            user.update(updator);\n            this.dispatchCalibrateAction(updator);\n            this._afterKeyChange(user, account, ext);\n        }\n    }\n    _afterKeyChange(user, account, ext) {\n        if (user.isMouseDown) {\n            if (user.tool !== 'flag' && user.tool !== 'free' && user.tool !== 'erase') {\n                this.mousemove(user.end, account, ext); // TODO,这里的which 应该替换\n            }\n        }\n    }\n    /**\n     * 鼠标按下&开始触摸时的处理函数\n     * @param {Point} offset 当前位置坐标\n     * @param {string} account 进行操作的用户的ID\n     */\n    mousedown(offset, account = this.account, ext) {\n        let shape;\n        const user = this.getUser(account);\n        let { mode, tool, color, size, fontsize, keyDown } = user;\n        const userCtx = user.ctx;\n        const displayCtx = this.container.displayCtx;\n        // 如果是激光笔工具或者文本工具，就返回\n        if ((user.isFlag && (!tool || tool === 'flag')) || tool === 'text') {\n            return;\n        }\n        if (tool === 'erase' && this.shapes.visibles.length === 0) {\n            // 如果画板没有内容，不能使用橡皮擦工具\n            return;\n        }\n        user.whenMouseDown(Point.clone(offset));\n        const end = user.end;\n        if (user.isMouseDown) {\n            // '兼容iOS未抬笔直接落笔的情况'\n            logger.mouse('user.isMouseDown->true');\n            this.mouseup(end, account);\n        }\n        if (tool === 'free' || tool === 'erase') { // 1. free 会 直接在 displayCtx 上绘制；2. 当 erase 时 workCtx 要保证 source-over；3. 所以隐藏\n            userCtx.canvas.style.visibility = 'hidden';\n            userCtx.beginPath();\n        }\n        else {\n            userCtx.canvas.style.visibility = 'visible';\n        }\n        logger.m.worker('switch mode = ', mode, tool);\n        // 缓存上一次applyState的用户\n        this.lastStateAccount = user.account;\n        applyState(userCtx, user);\n        applyState(displayCtx, user);\n        const { ownerCanvasHeight: height, ownerCanvasWidth: width } = this.container;\n        let action;\n        if (height && width) {\n            action = new StartAction(offset.x, offset.y);\n        }\n        switch (mode) {\n            case 'draw': {\n                user.isMouseDown = true;\n                logger.log('user is mouseDown', user.isMouseDown, user);\n                shape = new Shape({\n                    user, mode, tool, size, color, fontsize,\n                    start: Point.clone(offset),\n                    actions: action,\n                    keyDown: user.keyDown,\n                });\n                user.pushShape(shape);\n                this.shapes.push(shape);\n                switch (tool) {\n                    case 'circle':\n                    case 'ellipse':\n                    case 'line':\n                    case 'rect':\n                    case 'roundRect':\n                    case 'solidCircle':\n                    case 'solidEllipse':\n                    case 'solidRoundRect':\n                    case 'solidRect':\n                    case 'erase':\n                    case 'free':\n                    case 'flag':\n                        // 'free' 用三个点画二次曲线，使笔迹光滑，降低锯齿感\n                        break;\n                    case 'fill': {\n                        // shape = new Shape({\n                        //   user, mode, tool, size, color,\n                        //   start: Point.clone(offset)\n                        // })\n                        // user.pushShape(shape)\n                        // this.shapes.push(shape)\n                        this.lastStateAccount = user.account;\n                        applyState(shape.ctx, user);\n                        applyState(displayCtx, user);\n                        shape.draw(displayCtx);\n                        user.isMouseDown = false; // 保证isMouseDown的标记位是正常的\n                        break;\n                    }\n                    default:\n                        const fullCaseChecker = tool;\n                }\n                break;\n            }\n        }\n        logger.m.worker('emit on mousedown');\n        if (width && height) {\n            this.emitAction({ account, action: action });\n        }\n    }\n    /**\n     * 鼠标移动&触摸移动时的处理函数\n     * @param {Point} offset 当前位置坐标\n     * @param {string} account 进行操作的用户的ID\n     */\n    mousemove(offset, account = this.account, ext) {\n        const user = this.getUser(account);\n        logger.mouse('mousemove', user, !user.isMouseDown && !user.isFlag);\n        if (!user.isFlag) {\n            // 如果不是flag模式，\n            if (!user.isMouseDown) {\n                console.log('pre return when mouse down is false');\n                return;\n            }\n        }\n        user.whenMouseMove(Point.clone(offset));\n        let { mode, tool, keyDown, end } = user;\n        if (tool === 'erase' && this.shapes.visibles.length === 0) {\n            // 如果画板没有内容，不能使用橡皮擦工具\n            return;\n        }\n        const userCtx = user.ctx;\n        const displayCtx = this.container.displayCtx;\n        logger.mouse('mousemove', offset, user);\n        const activeShape = user.activeShape;\n        let action = new MoveAction(offset.x, offset.y);\n        // 如果按键不一致，就更新\n        if (ext && Object.keys(keyDown).some((key) => ext[key] !== keyDown[key])) {\n            user.update({ keyDown: ext });\n        }\n        if (tool !== 'flag') {\n            this.shiftKeyTool(user, activeShape, (toolName) => {\n                tool = toolName;\n            });\n        }\n        // 检查上一次的使用的状态的用户，如果帐号相同，为了性能，就不重新作用applyState\n        if (user.account !== this.lastStateAccount) {\n            if (tool !== 'flag') {\n                this.lastStateAccount = user.account;\n                applyState(userCtx, user);\n                applyState(displayCtx, user);\n            }\n        }\n        switch (mode) {\n            case 'draw': {\n                switch (tool) {\n                    case 'flag': {\n                        // 光标模式\n                        user.flagPos = Point.clone(offset).toString();\n                        this.renderFlag();\n                        // renderFlag(user, offset, size, color)\n                        break;\n                    }\n                    case 'erase':\n                    case 'free':\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.actions.push(action);\n                            activeShape.freeMove(userCtx);\n                            activeShape.freeMove(displayCtx);\n                        }\n                        break;\n                    case 'line':\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.updateCorner(end);\n                        activeShape.draw(userCtx);\n                        break;\n                    case 'rect':\n                    case 'solidRect': {\n                        if (activeShape) {\n                            CanvasHelper.clearCtx(userCtx);\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'roundRect':\n                    case 'solidRoundRect': {\n                        CanvasHelper.clearCtx(userCtx);\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'circle':\n                    case 'solidCircle': {\n                        CanvasHelper.clearCtx(userCtx);\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'ellipse':\n                    case 'solidEllipse': {\n                        CanvasHelper.clearCtx(userCtx);\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'fill':\n                    case 'text':\n                        // 什么也不做，\n                        action = null;\n                        break;\n                    default:\n                        const fullCaseChecker = tool;\n                }\n                break;\n            }\n        }\n        if (action) {\n            this.emitAction({ account, action });\n        }\n    }\n    shiftKeyTool(user, activeShape, callback) {\n        if (user.keyDown.shiftKey) {\n            let tool = user.tool;\n            // 取消shift 需要变更工具后还原\n            if (tool === 'ellipse') {\n                tool = 'circle';\n                if (activeShape) {\n                    activeShape.tool = tool;\n                }\n                callback(tool);\n            }\n            else if (tool === 'circle') {\n                tool = 'ellipse';\n                if (activeShape) {\n                    activeShape.tool = tool;\n                }\n                callback(tool);\n            }\n        }\n        else {\n            // 取消shift key后还原\n            if (activeShape && activeShape.tool !== user.tool) {\n                activeShape.tool = user.tool;\n            }\n        }\n    }\n    /**\n     * 鼠标松开&触摸结束时的处理函数\n     * @param {Point} offset 当前位置坐标\n     * @param {string} account 进行操作的用户的ID\n     * @private\n     */\n    mouseup(offset, account = this.account, ext) {\n        const user = this.getUser(account);\n        const textActionText = offset.text;\n        console.warn('mouse up');\n        logger.m.worker('mouse up', account);\n        let { mode, tool, color, size, fontsize, start, oldMid, end, } = user;\n        if (tool === 'erase' && this.shapes.visibles.length === 0) {\n            // 如果画板没有内容，不能使用橡皮擦工具\n            return;\n        }\n        const mid = Point.middle(end, offset);\n        // free 模式需要知道上一次的情况\n        const prevOldMid = oldMid.clone();\n        const prevEnd = end.clone();\n        // 作用到user对象上\n        oldMid.copy(mid);\n        end.copy(offset);\n        user.oldMid = oldMid.clone();\n        user.end = end.clone();\n        if (user.isFlag) {\n            // 激光笔直接返回\n            this.clearFlag();\n            this.emitAction({\n                account,\n                action: new LaserPenEndAction()\n            });\n            ;\n            return;\n        }\n        if (!user.isMouseDown && tool !== 'text')\n            return;\n        user.isMouseDown = false;\n        console.warn('turn use mouse down to false', user.isMouseDown, user.account);\n        const userCtx = user.ctx;\n        const displayCtx = this.container.displayCtx;\n        const activeShape = user.activeShape;\n        let shapeCtx = activeShape && activeShape.ctx;\n        if (tool === 'text') {\n            // 如果是 text 工具， 这里需要做输入框的展示以及输入框的消失的操作\n            // applyState 不在这里作用，在renderText方法里作用，\n            // 这样接收端也能更新shape状态\n            let endCoord = this.getCanvasCoord(end);\n            const { canvasWidth: width, canvasHeight: height, inputDom } = this.container;\n            const { style } = inputDom;\n            const { display } = style;\n            if (endCoord.x < 0 || endCoord.x > width || endCoord.y < 0 || endCoord.y > height) {\n                return;\n            }\n            if (display === 'none') {\n                // 如果是隐藏的就展示对应的DOM\n                const iptWidth = width - endCoord.x - 10;\n                const iptHeight = height - endCoord.y - 10;\n                if (fontsize * 10 > iptWidth) {\n                    style.width = (iptWidth > 0 ? iptWidth : 0) + 'px';\n                }\n                else {\n                    style.width = iptWidth + 'px';\n                }\n                // style.height = fontsize + 'px'\n                style.padding = \"1px 0\";\n                style.verticalAlign = \"top\"; // fix ios safari input font height\n                style.lineHeight = fontsize + 'px';\n                style.top = endCoord.y + this.container.paddingTop + 'px';\n                style.left = endCoord.x + this.container.paddingLeft + 'px';\n                style.fontSize = fontsize + 'px';\n                style.display = 'block';\n                style.color = color;\n                inputDom.setAttribute('data-point', end.toString());\n                inputDom.focus();\n                user.end.copy(end);\n            }\n            else {\n                // 如果是展示状态下，就消失并且抛出TextAction\n                inputDom.blur();\n            }\n            return;\n        }\n        if (!activeShape || !shapeCtx) {\n            return;\n        }\n        let needMoveUserCtxData = true;\n        userCtx.canvas.style.visibility = 'visible';\n        activeShape.updateCorner(end);\n        let action = new EndAction(end.x, end.y);\n        if (tool !== 'flag') {\n            this.shiftKeyTool(user, activeShape, (toolName) => {\n                tool = toolName;\n            });\n            // 如果有两个用户在画画，必须要更新Canvas状态\n            this.lastStateAccount = user.account;\n            applyState(userCtx, user);\n            applyState(displayCtx, user);\n        }\n        switch (mode) {\n            case 'draw':\n                // 如果 erase 设置了 workCtx 为 destination-out 取到的img不能做正常 撤销 重做\n                switch (tool) {\n                    case 'erase':\n                    case 'free':\n                        // 自由画笔需要拓展边界\n                        activeShape.expandCorner();\n                        activeShape.freeEnd(userCtx);\n                        activeShape.freeEnd(displayCtx);\n                        break;\n                    case 'line':\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    case 'rect':\n                    case 'solidRect': {\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    }\n                    case 'roundRect':\n                    case 'solidRoundRect': {\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    }\n                    case 'circle':\n                    case 'solidCircle': {\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    }\n                    case 'ellipse':\n                    case 'solidEllipse':\n                        {\n                            CanvasHelper.clearCtx(userCtx);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    case 'flag':\n                    case 'fill':\n                        // 不放置数据到shape里\n                        action = null;\n                        needMoveUserCtxData = false;\n                        break;\n                    default:\n                        const fullCaseChecker = tool;\n                }\n                if (needMoveUserCtxData) {\n                    this.moveUserShapeToDisplay(user);\n                }\n                break;\n        }\n        activeShape.keyDown = user.keyDown;\n        if (action) {\n            activeShape.actions.push(action);\n            this.emitAction({ account, action });\n        }\n    }\n    mouseleave(point, account = this.account, ext) {\n        console.log('mouse leave');\n        if (account === this.account) {\n            const user = this.getUser(account);\n            switch (user.tool) {\n                case 'flag': {\n                    this.clearFlag(account);\n                    this.emitAction({\n                        account,\n                        action: new LaserPenEndAction()\n                    });\n                    break;\n                }\n                case 'text':\n                    break;\n                default:\n                    this.mouseup(point, account, ext);\n            }\n        }\n    }\n    renderText(offset, account) {\n        let inputDomValue;\n        let action;\n        action = offset;\n        let end = new Point(offset.x, offset.y);\n        let endCoord = this.getOwnerCoord(end);\n        inputDomValue = (offset.text || '').trim();\n        if (!inputDomValue || !account) {\n            return;\n        }\n        let user = this.getUser(account);\n        if (!user) {\n            user = this.addUser(account);\n        }\n        const { tool, mode, size, color, fontsize } = user;\n        let displayCtx = this.container.displayCtx;\n        const shape = new Shape({\n            user, mode, tool, size, color, fontsize,\n            start: Point.clone(end),\n            actions: action,\n            keyDown: user.keyDown,\n        });\n        this.shapes.push(shape);\n        user.pushShape(shape);\n        // 这个fontSize是设置的字体测试的用户的大小，具体到画布上以后，字体大小会发生变化\n        const userCtx = user.ctx;\n        this.lastStateAccount = user.account;\n        applyState(userCtx, user);\n        applyState(displayCtx, user);\n        CanvasHelper.text(userCtx, endCoord, inputDomValue, fontsize, true, color);\n        const corner = user.activeShape.corner;\n        corner[0].x = endCoord.x - size;\n        corner[0].y = endCoord.y - 20;\n        corner[1].x = endCoord.x + fontsize * inputDomValue.length;\n        corner[1].y = endCoord.y + fontsize + 20;\n        this.moveUserShapeToDisplay(user);\n    }\n    clearTransparentPix(imgData) {\n        let total = imgData.length;\n        let dataBytes = imgData;\n        for (let i = 0; i < total; i += 4) {\n            const alpha = dataBytes[3 + i];\n            if (alpha < 243) {\n                dataBytes[0 + i] = 0;\n                dataBytes[1 + i] = 0;\n                dataBytes[2 + i] = 0;\n                dataBytes[3 + i] = 0;\n            }\n        }\n    }\n    moveUserShapeToDisplay(user, antiAlais) {\n        const { activeShape, ctx: userCtx } = user;\n        const { displayCtx } = this.container;\n        if (!activeShape || !displayCtx) {\n            console.error('activeShape is ', activeShape, 'displayCtx is ', displayCtx);\n            return;\n        }\n        const { tool, ctx: shapeCtx, color, corner } = activeShape;\n        logger.log('corner', corner);\n        const shapeWidth = Math.ceil(corner[1].x - corner[0].x);\n        const shapeHeight = Math.ceil(corner[1].y - corner[0].y);\n        if (shapeWidth === 0 || shapeHeight === 0) {\n            logger.m.worker('mouseup shape is zero size');\n            console.error('mouseup shape is zero size');\n            return;\n        }\n        logger.m.worker('mouseup going to anti shape', user.account);\n        // 需要获取看得见的数据，才能使其他 canvas 上 globalCompositeOperation 有效应用\n        const imgData = userCtx.getImageData(corner[0].x, corner[0].y, shapeWidth, shapeHeight);\n        if (tool === 'erase') {\n            logger.image(userCtx.canvas.toDataURL(), 'erase');\n        }\n        // 过滤锯齿\n        if (this.opt.clearTransparentPix && (!['text'].includes(tool) || antiAlais)) {\n            this.clearTransparentPix(imgData.data);\n        }\n        shapeCtx.canvas.width = shapeWidth;\n        shapeCtx.canvas.height = shapeHeight;\n        // 每次重新改变canvas大小 ，都要重新设置这个属性\n        CanvasHelper.setpixelated(shapeCtx);\n        CanvasHelper.setLineStyle(shapeCtx);\n        shapeCtx.putImageData(imgData, 0, 0); // 这里 workCtx 的数据截取了有效部分，存到了 shape ，可以做 undo redo\n        displayCtx.imageSmoothingEnabled = false;\n        if (tool !== 'free') {\n            displayCtx.drawImage(shapeCtx.canvas, Math.round(corner[0].x), Math.round(corner[0].y)); // displayCtx 一直在实时绘制\n        }\n        CanvasHelper.clearCtx(userCtx);\n    }\n    /**\n     * 渲染激光笔，绘制单个，没有任何轨迹\n     * @param {Object} user 激光笔的用户\n     * @param {Point} center 激光笔经过的点圆心\n     * @param {Number} size 激光笔直径\n     * @param {String} color 激光笔颜色\n     * @private\n     */\n    renderFlag() {\n        const { maskCtx } = this.container;\n        if (maskCtx) {\n            // 清空图层\n            CanvasHelper.clearCtx(maskCtx);\n            const { ownerCanvasWidth: width, ownerCanvasHeight: height } = this.container;\n            // 将每个用户的激光笔绘制上去\n            this.users.all.forEach(user => {\n                const { mode, tool, color, flagPos } = user;\n                if (mode == 'draw' && tool === 'flag' && width && height) {\n                    let pos = Point.fromString(flagPos);\n                    let posCoord = this.getOwnerCoord(pos);\n                    console.log('render flag', pos, flagPos, user.account);\n                    CanvasHelper.circle(maskCtx, posCoord, 5, false, '#ff0000');\n                    CanvasHelper.circle(maskCtx, posCoord, 4, true, '#ff0000'); //默认的激光笔颜色为红色\n                }\n            });\n        }\n    }\n    getCanvasCoord(offset) {\n        const { canvasHeight: height, canvasWidth: width } = this.container;\n        if (height && width) {\n            return new Coord(offset.x * width, offset.y * height);\n        }\n        return new Coord(0, 0);\n    }\n    getOwnerCoord(offset) {\n        const { ownerCanvasHeight: height, ownerCanvasWidth: width } = this.container;\n        if (height && width) {\n            return new Coord(offset.x * width, offset.y * height);\n        }\n        return new Coord(0, 0);\n    }\n    /**\n     * 撤销绘制，本地撤销模型，即只能撤销自己的绘制\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    undo(account = this.account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        if (user.shapes.length === 0)\n            return;\n        let length = user.undo(); // 其他操作通过事件冒泡到ContainerManager去处理了\n        this.emitAction({ account, action: new RevokeAction() });\n        return length;\n    }\n    /**\n     * 反撤销绘制，取消本地撤销模型，即只能取消撤销自己的绘制\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    redo(account = this.account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        if (user.recycle.length === 0)\n            return;\n        let length = user.redo();\n        this.emitAction({ account, action: new RedoAction() });\n        return length;\n    }\n    /**\n     * 绘制图片\n     * @param {string} url 图片地址\n     * @private\n     */\n    image(opt, account = this.account) {\n        const { url = '', docId = '', currentPage = 0, pageCount = 0, type = 'clear', urlStr = '', h5Cmd = '' } = opt;\n        if (!url)\n            return;\n        if (this.container && this.container.displayCtx) {\n            const canvas = this.container.displayCtx.canvas;\n            const img = new Image();\n            const tmpUrl = this.opt.backgroundUrl === undefined\n                ? LOADING_IMAGE\n                : this.opt.backgroundUrl;\n            img.onload = () => {\n                this.container.container.classList.remove('canvas-loading');\n                canvas.style.backgroundSize = 'contain';\n                canvas.style.backgroundImage = `url(${url})`;\n            };\n            this.container.container.classList.add('canvas-loading');\n            canvas.style.backgroundSize = 'auto';\n            canvas.style.backgroundImage = `url(${tmpUrl})`;\n            img.src = url;\n        }\n        this.emitAction({\n            account: account,\n            action: new FileAction({\n                url,\n                docId,\n                currentPage,\n                pageCount,\n                type,\n                urlStr,\n                h5Cmd\n            })\n        });\n    }\n    // 取消背景绘制\n    clearImage(account = this.account) {\n        if (this.container.displayCtx) {\n            this.container.displayCtx.canvas.style.backgroundImage = '';\n        }\n        this.emitAction({\n            account: account,\n            action: new FileAction({\n                docId: '',\n                type: 'clear',\n            })\n        });\n    }\n    /**\n     * 清除画板或者清除某个用户的绘制\n     * @param {string} target 需要清除操作的用户ID\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    clear(target, account = this.account, opt) {\n        const force = opt && opt.force; // 是否强力清除，包括用户正在绘制的内容\n        const quiet = opt && opt.quiet; // 是否静默清除，不抛出事件\n        if (this.container.displayCtx) {\n            CanvasHelper.clearCtx(this.container.displayCtx);\n            for (const user of this.users.all) {\n                if (user.isMouseDown && !force) {\n                    // 防止在clear时 擦除了其他用户正在绘制的笔记，\n                    logger.m.worker('user.isMouseDown = true');\n                    this.container.displayCtx.drawImage(user.ctx.canvas, 0, 0);\n                }\n                else {\n                    user.ctx && CanvasHelper.clearCtx(user.ctx);\n                }\n            }\n        }\n        let uidToRemove;\n        if (target) {\n            if (!Array.isArray(target)) {\n                target = [target];\n            }\n            if (target.length != 0) {\n                uidToRemove = target;\n            }\n        }\n        if (uidToRemove) {\n            uidToRemove.forEach(uid => {\n                const user = this.getUser(uid);\n                if (user) {\n                    // user.isMouseDown = false\n                    user.shapes.forEach(shape => {\n                        this.shapes.remove(shape);\n                    });\n                    user.clearShapes();\n                }\n            });\n            if (this.container.displayCtx) {\n                this.container.fullRender();\n            }\n        }\n        else {\n            // 清空全部\n            this.shapes.clear();\n            for (const user of this.users.all) {\n                user.clearShapes();\n                // user.isMouseDown = false\n            }\n        }\n        if (!quiet) {\n            this.emitAction({ account, action: new ClearAction(uidToRemove) });\n        }\n    }\n    /**\n     * 收到指令后进行对应操作\n     * @param {string} account 用户ID\n     * @param {string} op 操作\n     * @param {any} [value] 操作值\n     * @public\n     */\n    act(anyAction) {\n        logger.m.worker('act->', anyAction);\n        let { account, action: actionData } = anyAction;\n        if (account && !this.users.hasUser(account)) {\n            this.addUser(account);\n        }\n        const action = anyAction.action;\n        switch (action.TYPE) {\n            case WActions.START: {\n                this.mousedown(action, account);\n                // 鼠标点击\n                break;\n            }\n            case WActions.MOVE:\n            case WActions.LASER_PEN: {\n                // 激光笔\n                this.mousemove(action, account);\n                break;\n            }\n            case WActions.TEXT: {\n                this.renderText(action, account);\n                break;\n            }\n            case WActions.END: {\n                // 鼠标移上\n                this.mouseup(action, account);\n                break;\n            }\n            case WActions.LASER_PEN_END: {\n                this.clearFlag(account);\n                break;\n            }\n            case WActions.REDO: {\n                this.redo(account);\n                break;\n            }\n            case WActions.REVOKE: {\n                this.undo(account);\n                break;\n            }\n            case WActions.CLEAR: {\n                // this.clear((action as ClearAction).accounts, account);// 特殊处理，不在此处\n                break;\n            }\n            case WActions.CALIBRATE: {\n                this.calibrate(account, action);\n                break;\n            }\n            case WActions.SYNC_PREPARE_ACK:\n            case WActions.SERIAL: {\n                break;\n            }\n            case WActions.CLEAR_ACK:\n                // 再次清除对应用户的绘制内容\n                this.clear(account, account, { quiet: true, force: true });\n                break;\n            case WActions.SYNC_REQUEST:\n            case WActions.FILE:\n            case WActions.SYNC:\n            case WActions.SYNC_PREPARE:\n            case WActions.VERSION:\n                break;\n            default:\n                const fullCaseChecker = action;\n        }\n    }\n    /**\n     * 重新设置画布大小，等比例\n     * @param {number} width 画布宽度\n     * @public\n     */\n    resize() {\n        this.container.resize();\n    }\n    dispatchCalibrateAction(opt) {\n        this.emit('action', {\n            account: this.account,\n            action: new CalibrateAction(opt)\n        });\n    }\n    calibrate(account, action) {\n        if (account) {\n            // 更新容器的属性\n            const { ownerCanvasHeight, ownerCanvasWidth } = action;\n            if (ownerCanvasHeight && ownerCanvasWidth) {\n                console.warn('update owner canvas');\n                this.container.canvasRatio = ownerCanvasWidth / ownerCanvasHeight;\n                this.container.resize();\n                this.container.updateCanvasPropSize(ownerCanvasWidth, ownerCanvasHeight);\n            }\n            // 更新用户的属性\n            let userOptions = (CalibrateAction.USER_PROPS).reduce((obj, prop) => {\n                if (prop in action) {\n                    obj[prop] = action[prop];\n                }\n                return obj;\n            }, {});\n            let user = this.getUser(account);\n            if (user) {\n                user.update(userOptions);\n            }\n        }\n    }\n    /**\n     * 增加一个用户并初始化其canvas，已存在则直接返回\n     * @param {String | Number} account 用户ID\n     * @return {User} 用户\n     */\n    addUser(account) {\n        logger.m.worker('addUser', account);\n        if (this.users.hasUser(account)) {\n            return this.getUser(account);\n        }\n        const user = this.users.addUser(account);\n        this.container.addUser(this.account, user);\n        // 依据用户的UID进行排序，制作\n        this.users.all.sort((a, b) => a.account > b.account ? 1 : -1).forEach((user, index) => {\n            user.ctx.canvas.style.zIndex = '' + (10 + index);\n        });\n        logger.m.worker('create User ->', user);\n        return user;\n    }\n    getUser(account) {\n        if (account == this.account && this.localUser) {\n            return this.localUser;\n        }\n        else {\n            return this.users.getUser(account);\n        }\n    }\n    /**\n     * 移除一个用户, 删除其canvas\n     * @param {String | Number} account 用户ID\n     * @return {User} 用户\n     */\n    removeUser(account) {\n        account && this.clearFlag(account) && this._removeUser(account);\n    }\n    _removeUser(account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        try {\n            this.container.container.removeChild(user.ctx.canvas);\n        }\n        catch (e) { }\n        this.users.remove(account);\n    }\n    /**\n     * 销毁白板, 移除所有用户\n     * 实际上只移除了事件监听，并将内存占用较大的对象清空，等待垃圾回收\n     * @private\n     */\n    destroy() {\n        this.container.inputDom.removeEventListener('blur', this.handleInputDomBlur);\n        this.users.destroy();\n        this.switchEventListener(false);\n        this.users.uids.map(key => {\n            this._removeUser(key);\n        });\n        this.shapes.destroy();\n        this.container.destroy();\n        this.removeAllListeners();\n    }\n    getSnapshot() {\n        const { transh, visibles } = this.shapes;\n        const { canvasWidth, canvasHeight, ownerCanvasHeight, ownerCanvasWidth } = this.container;\n        let shapeSnapshotOption = { width: canvasWidth, height: canvasHeight };\n        const users = this.users.toSnapshot(shapeSnapshotOption);\n        return {\n            users: users,\n            ownerWidth: ownerCanvasWidth,\n            ownerHeight: ownerCanvasHeight,\n            canvasWidth: canvasWidth,\n            canvasHeight: canvasHeight,\n            canvasRatio: canvasWidth / (canvasHeight === 0 ? 0.000001 : canvasHeight),\n            transhShapes: transh.map(shape => shape.toSnapshot(shapeSnapshotOption)),\n            shapes: visibles.map(shape => shape.toSnapshot(shapeSnapshotOption))\n        };\n    }\n    restoreShape(shape, isInTrash) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { id, start, user: account, color, fontsize, size, mode, actions: actionStr, optimized, imageData, corner, keyDown, } = shape;\n            let tool = shape.tool;\n            let actions = unpackBulk(actionStr);\n            let actionsLenth = actions.length;\n            // 这个图形的所有动作\n            // 保证用户存在\n            let user = this.users.getUser(account);\n            if (!user) {\n                user = this.addUser(account);\n            }\n            const { ownerCanvasWidth: width, ownerCanvasHeight: height } = this.container;\n            let restoreShape = new Shape({\n                user, mode, tool, size, color, fontsize,\n                start: Point.fromString(start),\n                actions: actions,\n                keyDown: keyDown\n            });\n            restoreShape.id = id;\n            restoreShape.optimized = optimized;\n            let [topLeft, bottomRight] = corner.map(str => Point.fromString(str).toCoord(width, height));\n            const coordinateOffset = topLeft; // 作为坐标的偏移点\n            // 原来绘图，参考的坐标系是画板那么大，action里的坐标也是那么大， \n            // 为了更快的恢复出shape，我们只在图层那么小的区域里绘图，所以原来的坐标需要减去图形的偏移坐标。\n            let { width: shapeWidth, height: shapeHeight } = Coord.areaSize(topLeft, bottomRight);\n            let shapeCtx = restoreShape.ctx;\n            CanvasHelper.setCanvasPropSize(shapeCtx, { width: shapeWidth, height: shapeHeight });\n            restoreShape.corner = [topLeft, bottomRight];\n            applyState(shapeCtx, { ctx: shapeCtx, color, size, tool });\n            console.assert(shapeCtx.lineWidth === size, 'shape line width is not the same', size, shapeCtx.lineWidth);\n            if (isInTrash) {\n                user.recycle.push(restoreShape);\n                // 这里只是把数据推进去了，计算可回退步骤和当前已回退步骤需要自己来做\n            }\n            else {\n                user.shapes.push(restoreShape);\n                this.shapes.push(restoreShape);\n            }\n            const getStartAndEnd = (offset) => {\n                let startAction = actions[0];\n                let endAction = actions[actionsLenth - 1];\n                let startOffset = this.getOwnerCoord(startAction);\n                let endOffset = this.getOwnerCoord(endAction);\n                if (offset) {\n                    return [startOffset.minus(offset), endOffset.minus(offset)];\n                }\n                return [startOffset, endOffset];\n            };\n            let needClearPix = true;\n            switch (tool) {\n                case 'free':\n                case 'erase': {\n                    // 这个是自由绘制,actions是持续的\n                    if (actionsLenth >= 2) {\n                        // 必须大于2\n                        let [startOffset, endOffset] = getStartAndEnd(coordinateOffset);\n                        // 初始化\n                        let start = startOffset.clone();\n                        let oldMid = startOffset.clone();\n                        let end = startOffset.clone();\n                        if (actionsLenth === 2) {\n                            CanvasHelper.line(shapeCtx, start, end, color);\n                        }\n                        else {\n                            // 循环\n                            for (let i = 1, len = actionsLenth - 1; i < len; i++) {\n                                // 跳过第一个和最后一个点\n                                let offset = this.getOwnerCoord(actions[i]).minus(coordinateOffset);\n                                const mid = Coord.middle(end, offset);\n                                const prevOldMid = oldMid.clone();\n                                const prevEnd = end.clone();\n                                oldMid.copy(mid);\n                                end.copy(offset);\n                                CanvasHelper.free(shapeCtx, prevOldMid, prevEnd, mid, color, size);\n                            }\n                            {\n                                // 最后一划\n                                const mid = Coord.middle(end, endOffset);\n                                const prevOldMid = oldMid.clone();\n                                const prevEnd = end.clone();\n                                CanvasHelper.free(shapeCtx, prevOldMid, mid, endOffset, color, size);\n                            }\n                            // 终止\n                        }\n                    }\n                    break;\n                }\n                case 'line': {\n                    let [start, end] = getStartAndEnd(coordinateOffset);\n                    CanvasHelper.line(shapeCtx, start, end, color);\n                    break;\n                }\n                case 'circle':\n                case 'solidCircle':\n                    {\n                        let [start, end] = getStartAndEnd(coordinateOffset);\n                        const { radius } = Shape.calculateRadius(tool, start, end);\n                        CanvasHelper.circle(shapeCtx, start, radius, tool === 'solidCircle', color);\n                        break;\n                    }\n                case 'ellipse':\n                case 'solidEllipse':\n                    {\n                        let [start, end] = getStartAndEnd(coordinateOffset);\n                        const { radius, xRadius, yRadius } = Shape.calculateRadius(tool, start, end);\n                        CanvasHelper.ellipse(shapeCtx, start, xRadius, yRadius, tool === 'solidEllipse', color);\n                        break;\n                    }\n                case 'rect':\n                case 'solidRect':\n                    {\n                        let [start, end] = getStartAndEnd(coordinateOffset);\n                        let xOffset = end.x - start.x;\n                        let yOffset = end.y - start.y;\n                        let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                        if (keyDown.shiftKey) {\n                            xOffset = sign(xOffset) * offset;\n                            yOffset = sign(yOffset) * offset;\n                        }\n                        CanvasHelper.rect(shapeCtx, start, xOffset, yOffset, tool === 'solidRect', color);\n                        break;\n                    }\n                case 'roundRect':\n                case 'solidRoundRect': {\n                    //这种是两点的图形，可以直接绘制\n                    let [start, end] = getStartAndEnd(coordinateOffset);\n                    let xOffset = end.x - start.x;\n                    let yOffset = end.y - start.y;\n                    let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                    if (keyDown.shiftKey) {\n                        xOffset = sign(xOffset) * offset;\n                        yOffset = sign(yOffset) * offset;\n                    }\n                    let cornerRadius = offset < size ? 2 : offset * 0.1;\n                    CanvasHelper.roundRect(shapeCtx, start, xOffset, yOffset, cornerRadius, tool === 'solidRoundRect', color);\n                    break;\n                }\n                case 'text': {\n                    let textAction = actions[0];\n                    let inputDomValue = textAction.text;\n                    let end = this.getOwnerCoord(textAction).minus(coordinateOffset);\n                    CanvasHelper.text(shapeCtx, end, inputDomValue, fontsize, true, color);\n                    needClearPix = false;\n                    break;\n                }\n                case 'fill': {\n                    // 这个是填充图层,填充图层传输的是base64的png图片\n                    let width = Math.abs(topLeft.x - bottomRight.x);\n                    let height = Math.abs(topLeft.y - bottomRight.y);\n                    yield new Promise((resolve) => {\n                        let image = new Image();\n                        image.src = imageData;\n                        // image.style.cssText = 'object-fit:///'\n                        image.onerror = () => resolve();\n                        image.onload = () => {\n                            console.log('fill');\n                            shapeCtx.drawImage(image, 0, 0, width, height);\n                            resolve();\n                        };\n                    });\n                    needClearPix = false;\n                    break;\n                }\n                case \"flag\": {\n                    // 不做任何操作\n                    needClearPix = false;\n                    break;\n                }\n                default: {\n                    needClearPix = false;\n                    const fullCaseChecker = tool;\n                    console.warn('尝试恢复未知的图形');\n                }\n            }\n            if (this.opt.clearTransparentPix && needClearPix) {\n                try {\n                    let imgData = shapeCtx.getImageData(0, 0, shapeWidth, shapeHeight);\n                    this.clearTransparentPix(imgData.data);\n                    shapeCtx.putImageData(imgData, shapeWidth, shapeHeight);\n                }\n                catch (err) {\n                    console.error(err);\n                }\n            }\n        });\n    }\n    mesure(points) {\n        const styleId = document.getElementById('worker-mesure-anim');\n        if (!styleId) {\n            document.head.insertAdjacentHTML('beforeend', `<style>@keyframes xxx-xxx{from{background:red;}to{background:green}}</style>`);\n        }\n        if (!Array.isArray(points)) {\n            points = [points];\n        }\n        points.forEach(point => {\n            this.container.container.insertAdjacentHTML('afterbegin', `<div style=\"z-index:2222;display:inline-block;position:absolute;background:red;top:${point.x}px;left:${point.y}px;width:2px;height:2px;animation:xxx-xxx 1s infinite\"></div>`);\n        });\n    }\n}\n","import * as CanvasHelper from '../DrawWorker/CanvasHelper';\nimport logger from '../../debug';\nimport { sign } from '../utils';\nclass Shape {\n    constructor({ user, mode, tool, size, color, start, actions, fontsize, keyDown }) {\n        let id = performance && performance.timing && performance.timing.navigationStart + performance.now();\n        this.id = id || Date.now();\n        this.user = user;\n        this.visible = true;\n        // 在画完之后把绘制轨迹截取为图片保存在Canvas中\n        this.ctx = document.createElement('canvas').getContext('2d');\n        const shapeCanvas = this.ctx.canvas;\n        const userCanvas = user.ctx.canvas;\n        shapeCanvas.style.width = userCanvas.style.width;\n        shapeCanvas.style.height = userCanvas.style.height;\n        this.ctx.lineWidth = user.ctx.lineWidth;\n        this.coordWidth = userCanvas.width;\n        this.coordHeight = userCanvas.height;\n        CanvasHelper.setCanvasPropSize(this.ctx, { width: this.coordWidth, height: this.coordHeight });\n        this.tool = tool;\n        this.mode = mode;\n        this.color = color;\n        this.size = size;\n        this.fontsize = fontsize;\n        // 缓存创建这个图层所使用的action，同步数据时，将会把创建这个图层使用的action给发送出去\n        if (Array.isArray(actions)) {\n            this.actions = actions;\n        }\n        else if (typeof actions === 'undefined') {\n            console.warn('action undefined! create a shape');\n            this.actions = [];\n        }\n        else {\n            this.actions = [actions];\n        }\n        this.keyDown = keyDown;\n        // 填充类型，保存一份填充点击的位置\n        this.start = start.toCoord(this.coordWidth, this.coordHeight);\n        // 绘制内容保存为Canvas上所处位置\n        this.corner = [this.start.clone(), this.start.clone()];\n        this.transform = [];\n        this.path = [];\n        this.zIndex = 1;\n        this.detail = Shape.calculateRadius(this.tool, this.start, this.start);\n    }\n    static calculateRadius(tool, start, end) {\n        const width = Math.abs(end.x - start.x);\n        const height = Math.abs(end.y - start.y);\n        let radius;\n        let xRadius;\n        let yRadius;\n        switch (tool) {\n            case 'circle':\n            case 'solidCircle':\n            case 'ellipse':\n            case 'solidEllipse':\n                {\n                    xRadius = width;\n                    yRadius = height;\n                    radius = xRadius > yRadius ? xRadius : yRadius;\n                    break;\n                }\n        }\n        return {\n            xRadius,\n            yRadius,\n            radius,\n            width,\n            height,\n        };\n    }\n    updateCorner(offset) {\n        const end = this.getCoord(offset);\n        const start = this.start;\n        const size = this.size;\n        const [topLeft, bottomRight] = this.corner;\n        const detail = Shape.calculateRadius(this.tool, start, end);\n        this.detail = detail;\n        const { xRadius, yRadius, radius, width, height, } = detail;\n        // const width = Math.abs(end.x - start.x);\n        // const height = Math.abs(end.y - start.y)\n        // let radius: number | undefined;\n        // let xRadius: number | undefined;\n        // let yRadius: number | undefined;\n        switch (this.tool) {\n            case 'solidCircle':\n            case 'circle': {\n                topLeft.x = start.x - radius - size;\n                topLeft.y = start.y - radius - size;\n                bottomRight.x = start.x + radius + size;\n                bottomRight.y = start.y + radius + size;\n                break;\n            }\n            case 'ellipse':\n            case 'solidEllipse': {\n                topLeft.x = start.x - xRadius - size;\n                topLeft.y = start.y - yRadius - size;\n                bottomRight.x = start.x + xRadius + size;\n                bottomRight.y = start.y + yRadius + size;\n                break;\n            }\n            case 'rect':\n            case 'roundRect':\n            case 'solidRect':\n            case 'solidRoundRect':\n            case 'line': {\n                // 从起点开始，计算其他的四个角角\n                topLeft.copy(start.clone().topLeft(end));\n                bottomRight.copy(start.clone().bottomRight(end));\n                break;\n            }\n            case 'text':\n            case 'free':\n            case \"erase\":\n                {\n                    // 划过的地方都需要添加到内容区域\n                    topLeft.topLeft(end);\n                    bottomRight.bottomRight(end);\n                    break;\n                }\n            case 'flag': // 这个没有corner和shape\n            case 'fill': // 填充的corner重新计算\n                // case 'select':\n                break;\n            default:\n                const fullCaseChecker = this.tool;\n        }\n        // 因为stroke有size ，所以会超出边界，所以需要将corner的大小拓展size的大小\n        if (this.tool !== 'fill' &&\n            this.tool !== 'text' &&\n            this.tool !== 'free' &&\n            this.tool !== 'erase') {\n            topLeft.x -= size;\n            topLeft.y -= size;\n            bottomRight.x += size;\n            bottomRight.y += size;\n        }\n        return detail;\n    }\n    expandCorner(size = this.size) {\n        const [topLeft, bottomRight] = this.corner;\n        topLeft.x -= size;\n        topLeft.y -= size;\n        bottomRight.x += size;\n        bottomRight.y += size;\n    }\n    destroy() {\n        logger.shape('shape delete ctx', this.user, this.ctx, this.actions);\n        // console.error(new Error('delete shapes'))\n        // delete this.user;\n        // delete this.ctx;\n        // delete this.actions;\n    }\n    toSnapshot({ width, height }) {\n        const { id, mode, tool, size, fontsize, color, start, actions, keyDown, } = this;\n        if (tool === 'fill') {\n            return {\n                id,\n                user: this.user.account,\n                mode, tool, size, fontsize, color,\n                start: start.toPoint(width, height).toString(),\n                optimized: true,\n                imageData: this.ctx.canvas.toDataURL(),\n                keyDown,\n                corner: this.corner.map(x => x.toPoint(width, height).toString()),\n                actions: actions\n                    .filter(x => x)\n                    .map(action => action.toString())\n                    .join(';') + ';'\n            };\n        }\n        else {\n            return {\n                id,\n                user: this.user.account,\n                mode, tool, size, fontsize, color,\n                start: start.toPoint(width, height).toString(),\n                optimized: false,\n                imageData: '',\n                corner: this.corner.map(x => x.toPoint(width, height).toString()),\n                keyDown,\n                actions: actions\n                    .filter(x => x)\n                    .map(action => action.toString())\n                    .join(';') + ';'\n            };\n        }\n    }\n    draw(displayCtx) {\n        let ownerCoord = this.user.end.toCoord(this.coordWidth, this.coordHeight);\n        switch (this.tool) {\n            case 'fill': {\n                CanvasHelper.fill(displayCtx, ownerCoord, this.color, this);\n                break;\n            }\n            case 'erase':\n            case 'free': {\n                CanvasHelper.free(displayCtx, this.getCoord(this.user.prevOldMid), this.getCoord(this.user.prevEnd), this.getCoord(this.user.oldMid), this.color, this.size);\n                break;\n            }\n            case 'line': {\n                CanvasHelper.line(displayCtx, this.getCoord(this.user.start), this.getCoord(this.user.end), this.color);\n                break;\n            }\n            case 'rect':\n            case 'solidRect': {\n                let endCoord = this.getCoord(this.user.end);\n                let startCoord = this.getCoord(this.user.start);\n                let xOffset = endCoord.x - startCoord.x;\n                let yOffset = endCoord.y - startCoord.y;\n                let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                if (this.user.keyDown.shiftKey) {\n                    xOffset = sign(xOffset) * offset;\n                    yOffset = sign(yOffset) * offset;\n                }\n                CanvasHelper.rect(displayCtx, startCoord, xOffset, yOffset, this.tool === 'solidRect', this.color);\n                break;\n            }\n            case 'roundRect':\n            case 'solidRoundRect': {\n                let endCoord = this.getCoord(this.user.end);\n                let startCoord = this.getCoord(this.user.start);\n                let xOffset = endCoord.x - startCoord.x;\n                let yOffset = endCoord.y - startCoord.y;\n                let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                const radius = offset < this.size ? 2 : offset * 0.1;\n                if (this.user.keyDown.shiftKey) {\n                    xOffset = sign(xOffset) * offset;\n                    yOffset = sign(yOffset) * offset;\n                }\n                CanvasHelper.roundRect(displayCtx, startCoord, xOffset, yOffset, radius, this.tool === 'solidRoundRect', this.color);\n                break;\n            }\n            case 'circle':\n            case 'solidCircle': {\n                let { radius } = this.detail;\n                let startCoord = this.getCoord(this.user.start);\n                CanvasHelper.circle(displayCtx, startCoord, radius, this.tool === 'solidCircle', this.color);\n                break;\n            }\n            case 'ellipse':\n            case 'solidEllipse': {\n                let startCoord = this.getCoord(this.user.start);\n                const { xRadius, yRadius } = this.detail;\n                CanvasHelper.ellipse(displayCtx, startCoord, xRadius, yRadius, this.tool === 'solidEllipse', this.color);\n                break;\n            }\n        }\n    }\n    freeMove(displayCtx) {\n        CanvasHelper.free(displayCtx, this.getCoord(this.user.prevOldMid), this.getCoord(this.user.prevEnd), this.getCoord(this.user.oldMid), this.color, this.size);\n    }\n    freeEnd(displayCtx) {\n        CanvasHelper.free(displayCtx, this.getCoord(this.user.prevOldMid), this.getCoord(this.user.oldMid), this.getCoord(this.user.end), this.color, this.size);\n    }\n    getCoord(offset) {\n        return offset.toCoord(this.coordWidth, this.coordHeight);\n    }\n}\nexport default Shape;\n","import * as CanvasHelper from '../DrawWorker/CanvasHelper';\nimport Point from './Point';\nimport { EventEmitter } from 'eventemitter3';\nimport logger from '../../debug';\nimport { CalibrateAction } from '../Actions';\nimport globalHub from './GlobalHub';\nclass User extends EventEmitter {\n    constructor(UID, maxUserHistory) {\n        super();\n        this.undoCount = 0; // 指示测销或者重做了多少次\n        this.account = UID;\n        // 默认为自由绘图模式\n        //zhongkai: 这个感叹号是语法错误吧？？。另外，每个用户创建一个画布是否有必要？\n        this.ctx = document.createElement('canvas').getContext('2d');\n        // this.ctx.canvas.style.transform = 'translate3d(0,0,0)'\n        this.ctx.canvas.className = 'wb_-_-' + UID;\n        CanvasHelper.setpixelated(this.ctx);\n        CanvasHelper.setLineStyle(this.ctx);\n        this.shapes = []; // 保存用户所做的可视操作的index\n        this.recycle = [];\n        this.mode = 'draw'; // 依据鼠标的状态划分状态\n        this.tool = 'flag';\n        this.flagPos = new Point(99999, 99999).toString();\n        this.size = 4;\n        this.color = '#000000';\n        this.fontsize = 24;\n        this.isMouseDown = false; // 鼠标未按下\n        this.start = new Point(0, 0);\n        this.oldMid = new Point(0, 0);\n        this.prevOldMid = new Point(0, 0);\n        this.end = new Point(0, 0);\n        this.prevEnd = new Point(0, 0);\n        // 只有null，才会在JSON格式化时发送出去\n        this.keyDown = {\n            altKey: false,\n            ctrlKey: false,\n            shiftKey: false,\n            which: -1,\n        }; // 记录当前按下的按键情况\n        // local undo/redo model\n        globalHub.emit('userUpdate', this.account, {\n            tool: this.tool,\n            size: this.size,\n            color: this.color,\n            fontsize: this.fontsize,\n            mode: this.mode,\n            keyDown: this.keyDown,\n        });\n        // private data\n        this.maxUserHistory = maxUserHistory;\n        this._resetCalibrate = this.getCalibrateAction();\n    }\n    // isFlag?: boolean;// TODO\n    get isFlag() {\n        return this.tool === 'flag';\n    }\n    update(opt) {\n        User.PROPS.forEach((key) => {\n            if (key in opt) {\n                this[key] = opt[key];\n            }\n        });\n        this.emit('update', this.account, opt);\n        globalHub.emit('userUpdate', this.account, opt);\n        logger.user('update user ', this, 'with ', opt);\n        // Object.assign(this, opt);\n    }\n    pushShape(shape) {\n        if (this.recycle.length) {\n            this.recycle.forEach(shape => shape.destroy());\n            this.recycle.length = 0;\n        }\n        this.undoCount = 0; // 指示说，当前测销或者重做向量为0了\n        this.shapes.push(shape);\n        this.configActiveShape();\n        // 用户的shapes改变了\n        this.emitUserShape();\n        return shape;\n    }\n    configActiveShape() {\n        console.log('config active shape ');\n        this.activeShape = this.shapes[this.shapes.length - 1];\n    }\n    undo() {\n        if (this.undoCount >= this.maxUserHistory) {\n            console.warn('reach maxUserHistory! abort undo');\n            return this.shapes.length;\n        }\n        this.undoCount++;\n        let shape = this.shapes.pop();\n        if (shape) {\n            this.recycle.push(shape);\n            this.configActiveShape();\n            logger.log('undo:', this);\n            this.emit('undo', this);\n            // 用户的shapes改变了\n            this.emitUserShape();\n        }\n        return this.shapes.length;\n    }\n    redo() {\n        if (this.undoCount === 0) {\n            // 说明没有undo过，所以没法重做\n            return this.recycle.length;\n        }\n        this.undoCount--;\n        let shape = this.recycle.pop();\n        if (shape) {\n            this.shapes.push(shape);\n            this.configActiveShape();\n            this.emit('redo', this);\n            // 用户的shapes改变了\n            this.emitUserShape();\n        }\n        return this.recycle.length;\n        ;\n    }\n    // 同步其他端的参数\n    getCalibrateAction() {\n        const { mode, tool, size, color, fontsize, isMouseDown, keyDown, flagPos } = this;\n        return new CalibrateAction({\n            mode, tool, size, color, fontsize,\n            isMouseDown, flagPos, keyDown\n        });\n    }\n    clearShapes() {\n        logger.user('user reset:', this);\n        this.shapes.forEach(shape => shape.destroy());\n        this.shapes = [];\n        this.recycle = [];\n        this.undoCount = 0;\n        // 用户的shapes改变了\n        this.emitUserShape();\n    }\n    emitUserShape() {\n        let { undoCount } = this; // 撤销或者重做的向量步数\n        let redoLength = this.recycle.length; // 当前可以前进的步数\n        let undoLength = this.shapes.length; // 当前可以减去的步数\n        let avaliableUndoCount = this.maxUserHistory - undoCount;\n        if (undoLength < avaliableUndoCount) {\n            avaliableUndoCount = undoLength;\n        }\n        globalHub.emit('userShapes', this.account, avaliableUndoCount, this.recycle.length);\n    }\n    /**\n     * 这个接口是用于数据同步后还原之后，需要对undoCount进行一个计算\n     */\n    guessMyUndoCount() {\n        this.undoCount = this.recycle.length;\n    }\n    whenMouseDown(offset) {\n        this.prevOldMid = offset.clone();\n        this.prevEnd = offset.clone();\n        this.start = offset.clone();\n        this.oldMid = offset.clone();\n        this.end = offset.clone();\n    }\n    whenMouseMove(offset) {\n        this.prevOldMid = this.oldMid.clone();\n        this.prevEnd = this.end.clone();\n        this.oldMid = Point.middle(this.end, offset);\n        this.end = offset.clone();\n    }\n    whenMouseUp(offset) {\n        this.prevOldMid = this.oldMid.clone();\n        this.prevEnd = this.end.clone();\n        this.oldMid = Point.middle(this.end, offset);\n        this.end = offset.clone();\n    }\n    reset() {\n        this.update(this._resetCalibrate);\n        globalHub.emit('userUpdate', this.account, this._resetCalibrate);\n    }\n    destroy() {\n        if (this.shapes.length || this.recycle.length) {\n            this.clearShapes();\n        }\n        logger.user('delete user ctx:', this);\n        // delete this.ctx;\n    }\n}\nUser.PROPS = [\n    'mode',\n    'tool',\n    'size',\n    'color',\n    'fontsize',\n    'isMouseDown',\n    'flagPos',\n    'keyDown',\n];\nexport default User;\n","import { EventEmitter } from \"eventemitter3\";\nimport { UserManager } from \"./UserManager\";\nimport * as CanvasHelper from './CanvasHelper';\nimport globalHub from \"../Model/GlobalHub\";\nclass ShapesManager extends EventEmitter {\n    constructor() {\n        super();\n        this.onUndo = (user) => {\n            let shape = user.recycle[user.recycle.length - 1];\n            this.remove(shape);\n            this.emit('undo', user);\n        };\n        this.onRedo = (user) => {\n            let shape = user.shapes[user.shapes.length - 1];\n            this.push(shape);\n            this.emit('redo', user);\n        };\n        this.visibles = []; // 存放所有相关的\n        this.transh = [];\n    }\n    push(shape) {\n        this.visibles.push(shape);\n        this.visibles.sort((a, b) => a.id - b.id);\n        // 全局的shapes改变了\n        globalHub.emit('globalShapes', this.visibles.length);\n    }\n    remove(shape) {\n        let index = this.visibles.indexOf(shape);\n        if (~index) {\n            this.visibles.splice(index, 1);\n            // 全局的shapes改变了\n            globalHub.emit('globalShapes', this.visibles.length);\n        }\n    }\n    wrap(another) {\n        if (another instanceof UserManager) {\n            this.clearListener(); // 清除之前的数据\n            this._usernameger = another;\n            this._usernameger.on('undo', this.onUndo);\n            this._usernameger.on('redo', this.onRedo);\n        }\n    }\n    clear() {\n        this.visibles.forEach(shape => {\n            shape.destroy();\n        });\n        this.visibles.length = 0;\n        globalHub.emit('globalShapes', this.visibles.length);\n    }\n    destroy() {\n        // TODO 清空一些数据\n        this.clearListener();\n    }\n    clearListener() {\n        if (this._usernameger) {\n            this._usernameger.removeAllListeners();\n            delete this._usernameger;\n        }\n    }\n    resizeCanvas(config) {\n        const { widthScale, heightScale } = config;\n        this.visibles.forEach(shape => {\n            let { width, height } = shape.ctx.canvas;\n            let newWidth = width * widthScale;\n            let newHeight = height * heightScale;\n            CanvasHelper.setCanvasPropSize(shape.ctx, {\n                height: newHeight, width: newWidth\n            });\n            // CanvasHelper.applyCanvasLayout(shape.ctx.canvas, config)\n            // 这里的corner计算可能有问题。如果不按照相同的比例来缩放图形的话\n            shape.corner[0].x *= widthScale;\n            shape.corner[0].y *= heightScale;\n            shape.corner[1].x *= widthScale;\n            shape.corner[1].y *= heightScale;\n        });\n    }\n}\nexport default ShapesManager;\n","import { EventEmitter } from \"eventemitter3\";\nimport * as CanvasHelper from './CanvasHelper';\nimport logger from '../../debug';\nexport default class ContainerManager extends EventEmitter {\n    constructor(container, opt) {\n        super();\n        this.paddingTop = 0; //  这个是画布距离容器顶部的距离\n        this.paddingLeft = 0; // 这个是画布距离容器左边的距离\n        this.canvasRatio = null;\n        // 调整窗口大小后，需要动态调整 canvas 大小，目前 width 为准等比例缩放\n        this.onResize = () => {\n            if (!this.container) {\n                return;\n            }\n            if (this.onResize.waiting) {\n                return;\n            }\n            else {\n                this.onResize.waiting = true;\n                setTimeout(() => {\n                    this.onResize.waiting = false;\n                    this.resize();\n                }, 300);\n            }\n        };\n        /**\n         * 重新设置画布大小，等比例\n         * @param {number} width 画布宽度\n         * @public\n         */\n        this.resize = () => {\n            const width = parseInt('' + this.container.clientWidth);\n            if (isNaN(width) || width <= 0)\n                throw new Error('白板宽度应是大于0的数字');\n            const height = parseInt('' + this.container.clientHeight);\n            if (isNaN(height) || height <= 0)\n                throw new Error('白板高度应是大于0的数字');\n            if (width === 0 || height === 0) {\n                return;\n            }\n            this.containerWidth = width;\n            this.containerHeight = height;\n            if (this.canvasRatio === null) {\n                this.calcCanvasLayout(width / height);\n            }\n            else {\n                this.calcCanvasLayout();\n            }\n            this.updateCanvasStyleSize({\n                // ownerCanvasHeight: ownerCanvasHeight!, ownerCanvasWidth: ownerCanvasWidth!,\n                paddingLeft: this.paddingLeft, paddingTop: this.paddingTop,\n                canvasWidth: this.canvasWidth, canvasHeight: this.canvasHeight,\n            });\n            console.log('resize');\n            if (this.opt && this.opt.identity === 'owner') {\n                if (this.canvasWidth && this.canvasHeight) {\n                }\n                this.emit('ownerCanavasUpdate', this.canvasWidth, this.canvasHeight);\n                const { containerHeight: prevHeight, containerWidth: prevWidth, ownerCanvasHeight, ownerCanvasWidth } = this;\n                this.updateCanvasPropSize(this.canvasWidth, this.canvasHeight);\n            }\n        };\n        this.onUndo = () => {\n            if (this.displayCtx && this.shapes && this.users) {\n                this.fullRender();\n                for (let user of this.users.all) {\n                    if (user.isMouseDown) {\n                        // 防止在clear时 擦除了其他用户正在绘制的笔记，\n                        this.displayCtx.drawImage(user.ctx.canvas, 0, 0);\n                    }\n                }\n            }\n        };\n        this.onRedo = () => {\n            if (this.displayCtx && this.shapes && this.users) {\n                this.fullRender();\n                for (let user of this.users.all) {\n                    if (user.isMouseDown) {\n                        // 防止在clear时 擦除了其他用户正在绘制的笔记，\n                        this.displayCtx.drawImage(user.ctx.canvas, 0, 0);\n                    }\n                }\n            }\n        };\n        this.inputDom = buildInputDom(); // 输入文字的输入框\n        this.opt = opt;\n        this.inited = false;\n        if (!container)\n            return;\n        this.setContainer(container, opt, true);\n    }\n    wrap(shapesmanager, users) {\n        this.clearListener();\n        this.shapes = shapesmanager;\n        this.users = users;\n        this.shapes.on('undo', this.onUndo);\n        this.shapes.on('redo', this.onRedo);\n    }\n    clearListener() {\n        if (this.shapes) {\n            this.shapes.removeAllListeners();\n        }\n    }\n    // 动态设置container\n    setContainer(container, opt, init) {\n        logger.m.containermanager('setContainer', container, opt);\n        if (!(container instanceof HTMLElement)) {\n            throw new Error('画板容器不是HTMLElement实例');\n        }\n        if (this.container) {\n            this.container.removeEventListener('resize', this.onResize);\n            this.container.remove();\n        }\n        this.container = container;\n        container.style.position = 'relative';\n        if (!opt) {\n            if (this.opt) {\n                opt = this.opt;\n            }\n            else {\n                opt = {};\n            }\n        }\n        this.containerHeight = container.clientHeight;\n        this.containerWidth = container.clientWidth;\n        console.warn('canvas height!', opt, this.canvasRatio);\n        // 计算容器宽高比例\n        if (this.canvasRatio === null) {\n            if (opt.height && opt.width) {\n                //如果用户设置了宽高\n                this.canvasHeight = opt.height;\n                this.canvasWidth = opt.width;\n                this.updateCanvasPropSize(this.canvasWidth, this.canvasHeight);\n                this.canvasRatio = this.canvasWidth / this.canvasHeight;\n                // 目前使用的是长宽比去放大图像或者缩小图像\n            }\n            else {\n                this.canvasRatio = this.containerWidth / this.containerHeight;\n            }\n        }\n        let canvasRatio = this.canvasRatio;\n        if (canvasRatio === null) {\n            canvasRatio = this.containerWidth / this.containerHeight;\n        }\n        if (typeof canvasRatio === 'number') {\n            this.calcCanvasLayout(canvasRatio);\n        }\n        this.opt = Object.assign(this.opt, opt);\n        // 设置自己容器的大小\n        if (!this.inited) {\n            this.initEssential();\n        }\n        // 更新 canvas 外部表现的大小，由style属性控制\n        this.updateCanvasStyleSize({\n            // ownerCanvasHeight: ownerCanvasHeight!, ownerCanvasWidth: ownerCanvasWidth!,\n            paddingLeft: this.paddingLeft, paddingTop: this.paddingTop,\n            canvasWidth: this.canvasWidth, canvasHeight: this.canvasHeight,\n        });\n        // 如果是初始化，并且是老师端，需要更新 canvas 内部表现的大小，由width属性控制\n        if (init && this.opt.identity === 'owner') {\n            this.updateCanvasPropSize(this.canvasWidth, this.canvasHeight);\n        }\n        logger.m.containermanager('setContainer/appendChild', this.displayCanvas, this.inputDom);\n        container.appendChild(this.displayCanvas);\n        container.appendChild(this.maskCanvas);\n        container.appendChild(this.inputDom);\n        this.adjustSize = false;\n        window.addEventListener('resize', this.onResize);\n        window.addEventListener(\"orientationchange\", this.onResize, false);\n    }\n    // 计算容器和canvas的布局\n    calcCanvasLayout(ratio = this.canvasRatio) {\n        let containerRatio = this.containerWidth / this.containerHeight;\n        if (containerRatio > ratio) {\n            // 说明容器的宽度要比canvas的宽度要宽一些，应该使用容器的高度作为标准\n            this.canvasHeight = Math.floor(this.containerHeight || 0);\n            this.canvasWidth = Math.floor(this.canvasHeight * ratio);\n        }\n        else {\n            this.canvasWidth = Math.floor(this.containerWidth || 0);\n            this.canvasHeight = Math.floor(this.canvasWidth / ratio);\n        }\n        let heightGap = this.containerHeight - this.canvasHeight;\n        let widthGap = this.containerWidth - this.canvasWidth;\n        this.paddingTop = Math.floor(heightGap / 2);\n        this.paddingLeft = Math.floor(widthGap / 2);\n    }\n    // 初始化canvas环境\n    initEssential() {\n        if (typeof this.containerWidth !== 'number')\n            throw new Error('画板宽度不是数字');\n        if (typeof this.containerHeight !== 'number')\n            throw new Error('画板高度不是数字');\n        const displayCanvas = document.createElement('canvas');\n        this.displayCtx = displayCanvas.getContext('2d');\n        // CanvasHelper.setpixelated(this.displayCtx)\n        CanvasHelper.setLineStyle(this.displayCtx);\n        displayCanvas.setAttribute('data-id', 'displayCanvas');\n        const displayStyle = `\n    position: relative;\n    top: ${this.paddingTop}px;\n    left: ${this.paddingLeft}px;\n    box-sizing: content-box;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-color: #ffffff;\n    background-size: contain;\n    z-index: ${2};\n    `.trim().replace('\\n', '');\n        displayCanvas.style.cssText = displayStyle;\n        this.displayCanvas = displayCanvas;\n        const maskCanvas = document.createElement('canvas');\n        this.maskCtx = maskCanvas.getContext('2d');\n        CanvasHelper.setpixelated(this.maskCtx);\n        CanvasHelper.setLineStyle(this.maskCtx);\n        this.maskCtx.lineWidth = 1;\n        maskCanvas.setAttribute('data-id', 'maskCanvas');\n        const maskStyle = `\n    position: absolute;\n    top: ${this.paddingTop};\n    left: ${this.paddingLeft};\n    box-sizing: content-box;\n    transform: translate3d(0,0,0);\n    z-index: ${500};\n    `.trim().replace('\\n', '');\n        maskCanvas.style.cssText = maskStyle;\n        this.maskCanvas = maskCanvas;\n        this.inited = true;\n        logger.m.containermanager('initCanvas');\n        // 对于可能出现在构造函数里的事件，需要异步抛出，避免初始化时，监听函数还未绑定\n        setTimeout(() => {\n            this.emit('init-canvas');\n            if (this.opt && this.opt.identity === 'owner') {\n                this.emit('ownerCanavasUpdate', this.canvasWidth, this.canvasHeight);\n            }\n        });\n    }\n    /**\n     * 按比例重新变换画布大小\n     * @param {number} scale 变换比例\n     * @public\n     */\n    updateCanvasStyleSize(config) {\n        const { canvasWidth, canvasHeight } = config;\n        if (this.maskCtx && this.maskCanvas) {\n            CanvasHelper.setCavansStyleSize(this.maskCtx, canvasWidth, canvasHeight);\n            CanvasHelper.applyCanvasLayout(this.maskCanvas, config);\n        }\n        if (this.displayCtx && this.displayCanvas) {\n            CanvasHelper.setCavansStyleSize(this.displayCtx, config.canvasWidth, config.canvasHeight);\n            CanvasHelper.applyCanvasLayout(this.displayCanvas, config);\n        }\n        // if (this.shapes) {\n        //   this.shapes.resizeCanvas(config)\n        // }\n        if (this.users) {\n            for (const user of this.users.all) {\n                CanvasHelper.setCavansStyleSize(user.ctx, canvasWidth, canvasHeight);\n                CanvasHelper.applyCanvasLayout(user.ctx.canvas, config);\n            }\n        }\n    }\n    updateCanvasPropSize(width, height) {\n        const { ownerCanvasHeight: prevHeight, ownerCanvasWidth: prevWidth } = this;\n        this.ownerCanvasWidth = width || 300;\n        this.ownerCanvasHeight = height || 300;\n        let opt = { width: this.ownerCanvasWidth, height: this.ownerCanvasHeight };\n        if (this.maskCtx) {\n            CanvasHelper.setCanvasPropSize(this.maskCtx, opt);\n        }\n        if (this.displayCtx) {\n            CanvasHelper.setCanvasPropSize(this.displayCtx, opt);\n        }\n        if (this.users) {\n            for (const user of this.users.all) {\n                CanvasHelper.setCanvasPropSize(user.ctx, { width, height });\n            }\n        }\n        if (this.shapes) {\n            this.shapes.resizeCanvas({\n                widthScale: width / prevWidth, heightScale: height / prevHeight\n            });\n        }\n        // 需要fullrender一下\n        this.fullRender();\n    }\n    // add UserCanvas \n    addUser(currentAccount, user) {\n        const canvas = user.ctx.canvas;\n        const account = user.account;\n        const displayCanvas = this.displayCanvas;\n        // canvas.style.transform = 'translate3d(0,0,0)'\n        canvas.style.position = 'absolute';\n        canvas.style.boxSizing = 'content-box';\n        // canvas.style.transform = 'translate3d(0,0,0)'\n        canvas.style.top = this.paddingTop + 'px';\n        canvas.style.left = this.paddingLeft + 'px';\n        canvas.style.width = this.canvasWidth + 'px';\n        canvas.style.height = this.canvasHeight + 'px';\n        canvas.width = this.ownerCanvasWidth;\n        canvas.height = this.ownerCanvasHeight;\n        logger.m.containermanager('addUser', account, user);\n        if (account === currentAccount) {\n            canvas.style.cursor = 'not-allowed';\n        }\n        else {\n            canvas.style.cursor = 'crosshair';\n        }\n        this.container.appendChild(canvas);\n        CanvasHelper.setpixelated(user.ctx);\n        CanvasHelper.setLineStyle(user.ctx);\n    }\n    destroy() {\n        this.container.removeChild(this.maskCanvas);\n        this.container.removeChild(this.displayCtx.canvas);\n        this.removeAllListeners();\n        window.removeEventListener('resize', this.onResize);\n        window.removeEventListener(\"orientationchange\", this.onResize, false);\n    }\n    fullRender() {\n        if (this.displayCtx) {\n            let playCanvas = this.displayCtx.canvas;\n            CanvasHelper.clearCtx(this.displayCtx);\n            this.displayCtx.getImageData(0, 0, 1, 1); // 这里是为了让canvas重新渲染一下，Chrome，偶尔会有Canvas不更新的问题\n            // playCanvas.width = playCanvas.width;\n        }\n        if (this.shapes && this.displayCtx) {\n            const targetCtx = this.displayCtx;\n            const shapes = this.shapes.visibles;\n            // logger.image(targetCtx.canvas.toDataURL(), 'beforeRender, displayCtx')\n            targetCtx.save();\n            logger.log('displayCtx');\n            for (let i = 0, len = shapes.length; i < len; i++) {\n                let shape = shapes[i];\n                console.assert(typeof shape.ctx !== 'undefined', 'shape ctx is ubdefined', shape);\n                let skip = shape.ctx && (shape.ctx.canvas.width === 0 || shape.ctx.canvas.height === 0);\n                logger.m.containermanager('render shape:', shape, 'skip', skip);\n                if (skip) {\n                    continue;\n                }\n                applyState(targetCtx, shape);\n                // if (shape.mode === 'fill') return fill(ctx, shape.corner[0], shape.color,shape);\n                // -0.5是为了防止重绘时的抖动\n                // targetCtx.drawImage(shape.ctx.canvas, shape.corner[0].x - 0.5, shape.corner[0].y)\n                if (shape.tool === 'erase') {\n                    console.log(targetCtx.globalCompositeOperation);\n                }\n                targetCtx.drawImage(shape.ctx.canvas, shape.corner[0].x, shape.corner[0].y);\n            }\n            targetCtx.restore();\n        }\n        else {\n            logger.m.containermanager('no render', this.shapes, this.displayCtx);\n        }\n    }\n}\nfunction buildInputDom() {\n    let inputDom = document.createElement('input');\n    inputDom.type = 'text';\n    inputDom.autofocus = true;\n    inputDom.className = 'wb-canvas__input';\n    let style = inputDom.style;\n    style.position = 'absolute';\n    style.display = 'none';\n    style.padding = '0px';\n    style.zIndex = '999';\n    return inputDom;\n}\n/**\n * 不同用户的模式、笔大小、颜色都是不同的，在对displayCtx操作时先应用状态\n * @param {string} account 对应用户的ID\n * @param {number} size 笔大小\n * @param {string} color 颜色\n * @param {string} mode 模式\n * @private\n */\nexport function applyState(targetCtx, shapeOrUser) {\n    const { ctx, size, color, tool } = shapeOrUser;\n    // logger.log('applyState', ctx, size, color, tool);\n    if (targetCtx === undefined) {\n        console.warn('applyState上下文为空!');\n        return;\n    }\n    targetCtx.lineWidth = size;\n    targetCtx.strokeStyle = color;\n    targetCtx.fillStyle = color;\n    // 如果 erase 设置了 workCtx 为 destination-out 取到的img不能做正常 撤销 重做\n    if (tool === 'erase' && targetCtx !== ctx) {\n        let opreation = targetCtx.globalCompositeOperation;\n        if (opreation !== 'destination-out') {\n            targetCtx.globalCompositeOperation = 'destination-out'; // 在新图外显示已有图像。只有新图外的已有图像部分会被显示，新图像是透明的。\n        }\n    }\n    else {\n        targetCtx.globalCompositeOperation = 'source-over'; // 默认。在已有图上显示新图像。\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport WTrack from './WhiteboardTrack';\nimport { App } from '../../core';\nimport EventEmitter from 'eventemitter3';\n/**\n * 白板3.0\n */\nexport default class V3Track extends WTrack {\n    constructor(params, opt) {\n        super(params, opt);\n        this.records = [];\n        this.connector = new Connector();\n        if (Array.isArray(params)) {\n            //白板3.0多个录像文件要合并到一起创建一个DrawManager来处理。\n            this.params = params[0];\n        }\n        const container = this.params['container'];\n        const drawPluginParams = this.params.drawPluginParams || {};\n        this.drawManager = new App(Object.assign(Object.assign({ account: this.viewer, container: container, connector: this.connector, isRecordPlayer: true, platform: 'web' }, drawPluginParams), { nim: {} }));\n        window.drawPlugin = this.drawManager;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const [state, listOfDataList] = yield this.fetchMultiData();\n            if (state === 'error') {\n                this.state = 'error';\n                return 'error';\n            }\n            else {\n                this.records = listOfDataList.map(dataList => {\n                    return Object.assign(Object.assign({}, dataList), { records: dataList.records.map(data => {\n                            return {\n                                record: JSON.parse(data.str),\n                                time: data.time\n                            };\n                        }) });\n                });\n                const accountSet = new Set();\n                this.records.forEach((data) => {\n                    data.records.forEach(res => {\n                        if (res.record.type === 'snapshot' && res.record.value.uid) {\n                            accountSet.add(res.record.value.uid);\n                        }\n                        if (res.record.type === 'snapshotArr' && Array.isArray(res.record.value) && res.record.value.length > 0) {\n                            if (res.record.value[0].uid) {\n                                accountSet.add(res.record.value[0].uid);\n                            }\n                        }\n                    });\n                });\n                this.viewerArr = Array.from(accountSet);\n                if (this.viewerArr.length > 0) {\n                    this.setViewer(this.viewerArr[0]);\n                }\n                this.state = 'ready';\n                return 'ready';\n            }\n        });\n    }\n    setViewer(viewer) {\n        var _a;\n        this.viewer = viewer;\n        (_a = this.drawManager) === null || _a === void 0 ? void 0 : _a.setViewer(viewer);\n    }\n    doSetTrack(time, forward, jumpTo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._seekTo(time);\n        });\n    }\n    /**\n     * 跳转到正确的channel对应的录像。如果cid发生变化，则使用addRecordData重置录像\n     * @param time\n     */\n    _seekTo(time) {\n        let recordListToPlay;\n        for (let i = 0; i < this.records.length - 1; i++) {\n            if (time < this.records[i + 1].beginAt) {\n                recordListToPlay = this.records[i];\n                break;\n            }\n        }\n        if (recordListToPlay === undefined) {\n            recordListToPlay = this.records[this.records.length - 1];\n        }\n        if (recordListToPlay.cid !== this.currCid) {\n            this.drawManager.addRecordData(recordListToPlay.records);\n        }\n        this.currCid = recordListToPlay.cid;\n        this.drawManager.seekTo(time - recordListToPlay.beginAt);\n    }\n    showTrackCb(el) {\n        // this.drawManager.addRecordData(this.records)\n    }\n}\nclass Connector extends EventEmitter {\n    sendData() { }\n    broadcastData() { }\n    sendSyncRequest() { }\n}\n"],"sourceRoot":""}