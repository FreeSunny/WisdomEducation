{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./node_modules/babel-runtime/helpers/classCallCheck.js","webpack://[name]/./node_modules/babel-runtime/helpers/createClass.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack://[name]/./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack://[name]/./node_modules/babel-runtime/helpers/inherits.js","webpack://[name]/./node_modules/core-js/library/modules/_core.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/assign.js","webpack://[name]/./node_modules/preact/dist/preact.min.js","webpack://[name]/./new_src/core/ops/Operation.ts","webpack://[name]/./node_modules/core-js/library/modules/_export.js","webpack://[name]/./node_modules/babel-runtime/core-js/get-iterator.js","webpack://[name]/./node_modules/core-js/library/modules/_wks.js","webpack://[name]/./node_modules/core-js/library/modules/_global.js","webpack://[name]/./node_modules/core-js/library/modules/_is-object.js","webpack://[name]/./node_modules/core-js/library/modules/_descriptors.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/keys.js","webpack://[name]/./node_modules/core-js/library/modules/_object-dp.js","webpack://[name]/./new_src/core/misc/shapeHelper.ts","webpack://[name]/./node_modules/core-js/library/modules/_an-object.js","webpack://[name]/./node_modules/css-loader/dist/runtime/api.js","webpack://[name]/./node_modules/style-loader/lib/addStyles.js","webpack://[name]/./node_modules/core-js/library/modules/_ctx.js","webpack://[name]/./node_modules/core-js/library/modules/_hide.js","webpack://[name]/./node_modules/babel-runtime/core-js/json/stringify.js","webpack://[name]/./node_modules/core-js/library/modules/_fails.js","webpack://[name]/./node_modules/core-js/library/modules/_has.js","webpack://[name]/./node_modules/core-js/library/modules/_to-object.js","webpack://[name]/./node_modules/babel-runtime/helpers/typeof.js","webpack://[name]/./node_modules/babel-runtime/core-js/promise.js","webpack://[name]/./node_modules/core-js/library/modules/_to-iobject.js","webpack://[name]/./node_modules/babel-runtime/helpers/slicedToArray.js","webpack://[name]/./node_modules/tapable/lib/Hook.js","webpack://[name]/./node_modules/core-js/library/modules/es6.string.iterator.js","webpack://[name]/./node_modules/core-js/library/modules/_iterators.js","webpack://[name]/./node_modules/tapable/lib/HookCodeFactory.js","webpack://[name]/./node_modules/eventemitter3/umd/eventemitter3.min.js","webpack://[name]/./new_src/component/toast/index.ts","webpack://[name]/./node_modules/core-js/library/modules/_object-keys.js","webpack://[name]/./node_modules/core-js/library/modules/web.dom.iterable.js","webpack://[name]/./new_src/core/ops/DrawOp/drawConfig.ts","webpack://[name]/./node_modules/core-js/library/modules/_property-desc.js","webpack://[name]/./node_modules/core-js/library/modules/_library.js","webpack://[name]/./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack://[name]/./node_modules/core-js/library/modules/_for-of.js","webpack://[name]/./node_modules/core-js/library/modules/_cof.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/define-properties.js","webpack://[name]/./new_src/core/ops/CameraOp/CameraBoundOp.ts","webpack://[name]/./node_modules/core-js/library/modules/_a-function.js","webpack://[name]/./node_modules/core-js/library/modules/_uid.js","webpack://[name]/./node_modules/core-js/library/modules/_object-pie.js","webpack://[name]/./node_modules/core-js/library/modules/_object-create.js","webpack://[name]/./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack://[name]/./node_modules/core-js/library/modules/_to-length.js","webpack://[name]/./new_src/core/ops/types.ts","webpack://[name]/./node_modules/babel-runtime/regenerator/index.js","webpack://[name]/./node_modules/core-js/library/modules/_wks-ext.js","webpack://[name]/./node_modules/core-js/library/modules/_meta.js","webpack://[name]/./node_modules/core-js/library/modules/_classof.js","webpack://[name]/./node_modules/core-js/library/modules/_object-sap.js","webpack://[name]/./node_modules/babel-runtime/core-js/set.js","webpack://[name]/./node_modules/core-js/library/modules/_to-primitive.js","webpack://[name]/./node_modules/core-js/library/modules/_iobject.js","webpack://[name]/./node_modules/core-js/library/modules/_defined.js","webpack://[name]/./node_modules/core-js/library/modules/_to-integer.js","webpack://[name]/./node_modules/core-js/library/modules/_shared-key.js","webpack://[name]/./node_modules/core-js/library/modules/_shared.js","webpack://[name]/./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gops.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-define.js","webpack://[name]/./node_modules/core-js/library/modules/_wks-define.js","webpack://[name]/./new_src/core/ops/util.ts","webpack://[name]/./new_src/core/ops/CameraOp/util.ts","webpack://[name]/./node_modules/core-js/library/modules/_dom-create.js","webpack://[name]/./node_modules/babel-runtime/core-js/symbol.js","webpack://[name]/./node_modules/core-js/library/modules/_an-instance.js","webpack://[name]/./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack://[name]/./node_modules/core-js/library/modules/_redefine-all.js","webpack://[name]/./node_modules/core-js/library/modules/_validate-collection.js","webpack://[name]/./src/debug.ts","webpack://[name]/./node_modules/core-js/library/modules/_object-gopd.js","webpack://[name]/./new_src/core/container/index.ts","webpack://[name]/./node_modules/babel-runtime/core-js/object/create.js","webpack://[name]/./new_src/core/ops/DrawOp/MouseMoveDrawOp.ts","webpack://[name]/./new_src/core/ops/SelectOp/index.ts","webpack://[name]/./new_src/core/config.ts","webpack://[name]/./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack://[name]/./node_modules/core-js/library/modules/_object-keys-internal.js","webpack://[name]/./node_modules/core-js/library/modules/_redefine.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gpo.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-step.js","webpack://[name]/./node_modules/core-js/library/modules/_is-array.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gopn.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/define-property.js","webpack://[name]/./node_modules/core-js/library/modules/_object-dps.js","webpack://[name]/./node_modules/core-js/library/modules/_html.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-call.js","webpack://[name]/./node_modules/core-js/library/modules/_is-array-iter.js","webpack://[name]/./node_modules/core-js/library/modules/_new-promise-capability.js","webpack://[name]/./node_modules/core-js/library/modules/_set-species.js","webpack://[name]/./node_modules/babel-runtime/core-js/array/from.js","webpack://[name]/./node_modules/core-js/library/modules/_collection-strong.js","webpack://[name]/./node_modules/core-js/library/modules/_collection.js","webpack://[name]/./node_modules/core-js/library/modules/_collection-to-json.js","webpack://[name]/./node_modules/core-js/library/modules/_set-collection-of.js","webpack://[name]/./node_modules/core-js/library/modules/_set-collection-from.js","webpack://[name]/./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack://[name]/./new_src/core/types.ts","webpack://[name]/./new_src/core/ops/TextOp/textConfig.ts","webpack://[name]/./new_src/core/ops/ImageOp/util.ts","webpack://[name]/./new_src/core/resource/resourceCache.ts","webpack://[name]/./new_src/core/page/util.ts","webpack://[name]/./new_src/core/animation/index.ts","webpack://[name]/./src/core/Itypes.ts","webpack://[name]/./src/core/Actions/index.ts","webpack://[name]/./node_modules/core-js/library/modules/es6.symbol.js","webpack://[name]/./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack://[name]/./new_src/core/misc/dom-events.ts","webpack://[name]/./node_modules/process/browser.js","webpack://[name]/./node_modules/babel-runtime/core-js/map.js","webpack://[name]/(webpack)/buildin/module.js","webpack://[name]/./node_modules/babel-runtime/core-js/number/is-integer.js","webpack://[name]/./new_src/core/misc/dispatcher.ts","webpack://[name]/./src/core/utils.ts","webpack://[name]/./node_modules/core-js/library/fn/object/assign.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.assign.js","webpack://[name]/./node_modules/core-js/library/modules/_object-assign.js","webpack://[name]/./node_modules/core-js/library/modules/_array-includes.js","webpack://[name]/./node_modules/core-js/library/modules/_to-absolute-index.js","webpack://[name]/./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack://[name]/./node_modules/core-js/library/fn/symbol/iterator.js","webpack://[name]/./node_modules/core-js/library/modules/_string-at.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-create.js","webpack://[name]/./node_modules/core-js/library/modules/es6.array.iterator.js","webpack://[name]/./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack://[name]/./node_modules/core-js/library/fn/symbol/index.js","webpack://[name]/./node_modules/core-js/library/modules/_enum-keys.js","webpack://[name]/./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack://[name]/./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack://[name]/./node_modules/core-js/library/modules/_species-constructor.js","webpack://[name]/./node_modules/core-js/library/modules/_task.js","webpack://[name]/./node_modules/core-js/library/modules/_perform.js","webpack://[name]/./node_modules/core-js/library/modules/_promise-resolve.js","webpack://[name]/./node_modules/core-js/library/modules/_iter-detect.js","webpack://[name]/./node_modules/core-js/library/fn/object/define-property.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.define-property.js","webpack://[name]/./node_modules/core-js/library/fn/json/stringify.js","webpack://[name]/./node_modules/core-js/library/fn/object/keys.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.keys.js","webpack://[name]/./node_modules/core-js/library/fn/get-iterator.js","webpack://[name]/./node_modules/core-js/library/modules/core.get-iterator.js","webpack://[name]/./new_src/core/misc/util.ts","webpack://[name]/./node_modules/core-js/library/fn/set.js","webpack://[name]/./node_modules/core-js/library/modules/es6.set.js","webpack://[name]/./node_modules/core-js/library/modules/_array-methods.js","webpack://[name]/./node_modules/core-js/library/modules/_array-species-create.js","webpack://[name]/./node_modules/core-js/library/modules/_array-species-constructor.js","webpack://[name]/./node_modules/core-js/library/modules/es7.set.to-json.js","webpack://[name]/./node_modules/core-js/library/modules/_array-from-iterable.js","webpack://[name]/./node_modules/core-js/library/modules/es7.set.of.js","webpack://[name]/./node_modules/core-js/library/modules/es7.set.from.js","webpack://[name]/./node_modules/tapable/lib/SyncBailHook.js","webpack://[name]/./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack://[name]/./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack://[name]/./node_modules/core-js/library/modules/_set-proto.js","webpack://[name]/./node_modules/core-js/library/fn/object/create.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.create.js","webpack://[name]/./new_src/core/ops/DrawOp/PenOp.ts","webpack://[name]/./new_src/assets/cursors/pen.svg","webpack://[name]/./new_src/core/ops/DrawOp/LineOp.ts","webpack://[name]/./new_src/core/ops/SelectOp/SelectBase.ts","webpack://[name]/./new_src/core/ops/DrawOp/RectOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/EllipseOp.ts","webpack://[name]/./new_src/core/misc/text.ts","webpack://[name]/./node_modules/style-loader/lib/urls.js","webpack://[name]/./new_src/assets/cursors/element-eraser.svg","webpack://[name]/./new_src/component/toast/toast-ctrl.ts","webpack://[name]/./new_src/component/toast/toast.ts","webpack://[name]/./node_modules/core-js/library/fn/number/is-integer.js","webpack://[name]/./node_modules/core-js/library/modules/es6.number.is-integer.js","webpack://[name]/./node_modules/core-js/library/modules/_is-integer.js","webpack://[name]/./new_src/component/toast/toast.less?4a22","webpack://[name]/./new_src/component/toast/toast.less","webpack://[name]/./new_src/core/board/index.ts","webpack://[name]/./new_src/core/page/index.ts","webpack://[name]/./new_src/core/board/actions.ts","webpack://[name]/./new_src/core/room/util.ts","webpack://[name]/./new_src/util/validate.ts","webpack://[name]/./src/core/Model/GlobalHub.ts","webpack://[name]/./src/core/DrawWorker/CanvasHelper.ts","webpack://[name]/./node_modules/uuid/dist/esm-browser/rng.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/regex.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/validate.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v1.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/parse.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v35.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/md5.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v3.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v4.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/sha1.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/v5.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/nil.js","webpack://[name]/./node_modules/uuid/dist/esm-browser/version.js","webpack://[name]/./node_modules/util/util.js","webpack://[name]/./node_modules/debug/src/index.js","webpack://[name]/./src/core/ActionUtils.ts","webpack://[name]/./src/core/Model/Point.ts","webpack://[name]/./node_modules/core-js/library/fn/promise.js","webpack://[name]/./node_modules/core-js/library/modules/es6.promise.js","webpack://[name]/./node_modules/core-js/library/modules/_invoke.js","webpack://[name]/./node_modules/core-js/library/modules/_microtask.js","webpack://[name]/./node_modules/core-js/library/modules/_user-agent.js","webpack://[name]/./node_modules/core-js/library/modules/es7.promise.finally.js","webpack://[name]/./node_modules/core-js/library/modules/es7.promise.try.js","webpack://[name]/./new_src/core/index.ts","webpack://[name]/./node_modules/babel-runtime/core-js/is-iterable.js","webpack://[name]/./node_modules/core-js/library/fn/is-iterable.js","webpack://[name]/./node_modules/core-js/library/modules/core.is-iterable.js","webpack://[name]/./node_modules/core-js/library/fn/array/from.js","webpack://[name]/./node_modules/core-js/library/modules/es6.array.from.js","webpack://[name]/./node_modules/core-js/library/modules/_create-property.js","webpack://[name]/./new_src/core/ops/OpsManager.ts","webpack://[name]/./node_modules/tapable/lib/index.js","webpack://[name]/./node_modules/tapable/lib/Tapable.js","webpack://[name]/./node_modules/util/support/isBufferBrowser.js","webpack://[name]/./node_modules/inherits/inherits_browser.js","webpack://[name]/./node_modules/core-js/library/fn/object/define-properties.js","webpack://[name]/./node_modules/core-js/library/modules/es6.object.define-properties.js","webpack://[name]/./node_modules/tapable/lib/SyncHook.js","webpack://[name]/./node_modules/tapable/lib/SyncWaterfallHook.js","webpack://[name]/./node_modules/tapable/lib/SyncLoopHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncParallelHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncParallelBailHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncSeriesHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncSeriesBailHook.js","webpack://[name]/./node_modules/tapable/lib/AsyncSeriesWaterfallHook.js","webpack://[name]/./node_modules/tapable/lib/HookMap.js","webpack://[name]/./node_modules/core-js/library/fn/map.js","webpack://[name]/./node_modules/core-js/library/modules/es6.map.js","webpack://[name]/./node_modules/core-js/library/modules/es7.map.to-json.js","webpack://[name]/./node_modules/core-js/library/modules/es7.map.of.js","webpack://[name]/./node_modules/core-js/library/modules/es7.map.from.js","webpack://[name]/./node_modules/tapable/lib/MultiHook.js","webpack://[name]/./new_src/core/misc/drawCurve.ts","webpack://[name]/./new_src/core/ops/EditOp/MoveOp.ts","webpack://[name]/./new_src/core/ops/EditOp/ScaleOp.ts","webpack://[name]/./new_src/core/ops/EditOp/DeleteOp.ts","webpack://[name]/./new_src/core/ops/HistoryOp/UndoOp.ts","webpack://[name]/./new_src/core/ops/HistoryOp/RedoOp.ts","webpack://[name]/./new_src/core/ops/ClearOp/index.ts","webpack://[name]/./new_src/core/ops/EraserOp/index.ts","webpack://[name]/./new_src/core/ops/TextOp/index.ts","webpack://[name]/./new_src/core/ops/TextOp/UIHelper.ts","webpack://[name]/./new_src/core/ops/TextOp/TextToolbar.ts","webpack://[name]/./new_src/core/ops/TextOp/TextToolbar.less?9e81","webpack://[name]/./new_src/core/ops/TextOp/TextToolbar.less","webpack://[name]/./new_src/core/ops/PageOp/index.ts","webpack://[name]/./new_src/core/ops/ImageOp/index.ts","webpack://[name]/./new_src/assets/image/imageIsLoading.svg","webpack://[name]/./new_src/core/ops/BoardOp/index.ts","webpack://[name]/./new_src/core/ops/EditOp/DupliateOp.ts","webpack://[name]/./node_modules/lodash.clonedeep/index.js","webpack://[name]/(webpack)/buildin/global.js","webpack://[name]/./new_src/core/ops/DrawOp/PenArrowOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/LineArrowOp.ts","webpack://[name]/./new_src/core/ops/EraserOp/ElementEraserOp.ts","webpack://[name]/./new_src/core/ops/LaserOp/index.ts","webpack://[name]/./new_src/core/ops/LockOp/index.ts","webpack://[name]/./new_src/core/ops/ImageOp/BackgroundOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/PanOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/ZoomOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/ResetCameraOp.ts","webpack://[name]/./new_src/core/ops/MousePointerOp/index.ts","webpack://[name]/./new_src/assets/cursors/cursor.svg","webpack://[name]/./new_src/core/ops/CameraOp/ResizeOp.ts","webpack://[name]/./new_src/core/ops/CameraOp/FitToContent.ts","webpack://[name]/./new_src/core/ops/CameraOp/FitToDoc.ts","webpack://[name]/./new_src/core/ops/DrawOp/RectFillOp.ts","webpack://[name]/./new_src/core/ops/DrawOp/EllipseFillOp.ts","webpack://[name]/./new_src/core/ops/VideoOp/index.ts","webpack://[name]/./new_src/core/room/index.ts","webpack://[name]/./new_src/core/page/render.ts","webpack://[name]/./new_src/core/page/completeFlow.ts","webpack://[name]/./new_src/core/page/incrementFlow.ts","webpack://[name]/./new_src/core/room/actions.ts","webpack://[name]/./new_src/core/dataHub/index.ts","webpack://[name]/./new_src/core/previewFactory/index.ts","webpack://[name]/./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime-module.js","webpack://[name]/./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime.js","webpack://[name]/./new_src/core/camera/index.ts","webpack://[name]/./new_src/core/player/index.ts","webpack://[name]/./new_src/core/simulator/index.ts","webpack://[name]/./new_src/core/camera/vision.ts","webpack://[name]/./new_src/core/media/util.ts","webpack://[name]/./node_modules/is-base64/is-base64.js","webpack://[name]/./new_src/recordPlayer/utils.ts","webpack://[name]/./node_modules/pako/dist/pako.min.js","webpack://[name]/./new_src/recordPlayer/Track/Track.ts","webpack://[name]/./node_modules/debug/src/common.js","webpack://[name]/./src/core/DrawWorker/UserManager.ts","webpack://[name]/./src/core/validator.ts","webpack://[name]/./new_src/recordPlayer/Track/WhiteboardTrack.ts","webpack://[name]/./new_src/recordPlayer/index.ts","webpack://[name]/./new_src/recordPlayer/Timeline.ts","webpack://[name]/./new_src/recordPlayer/TickTick.ts","webpack://[name]/./new_src/recordPlayer/ToolUI.tsx","webpack://[name]/./new_src/recordPlayer/assets/pause.svg","webpack://[name]/./new_src/recordPlayer/assets/play.svg","webpack://[name]/./new_src/recordPlayer/ToolUI.less?7363","webpack://[name]/./new_src/recordPlayer/ToolUI.less","webpack://[name]/./new_src/recordPlayer/Track/VideoTrack.ts","webpack://[name]/./new_src/recordPlayer/Track/Wb_V1V2.ts","webpack://[name]/./new_src/recordPlayer/Track/Record.ts","webpack://[name]/./src/core/ActionUtils.old.ts","webpack://[name]/./node_modules/debug/src/browser.js","webpack://[name]/./node_modules/ms/index.js","webpack://[name]/./node_modules/debug/src/node.js","webpack://[name]/./node_modules/tty-browserify/index.js","webpack://[name]/./node_modules/supports-color/browser.js","webpack://[name]/./src/core/index.ts","webpack://[name]/./src/simulator.ts","webpack://[name]/./src/core/ActionManager.ts","webpack://[name]/./src/core/adapterDraw.ts","webpack://[name]/./src/core/DrawWorker/index.ts","webpack://[name]/./src/core/Model/Shape.ts","webpack://[name]/./src/core/Model/User.ts","webpack://[name]/./src/core/DrawWorker/ShapesManger.ts","webpack://[name]/./src/core/DrawWorker/ContainerManager.ts","webpack://[name]/./new_src/recordPlayer/Track/Wb_V3.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","default","instance","Constructor","TypeError","obj","_defineProperty","_defineProperty2","defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","_typeof2","_typeof3","self","ReferenceError","_setPrototypeOf2","_interopRequireDefault","_create2","subClass","superClass","constructor","__proto__","core","version","__e","e","W","arguments","P","push","children","pop","a","T","nodeName","attributes","M","vnode","current","__d","V","debounceRendering","D","x","splitText","_componentConstructor","__n","toLowerCase","u","defaultProps","parentNode","removeChild","style","cssText","E","test","innerHTML","__html","replace","substring","addEventListener","_","removeEventListener","__l","removeAttribute","removeAttributeNS","setAttributeNS","setAttribute","className","this","type","event","f","A","shift","afterMount","componentDidMount","H","R","ownerSVGElement","B","h","appendChild","_component","nodeValue","document","createTextNode","replaceChild","v","__preactattr_","N","createElementNS","createElement","firstChild","nextSibling","dangerouslySetInnerHTML","y","childNodes","b","g","w","C","k","__k","trim","insertBefore","ref","lastChild","previousSibling","F","render","U","__b","splice","__x","__r","getDerivedStateFromProps","base","componentWillMount","componentWillReceiveProps","context","__c","__p","syncComponentUpdates","state","__s","S","shouldComponentUpdate","componentWillUpdate","getChildContext","getSnapshotBeforeUpdate","L","__u","componentDidUpdate","afterUpdate","__h","beforeUnmount","componentWillUnmount","Promise","resolve","then","setTimeout","setState","forceUpdate","j","cloneElement","slice","createRef","Component","rerender","options","lastGlobalOpId","lastSnapshotInfo","boardName","pageIndex","dependOn","undefined","timestamp","newOpFlag","genNewOpId","gen","inProgress","Array","isArray","join","includes","Operation","app","opsManager","registerHooks","exec","information","args","message","activate","console","warn","currPage","getNextOpId","getOpId","data","globalSnapshotTypes","indexOf","dispatchGlobalAction","dispatchPageAction","dispatchBoardAction","currBoard","room","boards","currIndex","now","Date","valueOf","opId","reuseOpType","account","newId","prepareNewOpId","snapshot","category","board","page","time","uid","dispatch","Number","dispatcher","emit","ctx","opts","draw","div","partial","container","isKeyDown","drawOpsOfPage","isMouseDown","opQueue","global","hide","has","$export","source","own","out","IS_FORCED","IS_GLOBAL","G","IS_STATIC","IS_PROTO","IS_BIND","IS_WRAP","expProto","apply","Function","virtual","store","USE_SYMBOL","Math","__g","it","anObject","IE8_DOM_DEFINE","toPrimitive","dP","O","Attributes","distSqrt","dist","rectCollide","rect1","rect2","sx","sy","pointCollideWithPoint","point","another","pointCollideWithLine","sp","ep","pointInRect","rect","getTransformedBoundary","dx","dy","scaleX","factor","coordinate","scaleY","getTransformedPoint","combineBoundary","b1","b2","min","ex","max","ey","getBoundaryBoxFromTwoPoints","p1","p2","sqrt","getArrowPoints","size","lastTwoPoints","tipXOffset","wingsXOffset","lineCoef","getLineCoef","arrowTipX","getXFromCoefAndOffset","arrowTipY","getLineFromPointsY","arrowWing1X","arrowWing1Y","getVerticalLineY","arrowWing2X","points","refPoint","z","pow","referencePoint","coef","isObject","useSourceMap","list","toString","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","sourceRoot","concat","cssWithMappingToString","mediaQuery","alreadyImportedModules","id","fn","memo","stylesInDom","isOldIE","all","atob","getTarget","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","parts","addStyle","listToStyles","newStyles","part","css","media","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","before","removeStyleElement","idx","createStyleElement","attrs","nonce","getNonce","addAttrs","el","keys","forEach","update","remove","result","transform","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssNode","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","aFunction","that","createDesc","defined","_iterator2","_symbol2","_typeof","IObject","_isIterable3","_getIterator3","arr","_arr","_n","_d","_e","_s","_i","next","done","err","sliceIterator","Hook","_args","taps","interceptors","_call","promise","_promise","callAsync","_callAsync","_x","compile","_runRegisterInterceptors","_insert","interceptor","register","newOptions","mergeOptions","opt","_withOptions","_withOptionsBase","newHook","tapAsync","tap","tapPromise","_resetCompilation","stage","xStage","delete","createCompileDelegate","_createCall","$at","String","iterated","_t","HookCodeFactory","config","init","header","onError","onResult","resultReturns","onDone","rethrowIfPossible","after","errorHelperUsed","code","deinit","needContext","getInterceptor","tapIndex","hasTapCached","getTap","getTapFn","cbCode","doneReturns","firstAsync","findIndex","somethingReturns","doneBreak","skipDone","callTap","error","syncOnly","every","loop","callTapsSeries","onTap","run","allArgs","EventEmitter3","require","1","once","_events","_eventsCount","eventNames","getOwnPropertySymbols","listeners","listenerCount","removeListener","on","removeAllListeners","off","addListener","prefixed","EventEmitter","showToast","option","msg","top","param","ToastCtrl","show","hideToast","$keys","enumBugKeys","Iterators","TO_STRING_TAG","DOMIterables","split","NAME","Collection","proto","drawConfig","strokeColor","pointsPerBatch","strokeWidth","opacity","color","width","bitmap","def","TAG","tag","stat","isArrayIter","toLength","getIterFn","BREAK","RETURN","iterable","entries","ITERATOR","step","iterator","iterFn","convertToCameraBoundSnapshot","camera","snapshotData","boundary","getNextCameraBound","height","skipUndo","animate","CameraBoundOp","description","sendCameraBound","px","random","propertyIsEnumerable","dPs","IE_PROTO","Empty","createDict","iframeDocument","iframe","display","src","contentWindow","open","write","lt","close","Properties","_from","_from2","arr2","toInteger","snapshotOutOfNormalFlowTypes","cameraSnapshotTypes","META","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","meta","KEY","NEED","fastKey","getWeak","onFreeze","cof","ARG","tryGet","callee","fails","exp","val","ceil","floor","isNaN","shared","copyright","LIBRARY","redefine","$iterCreate","setToStringTag","getPrototypeOf","BUGGY","returnThis","Base","DEFAULT","IS_SET","FORCED","methods","IteratorPrototype","getMethod","kind","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","values","wksExt","$Symbol","charAt","findOpsUnderRect","drawOps","mouseBoundary","res","snapshotSelectable","findOpsUnderMouse","mx","my","opIds","op","opMap","ifMouseOnOp","nonSelectableOpTypes","locked","roundRect","idsChanged","currIds","lastIds","arrayDeduce","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","stroke","fill","drawUserName","scale","py","bgColor","fontSize","textPadding","rectMarginBottom","rectHeight","textFillColor","font","textWidth","measureText","fillStyle","textAlign","textBaseline","fillText","shouldDispatch","vision","is","forbiddenField","classof","getIteratorMethod","safe","TYPE","logger","mouse","h5","package","shape","user","command","image","url","note","Image","onload","log","adapter","worker","containermanager","shapemanager","usermanager","syncmanager","localStorage","getItem","pIE","toIObject","gOPD","getOwnPropertyDescriptor","DPI","devicePixelRatio","Container","elInitW","elInitH","isLandscape","elesToResize","left","keyPressed","maybeClick","mouseEventCache","lastMx","lastMy","lastClientX","lastClientY","_resize","_a","getBoundingClientRect","containerRect","ifDeviceSupportOrientation","ele","HTMLCanvasElement","setElePosition","backgroundEl","imageEl","domEl","textAreaEl","lineCap","lineJoin","frontCtx","laserCtx","resize","unbindEvents","_ro","disconnect","_mousedown","_mouseleave","_mousemove","_mouseup","_mousewheel","_keyup","_keydown","body","_contextmenu","getEventClientPos","clientX","clientY","MouseEvent","touches","convertToPointInWorld","preventDefault","mouseEmitTimer","_emitMouseEvents","clearTimeout","mousemove","_b","click","mouseup","mouseleave","mousewheel","toLocaleLowerCase","keyup","keydown","position","setBackgroundColor","setupDivElement","temp","setupCanvasElement","canvas","frontCanvas","laserCanvas","backgroundColor","appConfig","canvas_bg_color","_bindEvents","transformOrigin","pointerEvents","getContext","parentContainer","MutationObserver","mutationList","observer","observe","attributeFilter","right","bottom","eventArg","MouseMoveDrawOp","shouldSaniteEp","movedDuringMouseDown","sampleSeq","hooks","pageChange","handlePageChange","beginBatch","isTargetOnContainer","cursor","toFixed","getSnapshot","getBoundaryRectOfLine","lineWidth","strokeOrFill","getBoundaryRectOfFreeDraw","save","globalAlpha","strokeStyle","restore","sanityEp","SelectOp","fillColor","eleContainerColor","eleContainerWidth","eleContainerPadding","selectedOpIds","inProgressSelectedOpIds","setLineWidth","setFillColor","setStrokeColor","setEleContainerColor","setEleContainerWidth","setEleContainerPadding","opChange","handleOpChange","newType","currOp","idsBeenSelected","lastSelectedOpIds","blurAt","nickname","drawSelectBox","boundaryArr","drawSelectedElementBox","showSelectNickname","strokeRect","fillRect","padding","reduce","dotSize","ids","selectChange","SelectBase","DEFAULT_FONTSIZE","setAppConfig","partialConfig","previewFactory","getAppConfig","showCursorNickname","showLaserNickname","cameraTransformEnabled","arrayIndexOf","names","toObject","ObjectProto","arg","hiddenKeys","getOwnPropertyNames","getKeys","documentElement","ret","ArrayProto","PromiseCapability","reject","$$resolve","$$reject","DESCRIPTORS","SPECIES","redefineAll","anInstance","forOf","$iterDefine","setSpecies","validate","SIZE","getEntry","entry","_f","getConstructor","wrapper","IS_MAP","ADDER","_l","clear","prev","callbackfn","setStrong","_k","each","common","IS_WEAK","_c","IS_ADDER","from","COLLECTION","of","mapping","cb","mapFn","nextItem","PlatformArray","TouchPlatformArray","CustomFontName","DefaultFontName","ValidTypes","textConfig","fontFamily","fontFaceSet","appendFontFaceStyle","format","fontFace","fontName","fontFaceStr","newStyle","getImagePartOutOfContainer","addImage","pageName","pageNames","pages","resourceLoaded","img","getResource","dispatchImage","addWaitingResource","fetchResource","removeWaitingResource","preview","supportToDataUrl","cloneNode","userSelect","imageRendering","pxOverBorder","clipPath","drawImage","screenBound","getContainerWorldRect","centerX","centerY","getImageProperPosition","sanityWidth","sanityHeight","getBackgroundImagePorperPosition","resourceCache","videoResourceCache","crossOriginResourceCache","resourceReadyListeners","retryCount","crossOrigin","setResourceLoadedCallback","fetchVideoResource","isVideo","resource","onloadedmetadata","onerror","delay","complete","videoResourceLoaded","video","videoWidth","videoHeight","getVideoResource","loadingUrl","transformOp","drawOp","trasformOp","opNeedRefresh","drawOpTypes","getSelectedOpIds","currSelect","lastSelectOfUser","drawOpQueue","transitionToCameraBound","callback","end","start","total","isRecordPlayer","curr","percent","setCameraBound","cancelAnimationFrame","timer","requestAnimationFrame","WActions","StateRelatedActions","CALIBRATE","FILE","WB_MODE","WB_TOOL","encodeNumber","decodeNumber","str","parseFloat","unstringify","originStr","parse","IAction","StartAction","START","pis","MoveAction","MOVE","EndAction","END","RevokeAction","REVOKE","SerialAction","SERIAL","ClearAction","accounts","CLEAR","ClearAckAction","CLEAR_ACK","SyncRequestAction","SYNC_REQUEST","SyncAction","sync","SYNC","SyncPrepareAction","SYNC_PREPARE","SyncPrepareAckAction","SYNC_PREPARE_ACK","LaserPenAction","LASER_PEN","LaserPenEndAction","LASER_PEN_END","FileAction","file","fileType","docId","currentPage","pageCount","urlStr","h5Cmd","parseInt","fileA","fileB","gatherFile","diff","PROPS","propName","valueOld","valueNext","RedoAction","REDO","CalibrateAction","USER_PROPS","TextAction","text","TEXT","VersionAction","ver","gzip","VERSION","$fails","wks","wksDefine","enumKeys","_create","gOPNExt","$GOPD","$GOPS","$DP","gOPN","$JSON","_stringify","HIDDEN","TO_PRIMITIVE","isEnum","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","protoDesc","wrap","sym","isSymbol","$defineProperty","$defineProperties","$propertyIsEnumerable","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","set","es6Symbols","wellKnownSymbols","keyFor","useSetter","useSimple","FAILS_ON_PRIMITIVES","replacer","$replacer","windowNames","getWindowNames","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","len","marker","runClearTimeout","Item","array","noop","nextTick","title","browser","env","argv","versions","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","webpackPolyfill","deprecate","paths","Dispatcher","eventDict","formatColor","INVALID","colorNumber","hex2rgb","green","blue","red$","green$","blue$","getKiloBytes","sign","sleep","assign","gOPS","$assign","K","aLen","getSymbols","toAbsoluteIndex","IS_INCLUDES","$this","fromIndex","TO_STRING","pos","charCodeAt","addToUnscopables","Arguments","symbols","defer","channel","port","invoke","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","Dispatch","counter","listener","port2","port1","onmessage","postMessage","importScripts","newPromiseCapability","promiseCapability","SAFE_CLOSING","riter","skipClosing","iter","$Object","desc","getIterator","numbers","n1","n2","Set","strong","add","asc","$create","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","speciesConstructor","original","toJSON","SyncBailHook","setup","$getPrototypeOf","setPrototypeOf","check","buggy","PenOp","currOpId","pkg","opIdSnapshotMap","getFreeDrawCommonProperty","boundaryRect","transformedPoints","drawCurve","_draw","isPointInStroke","_mergePartial","ptrDiff","startIndex","LineOp","getTwoPointShapeCommonProperty","getStartEndPointFromSnapshot","baseOp","getSelectionSnapshot","idsUnderMouse","postMouseMove","postMouseUp","postClick","isHover","RectOp","EllipseOp","cx","cy","radiusX","abs","radiusY","ellipse","PI","isPointInPath","testFontSizeText","num","MAX_FONT_SIZE","MIN_FONT_SIZE","printTextInMultiLine","lineHeight","textArr","currentLine","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","_instance","Toast","inOptions","createInstance","destroy","toastDiv","onclick","borderColor","isInteger","isFinite","locals","Board","displayName","newPageIndex","Page","action","insertAfter","addPage","gotoPage","deletePage","addOpHook","payload","hiddenOpQueue","lastInProgressSelectOfUser","lastInProgressSnapshotOfUser","lastMousePointerOfUser","blockedResourceList","_currOpId","_nextOpId","nextOpInc","resUrl","blocked","pageReady","isCurrPage","pageToRefresh","doRefresh","calcDrawOpQueue","isReceivingBatchSnapshots","cleanNonCanvasElements","addIncrementSnapshot","includeBackground","refresh","drawInProgressSnapshots","boardOps","inPageSnapshotIds","prePageChange","setPayload","LOG","indexInPageNames","nextPageIndex","getCameraBoundFromGlobalOp","cameraBoundByUser","broadcaster","isUndefined","isDOM","HTMLElement","nodeType","isValidString","isBoolean","isFunction","isNumber","isValidArray","isValidHexColor","isValidObject","ruleObj","validateErrors","rule","dataValue","isRequire","enum","globalHub","EM","setLineStyle","setpixelated","setCavansStyleSize","cvs","setCanvasPropSize","skip","applyCanvasLayout","paddingLeft","paddingTop","clearCtx","free","control","debug","line","circle","center","arc","xRadius","yRadius","round","getImageData","fullDisplayHeight","fullDisplayWidth","substr","shapeImageData","createImageData","shapeData","Uint32Array","buffer","startColor","rgb","r_start","g_start","b_start","alpha_start","R_MIN","safeColorClamp","G_MIN","B_MIN","R_MAX","G_MAX","B_MAX","curPixel","maxX","maxY","canFill","alpha","seen","topLeft","Coord","bottomRight","getImageDataIndex","getColor","reachLeft","reachRight","imgDataIndex","finalArea","areaSize","corner","putImageData","smallImageData","toDataURL","strokeText","clearRect","getRandomValues","rnds8","Uint8Array","rng","crypto","msCrypto","uuid","byteToHex","_nodeId","_clockseq","offset","_lastMSecs","_lastNSecs","buf","node","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","generateUUID","namespace","bytes","stringToBytes","hashfunc","DNS","getOutputLength","inputLength8","safeAdd","lsw","md5cmn","q","cnt","md5ff","md5gg","md5hh","md5ii","v35","input","output","length32","hex","md5ToHexEncodedArray","olda","oldb","oldc","oldd","wordsToMd5","length8","bytesToWords","rnds","ROTL","_i2","_t2","getOwnPropertyDescriptors","descriptors","formatRegExp","isString","objects","inspect","isNull","noDeprecation","warned","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","stylize","stylizeNoColor","depth","colors","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","recurseTimes","primitive","simple","formatPrimitive","visibleKeys","hash","arrayToHash","isError","formatError","isRegExp","RegExp","isDate","braces","toUTCString","formatProperty","match","formatArray","cur","numLinesEst","reduceToSingleString","ar","re","objectToString","pad","debuglog","NODE_DEBUG","toUpperCase","pid","isNullOrUndefined","isPrimitive","isBuffer","months","getHours","getMinutes","getSeconds","getDate","getMonth","prop","inherits","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","newReason","promisify","promiseResolve","promiseReject","custom","callbackify","callbackified","maybeCb","rej","__nwjs","packBulk","anyActions","anyAction","pack","unpackBulk","actions","unpack","isP2P","assert","actionIndex","valueStr","fromString","POINT_MATCHER","Point","Internal","newGenericPromiseCapability","OwnPromiseCapability","Wrapper","task","microtask","newPromiseCapabilityModule","perform","userAgent","v8","$Promise","isNode","empty","FakePromise","PromiseRejectionEvent","isThenable","notify","isReject","chain","_v","ok","reaction","exited","handler","fail","domain","_h","onHandleUnhandled","enter","exit","onUnhandled","unhandled","isUnhandled","onunhandledrejection","onrejectionhandled","$reject","_w","$resolve","executor","onFulfilled","onRejected","capability","remaining","$index","alreadyCalled","race","un","macrotask","Observer","WebKitMutationObserver","last","flush","navigator","standalone","toggle","characterData","onFinally","App","editEnabled","showCursor","isConnected","platform","defaultCameraBound","cameraBound","disableAutoResize","nim","simulator","Simulator","configInstance","AppConfig","OpsManager","extendDefaultOps","dataHub","DataHub","connector","Room","addOpsManager","addContainer","Camera","Vision","PreviewFactory","player","Player","setContainer","getCount","isAvailable","isFocus","getSelectedIds","zoomFactor","appendTo","sendSyncRequest","connected","reset","allowMime","uploadAndAddImage","dataURL","popupImageChooserAndAddImage","backgroundSnapshot","docName","params","count","startsWith","addBoard","setPageBackground","toolName","fontsize","setFontFamily","setFontFace","updateFontFamily","setStrokeWidth","setOpacity","enableDrawChange","editable","enable","valid","builtInIndex","getPageBuiltInIndex","getCurrPageIndex","currPageIndex","activeIndex","pagePayloads","payloadOfPages","boardNames","currBoardDisplayName","boardDisplayNames","getBoardDisplayNames","bindPreviewContainer","events","getOpDoc","records","addRecordData","seekTo","viewer","setViewer","setSelfAsBroadcaster","unsetSelfAsBroadcaster","setSelfAsFollower","setSelfAsFreeObserver","generatePreviewToDataUrl","download","userList","isSynchronizing","DrawPlugin","getInstance","isIterable","createProperty","arrayLike","mapfn","mousedown","SyncHook","boardChange","extendOp","MousePointerOp","extendDrawOp","PenArrowOp","LineArrowOp","RectFillOp","EllipseFillOp","TextOp","LaserOp","ScaleOp","MoveOp","DeleteOp","DuplicateOp","UndoOp","RedoOp","ClearOp","EraserOp","ElementEraserOp","PageOp","BoardOp","ImageOp","VideoOp","BackgroundOp","LockOp","PanOp","ZoomOp","ResetCameraOp","ResizeCameraOp","FitToContentOp","FitToDocOp","setCurrOp","OpConstructor","eventsToListen","afterActivate","execCommand","strArr","_getOpDoc","info","handleResize","currOpIsCamera","handleMouseDown","handleMouseUp","handleMouseLeave","handleMouseWheel","handleMouseMove","handleClick","handleKeyUp","handleKeyDown","mergePartial","partial1","partial2","resetCount","selectOp","Tapable","SyncWaterfallHook","SyncLoopHook","AsyncParallelHook","AsyncParallelBailHook","AsyncSeriesHook","AsyncSeriesBailHook","AsyncSeriesWaterfallHook","HookMap","MultiHook","util","_pluginCompat","ch","hook","tapOpt","async","addCompatLayer","plugin","copy","readUInt8","ctor","superCtor","super_","TempCtor","callTapsLooping","callTapsParallel","_map","_factory","_interceptors","for","Map","isUsed","intercept","withOptions","lastP","currP","ctrlPtInLastSeg","ctrlPtInSeg1","ctrlPtInSeg2","idsBeenMoved","mouseInSelectedEleBoundary","mouseInProgressSelectedBoundary","mouseInSelectedBoundary","moveOpSnapshot","newData","KeepRatioSnapshotTypes","coordinateX","coordinateY","boundaryW","boundaryH","idsBeenScaled","mouseInfo","mousePosTest","cursorSuggestion","scaleInfo","snaps","factorX","factorY","scroll","thisScaleX","scaleList","thisScaleY","baseScaleX","baseScaleY","totalScaleX","totalScaleY","initX","initY","baseFactor","ev","deleteOpIds","hidden","idsCouldUndo","onOpAdded","undoOpId","opOfPage","opsOfPage","opAlreadyBeenUndo","opShouldBeSkiped","idsCouldRedo","redoOpId","onRefresh","available","eraserColor","setWidth","setColor","globalCompositeOperation","drawEraserSignpost","textBeforeEdit","isNewText","handleTextAreaChange","endsWith","pre","innerText","setElementsSize","textAreaContainer","textArea","handleTextAreaBlur","textFocusAtPage","_handleTextAreaBlur","opIdToDraw","clearTextArea","registerToolbar","TextToolbar","createElements","toolbar","oninput","onblur","handlePrePageChange","handleClickExistText","handleSelectChange","handleEnableDrawChange","setFontSize","currSelectTextId","getOpTypeByOpId","_handleSelectTextOp","preSelectedOpIds","preSelectTextId","lastSnapshotData","lastSnapshot","detectIfClickOnText","tempPre","getElementById","getIdPrefix","setElementsStyle","focus","getBoundaryRect","workingPre","ptsInWord","snapshotIsEditing","preId","DEFAULT_LINEHEIGHT","drawSnapshot","paddingScale","PADDING","getFontFamily","drawTextSnapshot","setFontsize","updatePosition","onFontSizeChange","onColorChange","textOpSnapshot","txts","getElementsByTagName","pres","opIdForseen","outline","overflow","background","border","boxSizing","visibility","margin","MIN_WIDTH","clientWidth","clientHeight","ID","fonts","fontInputPrevValue","colorCells","colorPlatteOpen","toolbarContainer","colorBtn","colorDot","colorPlatteContainer","onmousemove","stopPropagation","colorCell","fontInput","fontIncBtn","incText","fontDecBtn","decText","_registerEvents","_stopPropagation","setColorPlatteState","func","fontSizeCb","colorCb","_sendFontChangeCommand","setFontSizeByInput","blurAfterSet","fontSizeStr","textType","blur","onkeydown","onmousedown","ontouchstart","onPageChange","goto","initWidth","initHeight","dispatchFromPage","onBoardChange","COPY_PASTE_SHIFT","copiedSnapshotArray","snapshotsToCopy","newOpIds","duplicates","dup","snapshotFromKeyboardCopy","argsTag","funcTag","genTag","mapTag","setTag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","freeExports","freeModule","moduleExports","addMapEntry","pair","addSetEntry","arrayReduce","iteratee","accumulator","initAccum","isHostObject","mapToArray","overArg","setToArray","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","funcToString","reIsNative","Buffer","getPrototype","objectCreate","nativeGetSymbols","nativeIsBuffer","nativeKeys","DataView","getNative","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","ListCache","MapCache","Stack","__data__","arrayLikeKeys","inherited","isObjectLike","isArrayLike","isArrayLikeObject","isArguments","baseTimes","skipIndexes","isIndex","assignValue","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","stack","isArr","initCloneArray","copyArray","getTag","isFunc","cloneBuffer","isPrototype","initCloneObject","copyObject","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","byteOffset","byteLength","cloneDataView","typedArray","cloneTypedArray","cloneMap","regexp","lastIndex","cloneRegExp","cloneSet","symbol","initCloneByTag","stacked","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","baseIsNative","arrayBuffer","newValue","getMapData","getValue","cache","pairs","LARGE_ARRAY_SIZE","other","ArrayBuffer","ctorString","isLength","baseKeys","withArrow","arrowPoints","lastPointX","lastPointY","shadowColor","shadowBlur","lockOps","unlockOps","getBoundaryFromSnapshot","imgWidth","imgHeight","enableCameraTransform","lastPoint","zoomIn","zoomOut","zoomTo","deltaY","destScaleNum","penImg","elementEraserImg","cursorImg","penUrl","elementEraserUrl","cursorUrl","inContainer","getImageByOpType","mapPointInsideContainer","cursorSize","worldSx","worldSy","worldEx","worldEy","opType","updateTransParamAndRefresh","addVideo","dispatchVideo","controls","controlsList","playsInline","disablePictureInPicture","convertWorldPointInContainer","pkgIdOpIdMap","pageToIncRefresh","boardsSnapshotIds","globalSnapshotIds","_startRefreshLoop2","refreshAnimationTimer","incRefresh","_init","boundaries","hasBoardAction","lastBoundaryData","refreshPreviewsOfCurrBoard","refreshPreviewsOfCurrPage","isCameraSnapshot","fakeServerId","sendSnapshot","execSnapshot","pkgId","_pkg","recoverFullSnapshot","cacheSnapshot","pushSnapshotToQueue","getPage","addOpInPage","addOpInBoard","addGlobalOp","addOpInRoom","_pkgArr","pkgArr","allInPage","boundaryData","nonCameraPkg","needRefresh","endReceiveBatchSnapshots","beginReceiveBatchSnapshots","oldPkgId","_pushSnapshotInArray","pageSnapshotIds","dataArr","dataType","mergeTwoPartial","whiteboard","_startRefreshLoop","videos","convertPreviewCanvas","convertCanvas","drawMousePointer","sort","k1","k2","sp1","sp2","beginAt","userId","separateNormalQueue","normalQueue","abNormalQueue","noHistOpQueue","removeHistoryOpQueue","noClearQueue","removeClearOpQueue","simpleQueue","removeDuplicateOpQueue","handleAbNormalQueue","handleNormalQueue","filterSelectedOpIds","opQueueMap","dependOnIdArr","dependOpId","removeInprogressSnapshotIfBeenDepended","getDrawOpFromSnapshotQueue","setSelectedOpIds","inProgressSelectOfCurrUser","setInProgressSelectedOpIds","histSnapshotId","dependOnIds","addTextSnapshot","addSnapshotAndDrawOnlyIt","dependOnId","setInprogressSnapshot","fitToContentTimer","deleteBoard","gotoBoard","selectBoardIndex","nextBoardIndex","hasBackground","fitToContent","overwritableTypes","debounceData","clientIdToData","lastContinueServerPkgId","serverPkgSinceLast","lastPkgIdToSync","dataOfSync","_scheduleNextBroadcast","debounceDataEntry","_doBroadcastData","mergeDebouncedData","dataQueue","strategy","client_pkg_id","broadcastData","_setupResendSyncRequestTimer","currRetryCount","resendSyncRequestTimer","ResendSyncRequestInterval","bindEvents","onData","onBroadcastAck","onSendRequestAck","onSendRequestResponse","server_pkg_id","_updateServerPkgInfo","receiveBroadcaster","execBatchSnapshots","last_server_pkg_id","_updateAppAfterSync","start_server_pkg_id","end_server_pkg_id","packages","client_id","nextLocalFakeId","_getDataToSync","broadcasterData","receiveBroadcasterAfterSync","hasBoundary","lastServerPkgId","inUseClientIds","__awaiter","thisArg","_arguments","generator","fulfilled","rejected","previewContainerMap","isLoopBusy","onPageReady","setupExportToImgContainer","resizeElements","keepPrevContainer","newKeys","previewContainerSettings","getContainerKey","oldKeys","previewTasks","setupPreviewElements","canvasContainer","addPreviewTask","invalidatePreview","taskList","taskArray","reverse","taskInfo","taskIndexOfSamePage","getTaskIndexOfPage","unshift","startLoop","canvasContainerArr","getElementsByClassName","shiftNextReadyTask","generatePreview","ms","hadRuntime","regeneratorRuntime","oldRuntime","Op","hasOwn","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","inModule","runtime","ContinueSentinel","getProto","NativeIteratorPrototype","Gp","GeneratorFunctionPrototype","Generator","GeneratorFunction","isGeneratorFunction","genFun","mark","awrap","__await","defineIteratorMethods","AsyncIterator","innerFn","outerFn","tryLocsList","Context","skipTempReset","sent","_sent","delegate","method","tryEntries","resetTryEntry","stop","rootRecord","completion","rval","dispatchException","exception","handle","loc","caught","record","tryLoc","hasCatch","hasFinally","catchLoc","finallyLoc","abrupt","finallyEntry","afterLoc","finish","thrown","delegateYield","resultName","nextLoc","protoGenerator","_invoke","doneResult","delegateResult","maybeInvokeDelegate","tryCatch","makeInvokeMethod","previousPromise","callInvokeWithMethodAndArg","unwrapped","return","pushTryEntry","locs","iteratorMethod","translateX","translateY","dom","convertDom","translate","getTransParam","_roundBoundary","getCameraBoundPan","getCameraBoundZoom","getCameraBoundReset","getCameraBoundFitToContent","getCameraBoundFitToDoc","getCameraBoundResize","getContainerWorldRectByCameraBound","backgroundOp","horizontalPadding","verticalPadding","_width","_height","cameraWidth","cameraHeight","convertDomAndRefresh","nextRecordIndex","lastTime","offsetBegin","resetState","_lastTime","Infinity","forward","endIndex","recordsToEmit","snapshotsToEmit","observeModeData","receiveObserveModeAfterSync","_lastDirection","_interruptFreeDraw","rebuildSocket","resetApp","_simulateReconnect","readyToSyncData","repeat","intervalBtwPoints","intervalBtwLines","_generateRandomLines","_generateRandomLines2","offsetWidth","offsetHeight","dispatchEvent","_simulateMouseMove","lastXY","catch","_getDxDy","isBroadcasting","broadcasterNickname","setMode","setBroadcaster","broadcastRoomState","broadcasterName","lastVisionData","lastObserveModeOfAccount","drawPlugin","imageDimension","AcceptTypesArr","imageInput","accept","onchange","fileInput","files","nameParts","suffix","dimensions","previewFile","beginupload","isBase64","allowEmpty","regex","mimeRegex","mimeRequired","paddingRequired","parseUrl","RECORD_FILE","cid","chunk","lastIndexOfDot","lastIndexOf","ab2str","textDecoder","decode","fileReader","FileReader","readAsText","getID","TextEncoder","TextDecoder","fetchBlob","xhr","XMLHttpRequest","responseType","response","send","p0","getTime","showHour","second","minute","hour","pako","level","chunkSize","windowBits","memLevel","to","raw","ended","chunks","strm","avail_out","deflateInit2","deflateSetHeader","dictionary","string2buf","deflateSetDictionary","_dict_set","next_in","avail_in","Buf8","next_out","deflate","onEnd","buf2binstring","shrinkBuf","deflateEnd","flattenChunks","Deflate","deflateRaw","2","inflateInit2","Z_OK","inflateGetHeader","inflateSetDictionary","Z_FINISH","Z_NO_FLUSH","binstring2buf","inflate","Z_NEED_DICT","Z_BUF_ERROR","Z_STREAM_END","Z_SYNC_FLUSH","utf8border","buf2string","arraySet","inflateEnd","Inflate","inflateRaw","ungzip","3","Uint16Array","Int32Array","subarray","setTyped","Buf16","Buf32","4","fromCharCode","5","6","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_BLOCK","Z_TREES","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","7","8","I","pending","pending_buf","pending_out","total_out","_tr_flush_block","block_start","strstart","max_chain_length","prev_length","nice_match","w_size","w_mask","good_match","lookahead","match_start","window_size","hash_size","adler","total_in","insert","ins_h","hash_shift","hash_mask","match_length","_tr_tally","max_lazy_match","last_lit","prev_match","match_available","good_length","max_lazy","nice_length","max_chain","status","pending_buf_size","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","bl_count","heap","heap_len","heap_max","l_buf","lit_bufsize","d_buf","opt_len","static_len","matches","bi_buf","bi_valid","Y","data_type","_tr_init","deflateInit","deflateReset","deflateResetKeep","hcrc","extra","comment","os","_tr_align","_tr_stored_block","deflateInfo","9","xflags","extra_len","10","dmax","wsize","whave","wnext","hold","bits","lencode","distcode","lenbits","distbits","sane","11","Z","havedict","flags","wbits","ncode","nlen","ndist","have","lens","work","lendyn","distdyn","back","was","inflateReset","inflateReset2","inflateResetKeep","inflateInit","inflateInfo","12","13","0","14","static_tree","extra_bits","extra_base","elems","max_length","has_stree","dyn_tree","max_code","stat_desc","X","J","Q","15","Track","offsetEnd","showTrack","speed","showTrackCb","hideTrackCb","_awaitTrackHandler","hideTrack","play","jumpTo","doSetTrack","createDebug","prevTime","enabled","coerce","formatter","formatters","formatArgs","logFn","useColors","selectColor","extend","instances","delimiter","newDebug","toNamespace","disable","namespaces","skips","humanize","load","UserManager","maxUserHistory","userKeys","userMap","onUndo","onRedo","User","others","recycle","toSnapshot","calibrate","getCalibrateAction","isStandardCursor","isStandardMode","isValidTool","tool","WTrack","viewerArr","urlArray","originalParams","getRawRecordFromBlob","rawRecordsList","blobArray","endAt","listOfRawRecordList","rawDataByChannel","mergeRawDataByChannel","isChannelOverlapping","reader","readAsBinaryString","rawBuffer","dv","cLen","getInt32","contentLen","subb","rawDataByCid","rawData","oldRawData","listSortByBeginAt","first","formatTimeOffset","toLocaleString","RecordPlayer","tracks","v3TrackFileObjs","videoTracks","fileObj","VTrack","whiteboardTracks","V1V2Track","wbTrack","V3Track","drawManager","timeline","Timeline","_visibleChangeCallHandler","unmount","mount","setPlaySpeed","pause","whiteboardParams","urlArr","drawPluginParams","videoParams","ticker","TickTick","endTimeStamp","busy","handleTrackVisibleChange","track","_doPause","initTrack","bindTickerEvents","minTimestamp","getMinTimeStamp","readyQueue","getInitQueue","badTracks","getMaxTimeStamp","bindTrackEvents","beginTimeStamp","duration","handleTrackWaitingToPlay","handleTrackCanPlay","hasTrackWaiting","_doPlay","find","isWaiting","currTimeStamp","rate","DEFAULT_INTERVAL","setCurrentTime","destory","POSITIVE_INFINITY","maxTimestamp","NEGATIVE_INFINITY","isIPhone","pPipeline","lastRealTime","microTask","tick","passedGap","clearInterval","setInterval","timeStamp","React","ToolUI","Nothing","isPhone","toolUIEl","onMouseMove","getCurrentXAndTime","currentX","currentTime","labelText","labelLeft","pauseOrPlay","paused","onMouseDown","getAttribute","showLabel","drag","onMouseUp","hidePosition","handleClickSpeed","speedOptionShow","handleClickSpeedOption","showPosition","updator","search","fullWidth","renderTimeline","widthPercent","onClick","onMouseEnter","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","role","backgroundClip","renderPlayOrPause","backgroundImage","PLAY_BASE_64","PAUSE_BASE_64","currSpeed","speedText","timeDuration","durationStr","durationHour","renderSpeed","waitingForData","videoRef","oncanplay","onwaiting","pipe","setSpecialCheck","preload","onloadeddata","setVideoTime","findVideoRefInContainer","playbackRate","specialCheck","tagName","__asyncValues","__values","verb","settle","fetchData","dataList","isCompatible","Record","optimizeOldRecordList","needSkipFirstCleanFrame","findIndexBeyondTime","recordsToExecute","mangleRecords","clearImage","clearHtmlFile","executeActions","WorkerManager","lastColor","lastTool","leng","updateIndex","offsetBeing","lastClearFrameIndex","isClearFrame","recordToClean","toStateRelatedRecord","recordsToExecute_1","recordsToExecute_1_1","e_1","clearIndex","ActionUtilsOld","ActionUtils","curIndex","getStateRelatedActions","tmp","red","lastC","storage","setItem","removeItem","WebkitAppearance","firebug","table","localstorage","plural","msAbs","isPlural","long","fmtLong","fmtShort","tty","inspectOpts","stderr","colorCode","prefix","hideDate","toISOString","isatty","fd","supportsColor","ReadStream","WriteStream","stdout","utils","__asyncGenerator","resume","fulfill","toKB","gziped","gzipedSize","afterInit","syncManager","toAccount","afterSync","syncState","flushInCommingQueue","identity","syncBegin","syncRequest","ownerAccount","onIframeMessage","fileData","currentFile","anim","trigger","isBack","drawAdapter","emitAction","incommingQueue","actionProcessing","SyncManager","sendData","fileMap","eventHub","AdapterDraw","broadcastAction","connectorStatus","execute","timmer","qactions","qid","qtype","alreadyInMessageQueue","minimal","match1","GZIP_TESTER_1","fullText","incomming","_gzipArr","curLen","unzipedText","vipActionIndex","vipAction","handleSyncAction","actions_1","actions_1_1","act","makeClearAck","force","quiet","syncTo","syncAction","syncResponse","immuteUpdate","fileDataNext","setFileData","fileNext","handleFile","pagedHtmlFile","setHtmlFile","e_2","flushQueue","doneLen","forceWaiting","flushQueue_1","flushQueue_1_1","dirty","enableDraw","e_3","e_4","e_5","rawSnapshot","usersRaw","shapes","users","transhShapes","canvasRatio","canvasHeight","canvasWidth","ownerWidth","ownerHeight","shapeQueue","shapeGen","containerManager","updateCanvasPropSize","lastSleepTime","currentUserDefaultState","localUser","prevActionProcessing","restoreShape","fullRender","users_1","users_1_1","_g","guessMyUndoCount","emitUserShape","userSnapshot","notCurrentUser","declareCalibrate","pushQueue","setSize","undo","redo","actAccount","scrolling","frameBorder","zIndex","displayCanvas","readyState","direction","which","pageNum","transType","getFile","success","_image","removeUser","useTool","makeSyncPrepare","makeSyncRequest","makeSyncPrepareAck","selfCalibrateAction","getSelfCalibrate","clearShapes","updateCursor","removeOtherUsers","times","dataQue","lastDataMap","shadowUsers","doNotSendBefore","delayBase","dataStr","gzipStr","delayIndex","doTag","kiloBytes","begin","msTime","dq","onInited","DrawWorker","onAction","onInstantAction","isEnable","CanvasHelper","LOADING_IMAGE","handleInputDomBlur","inputDom","pointStr","ownerCanvasHeight","ownerCanvasWidth","prevEnd","renderText","originalEvent","displayCtx","changedTouches","ctrlKey","shiftKey","altKey","realX","realY","ShapesManager","ContainerManager","addUser","switchEventListener","cursorType","setCursor","clearFlag","canvasList","maskCanvas","addOrRemove","validTool","getUser","dispatchCalibrateAction","flagPos","renderFlag","ext","userKeyDown","keyDown","_afterKeyChange","newWhich","userCtx","isFlag","visibles","whenMouseDown","clone","lastStateAccount","applyState","Shape","pushShape","whenMouseMove","activeShape","some","shiftKeyTool","updateCorner","freeMove","oldMid","mid","middle","shapeCtx","needMoveUserCtxData","expandCorner","freeEnd","moveUserShapeToDisplay","endCoord","getCanvasCoord","iptWidth","verticalAlign","inputDomValue","getOwnerCoord","imgData","dataBytes","antiAlais","shapeWidth","shapeHeight","clearTransparentPix","imageSmoothingEnabled","maskCtx","posCoord","tmpUrl","backgroundUrl","classList","backgroundSize","uidToRemove","hasUser","userOptions","_removeUser","uids","transh","shapeSnapshotOption","isInTrash","actionStr","optimized","imageData","actionsLenth","toCoord","coordinateOffset","getStartAndEnd","startAction","endAction","startOffset","endOffset","minus","needClearPix","prevOldMid","calculateRadius","xOffset","yOffset","cornerRadius","textAction","insertAdjacentHTML","performance","timing","navigationStart","visible","shapeCanvas","userCanvas","coordWidth","coordHeight","path","detail","getCoord","toPoint","ownerCoord","startCoord","UID","undoCount","_resetCalibrate","configActiveShape","undoLength","avaliableUndoCount","clearListener","_usernameger","widthScale","heightScale","newWidth","newHeight","onResize","waiting","containerWidth","containerHeight","calcCanvasLayout","updateCanvasStyleSize","autofocus","buildInputDom","inited","shapesmanager","initEssential","adjustSize","ratio","containerRatio","heightGap","widthGap","displayStyle","maskStyle","prevHeight","prevWidth","resizeCanvas","currentAccount","targetCtx","shapeOrUser","Connector","fetchMultiData","listOfDataList","accountSet","_seekTo","recordListToPlay","currCid"],"mappings":"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","file":"RecordPlayer_v3.1.2.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RecordPlayer\"] = factory();\n\telse\n\t\troot[\"RecordPlayer\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 333);\n","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","var core = module.exports = { version: '2.6.11' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };","!function(){\"use strict\";function e(e,t){var n,o,r,i,l=W;for(i=arguments.length;i-- >2;)P.push(arguments[i]);t&&null!=t.children&&(P.length||P.push(t.children),delete t.children);while(P.length)if((o=P.pop())&&void 0!==o.pop)for(i=o.length;i--;)P.push(o[i]);else\"boolean\"==typeof o&&(o=null),(r=\"function\"!=typeof e)&&(null==o?o=\"\":\"number\"==typeof o?o+=\"\":\"string\"!=typeof o&&(r=!1)),r&&n?l[l.length-1]+=o:l===W?l=[o]:l.push(o),n=r;var a=new T;return a.nodeName=e,a.children=l,a.attributes=null==t?void 0:t,a.key=null==t?void 0:t.key,void 0!==M.vnode&&M.vnode(a),a}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,t){e&&(\"function\"==typeof e?e(t):e.current=t)}function o(n,o){return e(n.nodeName,t(t({},n.attributes),o),arguments.length>2?[].slice.call(arguments,2):n.children)}function r(e){!e.__d&&(e.__d=!0)&&1==V.push(e)&&(M.debounceRendering||D)(i)}function i(){var e;while(e=V.pop())e.__d&&x(e)}function l(e,t,n){return\"string\"==typeof t||\"number\"==typeof t?void 0!==e.splitText:\"string\"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function u(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===n[r]&&(n[r]=o[r]);return n}function c(e,t){var n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",e):document.createElement(e);return n.__n=e,n}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,o,r,i){if(\"className\"===t&&(t=\"class\"),\"key\"===t);else if(\"ref\"===t)n(o,null),n(r,e);else if(\"class\"!==t||i)if(\"style\"===t){if(r&&\"string\"!=typeof r&&\"string\"!=typeof o||(e.style.cssText=r||\"\"),r&&\"object\"==typeof r){if(\"string\"!=typeof o)for(var l in o)l in r||(e.style[l]=\"\");for(var l in r)e.style[l]=\"number\"==typeof r[l]&&!1===E.test(l)?r[l]+\"px\":r[l]}}else if(\"dangerouslySetInnerHTML\"===t)r&&(e.innerHTML=r.__html||\"\");else if(\"o\"==t[0]&&\"n\"==t[1]){var a=t!==(t=t.replace(/Capture$/,\"\"));t=t.toLowerCase().substring(2),r?o||e.addEventListener(t,_,a):e.removeEventListener(t,_,a),(e.__l||(e.__l={}))[t]=r}else if(\"list\"!==t&&\"type\"!==t&&!i&&t in e){try{e[t]=null==r?\"\":r}catch(e){}null!=r&&!1!==r||\"spellcheck\"==t||e.removeAttribute(t)}else{var u=i&&t!==(t=t.replace(/^xlink:?/,\"\"));null==r||!1===r?u?e.removeAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase()):e.removeAttribute(t):\"function\"!=typeof r&&(u?e.setAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||\"\"}function _(e){return this.__l[e.type](M.event&&M.event(e)||e)}function f(){var e;while(e=A.shift())M.afterMount&&M.afterMount(e),e.componentDidMount&&e.componentDidMount()}function d(e,t,n,o,r,i){H++||(R=null!=r&&void 0!==r.ownerSVGElement,B=null!=e&&!(\"__preactattr_\"in e));var l=h(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--H||(B=!1,i||f()),l}function h(e,t,n,o,r){var i=e,l=R;if(null!=t&&\"boolean\"!=typeof t||(t=\"\"),\"string\"==typeof t||\"number\"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),v(e,!0))),i.__preactattr_=!0,i;var u=t.nodeName;if(\"function\"==typeof u)return N(e,t,n,o);if(R=\"svg\"===u||\"foreignObject\"!==u&&R,u+=\"\",(!e||!a(e,u))&&(i=c(u,R),e)){while(e.firstChild)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),v(e,!0)}var p=i.firstChild,s=i.__preactattr_,_=t.children;if(null==s){s=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)s[f[d].name]=f[d].value}return!B&&_&&1===_.length&&\"string\"==typeof _[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=_[0]&&(p.nodeValue=_[0]):(_&&_.length||null!=p)&&m(i,_,n,o,B||null!=s.dangerouslySetInnerHTML),y(i,t.attributes,s),R=l,i}function m(e,t,n,o,r){var i,a,u,c,s,_=e.childNodes,f=[],d={},m=0,b=0,y=_.length,g=0,w=t?t.length:0;if(0!==y)for(var C=0;C<y;C++){var x=_[C],N=x.__preactattr_,k=w&&N?x._component?x._component.__k:N.key:null;null!=k?(m++,d[k]=x):(N||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(f[g++]=x)}if(0!==w)for(var C=0;C<w;C++){c=t[C],s=null;var k=c.key;if(null!=k)m&&void 0!==d[k]&&(s=d[k],d[k]=void 0,m--);else if(b<g)for(i=b;i<g;i++)if(void 0!==f[i]&&l(a=f[i],c,r)){s=a,f[i]=void 0,i===g-1&&g--,i===b&&b++;break}s=h(s,c,n,o),u=_[C],s&&s!==e&&s!==u&&(null==u?e.appendChild(s):s===u.nextSibling?p(u):e.insertBefore(s,u))}if(m)for(var C in d)void 0!==d[C]&&v(d[C],!1);while(b<=g)void 0!==(s=f[g--])&&v(s,!1)}function v(e,t){var o=e._component;o?k(o):(null!=e.__preactattr_&&n(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||p(e),b(e))}function b(e){e=e.lastChild;while(e){var t=e.previousSibling;v(e,!0),e=t}}function y(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||s(e,o,n[o],n[o]=void 0,R);for(o in t)\"children\"===o||\"innerHTML\"===o||o in n&&t[o]===(\"value\"===o||\"checked\"===o?e[o]:n[o])||s(e,o,n[o],n[o]=t[o],R)}function g(e,t,n){var o,r=F.length;e.prototype&&e.prototype.render?(o=new e(t,n),U.call(o,t,n)):(o=new U(t,n),o.constructor=e,o.render=w);while(r--)if(F[r].constructor===e)return o.__b=F[r].__b,F.splice(r,1),o;return o}function w(e,t,n){return this.constructor(e,n)}function C(e,t,o,i,l){e.__x||(e.__x=!0,e.__r=t.ref,e.__k=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||l?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i)),i&&i!==e.context&&(e.__c||(e.__c=e.context),e.context=i),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==o&&(1!==o&&!1===M.syncComponentUpdates&&e.base?r(e):x(e,1,l)),n(e.__r,e))}function x(e,n,o,r){if(!e.__x){var i,l,a,c=e.props,p=e.state,s=e.context,_=e.__p||c,h=e.__s||p,m=e.__c||s,b=e.base,y=e.__b,w=b||y,N=e._component,U=!1,S=m;if(e.constructor.getDerivedStateFromProps&&(p=t(t({},p),e.constructor.getDerivedStateFromProps(c,p)),e.state=p),b&&(e.props=_,e.state=h,e.context=m,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,p,s)?U=!0:e.componentWillUpdate&&e.componentWillUpdate(c,p,s),e.props=c,e.state=p,e.context=s),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!U){i=e.render(c,p,s),e.getChildContext&&(s=t(t({},s),e.getChildContext())),b&&e.getSnapshotBeforeUpdate&&(S=e.getSnapshotBeforeUpdate(_,h));var L,T,P=i&&i.nodeName;if(\"function\"==typeof P){var W=u(i);l=N,l&&l.constructor===P&&W.key==l.__k?C(l,W,1,s,!1):(L=l,e._component=l=g(P,W,s),l.__b=l.__b||y,l.__u=e,C(l,W,0,s,!1),x(l,1,o,!0)),T=l.base}else a=w,L=N,L&&(a=e._component=null),(w||1===n)&&(a&&(a._component=null),T=d(a,i,s,o||!b,w&&w.parentNode,!0));if(w&&T!==w&&l!==N){var D=w.parentNode;D&&T!==D&&(D.replaceChild(T,w),L||(w._component=null,v(w,!1)))}if(L&&k(L),e.base=T,T&&!r){var E=e,V=e;while(V=V.__u)(E=V).base=T;T._component=E,T._componentConstructor=E.constructor}}!b||o?A.push(e):U||(e.componentDidUpdate&&e.componentDidUpdate(_,h,S),M.afterUpdate&&M.afterUpdate(e));while(e.__h.length)e.__h.pop().call(e);H||r||f()}}function N(e,t,n,o){var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===t.nodeName,c=a,p=u(t);while(r&&!c&&(r=r.__u))c=r.constructor===t.nodeName;return r&&c&&(!o||r._component)?(C(r,p,3,n,o),e=r.base):(i&&!a&&(k(i),e=l=null),r=g(t.nodeName,p,n),e&&!r.__b&&(r.__b=e,l=null),C(r,p,1,n,o),e=r.base,l&&e!==l&&(l._component=null,v(l,!1))),e}function k(e){M.beforeUnmount&&M.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var o=e._component;o?k(o):t&&(null!=t.__preactattr_&&n(t.__preactattr_.ref,null),e.__b=t,p(t),F.push(e),b(t)),n(e.__r,null)}function U(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{},this.__h=[]}function S(e,t,n){return d(n,e,{},!1,t,!1)}function L(){return{}}var T=function(){},M={},P=[],W=[],D=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,E=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,V=[],A=[],H=0,R=!1,B=!1,F=[];t(U.prototype,{setState:function(e,n){this.__s||(this.__s=this.state),this.state=t(t({},this.state),\"function\"==typeof e?e(this.state,this.props):e),n&&this.__h.push(n),r(this)},forceUpdate:function(e){e&&this.__h.push(e),x(this,2)},render:function(){}});var j={h:e,createElement:e,cloneElement:o,createRef:L,Component:U,render:S,rerender:i,options:M};\"undefined\"!=typeof module?module.exports=j:self.preact=j}();\n//# sourceMappingURL=preact.min.js.map","import { globalSnapshotTypes } from './types';\nimport { v4 as uuidv4 } from 'uuid';\nlet lastGlobalOpId;\nlet lastSnapshotInfo = {\n    type: '',\n    boardName: 'whiteboard',\n    pageIndex: '0',\n    dependOn: undefined,\n    timestamp: 0\n};\nlet newOpFlag = false;\n/**\n * 下面情况会生成新的opId。\n * 1. 操作类型和上一次dispatch的快照类型不同\n * 2. 操作的dependOn和上一次dispatch的dependOn不同\n * 3. 有用beginBatch明确标识为下一个opId\n *\n * 4. 命令型操作，如undo，redo，image等等\n */\nfunction genNewOpId(type, dependOn, pageIndex, boardName) {\n    let gen = false;\n    if (lastSnapshotInfo.pageIndex !== pageIndex) {\n        gen = true;\n    }\n    else if (lastSnapshotInfo.boardName !== boardName) {\n        gen = true;\n    }\n    else if (!lastSnapshotInfo.inProgress) {\n        //上一个快照已经结束，不需要新的快照\n        gen = true;\n    }\n    else if (type !== lastSnapshotInfo.type) {\n        gen = true;\n    }\n    else if (typeof dependOn !== typeof lastSnapshotInfo.dependOn) {\n        gen = true;\n    }\n    else if (typeof dependOn === 'string' && dependOn !== lastSnapshotInfo.dependOn) {\n        gen = true;\n    }\n    else if (Array.isArray(dependOn) && Array.isArray(lastSnapshotInfo.dependOn) && dependOn.join(',') !== lastSnapshotInfo.dependOn.join(',')) {\n        gen = true;\n    }\n    else if (newOpFlag) {\n        gen = true;\n    }\n    else if (['undo', 'redo', 'image'].includes(type)) {\n        gen = true;\n    }\n    return gen;\n}\nclass Operation {\n    constructor(app) {\n        this.type = 'base';\n        this.app = app;\n        this.opsManager = app.opsManager;\n        this.registerHooks();\n    }\n    get isMouseDown() {\n        return this.app.container.isMouseDown;\n    }\n    /**\n     * 可以添加生命周期钩子。\n     */\n    registerHooks() { }\n    /**\n     * 注册监听事件及响应方式\n     * key: 事件名称\n     * value：响应方式\n     *\n     * 最基本的有两类事件，建议使用下面名字命名：\n     * exec: 当设置为true时，会调用this.execCommand()\n     * activate: 当设置为true时，OpsManager会拦截该请求，并设置活跃操作\n     * 接到其他事件时，会直接调用键值对应的value。\n     *\n     * UI层派发事件名称应该为：'op:${type}:{eventName}'。manager拦截事件后，会调用execCommand或者设置OpsManager中激活的Op。\n     */\n    eventsToListen() {\n        return {\n            exec: {\n                value: false,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            },\n            activate: {\n                value: false,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n        };\n    }\n    execCommand() {\n        console.warn('DEV-->', `若设置了exec为true，请继承execCommand函数，并作出对应的处理。`);\n    }\n    afterActivate() {\n        //如果operation激活后有后续事情处理，在该函数中可以处理\n    }\n    /**\n     * 返回操作快照\n     */\n    getSnapshot(...args) {\n        return {\n            type: this.type\n        };\n    }\n    /**\n     * op可以通过此函数查询如果它发送快照，它的快照id是什么?\n     * @param type\n     * @param dependOn\n     */\n    opIdForseen(type, dependOn) {\n        const newId = genNewOpId(type, dependOn, this.opsManager.currPage.pageIndex, this.opsManager.currPage.boardName);\n        if (newId) {\n            return this.opsManager.currPage.getNextOpId();\n        }\n        else {\n            return this.opsManager.currPage.getOpId();\n        }\n    }\n    /**\n     * 将操作快照发送给远程服务器，以及本地对应的操作队列\n     *\n     * @param snapshot\n     */\n    dispatch(data) {\n        if (!data.hasOwnProperty('type')) {\n            /**\n             * 发送部分数据\n             */\n            const snapshot = {\n                opId: this.opsManager.currPage.getOpId(),\n                data\n            };\n            this.app.room.dispatch(snapshot);\n        }\n        else if (globalSnapshotTypes.indexOf(data.type) > -1) {\n            this.dispatchGlobalAction(data);\n        }\n        else if (data.type === 'page') {\n            this.dispatchPageAction(data);\n        }\n        else if (data.type === 'board') {\n            this.dispatchBoardAction(data);\n        }\n        else {\n            /**\n             * 处理当前页面的操作\n             */\n            const currBoard = this.app.room.boards[this.app.room.currIndex];\n            const now = (new Date()).valueOf();\n            let opId;\n            if (data.reuseOpType) {\n                /**\n                 * 激光笔，鼠标位置等类型可以一直不改变opId\n                 */\n                opId = `${this.app.account}-${data.reuseOpType}`;\n                delete data['reuseOpType'];\n            }\n            else {\n                const newId = genNewOpId(data.type, data.dependOn, this.opsManager.currPage.pageIndex, this.opsManager.currPage.boardName);\n                newOpFlag = false;\n                lastSnapshotInfo = {\n                    type: data.type,\n                    dependOn: data.dependOn,\n                    timestamp: now,\n                    pageIndex: this.opsManager.currPage.pageIndex,\n                    boardName: this.opsManager.currPage.boardName,\n                    inProgress: data.inProgress\n                };\n                if (newId) {\n                    this.opsManager.currPage.prepareNewOpId();\n                }\n                opId = this.opsManager.currPage.getOpId();\n            }\n            const snapshot = {\n                category: 'inPageOp',\n                board: this.app.room.currIndex,\n                page: currBoard.currIndex,\n                time: now,\n                uid: this.app.account,\n                opId: opId,\n                data\n            };\n            this.app.room.dispatch(snapshot);\n        }\n    }\n    /**\n     * 某些异步快照发送的时候，currBoard和currPage可能发生了变化。\n     * 为了处理这些场景，需要说明快照是从哪个page中发出的。\n     * 这一类场景只可能是page里面的快照，因此不用处理PageAction和BoardAction\n     * @param data\n     * @param page\n     */\n    dispatchFromPage(data, page) {\n        /**\n         * 处理当前页面的操作\n         */\n        const now = (new Date()).valueOf();\n        //保险起见，准备新的opId\n        page.prepareNewOpId();\n        const snapshot = {\n            category: 'inPageOp',\n            board: page.boardName,\n            page: Number(page.pageIndex),\n            time: now,\n            uid: this.app.account,\n            opId: page.getOpId(),\n            data\n        };\n        lastSnapshotInfo = {\n            type: data.type,\n            dependOn: data.dependOn,\n            timestamp: now,\n            pageIndex: page.pageIndex,\n            boardName: page.boardName,\n            inProgress: data.inProgress\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    /**\n     * 处理页面相关操作，包括goto和delete两类page操作。\n     * @param data\n     */\n    dispatchPageAction(data) {\n        const now = (new Date()).valueOf();\n        const snapshot = {\n            category: 'pageOp',\n            board: this.app.room.currIndex,\n            time: now,\n            uid: this.app.account,\n            opId: uuidv4(),\n            data\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    /**\n     * 处理页面相关操作，包括goto和delete两类page操作。\n     * @param data\n     */\n    dispatchBoardAction(data) {\n        const now = (new Date()).valueOf();\n        const snapshot = {\n            category: 'boardOp',\n            time: now,\n            uid: this.app.account,\n            opId: uuidv4(),\n            data\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    dispatchGlobalAction(data) {\n        let opId;\n        const now = (new Date()).valueOf();\n        if (data.reuseOpType) {\n            opId = `${this.app.account}-${data.reuseOpType}`;\n            delete data['reuseOpType'];\n        }\n        else {\n            if (!lastGlobalOpId || newOpFlag) {\n                lastGlobalOpId = uuidv4();\n                newOpFlag = false;\n            }\n            opId = lastGlobalOpId;\n        }\n        const snapshot = {\n            category: 'globalOp',\n            time: now,\n            uid: this.app.account,\n            opId,\n            data\n        };\n        this.app.room.dispatch(snapshot);\n    }\n    emit(event, ...args) {\n        this.app.dispatcher.emit(event, ...args);\n    }\n    draw(snapshot, ctx, opts) {\n        console.warn('DEV-->', `请实现${this.type}子类中draw函数。`);\n    }\n    //文本本来是绘制在dom上。由于preview需要绘制在图片上，因此使用preview方法重写\n    //TextOp需要重写此函数，其他Op不需要\n    preview(snapshot, ctx, opts) {\n        this.draw(snapshot, ctx, opts);\n    }\n    hide(snapshot, ctx, div) {\n        //如有需要，继承此函数清除被清空的图形\n    }\n    mergePartial(snapshot, partial) {\n        if (partial.hasOwnProperty('category')) {\n            return partial;\n        }\n        else {\n            return snapshot;\n        }\n    }\n    /**\n     * 连续动作开始，之后的快照会使用新的opId。\n     */\n    beginBatch() {\n        newOpFlag = true;\n    }\n    /**\n     * 判断某个按键是否按下，按键状态存储在container中\n     */\n    isKeyDown(key) {\n        return this.app.container.isKeyDown(key);\n    }\n    /**\n     * 同一页面的所有操作快照\n     */\n    get opsOfPage() {\n        return this.opsManager.currPage.opQueue;\n    }\n    /**\n     * 同一页面所有可直接绘制的操作快照\n     * TODO: 需要修改\n     */\n    get drawOpsOfPage() {\n        return this.opsManager.drawOpsOfPage;\n    }\n    getOpTypeByOpId(opId) {\n        if (this.opsManager.drawOpsOfPage.hasOwnProperty(opId)) {\n            return this.opsManager.drawOpsOfPage[opId].data.type;\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nexport default Operation;\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","/**\n * 图像检测帮助函数\n */\nimport { max, min } from \"./util\";\n/**\n * 两点之间距离的平方\n */\nexport function distSqrt(p1, p2) {\n    return (p1[0] - p2[0]) * (p1[0] - p2[0]) + (p1[1] - p2[1]) * (p1[1] - p2[1]);\n}\nexport function dist(p1, p2) {\n    return Math.sqrt(distSqrt(p1, p2));\n}\n/**\n * 检测两个矩形是否有重叠区域\n * @param rect1\n * @param rect2\n */\nexport function rectCollide(rect1, rect2) {\n    return !(rect1.sx > rect2.sx + rect2.w ||\n        rect1.sx + rect1.w < rect2.sx ||\n        rect1.sy > rect2.sy + rect2.h ||\n        rect1.sy + rect1.h < rect2.sy);\n}\n/**\n * 判断点与点之间是否碰撞。若点之间的距离小于r，则无碰撞\n */\nexport function pointCollideWithPoint(point, another, r) {\n    return distSqrt(point, another) <= r * r;\n}\n/**\n * 判断点是否和直线相交\n * r为点的半径\n *\n * distance(A, C) + distance(B, C) == distance(A, B)\n */\nexport function pointCollideWithLine(point, sp, ep, r) {\n    return (dist(point, sp) + dist(point, ep) - dist(sp, ep)) <= r;\n}\nexport function pointInRect(rect, point) {\n    return (point[0] > rect.sx &&\n        point[0] < rect.sx + rect.w &&\n        point[1] > rect.sy &&\n        point[1] < rect.sy + rect.h);\n}\n/**\n * 先根据scaleX，scaleY缩放，然后在根据dx，dy平移\n * @param rect\n * @param dx\n * @param dy\n * @param scale\n */\nexport function getTransformedBoundary(rect, dx = 0, dy = 0, scaleX = {\n    factor: 1,\n    coordinate: 0\n}, scaleY = {\n    factor: 1,\n    coordinate: 0\n}) {\n    let sx = scaleX.factor * (rect.sx - scaleX.coordinate) + scaleX.coordinate;\n    let sy = scaleY.factor * (rect.sy - scaleY.coordinate) + scaleY.coordinate;\n    sx = sx + (dx ? dx : 0);\n    sy = sy + (dy ? dy : 0);\n    let w = rect.w * scaleX.factor;\n    let h = rect.h * scaleY.factor;\n    if (w < 0) {\n        sx = sx + w;\n        w = -w;\n    }\n    if (h < 0) {\n        sy = sy + h;\n        h = -h;\n    }\n    return {\n        sx, sy, w, h\n    };\n}\nexport function getTransformedPoint(point, dx = 0, dy = 0, scaleX = {\n    factor: 1,\n    coordinate: 0\n}, scaleY = {\n    factor: 1,\n    coordinate: 0\n}) {\n    let x = scaleX.factor * (point[0] - scaleX.coordinate) + scaleX.coordinate;\n    let y = scaleY.factor * (point[1] - scaleY.coordinate) + scaleY.coordinate;\n    x = x + (dx ? dx : 0);\n    y = y + (dy ? dy : 0);\n    return [x, y];\n}\nexport function combineBoundary(b1, b2) {\n    let sx = min(b1.sx, b2.sx, b1.sx + b1.w, b2.sx + b2.w);\n    let sy = min(b1.sy, b2.sy, b1.sy + b1.h, b2.sy + b2.h);\n    let ex = max(b1.sx, b2.sx, b1.sx + b1.w, b2.sx + b2.w);\n    let ey = max(b1.sy, b2.sy, b1.sy + b1.h, b2.sy + b2.h);\n    return {\n        sx,\n        sy,\n        w: ex - sx,\n        h: ey - sy\n    };\n}\nexport function getBoundaryBoxFromTwoPoints(sp, ep) {\n    let sx = min(sp[0], ep[0]);\n    let ex = max(sp[0], ep[0]);\n    let sy = min(sp[1], ep[1]);\n    let ey = max(sp[1], ep[1]);\n    return {\n        sx,\n        sy,\n        w: ex - sx,\n        h: ey - sy\n    };\n}\nconst ARROW_TIP_X_OFFSET = 5;\nconst ARROW_WINGS_X_OFFSET = 2;\nexport const getArrowPoints = (size, lastTwoPoints) => {\n    var tipXOffset = ARROW_TIP_X_OFFSET * size, wingsXOffset = ARROW_WINGS_X_OFFSET * size, lineCoef = getLineCoef(lastTwoPoints);\n    var arrowTipX = lastTwoPoints[1][0] - lastTwoPoints[0][0] > 0 ?\n        getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, tipXOffset) :\n        2 * lastTwoPoints[1][0] - getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, tipXOffset);\n    var arrowTipY = lastTwoPoints[1][0] - lastTwoPoints[0][0] === 0 ?\n        lastTwoPoints[1][1] + (lastTwoPoints[1][1] - lastTwoPoints[0][1] > 0 ? tipXOffset : -tipXOffset) :\n        getLineFromPointsY(lastTwoPoints, arrowTipX);\n    var arrowWing1X = getXFromCoefAndOffset(lastTwoPoints[1], -1 / lineCoef, wingsXOffset);\n    var arrowWing1Y = lastTwoPoints[1][1] - lastTwoPoints[0][1] === 0 ?\n        lastTwoPoints[1][1] - wingsXOffset :\n        getVerticalLineY(lastTwoPoints[1], lineCoef, arrowWing1X);\n    var arrowWing2X = 2 * lastTwoPoints[1][0] - getXFromCoefAndOffset(lastTwoPoints[1], -1 / lineCoef, wingsXOffset);\n    var arrowWing2Y = lastTwoPoints[1][1] - lastTwoPoints[0][1] === 0 ?\n        lastTwoPoints[1][1] + wingsXOffset :\n        getVerticalLineY(lastTwoPoints[1], lineCoef, arrowWing2X);\n    return [\n        [arrowTipX, arrowTipY],\n        [arrowWing1X, arrowWing1Y],\n        [arrowWing2X, arrowWing2Y]\n    ];\n};\nexport const getLineCoef = (points) => {\n    return ((points[1][1] - points[0][1]) / (points[1][0] - points[0][0])) || 0;\n};\nexport const getXFromCoefAndOffset = (refPoint, k, z) => {\n    return Math.sqrt(Math.pow(z, 2) / (Math.pow(k, 2) + 1)) + refPoint[0];\n};\nexport const getVerticalLineY = (referencePoint, coef, x) => {\n    return (referencePoint[0] - x) / coef + referencePoint[1];\n};\nexport const getLineFromPointsY = (points, x) => {\n    return (Math.max(-1000000, ((points[1][1] - points[0][1]) / (points[1][0] - points[0][0])) || 0)) * (x - points[0][0]) + points[0][1];\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass Hook {\n\tconstructor(args) {\n\t\tif (!Array.isArray(args)) args = [];\n\t\tthis._args = args;\n\t\tthis.taps = [];\n\t\tthis.interceptors = [];\n\t\tthis.call = this._call;\n\t\tthis.promise = this._promise;\n\t\tthis.callAsync = this._callAsync;\n\t\tthis._x = undefined;\n\t}\n\n\tcompile(options) {\n\t\tthrow new Error(\"Abstract: should be overriden\");\n\t}\n\n\t_createCall(type) {\n\t\treturn this.compile({\n\t\t\ttaps: this.taps,\n\t\t\tinterceptors: this.interceptors,\n\t\t\targs: this._args,\n\t\t\ttype: type\n\t\t});\n\t}\n\n\ttap(options, fn) {\n\t\tif (typeof options === \"string\") options = { name: options };\n\t\tif (typeof options !== \"object\" || options === null)\n\t\t\tthrow new Error(\n\t\t\t\t\"Invalid arguments to tap(options: Object, fn: function)\"\n\t\t\t);\n\t\toptions = Object.assign({ type: \"sync\", fn: fn }, options);\n\t\tif (typeof options.name !== \"string\" || options.name === \"\")\n\t\t\tthrow new Error(\"Missing name for tap\");\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\ttapAsync(options, fn) {\n\t\tif (typeof options === \"string\") options = { name: options };\n\t\tif (typeof options !== \"object\" || options === null)\n\t\t\tthrow new Error(\n\t\t\t\t\"Invalid arguments to tapAsync(options: Object, fn: function)\"\n\t\t\t);\n\t\toptions = Object.assign({ type: \"async\", fn: fn }, options);\n\t\tif (typeof options.name !== \"string\" || options.name === \"\")\n\t\t\tthrow new Error(\"Missing name for tapAsync\");\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\ttapPromise(options, fn) {\n\t\tif (typeof options === \"string\") options = { name: options };\n\t\tif (typeof options !== \"object\" || options === null)\n\t\t\tthrow new Error(\n\t\t\t\t\"Invalid arguments to tapPromise(options: Object, fn: function)\"\n\t\t\t);\n\t\toptions = Object.assign({ type: \"promise\", fn: fn }, options);\n\t\tif (typeof options.name !== \"string\" || options.name === \"\")\n\t\t\tthrow new Error(\"Missing name for tapPromise\");\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\t_runRegisterInterceptors(options) {\n\t\tfor (const interceptor of this.interceptors) {\n\t\t\tif (interceptor.register) {\n\t\t\t\tconst newOptions = interceptor.register(options);\n\t\t\t\tif (newOptions !== undefined) options = newOptions;\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n\n\twithOptions(options) {\n\t\tconst mergeOptions = opt =>\n\t\t\tObject.assign({}, options, typeof opt === \"string\" ? { name: opt } : opt);\n\n\t\t// Prevent creating endless prototype chains\n\t\toptions = Object.assign({}, options, this._withOptions);\n\t\tconst base = this._withOptionsBase || this;\n\t\tconst newHook = Object.create(base);\n\n\t\t(newHook.tapAsync = (opt, fn) => base.tapAsync(mergeOptions(opt), fn)),\n\t\t\t(newHook.tap = (opt, fn) => base.tap(mergeOptions(opt), fn));\n\t\tnewHook.tapPromise = (opt, fn) => base.tapPromise(mergeOptions(opt), fn);\n\t\tnewHook._withOptions = options;\n\t\tnewHook._withOptionsBase = base;\n\t\treturn newHook;\n\t}\n\n\tisUsed() {\n\t\treturn this.taps.length > 0 || this.interceptors.length > 0;\n\t}\n\n\tintercept(interceptor) {\n\t\tthis._resetCompilation();\n\t\tthis.interceptors.push(Object.assign({}, interceptor));\n\t\tif (interceptor.register) {\n\t\t\tfor (let i = 0; i < this.taps.length; i++)\n\t\t\t\tthis.taps[i] = interceptor.register(this.taps[i]);\n\t\t}\n\t}\n\n\t_resetCompilation() {\n\t\tthis.call = this._call;\n\t\tthis.callAsync = this._callAsync;\n\t\tthis.promise = this._promise;\n\t}\n\n\t_insert(item) {\n\t\tthis._resetCompilation();\n\t\tlet before;\n\t\tif (typeof item.before === \"string\") before = new Set([item.before]);\n\t\telse if (Array.isArray(item.before)) {\n\t\t\tbefore = new Set(item.before);\n\t\t}\n\t\tlet stage = 0;\n\t\tif (typeof item.stage === \"number\") stage = item.stage;\n\t\tlet i = this.taps.length;\n\t\twhile (i > 0) {\n\t\t\ti--;\n\t\t\tconst x = this.taps[i];\n\t\t\tthis.taps[i + 1] = x;\n\t\t\tconst xStage = x.stage || 0;\n\t\t\tif (before) {\n\t\t\t\tif (before.has(x.name)) {\n\t\t\t\t\tbefore.delete(x.name);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (before.size > 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (xStage > stage) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ti++;\n\t\t\tbreak;\n\t\t}\n\t\tthis.taps[i] = item;\n\t}\n}\n\nfunction createCompileDelegate(name, type) {\n\treturn function lazyCompileHook(...args) {\n\t\tthis[name] = this._createCall(type);\n\t\treturn this[name](...args);\n\t};\n}\n\nObject.defineProperties(Hook.prototype, {\n\t_call: {\n\t\tvalue: createCompileDelegate(\"call\", \"sync\"),\n\t\tconfigurable: true,\n\t\twritable: true\n\t},\n\t_promise: {\n\t\tvalue: createCompileDelegate(\"promise\", \"promise\"),\n\t\tconfigurable: true,\n\t\twritable: true\n\t},\n\t_callAsync: {\n\t\tvalue: createCompileDelegate(\"callAsync\", \"async\"),\n\t\tconfigurable: true,\n\t\twritable: true\n\t}\n});\n\nmodule.exports = Hook;\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","module.exports = {};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass HookCodeFactory {\n\tconstructor(config) {\n\t\tthis.config = config;\n\t\tthis.options = undefined;\n\t\tthis._args = undefined;\n\t}\n\n\tcreate(options) {\n\t\tthis.init(options);\n\t\tlet fn;\n\t\tswitch (this.options.type) {\n\t\t\tcase \"sync\":\n\t\t\t\tfn = new Function(\n\t\t\t\t\tthis.args(),\n\t\t\t\t\t'\"use strict\";\\n' +\n\t\t\t\t\t\tthis.header() +\n\t\t\t\t\t\tthis.content({\n\t\t\t\t\t\t\tonError: err => `throw ${err};\\n`,\n\t\t\t\t\t\t\tonResult: result => `return ${result};\\n`,\n\t\t\t\t\t\t\tresultReturns: true,\n\t\t\t\t\t\t\tonDone: () => \"\",\n\t\t\t\t\t\t\trethrowIfPossible: true\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"async\":\n\t\t\t\tfn = new Function(\n\t\t\t\t\tthis.args({\n\t\t\t\t\t\tafter: \"_callback\"\n\t\t\t\t\t}),\n\t\t\t\t\t'\"use strict\";\\n' +\n\t\t\t\t\t\tthis.header() +\n\t\t\t\t\t\tthis.content({\n\t\t\t\t\t\t\tonError: err => `_callback(${err});\\n`,\n\t\t\t\t\t\t\tonResult: result => `_callback(null, ${result});\\n`,\n\t\t\t\t\t\t\tonDone: () => \"_callback();\\n\"\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"promise\":\n\t\t\t\tlet errorHelperUsed = false;\n\t\t\t\tconst content = this.content({\n\t\t\t\t\tonError: err => {\n\t\t\t\t\t\terrorHelperUsed = true;\n\t\t\t\t\t\treturn `_error(${err});\\n`;\n\t\t\t\t\t},\n\t\t\t\t\tonResult: result => `_resolve(${result});\\n`,\n\t\t\t\t\tonDone: () => \"_resolve();\\n\"\n\t\t\t\t});\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += '\"use strict\";\\n';\n\t\t\t\tcode += \"return new Promise((_resolve, _reject) => {\\n\";\n\t\t\t\tif (errorHelperUsed) {\n\t\t\t\t\tcode += \"var _sync = true;\\n\";\n\t\t\t\t\tcode += \"function _error(_err) {\\n\";\n\t\t\t\t\tcode += \"if(_sync)\\n\";\n\t\t\t\t\tcode += \"_resolve(Promise.resolve().then(() => { throw _err; }));\\n\";\n\t\t\t\t\tcode += \"else\\n\";\n\t\t\t\t\tcode += \"_reject(_err);\\n\";\n\t\t\t\t\tcode += \"};\\n\";\n\t\t\t\t}\n\t\t\t\tcode += this.header();\n\t\t\t\tcode += content;\n\t\t\t\tif (errorHelperUsed) {\n\t\t\t\t\tcode += \"_sync = false;\\n\";\n\t\t\t\t}\n\t\t\t\tcode += \"});\\n\";\n\t\t\t\tfn = new Function(this.args(), code);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.deinit();\n\t\treturn fn;\n\t}\n\n\tsetup(instance, options) {\n\t\tinstance._x = options.taps.map(t => t.fn);\n\t}\n\n\t/**\n\t * @param {{ type: \"sync\" | \"promise\" | \"async\", taps: Array<Tap>, interceptors: Array<Interceptor> }} options\n\t */\n\tinit(options) {\n\t\tthis.options = options;\n\t\tthis._args = options.args.slice();\n\t}\n\n\tdeinit() {\n\t\tthis.options = undefined;\n\t\tthis._args = undefined;\n\t}\n\n\theader() {\n\t\tlet code = \"\";\n\t\tif (this.needContext()) {\n\t\t\tcode += \"var _context = {};\\n\";\n\t\t} else {\n\t\t\tcode += \"var _context;\\n\";\n\t\t}\n\t\tcode += \"var _x = this._x;\\n\";\n\t\tif (this.options.interceptors.length > 0) {\n\t\t\tcode += \"var _taps = this.taps;\\n\";\n\t\t\tcode += \"var _interceptors = this.interceptors;\\n\";\n\t\t}\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.call) {\n\t\t\t\tcode += `${this.getInterceptor(i)}.call(${this.args({\n\t\t\t\t\tbefore: interceptor.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t}\n\t\t}\n\t\treturn code;\n\t}\n\n\tneedContext() {\n\t\tfor (const tap of this.options.taps) if (tap.context) return true;\n\t\treturn false;\n\t}\n\n\tcallTap(tapIndex, { onError, onResult, onDone, rethrowIfPossible }) {\n\t\tlet code = \"\";\n\t\tlet hasTapCached = false;\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.tap) {\n\t\t\t\tif (!hasTapCached) {\n\t\t\t\t\tcode += `var _tap${tapIndex} = ${this.getTap(tapIndex)};\\n`;\n\t\t\t\t\thasTapCached = true;\n\t\t\t\t}\n\t\t\t\tcode += `${this.getInterceptor(i)}.tap(${\n\t\t\t\t\tinterceptor.context ? \"_context, \" : \"\"\n\t\t\t\t}_tap${tapIndex});\\n`;\n\t\t\t}\n\t\t}\n\t\tcode += `var _fn${tapIndex} = ${this.getTapFn(tapIndex)};\\n`;\n\t\tconst tap = this.options.taps[tapIndex];\n\t\tswitch (tap.type) {\n\t\t\tcase \"sync\":\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += `var _hasError${tapIndex} = false;\\n`;\n\t\t\t\t\tcode += \"try {\\n\";\n\t\t\t\t}\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += `var _result${tapIndex} = _fn${tapIndex}(${this.args({\n\t\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t\t})});\\n`;\n\t\t\t\t} else {\n\t\t\t\t\tcode += `_fn${tapIndex}(${this.args({\n\t\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t\t})});\\n`;\n\t\t\t\t}\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += \"} catch(_err) {\\n\";\n\t\t\t\t\tcode += `_hasError${tapIndex} = true;\\n`;\n\t\t\t\t\tcode += onError(\"_err\");\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\tcode += `if(!_hasError${tapIndex}) {\\n`;\n\t\t\t\t}\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcode += onDone();\n\t\t\t\t}\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"async\":\n\t\t\t\tlet cbCode = \"\";\n\t\t\t\tif (onResult) cbCode += `(_err${tapIndex}, _result${tapIndex}) => {\\n`;\n\t\t\t\telse cbCode += `_err${tapIndex} => {\\n`;\n\t\t\t\tcbCode += `if(_err${tapIndex}) {\\n`;\n\t\t\t\tcbCode += onError(`_err${tapIndex}`);\n\t\t\t\tcbCode += \"} else {\\n\";\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcbCode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcbCode += onDone();\n\t\t\t\t}\n\t\t\t\tcbCode += \"}\\n\";\n\t\t\t\tcbCode += \"}\";\n\t\t\t\tcode += `_fn${tapIndex}(${this.args({\n\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined,\n\t\t\t\t\tafter: cbCode\n\t\t\t\t})});\\n`;\n\t\t\t\tbreak;\n\t\t\tcase \"promise\":\n\t\t\t\tcode += `var _hasResult${tapIndex} = false;\\n`;\n\t\t\t\tcode += `var _promise${tapIndex} = _fn${tapIndex}(${this.args({\n\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t\tcode += `if (!_promise${tapIndex} || !_promise${tapIndex}.then)\\n`;\n\t\t\t\tcode += `  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${tapIndex} + ')');\\n`;\n\t\t\t\tcode += `_promise${tapIndex}.then(_result${tapIndex} => {\\n`;\n\t\t\t\tcode += `_hasResult${tapIndex} = true;\\n`;\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcode += onDone();\n\t\t\t\t}\n\t\t\t\tcode += `}, _err${tapIndex} => {\\n`;\n\t\t\t\tcode += `if(_hasResult${tapIndex}) throw _err${tapIndex};\\n`;\n\t\t\t\tcode += onError(`_err${tapIndex}`);\n\t\t\t\tcode += \"});\\n\";\n\t\t\t\tbreak;\n\t\t}\n\t\treturn code;\n\t}\n\n\tcallTapsSeries({\n\t\tonError,\n\t\tonResult,\n\t\tresultReturns,\n\t\tonDone,\n\t\tdoneReturns,\n\t\trethrowIfPossible\n\t}) {\n\t\tif (this.options.taps.length === 0) return onDone();\n\t\tconst firstAsync = this.options.taps.findIndex(t => t.type !== \"sync\");\n\t\tconst somethingReturns = resultReturns || doneReturns || false;\n\t\tlet code = \"\";\n\t\tlet current = onDone;\n\t\tfor (let j = this.options.taps.length - 1; j >= 0; j--) {\n\t\t\tconst i = j;\n\t\t\tconst unroll = current !== onDone && this.options.taps[i].type !== \"sync\";\n\t\t\tif (unroll) {\n\t\t\t\tcode += `function _next${i}() {\\n`;\n\t\t\t\tcode += current();\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcurrent = () => `${somethingReturns ? \"return \" : \"\"}_next${i}();\\n`;\n\t\t\t}\n\t\t\tconst done = current;\n\t\t\tconst doneBreak = skipDone => {\n\t\t\t\tif (skipDone) return \"\";\n\t\t\t\treturn onDone();\n\t\t\t};\n\t\t\tconst content = this.callTap(i, {\n\t\t\t\tonError: error => onError(i, error, done, doneBreak),\n\t\t\t\tonResult:\n\t\t\t\t\tonResult &&\n\t\t\t\t\t(result => {\n\t\t\t\t\t\treturn onResult(i, result, done, doneBreak);\n\t\t\t\t\t}),\n\t\t\t\tonDone: !onResult && done,\n\t\t\t\trethrowIfPossible:\n\t\t\t\t\trethrowIfPossible && (firstAsync < 0 || i < firstAsync)\n\t\t\t});\n\t\t\tcurrent = () => content;\n\t\t}\n\t\tcode += current();\n\t\treturn code;\n\t}\n\n\tcallTapsLooping({ onError, onDone, rethrowIfPossible }) {\n\t\tif (this.options.taps.length === 0) return onDone();\n\t\tconst syncOnly = this.options.taps.every(t => t.type === \"sync\");\n\t\tlet code = \"\";\n\t\tif (!syncOnly) {\n\t\t\tcode += \"var _looper = () => {\\n\";\n\t\t\tcode += \"var _loopAsync = false;\\n\";\n\t\t}\n\t\tcode += \"var _loop;\\n\";\n\t\tcode += \"do {\\n\";\n\t\tcode += \"_loop = false;\\n\";\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.loop) {\n\t\t\t\tcode += `${this.getInterceptor(i)}.loop(${this.args({\n\t\t\t\t\tbefore: interceptor.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t}\n\t\t}\n\t\tcode += this.callTapsSeries({\n\t\t\tonError,\n\t\t\tonResult: (i, result, next, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += \"_loop = true;\\n\";\n\t\t\t\tif (!syncOnly) code += \"if(_loopAsync) _looper();\\n\";\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += `} else {\\n`;\n\t\t\t\tcode += next();\n\t\t\t\tcode += `}\\n`;\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone:\n\t\t\t\tonDone &&\n\t\t\t\t(() => {\n\t\t\t\t\tlet code = \"\";\n\t\t\t\t\tcode += \"if(!_loop) {\\n\";\n\t\t\t\t\tcode += onDone();\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\treturn code;\n\t\t\t\t}),\n\t\t\trethrowIfPossible: rethrowIfPossible && syncOnly\n\t\t});\n\t\tcode += \"} while(_loop);\\n\";\n\t\tif (!syncOnly) {\n\t\t\tcode += \"_loopAsync = true;\\n\";\n\t\t\tcode += \"};\\n\";\n\t\t\tcode += \"_looper();\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\tcallTapsParallel({\n\t\tonError,\n\t\tonResult,\n\t\tonDone,\n\t\trethrowIfPossible,\n\t\tonTap = (i, run) => run()\n\t}) {\n\t\tif (this.options.taps.length <= 1) {\n\t\t\treturn this.callTapsSeries({\n\t\t\t\tonError,\n\t\t\t\tonResult,\n\t\t\t\tonDone,\n\t\t\t\trethrowIfPossible\n\t\t\t});\n\t\t}\n\t\tlet code = \"\";\n\t\tcode += \"do {\\n\";\n\t\tcode += `var _counter = ${this.options.taps.length};\\n`;\n\t\tif (onDone) {\n\t\t\tcode += \"var _done = () => {\\n\";\n\t\t\tcode += onDone();\n\t\t\tcode += \"};\\n\";\n\t\t}\n\t\tfor (let i = 0; i < this.options.taps.length; i++) {\n\t\t\tconst done = () => {\n\t\t\t\tif (onDone) return \"if(--_counter === 0) _done();\\n\";\n\t\t\t\telse return \"--_counter;\";\n\t\t\t};\n\t\t\tconst doneBreak = skipDone => {\n\t\t\t\tif (skipDone || !onDone) return \"_counter = 0;\\n\";\n\t\t\t\telse return \"_counter = 0;\\n_done();\\n\";\n\t\t\t};\n\t\t\tcode += \"if(_counter <= 0) break;\\n\";\n\t\t\tcode += onTap(\n\t\t\t\ti,\n\t\t\t\t() =>\n\t\t\t\t\tthis.callTap(i, {\n\t\t\t\t\t\tonError: error => {\n\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\tcode += \"if(_counter > 0) {\\n\";\n\t\t\t\t\t\t\tcode += onError(i, error, done, doneBreak);\n\t\t\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonResult:\n\t\t\t\t\t\t\tonResult &&\n\t\t\t\t\t\t\t(result => {\n\t\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\t\tcode += \"if(_counter > 0) {\\n\";\n\t\t\t\t\t\t\t\tcode += onResult(i, result, done, doneBreak);\n\t\t\t\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\tonDone:\n\t\t\t\t\t\t\t!onResult &&\n\t\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\t\treturn done();\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\trethrowIfPossible\n\t\t\t\t\t}),\n\t\t\t\tdone,\n\t\t\t\tdoneBreak\n\t\t\t);\n\t\t}\n\t\tcode += \"} while(false);\\n\";\n\t\treturn code;\n\t}\n\n\targs({ before, after } = {}) {\n\t\tlet allArgs = this._args;\n\t\tif (before) allArgs = [before].concat(allArgs);\n\t\tif (after) allArgs = allArgs.concat(after);\n\t\tif (allArgs.length === 0) {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\treturn allArgs.join(\", \");\n\t\t}\n\t}\n\n\tgetTapFn(idx) {\n\t\treturn `_x[${idx}]`;\n\t}\n\n\tgetTap(idx) {\n\t\treturn `_taps[${idx}]`;\n\t}\n\n\tgetInterceptor(idx) {\n\t\treturn `_interceptors[${idx}]`;\n\t}\n}\n\nmodule.exports = HookCodeFactory;\n","!function(e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).EventEmitter3=e()}(function(){return function i(s,f,c){function u(t,e){if(!f[t]){if(!s[t]){var n=\"function\"==typeof require&&require;if(!e&&n)return n(t,!0);if(a)return a(t,!0);var r=new Error(\"Cannot find module '\"+t+\"'\");throw r.code=\"MODULE_NOT_FOUND\",r}var o=f[t]={exports:{}};s[t][0].call(o.exports,function(e){return u(s[t][1][e]||e)},o,o.exports,i,s,f,c)}return f[t].exports}for(var a=\"function\"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){\"use strict\";var r=Object.prototype.hasOwnProperty,v=\"~\";function o(){}function f(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,n,r,o){if(\"function\"!=typeof n)throw new TypeError(\"The listener must be a function\");var i=new f(n,r||e,o),s=v?v+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],i]:e._events[s].push(i):(e._events[s]=i,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(v=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(v?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=v?v+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,i=new Array(o);r<o;r++)i[r]=n[r].fn;return i},s.prototype.listenerCount=function(e){var t=v?v+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,r,o,i){var s=v?v+e:e;if(!this._events[s])return!1;var f,c=this._events[s],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,i),!0}for(p=1,f=new Array(u-1);p<u;p++)f[p-1]=arguments[p];c.fn.apply(c.context,f)}else for(var a,l=c.length,p=0;p<l;p++)switch(c[p].once&&this.removeListener(e,c[p].fn,void 0,!0),u){case 1:c[p].fn.call(c[p].context);break;case 2:c[p].fn.call(c[p].context,t);break;case 3:c[p].fn.call(c[p].context,t,n);break;case 4:c[p].fn.call(c[p].context,t,n,r);break;default:if(!f)for(a=1,f=new Array(u-1);a<u;a++)f[a-1]=arguments[a];c[p].fn.apply(c[p].context,f)}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,r){var o=v?v+e:e;if(!this._events[o])return this;if(!t)return u(this,o),this;var i=this._events[o];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||u(this,o);else{for(var s=0,f=[],c=i.length;s<c;s++)(i[s].fn!==t||r&&!i[s].once||n&&i[s].context!==n)&&f.push(i[s]);f.length?this._events[o]=1===f.length?f[0]:f:u(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=v?v+e:e,this._events[t]&&u(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=v,s.EventEmitter=s,void 0!==t&&(t.exports=s)},{}]},{},[1])(1)});","/*\n * @Author: lduoduo\n * @Date: 2018-01-27 22:09:41\n * @Last Modified by: lduoduo\n * @Last Modified time: 2018-01-27 22:16:25\n * toast 消息提示组件\n */\nimport ToastCtrl from './toast-ctrl';\n/**\n * option.msg toast内容\n * option.time 停留时间: 默认2s，设置null: 无限期显示\n * @param {*} option\n */\nexport const showToast = (option) => {\n    const { msg, time = 2, type = 'info', top = 30 } = option;\n    const param = {\n        message: msg.constructor === String ? msg : JSON.stringify(msg),\n        time,\n        type,\n        top\n    };\n    ToastCtrl.show(param);\n};\nexport const hideToast = () => {\n    ToastCtrl.hide();\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","class DrawConfig {\n    constructor() {\n        this.strokeColor = 'rgb(0,0,0)';\n        /**\n         * 本来是每3-5次鼠标移动发送一次动作的。\n         * 后来加上了增量发送数据，以及数据延迟发送，导致3-5次鼠标移动动作会被打到一个包中发送，且没有数据重复。\n         * 又因为3-5次才发送会影响本地绘制，因此，将发送频次改回1次鼠标动作发送一个包（实际会延时批量发送)\n         */\n        this.pointsPerBatch = 1;\n        this.strokeWidth = 5;\n        this.opacity = 1;\n    }\n    // setStrokeColor(color: Array<number>) {\n    //     if (color.length < 3 || color.length > 4) {\n    //         console.error('白板--> setStrokeColor的参数必须为长度为3或者4的数组, 传入的参数为', color)\n    //     } else {\n    //         let hasError = false\n    //         for (let i = 0; i < 3; i++) {\n    //             if (color[i] < 0 || color[i] > 255) {\n    //                 console.error('白板--> setStrokeColor的参数数组前三位必须为0-255之间的数值, 传入的参数为', color)\n    //                 hasError = true\n    //             }\n    //         }\n    //         if (color.length === 4 && (color[3] < 0 || color[3] > 1)) {\n    //             console.error('白板--> setStrokeColor的参数数组第四位必须为0-1之间的数值, 传入的参数为', color)\n    //             hasError = true\n    //         }\n    //         if (!hasError && color.length === 3) {\n    //             this.strokeColor = `rgb(${color[0]},${color[1]},${color[2]})`\n    //         } else if (!hasError) {\n    //             this.strokeColor = `rgb(${color[0]},${color[1]},${color[2]},${color[3]})`\n    //         }\n    //     }\n    // }\n    setStrokeColor(color) {\n        this.strokeColor = color;\n    }\n    setStrokeWidth(width) {\n        this.strokeWidth = width;\n    }\n    setOpacity(value) {\n        this.opacity = value;\n    }\n}\nconst drawConfig = new DrawConfig();\nexport default drawConfig;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","module.exports = true;\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };","import Operation from '../Operation';\nexport const convertToCameraBoundSnapshot = (camera, snapshotData) => {\n    const boundary = camera.getNextCameraBound(snapshotData);\n    /**\n     * boundary的大小要被限制\n     */\n    const MAX_ALLOWED_WIDTH = 100000;\n    if (boundary.width > MAX_ALLOWED_WIDTH || boundary.height > MAX_ALLOWED_WIDTH) {\n        if (boundary.width > boundary.height) {\n            boundary.height = boundary.height * MAX_ALLOWED_WIDTH / boundary.width;\n            boundary.width = MAX_ALLOWED_WIDTH;\n        }\n        else {\n            boundary.width = boundary.width * MAX_ALLOWED_WIDTH / boundary.height;\n            boundary.height = MAX_ALLOWED_WIDTH;\n        }\n    }\n    /**\n     * 防止width，height崩溃\n     */\n    if (boundary.width === 0 || boundary.height === 0) {\n        boundary.width = 1000;\n        boundary.height = 1000;\n    }\n    if (LOG) {\n        console.log(`白板--> convert camera bound op: ${JSON.stringify(snapshotData)} -> ${JSON.stringify(boundary)}`);\n    }\n    return {\n        type: 'camera-bound',\n        boundary,\n        skipUndo: true,\n        animate: snapshotData.animate,\n        reuseOpType: 'camera-bound'\n    };\n};\nclass CameraBoundOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'camera-bound';\n        this.description = \"视角位置\";\n    }\n    eventsToListen() {\n        return {\n            'camera-bound:send': {\n                value: this.sendCameraBound.bind(this),\n                information: {\n                    args: 'boundary: {centerX: number, centerY: number, width: number, width: number}, animate: boolean',\n                    message: `发送当前用户的camera-bound，常用于主播同步自己的camera-bound`\n                }\n            }\n        };\n    }\n    sendCameraBound(boundary, animate) {\n        this.dispatch({\n            type: 'camera-bound',\n            boundary,\n            skipUndo: true,\n            animate,\n            reuseOpType: 'camera-bound'\n        });\n    }\n}\nexport default CameraBoundOp;\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","exports.f = {}.propertyIsEnumerable;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","/**\n * 不处于常规处理流程的快照类型，即该快照不会被撤销，重做，清空等等\n *\n * 主要包括ppt转码的图片，h5, video等等\n */\nexport const snapshotOutOfNormalFlowTypes = ['background', 'pan', 'zoom', 'mouse-pointer', 'select', 'laser', 'camera-bound'];\n/**\n * 会影响房间内所有白板的动作\n */\nexport const globalSnapshotTypes = ['camera-bound'];\nexport const cameraSnapshotTypes = ['pan', 'zoom', 'camera-bound', 'reset-camera', 'fit-to-content', 'fit-to-doc', 'resize-camera'];\n","module.exports = require(\"regenerator-runtime\");\n","exports.f = require('./_wks');\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/set\"), __esModule: true };","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","exports.f = Object.getOwnPropertySymbols;\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","import { getBoundaryBoxFromTwoPoints, getTransformedBoundary, rectCollide } from \"../misc/shapeHelper\";\n/**\n* 返回起始点到终点围成的矩形中的快照id数组\n*/\nexport const findOpsUnderRect = (points, drawOps) => {\n    if (points.length === 0)\n        return [];\n    const mouseBoundary = getBoundaryBoxFromTwoPoints(points[0], points[points.length - 1]);\n    const res = [];\n    for (let opId in drawOps) {\n        const snapshot = drawOps[opId];\n        if (snapshot.data.boundary && snapshotSelectable(snapshot)) {\n            const boundary = getTransformedBoundary(snapshot.data.boundary, snapshot.data.dx, snapshot.data.dy, snapshot.data.scaleX, snapshot.data.scaleY);\n            if (rectCollide(boundary, mouseBoundary)) {\n                res.push(opId);\n            }\n        }\n    }\n    return res;\n};\n/**\n * 返回在终点下面的快照id。仅返回一个就好了。否则相互重叠元素永远分不开\n */\nexport const findOpsUnderMouse = (points, drawOps, opsManager) => {\n    if (points.length === 0)\n        return [];\n    const mouseBoundary = getBoundaryBoxFromTwoPoints(points[0], points[points.length - 1]);\n    const [mx, my] = points[points.length - 1];\n    const opIds = Object.keys(drawOps);\n    for (let i = opIds.length - 1; i >= 0; i--) {\n        /**\n         * 最后画的元素最先进行判定\n         */\n        const snapshot = drawOps[opIds[i]];\n        const op = opsManager.opMap[snapshot.data.type];\n        if (snapshot.data.boundary && snapshotSelectable(snapshot)) {\n            const boundary = getTransformedBoundary(snapshot.data.boundary, snapshot.data.dx, snapshot.data.dy, snapshot.data.scaleX, snapshot.data.scaleY);\n            if (rectCollide(boundary, mouseBoundary)) {\n                if (op && 'ifMouseOnOp' in op) {\n                    //先检测矩阵是否碰撞，如果碰撞，再进一步检查鼠标是否再图形上\n                    if (op.ifMouseOnOp(snapshot, mx, my)) {\n                        return [opIds[i]];\n                    }\n                }\n                else {\n                    return [opIds[i]];\n                }\n            }\n        }\n    }\n    return [];\n};\nconst nonSelectableOpTypes = ['mouse-pointer', 'eraser'];\nexport const snapshotSelectable = (snapshot) => {\n    return !nonSelectableOpTypes.includes(snapshot.data.type) && !snapshot.data.locked;\n};\n/**\n * 判断数组是否变化\n * @param currIds\n * @param lastIds\n */\nexport const idsChanged = (currIds, lastIds) => {\n    if (currIds.length !== lastIds.length)\n        return true;\n    for (let id of currIds) {\n        if (lastIds.indexOf(id) === -1)\n            return true;\n    }\n    return false;\n};\n/**\n * 返回currIds - lastIds\n * @param currIds\n * @param lastIds\n */\nexport const arrayDeduce = (currIds, lastIds) => {\n    const res = [];\n    for (let id of currIds) {\n        if (lastIds.indexOf(id) === -1) {\n            res.push(id);\n        }\n    }\n    return res;\n};\n/**\n * Draws a rounded rectangle using the current state of the canvas.\n * If you omit the last three params, it will draw a rectangle\n * outline with a 5 pixel border radius\n * @param {CanvasRenderingContext2D} ctx\n * @param {Number} x The top left x coordinate\n * @param {Number} y The top left y coordinate\n * @param {Number} width The width of the rectangle\n * @param {Number} height The height of the rectangle\n * @param {Number} [radius = 5] The corner radius; It can also be an object\n *                 to specify different radii for corners\n * @param {Number} [radius.tl = 0] Top left\n * @param {Number} [radius.tr = 0] Top right\n * @param {Number} [radius.br = 0] Bottom right\n * @param {Number} [radius.bl = 0] Bottom left\n * @param {Boolean} [fill = false] Whether to fill the rectangle.\n * @param {Boolean} [stroke = true] Whether to stroke the rectangle.\n */\nexport const roundRect = (ctx, x, y, width, height, radius, type) => {\n    ctx.beginPath();\n    ctx.moveTo(x + radius, y);\n    ctx.lineTo(x + width - radius, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n    ctx.lineTo(x + width, y + height - radius);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n    ctx.lineTo(x + radius, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n    ctx.lineTo(x, y + radius);\n    ctx.quadraticCurveTo(x, y, x + radius, y);\n    ctx.closePath();\n    if (type === 'stroke') {\n        ctx.stroke();\n    }\n    else {\n        ctx.fill();\n    }\n};\nexport const drawUserName = (opt) => {\n    let { ctx, account, scale, px, py, bgColor, fontSize = 24, textPadding = 15, rectMarginBottom = 15, radius = 10 } = opt;\n    let rectHeight = (fontSize + 12) / scale;\n    textPadding = textPadding / scale;\n    rectMarginBottom = rectMarginBottom / scale;\n    fontSize = fontSize / scale;\n    radius = radius / scale;\n    let textFillColor = (bgColor === 'white' || bgColor === 'rgb(255,255,255)') ? 'black' : 'white';\n    ctx.beginPath();\n    ctx.font = `${fontSize}px Arial`;\n    const textWidth = ctx.measureText(account).width;\n    ctx.fillStyle = bgColor;\n    roundRect(ctx, px - textWidth / 2 - textPadding, py - rectMarginBottom - rectHeight, textWidth + textPadding * 2, rectHeight, radius, 'fill');\n    ctx.fillStyle = textFillColor;\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(account, px - textWidth / 2, py - rectMarginBottom - rectHeight / 2);\n};\n","export const shouldDispatch = (app) => {\n    const mode = app.vision.mode;\n    if (mode === 'broadcaster' || mode === 'freeObserver') {\n        return true;\n    }\n    else {\n        return false;\n    }\n};\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n","/**\n * debug 模块需要在浏览器的localstorage中，执行\n *  localstorage.Debug = \"*\"  -- 表明显示所有的debug. 可以在文件最下方，选择关闭哪些调试\n *\n *\n * 从这里创建一些共用的调试模块，\n * 大致分为有下面几类\n * - 鼠标相关事件\n * - 与服务器通信的事件比如收发包\n *  2.1 一个包从完整的接收到途径的过程\n *  2.2 对各种包的处理\n * - 模块\n * - 画板状态变更事件\n * - 画板的函数调用事件\n * - 具体的某个函数调用事件\n *\n * 模块内的调试在模块内创建\n */\nimport createDebug from 'debug';\nconst noop = () => { };\nconst logger = {\n    mouse: createDebug('mouse'),\n    h5: createDebug('h5'),\n    package: createDebug('package'),\n    shape: createDebug('shape'),\n    user: createDebug('user'),\n    command: createDebug('command'),\n    image: function (url, note = '') {\n        var image = new Image();\n        image.onload = function () {\n            var style = [\n                'font-size: 14px;',\n                'padding: ' + image.height / 2 + 'px ' + image.width / 2 + 'px;',\n                'background: url(' + url + ') no-repeat;',\n                'background-size: contain;'\n            ].join(' ');\n            console.log(note + '%c ', style);\n        };\n        image.src = url;\n    },\n    m: {\n        adapter: createDebug('adapter'),\n        worker: createDebug('worker'),\n        containermanager: createDebug('containermanager'),\n        shapemanager: createDebug('shapemanager'),\n        usermanager: createDebug('usermanager'),\n        syncmanager: createDebug('syncmanager'),\n    },\n    log: console.log.bind(console),\n    warn: console.warn.bind(console),\n    error: console.error.bind(console),\n};\n// 在这里替换掉原来的调试函数，控制哪些调试信息不输出\nif (!localStorage.getItem('debugMouse')) {\n    logger.mouse = noop;\n}\nexport default logger;\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","import { off, on } from \"../misc/dom-events\";\nimport { distSqrt } from \"../misc/shapeHelper\";\nexport const DPI = window.devicePixelRatio || 1;\nconsole.log(\"白板--> DPI\", DPI);\n//click不能超过100ms\nconst TIMER_THRESHOLD = 150;\n//超过5px的移动就不能被判定为click\nconst MOVE_THRESHOLD = 5;\nclass Container {\n    constructor(app) {\n        this.elInitW = 1920;\n        this.elInitH = 1080;\n        this.isLandscape = false;\n        this.elesToResize = [];\n        this.top = 0;\n        this.left = 0;\n        this.keyPressed = {};\n        /**\n         * 若不判定为click，则发送mousedown,mousemove[], mouseup事件\n         * 否则发送click事件\n         */\n        //怀疑本次操作是点击操作\n        this.maybeClick = false;\n        //怀疑本次操作是连续点击操作\n        //发射鼠标动作前，将动作存在这里\n        this.mouseEventCache = [];\n        this.isMouseDown = false;\n        this.sx = 0;\n        this.sy = 0;\n        this.lastMx = 0;\n        this.lastMy = 0;\n        this.lastClientX = 0;\n        this.lastClientY = 0;\n        this._resize = (event) => {\n            var _a;\n            const rect = this.el.getBoundingClientRect();\n            this.containerRect = rect;\n            if (this.app.ifDeviceSupportOrientation) {\n                //触摸屏横竖屏切换时，需要设置isLandscape\n                this.isLandscape = rect.width > rect.height;\n            }\n            for (let ele of this.elesToResize) {\n                if (ele instanceof HTMLCanvasElement) {\n                    ele.width = rect.width * DPI;\n                    ele.height = rect.height * DPI;\n                }\n                ele.style.width = `${rect.width}px`;\n                ele.style.height = `${rect.height}px`;\n            }\n            this.top = rect.top;\n            this.left = rect.left;\n            this.setElePosition(this.backgroundEl, 'fixed');\n            this.setElePosition(this.imageEl, 'fixed');\n            this.setElePosition(this.domEl, 'fixed');\n            this.setElePosition(this.textAreaEl, 'fixed');\n            //很不喜欢使用eventEmitter，但是不这样做不好解决text工具栏大小没动态更新的bug\n            this.dispatcher.emit('container:resize');\n            /**\n             * 必须设置canvas宽高后才能够设置lineCap, lineJoin\n             */\n            this.ctx.lineCap = 'round';\n            this.ctx.lineJoin = 'round';\n            this.frontCtx.lineCap = 'round';\n            this.frontCtx.lineJoin = 'round';\n            this.laserCtx.lineCap = 'round';\n            this.laserCtx.lineJoin = 'round';\n            /**\n             * 初始化时不要用resize发送camera-bound\n             */\n            if (event) {\n                (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.resize(event, rect.width, rect.height);\n            }\n        };\n        this.unbindEvents = () => {\n            var _a;\n            (_a = this._ro) === null || _a === void 0 ? void 0 : _a.disconnect();\n            window.removeEventListener('scroll', this._resize);\n            window.removeEventListener('resize', this._resize);\n            window.removeEventListener('orientationchange', this._resize);\n            off(this.el, 'mousedown', this._mousedown);\n            off(this.el, 'mouseleave', this._mouseleave);\n            off(window.document, 'mousemove', this._mousemove);\n            off(window.document, 'mouseup', this._mouseup);\n            off(window.document, 'mousewheel', this._mousewheel);\n            off(this.el, 'touchstart', this._mousedown);\n            off(this.el, 'touchmove', this._mousemove);\n            off(this.el, 'touchend', this._mouseup);\n            off(window.document, 'keyup', this._keyup);\n            off(window.document, 'keydown', this._keydown);\n            off(document.body, 'contextmenu', this._contextmenu);\n        };\n        this.getEventClientPos = (event) => {\n            let clientX;\n            let clientY;\n            if (event instanceof MouseEvent) {\n                clientX = event.clientX;\n                clientY = event.clientY;\n            }\n            else {\n                clientX = event.touches[0].clientX;\n                clientY = event.touches[0].clientY;\n            }\n            //减去canvas到browser左上角的差值\n            clientX = clientX - this.left;\n            clientY = clientY - this.top;\n            //前两个是在世界坐标系\n            //后两个是在canvas上的位置\n            return [...this.app.camera.convertToPointInWorld(clientX, clientY), clientX, clientY];\n        };\n        this._contextmenu = (event) => {\n            event.preventDefault();\n        };\n        this._mousedown = (event) => {\n            if (this.isMouseDown) {\n                //忽略暴力测试下的连续mousedown操作\n                return;\n            }\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            this.lastMx = mx;\n            this.lastMy = my;\n            this.lastClientX = clientX;\n            this.lastClientY = clientY;\n            this.isMouseDown = true;\n            //怀疑可能是点击操作\n            this.maybeClick = true;\n            this.sx = mx;\n            this.sy = my;\n            this.mouseEventCache.push({\n                type: 'mousedown',\n                args: [event, this.sx, this.sy, clientX, clientY]\n            });\n            this.mouseEmitTimer = setTimeout(() => {\n                //时间过长，不是点击操作\n                this.maybeClick = false;\n                this._emitMouseEvents();\n            }, TIMER_THRESHOLD);\n        };\n        this._mousemove = (event) => {\n            var _a;\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            this.lastMx = mx;\n            this.lastMy = my;\n            this.lastClientX = clientX;\n            this.lastClientY = clientY;\n            if (this.maybeClick) {\n                //如果鼠标移动过多，则不是点击操作\n                this.maybeClick = distSqrt([mx, my], [this.sx, this.sy]) <= MOVE_THRESHOLD;\n            }\n            if (!this.maybeClick) {\n                /**\n                 * 确定不是点击操作，直接发送鼠标移动事件，以及之前缓存的鼠标动作\n                 */\n                if (this.mouseEmitTimer) {\n                    this.mouseEmitTimer = clearTimeout(this.mouseEmitTimer);\n                    this._emitMouseEvents();\n                }\n                (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mousemove(event, mx, my, clientX, clientY);\n            }\n            else {\n                /**\n                 * 不确定是不是点击操作，先将动作存放起来\n                 */\n                this.mouseEventCache.push({\n                    type: 'mousemove',\n                    args: [event, mx, my, clientX, clientY]\n                });\n            }\n        };\n        this._mouseup = (event) => {\n            var _a, _b;\n            const [mx, my, clientX, clientY] = [this.lastMx, this.lastMy, this.lastClientX, this.lastClientY];\n            if (!this.maybeClick) {\n                //确定不是点击操作，将之前缓存的操作，以及本次mouseup发送出去\n                if (this.mouseEmitTimer) {\n                    this.mouseEmitTimer = clearTimeout(this.mouseEmitTimer);\n                    this._emitMouseEvents();\n                }\n                this.mouseEventCache = [];\n                (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mouseup(event, mx, my, clientX, clientY);\n            }\n            else {\n                //是点击操作，不用发送down，up以及move\n                this.mouseEmitTimer = clearTimeout(this.mouseEmitTimer);\n                this.mouseEventCache = [];\n                this.maybeClick = false;\n                //发送点击操作\n                (_b = this.opsManager) === null || _b === void 0 ? void 0 : _b.click(event, mx, my, clientX, clientY);\n            }\n            this.isMouseDown = false;\n        };\n        this._mouseleave = (event) => {\n            var _a;\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mouseleave(event, mx, my, clientX, clientY);\n        };\n        this._mousewheel = (event) => {\n            var _a;\n            const [mx, my, clientX, clientY] = this.getEventClientPos(event);\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.mousewheel(event, mx, my, clientX, clientY);\n        };\n        //处理完事件后，再将key状态置为松开\n        this._keyup = (event) => {\n            var _a;\n            const key = event.key.toLocaleLowerCase();\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.keyup(event);\n            this.keyPressed[key] = false;\n        };\n        this._keydown = (event) => {\n            var _a;\n            const key = event.key.toLocaleLowerCase();\n            this.keyPressed[key] = true;\n            (_a = this.opsManager) === null || _a === void 0 ? void 0 : _a.keydown(event);\n        };\n        this.app = app;\n        this.dispatcher = app.dispatcher;\n        this.el = document.createElement('div');\n        this.el.style.position = 'relative';\n        this.el.style.width = '100%';\n        this.el.style.height = '100%';\n        this.setBackgroundColor();\n        this.backgroundEl = this.setupDivElement('bg-el');\n        this.imageEl = this.setupDivElement('image-el');\n        let temp = this.setupCanvasElement('bg-canvas');\n        this.canvas = temp.canvas;\n        this.ctx = temp.ctx;\n        temp = this.setupCanvasElement('front-canvas');\n        this.frontCanvas = temp.canvas;\n        this.frontCtx = temp.ctx;\n        this.domEl = this.setupDivElement('dom-el');\n        this.textAreaEl = this.setupDivElement('toolbar-el');\n        temp = this.setupCanvasElement('laser-canvas');\n        this.laserCanvas = temp.canvas;\n        this.laserCtx = temp.ctx;\n    }\n    /**\n     * config变动时，需要调用此函数修改背景色\n     */\n    setBackgroundColor() {\n        this.el.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n    }\n    appendTo(container) {\n        container.appendChild(this.el);\n        this._resize();\n        this.dispatcher.emit('container:set');\n        this._bindEvents(container);\n    }\n    addOpsManager(opsManager) {\n        this.opsManager = opsManager;\n    }\n    isKeyDown(key) {\n        return this.keyPressed.hasOwnProperty(key) && this.keyPressed[key];\n    }\n    /**\n     * 测试鼠标在container或者其子元素上面\n     * @param div\n     */\n    isTargetOnContainer(div) {\n        var _a;\n        return div === this.el || (div === null || div === void 0 ? void 0 : div.parentNode) === this.el || ((_a = div === null || div === void 0 ? void 0 : div.parentNode) === null || _a === void 0 ? void 0 : _a.parentNode) === this.el;\n    }\n    setupDivElement(className) {\n        const ele = document.createElement('div');\n        ele.style.transformOrigin = 'left top';\n        ele.className = className;\n        this.el.appendChild(ele);\n        return ele;\n    }\n    setupCanvasElement(className) {\n        const ele = document.createElement('canvas');\n        this.setElePosition(ele);\n        ele.className = className;\n        ele.style.pointerEvents = 'none';\n        const ctx = ele.getContext('2d');\n        this.el.appendChild(ele);\n        this.elesToResize.push(ele);\n        return { canvas: ele, ctx };\n    }\n    _bindEvents(parentContainer) {\n        var _a;\n        this.unbindEvents();\n        this._ro = new MutationObserver((mutationList, observer) => {\n            this._resize(true);\n        });\n        (_a = this._ro) === null || _a === void 0 ? void 0 : _a.observe(parentContainer, {\n            attributes: true,\n            attributeFilter: ['style'],\n        });\n        window.addEventListener('scroll', this._resize);\n        window.addEventListener('resize', this._resize);\n        window.addEventListener(\"orientationchange\", this._resize);\n        on(this.el, 'mousedown', this._mousedown);\n        on(this.el, 'mouseleave', this._mouseleave);\n        on(window.document, 'mousemove', this._mousemove);\n        on(window.document, 'mouseup', this._mouseup);\n        on(window.document, 'mousewheel', this._mousewheel);\n        on(this.el, 'touchstart', this._mousedown);\n        on(this.el, 'touchmove', this._mousemove);\n        on(this.el, 'touchend', this._mouseup);\n        on(window.document, 'keyup', this._keyup);\n        on(window.document, 'keydown', this._keydown);\n        on(document.body, 'contextmenu', this._contextmenu);\n    }\n    destroy() {\n        this.unbindEvents();\n    }\n    get width() {\n        if (this.containerRect) {\n            return this.containerRect.width;\n        }\n        else {\n            return this.canvas.width;\n        }\n    }\n    get height() {\n        if (this.containerRect) {\n            return this.containerRect.height;\n        }\n        else {\n            return this.canvas.height;\n        }\n    }\n    setElePosition(ele, position = 'absolute') {\n        if (position === 'absolute') {\n            ele.style.position = position;\n            ele.style.left = '0px';\n            ele.style.right = '0px';\n            ele.style.top = '0px';\n            ele.style.bottom = '0px';\n        }\n        else {\n            /**\n             * 若textarea编辑时，文本超出屏幕宽度，即使body的overflow为hidden，\n             * 依旧会导致body向右侧scroll。\n             *\n             * 此时，将textarea的任意一个祖先元素设置为fixed，就能够解决该问题。\n             *\n             * 但是，如果除了fixed祖先元素之外，还有其他祖先元素带有transform属性，依然\n             * 会有上述问题。\n             *\n             * 如果将带有transform属性的祖先元素带有fixed属性，该问题就能被解决。\n             *\n             * 综上，将带有transform属性的textarea的祖先元素设置为fixed，能解决textarea\n             * 编辑时导致页面横移的缺陷。\n             */\n            ele.style.position = 'fixed';\n            ele.style.left = `${this.left}px`;\n            ele.style.width = `${this.width}px`;\n            ele.style.top = `${this.top}px`;\n            ele.style.height = `${this.height}px`;\n        }\n    }\n    /**\n     * 确定不是点击事件后，发送之前缓存的事件\n     */\n    _emitMouseEvents() {\n        for (let eventArg of this.mouseEventCache) {\n            this.opsManager[eventArg.type](...eventArg.args);\n        }\n        this.mouseEventCache = [];\n    }\n}\nexport default Container;\n","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","import { max, min } from \"../../misc/util\";\nimport Operation from \"../Operation\";\nimport drawConfig from \"./drawConfig\";\nclass MouseMoveDrawOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = '';\n        /**\n         * 是否需要清洗ep。使其距离sp的x，y距离至少为1。对于矩形来说，必须sanite ep，否则矩形会退化为线段或者点\n         */\n        this.shouldSaniteEp = false;\n        this.movedDuringMouseDown = false;\n        this.points = [];\n        /**\n         * 连续动作只用采一半的点即可。用sampleSeq记录mousemove的序列号\n         */\n        this.sampleSeq = 0;\n    }\n    get lineWidth() {\n        return Number(drawConfig.strokeWidth);\n    }\n    get opacity() {\n        return Number(drawConfig.opacity);\n    }\n    get color() {\n        return drawConfig.strokeColor;\n    }\n    get sp() {\n        return this.points[0];\n    }\n    get ep() {\n        let point = this.points[this.points.length - 1];\n        if (this.shouldSaniteEp) {\n            point = this.sanityEp(point);\n        }\n        return point;\n    }\n    registerHooks() {\n        this.opsManager.hooks.pageChange.tap('PageChange', this.handlePageChange.bind(this));\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    handlePageChange() {\n        this.beginBatch();\n        this.sampleSeq = 0;\n        this.points = [];\n        this.movedDuringMouseDown = false;\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.isMouseDown || this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = `url(${require('../../../assets/cursors/pen.svg')}) -1 17, auto`;\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n        if (this.isMouseDown) {\n            this.movedDuringMouseDown = true;\n            mx = Number(mx.toFixed(1));\n            my = Number(my.toFixed(1));\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot(true));\n            this.sampleSeq += 1;\n        }\n    }\n    handleMouseDown(event, mx, my) {\n        this.beginBatch();\n        mx = Number(mx.toFixed(1));\n        my = Number(my.toFixed(1));\n        this.points = [[mx, my]];\n        this.movedDuringMouseDown = false;\n        this.sampleSeq = 0;\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown && this.movedDuringMouseDown) {\n            mx = Number(mx.toFixed(1));\n            my = Number(my.toFixed(1));\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot(false));\n            this.points = [];\n        }\n    }\n    getTwoPointShapeCommonProperty(opt) {\n        let obj = {\n            type: this.type,\n            boundary: this.getBoundaryRectOfLine(),\n            sp: this.sp,\n            ep: this.ep,\n            lineWidth: this.lineWidth,\n            inProgress: opt.inProgress,\n            opacity: this.opacity\n        };\n        if (opt.strokeOrFill === 'stroke') {\n            obj.stroke = this.color;\n        }\n        else if (opt.strokeOrFill === 'fill') {\n            obj.fill = this.color;\n        }\n        else {\n            obj.color = this.color;\n        }\n        return obj;\n    }\n    getFreeDrawCommonProperty(opt) {\n        let obj = {\n            type: this.type,\n            boundary: this.getBoundaryRectOfFreeDraw(),\n            lineWidth: this.lineWidth,\n            inProgress: opt.inProgress,\n            opacity: this.opacity\n        };\n        obj.color = this.color;\n        return obj;\n    }\n    getBoundaryRectOfFreeDraw() {\n        const points = this.points;\n        if (points.length === 0) {\n            throw new Error('涂鸦没有记录任何数据');\n        }\n        else {\n            let sx = points[0][0];\n            let sy = points[0][1];\n            let ex = sx;\n            let ey = sy;\n            for (let point of points) {\n                sx = min(point[0], sx);\n                sy = min(point[1], sy);\n                ex = max(point[0], ex);\n                ey = max(point[1], ey);\n            }\n            return {\n                sx,\n                sy,\n                w: ex - sx,\n                h: ey - sy\n            };\n        }\n    }\n    getBoundaryRectOfLine() {\n        let sx = min(this.sp[0], this.ep[0]);\n        let sy = min(this.sp[1], this.ep[1]);\n        let ex = max(this.sp[0], this.ep[0]);\n        let ey = max(this.sp[1], this.ep[1]);\n        return {\n            sx: sx,\n            sy: sy,\n            w: ex - sx,\n            h: ey - sy\n        };\n    }\n    strokeOrFill(ctx, opt) {\n        ctx.save();\n        ctx.lineWidth = opt.lineWidth;\n        if (opt.opacity) {\n            ctx.globalAlpha = Number(opt.opacity);\n        }\n        if (opt.stroke) {\n            ctx.strokeStyle = opt.stroke;\n            ctx.stroke();\n        }\n        else if (opt.fill) {\n            ctx.fillStyle = opt.fill;\n            ctx.fill();\n        }\n        ctx.restore();\n    }\n    /**\n     * 控制rect最小宽高为1\n     * @param ep\n     */\n    sanityEp(ep) {\n        if (ep[0] - this.sp[0] >= 0 && ep[0] - this.sp[0] < 1) {\n            ep[0] = this.sp[0] + 1;\n        }\n        if (ep[1] - this.sp[1] >= 0 && ep[1] - this.sp[1] < 1) {\n            ep[1] = this.sp[1] + 1;\n        }\n        return ep;\n    }\n}\nexport default MouseMoveDrawOp;\n","/**\n * 选择操作。支持区域选中\n *\n * 如果已经选中一些对象，然后点击选中的区域进行拖拽，此时不会产生新的选择操作，否则选中元素的包含盒无法显示\n */\nimport { combineBoundary, getBoundaryBoxFromTwoPoints, getTransformedBoundary } from \"../../misc/shapeHelper\";\nimport SelectBase from \"./SelectBase\";\nimport drawConfig from \"../DrawOp/drawConfig\";\nimport { drawUserName } from \"../util\";\nclass SelectOp extends SelectBase {\n    constructor() {\n        super(...arguments);\n        this.type = 'select';\n        this.lineWidth = 0;\n        this.fillColor = 'rgba(230, 100, 100, 0.4)';\n        this.eleContainerColor = 'rgb(0, 0, 0)';\n        this.eleContainerWidth = 2;\n        this.eleContainerPadding = 3;\n        this.activate = false;\n        this.selectedOpIds = [];\n        this.inProgressSelectedOpIds = [];\n        this.description = \"选择操作工具。\\n首先使用op:select:activate设置画布为选择模式。\" +\n            \"通过。然后画布会监听鼠标动作，生成选择框。具体用法如下：\";\n    }\n    getSelectedIds() {\n        return this.selectedOpIds.slice();\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n            'select:width': {\n                value: this.setLineWidth.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置选择框线段宽度`\n                }\n            },\n            'select:fill:color': {\n                value: this.setFillColor.bind(this),\n                information: {\n                    args: 'color: ColorString',\n                    message: `设置选择框填充色`\n                }\n            },\n            'select:stroke:color': {\n                value: this.setStrokeColor.bind(this),\n                information: {\n                    args: 'color: ColorString',\n                    message: `设置选择框填充色`\n                }\n            },\n            'select:eleContainer:color': {\n                value: this.setEleContainerColor.bind(this),\n                information: {\n                    args: 'color: ColorString',\n                    message: `设置被选中元素包含盒颜色`\n                }\n            },\n            'select:eleContainer:width': {\n                value: this.setEleContainerWidth.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置被选中元素包含盒线段宽度`\n                }\n            },\n            'select:eleContainerPadding': {\n                value: this.setEleContainerPadding.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置被选中元素包含盒的padding`\n                }\n            },\n        };\n    }\n    registerHooks() {\n        this.opsManager.hooks.opChange.tap('OpChange', this.handleOpChange.bind(this));\n        this.opsManager.hooks.pageChange.tap('pageChange', this.handlePageChange.bind(this));\n    }\n    /**\n     * 页面变化时，先清空选择的元素，否则可能会造成元素找不到的缺陷\n     */\n    handlePageChange(snapshot) {\n        if (snapshot.uid === this.app.account && this.selectedOpIds.length > 0) {\n            //当page change是由当前用户操作引起的，清空select元素\n            //如果没有该判断，每个可编辑用户都会发送该快照\n            this.dispatch(this.getSnapshot([]));\n        }\n    }\n    /**\n     * 当操作类型变化时，清空选择的元素\n     */\n    handleOpChange(newType) {\n        var _a;\n        if (newType !== 'select' && ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'select') {\n            this.dispatch(this.getSnapshot([]));\n        }\n        this.beginBatch();\n    }\n    postMouseUp(idsBeenSelected) {\n        this.dispatch(this.getSnapshot(idsBeenSelected));\n        this.lastSelectedOpIds = idsBeenSelected;\n    }\n    postClick(idsBeenSelected) {\n        if (idsBeenSelected.length === 0) {\n            const curr = (new Date()).valueOf();\n            if (curr - this.opsManager.opMap['text'].blurAt < 100) {\n                //点击发生在失焦之后，忽略这次点击\n                return;\n            }\n        }\n        this.dispatch(this.getSnapshot(idsBeenSelected));\n    }\n    /**\n     * 选择操作可能是个连续的过程\n     * 连续过程中产生的快照在selectbase中被处理了。\n     * getSnapshot产生的是连续过程结束时产生的快照\n     * @param idsBeenSelected\n     */\n    getSnapshot(idsBeenSelected) {\n        return {\n            type: 'select',\n            sp: this.sp,\n            ep: this.ep,\n            inProgress: false,\n            selectedOpIds: idsBeenSelected.slice(),\n            reuseOpType: 'select',\n            skipUndo: true,\n            color: drawConfig.strokeColor,\n            nickname: this.app.nickname\n        };\n    }\n    draw(snapshot, ctx) {\n        // log('draw', snapshot)\n        const color = snapshot.data.color ? snapshot.data.color : 'rgb(0,0,0)';\n        this.drawSelectBox(snapshot, ctx);\n        const boundaryArr = this.drawSelectedElementBox(snapshot, ctx, color);\n        if (!snapshot.data.inProgress\n            && snapshot.uid !== this.app.account\n            && Array.isArray(boundaryArr)\n            && boundaryArr.length === 1) {\n            const px = boundaryArr[0].sx + boundaryArr[0].w / 2;\n            const py = boundaryArr[0].sy;\n            if (!this.app.appConfig.showSelectNickname)\n                return;\n            drawUserName({\n                ctx,\n                account: snapshot.data.nickname ? snapshot.data.nickname : snapshot.uid,\n                scale: this.app.camera.scale,\n                px,\n                py,\n                bgColor: color,\n                fontSize: 16,\n                textPadding: 8,\n                radius: 6\n            });\n        }\n    }\n    /**\n     * 绘制选择框\n     */\n    drawSelectBox(snapshot, ctx) {\n        const data = snapshot.data;\n        let sp;\n        let ep;\n        if (Array.isArray(data.points) && data.points.length >= 2) {\n            sp = data.points[0];\n            ep = data.points[data.points.length - 1];\n        }\n        else if (data.sp && data.ep) {\n            if (data.sp[0] !== data.ep[0] || data.sp[1] !== data.ep[1]) {\n                sp = data.sp;\n                ep = data.ep;\n            }\n        }\n        if (data.inProgress && sp && ep) {\n            const { sx, sy, w, h } = getBoundaryBoxFromTwoPoints(sp, ep);\n            ctx.beginPath();\n            if (this.strokeColor && this.lineWidth) {\n                ctx.strokeStyle = this.strokeColor;\n                ctx.lineWidth = this.lineWidth;\n                ctx.strokeRect(sx, sy, w, h);\n            }\n            if (this.fillColor) {\n                ctx.fillStyle = this.fillColor;\n                ctx.fillRect(sx, sy, w, h);\n            }\n        }\n    }\n    /**\n     * 绘制选中元素的包含盒\n     * @param snapshot\n     * @param ctx\n     * @param div\n     */\n    drawSelectedElementBox(snapshot, ctx, color) {\n        const data = snapshot.data;\n        const selectedOpIds = data.selectedOpIds.filter(opId => this.drawOpsOfPage[opId]);\n        const padding = this.eleContainerPadding;\n        if (selectedOpIds.length === 0)\n            return;\n        let boundaryArr = selectedOpIds.map(id => {\n            const op = this.drawOpsOfPage[id];\n            return getTransformedBoundary(op.data.boundary, op.data.dx, op.data.dy, op.data.scaleX, op.data.scaleY);\n        });\n        /**\n         * 若已经松开，则只绘制整体的包含盒\n         */\n        if (!data.inProgress) {\n            boundaryArr = [boundaryArr.reduce((b1, b2) => {\n                    return combineBoundary(b1, b2);\n                })];\n        }\n        //绘制包含盒\n        ctx.strokeStyle = color;\n        ctx.fillStyle = color;\n        ctx.lineWidth = this.eleContainerWidth;\n        const dotSize = 5 / this.app.camera.scale;\n        for (let boundary of boundaryArr) {\n            ctx.beginPath();\n            ctx.strokeRect(boundary.sx - padding, boundary.sy - padding, boundary.w + padding * 2, boundary.h + padding * 2);\n            //点击包含盒上四个角上的点拉伸图形\n            if (!data.inProgress && this.opsManager.currOp instanceof SelectOp) {\n                ctx.fillRect(boundary.sx - padding - dotSize / 2, boundary.sy - padding - dotSize / 2, dotSize, dotSize);\n                ctx.fillRect(boundary.sx + boundary.w + padding - dotSize / 2, boundary.sy + boundary.h + padding - dotSize / 2, dotSize, dotSize);\n                ctx.fillRect(boundary.sx + boundary.w + padding - dotSize / 2, boundary.sy - padding - dotSize / 2, dotSize, dotSize);\n                ctx.fillRect(boundary.sx - padding - dotSize / 2, boundary.sy + boundary.h + padding - dotSize / 2, dotSize, dotSize);\n            }\n        }\n        return boundaryArr;\n    }\n    setSelectedOpIds(ids) {\n        if (this.selectedOpIds.join(',') !== ids.join(',')) {\n            this.emit('event:appState:change', 'selectChange', this.selectedOpIds.slice(), ids.slice());\n            this.opsManager.hooks.selectChange.call(this.selectedOpIds.slice(), ids.slice());\n            this.selectedOpIds = ids;\n            this.dispatch(this.getSnapshot(ids.slice()));\n        }\n    }\n    setInProgressSelectedOpIds(ids) {\n        this.inProgressSelectedOpIds = ids.slice();\n    }\n    setLineWidth(width) {\n        this.lineWidth = width;\n    }\n    setFillColor(color) {\n        this.fillColor = color;\n    }\n    setStrokeColor(color) {\n        this.strokeColor = color;\n    }\n    setEleContainerColor(color) {\n        this.eleContainerColor = color;\n    }\n    setEleContainerWidth(width) {\n        this.eleContainerWidth = width;\n    }\n    setEleContainerPadding(padding) {\n        this.eleContainerPadding = padding;\n    }\n}\nexport default SelectOp;\n","export const DEFAULT_FONTSIZE = 32;\n//之所以设计为类，是想要创建多个DrawPlugin实例时，各个实例之间的配置支持相互独立\nclass AppConfig {\n    constructor(app) {\n        this.setAppConfig = (partialConfig) => {\n            var _a;\n            if (Object.keys(partialConfig).length === 0) {\n                console.error('白板-->', '调用了setAppConfig, 但传入的参数为空', partialConfig);\n            }\n            else {\n                for (let key in partialConfig) {\n                    if (!this.config.hasOwnProperty(key)) {\n                        console.error('白板-->', `setAppConfig传入的参数键值${key}不是有效的配置项`);\n                        console.error('白板-->', `目前支持的配置项有：${Object.keys(this.config)}`);\n                    }\n                    else if (key === 'canvas_bg_color') {\n                        //设置背景色\n                        this.config.canvas_bg_color = partialConfig.canvas_bg_color;\n                        this.app.container.setBackgroundColor();\n                        (_a = this.app.previewFactory) === null || _a === void 0 ? void 0 : _a.setBackgroundColor();\n                    }\n                    else {\n                        this.config[key] = partialConfig[key];\n                    }\n                }\n            }\n            Object.assign(this.config, partialConfig);\n        };\n        this.getAppConfig = () => {\n            return this.config;\n        };\n        this.app = app;\n        this.config = {\n            canvas_bg_color: '#f5f5f7',\n            showCursorNickname: true,\n            showSelectNickname: true,\n            showLaserNickname: true,\n            cameraTransformEnabled: true\n        };\n    }\n}\nexport default AppConfig;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","module.exports = require('./_hide');\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar meta = require('./_meta');\nvar fails = require('./_fails');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar setToStringTag = require('./_set-to-string-tag');\nvar dP = require('./_object-dp').f;\nvar each = require('./_array-methods')(0);\nvar DESCRIPTORS = require('./_descriptors');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","export const PlatformArray = ['android', 'ios', 'pc', 'mac', 'pad', 'web'];\nexport const TouchPlatformArray = ['android', 'ios', 'pad'];\n","export const CustomFontName = \"customWBFont\";\nexport const DefaultFontName = \"defaultWBFont\";\nconst ValidTypes = ['embedded-opentype', 'woff', 'truetype', 'svg', 'opentype', 'woff2'];\nclass TextConfig {\n    constructor() {\n        this.fontFamily = '';\n        this.fontFaceSet = false;\n        this.appendFontFaceStyle([\n            {\n                url: 'https://app.yunxin.163.com/webdemo/whiteboard/assets/font/Helvetica.ttf',\n                format: 'truetype'\n            },\n            {\n                url: 'https://app.yunxin.163.com/webdemo/whiteboard/assets/font/Helvetica.woff',\n                format: 'woff'\n            },\n            {\n                url: 'https://app.yunxin.163.com/webdemo/whiteboard/assets/font/Helvetica.woff2',\n                format: 'woff2'\n            }\n        ], DefaultFontName);\n    }\n    getFontFamily() {\n        if (this.fontFamily && this.fontFaceSet) {\n            return `\"${this.fontFamily}\", \"${CustomFontName}\"`;\n        }\n        else if (this.fontFamily) {\n            return this.fontFamily;\n        }\n        else if (this.fontFaceSet) {\n            return CustomFontName;\n        }\n        else {\n            return `\"Helvetica\", \"${DefaultFontName}\"`;\n        }\n    }\n    setFontFamily(fontFamily) {\n        this.fontFamily = fontFamily;\n    }\n    setFontFace(fontFace) {\n        this.fontFaceSet = true;\n        this.appendFontFaceStyle(fontFace, CustomFontName);\n    }\n    appendFontFaceStyle(fontFace, fontName) {\n        const fontFaceStr = fontFace.map(opt => {\n            if (opt.format && !ValidTypes.includes(opt.format)) {\n                console.error(`字体format应该为以下值中的一个: ${ValidTypes.join(',')}, 或者不设置format`);\n                return `url(\"${opt.url}\")`;\n            }\n            else if (opt.format) {\n                return `url(\"${opt.url}\") format(\"${opt.format}\")`;\n            }\n            else {\n                return `url(\"${opt.url}\")`;\n            }\n        }).join(',\\n');\n        const newStyle = document.createElement('style');\n        newStyle.setAttribute('type', 'text/css');\n        newStyle.appendChild(document.createTextNode(`\n@font-face {\n    font-family: \"${fontName}\";\n    src: ${fontFaceStr};\n}\n`));\n        document.head.appendChild(newStyle);\n    }\n}\nconst textConfig = new TextConfig();\nexport default textConfig;\n","import { fetchResource, getResource, resourceLoaded } from \"../../resource/resourceCache\";\nexport const addImage = (op, url, opts) => {\n    const currBoard = op.app.room.currBoard;\n    let currPage = op.opsManager.currPage;\n    if (opts && opts.hasOwnProperty('pageIndex')) {\n        const pageName = currBoard.pageNames[opts.pageIndex];\n        if (currBoard.pages.hasOwnProperty(pageName)) {\n            currPage = currBoard.pages[pageName];\n        }\n    }\n    if (resourceLoaded(url)) {\n        const img = getResource(url);\n        const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : img.width;\n        const height = (opts === null || opts === void 0 ? void 0 : opts.height) ? opts.height : img.height;\n        op.dispatchImage(url, width, height, currPage);\n    }\n    else if ((opts === null || opts === void 0 ? void 0 : opts.width) && (opts === null || opts === void 0 ? void 0 : opts.height)) {\n        op.dispatchImage(url, opts === null || opts === void 0 ? void 0 : opts.width, opts === null || opts === void 0 ? void 0 : opts.height, currPage);\n    }\n    else {\n        //TODO: 这里是错误的。dispatch调用时连接的boardIndex和pageIndex和addImage调用时不一样了。\n        currPage.addWaitingResource(url);\n        fetchResource(url, (img) => {\n            const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : img.width;\n            const height = (opts === null || opts === void 0 ? void 0 : opts.height) ? opts.height : img.height;\n            op.dispatchImage(url, width, height, currPage);\n            currPage.removeWaitingResource(url);\n        });\n    }\n};\n/**\n * TODO：可能存在问题。初始化时，会同步房间的信息。目前的写法是接收每个快照时都会refresh一次。这可能会导致多个页面的图片不断被删除，再创建。\n * 从用户角度看，会有明显的闪烁效果。\n * @param ctx\n * @param url\n * @param boundary\n * @param opts\n */\nexport const draw = (ctx, url, boundary, opts) => {\n    /**\n     * page是该图片的容器页面。this.opsManager.currPage是当前打开的页面。\n     * 生成预览图时，currPage和图片的容器页面不是同一个页面\n     */\n    let { page, div, preview, id, supportToDataUrl } = opts;\n    if (resourceLoaded(url) && !preview && div && id) {\n        let image = div.querySelector(`[id='image-${id}']`);\n        if (!image) {\n            if (opts.type === 'background') {\n                /**\n                 * 背景图片的URL不会在同一page中出现两次，因此不需要cloneNode\n                 */\n                image = getResource(url);\n            }\n            else {\n                image = getResource(url).cloneNode(true);\n            }\n            image.id = `image-${id}`;\n            image.style.userSelect = 'none';\n            image.style.pointerEvents = 'none';\n            image.style.position = 'absolute';\n            image.style.imageRendering = '-webkit-optimize-contrast';\n            div.appendChild(image);\n        }\n        image.width = boundary.w;\n        image.height = boundary.h;\n        image.style.left = `${boundary.sx}px`;\n        image.style.top = `${boundary.sy}px`;\n        const pxOverBorder = getImagePartOutOfContainer(boundary, opts.page.app.camera);\n        if (pxOverBorder) {\n            image.style.clipPath = `inset(${pxOverBorder.top}px ${pxOverBorder.right}px ${pxOverBorder.bottom}px ${pxOverBorder.left}px)`;\n        }\n        else {\n            image.style.clipPath = 'none';\n        }\n    }\n    else if (supportToDataUrl && resourceLoaded(url)) {\n        ctx.drawImage(getResource(url, true), boundary.sx, boundary.sy, boundary.w, boundary.h);\n    }\n    else if (!supportToDataUrl && resourceLoaded(url)) {\n        ctx.drawImage(getResource(url, false), boundary.sx, boundary.sy, boundary.w, boundary.h);\n    }\n    else if (resourceLoaded('imageLoading')) {\n        /**\n         * 图片还未下载下来时，先用图片正在加载中代替\n         */\n        ctx.drawImage(getResource('imageLoading'), boundary.sx + 5, boundary.sy + 5, Math.max(0, boundary.w - 10), Math.max(0, boundary.h - 10));\n    }\n    if (!resourceLoaded(url)) {\n        //回调函数中必须用变量currPage，而不是this.opsManager.currPage，否则被调用时引用的page可能不对\n        page.addWaitingResource(url);\n        fetchResource(url, () => {\n            page.removeWaitingResource(url);\n        });\n    }\n};\n/**\n * 返回图片boundary在container之外的部分。在container外面的部分要用clippath隐藏\n * @param boundary\n */\nconst getImagePartOutOfContainer = (boundary, camera) => {\n    const { sx, sy, w, h } = boundary;\n    const ex = sx + w;\n    const ey = sy + h;\n    const screenBound = camera.getContainerWorldRect();\n    const left = Math.max(0, screenBound.centerX - screenBound.width / 2 - sx); //screen左侧 - boundary左侧\n    const right = Math.max(0, ex - (screenBound.centerX + screenBound.width / 2)); //boundary右侧 - screen右侧\n    const top = Math.max(0, screenBound.centerY - screenBound.height / 2 - sy); //screen顶部 - boundary顶部\n    const bottom = Math.max(0, ey - (screenBound.centerY + screenBound.height / 2)); //boundary底部 - screen底部\n    if (left > 0 || right > 0 || top > 0 || bottom > 0) {\n        return {\n            left, right, top, bottom\n        };\n    }\n    else {\n        return null;\n    }\n};\n/**\n * 根据图片的宽高，容器的宽高，获得图片合适的宽高，及位置。\n *\n * 合适的宽高，位置应该使图片不被遮挡的情况下尽可能大，同时不超过图片本身的尺寸\n *\n * ImageOp的宽高在addImage时确定，所有用户那里ImageOp和其他快照的相对位置固定（不随容器宽高resize而变化）\n * BackgroundOp的宽高在draw时确定，图片位置总是相对于容器的最佳位置\n *\n * width, height可能是图片的固有宽高，用户也可以在上传图片时指定图片的初始宽高\n */\nexport const getImageProperPosition = (op, width, height) => {\n    const sanityWidth = op.app.container.width;\n    const sanityHeight = op.app.container.height;\n    const MAX_ALLOWED_WIDTH = sanityWidth;\n    const MAX_ALLOWED_HEIGHT = sanityHeight;\n    if (width > MAX_ALLOWED_WIDTH && height < MAX_ALLOWED_HEIGHT) {\n        height = height * MAX_ALLOWED_WIDTH / width;\n        width = MAX_ALLOWED_WIDTH;\n    }\n    else if (width < MAX_ALLOWED_WIDTH && height > MAX_ALLOWED_HEIGHT) {\n        width = width * MAX_ALLOWED_HEIGHT / height;\n        height = MAX_ALLOWED_HEIGHT;\n    }\n    else if (width > MAX_ALLOWED_WIDTH && height > MAX_ALLOWED_HEIGHT) {\n        if (width / height > MAX_ALLOWED_WIDTH / MAX_ALLOWED_HEIGHT) {\n            height = height * MAX_ALLOWED_WIDTH / width;\n            width = MAX_ALLOWED_WIDTH;\n        }\n        else {\n            width = width * MAX_ALLOWED_HEIGHT / height;\n            height = MAX_ALLOWED_HEIGHT;\n        }\n    }\n    width = width / op.app.camera.scale;\n    height = height / op.app.camera.scale;\n    let sx = op.app.camera.centerX - width / 2;\n    let sy = op.app.camera.centerY - height / 2;\n    return {\n        sx, sy, width, height\n    };\n};\n/**\n * 背景图应该是100%位置的时，大概撑满页面\n * @param op\n * @param width\n * @param height\n */\nexport const getBackgroundImagePorperPosition = (op, width, height) => {\n    let sx = -width / 2;\n    let sy = -height / 2;\n    return {\n        sx, sy, width, height\n    };\n};\n","import loadingUrl from '../../assets/image/imageIsLoading.svg';\nconst resourceCache = {};\nconst videoResourceCache = {};\n/**\n * 跨域图片。设置了crossOrigin属性的图片。配置了crossOrigin之后，才能够使用导出图片功能\n */\nconst crossOriginResourceCache = {};\nconst resourceReadyListeners = {};\nconst retryCount = {};\nconst RETRY_LIMIT = 10;\nexport const fetchResource = (url, cb) => {\n    if (!resourceCache.hasOwnProperty(url)) {\n        resourceCache[url] = new Image();\n        crossOriginResourceCache[url] = new Image();\n        //https://stackoverflow.com/questions/22710627/tainted-canvases-may-not-be-exported\n        // resourceCache[url].crossOrigin = \"anonymous\";\n        crossOriginResourceCache[url].crossOrigin = \"anonymous\";\n        resourceCache[url].src = url;\n        crossOriginResourceCache[url].src = url;\n    }\n    if (typeof cb === 'function') {\n        setResourceLoadedCallback(url, cb);\n    }\n};\nexport const fetchVideoResource = (url, cb) => {\n    if (!videoResourceCache.hasOwnProperty(url)) {\n        videoResourceCache[url] = document.createElement(\"video\");\n        videoResourceCache[url].src = url;\n    }\n    if (typeof cb === 'function') {\n        setResourceLoadedCallback(url, cb, true);\n    }\n};\nconst setResourceLoadedCallback = (url, cb, isVideo = false) => {\n    resourceReadyListeners[url] = resourceReadyListeners[url] || [];\n    resourceReadyListeners[url].push(cb);\n    const resource = isVideo ? videoResourceCache[url] : resourceCache[url];\n    if (isVideo) {\n        resource.onloadedmetadata = () => {\n            const arr = resourceReadyListeners[url] || [];\n            for (let cb of arr) {\n                cb(resource);\n            }\n        };\n    }\n    else {\n        resource.onload = () => {\n            const arr = resourceReadyListeners[url] || [];\n            for (let cb of arr) {\n                cb(resource);\n            }\n        };\n    }\n    resource.onerror = () => {\n        retryCount[url] || (retryCount[url] = 0);\n        if (retryCount[url] < RETRY_LIMIT) {\n            /**\n             * 图片加载失败，尝试重新加载\n             * 间隔时间为2s, 4s, 6s, 8s, .... 20s\n             */\n            delete resourceCache[url];\n            delete resourceReadyListeners[url];\n            const delay = (retryCount[url] + 1) * 2000;\n            setTimeout(() => {\n                if (LOG) {\n                    console.warn(`白板--> ${isVideo ? '视频' : '图片'}加载失败，第${retryCount[url]}次重新加载: ${url}`);\n                }\n                if (isVideo) {\n                    fetchVideoResource(url, cb);\n                }\n                else {\n                    fetchResource(url, cb);\n                }\n            }, delay);\n        }\n        retryCount[url] += 1;\n    };\n};\nexport const resourceLoaded = (url, crossOrigin = false) => {\n    const img = crossOrigin ? crossOriginResourceCache[url] : resourceCache[url];\n    return img && img.complete && img.width > 0 && img.height > 0;\n};\nexport const getResource = (url, crossOrigin = false) => {\n    return crossOrigin ? crossOriginResourceCache[url] : resourceCache[url];\n};\nexport const videoResourceLoaded = (url) => {\n    const video = videoResourceCache[url];\n    return video && video.videoWidth > 0 && video.videoHeight > 0;\n};\nexport const getVideoResource = (url) => {\n    return videoResourceCache[url];\n};\n/**\n * 加载图片正在加载中的图片\n */\nresourceCache['imageLoading'] = new Image();\nresourceCache['imageLoading'].src = loadingUrl;\n//https://stackoverflow.com/questions/22710627/tainted-canvases-may-not-be-exported\ncrossOriginResourceCache['imageLoading'] = new Image();\ncrossOriginResourceCache['imageLoading'].src = loadingUrl;\ncrossOriginResourceCache['imageLoading'].setAttribute('crossorigin', 'anonymous');\n","/**\n * 使用trasformOp对drawOp进行转换\n * @param drawOp\n * @param opSnapshot\n */\nexport const transformOp = (page, drawOp, trasformOp) => {\n    const op = page.opsManager.opMap[trasformOp.data.type];\n    try {\n        if (\"transformOp\" in op) {\n            return op.transformOp(drawOp, trasformOp);\n        }\n        else {\n            return drawOp;\n        }\n    }\n    catch (err) {\n        console.warn('transform op error');\n        console.warn(drawOp);\n        console.warn(err);\n        return drawOp;\n    }\n};\n/**\n * 若快照需要白板完全重绘，返回true\n * @param snapshot\n */\nexport const opNeedRefresh = (page, snapshot) => {\n    //文本永远是增量绘制\n    // if (snapshot.data.type === 'text') {\n    //     return false\n    // }\n    //下面的快照操作为增量绘制\n    const isIncrementOp = ['select', 'laser', 'text'].includes(snapshot.data.type) || page.opsManager.drawOpTypes.includes(snapshot.data.type);\n    if (isIncrementOp && snapshot.data.inProgress) {\n        return false;\n    }\n    else if (snapshot.data.type === 'mouse-pointer') {\n        return false;\n    }\n    return true;\n};\n/**\n * 根据lastSelectOfUser推导出当前用户选中了哪些元素\n *\n * 应该是当前用户select - 之后的select快照的包含了当前的元素\n * @param page\n */\nexport const getSelectedOpIds = (page) => {\n    let selectedOpIds = [];\n    let currSelect = page.lastSelectOfUser[page.app.account];\n    if (currSelect) {\n        selectedOpIds = currSelect.data.selectedOpIds.slice();\n        // for (let userId in page.lastSelectOfUser) {\n        //     if (page.lastSelectOfUser[userId].time > currSelect.time) {\n        //         const otherSelect = page.lastSelectOfUser[userId].data.selectedOpIds.slice() as string[]\n        //         for (let id of otherSelect) {\n        //             const index = selectedOpIds.indexOf(id as string)\n        //             if (index !== -1) {\n        //                 selectedOpIds.splice(index, 1)\n        //             }\n        //         }\n        //     }\n        // }\n    }\n    selectedOpIds = selectedOpIds.filter(id => {\n        return page.drawOpQueue.hasOwnProperty(id) && !page.drawOpQueue[id].data.locked;\n    });\n    return selectedOpIds;\n};\n","let timer;\nexport const transitionToCameraBound = (camera, boundary, callback) => {\n    const end = boundary;\n    const start = {\n        centerX: camera.centerX,\n        centerY: camera.centerY,\n        width: camera.width,\n        height: camera.height\n    };\n    /**\n     * 录像回放时，不要用动画，否则位置有些问题\n     */\n    const total = camera.app.isRecordPlayer ? 1 : 15;\n    animate({\n        total: total,\n        worker: (curr) => {\n            const percent = (curr + 1) / total;\n            camera.setCameraBound({\n                centerX: end.centerX * percent + start.centerX * (1 - percent),\n                centerY: end.centerY * percent + start.centerY * (1 - percent),\n                width: end.width * percent + start.width * (1 - percent),\n                height: end.height * percent + start.height * (1 - percent)\n            });\n        },\n        callback: callback\n    });\n};\nexport const animate = (opt) => {\n    cancelAnimationFrame(timer);\n    step(0, opt);\n};\nconst step = (curr, opt) => {\n    if (curr >= opt.total) {\n        if (typeof opt.callback === 'function') {\n            opt.callback();\n        }\n    }\n    else {\n        requestAnimationFrame(() => {\n            opt.worker(curr);\n            step(curr + 1, opt);\n        });\n    }\n};\n","// type OP_MODE = '' | 'flag' | 'free' | 'erase' | 'fill' | 'select' | 'draw' | 'image' // todo\nexport var WActions;\n(function (WActions) {\n    WActions[WActions[\"VERSION\"] = 0] = \"VERSION\";\n    WActions[WActions[\"START\"] = 1] = \"START\";\n    WActions[WActions[\"MOVE\"] = 2] = \"MOVE\";\n    WActions[WActions[\"END\"] = 3] = \"END\";\n    WActions[WActions[\"REVOKE\"] = 4] = \"REVOKE\";\n    WActions[WActions[\"SERIAL\"] = 5] = \"SERIAL\";\n    WActions[WActions[\"CLEAR\"] = 6] = \"CLEAR\";\n    WActions[WActions[\"CLEAR_ACK\"] = 7] = \"CLEAR_ACK\";\n    WActions[WActions[\"SYNC_REQUEST\"] = 8] = \"SYNC_REQUEST\";\n    WActions[WActions[\"SYNC\"] = 9] = \"SYNC\";\n    WActions[WActions[\"SYNC_PREPARE\"] = 10] = \"SYNC_PREPARE\";\n    WActions[WActions[\"SYNC_PREPARE_ACK\"] = 11] = \"SYNC_PREPARE_ACK\";\n    WActions[WActions[\"LASER_PEN\"] = 12] = \"LASER_PEN\";\n    WActions[WActions[\"LASER_PEN_END\"] = 13] = \"LASER_PEN_END\";\n    WActions[WActions[\"FILE\"] = 14] = \"FILE\";\n    WActions[WActions[\"REDO\"] = 15] = \"REDO\";\n    WActions[WActions[\"CALIBRATE\"] = 16] = \"CALIBRATE\";\n    WActions[WActions[\"TEXT\"] = 17] = \"TEXT\";\n})(WActions || (WActions = {}));\nexport const StateRelatedActions = [\n    WActions.CALIBRATE,\n    WActions.FILE\n];\n// 这个是表示白板组件整体处于一个什么状态的\nexport var WB_MODE;\n(function (WB_MODE) {\n    WB_MODE[WB_MODE[\"readonly\"] = -1] = \"readonly\";\n    WB_MODE[WB_MODE[\"draw\"] = 1] = \"draw\";\n    // mousedown = 3, // 鼠标按下了\n    // mousemove = 4, // 鼠标移动中\n    // mouseup = 5,   // 鼠标抬起\n})(WB_MODE || (WB_MODE = {}));\nexport var WB_TOOL;\n(function (WB_TOOL) {\n    WB_TOOL[WB_TOOL[\"flag\"] = -1] = \"flag\";\n    WB_TOOL[WB_TOOL[\"free\"] = 1] = \"free\";\n    WB_TOOL[WB_TOOL[\"line\"] = 2] = \"line\";\n    WB_TOOL[WB_TOOL[\"rect\"] = 3] = \"rect\";\n    WB_TOOL[WB_TOOL[\"solidRect\"] = 4] = \"solidRect\";\n    WB_TOOL[WB_TOOL[\"roundRect\"] = 5] = \"roundRect\";\n    WB_TOOL[WB_TOOL[\"solidRoundRect\"] = 6] = \"solidRoundRect\";\n    WB_TOOL[WB_TOOL[\"circle\"] = 7] = \"circle\";\n    WB_TOOL[WB_TOOL[\"solidCircle\"] = 8] = \"solidCircle\";\n    WB_TOOL[WB_TOOL[\"ellipse\"] = 9] = \"ellipse\";\n    WB_TOOL[WB_TOOL[\"solidEllipse\"] = 10] = \"solidEllipse\";\n    WB_TOOL[WB_TOOL[\"fill\"] = 11] = \"fill\";\n    WB_TOOL[WB_TOOL[\"text\"] = 12] = \"text\";\n    WB_TOOL[WB_TOOL[\"erase\"] = 13] = \"erase\";\n    // select = 14, //  TODO 选择工具\n})(WB_TOOL || (WB_TOOL = {}));\n","/**\n * 定义如何从字符串中解析动作，以及如何将动作转换为字符串(command)。\n */\nimport { WActions } from \"../Itypes\";\nconst encodeNumber = (n) => {\n    if (n === 0 || n < 0) {\n        return '0';\n    }\n    if (n === 1 || n > 1) {\n        return '1';\n    }\n    return n.toFixed(4).slice(2); // 4位已经够了\n};\nconst decodeNumber = (str) => {\n    if (str === '0') {\n        return 0;\n    }\n    if (str === '1') {\n        return 1;\n    }\n    return parseFloat('0.' + str);\n};\nconst stringify = (obj, props) => {\n    if (typeof obj === 'string') {\n        return obj;\n    }\n    else {\n        let str = JSON.stringify(obj, props);\n        return str.replace(/;/gm, '；')\n            .replace(/,/gm, '，')\n            .replace(/:/gm, '¦');\n    }\n};\nconst unstringify = (str) => {\n    let originStr = str.replace(/；/gm, ';')\n        .replace(/，/gm, ',')\n        .replace(/¦/gm, ':');\n    return JSON.parse(originStr);\n};\nclass IAction {\n    constructor() { }\n}\nexport class StartAction extends IAction {\n    constructor(x, y) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.START;\n    }\n    static fromString(str) {\n        // version 1: x, y\n        let pis = str.split(',');\n        let action = new StartAction(decodeNumber(pis[0]), decodeNumber(pis[1]));\n        return action;\n    }\n    toString() {\n        let x = encodeNumber(this.x);\n        let y = encodeNumber(this.y);\n        return `${this.TYPE}:${x},${y}`;\n    }\n}\nexport class MoveAction extends StartAction {\n    constructor(x, y) {\n        super(x, y);\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.MOVE;\n    }\n    static fromString(str) {\n        let pis = str.split(',');\n        return new MoveAction(decodeNumber(pis[0]), decodeNumber(pis[1]));\n    }\n}\nexport class EndAction extends StartAction {\n    constructor(x, y) {\n        super(x, y);\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.END;\n    }\n    static fromString(str) {\n        let pis = str.split(',');\n        return new EndAction(decodeNumber(pis[0]), decodeNumber(pis[1]));\n    }\n}\nexport class RevokeAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.REVOKE;\n        this.TYPE = WActions.REVOKE;\n    }\n    static fromString(str) {\n        return new RevokeAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class SerialAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SERIAL;\n    }\n    static fromString(str) {\n        return new SerialAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class ClearAction extends IAction {\n    constructor(accounts) {\n        super();\n        this.TYPE = WActions.CLEAR;\n        if (Array.isArray(accounts)) {\n            this.accounts = accounts;\n        }\n        else if (accounts) {\n            this.accounts = [accounts];\n        }\n        else {\n            this.accounts = [];\n        }\n    }\n    static fromString(str) {\n        let accounts = unstringify(str);\n        return new ClearAction(accounts);\n    }\n    toString() {\n        let str = stringify(this.accounts);\n        return `${this.TYPE}:${str}`;\n    }\n}\nexport class ClearAckAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.CLEAR_ACK;\n    }\n    static fromString(str) {\n        return new ClearAckAction();\n    }\n    toString() {\n        return `${this.TYPE}:`;\n    }\n}\nexport class SyncRequestAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SYNC_REQUEST;\n    }\n    static fromString(str) {\n        return new SyncRequestAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class SyncAction extends IAction {\n    constructor(sync) {\n        super();\n        this.sync = sync;\n        this.TYPE = WActions.SYNC;\n    }\n    static fromString(str) {\n        let snapshot = unstringify(str);\n        return new SyncAction(snapshot);\n    }\n    toString() {\n        let sync = this.sync;\n        let originStr = stringify(sync);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nexport class SyncPrepareAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SYNC_PREPARE;\n    }\n    static fromString(str) {\n        return new SyncPrepareAction();\n    }\n    toString() {\n        let originStr = stringify(this, ['']);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nexport class SyncPrepareAckAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.SYNC_PREPARE_ACK;\n    }\n    static fromString(str) {\n        return new SyncPrepareAckAction();\n    }\n    toString() {\n        return `${this.TYPE}:`;\n    }\n}\nexport class LaserPenAction extends StartAction {\n    constructor(x, y) {\n        super(x, y);\n        this.x = x;\n        this.y = y;\n        this.TYPE = WActions.LASER_PEN;\n    }\n    static fromString(str) {\n        let pis = str.split(',');\n        return new LaserPenAction(+pis[0], +pis[1]);\n    }\n}\nexport class LaserPenEndAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.LASER_PEN_END;\n    }\n    static fromString(str) {\n        return new LaserPenEndAction();\n    }\n    toString() {\n        return `${this.TYPE}:`;\n    }\n}\nexport class FileAction extends IAction {\n    constructor(file) {\n        super();\n        this.file = file;\n        this.TYPE = WActions.FILE;\n    }\n    static fromString(str) {\n        let value = str.split(',');\n        let fileType;\n        if (value[3] === '0') {\n            fileType = 'img';\n        }\n        else if (value[3] === '1') {\n            fileType = 'h5';\n        }\n        else {\n            fileType = 'clear';\n        }\n        let file = {\n            docId: value[0] || '',\n            currentPage: parseInt(value[1] || '1'),\n            pageCount: parseInt(value[2] || '1'),\n            type: fileType || 'img',\n            url: value[4] || '',\n            urlStr: value[5] || '',\n            h5Cmd: value[6] || ''\n        };\n        return new FileAction(file);\n    }\n    static immuteUpdate(fileA, fileB) {\n        const gatherFile = {};\n        const diff = {};\n        FileAction.PROPS.forEach(propName => {\n            let valueOld = fileA[propName];\n            let valueNext = fileB[propName];\n            if (typeof valueNext === 'undefined' || valueNext === '') {\n                gatherFile[propName] = valueOld;\n            }\n            else {\n                if (valueNext !== valueOld) {\n                    diff[propName] = valueNext;\n                    gatherFile[propName] = valueNext;\n                }\n                else {\n                    gatherFile[propName] = valueOld;\n                }\n            }\n        });\n        return [gatherFile, diff];\n    }\n    toString() {\n        let file = this.file;\n        let fileType;\n        if (file.type === 'img') {\n            fileType = '0';\n        }\n        else if (file.type === 'h5') {\n            fileType = '1';\n        }\n        else {\n            fileType = '-1';\n        }\n        return `${this.TYPE}:${file.docId || ''},${file.currentPage || ''},${file.pageCount || ''},${fileType},${file.url || ''},${file.urlStr || ''},${file.h5Cmd || ''}`;\n    }\n}\nFileAction.PROPS = [\n    'docId', 'currentPage',\n    'pageCount', 'type', 'url',\n    'urlStr', 'h5Cmd'\n];\nexport class RedoAction extends IAction {\n    constructor() {\n        super();\n        this.TYPE = WActions.REDO;\n    }\n    static fromString(str) {\n        return new RedoAction();\n    }\n    toString() {\n        return `${this.TYPE}`;\n    }\n}\nexport class CalibrateAction extends IAction {\n    constructor(opt) {\n        super();\n        this.TYPE = WActions.CALIBRATE;\n        Object.assign(this, opt);\n    }\n    static fromString(str) {\n        const opt = unstringify(str);\n        return new CalibrateAction(opt);\n    }\n    toString() {\n        const originStr = stringify(this, CalibrateAction.PROPS);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\n// static readonly PROPS = [\n//   'mode', 'tool', 'size', 'color', 'fontsize',\n// ]\nCalibrateAction.USER_PROPS = [\n    'mode', 'tool', 'size', 'color', 'fontsize',\n    'isMouseDown', 'keyDown', 'flagPos',\n];\nCalibrateAction.PROPS = [\n    ...CalibrateAction.USER_PROPS,\n    ...['altKey', 'shiftKey', 'which', 'ctrlKey'],\n    ...['ownerCanvasHeight', 'ownerCanvasWidth'],\n];\nexport class TextAction extends IAction {\n    constructor(x, y, text) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.text = text;\n        this.TYPE = WActions.TEXT;\n    }\n    static fromString(str) {\n        // str.split(',') 不能用，分割，因为用户可能会输入‘，’\n        const { x, y, text } = unstringify(str);\n        return new TextAction(x, y, text);\n    }\n    toString() {\n        const originStr = stringify(this, TextAction.PROPS);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nTextAction.PROPS = ['x', 'y', 'text'];\nexport class VersionAction extends IAction {\n    constructor({ ver, account, gzip, }) {\n        super();\n        this.TYPE = WActions.VERSION;\n        this.ver = ver;\n        this.account = account;\n        this.gzip = gzip;\n    }\n    static fromString(str) {\n        // str.split(',') 不能用，分割，因为用户可能会输入‘，’\n        const { ver, account, gzip, } = unstringify(str);\n        return new VersionAction({\n            ver,\n            account,\n            gzip,\n        });\n    }\n    toString() {\n        const originStr = stringify(this, VersionAction.PROPS);\n        return `${this.TYPE}:${originStr}`;\n    }\n}\nVersionAction.PROPS = ['ver', 'account', 'gzip'];\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toObject = require('./_to-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $GOPS = require('./_object-gops');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","/**\n * 解决注册事件时兼容性问题\n * @param el\n * @param name\n * @param cb\n */\nexport function on(el, name, cb) {\n    el.addEventListener(name, cb);\n}\nexport function off(el, name, cb) {\n    el.removeEventListener(name, cb);\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/number/is-integer\"), __esModule: true };","import EventEmitter from 'eventemitter3';\nclass Dispatcher extends EventEmitter {\n    subMany(eventDict) {\n        for (const key in eventDict) {\n            this.on(key, eventDict[key]);\n        }\n    }\n    destroy() {\n        this.eventNames().forEach(name => {\n            this.removeAllListeners(name);\n        });\n    }\n}\nexport default Dispatcher;\n","export { default as pako } from 'pako';\n/**\n * 格式化颜色值, 默认为十六进制(16), 默认自动补齐\n * @param {string} color 十六进制请不要带#号\n * @param {number} format 需要转换的进制, 默认为十六进制\n */\nexport function formatColor(color, format = 16) {\n    if (!color)\n        return formatColor.INVALID;\n    let res;\n    if (format === 16) {\n        let colorNumber = +color;\n        if (colorNumber < 0) {\n            res = hex2rgb(colorNumber);\n            console.log('hex2rgb', colorNumber, res);\n            return res;\n        }\n        res = colorNumber.toString(16);\n        if (res.length < 3) {\n            res = ('000' + res).slice(-3);\n        }\n        if (res.length > 3 && res.length < 6) {\n            res = ('000' + res).slice(-6);\n        }\n        res = '#' + res;\n        // console.log('formatColor 16', color, res)\n        return res;\n    }\n    else if (format === 10) {\n        res = color.replace(/#/gi, '');\n        res = parseInt('0x' + res);\n        // console.log('formatColor 10', color, res)\n        return isNaN(res) ? formatColor.INVALID : '' + res;\n    }\n    else {\n        return formatColor.INVALID;\n    }\n}\nformatColor.INVALID = '++bad-color++';\n// rgba转rgb\nexport function hex2rgb(val) {\n    // return '#' + (0x00FFFFFF & val)\n    const alpha = (val >> 24) & 0xff;\n    let red = (val >> 16) & 0xff;\n    let green = (val >> 8) & 0xff;\n    let blue = val & 0xff;\n    let red$ = red.toString(16);\n    let green$ = green.toString(16);\n    let blue$ = blue.toString(16);\n    console.log('rgb', red$, green$, blue$);\n    return ('#' +\n        ('0' + red$).slice(-2) +\n        ('0' + green$).slice(-2) +\n        ('0' + blue$).slice(-2));\n}\n/**\n *  颜色模块，默认都是字符串类型的 16进制全称，不含透明度的字符串\n */\n// 得到KB 单位\nexport function getKiloBytes(length) {\n    if (typeof length === 'number') {\n        return length * 2 / 1024;\n    }\n    if (typeof length === 'string') {\n        return length.length * 2 / 1024;\n    }\n    return 0;\n}\nexport const sleep = (time = 100) => new Promise(res => {\n    setTimeout(res, time);\n});\nexport function sign(x) { return x ? x < 0 ? -1 : 1 : 0; }\n","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","module.exports = function () { /* empty */ };\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","export function min(...numbers) {\n    return numbers.reduce((n1, n2) => {\n        return Math.min(n1, n2);\n    });\n}\nexport function max(...numbers) {\n    return numbers.reduce((n1, n2) => {\n        return Math.max(n1, n2);\n    });\n}\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nrequire('../modules/es7.set.of');\nrequire('../modules/es7.set.from');\nmodule.exports = require('../modules/_core').Set;\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Set', { toJSON: require('./_collection-to-json')('Set') });\n","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\nrequire('./_set-collection-of')('Set');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\nrequire('./_set-collection-from')('Set');\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonResult: (i, result, next) =>\n\t\t\t\t`if(${result} !== undefined) {\\n${onResult(\n\t\t\t\t\tresult\n\t\t\t\t)};\\n} else {\\n${next()}}\\n`,\n\t\t\tresultReturns,\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncBailHookCodeFactory();\n\nclass SyncBailHook extends Hook {\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncBailHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncBailHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncBailHook;\n","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nimport drawConfig from \"./drawConfig\";\nimport { drawCurve } from \"../../misc/drawCurve\";\nclass PenOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'pen';\n        this.description = \"涂鸦操作工具。\\n首先使用op:pen:activate设置画布为涂鸦模式。\" +\n            \"通过op:pen:lineWidth, op:pen:color设置涂鸦的宽度和颜色。然后画布会监听鼠标动作，生成涂鸦。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getSnapshot(inProgress) {\n        const points = this.points;\n        const currOpId = this.opsManager.currPage.getOpId();\n        const pkg = this.app.room.opIdSnapshotMap[currOpId];\n        if (!pkg || !pkg.snapshot.hasOwnProperty('category')) {\n            /**\n             * 保险措施，如果已经发送的是旧的数据，则发送一份完整的数据出去\n             */\n            return Object.assign({ points: points.slice(), total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n        let boundaryRect = {\n            boundary: this.getBoundaryRectOfFreeDraw()\n        };\n        if (this.sampleSeq > 0 && inProgress) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), total: points.length });\n        }\n        else if (this.sampleSeq > 0) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), total: points.length, inProgress: inProgress });\n        }\n        else {\n            return Object.assign({ points: points.slice(), total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n    }\n    _draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const points = data.points;\n        const transformedPoints = points.map(p => getTransformedPoint(p, data.dx, data.dy, data.scaleX, data.scaleY));\n        drawCurve(ctx, transformedPoints, 0.5);\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        this._draw(snapshot, ctx);\n        this.strokeOrFill(ctx, {\n            stroke: data.color,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n    ifMouseOnOp(snapshot, mx, my) {\n        const ctx = this.app.container.ctx;\n        this._draw(snapshot, ctx);\n        //稍微增大一些选择线段的宽度范围，否则线段很细时，判定可能过于灵敏\n        ctx.lineWidth = snapshot.data.lineWidth + 20;\n        ctx.strokeStyle = 'rgba(0,0,0,0)';\n        ctx.stroke();\n        return ctx.isPointInStroke(mx, my);\n    }\n    mergePartial(snapshot, partial) {\n        const sp = this._mergePartial(snapshot, partial);\n        if (sp.data.points.length !== sp.data.total) {\n            console.warn('merge ........', snapshot, partial);\n        }\n        return sp;\n    }\n    _mergePartial(snapshot, partial) {\n        try {\n            const ptrDiff = partial.data.total - snapshot.data.total;\n            if (ptrDiff === 0) {\n                return Object.assign(Object.assign({}, snapshot), { data: Object.assign(Object.assign(Object.assign({}, snapshot.data), partial.data), { points: snapshot.data.points }) });\n            }\n            else if (ptrDiff < 0) {\n                return snapshot;\n            }\n            else if (ptrDiff <= partial.data.points.length) {\n                const startIndex = partial.data.points.length - ptrDiff;\n                return Object.assign(Object.assign({}, snapshot), { data: Object.assign(Object.assign(Object.assign({}, snapshot.data), partial.data), { points: snapshot.data.points.concat(partial.data.points.slice(startIndex)) }) });\n            }\n            else {\n                if (LOG) {\n                    console.warn('白板--> mergePartial error', snapshot, partial);\n                }\n                return snapshot;\n            }\n        }\n        catch (_a) {\n            if (LOG) {\n                console.warn('白板--> mergePartial error', snapshot, partial);\n            }\n            return snapshot;\n        }\n    }\n}\nexport default PenOp;\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi41Mzg2IDIuNDYwMzRDMTMuMTUyNCAxLjg0NjU2IDE0LjE0NzUgMS44NDY1NSAxNC43NjEzIDIuNDYwMzRMMTcuNTM5NyA1LjIzODcxQzE4LjE1MzQgNS44NTI0OSAxOC4xNTM0IDYuODQ3NjIgMTcuNTM5NyA3LjQ2MTRMNy44MDEyMiAxNy4xOTk4QzcuNTQyMjIgMTcuNDU4OCA3LjIwMDkgMTcuNjE5MiA2LjgzNjIyIDE3LjY1MzRMMy4xODEyNyAxNy45OTUyQzIuNTA3MTMgMTguMDU4MiAxLjk0MTc2IDE3LjQ5MjkgMi4wMDQ4MSAxNi44MTg3TDIuMzQ2NjQgMTMuMTYzOEMyLjM4MDc1IDEyLjc5OTEgMi41NDExNSAxMi40NTc4IDIuODAwMTUgMTIuMTk4OEwxMi41Mzg2IDIuNDYwMzRaTTEzLjkyNzggMy4yOTM4NUMxMy43NzQzIDMuMTQwNCAxMy41MjU2IDMuMTQwNCAxMy4zNzIxIDMuMjkzODVMMy42MzM2NiAxMy4wMzIzQzMuNTY4OTEgMTMuMDk3IDMuNTI4ODEgMTMuMTgyNCAzLjUyMDI4IDEzLjI3MzVMMy4xODk0OSAxNi44MTA1TDYuNzI2NDYgMTYuNDc5N0M2LjgxNzYzIDE2LjQ3MTIgNi45MDI5NiAxNi40MzExIDYuOTY3NyAxNi4zNjYzTDE2LjcwNjIgNi42Mjc4OUMxNi44NTk2IDYuNDc0NDUgMTYuODU5NiA2LjIyNTY2IDE2LjcwNjIgNi4wNzIyMkwxMy45Mjc4IDMuMjkzODVaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjYyMjQgOS41NDUxOEwxMC40NTQ4IDUuMzc3NjJMMTEuMjg4MyA0LjU0NDExTDE1LjQ1NTkgOC43MTE2N0wxNC42MjI0IDkuNTQ1MThaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K\"","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nclass LineOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'line';\n        this.description = \"绘制线段。\\n首先使用op:line:activate设置画布为线段模式。\" +\n            \"通过op:line:lineWidth, op:line:color设置线段的宽度和颜色。然后画布会监听鼠标动作，生成线段。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            inProgress\n        });\n    }\n    getBoundaryRect() {\n        return this.getBoundaryRectOfLine();\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const { sp, ep } = this.getStartEndPointFromSnapshot(data);\n        ctx.beginPath();\n        ctx.moveTo(...getTransformedPoint(sp, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.lineTo(...getTransformedPoint(ep, data.dx, data.dy, data.scaleX, data.scaleY));\n        this.strokeOrFill(ctx, {\n            stroke: data.color,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n    ifMouseOnOp(baseOp, mx, my) {\n        const ctx = this.app.container.ctx;\n        const data = baseOp.data;\n        const { sp, ep } = this.getStartEndPointFromSnapshot(data);\n        ctx.beginPath();\n        ctx.moveTo(...getTransformedPoint(sp, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.lineTo(...getTransformedPoint(ep, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.strokeStyle = 'rgba(0,0,0,0)';\n        ctx.lineWidth = data.lineWidth + 20;\n        ctx.stroke();\n        return ctx.isPointInStroke(mx, my);\n    }\n    getStartEndPointFromSnapshot(data) {\n        let sp;\n        let ep;\n        if (Array.isArray(data.points)) {\n            sp = data.points[0];\n            ep = data.points[data.points.length - 1];\n        }\n        else {\n            sp = data.sp;\n            ep = data.ep;\n        }\n        return {\n            sp, ep\n        };\n    }\n}\nexport default LineOp;\n","/**\n * 移动鼠标删除元素\n */\nimport Operation from \"../Operation\";\nimport { arrayDeduce, findOpsUnderMouse, findOpsUnderRect, idsChanged } from \"../util\";\nimport drawConfig from \"../DrawOp/drawConfig\";\nclass SelectBase extends Operation {\n    constructor() {\n        super(...arguments);\n        this.points = [];\n        this.lastSelectedOpIds = [];\n    }\n    postMouseUp(idsBeenSelected) { }\n    postClick(idsBeenSelected) { }\n    postMouseMove(event, idsBeenSelected) { }\n    get sp() {\n        return this.points.length > 0 ? this.points[0] : undefined;\n    }\n    get ep() {\n        return this.points.length > 0 ? this.points[this.points.length - 1] : undefined;\n    }\n    handleMouseDown(event, mx, my) {\n        //鼠标按下时，先清空已有的选择元素\n        this.dispatch(this.getSelectionSnapshot(false, []));\n        this.points = [[mx, my]];\n        const idsBeenSelected = findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n        this.dispatch(this.getSelectionSnapshot(true, idsBeenSelected));\n        this.lastSelectedOpIds = idsBeenSelected;\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.isMouseDown) {\n            this.points.push([mx, my]);\n        }\n        else {\n            this.points = [[mx, my]];\n        }\n        let idsBeenSelected;\n        if (this.isMouseDown) {\n            //鼠标按下时，搜索鼠标选择区域内的元素\n            idsBeenSelected = findOpsUnderRect(this.points, this.drawOpsOfPage);\n            this.dispatch(this.getSelectionSnapshot(true, idsBeenSelected));\n        }\n        else {\n            //若鼠标松开，只有当选中的点发生变化时，才有必要发送事件来触发重绘\n            //鼠标松开时，当且仅当\n            const idsUnderMouse = findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n            idsBeenSelected = arrayDeduce(idsUnderMouse, this.opsManager.selectedOpIds);\n            if (idsChanged(idsBeenSelected, this.lastSelectedOpIds)) {\n                this.dispatch(this.getSelectionSnapshot(true, idsBeenSelected, true));\n            }\n        }\n        this.lastSelectedOpIds = idsBeenSelected;\n        this.postMouseMove(event, idsBeenSelected);\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown) {\n            const idsBeenSelected = this.isMouseDown ?\n                findOpsUnderRect(this.points, this.drawOpsOfPage) :\n                findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n            this.postMouseUp(idsBeenSelected);\n        }\n    }\n    /**\n     * container中如果判断是click，就不会发送mousedown, mousemove和mouseup事件\n     * 因此需要额外判断是不是click事件\n     * @param event\n     * @param mx\n     * @param my\n     */\n    handleClick(event, mx, my) {\n        this.points = [[mx, my]];\n        const idsBeenSelected = findOpsUnderMouse(this.points, this.drawOpsOfPage, this.opsManager);\n        this.postClick(idsBeenSelected);\n    }\n    getSelectionSnapshot(inProgress = false, selectedOpIds, isHover = false) {\n        return {\n            type: 'select',\n            sp: this.sp,\n            ep: this.ep,\n            inProgress: inProgress,\n            selectedOpIds: selectedOpIds.slice(),\n            reuseOpType: isHover ? 'select-hover' : 'select',\n            skipUndo: true,\n            color: drawConfig.strokeColor,\n            nickname: this.app.nickname\n        };\n    }\n}\nexport default SelectBase;\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nclass RectOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'rect';\n        this.shouldSaniteEp = true;\n        this.description = \"绘制矩形。\\n首先使用op:rect:activate设置画布为矩形模式。\" +\n            \"通过op:rect:lineWidth, op:rect:stroke, op:rect:fill设置矩形的宽度和颜色。然后画布会监听鼠标动作，生成矩形。具体用法如下：\";\n    }\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'stroke',\n            inProgress\n        });\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const sp = getTransformedPoint(data.sp, data.dx, data.dy, data.scaleX, data.scaleY);\n        const ep = getTransformedPoint(data.ep, data.dx, data.dy, data.scaleX, data.scaleY);\n        ctx.beginPath();\n        ctx.rect(sp[0], sp[1], ep[0] - sp[0], ep[1] - sp[1]);\n        this.strokeOrFill(ctx, {\n            stroke: data.stroke,\n            fill: data.fill,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n}\nexport default RectOp;\n","import { getTransformedPoint } from \"../../misc/shapeHelper\";\nimport MouseMoveDrawOp from \"./MouseMoveDrawOp\";\nclass EllipseOp extends MouseMoveDrawOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'ellipse';\n        this.shouldSaniteEp = true;\n        this.description = \"绘制椭圆形\";\n    }\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'stroke',\n            inProgress\n        });\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        const sp = getTransformedPoint(data.sp, data.dx, data.dy, data.scaleX, data.scaleY);\n        const ep = getTransformedPoint(data.ep, data.dx, data.dy, data.scaleX, data.scaleY);\n        const cx = sp[0] / 2 + ep[0] / 2;\n        const cy = sp[1] / 2 + ep[1] / 2;\n        const radiusX = Math.abs(ep[0] - sp[0]) / 2;\n        const radiusY = Math.abs(ep[1] - sp[1]) / 2;\n        ctx.beginPath();\n        ctx.ellipse(cx, cy, radiusX, radiusY, 0, 0, Math.PI * 2, true);\n        this.strokeOrFill(ctx, {\n            stroke: data.stroke,\n            fill: data.fill,\n            lineWidth: data.lineWidth,\n            opacity: data.opacity\n        });\n    }\n    ifMouseOnOp(baseOp, mx, my) {\n        const ctx = this.app.container.ctx;\n        const data = baseOp.data;\n        const sp = getTransformedPoint(data.sp, data.dx, data.dy, data.scaleX, data.scaleY);\n        const ep = getTransformedPoint(data.ep, data.dx, data.dy, data.scaleX, data.scaleY);\n        const cx = sp[0] / 2 + ep[0] / 2;\n        const cy = sp[1] / 2 + ep[1] / 2;\n        const radiusX = Math.abs(ep[0] - sp[0]) / 2;\n        const radiusY = Math.abs(ep[1] - sp[1]) / 2;\n        ctx.beginPath();\n        ctx.ellipse(cx, cy, radiusX, radiusY, 0, 0, Math.PI * 2, true);\n        ctx.fillStyle = 'rgba(0,0,0,0)';\n        ctx.fill();\n        return ctx.isPointInPath(mx, my);\n    }\n}\nexport default EllipseOp;\n","/**\n * 检测工具栏中的字体大小是否有效\n * @param text\n */\nexport function testFontSizeText(text) {\n    const num = Number(text);\n    if (isNaN(num)) {\n        return 'nan';\n    }\n    else if (num > MAX_FONT_SIZE) {\n        return 'exceed_max';\n    }\n    else if (num <= MIN_FONT_SIZE) {\n        return 'exceed_min';\n    }\n    else {\n        return 'valid';\n    }\n}\nexport const printTextInMultiLine = (context, text, x, y, lineHeight) => {\n    const textArr = text.split(/\\r?\\n/g);\n    let currentLine = 0;\n    for (let str of textArr) {\n        context.fillText(str, x, y + (lineHeight * currentLine));\n        currentLine++;\n    }\n};\nexport const MAX_FONT_SIZE = 999;\nexport const MIN_FONT_SIZE = 12;\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMTIiIHk9IjEuNDQyMjkiIHdpZHRoPSI4LjM4OTY3IiBoZWlnaHQ9IjE0LjY4MTkiIHJ4PSIxIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSAxMiAxLjQ0MjI5KSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxLjIiLz4KPHBhdGggZD0iTTQuNTg0NSA4Ljg1Nzc5TDEwLjUxNjkgMTQuNzkwMiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxLjIiLz4KPHBhdGggZD0iTTQuMjI0NjQgMTcuNjgxOEgxNS43NjA0IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEuMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+Cjwvc3ZnPgo=\"","/*\n * @Author: lduoduo\n * @Date: 2018-01-26 20:12:09\n * @Last Modified by: lduoduo\n * @Last Modified time: 2018-01-27 23:06:46\n * toast控制器\n */\nimport Toast from './toast';\nlet timer;\nexport default class ToastCtrl {\n    static createInstance() {\n        this._instance = this._instance || new Toast();\n        return this._instance;\n    }\n    static show(inOptions) {\n        const { time = 3 } = inOptions;\n        if (!this._instance) {\n            this.createInstance();\n        }\n        this._instance.show(inOptions);\n        if (timer) {\n            clearTimeout(timer);\n        }\n        if (time) {\n            timer = setTimeout(() => {\n                this.hide();\n            }, time * 1000);\n        }\n    }\n    static hide() {\n        if (timer) {\n            clearTimeout(timer);\n        }\n        if (this._instance) {\n            this._instance.hide();\n        }\n    }\n    static destory() {\n        if (this._instance) {\n            this._instance.destroy();\n            this._instance = null;\n        }\n    }\n}\nToastCtrl._instance = null;\n","/*\n * @Author: lduoduo\n * @Date: 2018-01-26 19:45:27\n * @Last Modified by: lduoduo\n * @Last Modified time: 2018-01-28 15:34:14\n * toast 消息提示组件\n */\nimport './toast.less';\nexport default class Toast {\n    constructor() {\n        this.toastDiv = document.createElement('div');\n        this.toastDiv.className = 'whiteboard-toast';\n        this.toastDiv.onclick = this.hide.bind(this);\n        document.body.appendChild(this.toastDiv);\n    }\n    show(inOptions) {\n        const toastDiv = this.toastDiv;\n        toastDiv.style.display = 'block';\n        if (inOptions.type === 'warn') {\n            toastDiv.style.color = '#8a6d3b';\n            toastDiv.style.backgroundColor = '#fcf8e3';\n            toastDiv.style.borderColor = '#faebcc';\n        }\n        else if (inOptions.type === 'info') {\n            toastDiv.style.color = '#31708f';\n            toastDiv.style.backgroundColor = '#d9edf7';\n            toastDiv.style.borderColor = '#bce8f1';\n        }\n        else if (inOptions.type === 'error') {\n            toastDiv.style.color = '#a94442';\n            toastDiv.style.backgroundColor = '#f2dede';\n            toastDiv.style.borderColor = '#ebccd1';\n        }\n        else {\n            toastDiv.style.color = '#3c763d';\n            toastDiv.style.backgroundColor = '#dff0d8';\n            toastDiv.style.borderColor = '#d6e9c6';\n        }\n        if (Number.isInteger(inOptions.top)) {\n            toastDiv.style.top = `${inOptions.top}px`;\n        }\n        toastDiv.innerHTML = inOptions.message;\n    }\n    hide() {\n        if (this.toastDiv) {\n            this.toastDiv.style.display = 'none';\n        }\n    }\n    destroy() {\n        if (this.toastDiv) {\n            document.body.removeChild(this.toastDiv);\n            this.toastDiv = null;\n        }\n    }\n}\n","require('../../modules/es6.number.is-integer');\nmodule.exports = require('../../modules/_core').Number.isInteger;\n","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/postcss-loader/src/index.js??postcss!./toast.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/postcss-loader/src/index.js??postcss!./toast.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/postcss-loader/src/index.js??postcss!./toast.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".whiteboard-toast {\\n    display: none;\\n    position: fixed;\\n    left: 50%;\\n    transform: translate(-50%);\\n    top: 200px;\\n    padding: 8px 15px;\\n    margin-bottom: 20px;\\n    border: 1px solid transparent;\\n    border-radius: 4px;\\n    color: #3c763d;\\n    background-color: #dff0d8;\\n    border-color: #d6e9c6;\\n    z-index: 100;\\n}\", \"\"]);\n\n","/**\n * 默认白板中所有页都属于同一个Board实例。\n *\n * 每添加一个文件（图片除外），都会添加一个Board。多页文件的Board含有多页Page。\n *\n * 引入Board概念是希望能够方便用户快速定位，切换多文件，以及原有白板。\n */\nimport Page from \"../page\";\nimport { addPage, deletePage, gotoPage } from \"./actions\";\nclass Board {\n    constructor(app, boardName, displayName) {\n        this.pages = {};\n        //pages中的key的顺序通过pageNames来控制。\n        this.pageNames = [];\n        //创建新页面时，新页面的索引号。该索引号会随着新页面创建而递增\n        this.newPageIndex = 1;\n        this.app = app;\n        this.dispatch = app.dispatcher;\n        this.boardName = boardName;\n        this.displayName = displayName;\n        this.pages = {\n            '0': new Page(app, boardName, '0')\n        };\n        this.pageNames = ['0'];\n        this.currIndex = 0;\n    }\n    get currPage() {\n        return this.pages[this.currIndex];\n    }\n    get payloadOfPages() {\n        return this.pageNames.map(name => {\n            return this.pages[name].payload;\n        });\n    }\n    /**\n     * currIndex是page的内在索引。\n     *\n     * 添加页面时，新页面会获得一个内在索引。内在索引从0开始递增\n     * 下面这个函数会返回当前页面在所有页面当中的位置。\n     *\n     * 举个例子：\n     * 添加三个页面，三个页面的内在索引为0,1,2\n     * 删除第二个页面，剩余下面的内在索引为0，2\n     *\n     * 2这个页面的currPageIndex为1，\n     * 0的currPageIndex为0\n     */\n    getCurrPageIndex() {\n        return this.pageNames.indexOf(this.currIndex.toString());\n    }\n    getPageBuiltInIndex(index) {\n        return Number(this.pageNames[index]);\n    }\n    addOpInBoard(snapshot) {\n        const { action, page, insertAfter } = snapshot.data;\n        if (action === 'add') {\n            addPage(this, insertAfter, snapshot);\n        }\n        if (action === 'goto') {\n            gotoPage(this, page, snapshot);\n        }\n        if (action === 'delete') {\n            deletePage(this, page, snapshot);\n        }\n        this.app.opsManager.hooks.addOpHook.call(snapshot, true);\n    }\n}\nexport default Board;\n","/**\n * 同一时间只会显示一个Page。显示的Page由{board = room.boards[room.currIndex]; page = board.pages[board.currIndex]}确定\n *\n * 每个Page中有Op快照队列。快照内容和协议传输内容一致，是Json对象。Op快照队列描述了Page该如何渲染。\n */\nimport { resourceLoaded } from \"../resource/resourceCache\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { refresh, cleanNonCanvasElements, drawInProgressSnapshots } from \"./render\";\nimport { calcDrawOpQueue } from \"./completeFlow\";\nimport { opNeedRefresh } from \"./util\";\nimport { addIncrementSnapshot } from \"./incrementFlow\";\nclass Page {\n    constructor(app, boardName, pageIndex) {\n        //只保留拥有draw方法的Op\n        this.drawOpQueue = {};\n        this.hiddenOpQueue = {};\n        /*\n         * 每个用户的快照队列中最后一个选择快照。选择快照只需要绘制最新的即可。注意selectOp和element-eraser Op都可以发送选择快照\n         */\n        this.lastSelectOfUser = {};\n        // lastSelectSnapshot: IDrawOpSnapshot | undefined\n        /**\n         * 当前用户正在选择中的select快照\n         */\n        this.lastInProgressSelectOfUser = {};\n        this.lastInProgressSnapshotOfUser = {};\n        /**\n         * 鼠标位置和其他连续动作可以共存，因此不放在lastInProgressSnapshotOfUser中\n         */\n        this.lastMousePointerOfUser = {};\n        /**\n         * 对于preview页面，若当前页面因为资源未下载而阻塞，则不渲染预览。\n         * 对于正常页面，仍渲染页面，但是不渲染未下载的资源\n         *\n         * 当资源全部下载好了，会发送event:page:ready事件，预览工厂及board根据此事件刷新相应的canvas\n         */\n        this.blockedResourceList = [];\n        this._currOpId = uuidv4();\n        this._nextOpId = uuidv4();\n        this.app = app;\n        this.opsManager = app.opsManager;\n        this.boardName = boardName;\n        this.pageIndex = pageIndex;\n        window.page = this;\n    }\n    prepareNewOpId() {\n        this._currOpId = this._nextOpId;\n        this._nextOpId = uuidv4();\n    }\n    getOpId() {\n        return this.app.account + '-' + this._currOpId;\n    }\n    /**\n     * 如果nextOpInc为false，那只是看一看下一个opId是什么\n     * 如果为true，则将opId递增，并返回\n     */\n    getNextOpId(nextOpInc = false) {\n        if (nextOpInc) {\n            this.prepareNewOpId();\n            return this.getOpId();\n        }\n        else {\n            return this.app.account + '-' + this._nextOpId;\n        }\n    }\n    get opQueue() {\n        const room = this.app.room;\n        try {\n            return room.boardOps[this.boardName].pages[this.pageIndex].inPageSnapshotIds.map(id => room.opIdSnapshotMap[id].snapshot);\n        }\n        catch (_a) {\n            return [];\n        }\n    }\n    /**\n     * 是否为当前文档的当前页面\n     */\n    get isCurrPage() {\n        return this.app.room.currBoard.currPage === this;\n    }\n    get ctx() {\n        return this.app.container.ctx;\n    }\n    get frontCtx() {\n        return this.app.container.frontCtx;\n    }\n    get laserCtx() {\n        return this.app.container.laserCtx;\n    }\n    get width() {\n        return this.app.container.width;\n    }\n    get height() {\n        return this.app.container.height;\n    }\n    get blocked() {\n        return this.blockedResourceList.length > 0;\n    }\n    setPayload(payload) {\n        this.payload = payload;\n    }\n    addWaitingResource(resUrl) {\n        if (!this.blockedResourceList.includes(resUrl) && !resourceLoaded(resUrl)) {\n            this.blockedResourceList.push(resUrl);\n        }\n    }\n    removeWaitingResource(resUrl) {\n        const index = this.blockedResourceList.indexOf(resUrl);\n        if (index > -1) {\n            this.blockedResourceList.splice(index, 1);\n            if (!this.blocked) {\n                //通知外界页面已经准备好了。\n                this.app.opsManager.hooks.pageReady.call(this.boardName, this.pageIndex);\n                if (this.isCurrPage) {\n                    this.app.room.pageToRefresh = this;\n                    // return this.refresh()\n                }\n            }\n        }\n    }\n    /**\n     * 将snapshot加入队列中\n     *\n     * @param snapshot\n     */\n    addOpInPage(snapshot, doRefresh = true) {\n        if (snapshot.opId === 'none') {\n            console.error('DEV-->', 'snapshot no opid', snapshot);\n            return false;\n        }\n        /**\n         * 用户(uid)有新的快照，或者快照已完成，删除他/她之前的进行中的快照，否则会重复绘制\n         *\n         * 排查mouse-pointer是因为进行中的快照可能和鼠标位置快照同时产生\n         */\n        if (this.lastInProgressSnapshotOfUser.hasOwnProperty(snapshot.uid)\n            && !['mouse-pointer'].includes(snapshot.data.type)) {\n            if (!snapshot.data.inProgress\n                || snapshot.opId !== this.lastInProgressSnapshotOfUser[snapshot.uid].snapshot.opId) {\n                delete this.lastInProgressSnapshotOfUser[snapshot.uid];\n            }\n        }\n        // if (lastOp === null && snapshot.data.type !== 'select') {\n        //     console.warn('DEV-->', 'New Op created', snapshot)\n        // }\n        // if (!snapshot.data.inProgress && snapshot.data.type !== 'select') {\n        //     console.warn('DEV-->', 'New op finished', snapshot)\n        // }\n        /**\n         * 批量接收快照时，也要调用calcDrawOpQueue,\n         * 否则recovery模块缓存时，backgroundOp可能未被设置，导致刷新时丢失所有文档背景图\n         */\n        if (opNeedRefresh(this, snapshot)) {\n            this.calcDrawOpQueue();\n        }\n        if (!this.app.room.isReceivingBatchSnapshots) {\n            if (opNeedRefresh(this, snapshot)) {\n                if (['undo', 'redo', 'clear'].includes(snapshot.data.type)) {\n                    this.cleanNonCanvasElements(false);\n                }\n                if (doRefresh) {\n                    /**\n                     * 只有Page是当前Page才重绘\n                     */\n                    if (this.boardName === this.app.room.currIndex &&\n                        this.pageIndex === this.app.room.currBoard.currIndex.toString()) {\n                        this.app.room.pageToRefresh = this;\n                        // this.refresh()\n                    }\n                }\n            }\n            else {\n                addIncrementSnapshot(this, snapshot);\n            }\n        }\n        /**\n         * 埋入钩子。\n         * undo, redo可以使用该钩子更新可撤销，可重做操作数量\n         */\n        this.opsManager.hooks.addOpHook.call(snapshot);\n        return opNeedRefresh(this, snapshot);\n    }\n    /**\n     * 将完整操作队列转为绘制操作队列\n     * 选择也会输出DrawOpSnapshot。因为它也有绘制方式。但是只有最后一个，且激活的选择操作会显示内容\n     *\n     * 步骤一：建立依赖链表队列，比如说\n     * {\n     *  [涂鸦1，移动1，缩放1，移动1]，\n     *  [矩形2，移动1]，\n     *  [最后一次选择]\n     * }\n     * 步骤二：计算图形变形后的结果。然后输出图形队列\n     */\n    calcDrawOpQueue() {\n        calcDrawOpQueue(this, this.app.room.isReceivingBatchSnapshots);\n    }\n    /**\n     * 切换页面时，以及撤销，回退，清空时，应该清空container中属于切换前页面的dom元素\n     *\n     * 撤销，回退不要清空背景元素。清空背景元素会造成背景图闪烁。只在绝对必要时清空背景图（换页）\n     */\n    cleanNonCanvasElements(includeBackground = true) {\n        cleanNonCanvasElements(this, includeBackground);\n    }\n    refresh(opt = {}) {\n        refresh(this, opt);\n    }\n    incRefresh() {\n        drawInProgressSnapshots(this);\n    }\n}\nexport default Page;\n","import Page from \"../page\";\n/**\n * snapshot为引起addPage动作的快照，它可能来自于Board类快照\n */\nexport const addPage = (board, insertAfter, snapshot) => {\n    board.app.opsManager.hooks.prePageChange.call(snapshot);\n    board.pages[board.currIndex].cleanNonCanvasElements();\n    board.pages[board.newPageIndex] = new Page(board.app, board.boardName, board.newPageIndex.toString());\n    if (snapshot.category === 'pageOp') {\n        board.pages[board.newPageIndex].setPayload(snapshot.data.payload);\n    }\n    insertAfter = insertAfter === undefined ? board.pageNames.length - 1 : insertAfter;\n    board.pageNames.splice(insertAfter + 1, 0, board.newPageIndex.toString());\n    if (!board.app.room.isReceivingBatchSnapshots) {\n        board.pages[board.newPageIndex].calcDrawOpQueue();\n        // board.pages[board.newPageIndex].refresh()\n        board.app.room.pageToRefresh = board.pages[board.newPageIndex];\n    }\n    //更新新页面index\n    board.currIndex = board.newPageIndex;\n    board.newPageIndex += 1;\n    board.app.opsManager.hooks.pageChange.call(snapshot);\n};\n/**\n * snapshot为引起gotoPage动作的快照，它可能来自于Board类快照\n */\nexport const gotoPage = (board, index, snapshot) => {\n    if (!board.pages.hasOwnProperty(index)) {\n        throw new Error('跳转至不存在的页面');\n    }\n    board.app.opsManager.hooks.prePageChange.call(snapshot);\n    board.pages[board.currIndex].cleanNonCanvasElements();\n    board.currIndex = Number(index);\n    board.app.opsManager.hooks.pageChange.call(snapshot);\n    if (!board.app.room.isReceivingBatchSnapshots) {\n        board.pages[index].calcDrawOpQueue();\n        // board.pages[index].refresh()\n        board.app.room.pageToRefresh = board.pages[index];\n    }\n};\n/**\n * snapshot为引起deletePage动作的快照，它可能来自于Board类快照\n */\nexport const deletePage = (board, index, snapshot) => {\n    if (!board.pages.hasOwnProperty(index)) {\n        if (LOG) {\n            console.error('白板-->', `删除页面:${index}, 但是页面不存在`);\n        }\n    }\n    else if (Object.keys(board.pages).length === 1) {\n        if (LOG) {\n            console.error('白板-->', `不能删除最后一页`);\n        }\n    }\n    else {\n        board.app.opsManager.hooks.prePageChange.call(snapshot);\n        board.pages[board.currIndex].cleanNonCanvasElements();\n        delete board.pages[index];\n        const indexInPageNames = board.pageNames.indexOf(index.toString());\n        if (indexInPageNames !== -1) {\n            board.pageNames.splice(indexInPageNames, 1);\n        }\n        let nextPageIndex = indexInPageNames;\n        if (indexInPageNames === board.pageNames.length) {\n            //被删除的是最后一页，跳到被删除页面的前一页\n            nextPageIndex = indexInPageNames - 1;\n        }\n        board.currIndex = Number(board.pageNames[nextPageIndex]);\n        board.app.opsManager.hooks.pageChange.call(snapshot);\n        if (!board.app.room.isReceivingBatchSnapshots) {\n            board.pages[board.currIndex].calcDrawOpQueue();\n            // board.pages[board.currIndex].refresh()\n            board.app.room.pageToRefresh = board.pages[board.currIndex];\n        }\n    }\n};\n","/**\n* 返回非null时，才需要更新本地视角\n* @param snapshot\n*/\nexport const getCameraBoundFromGlobalOp = (room, snapshot) => {\n    const camera = room.app.camera;\n    const vision = room.app.vision;\n    if (snapshot.data.type === 'camera-bound') {\n        camera.cameraBoundByUser[snapshot.uid] = snapshot.data.boundary;\n        if (vision.mode === 'freeObserver' && snapshot.uid === room.app.account) {\n            return snapshot.data.boundary;\n        }\n        else if (vision.mode === 'broadcaster' && snapshot.uid === room.app.account) {\n            return snapshot.data.boundary;\n        }\n        else if (vision.mode === 'follower' && snapshot.uid === vision.broadcaster) {\n            return snapshot.data.boundary;\n        }\n        else if (vision.mode === 'follower' && snapshot.uid === room.app.account) {\n            /**\n             * 本地窗口resize时，设置cameraBound调整canvas缩放值\n             */\n            return snapshot.data.boundary;\n        }\n    }\n    return null;\n};\n","// schema = { // 登录参数规则\n//     appKey: {\n//       type: 'string',\n//       isRequire: true\n//     },\n//     account: {\n//       type: 'string',\n//       isRequire: true\n//     },\n//     token: {\n//       type: 'string',\n//       isRequire: true\n//     },\n//     record: {\n//       type: 'boolean',\n//       defaultValue: false\n//     },\n//     channelName: {\n//       type: 'string|number',\n//       isRequire: true\n//     },\n//     platform: {\n//       type: 'string',\n//       isRequire: true,\n//       enum: PlatformArray\n//     }\n//   }\n// validate(schema)\n// ===>>\n// [{key, message}]\nexport default {\n    isUndefined(value) {\n        return typeof value === 'undefined';\n    },\n    isDOM(value) {\n        if (typeof HTMLElement === 'object') {\n            return value instanceof HTMLElement;\n        }\n        return value && typeof value === 'object' && value.nodeType === 1 && typeof value.nodeName === 'string';\n    },\n    isValidString(value) {\n        return Object.prototype.toString.call(value) === '[object String]';\n    },\n    isBoolean(value) {\n        return typeof value === 'boolean';\n    },\n    isFunction(value) {\n        return typeof value === 'function';\n    },\n    isNumber(value) {\n        return typeof value === 'number';\n    },\n    isValidArray(value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n    },\n    isValidHexColor(value) {\n        return /^#[0-9abcdef]{6}$/gi.test(value);\n    },\n    isObject(value) {\n        return typeof value === 'object';\n    },\n    isValidObject(value) {\n        if (typeof value !== 'object') {\n            return false;\n        }\n        value = Object.assign({}, value);\n        if (Object.keys && Object.keys(value).length === 0) {\n            return false;\n        }\n        try {\n            return JSON.stringify(value) !== '{}';\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    // 检查参数\n    // data 检查的对象，rule 对象键值规则，skipKey 需要跳过的键，resObj 通过检查的赋值对象\n    /* rule 例：\n    {\n      account: {\n        type: 'string', // dom string boolean function number string|number\n        isRequire: true\n      }\n     }\n     */\n    validate(position, data, ruleObj) {\n        let validateErrors = [];\n        Object.keys(ruleObj).map((key) => {\n            const rule = ruleObj[key];\n            let dataValue = data[key];\n            if (this.isUndefined(dataValue)) {\n                /**\n                 * 值空缺\n                 */\n                if (rule.isRequire) {\n                    validateErrors.push({\n                        key: key,\n                        message: `${key} is required`\n                    });\n                }\n            }\n            else {\n                /**\n                 * 检查类型\n                 */\n                switch (rule.type.toLowerCase()) {\n                    case 'dom':\n                        if (!this.isDOM(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected dom, but get other type`\n                            });\n                        }\n                        break;\n                    case 'string':\n                        if (!this.isValidString(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected string, but get other type`\n                            });\n                        }\n                        break;\n                    case 'boolean':\n                        if (!this.isBoolean(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected boolean, but get other type`\n                            });\n                        }\n                        break;\n                    case 'function':\n                        if (!this.isFunction(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected function, but get other type`\n                            });\n                        }\n                        break;\n                    case 'number':\n                        if (!this.isNumber(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected number, but get other type`\n                            });\n                        }\n                        break;\n                    case 'object':\n                        if (!this.isObject(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected object, but get other type`\n                            });\n                        }\n                        break;\n                    case 'array':\n                        if (!this.isValidArray(dataValue)) {\n                            validateErrors.push({\n                                key: key,\n                                message: `Expected array, but get other type`\n                            });\n                        }\n                        break;\n                    default:\n                        validateErrors.push({\n                            key: key,\n                            message: `${key}的类型未知: ${rule.type.toLowerCase()}`\n                        });\n                }\n                /**\n                 * 检查是否为枚举之一\n                 */\n                if (rule.enum && !rule.enum.includes(dataValue)) {\n                    validateErrors.push({\n                        key,\n                        message: `Expected ${key} to be one of ${JSON.stringify(rule.enum)}, but it is not`\n                    });\n                }\n            }\n        });\n        if (validateErrors.length > 0) {\n            console.error('白板-->', `${position}参数异常`);\n            console.error('白板-->', '错误信息：', validateErrors);\n            console.error('白板-->', '参数为：', data);\n        }\n        return validateErrors.length === 0;\n    }\n};\n","import EM from 'eventemitter3';\nconst globalHub = new EM();\nexport default globalHub;\n","import { Coord } from '../Model/Point';\nimport Debug from 'debug';\nimport logger from '../../debug';\n/**\n * 为什么每次开始都需要调用beginPath\n * https://codetheory.in/why-clearrect-might-not-be-clearing-canvas-pixels/\n */\nconst debug = Debug('DrawWorker/CanvasHelper');\nexport function setLineStyle(ctx) {\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n}\n/* eslint-disable camelcase */\nexport function setpixelated(context) {\n    if (context === null) {\n        return;\n    }\n    // context.translate(0.5, 0.5)\n    // context.lineWidth = .5;\n    context['imageSmoothingEnabled'] = false; /* standard */\n    context['mozImageSmoothingEnabled'] = false; /* Firefox */\n    context['oImageSmoothingEnabled'] = false; /* Opera */\n    context['webkitImageSmoothingEnabled'] = false; /* Safari */\n    context['msImageSmoothingEnabled'] = false; /* IE */\n    /* tslint:enable */\n}\n/**\n * 等比例缩放Canvas\n * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n * @param {ResizeCanvasOption} option 缩放比例\n * @private\n */\nexport function setCavansStyleSize(ctx, width, height) {\n    const cvs = ctx.canvas;\n    cvs.style.width = width + 'px';\n    cvs.style.height = height + 'px';\n}\n/**\n * 改变canvas的 width 和大小等等\n *\n * zhongkai: 将ctx内容拷贝到临时画布上，然后再将临时画布的内容拷贝回ctx上。这样做应该是比较低效的(todo)\n *\n * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n * @param {ResizeCanvasOption} option 缩放比例\n * @private\n */\nexport function setCanvasPropSize(ctx, option) {\n    const canvas = ctx.canvas;\n    let skip = false;\n    if (canvas.width == 0 || canvas.height == 0) {\n        skip = true;\n    }\n    const temp = document.createElement('canvas').getContext('2d');\n    if (!skip) {\n        temp.canvas.width = canvas.width;\n        temp.canvas.height = canvas.height;\n        setpixelated(temp);\n        setLineStyle(temp);\n        temp.drawImage(canvas, 0, 0, canvas.width, canvas.height);\n    }\n    canvas.width = option.width;\n    canvas.height = option.height;\n    // canvas.width = option.canvasWidth\n    // canvas.height = option.canvasHeight;\n    setLineStyle(ctx);\n    setpixelated(ctx);\n    if (!skip) {\n        setpixelated(temp);\n        ctx.drawImage(temp.canvas, 0, 0, canvas.width, canvas.height);\n    }\n}\nexport function applyCanvasLayout(canvas, { paddingLeft, paddingTop }) {\n    canvas.style.left = paddingLeft + 'px';\n    canvas.style.top = paddingTop + 'px';\n}\n/**\n   * 清除某个画板的内容\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @private\n   */\nexport function clearCtx(ctx) {\n    ctx.clearRect(-40, -40, ctx.canvas.width + 80, ctx.canvas.height + 80);\n}\n/**\n   * 绘制曲线\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {Coord} start 起始点\n   * @param {Coord} control 控制点\n   * @param {Coord} end 终止点\n   * @param {string} color 颜色\n   * @param {number} size 宽度，笔大小\n   * @private\n   */\nexport function free(ctx, start, control, end, color, size) {\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    ctx.beginPath();\n    // 用三个点画二次曲线，使笔迹光滑，降低锯齿感\n    if (start.x === end.x && start.y === end.y) {\n        // IE下使用quadraticCurveTo无法画点\n        ctx.lineTo(start.x, start.y);\n        //  rect(ctx, start, size / 4, size / 4, false, color)\n        return;\n    }\n    // ctx.beginPath()\n    ctx.moveTo(start.x, start.y);\n    ctx.quadraticCurveTo(control.x, control.y, end.x, end.y);\n    ctx.stroke();\n    debug('free');\n}\n/**\n   * 绘制直线\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {Coord} start 起始点\n   * @param {Coord} end 终止点\n   * @private\n   */\nexport function line(ctx, start, end, color) {\n    logger.log('line', arguments);\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    // ctx.save()\n    ctx.beginPath();\n    ctx.moveTo(start.x, start.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.stroke();\n    // ctx.closePath();\n    // ctx.restore()\n    debug('line');\n}\n/**\n   * 绘制矩形\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {Coord} start 起始点\n   * @param {number} w 宽度，单位px\n   * @param {number} h 高度，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function rect(ctx, start, w, h, fill = false, color) {\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fillRect(start.x, start.y, w, h);\n    }\n    else {\n        ctx.strokeRect(start.x, start.y, w, h);\n    }\n}\n/**\n   * 绘制圆角矩形\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} start 起始点\n   * @param {number} w 宽度，单位px\n   * @param {number} h 高度，单位px\n   * @param {*} radius 圆角半径，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function roundRect(ctx, start, w, h, radius, fill = false, color) {\n    const sx = start.x;\n    const sy = start.y;\n    const radiusX = w < 0 ? -radius : radius;\n    const radiusY = h < 0 ? -radius : radius;\n    ctx.beginPath();\n    ctx.moveTo(sx + radiusX, sy);\n    ctx.lineTo(sx + w - radiusX, sy);\n    ctx.quadraticCurveTo(sx + w, sy, sx + w, sy + radiusY);\n    ctx.lineTo(sx + w, sy + h - radiusY);\n    ctx.quadraticCurveTo(sx + w, sy + h, sx + w - radiusX, sy + h);\n    ctx.lineTo(sx + radiusX, sy + h);\n    ctx.quadraticCurveTo(sx, sy + h, sx, sy + h - radiusY);\n    ctx.lineTo(sx, sy + radiusY);\n    ctx.quadraticCurveTo(sx, sy, sx + radiusX, sy);\n    ctx.stroke();\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n}\n/**\n   * 绘制圆形\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} center 圆心\n   * @param {number} radius 半径，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function circle(ctx, center, radius, fill = false, color) {\n    // console.log('circle', center, radius, fill, color);\n    if (color) {\n        ctx.strokeStyle = color;\n    }\n    ctx.beginPath();\n    // arc(x,y,r,start,stop)\n    // ctx.arc(center.x, center.y, radius, 0, Math.PI * 2, true);\n    ctx.arc(center.x, center.y, radius, 0, Math.PI * 2);\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n    ctx.stroke();\n}\n/**\n   * 绘制椭圆\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} center 圆心\n   * @param {number} xRadius x半径，单位px\n   * @param {number} yRadius y半径，单位px\n   * @param {boolean} fill 是否填充\n   * @param {string} color 填充颜色\n   * @private\n   */\nexport function ellipse(ctx, center, xRadius, yRadius, fill = false, color) {\n    // console.log('ellipse', center, fill, color);\n    if (color) {\n        ctx.strokeStyle = color;\n    }\n    ctx.beginPath();\n    // arc(x,y,r,start,stop)\n    // ctx.arc(center.x, center.y, radius, 0, Math.PI * 2, true);\n    ctx.ellipse(center.x, center.y, xRadius, yRadius, 0, 0, Math.PI * 2);\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n    ctx.stroke();\n}\nfunction safeColorClamp(x) {\n    if (x < 0) {\n        return 0;\n    }\n    else if (x > 255) {\n        return 255;\n    }\n    else {\n        return x;\n    }\n}\n/**\n   * 为封闭区域填充颜色\n   * 算法是 flood fill（https://en.m.wikipedia.org/wiki/Flood_fill），找了个效率比较高的实现改成了js；也可能是scanline fill。\n   * TODO 为IE做Typed Array的polyfill\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {Coord} s 起始点\n   * @param {String} color 需要填充的颜色\n   * @param {Shape} shape 需要填充的颜色\n   * @private\n   */\nexport function fill(ctx, s, color, shape) {\n    const sx = Math.round(s.x);\n    const sy = Math.round(s.y);\n    ctx.save();\n    ctx.beginPath();\n    const img = ctx.getImageData(0, 0, Math.round(ctx.canvas.width), Math.round(ctx.canvas.height));\n    // logger.image(ctx.canvas.toDataURL(), 'fill, playground')\n    const { height: fullDisplayHeight, width: fullDisplayWidth } = img;\n    if (shape) {\n        shape.ctx.canvas.width = fullDisplayWidth;\n        shape.ctx.canvas.height = fullDisplayHeight;\n        setpixelated(shape.ctx);\n        setLineStyle(shape.ctx);\n    }\n    const X = 0;\n    const Y = 1;\n    const stroke = color || ctx.strokeStyle;\n    const r = parseInt(stroke.substr(1, 2), 16);\n    const g = parseInt(stroke.substr(3, 2), 16);\n    const b = parseInt(stroke.substr(5, 2), 16);\n    // >>> 0 运算转换为无符号32位整数\n    const fillColor = ((255 << 24) | (b << 16) | (g << 8) | r) >>> 0;\n    const start = [sx, sy];\n    // 临时空间，用来缓存填充区域的数据，然后注入到Shape里\n    let shapeImageData = shape.ctx.createImageData(fullDisplayWidth, fullDisplayHeight);\n    const shapeData = new Uint32Array(shapeImageData.data.buffer);\n    // buf8.set(img.data);\n    const data = new Uint32Array(img.data.buffer);\n    const startColor = data[sy * fullDisplayWidth + sx];\n    if (((startColor ^ fillColor) & 0xffffff) === 0) { // 颜色值相等\n        if (startColor >>> 24 === fillColor >>> 24) {\n            return;\n        }\n    }\n    const rgb = startColor & 0x00ffffff;\n    const r_start = (rgb & 0xff) >>> 0;\n    const g_start = (rgb & 0xff00) >>> 8;\n    const b_start = (rgb & 0xff0000) >>> 16;\n    const alpha_start = (startColor & 0xff000000) >>> 24;\n    // 色彩抖动范围\n    const R_MIN = safeColorClamp(r_start - 15);\n    const G_MIN = safeColorClamp(g_start - 15);\n    const B_MIN = safeColorClamp(b_start - 15);\n    const R_MAX = safeColorClamp(r_start + 15);\n    const G_MAX = safeColorClamp(g_start + 15);\n    const B_MAX = safeColorClamp(b_start + 15);\n    // 起点入队列\n    const queue = [start];\n    let curPixel;\n    const maxX = fullDisplayWidth - 1;\n    const maxY = fullDisplayHeight - 1;\n    // 比较颜色是否可以填充\n    function canFill(color) {\n        // return color === startColor\n        if (color === startColor) {\n            return true;\n        }\n        const alpha = (color & 0xff000000) >>> 24;\n        if (alpha_start < 10) { // 如果一开始的颜色是透明的，那么透明色是可以填充的\n            if (alpha === 0) {\n                return true;\n            }\n        }\n        const rgb = (color & 0x00ffffff) >>> 0;\n        const r = (rgb & 0xff) >>> 0;\n        const g = (rgb & 0xff00) >>> 8;\n        const b = (rgb & 0xff0000) >>> 16;\n        // 在颜色抖动范围内\n        if (r >= R_MIN && r <= R_MAX && g >= G_MIN && g <= G_MAX && b >= B_MIN && b <= B_MAX) {\n            // 如果颜色相同 ,且透明度变化在20内\n            if (Math.abs(alpha_start - alpha) < 10) {\n                return true;\n            }\n        }\n        return false;\n        // return color === startColor || (color & 0xff000000) >>> 0 < 0xff000000;\n    }\n    const seen = {};\n    let topLeft = new Coord(Math.round(fullDisplayWidth), Math.round(fullDisplayHeight));\n    let bottomRight = new Coord(0, 0);\n    const getImageDataIndex = (x, y) => y * fullDisplayWidth + x;\n    const getColor = (x, y) => data[getImageDataIndex(x, y)];\n    while ((curPixel = queue.pop())) {\n        const x = curPixel[X];\n        let y = curPixel[Y];\n        // 从当前点往上查找，\n        while (--y >= 0 && canFill(getColor(x, y))) { }\n        y++;\n        let reachLeft = false;\n        let reachRight = false;\n        while (y++ < maxY && canFill(getColor(x, y))) {\n            // 设置坐标点边界，好切出正确的大小\n            topLeft.topLeft(x, y);\n            bottomRight.bottomRight(x + 1, y + 1);\n            let imgDataIndex = getImageDataIndex(x, y); // curPixel[Y] * fullDisplayWidth + curPixel[X]\n            data[imgDataIndex] = fillColor;\n            shapeData[imgDataIndex] = fillColor;\n            seen[imgDataIndex] = true;\n            if (x > 0 && !seen[imgDataIndex - 1]) {\n                if (canFill(data[imgDataIndex - 1])) {\n                    if (!reachLeft) {\n                        queue.push([x - 1, y]);\n                        reachLeft = true;\n                    }\n                }\n                else if (reachLeft) {\n                    reachLeft = false;\n                }\n            }\n            if (x < maxX && !seen[imgDataIndex + 1]) {\n                if (canFill(data[imgDataIndex + 1])) {\n                    if (!reachRight) {\n                        if (!seen[imgDataIndex + 1]) {\n                            queue.push([x + 1, y]);\n                        }\n                        reachRight = true;\n                    }\n                }\n                else if (reachRight) {\n                    reachRight = false;\n                }\n            }\n        }\n    }\n    // img.data.set(buf8);\n    const finalArea = Coord.areaSize(topLeft, bottomRight);\n    logger.log('fill area is ', finalArea);\n    logger.log('fill corner is ', topLeft, bottomRight);\n    shape.corner = [topLeft, bottomRight];\n    shape.ctx.putImageData(shapeImageData, 0, 0);\n    let smallImageData = shape.ctx.getImageData(topLeft.x, topLeft.y, finalArea.width, finalArea.height);\n    logger.log(smallImageData);\n    shape.ctx.canvas.height = smallImageData.height;\n    shape.ctx.canvas.width = smallImageData.width;\n    setpixelated(shape.ctx);\n    setLineStyle(shape.ctx);\n    shape.ctx.putImageData(smallImageData, 0, 0);\n    console.log('shape:', shape.ctx.canvas.toDataURL());\n    clearCtx(ctx);\n    logger.image(ctx.canvas.toDataURL(), 'ctx.canvas');\n    logger.image(shape.ctx.canvas.toDataURL(), 'shape.ctx');\n    ctx.putImageData(img, 0, 0);\n    console.error(shape.ctx.canvas.toDataURL());\n    logger.image(ctx.canvas.toDataURL(), 'final');\n    shape.ctx.beginPath();\n    ctx.restore();\n}\n/**\n   * 绘制字\n   * @param {CanvasRenderingContext2D} ctx 目标Canvas的context\n   * @param {CanvasRenderingContext2D} start 起始点\n   * @param {string} text 文本内容\n   * @param {number} size 字体大小，单位px\n   * @param {boolean} fill 是否填充\n   * @private\n   */\nexport function text(ctx, start, text, size, fill = true, color) {\n    const x = start.x;\n    const y = start.y;\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    ctx.font = size + 'px \"微软雅黑\",Arial';\n    ctx.textBaseline = 'top';\n    // ctx.textBaseline = 'bottom';\n    ctx.textAlign = 'left';\n    if (fill) {\n        ctx.fillStyle = color;\n        ctx.fillText(text, x, y);\n    }\n    else {\n        ctx.strokeText(text, x, y);\n    }\n    ctx.beginPath();\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","import logger from \"../debug\";\nimport { WActions } from \"./Itypes\";\nimport { StartAction, MoveAction, EndAction, ClearAckAction, LaserPenAction, LaserPenEndAction, SyncAction, RevokeAction, SerialAction, ClearAction, RedoAction, FileAction, CalibrateAction, SyncRequestAction, SyncPrepareAction, SyncPrepareAckAction, TextAction, VersionAction } from \"./Actions\";\n/**\n *  在WebSocket里传输的是Command, 白板内使用的是Action\n */\n/**\n * 将Array<Action>转化为command字符串。command之间用分号连接\n *\n * @param anyActions\n */\nexport function packBulk(anyActions) {\n    let str = anyActions.map(anyAction => pack(anyAction)).join(';') + ';';\n    logger.m.syncmanager('packBulk anyAction', str);\n    return str;\n}\n/**\n * 将动作转化为字符串(command)\n *\n * 示例：\n * 输入： MoveAction(x=0.3, y=0.5)\n * 输出： “2:0.3, 0.5”\n *\n * @param anyAction\n * @param isP2P\n */\nexport function pack(anyAction, isP2P) {\n    logger.m.syncmanager('pack anyAction', anyAction);\n    console.assert(anyAction.action !== undefined, 'ooops');\n    let { action } = anyAction;\n    let str = action.toString();\n    return str;\n}\n/**\n * 将连续的command转换为Array<Action>\n *\n * @param data\n */\nexport function unpackBulk(data) {\n    var actions = [];\n    const ops = data.split(';');\n    ops.forEach(op => {\n        const action = unpack(op);\n        if (action) {\n            actions.push(action);\n        }\n    });\n    return actions;\n}\n/**\n * 将command转化为action。action是js对象，包含动作的各个属性值。\n *\n * 示例：\n * 输入： \"2:0.3,0.5\"\n * 输出： MoveAction(x=0.3, y=0.5)\n *\n * @param data\n */\nexport function unpack(data) {\n    if (!data) {\n        return;\n    }\n    const actionIndex = data.indexOf(':');\n    logger.m.syncmanager('unpack command ', data);\n    let action;\n    let valueStr;\n    /**\n     * +data将data转换为数值\n     * 若actionIndex == -1, 则该命令没有附加valueStr。\n     */\n    if (actionIndex == -1) {\n        action = +data;\n        valueStr = '';\n    }\n    else {\n        action = +(data.slice(0, actionIndex));\n        valueStr = data.slice(actionIndex + 1, data.length);\n    }\n    logger.command('unpack', data);\n    switch (action) {\n        case WActions.START:\n            return StartAction.fromString(valueStr);\n        case WActions.MOVE:\n            return MoveAction.fromString(valueStr);\n        case WActions.END:\n            return EndAction.fromString(valueStr);\n        case WActions.REVOKE:\n            return RevokeAction.fromString(valueStr);\n        case WActions.SERIAL:\n            return SerialAction.fromString(valueStr);\n        case WActions.CLEAR:\n            return ClearAction.fromString(valueStr);\n        case WActions.CLEAR_ACK:\n            return ClearAckAction.fromString(valueStr);\n        case WActions.LASER_PEN:\n            return LaserPenAction.fromString(valueStr);\n        case WActions.SYNC_REQUEST:\n            return SyncRequestAction.fromString(valueStr); // TODO\n        case WActions.SYNC:\n            return SyncAction.fromString(valueStr);\n        // return {\n        //   action: action,\n        //   sync: {\n        //     account: value[0],\n        //     dataMap: {},\n        //     all: value[1] as '0' | '1',\n        //     index: +value[2],\n        //     num: +value[3]\n        //   }\n        // }\n        case WActions.SYNC_PREPARE:\n            return SyncPrepareAction.fromString(valueStr);\n        case WActions.SYNC_PREPARE_ACK:\n            return SyncPrepareAckAction.fromString(valueStr);\n        case WActions.LASER_PEN_END:\n            return LaserPenEndAction.fromString(valueStr);\n        case WActions.FILE:\n            return FileAction.fromString(valueStr);\n        // return {\n        //   action: action,\n        //   file: {\n        //     docId: value[0] || '',\n        //     currentPage: value[1] || '',\n        //     pageCount: value[2] || '',\n        //     type: value[3] === '0' ? 'img' : (value[3] === '1' ? 'h5' : ''),\n        //     url: value[4] || '',\n        //     urlStr: value[5] || '',\n        //     h5Cmd: value[6] || ''\n        //   }\n        // }\n        case WActions.REDO:\n            return RedoAction.fromString(valueStr);\n        case WActions.CALIBRATE:\n            return CalibrateAction.fromString(valueStr);\n        case WActions.TEXT:\n            return TextAction.fromString(valueStr);\n        case WActions.VERSION:\n            return VersionAction.fromString(valueStr);\n        default:\n            const fullCaseChecker = action;\n    }\n}\n","const POINT_MATCHER = /\\(x:([.\\d]+),y:([.\\d]+)\\)/;\n// 点坐标，只能是相对位置的百分比\nclass Point {\n    constructor(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    destroy() {\n    }\n    clone() {\n        return new Point(this.x, this.y);\n    }\n    static fromString(str) {\n        let match = POINT_MATCHER.exec(str);\n        if (match) {\n            return new Point(+match[1], +match[2]);\n        }\n        else {\n            return new Point(0, 0);\n        }\n    }\n    toString() {\n        return `(x:${(this.x).toFixed(8)},y:${(this.y).toFixed(8)})`;\n    }\n    toCoord(width, height) {\n        return new Coord(this.x * width, this.y * height);\n    }\n    copy(point) {\n        this.x = point.x;\n        this.y = point.y;\n    }\n    minus(p) {\n        return new Point(this.x - p.x, this.y - p.y);\n    }\n    topLeft(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x < this.x) {\n                this.x = x;\n            }\n            if (y < this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Point) {\n            this.topLeft(x.x, x.y);\n        }\n        return this;\n    }\n    bottomRight(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x > this.x) {\n                this.x = x;\n            }\n            if (y > this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Point) {\n            this.bottomRight(x.x, x.y);\n        }\n        return this;\n    }\n    static middle(a, b) {\n        return new Point((a.x + b.x) / 2, (a.y + b.y) / 2);\n    }\n    static areaSize(a, b) {\n        return {\n            width: Math.ceil(Math.abs(a.x - b.x)),\n            height: Math.ceil(Math.abs(a.y - b.y)),\n        };\n    }\n    static clone({ x, y }) {\n        return new Point(x, y);\n    }\n}\nexport default Point;\nexport class Coord {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    destroy() {\n    }\n    clone() {\n        return new Coord(this.x, this.y);\n    }\n    static fromString(str, width, height) {\n        let match = POINT_MATCHER.exec(str);\n        if (match) {\n            return new Coord(Math.round(+match[1] * width), Math.round(+match[2] * height));\n        }\n        else {\n            return new Coord(0, 0);\n        }\n    }\n    toPoint(width, height) {\n        return new Point(this.x / width, this.y / height);\n    }\n    copy(point) {\n        this.x = point.x;\n        this.y = point.y;\n    }\n    minus(p) {\n        return new Coord(this.x - p.x, this.y - p.y);\n    }\n    topLeft(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x < this.x) {\n                this.x = x;\n            }\n            if (y < this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Coord) {\n            this.topLeft(x.x, x.y);\n        }\n        return this;\n    }\n    bottomRight(x, y) {\n        if (typeof x == 'number' && typeof y === 'number') {\n            if (x > this.x) {\n                this.x = x;\n            }\n            if (y > this.y) {\n                this.y = y;\n            }\n        }\n        else if (x instanceof Coord) {\n            this.bottomRight(x.x, x.y);\n        }\n        return this;\n    }\n    static middle(a, b) {\n        return new Coord((a.x + b.x) / 2, (a.y + b.y) / 2);\n    }\n    static areaSize(a, b) {\n        return {\n            width: Math.ceil(Math.abs(a.x - b.x)),\n            height: Math.ceil(Math.abs(a.y - b.y)),\n        };\n    }\n    static clone({ x, y }) {\n        return new Coord(x, y);\n    }\n}\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n","/**\n * page，board类操作都必须生成快照，然后通过connector的sendData方法发送给其他客户端。\n *\n * syncRequest，resetRequest这一类同步操作不需要生成快照。它们属于同步逻辑。\n */\nimport Container from \"./container\";\nimport OpsManager from \"./ops/OpsManager\";\nimport Dispatcher from \"./misc/dispatcher\";\nimport Room from \"./room\";\nimport DataHub from \"./dataHub\";\nimport { TouchPlatformArray, PlatformArray } from \"./types\";\nimport PreviewFactory from \"./previewFactory\";\nimport AppConfig from \"./config\";\nimport Camera from \"./camera\";\nimport validate from \"../util/validate\";\nimport Player from \"./player\";\nimport drawConfig from \"./ops/DrawOp/drawConfig\";\nimport Simulator from \"./simulator\";\nimport Vision from \"./camera/vision\";\nimport { showToast } from \"../component/toast\";\nimport { popupImageChooserAndAddImage, uploadAndAddImage } from \"./media/util\";\nimport isBase64 from 'is-base64';\nimport textConfig from \"./ops/TextOp/textConfig\";\nclass App {\n    constructor(opts) {\n        /**\n         * 是否是录像模式\n         */\n        this.isRecordPlayer = false;\n        /**\n         * 编辑权限是否开启\n         */\n        this.editEnabled = false;\n        /**\n         * 是否展示鼠标\n         */\n        this.showCursor = false;\n        /**\n         * 信令是否处于连接状态\n         */\n        this.isConnected = false;\n        this.account = opts.account;\n        this.nickname = opts.nickname ? opts.nickname : opts.account;\n        this.platform = opts.platform;\n        this.defaultCameraBound = opts.cameraBound;\n        this.disableAutoResize = opts.disableAutoResize !== undefined ? opts.disableAutoResize : true;\n        this.nim = opts.nim;\n        this.simulator = new Simulator(this);\n        this.configInstance = new AppConfig(this);\n        this.dispatcher = new Dispatcher();\n        this.opsManager = new OpsManager(this);\n        this.opsManager.extendDefaultOps();\n        this.dataHub = new DataHub(this, opts.connector);\n        this.container = new Container(this);\n        this.room = new Room(this, this.dataHub);\n        this.container.addOpsManager(this.opsManager);\n        this.opsManager.addContainer(this.container);\n        this.camera = new Camera(this, this.defaultCameraBound);\n        this.vision = new Vision(this);\n        this.isRecordPlayer = opts.isRecordPlayer ? true : false;\n        if (!opts.isRecordPlayer) {\n            this.previewFactory = new PreviewFactory(this);\n        }\n        if (opts.isRecordPlayer) {\n            this.player = new Player(this);\n        }\n        this.setContainer(opts.container);\n    }\n    get ifDeviceSupportOrientation() {\n        return TouchPlatformArray.includes(this.platform.toLowerCase());\n    }\n    /**\n     * 当编辑权限开启，且不处于同步时，才能够编辑\n     */\n    get editable() {\n        return this.editEnabled && !this.dataHub.isSynchronizing && this.isConnected;\n    }\n    get appConfig() {\n        return this.configInstance.getAppConfig();\n    }\n    getStrokeWidth() {\n        return drawConfig.strokeWidth;\n    }\n    getOpacity() {\n        return drawConfig.opacity;\n    }\n    getColor() {\n        return drawConfig.strokeColor;\n    }\n    getRedoCount() {\n        return this.opsManager.opMap['redo'].getCount();\n    }\n    getUndoCount() {\n        return this.opsManager.opMap['undo'].getCount();\n    }\n    isClearAvailable() {\n        return this.opsManager.opMap['clear'].isAvailable();\n    }\n    isTextAreaFocus() {\n        return this.opsManager.opMap['text'].isFocus;\n    }\n    getSelectedIds() {\n        return this.opsManager.opMap['select'].getSelectedIds();\n    }\n    getZoomFactor() {\n        return this.camera.zoomFactor;\n    }\n    getCameraBound() {\n        return this.camera.getContainerWorldRect();\n    }\n    setAppConfig(config) {\n        this.configInstance.setAppConfig(config);\n    }\n    setContainer(el) {\n        el.innerHTML = '';\n        this.container.appendTo(el);\n    }\n    /**\n     * sdk初始化之后，请求同步数据\n     *\n     * 主播登录后，首先尝试恢复数据。恢复数据后，向其他用户广播恢复的数据\n     * 主播登录需要置空所有其他用户\n     * 非主播登录则需要向主播发送同步请求\n     */\n    readyToSyncData() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.readyToSyncData');\n        }\n        document.body.style.cursor = 'auto';\n        this.dataHub.sendSyncRequest();\n    }\n    setIsConnected(connected) {\n        this.isConnected = connected;\n        if (!this.isConnected) {\n            document.body.style.cursor = 'auto';\n        }\n    }\n    resetState() {\n        this.room.reset();\n        this.dataHub.reset();\n    }\n    addImage(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addImage', opt);\n        }\n        validate.validate('drawPlugin.addImage', opt, {\n            url: {\n                type: 'string',\n                isRequire: true\n            },\n            width: {\n                type: 'number'\n            },\n            height: {\n                type: 'number'\n            }\n        });\n        if (isBase64(opt.url) || isBase64(opt.url, { allowMime: true })) {\n            /**\n             * 先将base64图片上传到nos服务器，再加入白板中\n             */\n            uploadAndAddImage(this, { dataURL: opt.url }, { width: opt.width, height: opt.height });\n        }\n        else if (opt.url.length > 10000) {\n            console.error('白板-->', 'drawPlugin.addImage opt.url长度不应该大于10000');\n        }\n        else {\n            this.emit('op:image:upload', opt.url, {\n                width: opt.width,\n                height: opt.height\n            });\n        }\n    }\n    /**\n     * 选择本地图片\n     */\n    addLocalImage(opt = {}) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addLocalImage', opt);\n        }\n        validate.validate('drawPlugin.addLocalImage', opt, {\n            width: {\n                type: 'number'\n            },\n            height: {\n                type: 'number'\n            }\n        });\n        popupImageChooserAndAddImage(this, { width: opt.width, height: opt.height });\n    }\n    addVideo(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addVideo', opt);\n        }\n        validate.validate('drawPlugin.addVideo', opt, {\n            url: {\n                type: 'string',\n                isRequire: true\n            },\n            width: {\n                type: 'number'\n            }\n        });\n        this.emit('op:video:insert', opt.url, {\n            width: opt.width\n        });\n    }\n    /**\n     * 设置页面的背景\n     * @param url\n     * @param width\n     * @param height\n     */\n    setPageBackground(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setPageBackground', opt);\n        }\n        validate.validate('drawPlugin.setPageBackground', opt, {\n            url: {\n                type: 'string',\n                isRequire: true\n            },\n            width: {\n                type: 'number',\n                isRequire: true\n            },\n            height: {\n                type: 'number',\n                isRequire: true\n            }\n        });\n        this.emit('op:background:imageUpload', opt.url, {\n            width: opt.width,\n            height: opt.height,\n            pageIndex: opt.pageIndex\n        });\n    }\n    /**\n     * 当前页面是否有background\n     */\n    hasBackground() {\n        return this.room.currBoard.currPage.backgroundSnapshot ? true : false;\n    }\n    /**\n     * 添加文档\n     */\n    addDoc(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addDoc', opt);\n        }\n        validate.validate('drawPlugin.addDoc', opt, {\n            docName: {\n                type: 'string',\n                isRequire: true\n            },\n            params: {\n                type: 'array',\n                isRequire: true\n            }\n        });\n        for (let i = 0; i < opt.params.length; i++) {\n            validate.validate(`drawPlugin.addDoc opt.params[${i}]`, opt.params[i], {\n                url: {\n                    type: 'string',\n                    isRequire: true\n                },\n                width: {\n                    type: 'number',\n                    isRequire: true\n                },\n                height: {\n                    type: 'number',\n                    isRequire: true\n                }\n            });\n        }\n        if (opt.params.length === 0) {\n            throw new Error('addDoc参数中params的数组长度必须大于0');\n        }\n        const { docName, params } = opt;\n        const count = Object.keys(this.room.boards).filter(name => {\n            return name.startsWith(docName);\n        }).length;\n        if (count === 0) {\n            this.addBoard(docName, params.length);\n        }\n        else {\n            this.addBoard(docName + '-' + count, params.length);\n        }\n        for (let i = 0; i < params.length; i++) {\n            this.setPageBackground({\n                url: params[i].url,\n                width: params[i].width,\n                height: params[i].height,\n                pageIndex: i\n            });\n        }\n    }\n    setTool(toolName) {\n        this.emit(`op:${toolName}:activate`);\n    }\n    setFontsize(fontsize) {\n        this.emit('op:text:fontsize', fontsize);\n    }\n    setFontFamily(opt) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setFontFamily', JSON.stringify(opt));\n        }\n        if (!opt.fontFace && !opt.fontFamily) {\n            return console.error('白板--> drawPlugin.setFontFamily必须提供fontFamily或者fontFace');\n        }\n        if (opt.fontFace && Array.isArray(opt.fontFace) && opt.fontFace.length === 0) {\n            return console.error('白板--> setFontFamily。你设置了fontFace为数组, 但是数组长度为0');\n        }\n        if (opt.fontFamily && LOG) {\n            console.log(`白板--> 设置字体为: ${opt.fontFamily}, 您提供的字体应该在各个设备中均可用。如果某些设备中字体不可用，请同时设置opt.fontFace，作为字体的下载地址`);\n        }\n        if (opt.fontFace && LOG) {\n            console.log(`你设置了fontFace, 请保证该URL能被您用户的设备访问, 可以通过在web端检查浏览器的Network->font检测字体是否被下载`);\n        }\n        if (opt.fontFamily) {\n            textConfig.setFontFamily(opt.fontFamily);\n        }\n        if (opt.fontFace && Array.isArray(opt.fontFace)) {\n            textConfig.setFontFace(opt.fontFace);\n        }\n        else if (opt.fontFace) {\n            textConfig.setFontFace([opt.fontFace]);\n        }\n        /**\n         * 更新已实例化的textArea，pre元素的fontfamily\n         */\n        this.opsManager.opMap['text'].updateFontFamily();\n    }\n    setColor(color) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setColor', color);\n        }\n        drawConfig.setStrokeColor(color);\n        this.emit('event:appState:change', 'renderColor', color);\n    }\n    setShapeFill() {\n        console.error('setShapeFill已弃用。如果你需要设置图形填充，可以直接设置tool为rect-fill, 或者ellipse-fill');\n    }\n    setStrokeWidth(width) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setStrokeWidth', width);\n        }\n        drawConfig.setStrokeWidth(width);\n        this.emit('event:appState:change', 'renderWidth', width);\n    }\n    setOpacity(opacity) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setOpacity', opacity);\n        }\n        if (opacity > 1 || opacity < 0) {\n            return console.error('drawPlugin.setOpacity的透明度必须大于0，小于等于1');\n        }\n        drawConfig.setOpacity(opacity);\n        this.emit('event:appState:change', 'opacity', opacity);\n    }\n    setShowCursor(value) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setShowCursor', value);\n        }\n        this.showCursor = value;\n    }\n    enableDraw(editEnabled) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.enableDraw', editEnabled);\n        }\n        validate.validate('drawPlugin.enableDraw', { editEnabled }, {\n            editEnabled: {\n                type: 'boolean',\n                isRequire: true\n            }\n        });\n        if (this.editEnabled === editEnabled) {\n            return;\n        }\n        /**\n         * 不可编辑时，鼠标样式需要还原\n         */\n        if (!editEnabled) {\n            document.body.style.cursor = 'auto';\n        }\n        this.editEnabled = editEnabled;\n        this.opsManager.hooks.enableDrawChange.call(editEnabled);\n        this.emit('event:editable:change', this.editable);\n    }\n    enableCameraTransform(enable = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.enableCameraTransform', enable);\n        }\n        this.setAppConfig({\n            cameraTransformEnabled: enable\n        });\n    }\n    resetCamera(animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.resetCamera');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:reset-camera:exec', animate);\n        }\n    }\n    setCameraBound(boundary, animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setCameraBound boundary: ', boundary, 'animate: ', animate);\n        }\n        const valid = validate.validate('drawPlugin.setCameraBound', boundary, {\n            centerX: {\n                type: 'number',\n                isRequire: true\n            },\n            centerY: {\n                type: 'number',\n                isRequire: true\n            },\n            width: {\n                type: 'number',\n                isRequire: true\n            },\n            height: {\n                type: 'number',\n                isRequire: true\n            }\n        });\n        if (valid) {\n            this.emit('op:camera-bound:send', boundary, animate);\n        }\n    }\n    fitToContent(animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.fitToContent');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:fit-to-content:exec', animate);\n        }\n    }\n    fitToDoc(animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.fitToDoc');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:fit-to-doc:exec', animate);\n        }\n    }\n    zoomIn() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.zoomIn');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:zoom:in');\n        }\n    }\n    zoomOut() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.zoomOut');\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:zoom:out');\n        }\n    }\n    zoomTo(scale, animate = true) {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.zoomTo: ', scale, ' animate: ', animate);\n        }\n        if (this.vision.mode === 'follower') {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n        }\n        else {\n            this.emit('op:zoom:to', scale, animate);\n        }\n    }\n    undo() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.undo');\n        }\n        this.emit('op:undo:exec');\n    }\n    redo() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.redo');\n        }\n        this.emit('op:redo:exec');\n    }\n    clear() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.clear');\n        }\n        this.emit('op:clear:exec');\n    }\n    duplicate() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.duplicate');\n        }\n        this.emit('op:duplicate:exec');\n    }\n    /**\n     * 删除白板中选中的元素\n     */\n    deleteSelectedElements() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.deleteSelectedElements');\n        }\n        this.emit('op:delete:exec');\n    }\n    addPage(opt) {\n        if (LOG && typeof opt === 'object') {\n            console.log('白板-->', 'drawPlugin.addPage', JSON.stringify(opt));\n        }\n        else if (LOG) {\n            console.log('白板-->', 'drawPlugin.addPage, insertAfter', opt);\n        }\n        if (typeof opt === 'number') {\n            opt = {\n                insertAfter: opt\n            };\n        }\n        else if (!opt) {\n            opt = {};\n        }\n        this.emit('op:page:add', opt);\n    }\n    deletePage(index) {\n        const board = this.room.currBoard;\n        const builtInIndex = board.getPageBuiltInIndex(index);\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.deletePage: ', index, 'builtInIndex', builtInIndex);\n        }\n        this.emit('op:page:delete', builtInIndex);\n    }\n    gotoPage(index) {\n        const board = this.room.currBoard;\n        const builtInIndex = board.getPageBuiltInIndex(index);\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoPage: ', index, 'buildInIndex', builtInIndex);\n        }\n        if (isNaN(builtInIndex)) {\n            console.error(`白板--> 第${index + 1}不存在，当前文档内的页面总数为: ${this.room.currBoard.pageNames.length}`);\n        }\n        else {\n            this.emit('op:page:goto', builtInIndex);\n        }\n    }\n    gotoFirstPage() {\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex > 0) {\n            this.gotoPage(0);\n        }\n    }\n    gotoPrevPage() {\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex > 0) {\n            this.gotoPage(currPageIndex - 1);\n        }\n    }\n    gotoNextPage() {\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex < board.pageNames.length - 1) {\n            this.gotoPage(currPageIndex + 1);\n        }\n    }\n    gotoLastPage() {\n        const board = this.room.currBoard;\n        const currPageIndex = board.getCurrPageIndex();\n        if (currPageIndex < board.pageNames.length - 1) {\n            this.gotoPage(board.pageNames.length - 1);\n        }\n    }\n    gotoBoard(boardName) {\n        validate.validate('drawPlugin.gotoBoard', { boardName }, {\n            boardName: {\n                type: 'string',\n                isRequire: true\n            }\n        });\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.gotoBoard:', boardName);\n        }\n        this.emit('op:board:goto', boardName);\n    }\n    addBoard(boardName, pageCount) {\n        validate.validate('drawPlugin.addBoard', { boardName }, {\n            boardName: {\n                type: 'string',\n                isRequire: true\n            }\n        });\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.addBoard, boardName:', boardName, ' pageCount:', pageCount);\n        }\n        this.emit('op:board:add', boardName, pageCount);\n    }\n    deleteBoard(boardName) {\n        validate.validate('drawPlugin.deleteBoard', { boardName }, {\n            boardName: {\n                type: 'string',\n                isRequire: true\n            }\n        });\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.deleteBoard: ', boardName);\n        }\n        this.emit('op:board:delete', boardName);\n    }\n    getPageInfos() {\n        return {\n            pageNames: this.opsManager.currBoard.pageNames.slice(),\n            currPage: this.opsManager.currBoard.currIndex,\n            activeIndex: this.opsManager.currBoard.getCurrPageIndex(),\n            pagePayloads: this.opsManager.currBoard.payloadOfPages\n        };\n    }\n    getBoardInfos() {\n        return {\n            boardNames: Object.keys(this.room.boards),\n            currBoard: this.room.currIndex,\n            currBoardDisplayName: this.room.currBoard.displayName,\n            boardDisplayNames: this.room.getBoardDisplayNames()\n        };\n    }\n    bindPreviewContainer(opts) {\n        var _a;\n        (_a = this.previewFactory) === null || _a === void 0 ? void 0 : _a.bindPreviewContainer(opts);\n    }\n    /**\n     * 开发者调用app.emit向内部模块发送事件\n     * @param rest\n     */\n    emit(events, ...args) {\n        this.dispatcher.emit(events, ...args);\n    }\n    /**\n     * 开发者调用app.on监听内部模块派发的事件\n     */\n    on(event, fn) {\n        this.dispatcher.on(event, fn);\n    }\n    /**\n     * 开发者调用app.on监听内部模块派发的事件\n     */\n    off(event, fn) {\n        this.dispatcher.off(event, fn);\n    }\n    getOpDoc(type) {\n        return this.opsManager.getOpDoc(type);\n    }\n    getCurrTool() {\n        var _a;\n        return (_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type;\n    }\n    /**\n     * 销毁各类事件监听，否则可能会造成内存泄漏\n     */\n    destroy() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.destroy');\n        }\n        this.dispatcher.destroy();\n        this.container.destroy();\n        document.body.style.cursor = 'auto';\n    }\n    addRecordData(records) {\n        var _a;\n        (_a = this.player) === null || _a === void 0 ? void 0 : _a.addRecordData(records);\n    }\n    seekTo(time) {\n        var _a;\n        (_a = this.player) === null || _a === void 0 ? void 0 : _a.seekTo(time);\n    }\n    /**\n     * 录像回放时，切换观看者的视角\n     * @param viewer\n     */\n    setViewer(viewer) {\n        var _a;\n        (_a = this.player) === null || _a === void 0 ? void 0 : _a.setViewer(viewer);\n    }\n    setSelfAsBroadcaster() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setSelfAsBroadcaster');\n        }\n        this.vision.setSelfAsBroadcaster();\n    }\n    /**\n     * 停止设置自己为广播者\n     */\n    unsetSelfAsBroadcaster() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.unsetSelfAsBroadcaster');\n        }\n        this.vision.unsetSelfAsBroadcaster();\n    }\n    /**\n     * 设置当前用户为跟随者，只有房间状态存在broadcaster时才可用\n     * 设置的目的是为了回放时接收到此数据，然后正确的还原用户当时的视角\n     */\n    setSelfAsFollower() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setSelfAsFollower');\n        }\n        this.vision.setSelfAsFollower();\n    }\n    /**\n     * 设置自己为自由视角。通过setSelfAsFollower可以重新设置为跟随者\n     */\n    setSelfAsFreeObserver() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.setSelfAsFreeObserver');\n        }\n        this.vision.setSelfAsFreeObserver();\n    }\n    exportAsImage() {\n        if (LOG) {\n            console.log('白板-->', 'drawPlugin.exportAsImage');\n        }\n        //导出图片\n        const data = this.previewFactory.generatePreviewToDataUrl({\n            pageIndex: this.room.currBoard.currIndex.toString(),\n            boardName: this.room.currIndex,\n            state: 'ready'\n        });\n        var a = document.createElement(\"a\"); //Create <a>\n        a.href = data;\n        let boardName = this.room.currBoard.boardName === 'whiteboard' ? '白板' : this.room.currBoard.boardName;\n        let pageName = this.room.currBoard.currPage.pageIndex;\n        let pageIndex = this.room.currBoard.pageNames.indexOf(pageName);\n        a.download = `${boardName}-${pageIndex + 1}.png`; //File name Here\n        a.click(); //Downloaded file\n    }\n    /**\n     * 从白板服务器得到userList，并通过事件传递给外部。\n     * 外部可以根据此事件做出响应\n     */\n    setMemberList(userList) {\n        this.emit('event:member:change', userList.slice());\n    }\n}\nconst DrawPlugin = ({\n    getInstance: function (opt) {\n        if (LOG) {\n            console.log('白板-->', 'DrawPlugin.getInstance arguments:', opt);\n        }\n        validate.validate('DrawPlugin.instance', opt, {\n            account: {\n                type: 'string',\n                isRequire: true\n            },\n            nickname: {\n                type: 'string',\n                isRequire: false\n            },\n            container: {\n                type: 'dom',\n                isRequire: true\n            },\n            platform: {\n                type: 'string',\n                isRequire: true,\n                enum: PlatformArray\n            },\n            connector: {\n                type: 'object',\n                isRequire: true\n            },\n            nim: {\n                type: 'object',\n                isRequire: true\n            }\n        });\n        const app = new App(opt);\n        return app;\n    }\n});\nexport { App };\nexport default DrawPlugin;\n","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","/**\n * OpsManager将UI组件中的动作，canvas中的鼠标动作，键盘动作等等路由给对应的操作处理。\n *\n * 同时它还保存了当前Page的操作快照集合。\n */\nimport { cameraSnapshotTypes } from \"./types\";\nimport { SyncBailHook, SyncHook } from \"tapable\";\nimport PenOp from \"./DrawOp/PenOp\";\nimport LineOp from \"./DrawOp/LineOp\";\nimport SelectOp from \"./SelectOp\";\nimport MoveOp from \"./EditOp/MoveOp\";\nimport ScaleOp from \"./EditOp/ScaleOp\";\nimport DeleteOp from \"./EditOp/DeleteOp\";\nimport UndoOp from \"./HistoryOp/UndoOp\";\nimport RedoOp from \"./HistoryOp/RedoOp\";\nimport ClearOp from \"./ClearOp\";\nimport EraserOp from \"./EraserOp\";\nimport RectOp from \"./DrawOp/RectOp\";\nimport EllipseOp from \"./DrawOp/EllipseOp\";\nimport TextOp from \"./TextOp\";\nimport PageOp from \"./PageOp\";\nimport ImageOp from \"./ImageOp\";\nimport BoardOp from \"./BoardOp\";\nimport DuplicateOp from \"./EditOp/DupliateOp\";\nimport PenArrowOp from \"./DrawOp/PenArrowOp\";\nimport LineArrowOp from \"./DrawOp/LineArrowOp\";\nimport ElementEraserOp from \"./EraserOp/ElementEraserOp\";\nimport LaserOp from \"./LaserOp\";\nimport LockOp from './LockOp';\nimport BackgroundOp from \"./ImageOp/BackgroundOp\";\nimport PanOp from \"./CameraOp/PanOp\";\nimport ZoomOp from \"./CameraOp/ZoomOp\";\nimport ResetCameraOp from \"./CameraOp/ResetCameraOp\";\nimport MousePointerOp from \"./MousePointerOp\";\nimport ResizeCameraOp from \"./CameraOp/ResizeOp\";\nimport FitToContentOp from \"./CameraOp/FitToContent\";\nimport FitToDocOp from \"./CameraOp/FitToDoc\";\nimport CameraBoundOp from \"./CameraOp/CameraBoundOp\";\nimport RectFillOp from \"./DrawOp/RectFillOp\";\nimport EllipseFillOp from \"./DrawOp/EllipseFillOp\";\nimport VideoOp from \"./VideoOp\";\nclass OpsManager {\n    constructor(app) {\n        this.currOp = null;\n        this.opMap = {};\n        this.drawOpTypes = [];\n        this.app = app;\n        this.dispatcher = app.dispatcher;\n        /**\n         * ***********************侵入生命周期函数************************\n         *\n         * 目前可以侵入mousedown, mousemove, mouseup等函数。\n         * 钩子设置方式可以查看EditOp/MoveOp.ts\n         *\n         * 如果操作只在激活时监听鼠标动作，则不需要侵入生命周期函数。鼠标动作默认调用被激活操作（currOp）的鼠标处理函数。\n         * 如果非激活操作需要处理鼠标动作，比如移动操作，则需要添加hooks\n         *\n         * 当指定的处理函数返回任何值时，鼠标处理函数不再处理别的bailHook，并且不再处理激活操作的鼠标处理函数。\n         *\n         * **************************************************************\n         */\n        this.hooks = {\n            mousedown: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mouseup: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mousemove: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mouseleave: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            mousewheel: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            resize: new SyncBailHook(['event', 'width', 'height']),\n            click: new SyncBailHook(['event', 'mx', 'my', 'clientX', 'clientY']),\n            keyup: new SyncBailHook(['event']),\n            keydown: new SyncBailHook(['event']),\n            /**\n             * 添加操作时触发\n             */\n            addOpHook: new SyncHook(['snapshot', 'isNew']),\n            refresh: new SyncHook([]),\n            /**\n             * Op类型改变时触发\n             */\n            opChange: new SyncHook(['type']),\n            selectChange: new SyncHook(['prevSelectedOpIds', 'selectedOpIds']),\n            /**\n             * 页面信息变化时触发\n             */\n            prePageChange: new SyncHook(['snapshot']),\n            pageChange: new SyncHook(['snapshot']),\n            boardChange: new SyncHook([]),\n            /**\n             * 页面中资源加载完毕时触发\n             */\n            pageReady: new SyncHook(['boardName, pageIndex']),\n            /**\n             * enableDraw\n             */\n            enableDrawChange: new SyncHook(['enable'])\n        };\n    }\n    extendDefaultOps() {\n        this.extendOp(MousePointerOp);\n        this.extendDrawOp(PenOp);\n        this.extendDrawOp(PenArrowOp);\n        this.extendDrawOp(LineArrowOp);\n        this.extendDrawOp(LineOp);\n        this.extendDrawOp(RectOp);\n        this.extendDrawOp(RectFillOp);\n        this.extendDrawOp(EllipseFillOp);\n        this.extendDrawOp(EllipseOp);\n        this.extendOp(TextOp);\n        /** Laser的opChange函数应该在select之前处理 */\n        this.extendOp(LaserOp);\n        this.extendOp(SelectOp);\n        this.extendOp(ScaleOp);\n        this.extendOp(MoveOp);\n        this.extendOp(DeleteOp);\n        this.extendOp(DuplicateOp);\n        this.extendOp(UndoOp);\n        this.extendOp(RedoOp);\n        this.extendOp(ClearOp);\n        this.extendOp(EraserOp);\n        this.extendOp(ElementEraserOp);\n        this.extendOp(PageOp);\n        this.extendOp(BoardOp);\n        this.extendOp(ImageOp);\n        this.extendOp(VideoOp);\n        this.extendOp(BackgroundOp);\n        this.extendOp(LockOp);\n        this.extendOp(PanOp);\n        this.extendOp(ZoomOp);\n        this.extendOp(ResetCameraOp);\n        this.extendOp(ResizeCameraOp);\n        this.extendOp(CameraBoundOp);\n        this.extendOp(FitToContentOp);\n        this.extendOp(FitToDocOp);\n        this.setCurrOp('pen');\n    }\n    get currPage() {\n        return this.currBoard.pages[this.currBoard.currIndex];\n    }\n    get currBoard() {\n        return this.app.room.boards[this.app.room.currIndex];\n    }\n    get drawOpsOfPage() {\n        return this.currPage.drawOpQueue || {};\n    }\n    addContainer(container) {\n        this.container = container;\n    }\n    extendDrawOp(OpConstructor) {\n        const op = this.extendOp(OpConstructor);\n        this.drawOpTypes.push(op.type);\n    }\n    /**\n     * 注册Op。\n     *\n     * OpConstructor的类型应该为Operation Constructor。但是typescript设置为Operation Constrctor之后，印象中会有些奇怪的地方。\n     * 因此，这里用any定义，然后创建之后转为Operation类型。\n     *\n     */\n    extendOp(OpConstructor) {\n        var _a, _b;\n        const op = (new OpConstructor(this.app));\n        this.opMap[op.type] = op;\n        /**\n         * ***********************注册监听事件****************************\n         *\n         * 比如eventsToListen中返回事件key为pen:color, 会在app上注册op:pen:color事件。\n         * 用户通过app.on('op:pen:color', color)设置线段颜色。\n         *\n         * activate和exec是特殊事件。activate若设置为true，会在app上注册op:${type}:activate事件，\n         * 用户发送该事件会使此工具处于激活状态。比如可以设置当前操作为涂鸦。\n         *\n         * exec若设置为true，会在app上注册op:${type}:exec事件，\n         * 用户发送该事件会调用此操作的execCommand方法。通过发送该事件可以执行命令，如撤销，重做。\n         *\n         * **************************************************************\n         */\n        const eventsToListen = op.eventsToListen();\n        if (((_a = eventsToListen.activate) === null || _a === void 0 ? void 0 : _a.value) && ((_b = eventsToListen.exec) === null || _b === void 0 ? void 0 : _b.value)) {\n            throw new Error('DEV--> 操作不能同时设置activate和exec为true。操作不同同时为命令类操作，及状态类操作');\n        }\n        else if (eventsToListen.activate && eventsToListen.activate.value) {\n            this.dispatcher.on(`op:${op.type}:activate`, () => {\n                const isOpSet = this.setCurrOp(op.type);\n                if (isOpSet) {\n                    this.currOp.afterActivate();\n                }\n            });\n        }\n        else if (eventsToListen.exec && eventsToListen.exec.value) {\n            this.dispatcher.on(`op:${op.type}:exec`, op.execCommand.bind(op));\n        }\n        for (let key in eventsToListen) {\n            if (key !== 'activate' && key !== 'exec') {\n                this.dispatcher.on(`op:${key}`, eventsToListen[key].value);\n            }\n        }\n        return op;\n    }\n    getOpDoc(type) {\n        let strArr = [];\n        if (type !== undefined) {\n            strArr = this._getOpDoc(type);\n        }\n        else {\n            for (let type in this.opMap) {\n                strArr = strArr.concat(this._getOpDoc(type));\n                strArr.push('*************************************');\n            }\n            strArr.push(\"全局事件\\n\\n\" +\n                \"用法：app.on('event:add:snapshot', (data: {local: boolean, snapshot: IOPSnapshot}) => {})\\n\" +\n                \"作用： 接收到新的快照时发送此事件\\n\");\n            strArr.push('*************************************');\n        }\n        return strArr.join('\\n\\n');\n    }\n    /**\n     * 获取op和外界的接口。包括从外界接收的消息，以及发送给外界的消息两部分\n     * @param type\n     */\n    _getOpDoc(type) {\n        const strArr = [];\n        if (!this.opMap.hasOwnProperty(type)) {\n            console.log('DEV-->', `op:${type}不存在!!!!!!`);\n        }\n        else {\n            const op = this.opMap[type];\n            if (op.description) {\n                strArr.push(op.description);\n            }\n            const eventsToListen = op.eventsToListen();\n            for (const key in eventsToListen) {\n                const info = eventsToListen[key].information;\n                let event = `op:${key}`;\n                if (key === 'activate' || key === 'exec') {\n                    event = `op:${op.type}:${key}`;\n                }\n                strArr.push(`用法：app.emit('${event}'${info.args.length > 0 ? ', ' + info.args : ''})\\n作用：${info.message}`);\n            }\n        }\n        return strArr;\n    }\n    setCurrOp(type) {\n        var _a;\n        if (LOG) {\n            console.log('白板-->', `设置当前op为：${type}`);\n        }\n        if (((_a = this.currOp) === null || _a === void 0 ? void 0 : _a.type) !== type) {\n            document.body.style.cursor = 'default';\n            this.hooks.opChange.call(type);\n            this.currOp = this.opMap[type];\n            this.app.emit('event:appState:change', 'currTool', type);\n            return true;\n        }\n        return false;\n    }\n    currOpIsCamera() {\n        var _a;\n        return this.currOp && cameraSnapshotTypes.indexOf((_a = this.currOp) === null || _a === void 0 ? void 0 : _a.type) !== -1;\n    }\n    resize(event, width, height) {\n        // if (!this.app.editable && !this.currOpIsCamera()) return\n        const bailed = this.hooks.resize.call(event, width, height);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleResize' in this.currOp) {\n            this.currOp.handleResize(event, width, height);\n        }\n    }\n    mousedown(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mousedown.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseDown' in this.currOp) {\n            this.currOp.handleMouseDown(event, mx, my, clientX, clientY);\n        }\n    }\n    mouseup(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mouseup.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseUp' in this.currOp) {\n            this.currOp.handleMouseUp(event, mx, my, clientX, clientY);\n        }\n    }\n    mouseleave(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mouseleave.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseLeave' in this.currOp) {\n            this.currOp.handleMouseLeave(event, mx, my, clientX, clientY);\n        }\n    }\n    mousewheel(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mousewheel.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseWheel' in this.currOp) {\n            this.currOp.handleMouseWheel(event, mx, my, clientX, clientY);\n        }\n    }\n    mousemove(event, mx, my, clientX, clientY) {\n        if (!this.app.editable && !this.currOpIsCamera())\n            return;\n        const bailed = this.hooks.mousemove.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleMouseMove' in this.currOp) {\n            this.currOp.handleMouseMove(event, mx, my, clientX, clientY);\n        }\n    }\n    click(event, mx, my, clientX, clientY) {\n        if (!this.app.editable)\n            return;\n        const bailed = this.hooks.click.call(event, mx, my, clientX, clientY);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleClick' in this.currOp) {\n            this.currOp.handleClick(event, mx, my, clientX, clientY);\n        }\n    }\n    keyup(event) {\n        if (!this.app.editable)\n            return;\n        const bailed = this.hooks.keyup.call(event);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleKeyUp' in this.currOp) {\n            this.currOp.handleKeyUp(event);\n        }\n    }\n    keydown(event) {\n        if (!this.app.editable)\n            return;\n        const bailed = this.hooks.keydown.call(event);\n        if (bailed)\n            return;\n        if (this.currOp && 'handleKeyDown' in this.currOp) {\n            this.currOp.handleKeyDown(event);\n        }\n    }\n    draw(snapshot, ctx, opts) {\n        try {\n            const type = snapshot.data.type;\n            if (this.opMap[type]) {\n                this.opMap[type].draw(snapshot, ctx, opts);\n            }\n        }\n        catch (err) {\n            console.error('opsManager.draw error', err);\n        }\n    }\n    preview(snapshot, ctx, opts) {\n        try {\n            const type = snapshot.data.type;\n            this.opMap[type].preview(snapshot, ctx, opts);\n        }\n        catch (err) {\n            console.error('opsManager.preview error', err);\n        }\n    }\n    hide(snapshot, ctx, div) {\n        try {\n            const type = snapshot.data.type;\n            if (this.opMap[type]) {\n                this.opMap[type].hide(snapshot, ctx, div);\n            }\n        }\n        catch (err) {\n            console.error('opsManager.hide error', err);\n        }\n    }\n    /**\n     * 将快照及它的一部分合并\n     */\n    mergePartial(snapshot, partial) {\n        const type = snapshot.data.type;\n        if (this.opMap[type]) {\n            return this.opMap[type].mergePartial(snapshot, partial);\n        }\n        else {\n            console.error(`找不到type为${type}的教具类型`, JSON.stringify(snapshot));\n            return snapshot;\n        }\n    }\n    /**\n     * 合并两个增量数据，覆盖式合并。数组会累加在一起\n     * @param partial1\n     * @param partial2\n     * @returns\n     */\n    mergeTwoPartial(partial1, partial2) {\n        const res = {\n            opId: partial1.opId,\n            data: partial1.data\n        };\n        for (let key in partial2.data) {\n            if (Array.isArray(partial2.data[key])) {\n                if (Array.isArray(res.data[key])) {\n                    res.data[key] = res.data[key].concat(partial2.data[key]);\n                }\n                else {\n                    res.data[key] = partial2.data[key];\n                }\n            }\n            else {\n                res.data[key] = partial2.data[key];\n            }\n        }\n        return res;\n    }\n    /**\n     * 重置undo，redo次数\n     * 当主播从localStorage中恢复后，需要重置undo，redo的可用次数\n     */\n    resetUndoRedoCount() {\n        this.opMap['undo'].resetCount();\n        this.opMap['redo'].resetCount();\n    }\n    get selectOp() {\n        return this.opMap['select'];\n    }\n    get selectedOpIds() {\n        if (this.currOp !== this.opMap['select']) {\n            return [];\n        }\n        else {\n            return this.selectOp.selectedOpIds;\n        }\n    }\n    get inProgressSelectedOpIds() {\n        if (this.currOp !== this.opMap['select']) {\n            return [];\n        }\n        else {\n            return this.selectOp.inProgressSelectedOpIds;\n        }\n    }\n}\nexport default OpsManager;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nexports.__esModule = true;\nexports.Tapable = require(\"./Tapable\");\nexports.SyncHook = require(\"./SyncHook\");\nexports.SyncBailHook = require(\"./SyncBailHook\");\nexports.SyncWaterfallHook = require(\"./SyncWaterfallHook\");\nexports.SyncLoopHook = require(\"./SyncLoopHook\");\nexports.AsyncParallelHook = require(\"./AsyncParallelHook\");\nexports.AsyncParallelBailHook = require(\"./AsyncParallelBailHook\");\nexports.AsyncSeriesHook = require(\"./AsyncSeriesHook\");\nexports.AsyncSeriesBailHook = require(\"./AsyncSeriesBailHook\");\nexports.AsyncSeriesWaterfallHook = require(\"./AsyncSeriesWaterfallHook\");\nexports.HookMap = require(\"./HookMap\");\nexports.MultiHook = require(\"./MultiHook\");\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst util = require(\"util\");\nconst SyncBailHook = require(\"./SyncBailHook\");\n\nfunction Tapable() {\n\tthis._pluginCompat = new SyncBailHook([\"options\"]);\n\tthis._pluginCompat.tap(\n\t\t{\n\t\t\tname: \"Tapable camelCase\",\n\t\t\tstage: 100\n\t\t},\n\t\toptions => {\n\t\t\toptions.names.add(\n\t\t\t\toptions.name.replace(/[- ]([a-z])/g, (str, ch) => ch.toUpperCase())\n\t\t\t);\n\t\t}\n\t);\n\tthis._pluginCompat.tap(\n\t\t{\n\t\t\tname: \"Tapable this.hooks\",\n\t\t\tstage: 200\n\t\t},\n\t\toptions => {\n\t\t\tlet hook;\n\t\t\tfor (const name of options.names) {\n\t\t\t\thook = this.hooks[name];\n\t\t\t\tif (hook !== undefined) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hook !== undefined) {\n\t\t\t\tconst tapOpt = {\n\t\t\t\t\tname: options.fn.name || \"unnamed compat plugin\",\n\t\t\t\t\tstage: options.stage || 0\n\t\t\t\t};\n\t\t\t\tif (options.async) hook.tapAsync(tapOpt, options.fn);\n\t\t\t\telse hook.tap(tapOpt, options.fn);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t);\n}\nmodule.exports = Tapable;\n\nTapable.addCompatLayer = function addCompatLayer(instance) {\n\tTapable.call(instance);\n\tinstance.plugin = Tapable.prototype.plugin;\n\tinstance.apply = Tapable.prototype.apply;\n};\n\nTapable.prototype.plugin = util.deprecate(function plugin(name, fn) {\n\tif (Array.isArray(name)) {\n\t\tname.forEach(function(name) {\n\t\t\tthis.plugin(name, fn);\n\t\t}, this);\n\t\treturn;\n\t}\n\tconst result = this._pluginCompat.call({\n\t\tname: name,\n\t\tfn: fn,\n\t\tnames: new Set([name])\n\t});\n\tif (!result) {\n\t\tthrow new Error(\n\t\t\t`Plugin could not be registered at '${name}'. Hook was not found.\\n` +\n\t\t\t\t\"BREAKING CHANGE: There need to exist a hook at 'this.hooks'. \" +\n\t\t\t\t\"To create a compatibility layer for this hook, hook into 'this._pluginCompat'.\"\n\t\t);\n\t}\n}, \"Tapable.plugin is deprecated. Use new API on `.hooks` instead\");\n\nTapable.prototype.apply = util.deprecate(function apply() {\n\tfor (var i = 0; i < arguments.length; i++) {\n\t\targuments[i].apply(this);\n\t}\n}, \"Tapable.apply is deprecated. Call apply on the plugin directly instead\");\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D) {\n  return $Object.defineProperties(T, D);\n};\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncHookCodeFactory();\n\nclass SyncHook extends Hook {\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncWaterfallHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonResult: (i, result, next) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += `${this._args[0]} = ${result};\\n`;\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcode += next();\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone: () => onResult(this._args[0]),\n\t\t\tdoneReturns: resultReturns,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncWaterfallHookCodeFactory();\n\nclass SyncWaterfallHook extends Hook {\n\tconstructor(args) {\n\t\tsuper(args);\n\t\tif (args.length < 1)\n\t\t\tthrow new Error(\"Waterfall hooks must have at least one argument\");\n\t}\n\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncWaterfallHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncWaterfallHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncWaterfallHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncLoopHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsLooping({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncLoopHookCodeFactory();\n\nclass SyncLoopHook extends Hook {\n\ttapAsync() {\n\t\tthrow new Error(\"tapAsync is not supported on a SyncLoopHook\");\n\t}\n\n\ttapPromise() {\n\t\tthrow new Error(\"tapPromise is not supported on a SyncLoopHook\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nmodule.exports = SyncLoopHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncParallelHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone }) {\n\t\treturn this.callTapsParallel({\n\t\t\tonError: (i, err, done, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncParallelHookCodeFactory();\n\nclass AsyncParallelHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncParallelHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncParallelHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncParallelBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, onDone }) {\n\t\tlet code = \"\";\n\t\tcode += `var _results = new Array(${this.options.taps.length});\\n`;\n\t\tcode += \"var _checkDone = () => {\\n\";\n\t\tcode += \"for(var i = 0; i < _results.length; i++) {\\n\";\n\t\tcode += \"var item = _results[i];\\n\";\n\t\tcode += \"if(item === undefined) return false;\\n\";\n\t\tcode += \"if(item.result !== undefined) {\\n\";\n\t\tcode += onResult(\"item.result\");\n\t\tcode += \"return true;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"if(item.error) {\\n\";\n\t\tcode += onError(\"item.error\");\n\t\tcode += \"return true;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"return false;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += this.callTapsParallel({\n\t\t\tonError: (i, err, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${i} < _results.length && ((_results.length = ${i +\n\t\t\t\t\t1}), (_results[${i}] = { error: ${err} }), _checkDone())) {\\n`;\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\tcode += done();\n\t\t\t\tcode += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonResult: (i, result, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${i} < _results.length && (${result} !== undefined && (_results.length = ${i +\n\t\t\t\t\t1}), (_results[${i}] = { result: ${result} }), _checkDone())) {\\n`;\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\tcode += done();\n\t\t\t\tcode += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonTap: (i, run, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tcode += `if(${i} >= _results.length) {\\n`;\n\t\t\t\t\tcode += done();\n\t\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\t}\n\t\t\t\tcode += run();\n\t\t\t\tif (i > 0) code += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone\n\t\t});\n\t\treturn code;\n\t}\n}\n\nconst factory = new AsyncParallelBailHookCodeFactory();\n\nclass AsyncParallelBailHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncParallelBailHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncParallelBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesHookCodeFactory();\n\nclass AsyncSeriesHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncSeriesHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncSeriesHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonResult: (i, result, next) =>\n\t\t\t\t`if(${result} !== undefined) {\\n${onResult(\n\t\t\t\t\tresult\n\t\t\t\t)};\\n} else {\\n${next()}}\\n`,\n\t\t\tresultReturns,\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesBailHookCodeFactory();\n\nclass AsyncSeriesBailHook extends Hook {\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncSeriesBailHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncSeriesBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesWaterfallHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonResult: (i, result, next) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += `${this._args[0]} = ${result};\\n`;\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcode += next();\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone: () => onResult(this._args[0])\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesWaterfallHookCodeFactory();\n\nclass AsyncSeriesWaterfallHook extends Hook {\n\tconstructor(args) {\n\t\tsuper(args);\n\t\tif (args.length < 1)\n\t\t\tthrow new Error(\"Waterfall hooks must have at least one argument\");\n\t}\n\n\tcompile(options) {\n\t\tfactory.setup(this, options);\n\t\treturn factory.create(options);\n\t}\n}\n\nObject.defineProperties(AsyncSeriesWaterfallHook.prototype, {\n\t_call: { value: undefined, configurable: true, writable: true }\n});\n\nmodule.exports = AsyncSeriesWaterfallHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass HookMap {\n\tconstructor(factory) {\n\t\tthis._map = new Map();\n\t\tthis._factory = factory;\n\t\tthis._interceptors = [];\n\t}\n\n\tget(key) {\n\t\treturn this._map.get(key);\n\t}\n\n\tfor(key) {\n\t\tconst hook = this.get(key);\n\t\tif (hook !== undefined) {\n\t\t\treturn hook;\n\t\t}\n\t\tlet newHook = this._factory(key);\n\t\tconst interceptors = this._interceptors;\n\t\tfor (let i = 0; i < interceptors.length; i++) {\n\t\t\tnewHook = interceptors[i].factory(key, newHook);\n\t\t}\n\t\tthis._map.set(key, newHook);\n\t\treturn newHook;\n\t}\n\n\tintercept(interceptor) {\n\t\tthis._interceptors.push(\n\t\t\tObject.assign(\n\t\t\t\t{\n\t\t\t\t\tfactory: (key, hook) => hook\n\t\t\t\t},\n\t\t\t\tinterceptor\n\t\t\t)\n\t\t);\n\t}\n\n\ttap(key, options, fn) {\n\t\treturn this.for(key).tap(options, fn);\n\t}\n\n\ttapAsync(key, options, fn) {\n\t\treturn this.for(key).tapAsync(options, fn);\n\t}\n\n\ttapPromise(key, options, fn) {\n\t\treturn this.for(key).tapPromise(options, fn);\n\t}\n}\n\nmodule.exports = HookMap;\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nrequire('../modules/es7.map.of');\nrequire('../modules/es7.map.from');\nmodule.exports = require('../modules/_core').Map;\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\n\nclass MultiHook {\n\tconstructor(hooks) {\n\t\tthis.hooks = hooks;\n\t}\n\n\ttap(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tap(options, fn);\n\t\t}\n\t}\n\n\ttapAsync(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tapAsync(options, fn);\n\t\t}\n\t}\n\n\ttapPromise(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tapPromise(options, fn);\n\t\t}\n\t}\n\n\tisUsed() {\n\t\tfor (const hook of this.hooks) {\n\t\t\tif (hook.isUsed()) return true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tintercept(interceptor) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.intercept(interceptor);\n\t\t}\n\t}\n\n\twithOptions(options) {\n\t\treturn new MultiHook(this.hooks.map(h => h.withOptions(options)));\n\t}\n}\n\nmodule.exports = MultiHook;\n","export const drawCurve = (ctx, points, k = 0.3) => {\n    if (k > 0.5 || k <= 0) {\n        console.error('k should be between 0 and 0.5');\n    }\n    ctx.beginPath();\n    if (points.length <= 2) {\n        if (points.length === 2) {\n            ctx.moveTo(...points[0]);\n            ctx.lineTo(...points[1]);\n        }\n    }\n    else {\n        ctx.moveTo(...points[0]);\n        let lastP = points[0];\n        let currP = points[1];\n        // let segPoint1: Point = [k * lastP[0] + (1-k) * currP[0], k * lastP[1] + (1-k) * currP[1]]\n        let ctrlPtInLastSeg = [k * lastP[0] + (1 - k) * currP[0], k * lastP[1] + (1 - k) * currP[1]];\n        if (Math.abs(k - 0.5) > 0.01) {\n            ctx.lineTo(...ctrlPtInLastSeg);\n        }\n        lastP = currP;\n        for (let i = 2; i < points.length; i++) {\n            currP = points[i];\n            let ctrlPtInSeg1 = [(1 - k) * lastP[0] + k * currP[0], (1 - k) * lastP[1] + k * currP[1]];\n            let ctrlPtInSeg2 = [k * lastP[0] + (1 - k) * currP[0], k * lastP[1] + (1 - k) * currP[1]];\n            ctx.quadraticCurveTo(...lastP, ...ctrlPtInSeg1);\n            ctx.lineTo(...ctrlPtInSeg2);\n            ctrlPtInLastSeg = ctrlPtInSeg2;\n            lastP = currP;\n        }\n        ctx.lineTo(...points[points.length - 1]);\n    }\n};\n","/**\n * 移动操作。\n * 移动操作必须跟在选择操作之后\n */\nimport Operation from \"../Operation\";\nimport { combineBoundary, getTransformedBoundary, pointInRect } from \"../../misc/shapeHelper\";\nimport { arrayDeduce, findOpsUnderMouse } from \"../util\";\nimport SelectOp from \"../SelectOp\";\nclass MoveOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'move';\n        this.points = [];\n        this.activate = false;\n        this.description = \"移动操作工具。内部使用，不提供对外接口\";\n        this.idsBeenMoved = [];\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousedown.tap(\"MousedownPlugin\", this.handleMouseDown.bind(this));\n        this.opsManager.hooks.mousemove.tap(\"MousemovePlugin\", this.handleMouseMove.bind(this));\n        this.opsManager.hooks.mouseup.tap(\"MouseupPlugin\", this.handleMouseUp.bind(this));\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            if (this.activate) {\n                this.points.push([mx, my]);\n                this.dispatch(this.getSnapshot(true, this.idsBeenMoved));\n                return true;\n            }\n            if (!this.isMouseDown && document.body.style.cursor !== 'nwse-resize' && document.body.style.cursor !== 'nesw-resize') {\n                if (this.mouseInSelectedEleBoundary(mx, my, this.opsManager.selectedOpIds) ||\n                    this.opsManager.inProgressSelectedOpIds.length > 0) {\n                    //鼠标在已选中的图形上方\n                    document.body.style.cursor = 'move';\n                }\n                else {\n                    const idsUnderMouse = findOpsUnderMouse([[mx, my]], this.drawOpsOfPage, this.opsManager);\n                    const idsBeenSelected = arrayDeduce(idsUnderMouse, this.opsManager.selectedOpIds.concat(this.opsManager.inProgressSelectedOpIds));\n                    if (idsBeenSelected.length > 0) {\n                        //鼠标在尚未选中的图形上方\n                        document.body.style.cursor = 'move';\n                    }\n                    else {\n                        document.body.style.cursor = 'default';\n                    }\n                }\n            }\n        }\n    }\n    handleMouseDown(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            const mouseInProgressSelectedBoundary = this.mouseInSelectedEleBoundary(mx, my, this.opsManager.inProgressSelectedOpIds);\n            const mouseInSelectedBoundary = this.mouseInSelectedEleBoundary(mx, my, this.opsManager.selectedOpIds);\n            if (mouseInProgressSelectedBoundary) {\n                /**\n                 * 拖动鼠标悬浮的元素\n                 */\n                const idsUnderMouse = this.opsManager.inProgressSelectedOpIds.slice();\n                this.dispatch(this.opsManager.selectOp.getSnapshot(idsUnderMouse));\n                this.beginBatch();\n                document.body.style.cursor = 'move';\n                this.idsBeenMoved = idsUnderMouse.slice();\n                this.points = [[mx, my]];\n                this.activate = true;\n                return true;\n            }\n            else if (mouseInSelectedBoundary) {\n                /**\n                 * 拖动早就被选中的元素\n                 */\n                this.beginBatch();\n                document.body.style.cursor = 'move';\n                this.idsBeenMoved = this.opsManager.selectedOpIds;\n                this.points = [[mx, my]];\n                this.activate = true;\n                return true;\n            }\n            else {\n                /**\n                 * 适配移动端触摸屏\n                 * 支持移动端直接拖动未选中的图形移动\n                 */\n                const idsUnderMouse = findOpsUnderMouse([[mx, my]], this.drawOpsOfPage, this.opsManager);\n                if (idsUnderMouse.length > 0) {\n                    //将拖动的元素转为被选择状态\n                    this.dispatch(this.opsManager.selectOp.getSnapshot(idsUnderMouse));\n                    this.beginBatch();\n                    document.body.style.cursor = 'move';\n                    this.idsBeenMoved = idsUnderMouse.slice();\n                    this.points = [[mx, my]];\n                    this.activate = true;\n                    return true;\n                }\n            }\n        }\n        this.activate = false;\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.activate) {\n            this.activate = false;\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot(false, this.idsBeenMoved));\n            return true;\n        }\n    }\n    getSnapshot(inProgress, idsBeenMoved) {\n        return {\n            type: this.type,\n            sp: this.points[0],\n            ep: this.points[this.points.length - 1],\n            selectedOpIds: idsBeenMoved.slice(),\n            dependOn: idsBeenMoved.slice(),\n            inProgress: inProgress\n        };\n    }\n    /**\n     * 鼠标位置是否在已选中元素的包含盒内\n     */\n    mouseInSelectedEleBoundary(mx, my, selectedOpIds) {\n        selectedOpIds = selectedOpIds.filter(id => {\n            return this.drawOpsOfPage.hasOwnProperty(id);\n        });\n        if (selectedOpIds.length === 0)\n            return false;\n        const padding = this.opsManager.selectOp.eleContainerPadding;\n        const boundary = selectedOpIds.map(id => {\n            const op = this.drawOpsOfPage[id];\n            return getTransformedBoundary(op.data.boundary, op.data.dx, op.data.dy, op.data.scaleX, op.data.scaleY);\n        }).reduce((b1, b2) => {\n            return combineBoundary(b1, b2);\n        });\n        return pointInRect({\n            sx: boundary.sx - padding,\n            sy: boundary.sy - padding,\n            w: boundary.w + padding * 2,\n            h: boundary.h + padding * 2\n        }, [mx, my]);\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const moveOpSnapshot = transformOp.data;\n        let dx;\n        let dy;\n        if (Array.isArray(moveOpSnapshot.points)) {\n            /**\n             * 3.0.2之前\n             */\n            dx = moveOpSnapshot.points[moveOpSnapshot.points.length - 1][0] - moveOpSnapshot.points[0][0];\n            dy = moveOpSnapshot.points[moveOpSnapshot.points.length - 1][1] - moveOpSnapshot.points[0][1];\n        }\n        else {\n            dx = moveOpSnapshot.ep[0] - moveOpSnapshot.sp[0];\n            dy = moveOpSnapshot.ep[1] - moveOpSnapshot.sp[1];\n        }\n        const newData = Object.assign({}, baseOp.data, {\n            dx: dx + (baseOp.data.dx || 0),\n            dy: dy + (baseOp.data.dy || 0),\n            inProgress: moveOpSnapshot.inProgress\n        });\n        const res = Object.assign({}, baseOp, {\n            data: newData\n        });\n        return res;\n    }\n}\nexport default MoveOp;\n","/**\n * 缩放操作\n *\n * 同选择操作一样，缩放操作也要跟在选择操作之后\n */\nimport Operation from \"../Operation\";\nimport SelectOp from \"../SelectOp\";\nimport { combineBoundary, getTransformedBoundary, getTransformedPoint, pointCollideWithPoint } from \"../../misc/shapeHelper\";\nimport { TouchPlatformArray } from \"../../types\";\n//鼠标落下位置和包含盒角落要在SCALE_TEST_RADIUS之内\nconst SCALE_TEST_RADIUS = 15;\nconst KeepRatioSnapshotTypes = ['text', 'video'];\nclass ScaleOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'scale';\n        /**\n         * 选择操作选中的元素集合\n         */\n        /**\n         * 若拉伸位置是包含盒的东北角，则coordinateX和coodinateY为包含盒的西南角\n         */\n        this.coordinateX = 0;\n        this.coordinateY = 0;\n        this.boundaryW = 1;\n        this.boundaryH = 1;\n        this.activate = false;\n        this.idsBeenScaled = [];\n        this.description = \"缩放操作工具。内部使用，不提供对外接口\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousemove.tap(\"MouseMovePlugin\", this.handleMouseMove.bind(this));\n        this.opsManager.hooks.mousedown.tap(\"MouseMovePlugin\", this.handleMouseDown.bind(this));\n        this.opsManager.hooks.mouseup.tap(\"MouseMovePlugin\", this.handleMouseUp.bind(this));\n    }\n    handleMouseDown(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            const mouseInfo = this.mousePosTest(mx, my);\n            document.body.style.cursor = mouseInfo.cursorSuggestion;\n            if (mouseInfo.value === true) {\n                this.beginBatch();\n                this.activate = true;\n                this.coordinateX = mouseInfo.coordinateX;\n                this.coordinateY = mouseInfo.coordinateY;\n                this.boundaryW = mouseInfo.w === 0 ? 1 : mouseInfo.w;\n                this.boundaryH = mouseInfo.h === 0 ? 1 : mouseInfo.h;\n                this.idsBeenScaled = this.opsManager.selectedOpIds.slice();\n                return true;\n            }\n        }\n        this.activate = false;\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.opsManager.currOp instanceof SelectOp) {\n            if (this.activate) {\n                this.scaleInfo = {\n                    scaleX: {\n                        coordinate: this.coordinateX,\n                        factor: (mx - this.coordinateX) / this.boundaryW\n                    },\n                    scaleY: {\n                        coordinate: this.coordinateY,\n                        factor: (my - this.coordinateY) / this.boundaryH\n                    }\n                };\n                this.dispatch(this.getSnapshot(true, this.idsBeenScaled));\n                /**\n                 * 必须return true，否则会交替产生select和scale快照\n                 */\n                return true;\n            }\n            else if (this.opsManager.currOp instanceof SelectOp && !this.isMouseDown && this.opsManager.currOp.selectedOpIds.length > 0) {\n                const mouseInfo = this.mousePosTest(mx, my);\n                document.body.style.cursor = mouseInfo.cursorSuggestion;\n            }\n            else {\n                document.body.style.cursor = 'default';\n            }\n        }\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.activate && this.scaleInfo) {\n            this.activate = false;\n            this.dispatch(this.getSnapshot(false, this.idsBeenScaled));\n            this.scaleInfo = undefined;\n            return true;\n        }\n    }\n    /**\n     * 判断鼠标是否在被选择的包含盒的角落上。\n     */\n    mousePosTest(mx, my) {\n        let selectedOpIds = this.opsManager.selectedOpIds;\n        selectedOpIds = selectedOpIds.filter(id => {\n            return this.drawOpsOfPage.hasOwnProperty(id);\n        });\n        if (selectedOpIds.length === 0) {\n            return {\n                value: false,\n                cursorSuggestion: 'default',\n                coordinateX: 0,\n                coordinateY: 0,\n                w: 1,\n                h: 1\n            };\n        }\n        const boundary = this.opsManager.selectedOpIds.map(id => {\n            const op = this.drawOpsOfPage[id];\n            return getTransformedBoundary(op.data.boundary, op.data.dx, op.data.dy, op.data.scaleX, op.data.scaleY);\n        }).reduce((b1, b2) => {\n            return combineBoundary(b1, b2);\n        });\n        let radius = SCALE_TEST_RADIUS;\n        if (TouchPlatformArray.includes(this.app.platform)) {\n            radius = radius * 2.2;\n        }\n        //如果视角有缩放，要反向缩放抵消，使得缩放的热点区域固定\n        radius = radius * Math.max(1 / this.app.camera.zoomFactor, 1);\n        if (pointCollideWithPoint([mx, my], [boundary.sx, boundary.sy], radius)) {\n            //左上角\n            return {\n                value: true,\n                cursorSuggestion: 'nwse-resize',\n                coordinateX: boundary.sx + boundary.w,\n                coordinateY: boundary.sy + boundary.h,\n                w: -boundary.w,\n                h: -boundary.h\n            };\n        }\n        else if (pointCollideWithPoint([mx, my], [boundary.sx + boundary.w, boundary.sy], radius)) {\n            //右上角\n            return {\n                value: true,\n                cursorSuggestion: 'nesw-resize',\n                coordinateX: boundary.sx,\n                coordinateY: boundary.sy + boundary.h,\n                w: boundary.w,\n                h: -boundary.h\n            };\n        }\n        else if (pointCollideWithPoint([mx, my], [boundary.sx, boundary.sy + boundary.h], radius)) {\n            //左下角\n            return {\n                value: true,\n                cursorSuggestion: 'nesw-resize',\n                coordinateX: boundary.sx + boundary.w,\n                coordinateY: boundary.sy,\n                w: -boundary.w,\n                h: boundary.h\n            };\n        }\n        else if (pointCollideWithPoint([mx, my], [boundary.sx + boundary.w, boundary.sy + boundary.h], radius)) {\n            //右下角\n            return {\n                value: true,\n                cursorSuggestion: 'nwse-resize',\n                coordinateX: boundary.sx,\n                coordinateY: boundary.sy,\n                w: boundary.w,\n                h: boundary.h\n            };\n        }\n        else {\n            return {\n                value: false,\n                cursorSuggestion: 'default',\n                coordinateX: 0,\n                coordinateY: 0,\n                w: boundary.w,\n                h: boundary.h\n            };\n        }\n    }\n    getSnapshot(inProgress, idsBeenScaled) {\n        return {\n            type: this.type,\n            inProgress: inProgress,\n            scaleInfo: this.scaleInfo,\n            selectedOpIds: idsBeenScaled.slice(),\n            dependOn: idsBeenScaled.slice()\n        };\n    }\n    /**\n     * 获取本次缩放的参数\n     * @param transformOp\n     */\n    getScaleParameterBySnapshot(transformOp) {\n        const snaps = transformOp.data;\n        let factorX = 1;\n        let factorY = 1;\n        let dx = 0;\n        let dy = 0;\n        let scroll;\n        if (Array.isArray(snaps.scaleList)) {\n            scroll = snaps.scaleList[snaps.scaleList.length - 1];\n        }\n        else {\n            scroll = snaps.scaleInfo;\n        }\n        //本次快照缩放值\n        let thisScaleX = scroll.scaleX.factor;\n        let thisScaleY = scroll.scaleY.factor;\n        factorX *= thisScaleX;\n        factorY *= thisScaleY;\n        dx = thisScaleX * (dx - scroll.scaleX.coordinate) + scroll.scaleX.coordinate;\n        dy = thisScaleY * (dy - scroll.scaleY.coordinate) + scroll.scaleY.coordinate;\n        return {\n            dx,\n            dy,\n            factorX,\n            factorY\n        };\n    }\n    /**\n     * 将scale应用到baseOp中，计算baseOp新的dx，dy和scaleFactor\n     *\n     * 新的scaleFactor就是baseOp.data.scaleFactor * 当前操作的缩放乘积\n     * 新的scaleFactor的左上角\n     */\n    transformOp(baseOp, transformOp) {\n        var _a, _b;\n        const snaps = transformOp.data;\n        //baseOp快照缩放值\n        let baseScaleX = ((_a = baseOp.data.scaleX) === null || _a === void 0 ? void 0 : _a.factor) || 1;\n        let baseScaleY = ((_b = baseOp.data.scaleY) === null || _b === void 0 ? void 0 : _b.factor) || 1;\n        //结合了之前和这次Op快照的总体缩放值\n        let totalScaleX = baseScaleX;\n        let totalScaleY = baseScaleY;\n        //baseOp的boundary的左上角。计算baseOp最终左上角位置来反推dx，dy\n        const initX = baseOp.data.boundary.sx;\n        const initY = baseOp.data.boundary.sy;\n        let [left, top] = getTransformedPoint([initX, initY], baseOp.data.dx, baseOp.data.dy, baseOp.data.scaleX, baseOp.data.scaleY);\n        let scroll;\n        if (Array.isArray(snaps.scaleList)) {\n            scroll = snaps.scaleList[snaps.scaleList.length - 1];\n        }\n        else {\n            scroll = snaps.scaleInfo;\n        }\n        if (!scroll) {\n            return baseOp;\n        }\n        //本次快照缩放值\n        let thisScaleX = scroll.scaleX.factor;\n        let thisScaleY = scroll.scaleY.factor;\n        totalScaleX *= thisScaleX;\n        totalScaleY *= thisScaleY;\n        if (KeepRatioSnapshotTypes.includes(baseOp.data.type)) {\n            /**\n             * 如果是文字的话，宽高要同比例缩放。\n             * 比如若为3，-6，则改为4.5, -4.5\n             */\n            let baseFactor = Math.abs(totalScaleX) / 2 + Math.abs(totalScaleY) / 2;\n            totalScaleX *= baseFactor / Math.abs(totalScaleX);\n            totalScaleY *= baseFactor / Math.abs(totalScaleY);\n            thisScaleX = totalScaleX / baseScaleX;\n            thisScaleY = totalScaleY / baseScaleY;\n        }\n        left = thisScaleX * (left - scroll.scaleX.coordinate) + scroll.scaleX.coordinate;\n        top = thisScaleY * (top - scroll.scaleY.coordinate) + scroll.scaleY.coordinate;\n        const dx = left - totalScaleX * initX;\n        const dy = top - totalScaleY * initY;\n        const newData = Object.assign({}, baseOp.data, {\n            scaleX: {\n                factor: totalScaleX,\n                coordinate: 0\n            },\n            scaleY: {\n                factor: totalScaleY,\n                coordinate: 0\n            },\n            dx,\n            dy\n        });\n        let res;\n        if (baseOp.data.type !== 'text') {\n            res = Object.assign({}, baseOp, {\n                data: newData\n            });\n        }\n        else {\n            //处理文本。\n            //文本宽高缩放必须等比例。且缩放会修改文本的fontSize\n            newData.fontSize = Math.abs(baseOp.data.fontSize * totalScaleX / baseScaleX);\n            res = Object.assign({}, baseOp, {\n                data: newData\n            });\n        }\n        return res;\n    }\n}\nexport default ScaleOp;\n","/**\n * 删除操作，可通过ctrl-v还原\n */\nimport Operation from \"../Operation\";\nclass DeleteOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'delete';\n        this.description = \"删除元素。\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `删除当前选中的元素`\n                }\n            }\n        };\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (['backspace', 'delete'].includes(key)) {\n            this.execCommand();\n            return true;\n        }\n    }\n    execCommand() {\n        if (this.opsManager.selectedOpIds.length > 0) {\n            this.dispatch(this.getSnapshot());\n        }\n    }\n    getSnapshot() {\n        return {\n            type: this.type,\n            deleteOpIds: this.opsManager.selectedOpIds.slice(),\n            dependOn: this.opsManager.selectedOpIds.slice()\n        };\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const newData = Object.assign({}, baseOp.data, {\n            hidden: true\n        });\n        return Object.assign({}, baseOp, {\n            data: newData\n        });\n    }\n}\nexport default DeleteOp;\n","/**\n * 撤销操作\n */\nimport Operation from \"../Operation\";\nimport { snapshotOutOfNormalFlowTypes } from \"../types\";\nclass UndoOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'undo';\n        this.description = \"撤销操作\";\n        this.idsCouldUndo = [];\n    }\n    getCount() {\n        return this.idsCouldUndo.length;\n    }\n    registerHooks() {\n        this.opsManager.hooks.addOpHook.tap(\"AddOpSnapshotPlugin\", this.onOpAdded.bind(this));\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (key === 'z' && (this.isKeyDown('control') || this.isKeyDown('command'))) {\n            ev.preventDefault();\n            this.execCommand();\n        }\n    }\n    resetCount() {\n        this.idsCouldUndo = [];\n        this.emit('event:appState:change', 'undoCount', 0);\n    }\n    onOpAdded(snapshot) {\n        if (snapshot.category === 'pageOp' || snapshot.category === 'boardOp') {\n            this.idsCouldUndo = [];\n        }\n        else if (snapshot.data.skipUndo || snapshot.data.inProgress || snapshotOutOfNormalFlowTypes.includes(snapshot.data.type)) {\n            return;\n        }\n        else if (snapshot.data.type === 'undo') {\n            const index = this.idsCouldUndo.indexOf(snapshot.data.undoOpId);\n            if (index !== -1) {\n                this.idsCouldUndo.splice(index, 1);\n            }\n        }\n        else if (snapshot.data.type !== 'undo') {\n            if (!this.idsCouldUndo.includes(snapshot.opId)) {\n                this.idsCouldUndo.push(snapshot.opId);\n            }\n        }\n        this.emit('event:appState:change', 'undoCount', this.idsCouldUndo.length);\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand() {\n        if (this.idsCouldUndo.length === 0)\n            return;\n        this.dispatch(this.getSnapshot());\n    }\n    /**\n     * select，以及过程中的快照不需要undo\n     */\n    getSnapshot() {\n        const opOfPage = this.opsOfPage;\n        let undoOpId = '';\n        //记录每个快照当前是否可以被undo\n        /**\n         * 当处理到非undo，redo，非inProgress，非skipUndo的快照时，\n         * 若该快照未被undo，redo处理过，则opUndoCount中不存在该快照的entry，则该快照可以被undo\n         * 若该快照已经被undo了，则其opUndoCount[opId]应该为1\n         * 若该快照已经被undo，然后又被redo，则处理redo后（逆向处理），它的opUndoCount[opId]应该为-1，处理undo后，它的opUndoCount[opId]应该为0。\n\n         * 比如W1 U1 W2 W3 W4 W5 U5 U4 W6 U6 U3\n         *\n         * 若要寻找U3对应的撤销快照Id。从U6开始，每一步后opUndoCount的变化为：\n         * {W6}             (U6 + W6)\n         * {W6, W4}         (U4)\n         * {W6, W4, W5}     (U5 + W5 + W4)\n         * 处理到W3时，发现W3尚未被Undo，因此W3就是要撤销的快照\n         */\n        const opAlreadyBeenUndo = new Set();\n        for (let i = opOfPage.length - 1; i >= 0; i--) {\n            //该快照应该被跳过\n            const op = opOfPage[i];\n            const opShouldBeSkiped = op.data.inProgress || op.data.skipUndo || snapshotOutOfNormalFlowTypes.includes(op.data.type);\n            if (op.data.type !== 'undo' && !opShouldBeSkiped && !opAlreadyBeenUndo.has(op.opId)) {\n                undoOpId = op.opId;\n                break;\n            }\n            else if (op.data.type === 'undo') {\n                opAlreadyBeenUndo.add(op.data.undoOpId);\n            }\n        }\n        return {\n            type: this.type,\n            undoOpId\n        };\n    }\n}\nexport default UndoOp;\n","/**\n * 重做操作。重做只能跟在撤销操作后面\n */\nimport Operation from \"../Operation\";\nimport { snapshotOutOfNormalFlowTypes } from \"../types\";\nclass RedoOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'redo';\n        this.description = \"重做操作\";\n        this.idsCouldRedo = [];\n    }\n    getCount() {\n        return this.idsCouldRedo.length;\n    }\n    registerHooks() {\n        this.opsManager.hooks.addOpHook.tap(\"AddOpSnapshotPlugin\", this.onOpAdded.bind(this));\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (key === 'y' && (this.isKeyDown('control') || this.isKeyDown('command'))) {\n            ev.preventDefault();\n            this.execCommand();\n        }\n    }\n    resetCount() {\n        this.idsCouldRedo = [];\n        this.emit('event:appState:change', 'redoCount', 0);\n    }\n    onOpAdded(snapshot) {\n        if (snapshot.category === 'pageOp' || snapshot.category === 'boardOp') {\n            this.idsCouldRedo = [];\n        }\n        else if (snapshot.data.inProgress || snapshot.data.skipUndo || snapshotOutOfNormalFlowTypes.includes(snapshot.data.type)) {\n            return;\n        }\n        else if (snapshot.data.type === 'redo') {\n            const index = this.idsCouldRedo.indexOf(snapshot.data.redoOpId);\n            if (index !== -1) {\n                this.idsCouldRedo.splice(index, 1);\n            }\n        }\n        else if (snapshot.data.type === 'undo') {\n            if (!this.idsCouldRedo.includes(snapshot.opId)) {\n                this.idsCouldRedo.push(snapshot.opId);\n            }\n        }\n        else {\n            this.idsCouldRedo = [];\n        }\n        this.emit('event:appState:change', 'redoCount', this.idsCouldRedo.length);\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            },\n        };\n    }\n    execCommand() {\n        if (this.idsCouldRedo.length === 0)\n            return;\n        this.dispatch(this.getSnapshot());\n    }\n    /**\n     * 每碰到一个redo计数+1，每碰到一个undo计数-1，当计数为0，且为undo时，就是要操作的对象。\n     * 比如W1 W2 W3 W4 U4 U3 U2 R2 R3 R4对应的计数为1 2 1 0，此时遇到U4，即为要操作的对象\n     */\n    getSnapshot() {\n        const opOfPage = this.opsOfPage;\n        let redoOpId = '';\n        let count = 0;\n        for (let i = opOfPage.length - 1; i >= 0; i--) {\n            const op = opOfPage[i];\n            if (op.data.type === 'undo' && count === 0) {\n                redoOpId = op.opId;\n                break;\n            }\n            else if (op.data.type === 'undo') {\n                count--;\n            }\n            else if (op.data.type === 'redo') {\n                count++;\n            }\n            else if (!op.data.skipUndo && !snapshotOutOfNormalFlowTypes.includes(op.data.type)) {\n                console.warn('DEV-->', 'redo操作之前有非undo操作。请查看具体细节', opOfPage);\n            }\n        }\n        return {\n            type: this.type,\n            redoOpId\n        };\n    }\n}\nexport default RedoOp;\n","/**\n * 重做操作。重做只能跟在撤销操作后面\n */\nimport Operation from \"../Operation\";\nclass ClearOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'clear';\n        this.description = \"清空操作\";\n    }\n    isAvailable() {\n        return Object.keys(this.drawOpsOfPage).length > 0;\n    }\n    registerHooks() {\n        this.opsManager.hooks.refresh.tap(\"RefreshPlugin\", this.onRefresh.bind(this));\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            },\n        };\n    }\n    execCommand() {\n        if (Object.keys(this.drawOpsOfPage).length > 0) {\n            this.dispatch(this.getSnapshot());\n        }\n    }\n    getSnapshot() {\n        return {\n            type: this.type\n        };\n    }\n    onRefresh() {\n        const available = Object.keys(this.drawOpsOfPage).length > 0;\n        this.emit('event:appState:change', 'clearAvailable', available);\n    }\n}\nexport default ClearOp;\n","import Operation from \"../Operation\";\nclass EraserOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'eraser';\n        this.eraserColor = 'rgba(230, 100, 100, .4)';\n        this.width = 20;\n        this.points = [];\n        this.description = \"橡皮擦。\\n首先使用op:eraser:activate设置画布为橡皮擦模式。\" +\n            \"具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n            'eraser:width': {\n                value: this.setWidth.bind(this),\n                information: {\n                    args: 'width: number',\n                    message: `设置橡皮擦宽度`\n                }\n            },\n            'eraser:color': {\n                value: this.setColor.bind(this),\n                information: {\n                    args: 'color: Color',\n                    message: `设置橡皮擦聚光灯颜色`\n                }\n            }\n        };\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.isMouseDown) {\n            this.points.push([mx, my]);\n            this.dispatch(this.getSnapshot());\n        }\n    }\n    handleMouseDown(event, mx, my) {\n        this.beginBatch();\n        this.points = [];\n        this.points.push([mx, my]);\n    }\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown) {\n            this.dispatch(this.getSnapshot());\n            this.points = [];\n        }\n    }\n    getSnapshot() {\n        return {\n            type: this.type,\n            points: this.points.slice(),\n            width: this.width,\n        };\n    }\n    draw(snapshot, ctx) {\n        ctx.save();\n        //需要将透明度设置为1。否则可能会出错。\n        ctx.fillStyle = 'rgb(0, 0, 0)';\n        const data = snapshot.data;\n        const points = data.points;\n        ctx.beginPath();\n        ctx.globalCompositeOperation = 'destination-out';\n        for (let i = 1; i < points.length; i++) {\n            ctx.moveTo(points[i][0], points[i][1]);\n            ctx.arc(points[i][0], points[i][1], this.width, 0, Math.PI * 2, true);\n        }\n        ctx.fill();\n        ctx.restore();\n        this.drawEraserSignpost(ctx);\n    }\n    /**\n     * 绘制橡皮擦聚光灯\n     */\n    drawEraserSignpost(ctx) {\n        if (this.opsManager.currOp instanceof EraserOp && this.isMouseDown) {\n            ctx.beginPath();\n            ctx.arc(this.points[this.points.length - 1][0], this.points[this.points.length - 1][1], this.width, 0, Math.PI * 2, true);\n            ctx.fillStyle = this.eraserColor;\n            ctx.fill();\n        }\n    }\n    setWidth(width) {\n        this.width = width;\n    }\n    setColor(color) {\n        this.eraserColor = color;\n    }\n}\nexport default EraserOp;\n","/**\n * 文本操作。\n *\n * 文本有两类模式：\n * 一是判断文本框是否是新的文本框: isNewText\n * 二是判断文本框是否聚焦：isFocus\n *\n * isNewText为false时，快照会包含dependOn，dependOn指向被编辑的文本框opId\n * isFocus为true时，快照的boundary使用this.pre以及鼠标落下的位置计算。为false时，boundary使用快照对应的pre计算。\n *\n * TextOp有两种pre。一种是isFocus时，和textArea内容一一对应的pre，这个pre用于辅助计算内容的宽高。另一种pre是快照pre。文本不处于focus时，使用快照pre绘制。\n *\n *\n *                  点击画布\n * 激活文本模式   -------->>>>>   文本框聚焦(创建模式+正在编辑)  -----\n *                                                                 \\     失焦\n *                                                                  -------------> 文本框选中（编辑模式）\n *              点击文本框                                          /\n * 选择模式   --------->>>>>>   文本框聚焦（编辑模式+正在编辑） -----\n *              单选文本框\n *           ---------->>>>>   文本框选中（编辑模式）\n *\n *\n */\nimport Operation from \"../Operation\";\nimport { getTransformedBoundary, pointInRect } from \"../../misc/shapeHelper\";\nimport SelectOp from \"../SelectOp\";\nimport { clearTextArea, createElements, setElementsStyle, drawTextSnapshot, setElementsSize, PADDING, DEFAULT_LINEHEIGHT } from \"./UIHelper\";\nimport TextToolbar from \"./TextToolbar\";\nimport { DEFAULT_FONTSIZE } from \"../../config\";\nimport textConfig from \"./textConfig\";\nimport { printTextInMultiLine } from \"../../misc/text\";\nclass TextOp extends Operation {\n    constructor(app) {\n        super(app);\n        this.type = 'text';\n        this.dependOn = undefined;\n        /**\n         * 失焦时间。失焦之后的点击事件会被selectOp忽略。如果不忽略，点击空白区域时，失焦会导致文本框不被选中。\n         */\n        this.blurAt = 0;\n        this.color = 'black';\n        this.text = '';\n        this.textBeforeEdit = '';\n        this.fontSize = DEFAULT_FONTSIZE;\n        this.isFocus = false;\n        this.isNewText = true;\n        this.description = \"绘制文字\\n首先使用op:text:activate设置画布为文字模式。\" +\n            \"通过op:text:color, op:text:fontSize, 设置文字的颜色和字体大小。然后画布会监听鼠标动作，生成文本框。具体用法如下：\";\n        /**\n         * 文本修改时，利用pre计算textArea的宽，高\n         */\n        this.handleTextAreaChange = (event) => {\n            let text = event.target.value;\n            if (text.endsWith(\"\\n\")) {\n                text += \"\\n\";\n            }\n            this.text = text;\n            this.pre.innerText = text || ' ';\n            /**\n             * 这里不需要设置scale。因为pre.clientWidth * pre.scale === textArea.width * textArea.scale\n             */\n            setElementsSize(this.textAreaContainer, this.textArea, this.pre, this.fontSize);\n            this.dispatch(this.getSnapshot(true));\n        };\n        this.handleTextAreaBlur = (event) => {\n            setTimeout(() => {\n                /**\n                 * 失焦函数处理时，如果页面和聚焦时的页面不同，则无需进一步处理\n                 */\n                if (this.opsManager.currPage !== this.textFocusAtPage) {\n                    return;\n                }\n                this._handleTextAreaBlur();\n            }, 0);\n        };\n        this._handleTextAreaBlur = () => {\n            /**\n             * 重置文本\n             */\n            const opId = this.opIdToDraw;\n            /**\n             * 如果这次编辑未修改文本，则视为无效编辑，undo操作不会对其做出反应\n             */\n            this.dispatch(this.getSnapshot(false, this.text === this.textBeforeEdit));\n            this.isFocus = false;\n            this.text = ' ';\n            clearTextArea(this.textAreaContainer, this.textArea);\n            /**\n             * 若文本框为空，则不选中任何图形\n             * 若文本框不为空，则选中该文本框\n             *\n             * 若blur是由click事件引发的，设置currOp为selectOp后，blur之后selectOp会接收click事件\n             * 而点击空白区域的click事件会导致选中元素清空。\n             *\n             * 为了点击空白区域仍旧会选中文本框，记录blur的时间点，然后再selectlOp中会判断是不是这次点击是在blur事件之后，\n             * 如果是在之后，且点击处空白，则忽略这次点击事件\n             */\n            this.blurAt = (new Date()).valueOf();\n            this.opsManager.setCurrOp('select');\n            this.opsManager.selectOp.dispatch(this.opsManager.selectOp.getSnapshot([opId]));\n        };\n        this.registerToolbar(new TextToolbar());\n        const { textAreaContainer, textArea, pre } = createElements();\n        this.textAreaContainer = textAreaContainer;\n        this.textArea = textArea;\n        this.pre = pre;\n        this.app.on('container:set', () => {\n            this.app.container.textAreaEl.appendChild(textAreaContainer);\n            this.app.container.textAreaEl.appendChild(pre);\n        });\n        this.app.on('container:resize', () => {\n            var _a;\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.resize(1 / this.app.camera.scale);\n        });\n        this.textArea.oninput = this.handleTextAreaChange;\n        this.textArea.onblur = this.handleTextAreaBlur;\n        //TODO: 统一textArea，pre宽高更新的函数\n        setElementsSize(this.textAreaContainer, this.textArea, this.pre, this.fontSize);\n    }\n    registerHooks() {\n        this.opsManager.hooks.prePageChange.tap('PrePageChange', this.handlePrePageChange.bind(this));\n        this.opsManager.hooks.click.tap(\"ClickPlugin\", this.handleClickExistText.bind(this));\n        this.opsManager.hooks.selectChange.tap('SelectChangePlugin', this.handleSelectChange.bind(this));\n        this.opsManager.hooks.enableDrawChange.tap('EnableDrawChange', this.handleEnableDrawChange.bind(this));\n    }\n    /**\n     * 根据board id, page id得到id前缀\n     */\n    getIdPrefix(boardName, pageIndex) {\n        return `${boardName}-${pageIndex}`.replace(/[\\W_]+/g, '-');\n    }\n    /**\n     * 返回当前编辑的文本框对应的opId。\n     * 若状态为新建，则直接返回opId\n     * 若状态为编辑旧文本框，返回旧文本框的opId\n     */\n    get opIdToDraw() {\n        if (this.isNewText) {\n            return this.opIdForseen(this.type, this.dependOn);\n        }\n        else {\n            return this.dependOn;\n        }\n    }\n    /**\n     * 当前编辑是作用于哪个pre上面\n     */\n    get workingPre() {\n        if (this.isFocus) {\n            //编辑模式\n            return this.pre;\n        }\n        else {\n            const boardName = this.app.room.currIndex;\n            const pageIndex = this.app.room.currBoard.currIndex.toString();\n            return document.getElementById(`${this.getIdPrefix(boardName, pageIndex)}-${this.dependOn}-pre`);\n        }\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            },\n            'register:toolbar': {\n                value: this.registerToolbar.bind(this),\n                information: {\n                    args: 'toolbar: IToolbar',\n                    message: '自定义工具栏'\n                }\n            },\n            'text:color': {\n                value: this.setColor.bind(this),\n                information: {\n                    args: 'color: string',\n                    message: `设置文本颜色`\n                }\n            },\n            'text:fontsize': {\n                value: this.setFontSize.bind(this),\n                information: {\n                    args: 'size: number',\n                    message: `设置矩形边框颜色`\n                }\n            }\n        };\n    }\n    /**\n     * 页面切换时，如果文本处于聚焦状态，先使其失焦\n     */\n    handlePrePageChange() {\n        if (this.isFocus) {\n            this._handleTextAreaBlur();\n        }\n    }\n    handleEnableDrawChange(editEnabled) {\n        var _a, _b;\n        if (!editEnabled) {\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.hide();\n        }\n        else {\n            const selectedOpIds = this.opsManager.selectedOpIds;\n            let currSelectTextId = (selectedOpIds.length === 1 && this.getOpTypeByOpId(selectedOpIds[0]) === 'text') ? selectedOpIds[0] : undefined;\n            if (currSelectTextId && this.opsManager.currOp instanceof SelectOp) {\n                return this._handleSelectTextOp(currSelectTextId);\n            }\n            else {\n                (_b = this.toolbar) === null || _b === void 0 ? void 0 : _b.hide();\n            }\n        }\n    }\n    /**\n     * 文本框单独被选中时，弹出工具栏\n     */\n    handleSelectChange(preSelectedOpIds, selectedOpIds) {\n        var _a;\n        let preSelectTextId = (preSelectedOpIds.length === 1 && this.getOpTypeByOpId(preSelectedOpIds[0]) === 'text') ? preSelectedOpIds[0] : undefined;\n        let currSelectTextId = (selectedOpIds.length === 1 && this.getOpTypeByOpId(selectedOpIds[0]) === 'text') ? selectedOpIds[0] : undefined;\n        if (preSelectTextId !== currSelectTextId) {\n            if (currSelectTextId && this.opsManager.currOp instanceof SelectOp) {\n                return this._handleSelectTextOp(currSelectTextId);\n            }\n        }\n        (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n    _handleSelectTextOp(currSelectTextId) {\n        var _a;\n        //选中文本框\n        const data = this.drawOpsOfPage[currSelectTextId].data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        this.color = data.color,\n            this.fontSize = data.fontSize;\n        this.text = data.text;\n        this.isFocus = false;\n        clearTextArea(this.textAreaContainer, this.textArea);\n        this.isNewText = false;\n        this.lastSnapshotData = data;\n        this.dependOn = currSelectTextId;\n        return (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.show({\n            left: boundary.sx,\n            top: boundary.sy,\n            container: this.app.container.textAreaEl,\n            fontSize: data.fontSize,\n            scale: 1 / this.app.camera.scale,\n            color: data.color\n        });\n    }\n    /**\n     * 处于选择模式下，点击已有文本，开始编辑模式。\n     */\n    handleClickExistText(event, mx, my) {\n        var _a, _b;\n        if (this.opsManager.currOp instanceof SelectOp) {\n            const lastSnapshot = this.detectIfClickOnText(mx, my);\n            //点击已有文本\n            if (lastSnapshot) {\n                //编辑文本框时，没有任何元素被应该被选中\n                if (this.opsManager.selectedOpIds.length > 0) {\n                    this.opsManager.currOp.dispatch(this.opsManager.currOp.getSnapshot([]));\n                }\n                this.opsManager.setCurrOp('text');\n                //移除之前绘制的文本框\n                const tempPre = document.getElementById(`${this.getIdPrefix(lastSnapshot.board, lastSnapshot.page.toString())}-${lastSnapshot.opId}-pre`);\n                (_a = tempPre === null || tempPre === void 0 ? void 0 : tempPre.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(tempPre);\n                const data = lastSnapshot.data;\n                this.isFocus = true;\n                this.textFocusAtPage = this.opsManager.currPage;\n                this.isNewText = false;\n                this.lastSnapshotData = data;\n                this.dependOn = lastSnapshot.opId;\n                this.text = data.text;\n                this.textBeforeEdit = this.text;\n                this.textArea.value = this.text;\n                this.pre.innerText = this.text;\n                this.fontSize = data.fontSize;\n                this.color = data.color;\n                const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n                setElementsStyle(this.textAreaContainer, this.textArea, this.pre, Object.assign({ fontSize: data.fontSize, color: data.color }, boundary));\n                (_b = this.toolbar) === null || _b === void 0 ? void 0 : _b.show({\n                    left: boundary.sx,\n                    top: boundary.sy,\n                    container: this.app.container.textAreaEl,\n                    fontSize: data.fontSize,\n                    scale: 1 / this.app.camera.scale,\n                    color: data.color\n                });\n                this.textArea.focus();\n                this.beginBatch();\n                return true;\n            }\n        }\n    }\n    /**\n     * 当用户点击速度很慢时，会触发mouseup来创建文本\n     */\n    handleMouseUp(event, mx, my) {\n        if (this.isMouseDown) {\n            this.handleClick(event, mx, my);\n        }\n    }\n    handleMouseMove(event) {\n        if (!this.isFocus) {\n            if (this.app.container.isTargetOnContainer(event.target)) {\n                document.body.style.cursor = 'text';\n            }\n            else {\n                document.body.style.cursor = 'auto';\n            }\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n    }\n    /**\n     * 点击空白处创建一个空白版\n     */\n    handleClick(event, mx, my) {\n        var _a;\n        if (!this.isFocus) {\n            //创建新文本\n            this.isNewText = true;\n            this.isFocus = true;\n            this.textFocusAtPage = this.opsManager.currPage;\n            this.dependOn = undefined;\n            this.text = ' ';\n            this.textBeforeEdit = this.text;\n            this.pre.innerText = this.text;\n            setElementsStyle(this.textAreaContainer, this.textArea, this.pre, {\n                fontSize: this.fontSize,\n                color: this.color,\n                sx: mx,\n                sy: my\n            });\n            this.beginBatch();\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.show({\n                left: mx,\n                top: my,\n                container: this.app.container.textAreaEl,\n                fontSize: this.fontSize,\n                scale: 1 / this.app.camera.scale,\n                color: this.color\n            });\n            this.textArea.focus();\n        }\n    }\n    getSnapshot(inProgress, skipUndo = false) {\n        if (this.isNewText) {\n            return {\n                boundary: this.getBoundaryRect(this.isNewText),\n                type: this.type,\n                color: this.color,\n                text: this.text,\n                fontSize: this.fontSize,\n                inProgress: inProgress,\n                skipUndo: inProgress || skipUndo\n            };\n        }\n        else {\n            /**\n             * EditText中得到的boundary已经包含了之前操作的转换结果。\n             */\n            return {\n                type: this.type,\n                color: this.color,\n                text: this.text,\n                fontSize: this.fontSize,\n                boundary: this.getBoundaryRect(this.isNewText),\n                dependOn: this.dependOn,\n                inProgress: inProgress,\n                skipUndo: inProgress || skipUndo\n            };\n        }\n    }\n    /**\n     * 若处于编辑状态，使用this.pre，否则使用被选择的pre\n     */\n    getBoundaryRect(isNewText) {\n        const rect = this.workingPre.getBoundingClientRect();\n        let w = rect.width;\n        let h = rect.height;\n        w = w / this.app.camera.scale;\n        h = h / this.app.camera.scale;\n        let ptsInWord;\n        if (isNewText) {\n            const sx = rect.x - this.app.container.left;\n            const sy = rect.y - this.app.container.top;\n            ptsInWord = this.app.camera.convertToPointInWorld(sx, sy);\n        }\n        else {\n            /**\n             * ios上不能用rect.y - this.app.container.top确定sy。\n             * https://openradar.appspot.com/radar?id=6668472289329152\n             *\n             * ios上如果容器有fixed，且键盘将webview向上推时，getBoundingClientRect的top值是错误的。\n             *\n             * 由于ios上暂时不支持创建文本。编辑旧文本时，文本的sx，sy又不会变化，因此，可以用之前快照的\n             * sx，sy来确定位置。\n             */\n            const data = this.lastSnapshotData;\n            const rect = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n            ptsInWord = [rect.sx, rect.sy];\n        }\n        return {\n            sx: ptsInWord[0],\n            sy: ptsInWord[1],\n            w, h\n        };\n    }\n    draw(snapshot, ctx, opts) {\n        const div = opts.div;\n        /**\n         * 只有当文本模式下正在编辑，且该快照是正被编辑的快照，才跳过绘制。\n         */\n        const snapshotIsEditing = snapshot.opId === this.dependOn || snapshot.opId === this.opIdToDraw;\n        if (!this.isFocus || !snapshotIsEditing) {\n            const boardName = this.app.room.currIndex;\n            const pageIndex = this.app.room.currBoard.currIndex;\n            const preId = `${this.getIdPrefix(boardName, pageIndex.toString())}-${snapshot.opId}-pre`;\n            if (!div.querySelector(`[id='${preId}']`)) {\n                const temp = document.createElement('pre');\n                temp.style.lineHeight = `${DEFAULT_LINEHEIGHT}`;\n                temp.id = preId;\n                div.appendChild(temp);\n            }\n            const pre = div.querySelector(`[id='${preId}']`);\n            if (pre) {\n                this.drawSnapshot(snapshot.data, pre, snapshot.opId);\n            }\n            else {\n                console.error('DEV-->', `找不到id为: ${preId} 的pre`);\n            }\n        }\n    }\n    //在预览中绘制，不能依赖于pre\n    preview(snapshot, ctx) {\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        const { sx, sy } = boundary;\n        const paddingScale = PADDING * data.fontSize / DEFAULT_FONTSIZE;\n        ctx.save();\n        ctx.fillStyle = data.color;\n        ctx.font = `${data.fontSize}px ${textConfig.getFontFamily()}`;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'top';\n        printTextInMultiLine(ctx, data.text, sx + paddingScale, sy + paddingScale * 2, data.fontSize * DEFAULT_LINEHEIGHT);\n        // ctx.fillText(data.text, sx + paddingScale, sy + paddingScale)\n        ctx.restore();\n    }\n    hide(snapshot, ctx, div) {\n        var _a;\n        //移除之前绘制的文本框\n        const tempPre = document.getElementById(`${this.getIdPrefix(snapshot.board, snapshot.page.toString())}-${snapshot.opId}-pre`);\n        (_a = tempPre === null || tempPre === void 0 ? void 0 : tempPre.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(tempPre);\n    }\n    drawSnapshot(data, pre, opId) {\n        var _a, _b, _c;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        const { sx, sy } = boundary;\n        drawTextSnapshot(pre, {\n            text: data.text,\n            sx,\n            sy,\n            fontSize: data.fontSize,\n            color: data.color\n        });\n        //选中的文本框位置更新时，更新工具栏位置\n        if (this.opsManager.selectedOpIds.length === 1 && this.opsManager.selectedOpIds[0] === opId) {\n            this.fontSize = data.fontSize;\n            this.color = data.color;\n            (_a = this.toolbar) === null || _a === void 0 ? void 0 : _a.setFontsize(data.fontSize);\n            (_b = this.toolbar) === null || _b === void 0 ? void 0 : _b.setColor(data.color);\n            (_c = this.toolbar) === null || _c === void 0 ? void 0 : _c.updatePosition({\n                left: sx,\n                top: sy\n            });\n        }\n    }\n    detectIfClickOnText(mx, my) {\n        for (let opId in this.drawOpsOfPage) {\n            if (this.drawOpsOfPage[opId].data.type !== 'text') {\n                continue;\n            }\n            else {\n                const data = this.drawOpsOfPage[opId].data;\n                const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n                if (pointInRect(boundary, [mx, my])) {\n                    return this.drawOpsOfPage[opId];\n                }\n            }\n        }\n        return undefined;\n    }\n    setFontSize(fontSize) {\n        if (this.fontSize !== fontSize) {\n            this.fontSize = fontSize;\n            this.isNewText = false;\n            this.lastSnapshotData = this.drawOpsOfPage[this.dependOn].data;\n            this.text = this.lastSnapshotData.text;\n            setElementsSize(this.textAreaContainer, this.textArea, this.workingPre, this.fontSize);\n            this.dispatch(this.getSnapshot(false));\n        }\n    }\n    setColor(color) {\n        if (this.color !== color) {\n            this.color = color;\n            this.isNewText = false;\n            this.lastSnapshotData = this.drawOpsOfPage[this.dependOn].data;\n            this.text = this.lastSnapshotData.text;\n            this.dispatch(this.getSnapshot(false));\n        }\n    }\n    registerToolbar(toolbar) {\n        this.toolbar = toolbar;\n        this.toolbar.onFontSizeChange(this.setFontSize.bind(this));\n        this.toolbar.onColorChange(this.setColor.bind(this));\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const textOpSnapshot = transformOp.data;\n        const newData = Object.assign({}, baseOp.data);\n        for (let key in textOpSnapshot) {\n            if (key !== 'dependOn') {\n                newData[key] = textOpSnapshot[key];\n            }\n        }\n        /**\n         * EditText的boundary已经将之前编辑操作的结果包含进去了。\n         */\n        newData.dx = 0;\n        newData.dy = 0;\n        newData.scaleX = {\n            coordinate: 0,\n            factor: 1\n        };\n        newData.scaleY = {\n            coordinate: 0,\n            factor: 1\n        };\n        const res = Object.assign({}, baseOp, {\n            data: newData\n        });\n        return res;\n    }\n    /**\n     * 更新textArea和pre的字体\n     */\n    updateFontFamily() {\n        const txts = this.app.container.el.getElementsByTagName('textarea');\n        const pres = this.app.container.el.getElementsByTagName('pre');\n        for (let i = 0; i < txts.length; i++) {\n            txts[i].style.fontFamily = textConfig.getFontFamily();\n        }\n        for (let i = 0; i < pres.length; i++) {\n            pres[i].style.fontFamily = textConfig.getFontFamily();\n        }\n    }\n}\nexport default TextOp;\n","import { DEFAULT_FONTSIZE } from \"../../config\";\nimport textConfig from \"./textConfig\";\nexport const MIN_WIDTH = 20;\nexport const PADDING = 4;\nexport const DEFAULT_LINEHEIGHT = 1.2;\n//创建一个textArea用于编辑文字\n//创建pre用于辅助textArea确定文字的宽，高\nexport function createElements() {\n    const textArea = document.createElement('textarea');\n    const pre = document.createElement('pre');\n    const textAreaContainer = document.createElement('div');\n    textAreaContainer.style.position = 'absolute';\n    textAreaContainer.style.display = 'none';\n    textAreaContainer.style.outline = '1px dashed black';\n    // textArea.style.position = 'absolute'\n    textArea.style.resize = 'none';\n    textArea.style.overflow = 'hidden';\n    textArea.style['white-space'] = 'nowrap';\n    textArea.style.background = 'transparent';\n    //进入编辑模式时才显示textArea\n    // textArea.style.display = 'none'\n    textArea.style.fontFamily = textConfig.getFontFamily();\n    textArea.style.fontSize = `${DEFAULT_FONTSIZE}px`;\n    textArea.style.transformOrigin = 'left top';\n    textArea.style.padding = `${PADDING}px`;\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxSizing = 'content-box';\n    textArea.style.lineHeight = `${DEFAULT_LINEHEIGHT}`;\n    pre.style.width = 'fit-content';\n    pre.style.position = 'absolute';\n    pre.style.userSelect = 'none';\n    pre.style.pointerEvents = 'none';\n    pre.style.visibility = 'hidden';\n    pre.style.fontFamily = textConfig.getFontFamily();\n    pre.style.fontSize = `${DEFAULT_FONTSIZE}px`;\n    pre.style.transformOrigin = 'left top';\n    pre.style.padding = `${PADDING}px`;\n    pre.style.margin = '0';\n    pre.style.lineHeight = `${DEFAULT_LINEHEIGHT}`;\n    //设置为border-box时，getBoundingClientRect返回pre内容的宽高\n    pre.style.boxSizing = 'border-box';\n    textAreaContainer.appendChild(textArea);\n    return {\n        textAreaContainer,\n        textArea,\n        pre\n    };\n}\nexport function setElementsStyle(textAreaContainer, textArea, pre, opts) {\n    textAreaContainer.style.display = 'block';\n    textAreaContainer.style.left = `${opts.sx}px`;\n    textAreaContainer.style.top = `${opts.sy}px`;\n    pre.style.left = `${opts.sx}px`;\n    pre.style.top = `${opts.sy}px`;\n    textArea.style.color = opts.color;\n    textArea.style.width = `${(opts.w || MIN_WIDTH) * DEFAULT_FONTSIZE / opts.fontSize - PADDING * 2}px`;\n    textArea.style.height = `${(opts.h || (opts.fontSize + 12)) * DEFAULT_FONTSIZE / opts.fontSize - PADDING * 2}px`;\n    setElementsSize(textAreaContainer, textArea, pre, opts.fontSize);\n}\n/**\n * 根据fontSize，设置缩放量\n * 由于浏览器有最小字体大小限制，因此textAera使用transform修改字体大小，而不是改变fontSize。\n *\n *\n * 设置文本框，文本框包含盒，以及pre的宽高，及缩放值\n * 先设置pre缩放值和textArea的缩放值。\n * 然后根据pre的宽高，设置textArea的宽高, 以及textAreaContainer的宽高\n * @param textAreaContainer\n * @param textArea\n * @param pre\n * @param fontSize\n */\nexport function setElementsSize(textAreaContainer, textArea, pre, fontSize) {\n    pre.style.transform = `scale(${(fontSize) / DEFAULT_FONTSIZE})`;\n    textArea.style.transform = `scale(${(fontSize) / DEFAULT_FONTSIZE})`;\n    //clientWidth，clientHeight包含了padding\n    textArea.style.width = `${pre.clientWidth - PADDING * 2}px`;\n    textArea.style.height = `${pre.clientHeight - PADDING * 2}px`;\n    textAreaContainer.style.width = `${(pre.clientWidth) * fontSize / DEFAULT_FONTSIZE}px`;\n    textAreaContainer.style.height = `${(pre.clientHeight) * fontSize / DEFAULT_FONTSIZE}px`;\n}\n/**\n * 绘制快照\n */\nexport function drawTextSnapshot(pre, opts) {\n    pre.innerText = opts.text;\n    pre.style.color = opts.color;\n    pre.style.left = `${opts.sx}px`;\n    pre.style.top = `${opts.sy}px`;\n    pre.style.position = 'absolute';\n    pre.style.fontFamily = textConfig.getFontFamily();\n    pre.style.fontSize = `${DEFAULT_FONTSIZE}px`;\n    pre.style.margin = '0';\n    pre.style.transform = `scale(${opts.fontSize / DEFAULT_FONTSIZE})`;\n    pre.style.userSelect = 'none';\n    pre.style.transformOrigin = 'left top';\n    pre.style.padding = `${PADDING}px`;\n    pre.style.pointerEvents = 'none';\n}\nexport function clearTextArea(textAreaContainer, textArea) {\n    textArea.value = '';\n    textAreaContainer.style.display = 'none';\n}\n","/**\n * 文本编辑框工具栏\n */\nimport { DEFAULT_FONTSIZE } from \"../../config\";\nimport { MAX_FONT_SIZE, MIN_FONT_SIZE, testFontSizeText } from \"../../misc/text\";\nimport './TextToolbar.less';\nconst ID = 'iower-23nsdf090sd';\nclass TextToolbar {\n    constructor() {\n        this.fontSize = DEFAULT_FONTSIZE;\n        this.color = 'black';\n        //powerpoint中的字体大小表\n        this.fonts = [8, 9, 10, 11, 12, 14, 16, 18, 20, 24, 28, 32, 36, 40, 44, 48, 54, 60, 66, 72, 80, 88];\n        this.colors = [\n            'rgb(224,32,32)',\n            'rgb(250,100,0)',\n            'rgb(247,181,0)',\n            'rgb(109,212,0)',\n            'rgb(68,215,182)',\n            'rgb(50,197,255)',\n            'rgb(0,145,255)',\n            'rgb(98,54,255)',\n            'rgb(182,32,224)',\n            'rgb(109,114,120)',\n            'rgb(0,0,0)',\n            'rgb(255,255,255)'\n        ];\n        this.fontInputPrevValue = '';\n        this.colorCells = [];\n        this.colorPlatteOpen = false;\n        this.toolbarContainer = document.createElement('div');\n        this.toolbarContainer.className = 'text-toolbar';\n        this.toolbarContainer.id = ID;\n        //颜色按钮，点击弹出颜色选择弹窗\n        this.colorBtn = document.createElement('div');\n        this.colorBtn.innerText = '';\n        this.colorBtn.className = 'color flex-cell';\n        const colorDot = document.createElement('span');\n        this.colorBtn.appendChild(colorDot);\n        //颜色选择弹窗及弹窗内的元素\n        this.colorPlatteContainer = document.createElement('div');\n        this.colorPlatteContainer.className = 'platte-container';\n        this.colorPlatteContainer.onmousemove = (ev) => {\n            ev.stopPropagation();\n        };\n        for (let i = 0; i < this.colors.length; i++) {\n            const colorCell = document.createElement('div');\n            colorCell.className = 'color-cell';\n            colorCell.style.backgroundColor = this.colors[i];\n            const isWhite = this.colors[i] === 'rgb(255,255,255)';\n            if (isWhite) {\n                colorCell.style.border = '1px solid #D9D9DB';\n            }\n            this.colorPlatteContainer.appendChild(colorCell);\n            this.colorCells.push(colorCell);\n        }\n        //字体输入框\n        this.fontInput = document.createElement('input');\n        this.fontInput.className = 'fontsize input';\n        //字体增加按钮\n        this.fontIncBtn = document.createElement('div');\n        this.fontIncBtn.className = 'fontsize inc flex-cell';\n        const incText = document.createElement('span');\n        incText.innerText = '+';\n        this.fontIncBtn.appendChild(incText);\n        //字体减小按钮\n        this.fontDecBtn = document.createElement('div');\n        this.fontDecBtn.className = 'fontsize dec flex-cell';\n        const decText = document.createElement('span');\n        decText.innerText = '-';\n        this.fontDecBtn.appendChild(decText);\n        this.toolbarContainer.appendChild(this.fontInput);\n        this.toolbarContainer.appendChild(this.fontIncBtn);\n        this.toolbarContainer.appendChild(this.fontDecBtn);\n        this.toolbarContainer.appendChild(this.colorBtn);\n        this.toolbarContainer.appendChild(this.colorPlatteContainer);\n        this._registerEvents();\n        this._stopPropagation();\n    }\n    show(args) {\n        const { left, top, container, fontSize, color, scale } = args;\n        this.setFontsize(fontSize);\n        this.setColor(color);\n        if (!document.getElementById(ID)) {\n            container.appendChild(this.toolbarContainer);\n        }\n        this.toolbarContainer.style.display = 'flex';\n        this.toolbarContainer.style.transformOrigin = 'left bottom';\n        this.toolbarContainer.style.transform = `scale(${scale})`;\n        this.colorPlatteContainer.style.display = 'none';\n        this.updatePosition({\n            left, top\n        });\n    }\n    resize(scale) {\n        this.toolbarContainer.style.transform = `scale(${scale})`;\n    }\n    updatePosition(args) {\n        const { left, top } = args;\n        this.toolbarContainer.style.left = `${left - 23}px`;\n        this.toolbarContainer.style.top = `${top - 78}px`;\n    }\n    hide() {\n        this.toolbarContainer.style.display = 'none';\n    }\n    setFontsize(fontSize) {\n        this.fontSize = fontSize;\n        this.fontInputPrevValue = Math.round(fontSize).toString();\n        this.fontInput.value = this.fontInputPrevValue;\n    }\n    setColor(color) {\n        this.color = color;\n        this.colorBtn.firstChild.style.backgroundColor = this.color;\n        this.setColorPlatteState(false);\n    }\n    setColorPlatteState(open) {\n        this.colorPlatteOpen = open;\n        if (open) {\n            this.colorPlatteContainer.style.display = 'flex';\n        }\n        else {\n            this.colorPlatteContainer.style.display = 'none';\n        }\n    }\n    /**\n     * 修改字体大小时，调用外界注册的回调函数\n     */\n    onFontSizeChange(func) {\n        this.fontSizeCb = func;\n    }\n    /**\n     * 修改颜色时，调用外界注册的回调函数\n     */\n    onColorChange(func) {\n        this.colorCb = func;\n    }\n    _registerEvents() {\n        for (let i = 0; i < this.colorCells.length; i++) {\n            this.colorCells[i].onclick = (event) => {\n                this.setColor(this.colors[i]);\n                if (this.colorCb) {\n                    this.colorCb(this.color);\n                }\n            };\n        }\n        this.colorBtn.onclick = (event) => {\n            this.setColorPlatteState(!this.colorPlatteOpen);\n        };\n        this.fontIncBtn.onclick = (event) => {\n            if (this.fontSize < MAX_FONT_SIZE) {\n                this._sendFontChangeCommand(Math.min(this.fontSize + 8, MAX_FONT_SIZE));\n            }\n        };\n        this.fontDecBtn.onclick = (event) => {\n            if (this.fontSize > MIN_FONT_SIZE) {\n                this._sendFontChangeCommand(Math.max(this.fontSize - 8, MIN_FONT_SIZE));\n            }\n        };\n        const setFontSizeByInput = (blurAfterSet) => {\n            const fontSizeStr = this.fontInput.value;\n            if (fontSizeStr === '') {\n                return;\n            }\n            else {\n                const textType = testFontSizeText(fontSizeStr);\n                let fontSize;\n                if (textType === 'exceed_max') {\n                    fontSize = MAX_FONT_SIZE;\n                }\n                else if (textType === 'exceed_min') {\n                    fontSize = MIN_FONT_SIZE;\n                }\n                else {\n                    fontSize = Number(fontSizeStr);\n                }\n                this.fontInput.value = fontSize;\n                this.fontInputPrevValue = fontSize.toString();\n                this._sendFontChangeCommand(this.fontInput.value);\n                if (blurAfterSet) {\n                    this.fontInput.blur();\n                }\n            }\n        };\n        this.fontInput.onkeydown = (event) => {\n            event.stopPropagation();\n            if (event.key === 'Enter') {\n                setFontSizeByInput(true);\n            }\n        };\n        this.fontInput.onblur = () => {\n            setFontSizeByInput(false);\n        };\n        this.fontInput.oninput = (event) => {\n            let text = event.target.value;\n            text = text.replace(/\\D/g, '');\n            this.fontInput.value = text;\n        };\n    }\n    /**\n     * 通过文本框工具栏发送字体变化事件\n     * @param text\n     */\n    _sendFontChangeCommand(text) {\n        const fontSize = typeof text === 'string' ? Number(text) : text;\n        this.setFontsize(fontSize);\n        if (this.fontSizeCb) {\n            this.fontSizeCb(this.fontSize);\n        }\n    }\n    /**\n     * 点击文本框按钮的操作不应该传递给上层容器\n     */\n    _stopPropagation() {\n        this.toolbarContainer.onmousedown = (event) => {\n            event.stopPropagation();\n        };\n        this.toolbarContainer.ontouchstart = (event) => {\n            event.stopPropagation();\n        };\n        //mouseup还是往上传，否则如果鼠标在文本框工具栏上松开，应用会以为鼠标一直处于按下状态\n        // this.toolbarContainer.onmouseup = (event) => {\n        //     event.stopPropagation()\n        // }\n    }\n}\nexport default TextToolbar;\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./TextToolbar.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./TextToolbar.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./TextToolbar.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".text-toolbar {\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    justify-content: space-around;\\n\\n    position: absolute;\\n\\n    box-sizing: border-box;\\n    height: 48px;\\n    margin: 12px 12px 24px;\\n\\n    -webkit-user-select: none;\\n\\n       -moz-user-select: none;\\n\\n        -ms-user-select: none;\\n\\n            user-select: none;\\n    background-color: white;\\n    border-radius: 4px;\\n    box-shadow: 0 8px 24px -4px rgba(0,0,0,0.1);\\n\\n    z-index: 7;\\n}\\n\\n    .text-toolbar .flex-cell {\\n        display: flex;\\n        flex: 1;\\n        justify-content: center;\\n        align-items: center;\\n        cursor: pointer;\\n        border: none;\\n        width: 40px;\\n        height: 40px;\\n    }\\n\\n    .text-toolbar .color {\\n        border-radius: 12px;\\n    }\\n\\n    .text-toolbar .color span {\\n            width: 18px;\\n            height: 18px;\\n            border-radius: 9px;\\n        }\\n\\n    .text-toolbar .fontsize.input {\\n        height: 24px;\\n        vertical-align: top;\\n        box-sizing: border-box;\\n        width: 40px;\\n        outline: none;\\n        border: 1px solid rgba(0, 0, 0, 0.3);\\n        margin: 0 6px 0 8px;\\n        text-align: center;\\n    }\\n\\n    .text-toolbar .fontsize.inc, .text-toolbar .fontsize.dec {\\n        border-radius: 12px;\\n        font-size: 32px;\\n        line-height: 24px;\\n        text-align: center;\\n        vertical-align: top;\\n        position: relative;\\n        top: -3px;\\n    }\\n\\n    .text-toolbar .platte-container {\\n        position: absolute;\\n        display: none;\\n        flex-direction: row;\\n        flex-wrap: wrap;\\n\\n        align-items: center;\\n        justify-content: space-around;\\n        box-shadow: 0 8px 24px -4px rgba(0,0,0,0.1);\\n\\n        bottom: 56px;\\n        right: 0;\\n        background-color: white;\\n        width: 100%;\\n    }\\n\\n    .text-toolbar .platte-container .color-cell {\\n            width: 20px;\\n            height: 20px;\\n            border-radius: 10px;\\n            margin: 10px;\\n            display: inline-block;\\n            box-sizing: border-box\\n        }\\n\\n    .text-toolbar .platte-container .color-cell:hover {\\n                cursor: pointer;\\n            }\", \"\"]);\n\n","/**\n * 页面操作\n */\nimport Operation from \"../Operation\";\nclass PageOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'page';\n        this.description = \"页面相关操作\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.pageChange.tap(\"pageChangePlugin\", this.onPageChange.bind(this));\n    }\n    onPageChange() {\n        return this.emit('event:appState:change', 'page', {\n            activeIndex: this.opsManager.currBoard.getCurrPageIndex(),\n            pageNames: this.opsManager.currBoard.pageNames.slice(),\n            currPage: this.opsManager.currBoard.currIndex,\n            pagePayloads: this.opsManager.currBoard.payloadOfPages\n        });\n    }\n    eventsToListen() {\n        return {\n            'page:goto': {\n                value: this.goto.bind(this),\n                information: {\n                    args: 'page: number',\n                    message: `跳转至页面`\n                }\n            },\n            'page:add': {\n                value: this.add.bind(this),\n                information: {\n                    args: 'opt: {insertAfter?: number, payload?: any}',\n                    message: `添加页面。默认添加至当前board最后`\n                }\n            },\n            'page:delete': {\n                value: this.delete.bind(this),\n                information: {\n                    args: 'page: number',\n                    message: '删除页面。只有当页面数量大于1时可以删除页面'\n                }\n            }\n        };\n    }\n    add(opt) {\n        this.dispatch({\n            type: this.type,\n            action: 'add',\n            insertAfter: opt.insertAfter,\n            payload: opt.payload\n        });\n    }\n    goto(page) {\n        //跳转至页面\n        if (page !== this.opsManager.currBoard.currIndex &&\n            this.opsManager.currBoard.pageNames.includes(page.toString())) {\n            this.dispatch({\n                type: this.type,\n                action: 'goto',\n                page: page,\n            });\n        }\n    }\n    delete(page) {\n        const pages = this.opsManager.currBoard.pages;\n        if (page in pages && Object.keys(pages).length > 1) {\n            this.dispatch({\n                type: this.type,\n                action: 'delete',\n                page: page\n            });\n        }\n    }\n}\nexport default PageOp;\n","/**\n * 图片相关操作\n */\nimport Operation from \"../Operation\";\nimport { addImage, draw, getImageProperPosition } from \"./util\";\nimport { getTransformedBoundary } from \"../../misc/shapeHelper\";\nclass ImageOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'image';\n        this.description = \"图片操作\";\n        /**\n         * initWidth, initHeight可能是图片的固有宽高，也可以是用户指定的该图片的显示宽高\n         *\n         * ImageOp快照中的boundary完全决定了图片相对于其他快照的位置\n         *\n         * @param url\n         * @param initWidth\n         * @param initHeight\n         * @param page\n         */\n        this.dispatchImage = (url, initWidth, initHeight, page) => {\n            const { sx, sy, width, height } = getImageProperPosition(this, initWidth, initHeight);\n            if (page) {\n                this.dispatchFromPage({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                }, page);\n            }\n            else {\n                this.dispatch({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                });\n            }\n        };\n    }\n    eventsToListen() {\n        return {\n            'image:upload': {\n                value: this.addImage.bind(this),\n                information: {\n                    args: `url: string, opts?: {\n                        width?: number,\n                        height?: number\n                    }`,\n                    message: `上传图片`\n                }\n            },\n        };\n    }\n    addImage(url, opts) {\n        return addImage(this, url, opts);\n    }\n    preview(snapshot, ctx, opts) {\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        return draw(ctx, data.url, boundary, {\n            page: opts.page,\n            supportToDataUrl: opts.supportToDataUrl,\n            preview: true\n        });\n    }\n    draw(snapshot, ctx, opts) {\n        /**\n         * page是该图片的容器页面。this.opsManager.currPage是当前打开的页面。\n         * 生成预览图时，currPage和图片的容器页面不是同一个页面\n         */\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        return draw(ctx, data.url, boundary, {\n            page: opts.page,\n            div: opts.div,\n            id: snapshot.opId,\n            type: 'image'\n        });\n    }\n    hide(snapshot, ctx, div) {\n        var _a;\n        //移除之前绘制的文本框\n        let image = div.querySelector(`[id='image-${snapshot.opId}']`);\n        (_a = image === null || image === void 0 ? void 0 : image.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(image);\n    }\n}\nexport default ImageOp;\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgwIiBoZWlnaHQ9IjM2MCIgdmlld0JveD0iMCAwIDQ4MCAzNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wIDBINDgwVjM2MEgwVjBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQ3OCAySDJWMzU4SDQ3OFYyWk0wIDBWMzYwSDQ4MFYwSDBaIiBmaWxsPSIjRDlEOURCIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTY2LjI5NCAxMjZIMzE1TDMxNSAxODkuMzg2TDI5NS4wNDkgMTY3LjY0QzI5MS4xNDQgMTYzLjM4NCAyODQuNDU2IDE2My4zMTEgMjgwLjQ2IDE2Ny40ODNMMjM4Ljc5MiAyMTAuOTc3TDIxOS45MTcgMTkxLjU3MkMyMTYuNzg0IDE4OC4zNTEgMjExLjYxMyAxODguMzQxIDIwOC40NjggMTkxLjU1MUwxNjcuMzM4IDIzMy41MjlIMTY2LjI5NEwxNjYuMjk0IDEyNlpNMTY2LjI5NCAyNDEuNTI5QzE2NC40NzggMjQxLjUyOSAxNjIuODAzIDI0MC45MjQgMTYxLjQ2IDIzOS45MDRIMTYxLjA5MkwxNjEuMjUyIDIzOS43NDFDMTU5LjQ0NyAyMzguMjc0IDE1OC4yOTQgMjM2LjAzNiAxNTguMjk0IDIzMy41MjlWMTI2QzE1OC4yOTQgMTIxLjU4MiAxNjEuODc2IDExOCAxNjYuMjk0IDExOEgzMTVDMzE5LjQxOCAxMTggMzIzIDEyMS41ODIgMzIzIDEyNlYyMzMuNTI5QzMyMyAyMzcuOTQ4IDMxOS40MTggMjQxLjUyOSAzMTUgMjQxLjUyOUgxNjYuMjk0Wk0yMDEgMTcxLjgwNEMyMDkuMjg0IDE3MS44MDQgMjE2IDE2NS4wODggMjE2IDE1Ni44MDRDMjE2IDE0OC41MiAyMDkuMjg0IDE0MS44MDQgMjAxIDE0MS44MDRDMTkyLjcxNiAxNDEuODA0IDE4NiAxNDguNTIgMTg2IDE1Ni44MDRDMTg2IDE2NS4wODggMTkyLjcxNiAxNzEuODA0IDIwMSAxNzEuODA0WiIgZmlsbD0iI0U2RTdFQiIvPgo8L3N2Zz4K\"","/**\n * board操作，一个board可以对应于一个文档。\n */\nimport Operation from \"../Operation\";\nclass BoardOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'board';\n        this.description = \"board相关操作\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.boardChange.tap(\"boardChangePlugin\", this.onBoardChange.bind(this));\n    }\n    onBoardChange() {\n        return this.emit('event:appState:change', 'board', {\n            boardNames: Object.keys(this.app.room.boards),\n            boardDisplayNames: this.app.room.getBoardDisplayNames(),\n            currBoard: this.app.room.currIndex,\n            currBoardDisplayName: this.app.room.currBoard.displayName\n        });\n    }\n    eventsToListen() {\n        return {\n            'board:goto': {\n                value: this.goto.bind(this),\n                information: {\n                    args: 'boardName: string',\n                    message: `跳转至board。若board不存在，则创建board`\n                }\n            },\n            'board:add': {\n                value: this.add.bind(this),\n                information: {\n                    args: 'boardName: string, pageCount: number',\n                    message: `创建[pageCount]页数的board`\n                }\n            },\n            'board:delete': {\n                value: this.delete.bind(this),\n                information: {\n                    args: 'boardName: string',\n                    message: '删除board。只有当board数量大于1时可以删除board'\n                }\n            }\n        };\n    }\n    goto(boardName) {\n        //跳转至board。若board不存在，则创建board\n        if (boardName !== this.app.room.currIndex) {\n            this.dispatch({\n                type: this.type,\n                action: 'goto',\n                boardName: boardName\n            });\n        }\n    }\n    add(displayName, pageCount) {\n        const boardName = `${displayName}_${new Date().valueOf()}`;\n        this.dispatch({\n            type: this.type,\n            action: 'add',\n            boardName: boardName,\n            displayName: displayName,\n            pageCount\n        });\n    }\n    delete(boardName) {\n        const boards = this.app.room.boards;\n        if (boardName in boards && Object.keys(boards).length > 1) {\n            this.dispatch({\n                type: this.type,\n                action: 'delete',\n                boardName: boardName\n            });\n        }\n    }\n}\nexport default BoardOp;\n","/**\n * 复制操作\n */\nimport Operation from \"../Operation\";\nimport deepClone from 'lodash.clonedeep';\nexport const COPY_PASTE_SHIFT = 50;\nclass DuplicateOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'duplicate';\n        this.description = \"拷贝drawable快照\";\n        this.copiedSnapshotArray = [];\n    }\n    registerHooks() {\n        this.opsManager.hooks.keydown.tap(\"KeydownPlugin\", this.handleKeyDown.bind(this));\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `复制当前选中的元素`\n                }\n            }\n        };\n    }\n    handleKeyDown(ev) {\n        const key = ev.key.toLocaleLowerCase();\n        if (key === 'c' && (this.isKeyDown('control') || this.isKeyDown('command')) && this.opsManager.selectedOpIds.length > 0) {\n            ev.preventDefault();\n            let selectedOpIds = this.opsManager.selectedOpIds.filter(opId => {\n                return this.drawOpsOfPage.hasOwnProperty(opId);\n            });\n            this.copiedSnapshotArray = deepClone(selectedOpIds.map(opId => this.drawOpsOfPage[opId]));\n            return true;\n        }\n        else if (key === 'v' && (this.isKeyDown('control') || this.isKeyDown('command')) && this.copiedSnapshotArray.length > 0) {\n            ev.preventDefault();\n            this.execCommand(this.copiedSnapshotArray.slice());\n            return true;\n        }\n    }\n    execCommand(snapshotsToCopy) {\n        if (this.opsManager.selectedOpIds.length > 0\n            || (snapshotsToCopy && snapshotsToCopy.length > 0)) {\n            const snapshot = this.getSnapshot(snapshotsToCopy);\n            this.dispatch(snapshot);\n            const newOpIds = snapshot.duplicates.map(dup => dup.opId);\n            this.opsManager.selectOp.dispatch(this.opsManager.selectOp.getSnapshot(newOpIds));\n        }\n    }\n    getSnapshot(snapshotsToCopy) {\n        const snapshotFromKeyboardCopy = snapshotsToCopy ? true : false;\n        if (!snapshotsToCopy) {\n            const selectedOpIds = this.opsManager.selectedOpIds;\n            snapshotsToCopy = [];\n            for (let i = 0; i < selectedOpIds.length; i++) {\n                const id = selectedOpIds[i];\n                if (this.drawOpsOfPage.hasOwnProperty(id)) {\n                    const snapshot = this.drawOpsOfPage[id];\n                    snapshotsToCopy.push(snapshot);\n                }\n            }\n        }\n        snapshotsToCopy = snapshotsToCopy.map(snapshot => {\n            snapshot = deepClone(snapshot);\n            snapshot.data.dx = (snapshot.data.dx ? snapshot.data.dx : 0) + COPY_PASTE_SHIFT;\n            snapshot.data.dy = (snapshot.data.dy ? snapshot.data.dy : 0) + COPY_PASTE_SHIFT;\n            snapshot.opId = this.opsManager.currPage.getNextOpId(true);\n            return snapshot;\n        });\n        //ctrl-c, ctrl-v后更新copiedSnapshotArray， 若不更新，连续更新会复制在相同的位置\n        if (snapshotFromKeyboardCopy) {\n            this.copiedSnapshotArray = snapshotsToCopy.slice();\n        }\n        return {\n            type: this.type,\n            duplicates: snapshotsToCopy,\n        };\n    }\n}\nexport default DuplicateOp;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { getArrowPoints, getTransformedPoint, getLineCoef, getXFromCoefAndOffset, getLineFromPointsY, dist } from \"../../misc/shapeHelper\";\nimport PenOp from \"./PenOp\";\nimport drawConfig from \"./drawConfig\";\nclass PenArrowOp extends PenOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'pen-arrow';\n        this.description = \"带箭头的涂鸦操作工具。\\n首先使用op:pen-arrow:activate设置画布为涂鸦模式。\" +\n            \"通过op:pen-arrow:lineWidth, op:pen-arrow:color设置涂鸦的宽度和颜色。然后画布会监听鼠标动作，生成涂鸦。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getArrowPoints(points, withArrow) {\n        let arrowPoints = [];\n        if (points.length > 1 && withArrow) {\n            var lastTwoPoints = points.length > 2 ? [points[points.length - 3], points[points.length - 1]] : points.slice(points.length - 2), lineCoef = getLineCoef(lastTwoPoints);\n            // if we have last two points far apart, we want to add another point closer to the last one\n            // so that the doesn't get cut by quadraticCurveTo and so that arrow is not disconnected from the line\n            if (dist(lastTwoPoints[0], lastTwoPoints[1]) > 1) {\n                var lastPointX = lastTwoPoints[1][0] - lastTwoPoints[0][0] > 0 ?\n                    getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, 1) :\n                    2 * lastTwoPoints[1][0] - getXFromCoefAndOffset(lastTwoPoints[1], lineCoef, 1);\n                var lastPointY = lastTwoPoints[1][0] - lastTwoPoints[0][0] === 0 ?\n                    lastTwoPoints[1][1] + (lastTwoPoints[1][1] - lastTwoPoints[0][1] > 0 ? 1 : -1) :\n                    getLineFromPointsY(lastTwoPoints, lastPointX);\n                lastTwoPoints.push([lastPointX, lastPointY]);\n            }\n            arrowPoints = getArrowPoints(this.lineWidth + 1, lastTwoPoints);\n        }\n        return arrowPoints;\n    }\n    getSnapshot(inProgress) {\n        const points = this.points;\n        const withArrow = !inProgress && points.length > 2;\n        let arrowPoints = this.getArrowPoints(points, withArrow);\n        const currOpId = this.opsManager.currPage.getOpId();\n        const pkg = this.app.room.opIdSnapshotMap[currOpId];\n        if (!pkg || !pkg.snapshot.hasOwnProperty('category')) {\n            /**\n             * 保险措施，如果之前发送的opId是部分数据，则发送一份完整的数据出去\n             */\n            return Object.assign({ points: points.slice(), arrowPoints, total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n        let boundaryRect = {\n            boundary: this.getBoundaryRectOfFreeDraw()\n        };\n        if (this.sampleSeq > 0 && inProgress) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), total: points.length });\n        }\n        else if (this.sampleSeq > 0) {\n            return Object.assign(Object.assign({}, boundaryRect), { points: points.slice(points.length - drawConfig.pointsPerBatch), arrowPoints, inProgress: inProgress, total: points.length });\n        }\n        else {\n            return Object.assign({ points: points.slice(), arrowPoints, total: points.length }, this.getFreeDrawCommonProperty({\n                inProgress: inProgress\n            }));\n        }\n    }\n    draw(snapshot, ctx) {\n        ctx.save();\n        const data = snapshot.data;\n        this._draw(snapshot, ctx);\n        ctx.strokeStyle = data.color;\n        ctx.lineWidth = data.lineWidth;\n        ctx.globalAlpha = data.opacity;\n        ctx.stroke();\n        const arrowPoints = data.arrowPoints;\n        if (arrowPoints.length === 3) {\n            ctx.beginPath();\n            ctx.moveTo(...getTransformedPoint(arrowPoints[0], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[1], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[2], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.fillStyle = data.color;\n            ctx.fill();\n        }\n        ctx.restore();\n    }\n}\nexport default PenArrowOp;\n","import { getArrowPoints, getTransformedPoint } from \"../../misc/shapeHelper\";\nimport LineOp from \"./LineOp\";\nclass LineArrowOp extends LineOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'line-arrow';\n        this.description = \"绘制带箭头线段。\\n首先使用op:line-arrow:activate设置画布为线段模式。\" +\n            \"通过op:line-arrow:lineWidth, op:line-arrow:color设置线段的宽度和颜色。然后画布会监听鼠标动作，生成线段。具体用法如下：\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    event: `op:${this.type}:activate`,\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    getSnapshot(inProgress) {\n        const withArrow = !inProgress && this.points.length > 2;\n        let arrowPoints = [];\n        if (this.points.length > 1 && withArrow) {\n            const lastTwoPoints = [this.sp, this.ep];\n            arrowPoints = getArrowPoints(this.lineWidth + 1, lastTwoPoints);\n        }\n        return Object.assign({ arrowPoints }, this.getTwoPointShapeCommonProperty({\n            inProgress\n        }));\n    }\n    draw(snapshot, ctx) {\n        ctx.save();\n        const data = snapshot.data;\n        const { sp, ep } = this.getStartEndPointFromSnapshot(data);\n        ctx.beginPath();\n        ctx.moveTo(...getTransformedPoint(sp, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.lineTo(...getTransformedPoint(ep, data.dx, data.dy, data.scaleX, data.scaleY));\n        ctx.strokeStyle = data.color;\n        ctx.lineWidth = data.lineWidth;\n        ctx.globalAlpha = data.opacity;\n        ctx.stroke();\n        const arrowPoints = data.arrowPoints;\n        if (arrowPoints.length === 3) {\n            ctx.beginPath();\n            ctx.moveTo(...getTransformedPoint(arrowPoints[0], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[1], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.lineTo(...getTransformedPoint(arrowPoints[2], data.dx, data.dy, data.scaleX, data.scaleY));\n            ctx.fillStyle = data.color;\n            ctx.fill();\n        }\n        ctx.restore();\n    }\n}\nexport default LineArrowOp;\n","import SelectBase from \"../SelectOp/SelectBase\";\nclass ElementEraserOp extends SelectBase {\n    constructor() {\n        super(...arguments);\n        this.type = 'element-eraser';\n        this.description = \"删除元素。\";\n        this.lastSelectedOpIds = [];\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    postMouseMove(event) {\n        if (this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = `url(${require('../../../assets/cursors/element-eraser.svg')}) -1 17, auto`;\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n    }\n    postMouseUp(idsBeenSelected) {\n        this.postClick(idsBeenSelected);\n    }\n    postClick(idsBeenSelected) {\n        this.dispatch(this.getSelectionSnapshot(false, []));\n        if (idsBeenSelected.length > 0) {\n            this.dispatch(this.getSnapshot(idsBeenSelected));\n        }\n        this.lastSelectedOpIds = [];\n    }\n    getSnapshot(idsBeenSelected) {\n        let deleteOpIds = idsBeenSelected.slice();\n        return {\n            type: 'element-eraser',\n            deleteOpIds: deleteOpIds,\n            dependOn: deleteOpIds\n        };\n    }\n    /**\n     * 转换关联的绘制类Op的快照图\n     */\n    transformOp(baseOp, transformOp) {\n        const newData = Object.assign({}, baseOp.data, {\n            hidden: true\n        });\n        return Object.assign({}, baseOp, {\n            data: newData\n        });\n    }\n}\nexport default ElementEraserOp;\n","import Operation from \"../Operation\";\nimport drawConfig from \"../DrawOp/drawConfig\";\nimport { drawUserName } from \"../util\";\nclass LaserOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'laser';\n        this.description = \"镭射灯\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    registerHooks() {\n        this.opsManager.hooks.opChange.tap('OpChange', this.handleOpChange.bind(this));\n    }\n    /**\n     * 当操作类型变化时，关闭镭射灯\n     */\n    handleOpChange(newType) {\n        var _a;\n        if (newType !== 'laser' && ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'laser') {\n            document.body.style.cursor = 'default';\n            this.dispatch(this.getSnapshot(false));\n        }\n    }\n    handleMouseLeave(event, mx, my) {\n        this.dispatch(this.getSnapshot(false));\n    }\n    handleMouseMove(event, mx, my) {\n        if (this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = 'none';\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n        this.dispatch(this.getSnapshot(true, [mx, my]));\n    }\n    getSnapshot(inProgress, point) {\n        return {\n            type: 'laser',\n            point,\n            inProgress: inProgress,\n            skipUndo: true,\n            reuseOpType: 'laser',\n            color: drawConfig.strokeColor\n        };\n    }\n    draw(snapshot, ctx) {\n        const data = snapshot.data;\n        /**\n         * 激光笔大小固定为12 * 12的红色圆形\n         */\n        const r = 6 / this.app.camera.scale;\n        if (snapshot.data.inProgress && data.point) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.arc(data.point[0], data.point[1], r, 0, Math.PI * 2, true);\n            ctx.shadowColor = 'rgba(255, 0, 0, 0.5)';\n            ctx.shadowBlur = 8;\n            ctx.fillStyle = '#ff0000';\n            ctx.fill();\n            ctx.restore();\n            if (snapshot.uid !== this.app.account && this.app.appConfig.showLaserNickname) {\n                drawUserName({\n                    ctx,\n                    account: snapshot.uid,\n                    scale: this.app.camera.scale,\n                    px: data.point[0],\n                    py: data.point[1],\n                    bgColor: data.color\n                });\n            }\n        }\n    }\n}\nexport default LaserOp;\n","/**\n * 删除操作，可通过ctrl-v还原\n */\nimport Operation from \"../Operation\";\nclass LockOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'lock';\n        this.description = \"锁定元素。\";\n    }\n    eventsToListen() {\n        return {\n            'lock': {\n                value: this.lockOps.bind(this),\n                information: {\n                    args: 'opIds',\n                    message: `锁定元素`\n                }\n            },\n            'unlock': {\n                value: this.unlockOps.bind(this),\n                information: {\n                    args: 'opIds',\n                    message: `解锁元素`\n                }\n            }\n        };\n    }\n    lockOps(opIds) {\n        this.dispatch(this.getSnapshot(opIds, 'lock'));\n    }\n    unlockOps(opIds) {\n        this.dispatch(this.getSnapshot(opIds, 'unlock'));\n    }\n    getSnapshot(opIds, action) {\n        return {\n            type: this.type,\n            action,\n            dependOn: opIds.slice()\n        };\n    }\n    /**\n     * 锁定，或者解锁元素\n     */\n    transformOp(baseOp, transformOp) {\n        const newData = Object.assign({}, baseOp.data, {\n            locked: transformOp.data.action === 'lock' ? true : false\n        });\n        return Object.assign({}, baseOp, {\n            data: newData\n        });\n    }\n}\nexport default LockOp;\n","/**\n * 背景Op\n *\n * 背景Op和ImageOp类似。区别在于背景Op不会进入快照队列中被undo，redo，clear等操作处理\n */\n/**\n * 图片相关操作\n */\nimport Operation from \"../Operation\";\nimport { addImage, draw, getBackgroundImagePorperPosition, getImageProperPosition } from \"./util\";\nclass BackgroundOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'background';\n        this.description = \"设置背景操作\";\n        this.getBoundaryFromSnapshot = (snapshot) => {\n            let boundary;\n            if (snapshot.data.hasOwnProperty('imgWidth')) {\n                //老版本：背景图片盛满canvas, 快照数据中包含imgWidth, imgHeight\n                const { sx, sy, width, height } = getImageProperPosition(this, snapshot.data.imgWidth, snapshot.data.imgHeight);\n                boundary = {\n                    sx, sy, w: width, h: height\n                };\n            }\n            else {\n                //3.0.2之后的版本\n                //背景快照和其他快照一样，使用世界坐标系，即无论容器大小如何，无论如何缩放，\n                //背景快照和其他元素的相对位置不变\n                boundary = snapshot.data.boundary;\n            }\n            return boundary;\n        };\n        this.dispatchImage = (url, imgWidth, imgHeight, page) => {\n            const { sx, sy, width, height } = getBackgroundImagePorperPosition(this, imgWidth, imgHeight);\n            if (page) {\n                this.dispatchFromPage({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                }, page);\n            }\n            else {\n                this.dispatch({\n                    type: this.type,\n                    url: url,\n                    boundary: {\n                        sx: sx,\n                        sy: sy,\n                        w: width,\n                        h: height\n                    }\n                });\n            }\n        };\n    }\n    eventsToListen() {\n        return {\n            'background:imageUpload': {\n                value: this.addImage.bind(this),\n                information: {\n                    args: `url: string, opts?: {\n                        width?: number,\n                        height?: number,\n                        pageIndex?: number\n                    }`,\n                    message: `上传背景图片`\n                }\n            },\n        };\n    }\n    addImage(url, opts) {\n        return addImage(this, url, opts);\n    }\n    preview(snapshot, ctx, opts) {\n        const data = snapshot.data;\n        return draw(ctx, data.url, this.getBoundaryFromSnapshot(snapshot), {\n            page: opts.page,\n            supportToDataUrl: opts.supportToDataUrl,\n            preview: true\n        });\n    }\n    draw(snapshot, ctx, opts) {\n        const data = snapshot.data;\n        return draw(ctx, data.url, this.getBoundaryFromSnapshot(snapshot), {\n            page: opts.page,\n            div: opts.div,\n            id: snapshot.opId,\n            type: 'background'\n        });\n    }\n}\nexport default BackgroundOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from './CameraBoundOp';\nimport { shouldDispatch } from \"./util\";\nimport { showToast } from \"../../../component/toast\";\nclass PanOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'pan';\n        this.activate = false;\n        this.description = \"平移操作\";\n    }\n    eventsToListen() {\n        return {\n            activate: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `设置工具栏状态为：${this.type}`\n                }\n            }\n        };\n    }\n    handleMouseMove(event, mx, my, clientX, clientY) {\n        if (!this.app.enableCameraTransform) {\n            return;\n        }\n        if (!shouldDispatch(this.app))\n            return;\n        if (this.activate) {\n            document.body.style.cursor = 'grabbing';\n        }\n        else if (this.app.container.isTargetOnContainer(event.target)) {\n            document.body.style.cursor = 'grab';\n        }\n        else {\n            document.body.style.cursor = 'auto';\n        }\n        if (this.activate && this.lastPoint) {\n            this.dispatch(this.getSnapshot(clientX - this.lastPoint[0], clientY - this.lastPoint[1]));\n            this.lastPoint = [clientX, clientY];\n        }\n    }\n    handleMouseDown(event, mx, my, clientX, clientY) {\n        if (!this.app.appConfig.cameraTransformEnabled) {\n            return;\n        }\n        if (!shouldDispatch(this.app)) {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n            return;\n        }\n        this.activate = true;\n        this.beginBatch();\n        this.lastPoint = [clientX, clientY];\n    }\n    handleMouseUp(event, mx, my, clientX, clientY) {\n        if (!this.app.appConfig.cameraTransformEnabled) {\n            return;\n        }\n        if (!shouldDispatch(this.app))\n            return;\n        if (this.activate && this.lastPoint) {\n            this.dispatch(this.getSnapshot(clientX - this.lastPoint[0], clientY - this.lastPoint[1]));\n            this.lastPoint = undefined;\n        }\n        this.activate = false;\n    }\n    getSnapshot(dx, dy) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'pan',\n            dx: -dx,\n            dy: -dy,\n            animate: false\n        });\n    }\n}\nexport default PanOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nimport { showToast } from \"../../../component/toast\";\nconst FACTOR = 1 / 0.86;\nconst UPPER_BOUND = 20;\nconst LOWER_BOUND = 0.03;\nclass ZoomOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'zoom';\n        this.sp = [0, 0];\n        this.description = \"缩放操作\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousewheel.tap(\"MousewheelPlugin\", this.handleMouseWheel.bind(this));\n    }\n    eventsToListen() {\n        return {\n            'zoom:in': {\n                value: this.zoomIn.bind(this),\n                information: {\n                    args: '',\n                    message: `缩放`\n                }\n            },\n            'zoom:out': {\n                value: this.zoomOut.bind(this),\n                information: {\n                    args: '',\n                    message: `缩放`\n                }\n            },\n            'zoom:to': {\n                value: this.zoomTo.bind(this),\n                information: {\n                    args: 'scale: number, animate: boolean',\n                    message: `缩放`\n                }\n            }\n        };\n    }\n    handleMouseWheel(event, mx, my, clientX, clientY) {\n        if (!this.app.appConfig.cameraTransformEnabled) {\n            return;\n        }\n        if (!shouldDispatch(this.app)) {\n            showToast({\n                msg: '你当前处于视角跟随状态',\n                type: 'info'\n            });\n            return;\n        }\n        let scale;\n        if (event.deltaY > 0) {\n            scale = FACTOR;\n        }\n        else {\n            scale = 1 / FACTOR;\n        }\n        if (this.app.camera.zoomFactor * scale >= UPPER_BOUND && scale > 1) {\n            return;\n        }\n        else if (this.app.camera.zoomFactor * scale <= LOWER_BOUND && scale < 1) {\n            return;\n        }\n        if (this.isMouseDown) {\n            return;\n        }\n        if (!this.app.container.isTargetOnContainer(event.target)) {\n            return;\n        }\n        this.beginBatch();\n        this.dispatch(this.getSnapshot(scale, false, [clientX, clientY]));\n    }\n    zoomIn() {\n        if (!shouldDispatch(this.app))\n            return;\n        if ((this.app.camera.zoomFactor * FACTOR) >= UPPER_BOUND) {\n            return;\n        }\n        this.beginBatch();\n        return this.dispatch(this.getSnapshot(FACTOR, false));\n    }\n    zoomOut() {\n        if (!shouldDispatch(this.app))\n            return;\n        if ((this.app.camera.zoomFactor / FACTOR) <= LOWER_BOUND) {\n            return;\n        }\n        this.beginBatch();\n        return this.dispatch(this.getSnapshot(1 / FACTOR, false));\n    }\n    zoomTo(destScaleNum, animate) {\n        if (!shouldDispatch(this.app))\n            return;\n        this.beginBatch();\n        return this.dispatch(this.getSnapshot(destScaleNum / this.app.camera.zoomFactor, animate));\n    }\n    getSnapshot(scale, animate, center) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'zoom',\n            animate: animate,\n            center,\n            scale\n        });\n    }\n}\nexport default ZoomOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nclass ResetCameraOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'reset-camera';\n        this.description = \"重置视角\";\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand(animate = true) {\n        if (!shouldDispatch(this.app))\n            return;\n        return this.dispatch(this.getSnapshot(animate));\n    }\n    getSnapshot(animate) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'reset-camera',\n            animate\n        });\n    }\n}\nexport default ResetCameraOp;\n","/**\n * 移动操作。\n * 移动操作必须跟在选择操作之后\n */\nimport Operation from \"../Operation\";\nimport penUrl from '../../../assets/cursors/pen.svg';\nimport elementEraserUrl from '../../../assets/cursors/element-eraser.svg';\nimport cursorUrl from '../../../assets/cursors/cursor.svg';\nimport drawConfig from \"../DrawOp/drawConfig\";\nimport { drawUserName } from \"../util\";\nconst penImg = new Image();\nconst elementEraserImg = new Image();\nconst cursorImg = new Image();\npenImg.src = penUrl;\nelementEraserImg.src = elementEraserUrl;\ncursorImg.src = cursorUrl;\nclass MousePointerOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'mouse-pointer';\n        this.description = \"展示鼠标位置\";\n        this.sampleSeq = 0;\n    }\n    registerHooks() {\n        this.opsManager.hooks.mousemove.tap(\"MousemovePlugin\", this.handleMouseMove.bind(this));\n        this.opsManager.hooks.mouseleave.tap(\"MousemovePlugin\", this.handleMouseLeave.bind(this));\n    }\n    handleMouseMove(event, mx, my) {\n        var _a;\n        if (!this.app.showCursor || ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'laser')\n            return;\n        const inContainer = this.app.container.isTargetOnContainer(event.target);\n        /**\n         * 减少网络传输数据量。每pointsPerBatch才传输一次数据\n         */\n        if (this.sampleSeq % 6 === 0) {\n            this.dispatch(this.getSnapshot([mx, my], inContainer));\n        }\n        this.sampleSeq += 1;\n    }\n    handleMouseLeave(event, mx, my) {\n        var _a;\n        if (!this.app.showCursor || ((_a = this.opsManager.currOp) === null || _a === void 0 ? void 0 : _a.type) === 'laser')\n            return;\n        this.dispatch(this.getSnapshot([mx, my], false));\n        this.sampleSeq = 0;\n    }\n    getSnapshot(point, inContainer) {\n        return {\n            type: 'mouse-pointer',\n            point: [Number(point[0].toFixed(1)), Number(point[1].toFixed(1))],\n            c: drawConfig.strokeColor,\n            show: inContainer ? 1 : 0,\n            op: this.opsManager.currOp ? this.opsManager.currOp.type : '',\n            reuseOpType: 'mouse-pointer',\n            nickname: this.app.nickname\n        };\n    }\n    preview() {\n        return;\n    }\n    draw(snapshot, ctx) {\n        const now = new Date().valueOf();\n        if (now - snapshot.time > 5000) {\n            return;\n        }\n        const data = snapshot.data;\n        if (snapshot.uid === this.app.account || !data.show || !data.point) {\n            return;\n        }\n        const img = this.getImageByOpType(data.op);\n        let [px, py] = this.mapPointInsideContainer(data.point[0], data.point[1]);\n        if (this.opsManager.drawOpTypes.includes(data.op)) {\n            /**\n             * 画笔的图片位置需要微调\n             */\n            px = px - 1 / this.app.camera.scale;\n            py = py - 27 / this.app.camera.scale;\n        }\n        let cursorSize = 32 / this.app.camera.scale;\n        ctx.drawImage(img, px, py, cursorSize, cursorSize);\n        if (!this.app.appConfig.showCursorNickname)\n            return;\n        drawUserName({\n            ctx,\n            account: data.nickname || snapshot.uid,\n            scale: this.app.camera.scale,\n            px,\n            py,\n            bgColor: data.c\n        });\n    }\n    /**\n     * 另一个用户的鼠标位置可能超出屏幕，若超出屏幕，找到屏幕边缘位置绘制\n     * @param point\n     */\n    mapPointInsideContainer(px, py) {\n        const [worldSx, worldSy] = this.app.camera.convertToPointInWorld(0, 0);\n        const [worldEx, worldEy] = this.app.camera.convertToPointInWorld(this.app.container.width, this.app.container.height);\n        if (px < worldSx + 30) {\n            px = worldSx + 30;\n        }\n        else if (px > worldEx - 25) {\n            px = worldEx - 25;\n        }\n        if (py < worldSy + 30) {\n            py = worldSy + 30;\n        }\n        else if (py > worldEy - 15) {\n            py = worldEy - 15;\n        }\n        return [px, py];\n    }\n    getImageByOpType(opType) {\n        if (opType === 'element-eraser') {\n            return elementEraserImg;\n        }\n        else if (this.opsManager.drawOpTypes.includes(opType)) {\n            return penImg;\n        }\n        else {\n            return cursorImg;\n        }\n    }\n}\nexport default MousePointerOp;\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MzA2MTkyNDQ5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwOTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU2IDBsNjEyLjY1MDY2NyA1NzMuODI0LTI1MC4yODI2NjcgMjIuNzQxMzMzLTQ1LjQ0IDQuMDk2IDE4LjkwMTMzMyA0MS41NTczMzMgMTUxLjg1MDY2NyAzMzIuNTQ0TDYzMS42OCAxMDI0bC0xNDQuODk2LTMzNi4xMjgtMTguMTc2LTQyLjM2OC0zMy41Nzg2NjcgMzEuNTMwNjY3LTE3Ny43OTIgMTY2Ljc0MTMzM0wyNTYgMCIgcC1pZD0iMjA5NyI+PC9wYXRoPjwvc3ZnPg==\"","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nclass ResizeCameraOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'resize-camera';\n        this.description = \"重置视角\";\n    }\n    registerHooks() {\n        this.opsManager.hooks.resize.tap(\"ResizePlugin\", this.handleResize.bind(this));\n    }\n    handleResize(event, width, height) {\n        if (width === 0 || height === 0) {\n            return;\n        }\n        if (this.app.vision.mode === 'follower') {\n            /**\n             * 如果是跟随者，则用现在的camera-bound重新计算一遍自己的位置\n             */\n            this.app.camera.updateTransParamAndRefresh();\n        }\n        else {\n            this.dispatch(this.getSnapshot(width, height));\n        }\n    }\n    getSnapshot(width, height) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'resize-camera',\n            width,\n            height,\n            animate: false\n        });\n    }\n}\nexport default ResizeCameraOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nclass FitToContentOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'fit-to-content';\n        this.description = \"缩放至完全包含内容\";\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand(animate = true) {\n        if (!shouldDispatch(this.app))\n            return;\n        return this.dispatch(this.getSnapshot(animate));\n    }\n    getSnapshot(animate) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'fit-to-content',\n            animate\n        });\n    }\n}\nexport default FitToContentOp;\n","/**\n * 平移操作\n */\nimport Operation from \"../Operation\";\nimport { convertToCameraBoundSnapshot } from \"./CameraBoundOp\";\nimport { shouldDispatch } from \"./util\";\nclass FitToDocOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'fit-to-doc';\n        this.description = \"缩放至完全包含文档\";\n    }\n    eventsToListen() {\n        return {\n            exec: {\n                value: true,\n                information: {\n                    args: '',\n                    message: `执行${this.type}事件`\n                }\n            }\n        };\n    }\n    execCommand(animate = true) {\n        if (!shouldDispatch(this.app))\n            return;\n        if (!this.app.room.currBoard.currPage.backgroundSnapshot)\n            return;\n        return this.dispatch(this.getSnapshot(animate));\n    }\n    getSnapshot(animate) {\n        return convertToCameraBoundSnapshot(this.app.camera, {\n            type: 'fit-to-doc',\n            animate\n        });\n    }\n}\nexport default FitToDocOp;\n","import RectOp from \"./RectOp\";\nclass RectFillOp extends RectOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'rect-fill';\n    }\n    /**\n     * 这个是新版本的动作。由于需要和老版本互通，因此将type设置为rect，老版本没有rect-fill op，如果type为rect-fill, 则老版本无法理解如何绘制该图形\n     */\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'fill',\n            inProgress\n        });\n    }\n}\nexport default RectFillOp;\n","import EllipseOp from \"./EllipseOp\";\nclass EllipseFillOp extends EllipseOp {\n    constructor() {\n        super(...arguments);\n        this.type = 'ellipse-fill';\n    }\n    /**\n     * 这个是新版本的动作。由于需要和老版本互通，因此将type设置为rect，老版本没有rect-fill op，如果type为rect-fill, 则老版本无法理解如何绘制该图形\n     */\n    getSnapshot(inProgress) {\n        return this.getTwoPointShapeCommonProperty({\n            strokeOrFill: 'fill',\n            inProgress\n        });\n    }\n}\nexport default EllipseFillOp;\n","/**\n * 视频\n */\nimport Operation from \"../Operation\";\nimport { getTransformedBoundary } from \"../../misc/shapeHelper\";\nimport { fetchVideoResource, getVideoResource, videoResourceLoaded } from \"../../resource/resourceCache\";\nimport { getImageProperPosition } from \"../ImageOp/util\";\nclass VideoOp extends Operation {\n    constructor() {\n        super(...arguments);\n        this.type = 'video';\n        this.description = \"视频操作\";\n    }\n    eventsToListen() {\n        return {\n            'video:insert': {\n                value: this.addVideo.bind(this),\n                information: {\n                    args: `url: string, opts: {\n                         width: number,\n                         pageIndex?: number\n                     }`,\n                    message: `上传视频`\n                }\n            },\n        };\n    }\n    addVideo(url, opts) {\n        const currBoard = this.app.room.currBoard;\n        let currPage = this.opsManager.currPage;\n        if (opts && opts.hasOwnProperty('pageIndex')) {\n            const pageName = currBoard.pageNames[opts.pageIndex];\n            if (currBoard.pages.hasOwnProperty(pageName)) {\n                currPage = currBoard.pages[pageName];\n            }\n        }\n        if (videoResourceLoaded(url)) {\n            const video = getVideoResource(url);\n            const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : video.videoWidth;\n            const height = width / video.videoWidth * video.videoHeight;\n            this.dispatchVideo({ url, width, height, page: currPage });\n        }\n        else {\n            currPage.addWaitingResource(url);\n            fetchVideoResource(url, (video) => {\n                const width = (opts === null || opts === void 0 ? void 0 : opts.width) ? opts.width : video.videoWidth;\n                const height = width / video.videoWidth * video.videoHeight;\n                this.dispatchVideo({ url, width, height, page: currPage });\n                currPage.removeWaitingResource(url);\n            });\n        }\n    }\n    dispatchVideo(opt) {\n        const { sx, sy, width, height } = getImageProperPosition(this, opt.width, opt.height);\n        this.dispatch({\n            type: this.type,\n            url: opt.url,\n            boundary: {\n                w: width,\n                h: height,\n                sx,\n                sy\n            }\n        });\n    }\n    preview() { }\n    draw(snapshot, ctx, opts) {\n        /**\n         * page是该图片的容器页面。this.opsManager.currPage是当前打开的页面。\n         * 生成预览图时，currPage和图片的容器页面不是同一个页面\n         */\n        const data = snapshot.data;\n        const boundary = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n        const div = this.app.container.el;\n        const url = data.url;\n        if (videoResourceLoaded(url) && div) {\n            let video = div.querySelector(`[id='video-${snapshot.opId}']`);\n            if (!video) {\n                video = getVideoResource(url).cloneNode(true);\n                video.id = `video-${snapshot.opId}`;\n                video.style.userSelect = 'none';\n                video.style.position = 'absolute';\n                video.controls = true;\n                video.controlsList.value = \"nodownload nofullscreen\";\n                video.playsInline = true;\n                video.disablePictureInPicture = true;\n                div.appendChild(video);\n            }\n            /**\n             * 将视频加载在container顶层容器中。顶层容器没有用scale。不会影响video控制按钮的功能\n             */\n            const [sx, sy] = this.app.camera.convertWorldPointInContainer(boundary.sx, boundary.sy);\n            const [ex, ey] = this.app.camera.convertWorldPointInContainer(boundary.sx + boundary.w, boundary.sy + boundary.h);\n            video.style.width = `${ex - sx}px`;\n            video.style.height = `${ey - sy}px`;\n            video.style.left = `${sx}px`;\n            video.style.top = `${sy}px`;\n        }\n        if (!videoResourceLoaded(url)) {\n            //回调函数中必须用变量currPage，而不是this.opsManager.currPage，否则被调用时引用的page可能不对\n            opts.page.addWaitingResource(url);\n            fetchVideoResource(url, () => {\n                opts.page.removeWaitingResource(url);\n            });\n        }\n    }\n    hide(snapshot, ctx, div) {\n        var _a;\n        //移除之前绘制的文本框\n        div = this.app.container.el;\n        let video = div.querySelector(`[id='video-${snapshot.opId}']`);\n        (_a = video === null || video === void 0 ? void 0 : video.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(video);\n    }\n}\nexport default VideoOp;\n","/**\n * 一个白板应用中含有一个房间。房间在通信中和频道一一对应\n *\n * 一个房间包含一个白板(WhiteBoard)，以及0到N个文件白板(FileBoard)。\n *\n * 每个白板包含1到N个子页面\n */\nimport Board from \"../board\";\nimport { cameraSnapshotTypes } from \"../ops/types\";\nimport { transitionToCameraBound } from \"../animation\";\nimport { addGlobalOp, addOpInRoom } from \"./actions\";\nimport { getCameraBoundFromGlobalOp } from \"./util\";\nclass Room {\n    constructor(app, dataHub) {\n        this.currIndex = 'whiteboard';\n        this.isReceivingBatchSnapshots = false;\n        this.boards = {};\n        this.pkgIdOpIdMap = {};\n        this.pageToRefresh = undefined;\n        this.pageToIncRefresh = undefined;\n        /**\n         * 所有快照的数据之源\n         */\n        this.opIdSnapshotMap = {};\n        //文档类快照的opId\n        this.boardsSnapshotIds = [];\n        //全局快照的opId\n        this.globalSnapshotIds = [];\n        this.boardOps = {};\n        this._startRefreshLoop2 = () => {\n            cancelAnimationFrame(this.refreshAnimationTimer);\n            this.refreshAnimationTimer = requestAnimationFrame(this._startRefreshLoop2);\n            if (this.pageToRefresh && this.pageToRefresh === this.currBoard.currPage) {\n                this.currBoard.currPage.refresh();\n                this.pageToRefresh = undefined;\n            }\n            if (this.pageToIncRefresh && this.pageToIncRefresh === this.currBoard.currPage) {\n                this.currBoard.currPage.incRefresh();\n                this.pageToIncRefresh = undefined;\n            }\n        };\n        this.app = app;\n        this.dataHub = dataHub;\n        this._init();\n    }\n    get currBoard() {\n        return this.boards[this.currIndex];\n    }\n    getBoardDisplayNames() {\n        return Object.keys(this.boards).map(boardName => {\n            return this.boards[boardName].displayName;\n        });\n    }\n    getPage(boardName, pageIndex) {\n        const board = this.boards[boardName];\n        if (!board) {\n            throw new Error(`找不到名字为${boardName}的白板，当前房间白板列表为: ${Object.keys(this.app.room.boards).join(\",\")}`);\n        }\n        const page = board.pages[pageIndex];\n        if (!page) {\n            throw new Error(`找不到索引为${pageIndex}的白板页，当前房间白板页码为: ${board.pageNames.join(\",\")}`);\n        }\n        return page;\n    }\n    /**\n     * @param partial\n     * @returns\n     */\n    recoverFullSnapshot(partial) {\n        if (!this.opIdSnapshotMap.hasOwnProperty(partial.opId)) {\n            return partial;\n        }\n        const baseOp = this.opIdSnapshotMap[partial.opId].snapshot;\n        return this.app.opsManager.mergePartial(baseOp, partial);\n    }\n    /**\n     * 清空当前会话周期中所有的快照信息。\n     * 连接云信白板2.0服务器时使用该函数，在主播重新连接时，主播和听众使用该函数清空所有白板状态\n     */\n    reset() {\n        var _a, _b, _c;\n        if (LOG) {\n            console.log('白板-->', 'room.reset');\n        }\n        this._init();\n        (_b = (_a = this.currBoard) === null || _a === void 0 ? void 0 : _a.currPage) === null || _b === void 0 ? void 0 : _b.cleanNonCanvasElements();\n        // this.currBoard?.currPage?.refresh()\n        this.pageToRefresh = (_c = this.currBoard) === null || _c === void 0 ? void 0 : _c.currPage;\n    }\n    /**\n     * 开启批量接收快照\n     * 批量接收期间，中间的许多快照的refresh可以省略\n     */\n    beginReceiveBatchSnapshots() {\n        this.isReceivingBatchSnapshots = true;\n    }\n    /**\n     * 结束批量接收快照\n     * 批量接收结束时，refresh应该被refresh的部分\n     */\n    endReceiveBatchSnapshots(boundaries, hasBoardAction, cb) {\n        var _a, _b, _c;\n        this.isReceivingBatchSnapshots = false;\n        this.currBoard.currPage.calcDrawOpQueue();\n        if (boundaries.length > 0) {\n            const lastBoundaryData = boundaries[boundaries.length - 1];\n            if (lastBoundaryData.boundary.width > 0 && lastBoundaryData.boundary.height > 0) {\n                if (lastBoundaryData.animate) {\n                    transitionToCameraBound(this.app.camera, lastBoundaryData.boundary, () => {\n                        var _a;\n                        (_a = this.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n                        if (typeof cb === 'function') {\n                            cb(true);\n                        }\n                    });\n                }\n                else {\n                    this.app.camera.setCameraBound(lastBoundaryData.boundary);\n                    (_a = this.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n                    if (typeof cb === 'function') {\n                        cb(true);\n                    }\n                }\n            }\n            else if (typeof cb === 'function') {\n                cb(false);\n            }\n        }\n        else {\n            // this.currBoard.currPage.refresh()\n            this.pageToRefresh = this.currBoard.currPage;\n            /**\n             * 有文档新增，删除，跳转等操作时，整个文档都需要重新制作\n             */\n            if (hasBoardAction) {\n                (_b = this.app.previewFactory) === null || _b === void 0 ? void 0 : _b.refreshPreviewsOfCurrBoard();\n            }\n            else {\n                (_c = this.app.previewFactory) === null || _c === void 0 ? void 0 : _c.refreshPreviewsOfCurrPage();\n            }\n            if (typeof cb === 'function') {\n                cb(false);\n            }\n        }\n    }\n    /**\n     * 发送本地动作快照给远程服务器\n     * @param snapshot\n     */\n    dispatch(snapshot) {\n        // if (snapshot.data.type !== 'mouse-pointer') {\n        //     console.warn('dispatch', snapshot)\n        // }\n        /**\n         * 本地动作，且当前属于不可编辑状态，且动作不是camera动作时，返回\n         */\n        const isCameraSnapshot = cameraSnapshotTypes.indexOf(snapshot.data.type) !== -1;\n        //如果camera-bound的宽高设置为0，则出现了一些意外\n        if (snapshot.data.type === 'camera-bound' && (snapshot.data.boundary.width === 0 || snapshot.data.boundary.height === 0)) {\n            console.error('白板--> error, camera-bound的宽高为0', snapshot);\n            return;\n        }\n        if (!this.app.editable && !isCameraSnapshot) {\n            // return this.editEnabled && !this.dataHub.isSynchronizing && this.isConnected\n            if (this.app.isRecordPlayer) {\n                return;\n            }\n            if (!this.app.editEnabled) {\n                console.warn('白板--> 请先开启编辑再修改白板');\n            }\n            else if (!this.app.isConnected) {\n                console.warn('白板--> 网络未连接，请等待网络恢复再修改白板');\n            }\n            else if (!this.dataHub.isSynchronizing) {\n                console.warn('白板--> 请等待同步完成再修改白板');\n            }\n            return;\n        }\n        if (this.dataHub.isSynchronizing) {\n            return;\n        }\n        const fakeServerId = this.dataHub.sendSnapshot(snapshot);\n        this.execSnapshot({\n            snapshot,\n            //TODO\n            pkgId: fakeServerId\n        });\n    }\n    execSnapshot(_pkg) {\n        const pkg = {\n            pkgId: _pkg.pkgId,\n            snapshot: this.recoverFullSnapshot(_pkg.snapshot)\n        };\n        this.cacheSnapshot(pkg);\n        this.pushSnapshotToQueue(pkg);\n        const snapshot = pkg.snapshot;\n        if (snapshot.category === 'inPageOp') {\n            //页面内操作\n            const page = this.getPage(snapshot.board, snapshot.page.toString());\n            page.addOpInPage(snapshot);\n        }\n        else if (snapshot.category === 'pageOp') {\n            //页面操作: add/goto/delete\n            const board = this.boards[snapshot.board];\n            if (board) {\n                board.addOpInBoard(snapshot);\n            }\n        }\n        else if (snapshot.category === 'globalOp') {\n            //全局操作： pan/zoom\n            addGlobalOp(this, snapshot);\n        }\n        else {\n            //文档操作\n            addOpInRoom(this, snapshot);\n        }\n    }\n    /**\n     * 从远程批量接收快照\n     * 同步或者录像回放的seekTo时触发\n     * @param snapshots\n     */\n    execBatchSnapshots(_pkgArr, cb) {\n        const pkgArr = _pkgArr.map(_pkg => {\n            const pkg = {\n                pkgId: _pkg.pkgId,\n                snapshot: this.recoverFullSnapshot(_pkg.snapshot)\n            };\n            this.cacheSnapshot(pkg);\n            return pkg;\n        });\n        /**\n         * allInPage: 同一个批次里的数据都是页面内数据\n         */\n        const allInPage = pkgArr.filter(pkg => {\n            return pkg.snapshot.category !== 'inPageOp';\n        }).length === 0;\n        const hasBoardAction = pkgArr.filter(pkg => {\n            return pkg.snapshot.category === 'boardOp';\n        }).length > 0;\n        let boundaryData = pkgArr\n            .filter(pkg => {\n            return pkg.snapshot.category === 'globalOp' && pkg.snapshot.data.type === 'camera-bound';\n        })\n            .map(pkg => {\n            return {\n                animate: pkg.snapshot.data.animate,\n                boundary: getCameraBoundFromGlobalOp(this, pkg.snapshot)\n            };\n        })\n            .filter(boundary => boundary.boundary);\n        let nonCameraPkg = pkgArr.filter(pkg => {\n            return pkg.snapshot.category !== 'globalOp' || pkg.snapshot.data.type !== 'camera-bound';\n        });\n        if (allInPage) {\n            /**\n             * 都是页面内数据，将快照一个个加到页面中(addInPage)处理。\n             * 如果需要refresh，则记录下来，统一处理完之后再refresh。\n             * 如果不需要refresh，则每次调用addOpSnapshot会增量绘制\n             */\n            let needRefresh = false;\n            nonCameraPkg.forEach((pkg) => {\n                this.pushSnapshotToQueue(pkg);\n                const snapshot = pkg.snapshot;\n                const page = this.getPage(snapshot.board, snapshot.page.toString());\n                needRefresh = page.addOpInPage(snapshot, false) || needRefresh;\n            });\n            /**\n             * 之所以和含有非inPageOp分开处理，是因为allInPage可能不需要refresh\n             * 比如说连续的涂鸦操作，在addOpInPage时会绘制增量部分，不会全部refresh\n             */\n            if (needRefresh) {\n                this.endReceiveBatchSnapshots([], false, cb);\n            }\n            else if (typeof cb === 'function') {\n                cb(false);\n            }\n        }\n        else {\n            this.beginReceiveBatchSnapshots();\n            try {\n                for (let pkg of nonCameraPkg) {\n                    this.execSnapshot(pkg);\n                }\n            }\n            finally {\n                this.endReceiveBatchSnapshots(boundaryData, hasBoardAction, cb);\n            }\n        }\n    }\n    /**\n     * 将快照缓存起来\n     * @param pkg\n     */\n    cacheSnapshot(pkg) {\n        var _a;\n        const opId = pkg.snapshot.opId;\n        const pkgId = pkg.pkgId;\n        if (this.opIdSnapshotMap[opId]) {\n            pkg.snapshot = this.recoverFullSnapshot(pkg.snapshot);\n            /**\n             * 该快照之前已经存在, 从pkgIdOpIdMap中删除原来pkg对应的入口\n             */\n            const oldPkgId = this.opIdSnapshotMap[opId].pkgId;\n            const index = this.pkgIdOpIdMap[oldPkgId].indexOf(opId);\n            this.pkgIdOpIdMap[oldPkgId].splice(index, 1);\n            if (this.pkgIdOpIdMap[oldPkgId].length === 0) {\n                delete this.pkgIdOpIdMap[oldPkgId];\n            }\n        }\n        this.opIdSnapshotMap[opId] = pkg;\n        (_a = this.pkgIdOpIdMap)[pkgId] || (_a[pkgId] = []);\n        this.pkgIdOpIdMap[pkgId].push(opId);\n    }\n    pushSnapshotToQueue(pkg) {\n        var _a, _b;\n        const category = pkg.snapshot.category;\n        const opId = pkg.snapshot.opId;\n        const pkgId = pkg.pkgId;\n        if (category === 'globalOp') {\n            this._pushSnapshotInArray(opId, pkgId, this.globalSnapshotIds);\n        }\n        else if (category === 'boardOp') {\n            this._pushSnapshotInArray(opId, pkgId, this.boardsSnapshotIds);\n        }\n        else if (pkg.snapshot.category === 'pageOp') {\n            const board = pkg.snapshot.board;\n            if (!this.boardOps.hasOwnProperty(board)) {\n                this.boardOps[board] = {\n                    pageSnapshotIds: [],\n                    pages: {}\n                };\n            }\n            (_a = this.boardOps[board]).pageSnapshotIds || (_a.pageSnapshotIds = []);\n            this._pushSnapshotInArray(opId, pkgId, this.boardOps[board].pageSnapshotIds);\n        }\n        else if (pkg.snapshot.category === 'inPageOp') {\n            const board = pkg.snapshot.board;\n            const page = pkg.snapshot.page;\n            if (!this.boardOps.hasOwnProperty(board)) {\n                this.boardOps[board] = {\n                    pageSnapshotIds: [],\n                    pages: {}\n                };\n            }\n            if (!this.boardOps[board].pages.hasOwnProperty(page)) {\n                this.boardOps[board].pages[page] = {\n                    inPageSnapshotIds: []\n                };\n            }\n            (_b = this.boardOps[board].pages[page]).inPageSnapshotIds || (_b.inPageSnapshotIds = []);\n            this._pushSnapshotInArray(opId, pkgId, this.boardOps[board].pages[page].inPageSnapshotIds);\n        }\n    }\n    /**\n     * 将opId push到arr中，要求如果：\n     * 1. arr中不能有重复的opId\n     * 2. arr中每一个opId代表的包都递增。包可以通过snapshotMap查询\n     *\n     * 若opId不存在于arr中，则找到合适的位置插入\n     * 若opId存在，则先将原来的元素删除，然后找到合适的位置插入\n     * @param opId\n     * @param arr\n     */\n    _pushSnapshotInArray(opId, pkgId, arr) {\n        const index = arr.indexOf(opId);\n        if (index !== -1) {\n            arr.splice(index, 1);\n        }\n        for (let i = arr.length; i >= 0; i--) {\n            if (i === 0) {\n                arr.splice(i, 0, opId);\n                break;\n            }\n            else {\n                const pkgIdInArr = this.opIdSnapshotMap[arr[i - 1]].pkgId;\n                if (pkgIdInArr <= pkgId) {\n                    arr.splice(i, 0, opId);\n                    break;\n                }\n            }\n        }\n    }\n    /**\n     * 合并延迟发送的数据\n     *\n     * 从第一个到最后一个遍历：\n     * 1. 没有相同的opId，加到队列中\n     * 2. 有相同的opId，自己是partial，如果之前有完整的，则合并到完整的，如果之前是partial，则合并到partial\n     *    有相同的opId，自己是完整，则覆盖之前的快照\n     * @param data\n     */\n    mergeDebouncedData(dataArr, dataType) {\n        if (dataType !== 'snapshot' && dataArr.length > 0) {\n            return dataArr[dataArr.length - 1];\n        }\n        else if (dataType !== 'snapshot') {\n            throw new Error('白板--> mergeDebounceData, dataArr is empty!!');\n        }\n        const map = {};\n        for (let entry of dataArr) {\n            if (entry.type === 'vision') {\n                map['vision'] = entry;\n            }\n            else if (!map.hasOwnProperty(entry.value.opId)) {\n                map[entry.value.opId] = entry.value;\n            }\n            else if (!entry.value.hasOwnProperty('category')) {\n                //之前有数据存在, 当前数据是部分数据\n                if (map[entry.value.opId].hasOwnProperty('category')) {\n                    map[entry.value.opId] = this.app.opsManager.mergePartial(map[entry.value.opId], entry.value);\n                }\n                else {\n                    map[entry.value.opId] = this.app.opsManager.mergeTwoPartial(map[entry.value.opId], entry.value);\n                }\n            }\n            else {\n                //之前有数据存在，但新数据是完整数据，直接覆盖旧数据就好\n                map[entry.value.opId] = entry.value;\n            }\n        }\n        if (Object.keys(map).length === 1) {\n            return {\n                type: 'snapshot',\n                value: Object.keys(map).map(id => map[id])[0]\n            };\n        }\n        else {\n            return {\n                type: 'snapshotArr',\n                value: Object.keys(map).map(id => map[id])\n            };\n        }\n    }\n    _init() {\n        const whiteboard = new Board(this.app, 'whiteboard', 'whiteboard');\n        this.boards = {\n            'whiteboard': whiteboard\n        };\n        this.currIndex = 'whiteboard';\n        this.pkgIdOpIdMap = {};\n        this.opIdSnapshotMap = {};\n        this.boardsSnapshotIds = [];\n        this.globalSnapshotIds = [];\n        this.boardOps = {};\n        this._startRefreshLoop();\n    }\n    _startRefreshLoop() {\n        cancelAnimationFrame(this.refreshAnimationTimer);\n        this._startRefreshLoop2();\n    }\n}\nexport default Room;\n","import { DPI } from \"../container\";\n/**\n * 切换页面时，以及撤销，回退，清空时，应该清空container中属于切换前页面的dom元素\n *\n * 撤销，回退不要清空背景元素。清空背景元素会造成背景图闪烁。只在绝对必要时清空背景图（换页）\n */\nexport const cleanNonCanvasElements = (page, includeBackground = true) => {\n    var _a;\n    if (page.app.container && page.app.container.imageEl) {\n        page.app.container.imageEl.innerHTML = '';\n    }\n    if (page.app.container && page.app.container.domEl) {\n        page.app.container.domEl.innerHTML = '';\n    }\n    if (includeBackground && page.app.container && page.app.container.backgroundEl) {\n        page.app.container.backgroundEl.innerHTML = '';\n    }\n    const videos = page.app.container.el.getElementsByTagName('video');\n    for (let i = 0; i < videos.length; i++) {\n        (_a = videos[i].parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(videos[i]);\n    }\n};\nexport const refresh = (page, opt = {}) => {\n    let { ctx, preview } = opt;\n    if (!ctx)\n        ctx = page.ctx;\n    const frontCtx = preview ? ctx : page.frontCtx;\n    page.opsManager.hooks.refresh.call();\n    ctx.save();\n    ctx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n    if (opt.supportToDataUrl) {\n        ctx.fillStyle = page.app.appConfig.canvas_bg_color;\n        ctx.fillRect(0, 0, page.width * DPI, page.height * DPI);\n    }\n    if (!preview) {\n        page.app.camera.convertCanvas(ctx);\n    }\n    else {\n        page.app.camera.convertPreviewCanvas(ctx);\n    }\n    if (!preview) {\n        frontCtx.save();\n        page.laserCtx.save();\n        frontCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n        page.laserCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n        page.app.camera.convertCanvas(frontCtx);\n        page.app.camera.convertCanvas(page.laserCtx);\n    }\n    if (page.backgroundSnapshot && !preview) {\n        page.opsManager.draw(page.backgroundSnapshot, ctx, {\n            div: page.app.container.backgroundEl,\n            page: page\n        });\n    }\n    else if (page.backgroundSnapshot) {\n        page.opsManager.preview(page.backgroundSnapshot, ctx, {\n            page: page,\n            supportToDataUrl: opt.supportToDataUrl\n        });\n    }\n    drawSelectBox(page, frontCtx);\n    if (!preview) {\n        drawMousePointer(page, page.laserCtx);\n    }\n    if (!preview) {\n        for (let key in page.drawOpQueue) {\n            const div = page.drawOpQueue[key].data.type === 'image' ? page.app.container.imageEl : page.app.container.domEl;\n            page.opsManager.draw(page.drawOpQueue[key], ctx, {\n                div,\n                page: page\n            });\n        }\n        for (let key in page.hiddenOpQueue) {\n            const div = page.hiddenOpQueue[key].data.type === 'image' ? page.app.container.imageEl : page.app.container.domEl;\n            page.opsManager.hide(page.hiddenOpQueue[key], ctx, div);\n        }\n    }\n    else {\n        /**\n         * 预览模式下图片在canvas上绘制，需要将图片排到最下层\n         */\n        let keys = Object.keys(page.drawOpQueue);\n        keys = keys.sort((k1, k2) => {\n            if (page.drawOpQueue[k1].data.type === 'image' && page.drawOpQueue[k2].data.type !== 'image') {\n                return -1;\n            }\n            else if (page.drawOpQueue[k1].data.type !== 'image' && page.drawOpQueue[k2].data.type === 'image') {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        for (let key of keys) {\n            page.opsManager.preview(page.drawOpQueue[key], ctx, {\n                page: page,\n                supportToDataUrl: opt.supportToDataUrl\n            });\n        }\n    }\n    ctx.restore();\n    page.frontCtx.restore();\n    if (!preview) {\n        page.laserCtx.restore();\n    }\n};\nexport const drawInProgressSnapshots = (page) => {\n    page.laserCtx.save();\n    page.frontCtx.save();\n    page.laserCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n    page.frontCtx.clearRect(0, 0, page.width * DPI, page.height * DPI);\n    page.app.camera.convertCanvas(page.laserCtx);\n    page.app.camera.convertCanvas(page.frontCtx);\n    const snapshots = Object.keys(page.lastInProgressSnapshotOfUser)\n        .map(key => page.lastInProgressSnapshotOfUser[key])\n        .sort((sp1, sp2) => {\n        /**\n         * 根据时间固定图层关系，避免连续绘制时由于相对图层变化导致的闪烁\n         */\n        return sp1.beginAt - sp2.beginAt;\n    });\n    snapshots.forEach(sp => {\n        page.opsManager.draw(sp.snapshot, page.frontCtx, {\n            div: page.app.container.domEl,\n            page: page\n        });\n    });\n    drawSelectBox(page, page.frontCtx);\n    drawMousePointer(page, page.laserCtx);\n    page.laserCtx.restore();\n    page.frontCtx.restore();\n};\nconst drawSelectBox = (page, ctx) => {\n    for (const userId in page.lastSelectOfUser) {\n        /**\n         * select，即选择时的框选框，需要放到frontCanvas上绘制\n         * 绘制文本时，选择框需要重绘。如果放到背景canvas上，选择框无法被清空，会导致多重选择框的出现\n         */\n        page.opsManager.draw(page.lastSelectOfUser[userId], ctx);\n    }\n    for (const userId in page.lastInProgressSelectOfUser) {\n        /**\n         * select，即选择时的框选框，需要放到frontCanvas上绘制\n         * 绘制文本时，选择框需要重绘。如果放到背景canvas上，选择框无法被清空，会导致多重选择框的出现\n         */\n        page.opsManager.draw(page.lastInProgressSelectOfUser[userId], ctx);\n    }\n};\n/**\n * 绘制鼠标位置\n * @param ctx\n */\nconst drawMousePointer = (page, ctx) => {\n    for (let key in page.lastMousePointerOfUser) {\n        const snapshot = page.lastMousePointerOfUser[key];\n        page.opsManager.draw(snapshot, ctx);\n    }\n};\n","/**\n * 将opQueue转化为drawOpQueue和hiddenOpQueue的流程\n *\n * opQueue为当前页面所有快照的集合，drawOpQueue和hiddenOpQueue为该页面需要被绘制（隐藏）的快照集合\n */\nimport { snapshotOutOfNormalFlowTypes } from \"../ops/types\";\nimport { transformOp, getSelectedOpIds } from \"./util\";\nconst missOpSet = new Set();\nexport const calcDrawOpQueue = (page, isReceivingBatchSnapshots = false) => {\n    page.drawOpQueue = {};\n    page.hiddenOpQueue = {};\n    const { normalQueue, abNormalQueue } = separateNormalQueue(page, page.opQueue);\n    const noHistOpQueue = removeHistoryOpQueue(page, normalQueue);\n    const noClearQueue = removeClearOpQueue(page, noHistOpQueue);\n    const simpleQueue = removeDuplicateOpQueue(page, noClearQueue);\n    handleAbNormalQueue(page, abNormalQueue);\n    handleNormalQueue(page, simpleQueue);\n    if (!isReceivingBatchSnapshots) {\n        filterSelectedOpIds(page);\n    }\n};\nconst handleAbNormalQueue = (page, abNormalQueue) => {\n    page.backgroundSnapshot = undefined;\n    for (let i = 0; i < abNormalQueue.length; i++) {\n        const snapshot = abNormalQueue[i];\n        if (snapshot.data.type === 'background') {\n            page.backgroundSnapshot = snapshot;\n        }\n        else if (snapshot.data.type === 'select') {\n            if (snapshot.data.inProgress) {\n                page.lastInProgressSelectOfUser[snapshot.uid] = snapshot;\n            }\n            else {\n                //如果选择快照在“正在选择”快照之后，则“正在选择”快照内容无效\n                delete page.lastInProgressSelectOfUser[snapshot.uid];\n                page.lastSelectOfUser[snapshot.uid] = snapshot;\n            }\n        }\n        else if (snapshot.data.type === 'mouse-pointer') {\n            page.lastMousePointerOfUser[snapshot.uid] = snapshot;\n        }\n        else if (snapshot.data.type === 'laser') {\n            //跳过激光笔，激光笔绘制都是增量绘制，均使用addSnapshotAndDrawOnlyIt绘制\n        }\n    }\n};\nconst handleNormalQueue = (page, simpleQueue) => {\n    /**\n     * 将快照按照绘制快照分成多个数组。每个数组第一个元素为绘制快照，后面的元素为对绘制快照的修改\n     */\n    const opQueueMap = {};\n    const dependOnIdArr = [];\n    for (let snapshot of simpleQueue) {\n        //只有最后一个inProgressSelectSnapshot才有效\n        page.lastInProgressSelectOfUser = {};\n        if (Array.isArray(snapshot.data.dependOn)) {\n            for (let dependOpId of snapshot.data.dependOn) {\n                if (!opQueueMap.hasOwnProperty(dependOpId)) {\n                    if (LOG && !missOpSet.has(dependOpId)) {\n                        missOpSet.add(dependOpId);\n                        console.error('DEV-->', 'miss op', opQueueMap, snapshot, dependOpId, simpleQueue);\n                    }\n                }\n                else {\n                    dependOnIdArr.push(dependOpId);\n                    opQueueMap[dependOpId].push(snapshot);\n                }\n            }\n        }\n        else if (typeof snapshot.data.dependOn === 'string') {\n            if (!opQueueMap.hasOwnProperty(snapshot.data.dependOn)) {\n                if (LOG && !missOpSet.has(snapshot.data.dependOn)) {\n                    missOpSet.add(snapshot.data.dependOn);\n                    console.error('DEV-->', 'miss op', opQueueMap, snapshot, snapshot.data.dependOn, simpleQueue);\n                }\n            }\n            else {\n                dependOnIdArr.push(snapshot.data.dependOn);\n                opQueueMap[snapshot.data.dependOn].push(snapshot);\n            }\n        }\n        else {\n            //新的图形类快照\n            opQueueMap[snapshot.opId] = [snapshot];\n        }\n    }\n    removeInprogressSnapshotIfBeenDepended(page, dependOnIdArr);\n    for (let key in opQueueMap) {\n        let drawOp = getDrawOpFromSnapshotQueue(page, key, opQueueMap);\n        if (!drawOp.data.hidden) {\n            page.drawOpQueue[key] = drawOp;\n        }\n        else {\n            page.hiddenOpQueue[key] = drawOp;\n        }\n    }\n};\n/*\n * 找出当前用户选择的图形。首先选择当前用户最后一个选择操作，然后减去其他用户之后选择操作中重复的图形，再删除画布中已经不存在的图形\n */\nconst filterSelectedOpIds = (page) => {\n    //注意下面语句顺序必须在drawOpQueue设置完成之后，因为selectids变化会触发textOp显示工具栏的判断逻辑，该逻辑又依赖于drawOpQueue\n    if (page.app.room.currBoard.currPage !== page) {\n        //非当前页面（通常在预览时被调用，直接跳过对selectOp的修改)\n        return;\n    }\n    const selectedOpIds = getSelectedOpIds(page);\n    page.opsManager.selectOp.setSelectedOpIds(selectedOpIds);\n    const inProgressSelectOfCurrUser = page.lastInProgressSelectOfUser[page.app.account];\n    if (inProgressSelectOfCurrUser) {\n        page.opsManager.selectOp.setInProgressSelectedOpIds(inProgressSelectOfCurrUser.data.selectedOpIds);\n    }\n    else {\n        page.opsManager.selectOp.setInProgressSelectedOpIds([]);\n    }\n};\n/**\n * 根据opIntermediateMap[dependOpId]: Array<IOpSnapshot>，生成一个绘制快照\n */\nconst getDrawOpFromSnapshotQueue = (page, opId, opQueueMap) => {\n    let drawOp = opQueueMap[opId][0];\n    for (let i = 1; i < opQueueMap[opId].length; i++) {\n        drawOp = transformOp(page, drawOp, opQueueMap[opId][i]);\n    }\n    return drawOp;\n};\n/**\n * 将正常的快照和非正常快照分离\n * 非正常快照包括：背景快照，h5快照，video快照等等，这些快照不受clear，undo，redo影响\n */\nconst separateNormalQueue = (page, opQueue) => {\n    //normalQueue, abNormalQueue\n    let normalQueue = [];\n    let abNormalQueue = [];\n    for (let op of opQueue) {\n        if (snapshotOutOfNormalFlowTypes.includes(op.data.type)) {\n            abNormalQueue.push(op);\n        }\n        else {\n            normalQueue.push(op);\n        }\n    }\n    return {\n        normalQueue,\n        abNormalQueue\n    };\n};\n/**\n * 移除历史类操作\n */\nconst removeHistoryOpQueue = (page, opQueue) => {\n    const res = opQueue.slice();\n    for (let i = res.length - 1; i >= 0; i--) {\n        const snapshot = res[i];\n        if (snapshot.data.type === 'undo' || snapshot.data.type === 'redo') {\n            let histSnapshotId = snapshot.data.undoOpId || snapshot.data.redoOpId;\n            for (let k = i - 1; k >= 0; k--) {\n                if (res[k].opId === histSnapshotId) {\n                    //找到要撤销的操作，删除该操作，以及撤销操作\n                    res.splice(i, 1);\n                    res.splice(k, 1);\n                    i--;\n                }\n            }\n        }\n    }\n    return res;\n};\n/**\n * 移除清空操作，以及其之前的所有操作\n * @param opQueue\n */\nconst removeClearOpQueue = (page, opQueue) => {\n    let res = opQueue.slice();\n    for (let i = res.length - 1; i >= 0; i--) {\n        const snapshot = res[i];\n        if (snapshot.data.type === 'clear') {\n            /**\n             * 删除clear之前的inProgress的动作\n             */\n            removeInprogressSnapshotIfBeenDepended(page, res.slice(0, i + 1).map(_ => _.opId));\n            res = res.slice(i + 1);\n            return res;\n        }\n    }\n    return res;\n};\n/**\n * 将复制类操作复制的图形插入到队列中\n * @param opQueue\n */\nconst removeDuplicateOpQueue = (page, opQueue) => {\n    let res = [];\n    for (let i = 0; i < opQueue.length; i++) {\n        const snapshot = opQueue[i];\n        if (snapshot.data.type === 'duplicate') {\n            res = res.concat(snapshot.data.duplicates);\n        }\n        else {\n            res.push(opQueue[i]);\n        }\n    }\n    return res;\n};\n/**\n * 如果快照被依赖，且该快照为未完成的快照，则该快照不应该在inProgressSnapshotOfUser中。\n * 否则，refresh时会绘制依赖后计算出来的快照，增量绘制则会绘制inProgressSnapshotOfUser中未完成快照的原始模样\n *\n * 这个函数主要是为了修复部分涂鸦，因为网络等原因，没有发送已完成的数据快照，导致该涂鸦永远处于未完成的状态。此时，任何对该涂鸦的修改都可能会造成画面闪烁\n * @param page\n * @param dependOn\n */\nconst removeInprogressSnapshotIfBeenDepended = (page, dependOnIds) => {\n    for (let uid in page.lastInProgressSnapshotOfUser) {\n        const sp = page.lastInProgressSnapshotOfUser[uid];\n        if (dependOnIds.includes(sp.snapshot.opId)) {\n            delete page.lastInProgressSnapshotOfUser[uid];\n        }\n    }\n};\n","/**\n * 增量绘制时的一些帮助函数\n */\nimport { transformOp } from \"./util\";\n/**\n * 增加增量式快照到页面中，然后绘制\n * @param page\n * @param snapshot\n */\nexport const addIncrementSnapshot = (page, snapshot) => {\n    if (snapshot.data.type === 'text') {\n        addTextSnapshot(page, snapshot);\n    }\n    else {\n        addSnapshotAndDrawOnlyIt(page, snapshot);\n    }\n};\n/**\n* 添加文本。重绘文本相关内容\n*/\nconst addTextSnapshot = (page, snapshot) => {\n    /**\n     * 只有Page是当前Page才重绘\n     * 重绘文本，需要重绘文本本身，以及文本的select包含盒。\n     * 如果是修改之前的文本，需要在drawOpQueue中覆盖之前的文本\n     */\n    if (page.boardName === page.app.room.currIndex &&\n        page.pageIndex === page.app.room.currBoard.currIndex.toString()) {\n        if (snapshot.data.dependOn) {\n            //修改已有文本\n            const dependOnId = snapshot.data.dependOn;\n            let drawOp = page.drawOpQueue[dependOnId];\n            if (drawOp) {\n                drawOp = transformOp(page, drawOp, snapshot);\n                page.drawOpQueue[dependOnId] = drawOp;\n                setInprogressSnapshot(page, drawOp);\n            }\n        }\n        else {\n            //新文本，不需要修改选择框，因为文本focus时，不用重复绘制选择框\n            page.drawOpQueue[snapshot.opId] = snapshot;\n            setInprogressSnapshot(page, snapshot);\n        }\n        page.app.room.pageToIncRefresh = page;\n        // drawInProgressSnapshots(page)\n    }\n};\n/**\n* 增量绘制快照\n* @param snapshot\n*/\nconst addSnapshotAndDrawOnlyIt = (page, snapshot) => {\n    /**\n     * 只有Page是当前Page才重绘\n     */\n    setInprogressSnapshot(page, snapshot);\n    if (page.boardName === page.app.room.currIndex &&\n        page.pageIndex === page.app.room.currBoard.currIndex.toString()) {\n        if (snapshot.data.type !== 'laser' && snapshot.data.type !== 'mouse-pointer') {\n            page.drawOpQueue[snapshot.opId] = snapshot;\n        }\n        page.app.room.pageToIncRefresh = page;\n        // drawInProgressSnapshots(page)\n    }\n};\n/**\n * 设置inProgress快照。如果是已有快照，不更新时间\n * @param snapshot\n */\nconst setInprogressSnapshot = (page, snapshot) => {\n    if (snapshot.data.type === 'select') {\n        if (snapshot.data.inProgress) {\n            page.lastInProgressSelectOfUser[snapshot.uid] = snapshot;\n        }\n    }\n    else if (snapshot.data.type === 'mouse-pointer') {\n        page.lastMousePointerOfUser[snapshot.uid] = snapshot;\n    }\n    else if (page.lastInProgressSnapshotOfUser.hasOwnProperty(snapshot.uid) &&\n        page.lastInProgressSnapshotOfUser[snapshot.uid].snapshot.opId === snapshot.opId) {\n        page.lastInProgressSnapshotOfUser[snapshot.uid] = {\n            snapshot: snapshot,\n            beginAt: page.lastInProgressSnapshotOfUser[snapshot.uid].beginAt\n        };\n    }\n    else {\n        page.lastInProgressSnapshotOfUser[snapshot.uid] = {\n            snapshot: snapshot,\n            beginAt: Date.now()\n        };\n    }\n};\n","import { transitionToCameraBound } from \"../animation\";\nimport Board from \"../board\";\nimport { addPage, gotoPage } from \"../board/actions\";\nimport { getCameraBoundFromGlobalOp } from \"./util\";\nlet fitToContentTimer;\n/**\n * 添加全局快照，目前属于整个房间的快照仅包含视角快照\n *\n * 该函数仅在非批量场景中使用。批量场景需要在dispatchBatch中处理camera的逻辑\n *\n * @param snapshot\n */\nexport const addGlobalOp = (room, snapshot) => {\n    var _a;\n    const camera = room.app.camera;\n    /**\n     * 以下情况下不会返回null\n     * 1. 自由视角 + 当前用户快照\n     * 2. 主播视角 + 当前用户快照\n     * 3. 跟随视角 + 主播快照\n     * 4. 跟随视角 + 当前用户快照（resize时发射）\n     */\n    const boundary = getCameraBoundFromGlobalOp(room, snapshot);\n    if (boundary) {\n        if (snapshot.data.animate) {\n            transitionToCameraBound(camera, boundary, () => {\n                var _a;\n                (_a = room.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n            });\n        }\n        else {\n            room.app.camera.setCameraBound(boundary);\n            (_a = room.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n        }\n    }\n};\nexport const addOpInRoom = (room, snapshot) => {\n    var _a;\n    const { action, boardName } = snapshot.data;\n    if (action === 'goto') {\n        gotoBoard(room, boardName, snapshot);\n    }\n    if (action === 'delete') {\n        deleteBoard(room, boardName, snapshot);\n    }\n    if (action === 'add') {\n        addBoard(room, boardName, snapshot);\n    }\n    room.app.opsManager.hooks.addOpHook.call(snapshot, true);\n    (_a = room.app.previewFactory) === null || _a === void 0 ? void 0 : _a.refreshPreviewsOfCurrBoard();\n};\nexport const deleteBoard = (room, boardName, snapshot) => {\n    if (!room.boards.hasOwnProperty(boardName)) {\n        if (LOG) {\n            console.error('白板-->', `删除board:${boardName}, 但是board不存在`);\n        }\n    }\n    else if (Object.keys(room.boards).length === 1) {\n        if (LOG) {\n            console.error('白板-->', `不能删除最后一个board`);\n        }\n    }\n    else {\n        const boardNames = Object.keys(room.boards);\n        //boardName在this.boards中是第几个\n        const selectBoardIndex = boardNames.indexOf(boardName);\n        delete room.boards[boardName];\n        //选中被删除的board的下一个board\n        let nextBoardIndex = selectBoardIndex;\n        if (selectBoardIndex === boardNames.length - 1) {\n            //被删除的是最后一个board\n            nextBoardIndex = selectBoardIndex - 1;\n        }\n        room.currIndex = Object.keys(room.boards)[nextBoardIndex];\n        const currBoard = room.boards[room.currIndex];\n        room.app.opsManager.hooks.boardChange.call();\n        gotoPage(currBoard, currBoard.currIndex, snapshot);\n        clearTimeout(fitToContentTimer);\n        if (!room.isReceivingBatchSnapshots) {\n            fitToContentTimer = setTimeout(() => {\n                if (room.app.hasBackground()) {\n                    room.app.fitToContent(false);\n                }\n            }, 0);\n        }\n    }\n};\n/**\n * 添加新board，snapshot中包含了该board的页数\n * @param boardName\n * @param snapshot\n */\nexport const addBoard = (room, boardName, snapshot) => {\n    const displayName = snapshot.data.displayName ? snapshot.data.displayName : boardName;\n    room.boards[boardName] = new Board(room.app, boardName, displayName);\n    room.currIndex = boardName;\n    const currBoard = room.boards[room.currIndex];\n    room.app.opsManager.hooks.boardChange.call();\n    for (let i = 1; i < snapshot.data.pageCount; i++) {\n        addPage(currBoard, undefined, snapshot);\n    }\n    gotoPage(currBoard, 0, snapshot);\n    clearTimeout(fitToContentTimer);\n    if (!room.isReceivingBatchSnapshots) {\n        fitToContentTimer = setTimeout(() => {\n            if (room.app.hasBackground()) {\n                room.app.fitToContent(false);\n            }\n        }, 0);\n    }\n};\nexport const gotoBoard = (room, boardName, snapshot) => {\n    if (!room.boards.hasOwnProperty(boardName)) {\n        room.boards[boardName] = new Board(room.app, boardName, boardName);\n    }\n    room.currIndex = boardName;\n    const currBoard = room.boards[room.currIndex];\n    room.app.opsManager.hooks.boardChange.call();\n    gotoPage(currBoard, currBoard.currIndex, snapshot);\n    if (room.app.hasBackground() && !room.isReceivingBatchSnapshots) {\n        room.app.fitToContent(false);\n    }\n};\n","/**\n * 管理和服务器之间的数据传输\n *\n * 同步流程：\n * 1. 客户端向服务器发送最后一个包id: A\n * 2. 服务器向客户端发送最后一个包id: B\n * 3. 服务器向客户端发送这两个id之间的所有包, A => B\n * 4. 客户端完全接收到A => B，客户端判定同步完成，并执行接收到的数据快照\n * 5. 若客户端长时间没有收到这些包，则客户端再次向服务器发送同步指令\n *\n * 如果在同步过程中，接收到广播数据，暂时先不执行这些命令。保存起来，待同步结束一并执行\n */\nimport { showToast } from \"../../component/toast\";\n/**\n * 每个dataType队列，两个包之间的最小间隔\n */\nconst MINIMUM_BROADCAST_GAP_PER_DATATYPE = 70;\nconst overwritableTypes = ['select', 'select-hover', 'camera-bound', 'mouse-pointer', 'laser'];\n/**\n * 若10s内同步未完成，重新发送同步请求\n */\nconst ResendSyncRequestInterval = 10;\n/**\n * 发送5次还没有得到所有的同步数据时，不再请求同步\n */\nconst ResendSyncRequestLimit = 8;\nclass DataHub {\n    constructor(app, handler) {\n        /**\n         * 延迟广播发送数据\n         * 不同dataType应该走不同的timer队列，避免发送到一个包里面\n         */\n        this.debounceData = {};\n        /**\n         * 本地数据发送前，会猜测其在远程写入服务器时的server_pkg_id, 这里的id就是本地猜测的id，value是对应的数据\n         * 收到广播回包后，会根据这个id和回包实际得到的server_pkg_id比较，判断是否需要进一步修改\n         */\n        this.clientIdToData = {};\n        /**\n         * 0...lastContinueServerPkgId都已经在本地\n         */\n        this.lastContinueServerPkgId = -1;\n        /**\n         * id > serverPkgSinceLast的所有包的seq id数组\n         */\n        this.serverPkgSinceLast = [];\n        /**\n         * 本次同步最后一个包的id\n         */\n        this.lastPkgIdToSync = -1;\n        this.dataOfSync = {};\n        /**\n         * 是否正在同步中\n         */\n        this.isSynchronizing = false;\n        this._scheduleNextBroadcast = (debounceDataEntry, dataType) => {\n            return requestAnimationFrame(() => {\n                const now = new Date().valueOf();\n                if (now - debounceDataEntry.time < MINIMUM_BROADCAST_GAP_PER_DATATYPE) {\n                    /**\n                     * 生成该dataType的广播队列后，至少要隔一定时间才会发送\n                     * 如果没有到该间隔，则安排下一次requestAnimationFrame检查\n                     */\n                    debounceDataEntry.timer = this._scheduleNextBroadcast(debounceDataEntry, dataType);\n                }\n                else {\n                    this._doBroadcastData(debounceDataEntry, dataType);\n                }\n            });\n        };\n        this._doBroadcastData = (debounceDataEntry, dataType) => {\n            /**\n             * 时间到，发送数据\n             */\n            const data = this.app.room.mergeDebouncedData(debounceDataEntry.dataQueue, dataType);\n            const params = {\n                strategy: (dataType === 'snapshot') ? 1 : 2,\n                data: JSON.stringify(data),\n                client_pkg_id: debounceDataEntry.client_pkg_id\n            };\n            if (dataType !== 'snapshot') {\n                params.dataType = dataType;\n            }\n            this.handler.broadcastData(params);\n            this.clientIdToData[params.client_pkg_id] = data;\n            this.debounceData[dataType] = {\n                timer: null,\n                client_pkg_id: -1,\n                time: 0,\n                dataQueue: []\n            };\n        };\n        /**\n         * 一段时间后，没有完全收到同步需要的数据，则重试\n         */\n        this._setupResendSyncRequestTimer = (currRetryCount = 1) => {\n            /**\n             * 如果不clear，则连续两次同步请求时，第一个timer的句柄无法再获取，\n             * 导致clearTimeout无法取消第一个timer的回调函数\n             */\n            clearTimeout(this.resendSyncRequestTimer);\n            this.resendSyncRequestTimer = setTimeout(() => {\n                if (currRetryCount <= ResendSyncRequestLimit) {\n                    console.error(`白板-->，同步数据超时，第${currRetryCount + 1}次请求同步数据, ${this.lastContinueServerPkgId}`);\n                    this.handler.sendSyncRequest(this.lastContinueServerPkgId);\n                    this._setupResendSyncRequestTimer(currRetryCount + 1);\n                }\n                else {\n                    showToast({\n                        type: 'error',\n                        msg: '无法同步数据，请检查你的网络',\n                        time: 1000\n                    });\n                    console.error(`白板-->多次同步数据失败`);\n                }\n            }, ResendSyncRequestInterval * 1000);\n        };\n        this.app = app;\n        this.handler = handler;\n        this.bindEvents();\n    }\n    get room() {\n        return this.app.room;\n    }\n    /**\n     * 本地接收到的最后一个服务器包\n     */\n    get lastServerPkgId() {\n        if (this.serverPkgSinceLast.length > 0) {\n            return this.serverPkgSinceLast[this.serverPkgSinceLast.length - 1];\n        }\n        else {\n            return this.lastContinueServerPkgId;\n        }\n    }\n    /**\n     * 给本地包赋予一个服务器包id\n     * 该id需要大于最后一个服务器包id，以及上一个本地包虚拟id\n     */\n    get nextLocalFakeId() {\n        const lastServerPkgId = this.lastServerPkgId;\n        const inUseClientIds = Object.keys(this.clientIdToData).map(_ => Number(_)).sort();\n        if (inUseClientIds.length === 0) {\n            return lastServerPkgId + 1;\n        }\n        else if (lastServerPkgId >= inUseClientIds[inUseClientIds.length - 1]) {\n            return lastServerPkgId + 1;\n        }\n        else {\n            return inUseClientIds[inUseClientIds.length - 1] + 1;\n        }\n    }\n    /**\n     * 应用状态重置。一般用于测试\n     */\n    reset() {\n        for (let key in this.debounceData) {\n            if (this.debounceData[key].timer) {\n                cancelAnimationFrame(this.debounceData[key].timer);\n            }\n        }\n        this.debounceData = {};\n        this.clientIdToData = {};\n        this.lastContinueServerPkgId = -1;\n        this.serverPkgSinceLast = [];\n        this.lastPkgIdToSync = -1;\n        this.dataOfSync = {};\n        this.isSynchronizing = false;\n        clearTimeout(this.resendSyncRequestTimer);\n    }\n    bindEvents() {\n        this.handler.on('data', this.onData.bind(this));\n        this.handler.on('broadcastAck', this.onBroadcastAck.bind(this));\n        this.handler.on('syncRequestAck', this.onSendRequestAck.bind(this));\n        this.handler.on('syncRequestResponse', this.onSendRequestResponse.bind(this));\n    }\n    /**\n     * 接到其他用户发来的广播数据\n     * @param msg\n     */\n    onData(msg) {\n        const { data, server_pkg_id } = msg;\n        this._updateServerPkgInfo(server_pkg_id, server_pkg_id);\n        if (this.isSynchronizing) {\n            /**\n             * 正在同步中，暂时不执行\n             */\n            this.dataOfSync[server_pkg_id] = data;\n        }\n        else {\n            let { type, value } = data;\n            if (type === 'snapshot') {\n                this.room.execSnapshot({\n                    snapshot: value,\n                    pkgId: server_pkg_id\n                });\n            }\n            else if (type === 'broadcaster') {\n                this.app.vision.receiveBroadcaster(value);\n            }\n            else if (type === 'snapshotArr') {\n                this.room.execBatchSnapshots(value.map(_ => {\n                    return {\n                        snapshot: _,\n                        pkgId: server_pkg_id\n                    };\n                }));\n            }\n        }\n    }\n    /**\n     * 同步步骤一：\n     * 客户端通知服务器客户端最后一个包的序列号\n     */\n    sendSyncRequest() {\n        console.log('白板--> 请求同步数据, 是否正在同步数据', this.isSynchronizing);\n        if (this.isSynchronizing) {\n            return;\n        }\n        this.isSynchronizing = true;\n        this.handler.sendSyncRequest(this.lastContinueServerPkgId);\n        // 设置服务器最后一个包为-1，收到syncRequestAck之后，会更新该变量\n        this.lastPkgIdToSync = -1;\n        /**\n         * 服务器上存在，本地不存在的数据。同步后执行\n         */\n        this.dataOfSync = {};\n        /**\n         * 一段时间后，没有完全收到同步需要的数据，则重试\n         */\n        this._setupResendSyncRequestTimer();\n    }\n    /**\n     * 同步步骤二：\n     * 服务器通知客户端，服务器中的最后一个包的序列号\n     */\n    onSendRequestAck(message) {\n        this.lastPkgIdToSync = message.last_server_pkg_id;\n        this._updateAppAfterSync();\n    }\n    /**\n     * 同步步骤三：\n     * 服务器给客户端返回客户端缺失的包，会分块返回\n     * 当所有包都补齐了之后，客户端执行这些包\n     */\n    onSendRequestResponse(message) {\n        //步骤二告知客户端没有新包需要同步\n        if (!this.isSynchronizing)\n            return;\n        let { start_server_pkg_id, end_server_pkg_id, packages } = message;\n        if (!Array.isArray(packages)) {\n            packages = [];\n        }\n        for (let pkg of packages) {\n            this.dataOfSync[pkg.server_pkg_id] = pkg.data;\n        }\n        this._updateServerPkgInfo(start_server_pkg_id, end_server_pkg_id);\n        this._updateAppAfterSync();\n    }\n    /**\n     * 收到广播回包\n     * 更新应用最后一个连续的server_pkg_id, 以及server_pkg_id之后的不连续包的数组\n     * @param message\n     */\n    onBroadcastAck(message) {\n        const { server_pkg_id, client_pkg_id } = message;\n        this._updateServerPkgInfo(server_pkg_id, server_pkg_id);\n        const data = this.clientIdToData[client_pkg_id];\n        delete this.clientIdToData[client_pkg_id];\n        /**\n         * 如果服务器中该包的顺序和预测的不同，则需要更新room中的快照数据\n         */\n        if (!data) {\n            console.warn(`白板--> broadcastAck, client_pkg_id:${client_pkg_id}的数据不存在`);\n        }\n        if (data && data.type === 'snapshot' && client_pkg_id !== server_pkg_id) {\n            this.app.room.cacheSnapshot({\n                pkgId: server_pkg_id,\n                snapshot: data.value\n            });\n        }\n        else if (data && data.type === 'snapshotArr' && client_pkg_id !== server_pkg_id) {\n            data.value.forEach(_ => {\n                this.app.room.cacheSnapshot({\n                    pkgId: server_pkg_id,\n                    snapshot: _\n                });\n            });\n        }\n    }\n    sendSnapshot(snapshot) {\n        if (overwritableTypes.includes(snapshot.data.type)) {\n            return this.broadcastData({\n                data: {\n                    type: 'snapshot',\n                    value: snapshot\n                }\n            }, snapshot.opId);\n        }\n        else {\n            return this.broadcastData({\n                data: {\n                    type: 'snapshot',\n                    value: snapshot\n                }\n            }, 'snapshot');\n        }\n    }\n    broadcastRoomState(value, dataType) {\n        return this.broadcastData({\n            data: {\n                type: dataType,\n                value: value\n            }\n        }, dataType);\n    }\n    broadcastData(params, dataType) {\n        if (!this.debounceData.hasOwnProperty(dataType) || !this.debounceData[dataType].timer) {\n            const client_id = this.nextLocalFakeId;\n            this.debounceData[dataType] = {\n                timer: null,\n                time: new Date().valueOf(),\n                client_pkg_id: client_id,\n                dataQueue: []\n            };\n            /**\n             * 占位。这样计算nextLocalFakeId时，不会和现在的client_id重复\n             */\n            this.clientIdToData[client_id] = {};\n        }\n        const debounceDataEntry = this.debounceData[dataType];\n        debounceDataEntry.dataQueue.push(params.data);\n        if (debounceDataEntry.timer) {\n            return debounceDataEntry.client_pkg_id;\n        }\n        debounceDataEntry.timer = this._scheduleNextBroadcast(debounceDataEntry, dataType);\n        return debounceDataEntry.client_pkg_id;\n    }\n    /**\n     * 判断是否同步结束，若同步结束，则执行同步时拉取的数据\n     */\n    _updateAppAfterSync() {\n        if (this.lastContinueServerPkgId >= this.lastPkgIdToSync) {\n            /**\n             * 防御性编程。防止isSynchronizing为false时，依旧有同步timer正在运行，然后报同步失败的错误\n             */\n            clearTimeout(this.resendSyncRequestTimer);\n        }\n        if (this.lastContinueServerPkgId >= this.lastPkgIdToSync && this.isSynchronizing) {\n            console.log(`白板--> 同步数据接收完毕: ${this.lastContinueServerPkgId}--${this.lastPkgIdToSync}`);\n            this.isSynchronizing = false;\n            if (LOG) {\n                console.log('白板-->', 'event:sync_finished');\n            }\n            this.app.emit('event:editable:change', this.app.editable);\n            this.app.dispatcher.emit('event:sync_finished');\n            const data = this._getDataToSync();\n            let broadcasterData;\n            for (let i = data.length - 1; i >= 0; i--) {\n                if (data[i].data.type === 'broadcaster') {\n                    broadcasterData = data[i].data.value;\n                    break;\n                }\n            }\n            const snapshotData = [];\n            for (let pkg of data) {\n                if (pkg.data.type === 'snapshot') {\n                    snapshotData.push({\n                        pkgId: pkg.pkgId,\n                        snapshot: pkg.data.value\n                    });\n                }\n                else if (pkg.data.type === 'snapshotArr') {\n                    for (let snapshot of pkg.data.value) {\n                        snapshotData.push({\n                            pkgId: pkg.pkgId,\n                            snapshot: snapshot\n                        });\n                    }\n                }\n            }\n            if (broadcasterData) {\n                this.app.vision.receiveBroadcasterAfterSync(broadcasterData);\n            }\n            this.app.room.execBatchSnapshots(snapshotData, (hasBoundary) => {\n                if (!hasBoundary) {\n                    /**\n                     * 如果未设置过boundary, 且存在文档页面，则设置初始boundary\n                     */\n                    if (this.app.defaultCameraBound) {\n                        this.app.setCameraBound(this.app.defaultCameraBound);\n                    }\n                    else if (this.app.hasBackground()) {\n                        this.app.fitToContent(false);\n                    }\n                }\n            });\n        }\n    }\n    _getDataToSync() {\n        const seqIds = Object.keys(this.dataOfSync).sort((a, b) => {\n            return Number(a) - Number(b);\n        });\n        return seqIds.map(id => {\n            try {\n                return {\n                    data: JSON.parse(this.dataOfSync[id]),\n                    pkgId: Number(id)\n                };\n            }\n            catch (_a) {\n                return undefined;\n            }\n        }).filter(_ => _);\n    }\n    /**\n     * 更新 lastContinueServerPkgId, 以及serverPkgSinceLast\n     * @param start: 第一个包\n     * @param end :  最后一个包 [start, end]的每个包均存在\n     *\n     * 首先将start->end序列号均加入serverPkgSinceLast中，然后再更新\n     */\n    _updateServerPkgInfo(start, end) {\n        let i = 0, curr = start;\n        //合并serverPkgSinceLast和[start, end]\n        while (i <= this.serverPkgSinceLast.length) {\n            if (curr > end) {\n                break;\n            }\n            else if (curr <= this.lastContinueServerPkgId) {\n                curr++;\n                continue;\n            }\n            else if (i === this.serverPkgSinceLast.length) {\n                /**\n                 * 将[curr, end]压入serverPkgSinceLast的队尾\n                 */\n                const arr = [];\n                while (curr <= end) {\n                    arr.push(curr);\n                    curr += 1;\n                }\n                this.serverPkgSinceLast.splice(i, 0, ...arr);\n            }\n            else if (this.serverPkgSinceLast[i] < curr) {\n                i++;\n            }\n            else if (this.serverPkgSinceLast[i] === curr) {\n                curr++;\n                i++;\n            }\n            else {\n                this.serverPkgSinceLast.splice(i, 0, curr);\n                curr++;\n                i++;\n            }\n        }\n        //将serverPkgSinceLast中接在lastContinueServerPkgId后面的包提取出来，然后更新lastContinueServerPkgId\n        i = 0;\n        for (; i < this.serverPkgSinceLast.length; i++) {\n            if (this.serverPkgSinceLast[i] === this.lastContinueServerPkgId + i + 1) {\n                continue;\n            }\n            else {\n                break;\n            }\n        }\n        this.lastContinueServerPkgId += i;\n        this.serverPkgSinceLast.splice(0, i);\n    }\n}\nexport default DataHub;\n","/**\n * 预览生成工厂\n *\n * 当接到生产任务时，会压入任务堆栈\n *\n * 任务堆栈会一个一个的渲染白板，并生成base64字符串。只有当白板以来的资源文件准备好了，才会开始渲染任务。\n *\n * 每有一个preview准备好了，会发送事件通知外界。\n * 当page加入新的快照时，该page的preview缓存会丢失。\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DPI } from \"../container\";\nclass PreviewFactory {\n    constructor(app) {\n        /**\n         * key是boardName129*&^ljdfh893pageIndex\n         * 只有在previewContainerMap中的boardName和pageIndex，才会去生成preview task\n         *\n         * 通过bindPreviewContainer设置previewContainerMap\n         */\n        this.previewContainerMap = new Map();\n        this.task = [];\n        this.isLoopBusy = false;\n        this.container = document.createElement('div');\n        this.canvas = document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n        this.app = app;\n        this.app.opsManager.hooks.pageReady.tap('PageReadyPlugin', this.onPageReady.bind(this));\n        this.app.opsManager.hooks.addOpHook.tap(\"AddOpSnapshotPlugin\", this.onOpAdded.bind(this));\n        this.setupExportToImgContainer();\n        this.resizeElements();\n    }\n    /**\n     * 用户将容器传给preview factory, preview factory直接在容器中渲染\n     */\n    bindPreviewContainer(opts) {\n        const reset = opts.hasOwnProperty('reset') ? opts.reset : true;\n        const keepPrevContainer = opts.hasOwnProperty('keepPrevContainer') ? opts.keepPrevContainer : true;\n        const newKeys = opts.previewContainerSettings.map(opt => {\n            return this.getContainerKey(opt);\n        });\n        const oldKeys = Array.from(this.previewContainerMap.keys());\n        if (reset) {\n            for (let key of oldKeys) {\n                if (!newKeys.includes(key) || !keepPrevContainer) {\n                    this.previewContainerMap.delete(key);\n                }\n            }\n            this.task = [];\n        }\n        const previewTasks = [];\n        opts.previewContainerSettings.forEach(opt => {\n            const key = this.getContainerKey(opt);\n            /**\n             * 如果不替换原有容器，且容器存在，则不要重新设置该容器，也不要设置task\n             */\n            if (oldKeys.includes(key) && keepPrevContainer) {\n                return;\n            }\n            const { ctx, canvasContainer } = this.setupPreviewElements(opt.container);\n            const rect = opt.container.getBoundingClientRect();\n            previewTasks.push({\n                pageIndex: opt.pageIndex,\n                boardName: opt.boardName\n            });\n            this.previewContainerMap.set(key, {\n                container: canvasContainer,\n                ctx: ctx,\n                width: rect.width,\n                height: rect.height\n            });\n        });\n        this.addPreviewTask(previewTasks);\n    }\n    generatePreviewToDataUrl(task) {\n        const page = this.app.room.getPage(task.boardName, task.pageIndex);\n        page.calcDrawOpQueue();\n        page.refresh({\n            ctx: this.ctx,\n            preview: true,\n            supportToDataUrl: true\n        });\n        const preview = this.canvas.toDataURL();\n        return preview;\n    }\n    setBackgroundColor() {\n        for (let obj of this.previewContainerMap.values()) {\n            obj.container.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n        }\n        this.container.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n    }\n    /**\n     * 更新视角位置后，要当前文档所有预览页面的绘制\n     */\n    refreshPreviewsOfCurrBoard() {\n        if (this.app.room.isReceivingBatchSnapshots) {\n            return;\n        }\n        this.task = [];\n        const board = this.app.room.currBoard;\n        const pages = board.pageNames;\n        for (let page of pages) {\n            this.invalidatePreview(page, board.boardName);\n        }\n        /**\n         * 优先启动当前白板的task\n         */\n        const taskList = [{\n                boardName: board.boardName,\n                pageIndex: board.currIndex.toString()\n            }].concat(pages.map(page => {\n            return {\n                boardName: board.boardName,\n                pageIndex: page.toString()\n            };\n        }));\n        this.addPreviewTask(taskList);\n    }\n    refreshPreviewsOfCurrPage() {\n        if (this.app.room.isReceivingBatchSnapshots) {\n            return;\n        }\n        const board = this.app.room.currBoard;\n        this.invalidatePreview(board.currPage.pageIndex, board.boardName);\n        /**\n         * 优先启动当前白板的task\n         */\n        const taskList = [{\n                boardName: board.boardName,\n                pageIndex: board.currIndex.toString()\n            }];\n        this.addPreviewTask(taskList);\n    }\n    resizeElements() {\n        this.container.style.width = `${this.app.container.width}px`;\n        this.container.style.height = `${this.app.container.height}px`;\n        const rect = this.container.getBoundingClientRect();\n        this.canvas.width = rect.width;\n        this.canvas.height = rect.height;\n    }\n    /**\n     * 将task.boardName + task.pageIndex页面白板内容输出为string，并缓存在previewCache中\n     * @param task\n     */\n    generatePreview(task) {\n        const key = this.getContainerKey(task);\n        if (this.previewContainerMap.has(key)) {\n            const obj = this.previewContainerMap.get(key);\n            const page = this.app.room.getPage(task.boardName, task.pageIndex);\n            page.calcDrawOpQueue();\n            page.refresh({\n                ctx: obj === null || obj === void 0 ? void 0 : obj.ctx,\n                preview: true\n            });\n        }\n    }\n    invalidatePreview(pageIndex, boardName) {\n        const key = this.getContainerKey({ pageIndex, boardName });\n        const obj = this.previewContainerMap.get(key);\n        obj === null || obj === void 0 ? void 0 : obj.ctx.clearRect(0, 0, obj.width, obj.height);\n    }\n    /**\n     * 添加预览生成任务\n     * @param taskArray\n     */\n    addPreviewTask(taskArray) {\n        /**\n         * 必须要异步执行。\n         * 因为page.blocked需要在page.refresh调用后才知道是否阻塞。\n         * 为了保证该函数执行顺序晚于page.refresh，因此将其放入setTimeout中异步执行\n         *\n         * 越晚加入的task应该放在队列越前面。因为执行task的顺序是从队列前面往后面，越晚加入的\n         * 应该越早执行\n         */\n        setTimeout(() => {\n            taskArray.reverse().forEach(taskInfo => {\n                const taskIndexOfSamePage = this.getTaskIndexOfPage(taskInfo.pageIndex, taskInfo.boardName);\n                if (taskIndexOfSamePage !== -1) {\n                    //将之前的任务删掉。如果预览图没有准备好，插入的新任务会移动到队列头部\n                    //这样能够使得最新刷新的页面的预览图能够优先生成\n                    //如果预览图已经准备好了，那么任务队列里该页面的任务直接删除就好了\n                    this.task.splice(taskIndexOfSamePage, 1);\n                }\n                const board = this.app.room.boards[taskInfo.boardName];\n                if (board) {\n                    const page = board.pages[taskInfo.pageIndex];\n                    if (page) {\n                        const key = this.getContainerKey(taskInfo);\n                        /**\n                         * 只有绑定了container的时候，才计算preview\n                         */\n                        if (this.previewContainerMap.has(key)) {\n                            this.task.unshift({\n                                pageIndex: taskInfo.pageIndex,\n                                boardName: taskInfo.boardName,\n                                state: page.blocked ? 'waiting' : 'ready'\n                            });\n                        }\n                    }\n                }\n            });\n            this.startLoop();\n        }, 0);\n    }\n    /**\n     * 任务队列中是否已经存在同一页面的任务\n     * @param pageIndex\n     * @param boardName\n     */\n    getTaskIndexOfPage(pageIndex, boardName) {\n        for (let i = 0; i < this.task.length; i++) {\n            if (this.task[i].pageIndex === pageIndex && this.task[i].boardName === boardName) {\n                return i;\n            }\n        }\n        return -1;\n    }\n    getContainerKey(opt) {\n        return opt.boardName + '129*&^ljdfh893' + opt.pageIndex.toString();\n    }\n    setupPreviewElements(container) {\n        const rect = container.getBoundingClientRect();\n        const canvasContainerArr = container.getElementsByClassName('preview-canvas-container');\n        if (canvasContainerArr.length === 0) {\n            const el = document.createElement('div');\n            el.className = 'preview-canvas-container';\n            el.style.backgroundColor = this.app.appConfig.canvas_bg_color;\n            el.style.position = 'absolute';\n            el.style.left = '0';\n            el.style.right = '0';\n            el.style.top = '0';\n            el.style.bottom = '0';\n            container.appendChild(el);\n            const canvas = document.createElement('canvas');\n            canvas.width = rect.width * DPI;\n            canvas.height = rect.height * DPI;\n            canvas.style.width = `${rect.width}px`;\n            canvas.style.height = `${rect.height}px`;\n            canvas.style.imageRendering = 'optimize-contrast';\n            el.appendChild(canvas);\n            const ctx = canvas.getContext('2d');\n            ctx.lineCap = 'round';\n            ctx.lineJoin = 'round';\n            return {\n                ctx,\n                canvasContainer: el\n            };\n        }\n        else {\n            const canvas = canvasContainerArr[0].getElementsByTagName('canvas')[0];\n            const ctx = canvas.getContext('2d');\n            return {\n                ctx,\n                canvasContainer: canvasContainerArr[0]\n            };\n        }\n    }\n    /**\n     * 页面快照变化时，刷新其页面预览缓存。\n     * TODO: 这个函数实际上存在缺陷，它没有考虑非当前页面快照可能变化\n     */\n    onOpAdded(snapshot) {\n        if (snapshot.category !== 'inPageOp') {\n            return;\n        }\n        else if (snapshot.data.inProgress) {\n            return;\n        }\n        else if (snapshot.data.type === 'laser') {\n            return;\n        }\n        else if (snapshot.data.type === 'mouse-pointer') {\n            return;\n        }\n        else if (this.app.room.isReceivingBatchSnapshots) {\n            return;\n        }\n        const boardName = snapshot.board;\n        const pageIndex = snapshot.page;\n        this.invalidatePreview(pageIndex.toString(), boardName);\n        this.addPreviewTask([{\n                pageIndex: pageIndex.toString(),\n                boardName: boardName\n            }]);\n    }\n    /**\n     * 页面资源获取好了，清空之前绘制的内容，并重新生成预览图\n     * @param boardName\n     * @param pageIndex\n     */\n    onPageReady(boardName, pageIndex) {\n        this.invalidatePreview(pageIndex.toString(), boardName);\n        this.addPreviewTask([{\n                pageIndex: pageIndex.toString(),\n                boardName: boardName\n            }]);\n    }\n    /**\n     * 异步生成预览图。异步生成是为了防止长时间连续任务造成卡顿。\n     */\n    startLoop() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.isLoopBusy) {\n                return;\n            }\n            this.isLoopBusy = true;\n            //第一个task需要是异步事件，否则可能会造成事件依赖关系存在问题\n            yield new Promise(res => {\n                setTimeout(res, 0);\n            });\n            while (this.task.length > 0) {\n                let task = yield this.shiftNextReadyTask();\n                while (task === null) {\n                    yield this.delay(30);\n                    task = yield this.shiftNextReadyTask();\n                }\n                const key = this.getContainerKey(task);\n                if (!this.previewContainerMap.has(key)) {\n                    continue;\n                }\n                yield new Promise(res => {\n                    try {\n                        this.generatePreview(task);\n                    }\n                    catch (err) {\n                        console.error(err);\n                    }\n                    finally {\n                        //继续下一个task\n                        res();\n                    }\n                });\n                yield this.delay(100);\n            }\n            this.isLoopBusy = false;\n        });\n    }\n    /**\n     * 移除下一个ready的task\n     */\n    shiftNextReadyTask() {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (let i = 0; i < this.task.length; i++) {\n                if (this.task[i].state === 'ready') {\n                    const task = this.task[i];\n                    this.task.splice(i, 1);\n                    try {\n                        /**\n                         * 若页面不存在，则跳到下一个任务\n                         */\n                        const page = this.app.room.getPage(task.boardName, task.pageIndex);\n                        if (page) {\n                            return task;\n                        }\n                        else {\n                            i--;\n                            continue;\n                        }\n                    }\n                    catch (err) {\n                        i--;\n                        continue;\n                    }\n                }\n            }\n            return null;\n        });\n    }\n    delay(ms) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise(res => {\n                setTimeout(() => {\n                    res();\n                }, ms);\n            });\n        });\n    }\n    setupExportToImgContainer() {\n        const el = document.createElement('div');\n        el.style.position = 'relative';\n        el.style.visibility = 'hidden';\n        document.body.appendChild(el);\n        this.container = el;\n        this.setBackgroundColor();\n        this.canvas = document.createElement('canvas');\n        el.appendChild(this.canvas);\n        this.ctx = this.canvas.getContext('2d');\n        this.ctx.lineCap = 'round';\n        this.ctx.lineJoin = 'round';\n    }\n}\nexport default PreviewFactory;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n","/**\n * 在白板应用中，存在以白板容器左上角为起点的屏幕坐标系。以及一个虚拟的世界坐标系。世界坐标系的初始原点为（0，0），在屏幕的中心位置。所有操作的坐标均以世界坐标系记录。\n *\n * 在任一时刻，应用都有一个世界坐标系范围，该范围可以通过setCameraBound设置。白板容器显示的内容要大于等于世界此刻世界坐标系范围。\n *\n * *****<------------------>********\n * *****<---世界坐标系范围--->********\n * *****<------------------>********\n *\n * 单机模式下，以下操作会更新世界坐标系范围：\n * 1. 缩放\n * 2. 平移\n * 3. 重置世界坐标系\n * 4. 移动设备旋转。根据模式不同，可以设置世界坐标系宽高互换，或者竖屏时显示横屏所有内容，或者反过来\n * 5. 白板容器缩放，根据默认世界的宽高比，重新设置新的屏幕对应的世界坐标系\n *\n * 联机模式下，以下操作会更新世界坐标系范围：\n * 1. 跟随主播，世界坐标系与主播保持同步\n * 2. 与主播解绑\n *\n *\n * 初始世界坐标系范围有两个选择：\n * 1. 所有机器均保持一致，如1920*1080， 竖屏时为1080*1920\n * 2. 所有机器使用1920*1080的世界坐标系，倒推其屏幕的世界坐标系（如上图，可能为2500，1080），然后将该坐标系作为自己的世界坐标系\n *\n * 单机模式下两者没有区别。\n * 第一种模式在视角跟随时有些吃亏，因为主播需要额外上传自己屏幕代表的世界坐标系范围\n * 第二种模式相对较为简单直接。在视角跟随，以及世界坐标系范围更新时，要将自己的世界坐标系快照上传\n */\nimport { DPI } from \"../container\";\nimport { getTransformedBoundary } from \"../misc/shapeHelper\";\nclass Camera {\n    constructor(app, defaultCameraBound) {\n        this.scale = 1;\n        /**\n         *  > 10%, < 1000%\n         * 初始缩放比例为100%\n         */\n        // zoomFactor: number = 1\n        this.cameraBoundByUser = {};\n        this.app = app;\n        this.translateX = 0;\n        this.translateY = 0;\n        this.scale = 1;\n        if (defaultCameraBound) {\n            this.width = defaultCameraBound.width;\n            this.height = defaultCameraBound.height;\n            this.centerX = defaultCameraBound.centerX;\n            this.centerY = defaultCameraBound.centerY;\n        }\n        else {\n            this.width = 1920;\n            this.height = 1080;\n            this.centerX = 0;\n            this.centerY = 0;\n        }\n        this.app.on('container:set', () => {\n            this.updateTransParamAndRefresh();\n        });\n    }\n    get zoomFactor() {\n        return this.scale;\n    }\n    get container() {\n        return this.app.container;\n    }\n    /**\n     * 获取当前容器在世界坐标系的显示区域\n     */\n    getContainerWorldRect() {\n        const rect = this.container.el.getBoundingClientRect();\n        const w = rect.width;\n        const h = rect.height;\n        const [sx, sy] = this.convertToPointInWorld(0, 0);\n        const [ex, ey] = this.convertToPointInWorld(w, h);\n        return {\n            centerX: sx / 2 + ex / 2,\n            centerY: sy / 2 + ey / 2,\n            width: ex - sx,\n            height: ey - sy\n        };\n    }\n    /**\n     * 计算给定世界坐标时，返回屏幕的四个角落的在世界坐标系代表的范围\n     */\n    getContainerWorldRectByCameraBound(opts) {\n        const w = this.container.width;\n        const h = this.container.height;\n        if (w / h > opts.width / opts.height) {\n            opts.width = opts.height / h * w;\n        }\n        else {\n            opts.height = opts.width / w * h;\n        }\n        return opts;\n    }\n    /**\n     * 转换屏幕上的坐标。\n     * 转换后在不同大小的屏幕上点击相似的位置，会得到大致相似的坐标\n     * @param mx\n     * @param my\n     */\n    convertToPointInWorld(mx, my) {\n        mx = (mx - this.translateX) / this.scale;\n        my = (my - this.translateY) / this.scale;\n        return [mx, my];\n    }\n    /**\n     * 将世界坐标系上的点转化成container上的坐标\n     * @param mx\n     * @param my\n     */\n    convertWorldPointInContainer(mx, my) {\n        mx = mx * this.scale + this.translateX;\n        my = my * this.scale + this.translateY;\n        return [mx, my];\n    }\n    convertDom(dom) {\n        dom.style.transform = `translate(${this.translateX}px, ${this.translateY}px) scale(${this.scale})`;\n    }\n    convertDomAndRefresh() {\n        var _a, _b, _c;\n        this.convertDom(this.container.backgroundEl);\n        this.convertDom(this.container.imageEl);\n        this.convertDom(this.container.domEl);\n        this.convertDom(this.container.textAreaEl);\n        // this.app.room?.currBoard?.currPage?.refresh()\n        this.app.room.pageToRefresh = (_b = (_a = this.app.room) === null || _a === void 0 ? void 0 : _a.currBoard) === null || _b === void 0 ? void 0 : _b.currPage;\n        (_c = this.app.previewFactory) === null || _c === void 0 ? void 0 : _c.resizeElements();\n    }\n    convertCanvas(ctx) {\n        ctx.translate(this.translateX * DPI, this.translateY * DPI);\n        ctx.scale(this.scale * DPI, this.scale * DPI);\n    }\n    /**\n     * 预览窗口的canvas大小和container中canvas大小不一致，需要单独计算缩放属性\n     * @param ctx\n     */\n    convertPreviewCanvas(ctx) {\n        const width = ctx.canvas.width;\n        const height = ctx.canvas.height;\n        const { scale, translateX, translateY } = this.getTransParam(width, height);\n        ctx.translate(translateX, translateY);\n        ctx.scale(scale, scale);\n    }\n    /**\n     * 也由快照引发，快照的type为: cameraBound\n     * @param opts\n     */\n    setCameraBound(opts) {\n        //各个终端会调整自身的translate及scale，确保boundary范围内的元素是可见的。且boundary至少有一边会顶着终端窗口的边界\n        this.centerX = opts.centerX;\n        this.centerY = opts.centerY;\n        this.width = opts.width;\n        this.height = opts.height;\n        this.updateTransParamAndRefresh();\n    }\n    /**\n     * 计算经过snapshot变化后，屏幕显示范围代表的世界坐标系\n     * @param snapshot\n     */\n    getNextCameraBound(data) {\n        if (data.type === 'pan') {\n            return this._roundBoundary(this.getCameraBoundPan(data));\n        }\n        else if (data.type === 'zoom') {\n            return this._roundBoundary(this.getCameraBoundZoom(data));\n        }\n        else if (data.type === 'reset-camera') {\n            return this._roundBoundary(this.getCameraBoundReset());\n        }\n        else if (data.type === 'fit-to-content') {\n            return this._roundBoundary(this.getCameraBoundFitToContent());\n        }\n        else if (data.type === 'fit-to-doc') {\n            return this._roundBoundary(this.getCameraBoundFitToDoc());\n        }\n        else if (data.type === 'resize-camera') {\n            return this._roundBoundary(this.getCameraBoundResize());\n        }\n        else {\n            throw new Error(`不应该进入此分支(getCameraBound), data类型为：${data}`);\n        }\n    }\n    _roundBoundary(boundary) {\n        return {\n            centerX: Number(boundary.centerX.toFixed(1)),\n            centerY: Number(boundary.centerY.toFixed(1)),\n            width: Number(boundary.width.toFixed(1)),\n            height: Number(boundary.height.toFixed(1)),\n        };\n    }\n    getCameraBoundPan(data) {\n        let cx = this.centerX;\n        let cy = this.centerY;\n        let w = this.width;\n        let h = this.height;\n        cx += data.dx / this.scale;\n        cy += data.dy / this.scale;\n        return this.getContainerWorldRectByCameraBound({\n            centerX: cx,\n            centerY: cy,\n            width: w,\n            height: h\n        });\n    }\n    getCameraBoundZoom(data) {\n        let cx = this.centerX;\n        let cy = this.centerY;\n        let w = this.width;\n        let h = this.height;\n        let center;\n        if (data.center) {\n            center = this.convertToPointInWorld(data.center[0], data.center[1]);\n        }\n        else {\n            center = [cx, cy];\n        }\n        const scale = data.scale;\n        cx = center[0] - (center[0] - cx) / scale;\n        cy = center[1] - (center[1] - cy) / scale;\n        w = w / scale;\n        h = h / scale;\n        return this.getContainerWorldRectByCameraBound({\n            centerX: cx,\n            centerY: cy,\n            width: w,\n            height: h\n        });\n    }\n    getCameraBoundReset() {\n        return {\n            centerX: 0,\n            centerY: 0,\n            width: this.container.width,\n            height: this.container.height\n        };\n    }\n    getCameraBoundFitToDoc() {\n        const backgroundOp = this.app.room.currBoard.currPage.backgroundSnapshot;\n        if (!backgroundOp) {\n            return {\n                centerX: this.centerX,\n                centerY: this.centerY,\n                width: this.width,\n                height: this.height\n            };\n        }\n        else {\n            const { sx, sy, w, h } = backgroundOp.data.boundary;\n            return this.getContainerWorldRectByCameraBound({\n                centerX: sx + w / 2,\n                centerY: sy + h / 2,\n                width: w,\n                height: h\n            });\n        }\n    }\n    getCameraBoundFitToContent() {\n        /**\n         * 缩放至和内容的boundary一致\n         */\n        const page = this.app.room.currBoard.currPage;\n        const drawOpQueue = page.drawOpQueue;\n        const backgroundOp = page.backgroundSnapshot;\n        if (Object.keys(drawOpQueue).length === 0 && !backgroundOp) {\n            return this.getCameraBoundReset();\n        }\n        const boundary = {\n            sx: 10000000,\n            sy: 10000000,\n            ex: -10000000,\n            ey: -10000000\n        };\n        if (backgroundOp) {\n            const { sx, sy, w, h } = backgroundOp.data.boundary;\n            boundary.sx = Math.min(boundary.sx, sx);\n            boundary.sy = Math.min(boundary.sy, sy);\n            boundary.ex = Math.max(boundary.ex, sx + w);\n            boundary.ey = Math.max(boundary.ey, sy + h);\n        }\n        for (let key in drawOpQueue) {\n            const data = drawOpQueue[key].data;\n            if (!data.boundary ||\n                (data.boundary.sx === null || data.boundary.sx === undefined) ||\n                (data.boundary.sy === null || data.boundary.sy === undefined) ||\n                (data.boundary.w === null || data.boundary.w === undefined) ||\n                (data.boundary.h === null || data.boundary.h === undefined)) {\n                continue;\n            }\n            const { sx, sy, w, h } = getTransformedBoundary(data.boundary, data.dx, data.dy, data.scaleX, data.scaleY);\n            boundary.sx = Math.min(boundary.sx, sx);\n            boundary.sy = Math.min(boundary.sy, sy);\n            boundary.ex = Math.max(boundary.ex, sx + w);\n            boundary.ey = Math.max(boundary.ey, sy + h);\n        }\n        if ((boundary.ex - boundary.sx) < 100 && (boundary.ey - boundary.sy) < 100) {\n            //如果范围太小, 则适当的扩大范围至100 * 100。\n            let horizontalPadding = 100 - (boundary.ex - boundary.sx);\n            let verticalPadding = 100 - (boundary.ey - boundary.ex);\n            boundary.sx = boundary.sx - horizontalPadding / 2;\n            boundary.ex = boundary.ex + horizontalPadding / 2;\n            boundary.sy = boundary.sy - verticalPadding / 2;\n            boundary.ey = boundary.ey + verticalPadding / 2;\n        }\n        let padding = 0;\n        return this.getContainerWorldRectByCameraBound({\n            centerX: boundary.sx / 2 + boundary.ex / 2,\n            centerY: boundary.sy / 2 + boundary.ey / 2,\n            width: boundary.ex - boundary.sx + padding * 2,\n            height: boundary.ey - boundary.sy + padding * 2\n        });\n    }\n    getCameraBoundResize() {\n        if (this.app.disableAutoResize) {\n            /**\n             * 保持窗口内元素大小不变\n             * 屏幕中心点位置不变, scale不变\n             */\n            return {\n                centerX: this.centerX,\n                centerY: this.centerY,\n                width: this.container.width / this.zoomFactor,\n                height: this.container.height / this.zoomFactor\n            };\n        }\n        else {\n            /**\n             * 窗口内内容不变。大小改变\n             *\n             * 由于变化前后的宽高比可能发生变化，因此以宽作为基准。保持同样宽度内的内容不变\n             */\n            return {\n                centerX: this.centerX,\n                centerY: this.centerY,\n                width: this.width,\n                height: this.width / this.container.width * this.container.height\n            };\n        }\n    }\n    /**\n     * 根据世界坐标系设置dom的transform。计算后dom能够完全包含世界坐标系的范围，并且高度，或者宽度和世界坐标系的范围一致\n     * @param opt\n     */\n    getTransParam(_width, _height) {\n        const cameraWidth = this.width;\n        const cameraHeight = this.height;\n        const centerX = this.centerX;\n        const centerY = this.centerY;\n        let scale, translateX, translateY;\n        const cameraWhRatio = cameraWidth / cameraHeight;\n        if (_width / _height > cameraWhRatio) {\n            //容器较宽，根据容器高度和摄像机视野高度的比值，来确定缩放值\n            //缩放后，容器垂直范围内显示的内容和摄像机垂直范围内显示高度一致\n            scale = _height / cameraHeight;\n        }\n        else {\n            scale = _width / cameraWidth;\n        }\n        translateX = _width / 2 - centerX * scale;\n        translateY = _height / 2 - centerY * scale;\n        return { scale, translateX, translateY };\n    }\n    updateTransParamAndRefresh() {\n        const { scale, translateX, translateY } = this.getTransParam(this.container.width, this.container.height);\n        this.scale = scale;\n        this.translateX = translateX;\n        this.translateY = translateY;\n        this.convertDomAndRefresh();\n        this.app.emit('event:appState:change', 'zoomFactor', this.zoomFactor);\n    }\n}\nexport default Camera;\n","/**\n * 录像回放控制器\n */\nclass Player {\n    constructor(app) {\n        this.records = [];\n        this.nextRecordIndex = 0;\n        this.lastTime = 0;\n        this.offsetBegin = 0;\n        this.pkgId = 0;\n        this.app = app;\n    }\n    addRecordData(records) {\n        this.records = records.slice();\n        this.app.resetState();\n        this.nextRecordIndex = 0;\n    }\n    /**\n     * 切换时，vision.mode变化比较复杂。为了避免麻烦，重置account，然后重算一遍\n     * @param viewer\n     */\n    setViewer(viewer) {\n        this.app.account = viewer;\n        /**\n         * 重算一遍\n         */\n        const _lastTime = this.lastTime;\n        this.lastTime = Infinity;\n        this.seekTo(_lastTime);\n    }\n    seekTo(time) {\n        const forward = time > this.lastTime ? true : false;\n        this.lastTime = time;\n        const nextRecordIndex = forward ? this.nextRecordIndex : 0;\n        let endIndex = nextRecordIndex;\n        for (; endIndex < this.records.length; endIndex++) {\n            const record = this.records[endIndex];\n            if (record.time + this.offsetBegin > time) {\n                break;\n            }\n        }\n        const recordsToEmit = this.records.slice(nextRecordIndex, endIndex);\n        this.nextRecordIndex = endIndex;\n        if (!forward) {\n            this.app.resetState();\n            this.pkgId = 0;\n        }\n        let snapshotsToEmit = [];\n        let broadcasterData;\n        let observeModeData;\n        for (let i = 0; i < recordsToEmit.length; i++) {\n            if (recordsToEmit[i].record.type === 'snapshot') {\n                snapshotsToEmit.push({\n                    snapshot: recordsToEmit[i].record.value,\n                    pkgId: this.pkgId\n                });\n                this.pkgId += 1;\n            }\n            else if (recordsToEmit[i].record.type === 'snapshotArr') {\n                for (let snapshot of recordsToEmit[i].record.value) {\n                    snapshotsToEmit.push({\n                        snapshot,\n                        pkgId: this.pkgId\n                    });\n                    this.pkgId += 1;\n                }\n            }\n            else if (recordsToEmit[i].record.type === 'broadcaster') {\n                broadcasterData = recordsToEmit[i].record.value;\n            }\n            else if (recordsToEmit[i].record.type === 'observeMode') {\n                if (recordsToEmit[i].record.value.account === this.app.account) {\n                    observeModeData = recordsToEmit[i].record.value;\n                }\n            }\n        }\n        if (broadcasterData) {\n            this.app.vision.receiveBroadcasterAfterSync(broadcasterData);\n        }\n        if (observeModeData) {\n            this.app.vision.receiveObserveModeAfterSync(observeModeData);\n        }\n        this.app.room.execBatchSnapshots(snapshotsToEmit);\n    }\n}\nexport default Player;\n","class Simulator {\n    constructor(app) {\n        this._lastDirection = 0;\n        this._interruptFreeDraw = false;\n        this.app = app;\n    }\n    reconnect(rebuildSocket = false, resetApp = false) {\n        console.log(`DEV--> 模拟重连， 是否清空数据: ${resetApp}, 是否重新创建socket连接: ${rebuildSocket}`);\n        if (resetApp) {\n            this.app.resetState();\n        }\n        if (rebuildSocket) {\n            this.app.dataHub.handler._simulateReconnect();\n        }\n        else {\n            /**\n             * 不断开socket，重新请求同步数据\n             */\n            this.app.readyToSyncData();\n        }\n    }\n    generateRandomLines(points, repeat, intervalBtwPoints = 15, intervalBtwLines = 1000) {\n        this._interruptFreeDraw = false;\n        this._generateRandomLines(points, repeat, intervalBtwPoints, intervalBtwLines);\n    }\n    interruptRandomLines() {\n        this._interruptFreeDraw = true;\n    }\n    _generateRandomLines(points, repeat, intervalBtwPoints = 15, intervalBtwLines = 1000) {\n        console.log(`正在生成随机线段，还剩余${repeat}次`);\n        if (this._interruptFreeDraw) {\n            return console.log('随机涂鸦被打断');\n        }\n        if (repeat <= 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._generateRandomLines2(points, intervalBtwPoints)\n                .then(() => {\n                return this._generateRandomLines(points, repeat - 1, intervalBtwPoints, intervalBtwLines);\n            });\n        }, intervalBtwLines);\n    }\n    _generateRandomLines2(total, intervalBtwPoints) {\n        const el = this.app.container.el;\n        const width = el.offsetWidth;\n        const height = el.offsetHeight;\n        let x = Math.random() * width;\n        let y = Math.random() * height;\n        let event = new MouseEvent('mousedown', {\n            clientX: x,\n            clientY: y\n        });\n        this.app.container.el.dispatchEvent(event);\n        let promise = this._simulateMouseMove(x, y, 0);\n        for (let i = 0; i < total; i++) {\n            promise = promise\n                .then(lastXY => {\n                if (intervalBtwPoints > 0) {\n                    return new Promise(res => {\n                        setTimeout(() => {\n                            res(lastXY);\n                        }, intervalBtwPoints);\n                    });\n                }\n                else {\n                    return lastXY;\n                }\n            })\n                .then(res => {\n                if (this._interruptFreeDraw) {\n                    return Promise.reject(res);\n                }\n                return this._simulateMouseMove(res.x, res.y, i);\n            });\n        }\n        return promise\n            .catch((res) => {\n            return res;\n        })\n            .then(res => {\n            event = new MouseEvent('mouseup', {\n                clientX: res.x,\n                clientY: res.y\n            });\n            document.dispatchEvent(event);\n        });\n    }\n    _simulateMouseMove(x, y, currIndex) {\n        return new Promise((res) => {\n            setTimeout(() => {\n                const [dx, dy] = this._getDxDy(currIndex);\n                x += dx;\n                y += dy;\n                let event = new MouseEvent('mousemove', {\n                    clientX: x,\n                    clientY: y\n                });\n                document.dispatchEvent(event);\n                res({\n                    x, y\n                });\n            }, 0);\n        });\n    }\n    _getDxDy(currIndex) {\n        const RANDOM_BASE = 10;\n        const TURN_AFTER = 30;\n        if (currIndex % TURN_AFTER === 0) {\n            this._lastDirection = Math.floor(Math.random() * 4);\n        }\n        if (this._lastDirection === 0) {\n            return [Math.random() * RANDOM_BASE, Math.random() * RANDOM_BASE];\n        }\n        else if (this._lastDirection === 1) {\n            return [Math.random() * RANDOM_BASE, Math.random() * -RANDOM_BASE];\n        }\n        else if (this._lastDirection === 2) {\n            return [Math.random() * -RANDOM_BASE, Math.random() * RANDOM_BASE];\n        }\n        else {\n            return [Math.random() * -RANDOM_BASE, Math.random() * -RANDOM_BASE];\n        }\n    }\n}\nexport default Simulator;\n","import { showToast } from \"../../component/toast\";\nimport { transitionToCameraBound } from \"../animation\";\nclass Vision {\n    constructor(app) {\n        /**\n         * 当前用户的身份\n         */\n        this.mode = 'freeObserver';\n        this.app = app;\n        this.camera = this.app.camera;\n    }\n    get broadcasterName() {\n        return this.broadcasterNickname ? this.broadcasterNickname : this.broadcaster;\n    }\n    setMode(mode) {\n        this.mode = mode;\n        this.app.emit('event:appState:change', 'vision', {\n            mode: mode,\n            isBroadcasting: this.broadcaster !== undefined\n        });\n    }\n    setBroadcaster(value, nickname) {\n        this.broadcaster = value;\n        this.broadcasterNickname = nickname;\n        // this.app.emit('event:vision:isBroadcasting', this.broadcaster !== undefined)\n        this.app.emit('event:appState:change', 'vision', {\n            mode: this.mode,\n            isBroadcasting: this.broadcaster !== undefined\n        });\n    }\n    /**\n     * 设置当前用户为广播者, 并将消息广播给其他用户\n     */\n    setSelfAsBroadcaster() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        const account = this.app.account;\n        const nickname = this.app.nickname;\n        this.setMode('broadcaster');\n        this.setBroadcaster(account, nickname);\n        showToast({\n            type: 'success',\n            msg: '其他用户将与您保持视角同步',\n            time: 3\n        });\n        this.app.dataHub.broadcastRoomState({\n            broadcaster: account,\n            nickname: nickname\n        }, 'broadcaster');\n        /**\n         * 将本机的camera-bound发送给其他用户\n         */\n        this.app.emit('op:camera-bound:send', this.camera.getContainerWorldRect(), true);\n    }\n    /**\n     * 停止设置自己为广播者\n     */\n    unsetSelfAsBroadcaster() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        if (this.mode === 'broadcaster') {\n            if (this.broadcaster !== this.app.account) {\n                //运行时不应该走到该分支\n                console.error('白板--> 取消广播。但事实上目前用户并不是房间的广播者', this.broadcaster, this.app.account);\n            }\n            this.setMode('freeObserver');\n            this.setBroadcaster(undefined);\n            showToast({\n                type: 'success',\n                msg: '其他用户将停止与您保持视角同步'\n            });\n            this.app.dataHub.broadcastRoomState({\n                broadcaster: undefined\n            }, 'broadcaster');\n        }\n    }\n    /**\n     * 设置当前用户为跟随者，只有房间状态存在broadcaster时才可用\n     * 设置的目的是为了回放时接收到此数据，然后正确的还原用户当时的视角\n     */\n    setSelfAsFollower() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        if (this.mode === 'broadcaster') {\n            console.error('请先停止广播');\n        }\n        else if (this.mode === 'freeObserver') {\n            this.setMode('follower');\n            const boundary = this.camera.cameraBoundByUser[this.broadcaster];\n            transitionToCameraBound(this.camera, boundary);\n            showToast({\n                type: 'success',\n                msg: `与${this.broadcasterName}保持视角同步`\n            });\n            this.app.dataHub.broadcastRoomState({\n                account: this.app.account,\n                mode: 'follower'\n            }, 'observeMode');\n        }\n    }\n    /**\n     * 设置自己为自由视角。通过setSelfAsFollower可以重新设置为跟随者\n     */\n    setSelfAsFreeObserver() {\n        if (this.app.dataHub.isSynchronizing)\n            return;\n        if (this.mode === 'broadcaster') {\n            console.error('请先停止广播');\n        }\n        else if (this.mode === 'follower') {\n            this.setMode('freeObserver');\n            showToast({\n                type: 'success',\n                msg: `与${this.broadcasterName}解除视角同步`\n            });\n            this.app.dataHub.broadcastRoomState({\n                account: this.app.account,\n                mode: 'freeObserver'\n            }, 'observeMode');\n            /**\n             * 发送切换时的camera-bound\n             * 保证录像回放时，若切换到freeObserver, 能够通过自己的camera-bound查询到目前的camera\n             * 若没有发送，回放时则需要追溯上一次broadcaster的camera-bound是多少，并且还要截止到broadcaster结束主播前的camera，逻辑非常复杂\n             */\n            this.app.emit('op:camera-bound:send', this.camera.getContainerWorldRect(), false);\n        }\n    }\n    receiveBroadcaster(value) {\n        const { broadcaster, nickname } = value;\n        if (broadcaster) {\n            this.setMode('follower');\n            this.setBroadcaster(broadcaster, nickname);\n            //设置主播：account\n            showToast({\n                msg: `正在与${this.broadcasterName}保持视角同步`,\n                type: 'success',\n                time: 3\n            });\n        }\n        else {\n            showToast({\n                msg: `${this.broadcasterName}取消了视角同步`,\n                type: 'success',\n                time: 3\n            });\n            this.setMode('freeObserver');\n            this.setBroadcaster(undefined);\n        }\n    }\n    /**\n     * 同步之后设置当前视角状态。\n     * @param visionData\n     */\n    receiveBroadcasterAfterSync(lastVisionData) {\n        if (lastVisionData.broadcaster === this.app.account) {\n            showToast({\n                type: 'success',\n                msg: '其他用户正在与您保持视角同步',\n                time: 3\n            });\n            this.setMode('broadcaster');\n            this.setBroadcaster(this.app.account, this.app.nickname);\n        }\n        else if (lastVisionData.broadcaster) {\n            this.setMode('follower');\n            this.setBroadcaster(lastVisionData.broadcaster, lastVisionData.nickname);\n            showToast({\n                msg: `正在与${this.broadcasterName}保持视角同步`,\n                type: 'success',\n                time: 3\n            });\n        }\n        else {\n            this.setMode('freeObserver');\n            this.setBroadcaster(undefined);\n        }\n    }\n    /**\n     * 录像回放时，根据该函数设置用户的观看状态：是自由视角，还是跟随视角\n     * @param lastFree\n     */\n    receiveObserveModeAfterSync(lastObserveModeOfAccount) {\n        if (lastObserveModeOfAccount.account !== this.app.account)\n            return;\n        if (lastObserveModeOfAccount.mode === 'follower') {\n            this.setMode('follower');\n            const boundary = this.camera.cameraBoundByUser[this.broadcaster];\n            transitionToCameraBound(this.camera, boundary);\n            showToast({\n                type: 'success',\n                msg: `正在与${this.broadcasterName}保持视角同步`,\n            });\n        }\n        else {\n            this.setMode('freeObserver');\n            const boundary = this.camera.cameraBoundByUser[this.app.account];\n            transitionToCameraBound(this.camera, boundary);\n            showToast({\n                type: 'success',\n                msg: `与${this.broadcasterName}解除视角同步`\n            });\n        }\n    }\n}\nexport default Vision;\n","import { hideToast, showToast } from \"../../component/toast\";\nlet drawPlugin;\nlet imageDimension = {};\nconst AcceptTypesArr = ['jpg', 'jpeg', 'png', 'bmp', 'webp'];\nconst imageInput = document.createElement('input');\nwindow.onload = () => {\n    document.body.appendChild(imageInput);\n    imageInput.style.position = 'absolute';\n    imageInput.style.visibility = 'hidden';\n    imageInput.type = 'file';\n    imageInput.accept = 'image/*';\n    imageInput.onchange = (ev) => {\n        if (!drawPlugin) {\n            return console.error('白板--> uploadAndAddImage必须先设置drawPlugin');\n        }\n        const fileInput = ev.target;\n        const file = ev.target.files[0];\n        if (file && file.size && file.size > 10 * 1024 * 1024) {\n            return showToast({\n                msg: '图片大小不能超过10M',\n                type: 'error'\n            });\n        }\n        const nameParts = file.name.split('.');\n        const suffix = nameParts[nameParts.length - 1];\n        const isValidType = AcceptTypesArr.includes(suffix.toLowerCase());\n        if (!isValidType) {\n            return showToast({\n                msg: `当前仅支持${AcceptTypesArr.join(',')}格式文件`,\n                time: 3,\n                type: 'error'\n            });\n        }\n        uploadAndAddImage(drawPlugin, { fileInput }, imageDimension);\n    };\n};\n/**\n * 先将base64图片上传到nos中，然后添加到白板中\n * @param app\n * @param base64Url\n */\nexport const uploadAndAddImage = (app, opt, dimensions) => {\n    if (!opt.dataURL && !opt.fileInput) {\n        return console.error('白板--> uploadAndAddImage dataURL和fileInput至少提供一个');\n    }\n    const nim = app.nim;\n    nim.previewFile(Object.assign(Object.assign({}, opt), { beginupload(data) {\n            // - 如果开发者传入 fileInput, 在此回调之前不能修改 fileInput\n            // - 在此回调之后可以取消图片上传, 此回调会接收一个参数 `upload`, 调用 `upload.abort()` 来取消文件上传\n            // 重置input的value为null，否则重新选择相同的文件不会触发onChange\n            // 在这里修改fileInput的感觉很不好。previewFile这个函数不应该依赖于fileInput的\n            if (opt.fileInput) {\n                opt.fileInput.value = '';\n            }\n        }, done: function (err, res) {\n            hideToast();\n            if (err) {\n                console.error('图片上传失败', err);\n                showToast({\n                    msg: '上传失败',\n                    type: 'error',\n                    time: 3\n                });\n            }\n            else {\n                app.addImage({\n                    url: res.url,\n                    width: dimensions.width,\n                    height: dimensions.height\n                });\n            }\n        } }));\n    showToast({\n        msg: '上传图片中...',\n        time: 100000,\n        type: 'info'\n    });\n};\nexport const popupImageChooserAndAddImage = (app, dimensions) => {\n    drawPlugin = app;\n    imageDimension = dimensions;\n    imageInput.click();\n};\n",";(function(root) {\n  'use strict';\n\n  function isBase64(v, opts) {\n    if (v instanceof Boolean || typeof v === 'boolean') {\n      return false\n    }\n\n    if (!(opts instanceof Object)) {\n      opts = {}\n    }\n\n    if (opts.allowEmpty === false && v === '') {\n      return false\n    }\n\n    var regex = '(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?'\n    var mimeRegex = '(data:\\\\w+\\\\/[a-zA-Z\\\\+\\\\-\\\\.]+;base64,)'\n\n    if (opts.mimeRequired === true) {\n      regex =  mimeRegex + regex\n    } else if (opts.allowMime === true) {\n      regex = mimeRegex + '?' + regex\n    }\n\n    if (opts.paddingRequired === false) {\n      regex = '(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}(==)?|[A-Za-z0-9+\\\\/]{3}=?)?'\n    }\n\n    return (new RegExp('^' + regex + '$', 'gi')).test(v)\n  }\n\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = isBase64\n    }\n    exports.isBase64 = isBase64\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return isBase64\n    })\n  } else {\n    root.isBase64 = isBase64\n  }\n})(this);\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const RECORD_FILE = /(\\d+)-(\\d+)-(\\d+)-(\\d+)(-mixed)?\\.(mp4|aac|flv|gz)$/i;\nexport function parseUrl(url) {\n    let match = RECORD_FILE.exec(url || '');\n    if (match) {\n        return {\n            uid: match[1],\n            cid: match[2],\n            timestamp: parseInt(match[3]),\n            chunk: parseInt(match[4]),\n            type: match[6],\n            url\n        };\n    }\n    else {\n        const lastIndexOfDot = url.lastIndexOf('.');\n        return {\n            url,\n            type: url.slice(lastIndexOfDot + 1)\n        };\n    }\n}\nexport const getID = () => ~~(Math.random() * 10000);\nlet textDecoder;\nif (typeof window.TextEncoder === 'function') {\n    textDecoder = new window.TextDecoder(\"utf-8\");\n}\nexport function ab2str(buf) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (textDecoder) {\n            return textDecoder.decode(buf);\n        }\n        else {\n            return yield new Promise((resolve, reject) => {\n                let fileReader = new FileReader();\n                fileReader.onload = () => {\n                    resolve(fileReader.result);\n                };\n                fileReader.onerror = reject;\n                fileReader.readAsText(new Blob([new Uint8Array(buf)]));\n            });\n        }\n    });\n}\nexport const fetchBlob = (url) => {\n    return new Promise((resolve, reject) => {\n        let xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n        xhr.responseType = 'blob';\n        xhr.onload = () => {\n            resolve(xhr.response);\n        };\n        xhr.onerror = reject;\n        xhr.send();\n    });\n};\nconst p0 = (n) => n < 10 ? '0' + n : '' + n;\nexport const getTime = (n, showHour = false) => {\n    n = ~~(n / 1000);\n    let second = n % 60;\n    n -= second;\n    n = ~~(n / 60); // 有多少分钟\n    let minute = (n % 60); // \n    let hour = ~~(n / 60);\n    if (hour === 0 && showHour === false) {\n        return [`${p0(minute)}:${p0(second)}`, hour];\n    }\n    return [`${hour}:${p0(minute)}:${p0(second)}`, hour];\n};\n","!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).pako=t()}}(function(){return function r(s,o,l){function h(e,t){if(!o[e]){if(!s[e]){var a=\"function\"==typeof require&&require;if(!t&&a)return a(e,!0);if(d)return d(e,!0);var i=new Error(\"Cannot find module '\"+e+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var n=o[e]={exports:{}};s[e][0].call(n.exports,function(t){return h(s[e][1][t]||t)},n,n.exports,r,s,o,l)}return o[e].exports}for(var d=\"function\"==typeof require&&require,t=0;t<l.length;t++)h(l[t]);return h}({1:[function(t,e,a){\"use strict\";var s=t(\"./zlib/deflate\"),o=t(\"./utils/common\"),l=t(\"./utils/strings\"),n=t(\"./zlib/messages\"),r=t(\"./zlib/zstream\"),h=Object.prototype.toString,d=0,f=-1,_=0,u=8;function c(t){if(!(this instanceof c))return new c(t);this.options=o.assign({level:f,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:\"\"},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==d)throw new Error(n[a]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i=\"string\"==typeof e.dictionary?l.string2buf(e.dictionary):\"[object ArrayBuffer]\"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(a=s.deflateSetDictionary(this.strm,i))!==d)throw new Error(n[a]);this._dict_set=!0}}function i(t,e){var a=new c(e);if(a.push(t,!0),a.err)throw a.msg||n[a.err];return a.result}c.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,\"string\"==typeof t?n.input=l.string2buf(t):\"[object ArrayBuffer]\"===h.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(r),n.next_out=0,n.avail_out=r),1!==(a=s.deflate(n,i))&&a!==d)return this.onEnd(a),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||(\"string\"===this.options.to?this.onData(l.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==a);return 4===i?(a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===d):2!==i||(this.onEnd(d),!(n.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===d&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=c,a.deflate=i,a.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},a.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{\"./utils/common\":3,\"./utils/strings\":4,\"./zlib/deflate\":8,\"./zlib/messages\":13,\"./zlib/zstream\":15}],2:[function(t,e,a){\"use strict\";var f=t(\"./zlib/inflate\"),_=t(\"./utils/common\"),u=t(\"./utils/strings\"),c=t(\"./zlib/constants\"),i=t(\"./zlib/messages\"),n=t(\"./zlib/zstream\"),r=t(\"./zlib/gzheader\"),b=Object.prototype.toString;function s(t){if(!(this instanceof s))return new s(t);this.options=_.assign({chunkSize:16384,windowBits:0,to:\"\"},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var a=f.inflateInit2(this.strm,e.windowBits);if(a!==c.Z_OK)throw new Error(i[a]);if(this.header=new r,f.inflateGetHeader(this.strm,this.header),e.dictionary&&(\"string\"==typeof e.dictionary?e.dictionary=u.string2buf(e.dictionary):\"[object ArrayBuffer]\"===b.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=f.inflateSetDictionary(this.strm,e.dictionary))!==c.Z_OK))throw new Error(i[a])}function o(t,e){var a=new s(e);if(a.push(t,!0),a.err)throw a.msg||i[a.err];return a.result}s.prototype.push=function(t,e){var a,i,n,r,s,o=this.strm,l=this.options.chunkSize,h=this.options.dictionary,d=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?c.Z_FINISH:c.Z_NO_FLUSH,\"string\"==typeof t?o.input=u.binstring2buf(t):\"[object ArrayBuffer]\"===b.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new _.Buf8(l),o.next_out=0,o.avail_out=l),(a=f.inflate(o,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&h&&(a=f.inflateSetDictionary(this.strm,h)),a===c.Z_BUF_ERROR&&!0===d&&(a=c.Z_OK,d=!1),a!==c.Z_STREAM_END&&a!==c.Z_OK)return this.onEnd(a),!(this.ended=!0);o.next_out&&(0!==o.avail_out&&a!==c.Z_STREAM_END&&(0!==o.avail_in||i!==c.Z_FINISH&&i!==c.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(n=u.utf8border(o.output,o.next_out),r=o.next_out-n,s=u.buf2string(o.output,n),o.next_out=r,o.avail_out=l-r,r&&_.arraySet(o.output,o.output,n,r,0),this.onData(s)):this.onData(_.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(d=!0)}while((0<o.avail_in||0===o.avail_out)&&a!==c.Z_STREAM_END);return a===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(a=f.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===c.Z_OK):i!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(o.avail_out=0))},s.prototype.onData=function(t){this.chunks.push(t)},s.prototype.onEnd=function(t){t===c.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=s,a.inflate=o,a.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},a.ungzip=o},{\"./utils/common\":3,\"./utils/strings\":4,\"./zlib/constants\":6,\"./zlib/gzheader\":9,\"./zlib/inflate\":11,\"./zlib/messages\":13,\"./zlib/zstream\":15}],3:[function(t,e,a){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;a.assign=function(t){for(var e,a,i=Array.prototype.slice.call(arguments,1);i.length;){var n=i.shift();if(n){if(\"object\"!=typeof n)throw new TypeError(n+\"must be non-object\");for(var r in n)e=n,a=r,Object.prototype.hasOwnProperty.call(e,a)&&(t[r]=n[r])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+i),n);else for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(e=i=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),e=n=0,a=t.length;e<a;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],4:[function(t,e,a){\"use strict\";var l=t(\"./common\"),n=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var h=new l.Buf8(256),i=0;i<256;i++)h[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function d(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&n))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var a=\"\",i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a}h[254]=h[254]=1,a.string2buf=function(t){var e,a,i,n,r,s=t.length,o=0;for(n=0;n<s;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new l.Buf8(o),n=r=0;r<o;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),a<128?e[r++]=a:(a<2048?e[r++]=192|a>>>6:(a<65536?e[r++]=224|a>>>12:(e[r++]=240|a>>>18,e[r++]=128|a>>>12&63),e[r++]=128|a>>>6&63),e[r++]=128|63&a);return e},a.buf2binstring=function(t){return d(t,t.length)},a.binstring2buf=function(t){for(var e=new l.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,i,n,r,s=e||t.length,o=new Array(2*s);for(a=i=0;a<s;)if((n=t[a++])<128)o[i++]=n;else if(4<(r=h[n]))o[i++]=65533,a+=r-1;else{for(n&=2===r?31:3===r?15:7;1<r&&a<s;)n=n<<6|63&t[a++],r--;1<r?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return d(o,i)},a.utf8border=function(t,e){var a;for((e=e||t.length)>t.length&&(e=t.length),a=e-1;0<=a&&128==(192&t[a]);)a--;return a<0?e:0===a?e:a+h[t[a]]>e?a:e}},{\"./common\":3}],5:[function(t,e,a){\"use strict\";e.exports=function(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){for(a-=s=2e3<a?2e3:a;r=r+(n=n+e[i++]|0)|0,--s;);n%=65521,r%=65521}return n|r<<16|0}},{}],6:[function(t,e,a){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,a){\"use strict\";var o=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();e.exports=function(t,e,a,i){var n=o,r=i+a;t^=-1;for(var s=i;s<r;s++)t=t>>>8^n[255&(t^e[s])];return-1^t}},{}],8:[function(t,e,a){\"use strict\";var l,_=t(\"../utils/common\"),h=t(\"./trees\"),u=t(\"./adler32\"),c=t(\"./crc32\"),i=t(\"./messages\"),d=0,f=4,b=0,g=-2,m=-1,w=4,n=2,p=8,v=9,r=286,s=30,o=19,k=2*r+1,y=15,x=3,z=258,B=z+x+1,S=42,E=113,A=1,Z=2,R=3,C=4;function N(t,e){return t.msg=i[e],e}function O(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function I(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(_.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function U(t,e){h._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,I(t.strm)}function T(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-B?t.strstart-(t.w_size-B):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+z,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(a=e)+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(i=z-(_-r),r=_-z,s<i){if(t.match_start=e,o<=(s=i))break;u=h[r+s-1],c=h[r+s]}}}while((e=f[e&d])>l&&0!=--n);return s<=t.lookahead?s:t.lookahead}function H(t){var e,a,i,n,r,s,o,l,h,d,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-B)){for(_.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=a=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--a;);for(e=a=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--a;);n+=f}if(0===t.strm.avail_in)break;if(s=t.strm,o=t.window,l=t.strstart+t.lookahead,h=n,d=void 0,d=s.avail_in,h<d&&(d=h),a=0===d?0:(s.avail_in-=d,_.arraySet(o,s.input,s.next_in,d,l),1===s.state.wrap?s.adler=u(s.adler,o,d,l):2===s.state.wrap&&(s.adler=c(s.adler,o,d,l)),s.next_in+=d,s.total_in+=d,d),t.lookahead+=a,t.lookahead+t.insert>=x)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+x-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<B&&0!==t.strm.avail_in)}function j(t,e){for(var a,i;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a)),t.match_length>=x)if(i=h._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function K(t,e){for(var a,i,n;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=h._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(U(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=h._tr_tally(t,0,t.window[t.strstart-1]))&&U(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=h._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function M(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(2*k),this.dyn_dtree=new _.Buf16(2*(2*s+1)),this.bl_tree=new _.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(y+1),this.heap=new _.Buf16(2*r+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(2*r+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?S:E,t.adler=2===e.wrap?0:1,e.last_flush=d,h._tr_init(e),b):N(t,g)}function q(t){var e,a=Y(t);return a===b&&((e=t.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0),a}function G(t,e,a,i,n,r){if(!t)return g;var s=1;if(e===m&&(e=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),n<1||v<n||a!==p||i<8||15<i||e<0||9<e||r<0||w<r)return N(t,g);8===i&&(i=9);var o=new P;return(t.state=o).strm=t,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new _.Buf8(2*o.w_size),o.head=new _.Buf16(o.hash_size),o.prev=new _.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new _.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=a,q(t)}l=[new M(0,0,0,0,function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(H(t),0===t.lookahead&&e===d)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,U(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-B&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):(t.strstart>t.block_start&&(U(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,j),new M(4,5,16,8,j),new M(4,6,32,32,j),new M(4,4,16,16,K),new M(8,16,32,32,K),new M(8,16,128,128,K),new M(8,32,128,256,K),new M(32,128,258,1024,K),new M(32,258,258,4096,K)],a.deflateInit=function(t,e){return G(t,e,p,15,8,0)},a.deflateInit2=G,a.deflateReset=q,a.deflateResetKeep=Y,a.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,b):g},a.deflate=function(t,e){var a,i,n,r;if(!t||!t.state||5<e||e<0)return t?N(t,g):g;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return N(t,0===t.avail_out?-5:g);if(i.strm=t,a=i.last_flush,i.last_flush=e,i.status===S)if(2===i.wrap)t.adler=0,T(i,31),T(i,139),T(i,8),i.gzhead?(T(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),T(i,255&i.gzhead.time),T(i,i.gzhead.time>>8&255),T(i,i.gzhead.time>>16&255),T(i,i.gzhead.time>>24&255),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(T(i,255&i.gzhead.extra.length),T(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=c(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(T(i,0),T(i,0),T(i,0),T(i,0),T(i,0),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,3),i.status=E);else{var s=p+(i.w_bits-8<<4)<<8;s|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=E,F(i,s),0!==i.strstart&&(F(i,t.adler>>>16),F(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending!==i.pending_buf_size));)T(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&I(t),i.pending+2<=i.pending_buf_size&&(T(i,255&t.adler),T(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(I(t),0===t.avail_out)return i.last_flush=-1,b}else if(0===t.avail_in&&O(e)<=O(a)&&e!==f)return N(t,-5);if(666===i.status&&0!==t.avail_in)return N(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==d&&666!==i.status){var o=2===i.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(e===d)return A;break}if(t.match_length=0,a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):3===i.strategy?function(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=z){if(H(t),t.lookahead<=z&&e===d)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=s[n=t.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){r=t.strstart+z;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<r);t.match_length=z-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(a=h._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):l[i.level].func(i,e);if(o!==R&&o!==C||(i.status=666),o===A||o===R)return 0===t.avail_out&&(i.last_flush=-1),b;if(o===Z&&(1===e?h._tr_align(i):5!==e&&(h._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),I(t),0===t.avail_out))return i.last_flush=-1,b}return e!==f?b:i.wrap<=0?1:(2===i.wrap?(T(i,255&t.adler),T(i,t.adler>>8&255),T(i,t.adler>>16&255),T(i,t.adler>>24&255),T(i,255&t.total_in),T(i,t.total_in>>8&255),T(i,t.total_in>>16&255),T(i,t.total_in>>24&255)):(F(i,t.adler>>>16),F(i,65535&t.adler)),I(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?b:1)},a.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==S&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?N(t,g):(t.state=null,e===E?N(t,-3):b):g},a.deflateSetDictionary=function(t,e){var a,i,n,r,s,o,l,h,d=e.length;if(!t||!t.state)return g;if(2===(r=(a=t.state).wrap)||1===r&&a.status!==S||a.lookahead)return g;for(1===r&&(t.adler=u(t.adler,e,d,0)),a.wrap=0,d>=a.w_size&&(0===r&&(D(a.head),a.strstart=0,a.block_start=0,a.insert=0),h=new _.Buf8(a.w_size),_.arraySet(h,e,d-a.w_size,a.w_size,0),e=h,d=a.w_size),s=t.avail_in,o=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,H(a);a.lookahead>=x;){for(i=a.strstart,n=a.lookahead-(x-1);a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+x-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++,--n;);a.strstart=i,a.lookahead=x-1,H(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=x-1,a.match_available=0,t.next_in=o,t.input=l,t.avail_in=s,a.wrap=r,b},a.deflateInfo=\"pako deflate (from Nodeca project)\"},{\"../utils/common\":3,\"./adler32\":5,\"./crc32\":7,\"./messages\":13,\"./trees\":14}],9:[function(t,e,a){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,a){\"use strict\";e.exports=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S;a=t.state,i=t.next_in,B=t.input,n=i+(t.avail_in-5),r=t.next_out,S=t.output,s=r-(e-t.avail_out),o=r+(t.avail_out-257),l=a.dmax,h=a.wsize,d=a.whave,f=a.wnext,_=a.window,u=a.hold,c=a.bits,b=a.lencode,g=a.distcode,m=(1<<a.lenbits)-1,w=(1<<a.distbits)-1;t:do{c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=b[u&m];e:for(;;){if(u>>>=v=p>>>24,c-=v,0===(v=p>>>16&255))S[r++]=65535&p;else{if(!(16&v)){if(0==(64&v)){p=b[(65535&p)+(u&(1<<v)-1)];continue e}if(32&v){a.mode=12;break t}t.msg=\"invalid literal/length code\",a.mode=30;break t}k=65535&p,(v&=15)&&(c<v&&(u+=B[i++]<<c,c+=8),k+=u&(1<<v)-1,u>>>=v,c-=v),c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=g[u&w];a:for(;;){if(u>>>=v=p>>>24,c-=v,!(16&(v=p>>>16&255))){if(0==(64&v)){p=g[(65535&p)+(u&(1<<v)-1)];continue a}t.msg=\"invalid distance code\",a.mode=30;break t}if(y=65535&p,c<(v&=15)&&(u+=B[i++]<<c,(c+=8)<v&&(u+=B[i++]<<c,c+=8)),l<(y+=u&(1<<v)-1)){t.msg=\"invalid distance too far back\",a.mode=30;break t}if(u>>>=v,c-=v,(v=r-s)<y){if(d<(v=y-v)&&a.sane){t.msg=\"invalid distance too far back\",a.mode=30;break t}if(z=_,(x=0)===f){if(x+=h-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}}else if(f<v){if(x+=h+f-v,(v-=f)<k){for(k-=v;S[r++]=_[x++],--v;);if(x=0,f<k){for(k-=v=f;S[r++]=_[x++],--v;);x=r-y,z=S}}}else if(x+=f-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}for(;2<k;)S[r++]=z[x++],S[r++]=z[x++],S[r++]=z[x++],k-=3;k&&(S[r++]=z[x++],1<k&&(S[r++]=z[x++]))}else{for(x=r-y;S[r++]=S[x++],S[r++]=S[x++],S[r++]=S[x++],2<(k-=3););k&&(S[r++]=S[x++],1<k&&(S[r++]=S[x++]))}break}}break}}while(i<n&&r<o);i-=k=c>>3,u&=(1<<(c-=k<<3))-1,t.next_in=i,t.next_out=r,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=r<o?o-r+257:257-(r-o),a.hold=u,a.bits=c}},{}],11:[function(t,e,a){\"use strict\";var Z=t(\"../utils/common\"),R=t(\"./adler32\"),C=t(\"./crc32\"),N=t(\"./inffast\"),O=t(\"./inftrees\"),D=1,I=2,U=0,T=-2,F=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Z.Buf16(320),this.work=new Z.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg=\"\",e.wrap&&(t.adler=1&e.wrap),e.mode=F,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Z.Buf32(i),e.distcode=e.distdyn=new Z.Buf32(n),e.sane=1,e.back=-1,U):T}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):T}function l(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?T:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,o(t))):T}function h(t,e){var a,i;return t?(i=new r,(t.state=i).window=null,(a=l(t,e))!==U&&(t.state=null),a):T}var d,f,_=!0;function H(t){if(_){var e;for(d=new Z.Buf32(512),f=new Z.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(O(D,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;O(I,t.lens,0,32,f,0,t.work,{bits:5}),_=!1}t.lencode=d,t.lenbits=9,t.distcode=f,t.distbits=5}function j(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Z.Buf8(r.wsize)),i>=r.wsize?(Z.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(i<(n=r.wsize-r.wnext)&&(n=i),Z.arraySet(r.window,e,a-i,n,r.wnext),(i-=n)?(Z.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}a.inflateReset=o,a.inflateReset2=l,a.inflateResetKeep=s,a.inflateInit=function(t){return h(t,15)},a.inflateInit2=h,a.inflate=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S=0,E=new Z.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;12===(a=t.state).mode&&(a.mode=13),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,f=o,_=l,x=U;t:for(;;)switch(a.mode){case F:if(0===a.wrap){a.mode=13;break}for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(2&a.wrap&&35615===h){E[a.check=0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0),d=h=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg=\"incorrect header check\",a.mode=30;break}if(8!=(15&h)){t.msg=\"unknown compression method\",a.mode=30;break}if(d-=4,y=8+(15&(h>>>=4)),0===a.wbits)a.wbits=y;else if(y>a.wbits){t.msg=\"invalid window size\",a.mode=30;break}a.dmax=1<<y,t.adler=a.check=1,a.mode=512&h?10:12,d=h=0;break;case 2:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.flags=h,8!=(255&a.flags)){t.msg=\"unknown compression method\",a.mode=30;break}if(57344&a.flags){t.msg=\"unknown header flags set\",a.mode=30;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=3;case 3:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,E[2]=h>>>16&255,E[3]=h>>>24&255,a.check=C(a.check,E,4,0)),d=h=0,a.mode=4;case 4:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=5;case 5:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(o<(u=a.length)&&(u=o),u&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),Z.arraySet(a.head.extra,i,r,u,y)),512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,a.length-=u),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(65535&a.check)){t.msg=\"header crc mismatch\",a.mode=30;break}d=h=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=12;break;case 10:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}t.adler=a.check=L(h),d=h=0,a.mode=11;case 11:if(0===a.havedict)return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,2;t.adler=a.check=1,a.mode=12;case 12:if(5===e||6===e)break t;case 13:if(a.last){h>>>=7&d,d-=7&d,a.mode=27;break}for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}switch(a.last=1&h,d-=1,3&(h>>>=1)){case 0:a.mode=14;break;case 1:if(H(a),a.mode=20,6!==e)break;h>>>=2,d-=2;break t;case 2:a.mode=17;break;case 3:t.msg=\"invalid block type\",a.mode=30}h>>>=2,d-=2;break;case 14:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg=\"invalid stored block lengths\",a.mode=30;break}if(a.length=65535&h,d=h=0,a.mode=15,6===e)break t;case 15:a.mode=16;case 16:if(u=a.length){if(o<u&&(u=o),l<u&&(u=l),0===u)break t;Z.arraySet(n,i,r,u,s),o-=u,r+=u,l-=u,s+=u,a.length-=u;break}a.mode=12;break;case 17:for(;d<14;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,286<a.nlen||30<a.ndist){t.msg=\"too many length or distance symbols\",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.lens[A[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[A[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,z={bits:a.lenbits},x=O(0,a.lens,0,19,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg=\"invalid code lengths set\",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(w<16)h>>>=g,d-=g,a.lens[a.have++]=w;else{if(16===w){for(B=g+2;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h>>>=g,d-=g,0===a.have){t.msg=\"invalid bit length repeat\",a.mode=30;break}y=a.lens[a.have-1],u=3+(3&h),h>>>=2,d-=2}else if(17===w){for(B=g+3;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=3+(7&(h>>>=g)),h>>>=3,d-=3}else{for(B=g+7;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=11+(127&(h>>>=g)),h>>>=7,d-=7}if(a.have+u>a.nlen+a.ndist){t.msg=\"invalid bit length repeat\",a.mode=30;break}for(;u--;)a.lens[a.have++]=y}}if(30===a.mode)break;if(0===a.lens[256]){t.msg=\"invalid code -- missing end-of-block\",a.mode=30;break}if(a.lenbits=9,z={bits:a.lenbits},x=O(D,a.lens,0,a.nlen,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg=\"invalid literal/lengths set\",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,z={bits:a.distbits},x=O(I,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,z),a.distbits=z.bits,x){t.msg=\"invalid distances set\",a.mode=30;break}if(a.mode=20,6===e)break t;case 20:a.mode=21;case 21:if(6<=o&&258<=l){t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,N(t,_),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(m&&0==(240&m)){for(p=g,v=m,k=w;m=(S=a.lencode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,a.length=w,0===m){a.mode=26;break}if(32&m){a.back=-1,a.mode=12;break}if(64&m){t.msg=\"invalid literal/length code\",a.mode=30;break}a.extra=15&m,a.mode=22;case 22:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;m=(S=a.distcode[h&(1<<a.distbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(0==(240&m)){for(p=g,v=m,k=w;m=(S=a.distcode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,64&m){t.msg=\"invalid distance code\",a.mode=30;break}a.offset=w,a.extra=15&m,a.mode=24;case 24:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg=\"invalid distance too far back\",a.mode=30;break}a.mode=25;case 25:if(0===l)break t;if(u=_-l,a.offset>u){if((u=a.offset-u)>a.whave&&a.sane){t.msg=\"invalid distance too far back\",a.mode=30;break}u>a.wnext?(u-=a.wnext,c=a.wsize-u):c=a.wnext-u,u>a.length&&(u=a.length),b=a.window}else b=n,c=s-a.offset,u=a.length;for(l<u&&(u=l),l-=u,a.length-=u;n[s++]=b[c++],--u;);0===a.length&&(a.mode=21);break;case 26:if(0===l)break t;n[s++]=a.length,l--,a.mode=21;break;case 27:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[r++]<<d,d+=8}if(_-=l,t.total_out+=_,a.total+=_,_&&(t.adler=a.check=a.flags?C(a.check,n,_,s-_):R(a.check,n,_,s-_)),_=l,(a.flags?h:L(h))!==a.check){t.msg=\"incorrect data check\",a.mode=30;break}d=h=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(4294967295&a.total)){t.msg=\"incorrect length check\",a.mode=30;break}d=h=0}a.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return T}return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||_!==t.avail_out&&a.mode<30&&(a.mode<27||4!==e))&&j(t,t.output,t.next_out,_-t.avail_out)?(a.mode=31,-4):(f-=t.avail_in,_-=t.avail_out,t.total_in+=f,t.total_out+=_,a.total+=_,a.wrap&&_&&(t.adler=a.check=a.flags?C(a.check,n,_,t.next_out-_):R(a.check,n,_,t.next_out-_)),t.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===f&&0===_||4===e)&&x===U&&(x=-5),x)},a.inflateEnd=function(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,U},a.inflateGetHeader=function(t,e){var a;return t&&t.state?0==(2&(a=t.state).wrap)?T:((a.head=e).done=!1,U):T},a.inflateSetDictionary=function(t,e){var a,i=e.length;return t&&t.state?0!==(a=t.state).wrap&&11!==a.mode?T:11===a.mode&&R(1,e,i,0)!==a.check?-3:j(t,e,i,i)?(a.mode=31,-4):(a.havedict=1,U):T},a.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":3,\"./adler32\":5,\"./crc32\":7,\"./inffast\":10,\"./inftrees\":12}],12:[function(t,e,a){\"use strict\";var D=t(\"../utils/common\"),I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],F=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,a,i,n,r,s,o){var l,h,d,f,_,u,c,b,g,m=o.bits,w=0,p=0,v=0,k=0,y=0,x=0,z=0,B=0,S=0,E=0,A=null,Z=0,R=new D.Buf16(16),C=new D.Buf16(16),N=null,O=0;for(w=0;w<=15;w++)R[w]=0;for(p=0;p<i;p++)R[e[a+p]]++;for(y=m,k=15;1<=k&&0===R[k];k--);if(k<y&&(y=k),0===k)return n[r++]=20971520,n[r++]=20971520,o.bits=1,0;for(v=1;v<k&&0===R[v];v++);for(y<v&&(y=v),w=B=1;w<=15;w++)if(B<<=1,(B-=R[w])<0)return-1;if(0<B&&(0===t||1!==k))return-1;for(C[1]=0,w=1;w<15;w++)C[w+1]=C[w]+R[w];for(p=0;p<i;p++)0!==e[a+p]&&(s[C[e[a+p]]++]=p);if(0===t?(A=N=s,u=19):1===t?(A=I,Z-=257,N=U,O-=257,u=256):(A=T,N=F,u=-1),w=v,_=r,z=p=E=0,d=-1,f=(S=1<<(x=y))-1,1===t&&852<S||2===t&&592<S)return 1;for(;;){for(c=w-z,s[p]<u?(b=0,g=s[p]):s[p]>u?(b=N[O+s[p]],g=A[Z+s[p]]):(b=96,g=0),l=1<<w-z,v=h=1<<x;n[_+(E>>z)+(h-=l)]=c<<24|b<<16|g|0,0!==h;);for(l=1<<w-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,p++,0==--R[w]){if(w===k)break;w=e[a+s[p]]}if(y<w&&(E&f)!==d){for(0===z&&(z=y),_+=v,B=1<<(x=w-z);x+z<k&&!((B-=R[x+z])<=0);)x++,B<<=1;if(S+=1<<x,1===t&&852<S||2===t&&592<S)return 1;n[d=E&f]=y<<24|x<<16|_-r|0}}return 0!==E&&(n[_+E]=w-z<<24|64<<16|0),o.bits=y,0}},{\"../utils/common\":3}],13:[function(t,e,a){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],14:[function(t,e,a){\"use strict\";var l=t(\"../utils/common\"),o=0,h=1;function i(t){for(var e=t.length;0<=--e;)t[e]=0}var d=0,s=29,f=256,_=f+1+s,u=30,c=19,g=2*_+1,m=15,n=16,b=7,w=256,p=16,v=17,k=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(_+2));i(S);var E=new Array(2*u);i(E);var A=new Array(512);i(A);var Z=new Array(256);i(Z);var R=new Array(s);i(R);var C,N,O,D=new Array(u);function I(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function U(t){return t<256?A[t]:A[256+(t>>>7)]}function T(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,a){t.bi_valid>n-a?(t.bi_buf|=e<<t.bi_valid&65535,T(t,t.bi_buf),t.bi_buf=e>>n-t.bi_valid,t.bi_valid+=a-n):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function L(t,e,a){F(t,a[2*e],a[2*e+1])}function H(t,e){for(var a=0;a|=1&t,t>>>=1,a<<=1,0<--e;);return a>>>1}function j(t,e,a){var i,n,r=new Array(m+1),s=0;for(i=1;i<=m;i++)r[i]=s=s+a[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=H(r[o]++,o))}}function K(t){var e;for(e=0;e<_;e++)t.dyn_ltree[2*e]=0;for(e=0;e<u;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?T(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function Y(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&P(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!P(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function q(t,e,a){var i,n,r,s,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(r=Z[n])+f+1,e),0!==(s=y[r])&&F(t,n-=R[r],s),L(t,r=U(--i),a),0!==(s=x[r])&&F(t,i-=D[r],s)),o<t.last_lit;);L(t,w,e)}function G(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=g,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)r[2*(n=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;1<=a;a--)Y(t,r,a);for(n=l;a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Y(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,Y(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;r<=m;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<g;a++)c<(r=l[2*l[2*(i=t.heap[a])+1]+1]+1)&&(r=c,b++),l[2*i+1]=r,h<i||(t.bl_count[r]++,s=0,u<=i&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(0<b);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)h<(n=t.heap[--a])||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}(t,e),j(r,h,t.bl_count)}function X(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*p]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*k]++,r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function W(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),i=0;i<=a;i++)if(n=s,s=e[2*(i+1)+1],!(++o<l&&n===s)){if(o<h)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==r&&(L(t,n,t.bl_tree),o--),L(t,p,t.bl_tree),F(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),F(t,o-3,3)):(L(t,k,t.bl_tree),F(t,o-11,7));r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4)}}i(D);var J=!1;function Q(t,e,a,i){var n,r,s,o;F(t,(d<<1)+(i?1:0),3),r=e,s=a,o=!0,M(n=t),o&&(T(n,s),T(n,~s)),l.arraySet(n.pending_buf,n.window,r,s,n.pending),n.pending+=s}a._tr_init=function(t){J||(function(){var t,e,a,i,n,r=new Array(m+1);for(i=a=0;i<s-1;i++)for(R[i]=a,t=0;t<1<<y[i];t++)Z[a++]=i;for(Z[a-1]=i,i=n=0;i<16;i++)for(D[i]=n,t=0;t<1<<x[i];t++)A[n++]=i;for(n>>=7;i<u;i++)for(D[i]=n<<7,t=0;t<1<<x[i]-7;t++)A[256+n++]=i;for(e=0;e<=m;e++)r[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,r[8]++;for(;t<=255;)S[2*t+1]=9,t++,r[9]++;for(;t<=279;)S[2*t+1]=7,t++,r[7]++;for(;t<=287;)S[2*t+1]=8,t++,r[8]++;for(j(S,_+1,r),t=0;t<u;t++)E[2*t+1]=5,E[2*t]=H(t,5);C=new I(S,y,f+1,_,m),N=new I(E,x,0,u,m),O=new I(new Array(0),z,0,c,b)}(),J=!0),t.l_desc=new r(t.dyn_ltree,C),t.d_desc=new r(t.dyn_dtree,N),t.bl_desc=new r(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,K(t)},a._tr_stored_block=Q,a._tr_flush_block=function(t,e,a,i){var n,r,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return h;for(e=32;e<f;e++)if(0!==t.dyn_ltree[2*e])return h;return o}(t)),G(t,t.l_desc),G(t,t.d_desc),s=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=c-1;3<=e&&0===t.bl_tree[2*B[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=n&&(n=r)):n=r=a+5,a+4<=n&&-1!==e?Q(t,e,a,i):4===t.strategy||r===n?(F(t,2+(i?1:0),3),q(t,S,E)):(F(t,4+(i?1:0),3),function(t,e,a,i){var n;for(F(t,e-257,5),F(t,a-1,5),F(t,i-4,4),n=0;n<i;n++)F(t,t.bl_tree[2*B[n]+1],3);W(t,t.dyn_ltree,e-1),W(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),q(t,t.dyn_ltree,t.dyn_dtree)),K(t),i&&M(t)},a._tr_tally=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(Z[a]+f+1)]++,t.dyn_dtree[2*U(e)]++),t.last_lit===t.lit_bufsize-1},a._tr_align=function(t){var e;F(t,2,3),L(t,w,S),16===(e=t).bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{\"../utils/common\":3}],15:[function(t,e,a){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},{}],\"/\":[function(t,e,a){\"use strict\";var i={};(0,t(\"./lib/utils/common\").assign)(i,t(\"./lib/deflate\"),t(\"./lib/inflate\"),t(\"./lib/zlib/constants\")),e.exports=i},{\"./lib/deflate\":1,\"./lib/inflate\":2,\"./lib/utils/common\":3,\"./lib/zlib/constants\":6}]},{},[])(\"/\")});\n","/**\n * Track，轨道，代表音视频数据，或者白板数据。数据是一系列带时间戳的数组。\n * 音视频轨道由浏览器的<video />组件播放，白板由sdk控制播放。\n *\n * 音视频播放由video.play, video.pause控制。白板播放由ticktick发送tick事件，然后白板轨道根据此事件绘制截至到某个时间戳的所有动作。\n *\n * 音视频轨道数据量较大，不一定完全载入就会播放，播放过程中可能存在数据延时。白板播放过程中，可能会加载文档/图片，加载过程与音视频加载类似，也是异步过程。\n *\n * 在多人会议场景中，随着演讲人的切换，可能音视频的位置会变化，显示状态会变化。所以需要轨道将当前可见的音视频告诉开发者，开发者根据此信息调整容器位置\n * 当音视频/白板容器准备好之前，应该暂停音视频/白板的播放\n *\n *\n *\n *\n * Track有很多维度的状态\n * init:            Track还未抓取轨道数据\n * ready:           Track已抓取轨道metadata（如轨道长度等数据）\n * show / hide:     Track是否显示。默认为隐藏，需要开发者提供容器显示\n * play / pause:    是否正在播放。video有这个属性。白板的播放需要TickTick来主动调用，因此它永远处于pause状态\n * waitingForData:  是否正在等待数据。video track触发onwaiting时，需要等待track数据。onloadeddata触发时，waitingForData为false。\n *\n *\n * Track的几个方法：\n *\n * play/pause:      开始/暂停当前播放的Track。只对video，audio有效。白板永远处于暂停状态\n * seekTo:          跳转到目前位置。Track更新时间戳，且更新自己的状态\n * tick：           更新下一帧。video无需处理该函数，因为播放中的视频会自己调整自己的状态。白板Track需要更新自己的状态\n *\n * Track的几个事件：\n * notifyPause：\n * notifyPlay：\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from \"eventemitter3\";\nexport default class Track extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.offsetBegin = 0;\n        this.offsetEnd = 0;\n    }\n    get duration() {\n        return this.offsetEnd - this.offsetBegin;\n    }\n    playUtilBtwTimeAndReady(time) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.showTrack();\n        });\n    }\n    isWaiting(time) {\n        if (time < this.offsetBegin || time > this.offsetEnd) {\n            return false;\n        }\n        return false;\n    }\n    setViewer(viewer) { }\n    setPlaySpeed(speed) { }\n    showTrack() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.state = 'beforeshow';\n            yield new Promise(resolve => {\n                this.emit('visibleChange', 'show', this.params, (el) => {\n                    this.showTrackCb(el);\n                    resolve();\n                });\n            });\n            this.state = 'playing';\n            setTimeout(() => {\n                this.emit('showTrack');\n            });\n        });\n    }\n    hideTrack() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.state = 'beforefinish';\n            yield new Promise((resolve) => {\n                this.emit('visibleChange', 'hide', this.params, () => {\n                    this.hideTrackCb();\n                    resolve();\n                });\n            });\n            setTimeout(() => {\n                this.emit('hideTrack');\n            });\n            this.state = 'finished';\n        });\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._awaitTrackHandler();\n            if (this.state === 'playing') {\n                yield this.hideTrack();\n            }\n            this.eventNames().forEach(name => this.off(name));\n        });\n    }\n    update(time) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.seekTo(time, true, false);\n            //update是通过ticker.tick方法调用的。\n            //update后track应该处于播放状态\n            //timeline.play并不会启动ready状态的视频tag，也不应该启动ready状态的tag。\n            //因为一些ready状态的tag在play被调用时并不在时间范围内。\n            //所以需要在update时启动。\n            this.play();\n        });\n    }\n    seekTo(time, forward, jumpTo = true) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state === 'init' || this.state === 'error')\n                return;\n            yield this._awaitTrackHandler();\n            /**\n             * 时间没有到当前轨道开始时间，维持原状，不进行任何处理\n             */\n            if (time < this.offsetBegin) {\n                if (this.state === 'playing') {\n                    yield this.hideTrack();\n                }\n                return this.state = 'ready';\n            }\n            else if (time > this.offsetEnd) {\n                if (this.state === 'playing') {\n                    yield this.hideTrack();\n                }\n                return this.state = 'finished';\n            }\n            else {\n                if (this.state === 'ready' || this.state === 'finished') {\n                    yield this.showTrack();\n                }\n                this.state = 'playing';\n                yield this.doSetTrack(time, forward, jumpTo);\n            }\n        });\n    }\n    _awaitTrackHandler() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state === 'beforeshow') {\n                yield new Promise((resolve) => {\n                    this.once('showTrack', resolve);\n                });\n                this.state = 'playing';\n            }\n            if (this.state === 'beforefinish') {\n                yield new Promise((resolve) => {\n                    this.once('hideTrack', resolve);\n                });\n                this.state = 'finished';\n            }\n        });\n    }\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * 所有用户的合集管理\n */\nimport User from \"../Model/User\";\nimport { EventEmitter } from \"eventemitter3\";\nexport class UserManager extends EventEmitter {\n    constructor({ account, maxUserHistory }) {\n        super();\n        this.userKeys = [];\n        this.userMap = new Map();\n        this.onUndo = (user) => {\n            this.emit('undo', user);\n        };\n        this.onRedo = (user) => {\n            this.emit('redo', user);\n        };\n        this.account = account;\n        this.maxUserHistory = typeof maxUserHistory === 'number' ? maxUserHistory : 10;\n    }\n    getUser(account) {\n        return this.userMap.get(account);\n    }\n    addUser(account) {\n        if (this.userMap.has(account)) {\n            return this.userMap.get(account);\n        }\n        else {\n            let user = new User(account, this.maxUserHistory);\n            // 创建监听\n            user.on('undo', this.onUndo);\n            user.on('redo', this.onRedo);\n            this.userMap.set(account, user);\n            return user;\n        }\n    }\n    hasUser(account) {\n        return this.userMap.has(account);\n    }\n    get myself() { return this.userMap.get(this.account); }\n    ;\n    get others() {\n        let others = [];\n        this.userMap.forEach((user, uid) => {\n            if (uid === this.account) {\n            }\n            else {\n                others.push(user);\n            }\n        });\n        return others;\n    }\n    get uids() {\n        return [...this.userMap.keys()];\n    }\n    get all() {\n        return [...this.userMap.values()];\n    }\n    remove(account) {\n        // 清除监听\n        if (this.userMap.has(account)) {\n            let user = this.userMap.get(account);\n            user.removeAllListeners();\n        }\n        return this.userMap.delete(account);\n    }\n    removeOtherUsers() {\n        this.others.forEach(user => {\n            user.removeAllListeners();\n            this.userMap.delete(user.account);\n        });\n    }\n    destroy() {\n        // 清除监听\n        this.all.forEach(user => user.removeAllListeners());\n        this.userMap.clear();\n        // delete this.account\n    }\n    toSnapshot(opt) {\n        return this.all.map(user => ({\n            account: user.account,\n            recycle: user.recycle.map(shape => shape.toSnapshot(opt)),\n            calibrate: user.getCalibrateAction().toString()\n        }));\n    }\n}\n","export function isStandardCursor(cursor) {\n}\nexport function isStandardMode(mode) {\n    if (typeof mode !== 'string') {\n        return [false, '模式必须是字符串'];\n    }\n    mode = mode.trim();\n    if (mode === '') {\n        return [false, '模式不能为空！'];\n    }\n    if (mode === 'player') {\n        return [true];\n    }\n    if (!~mode.indexOf(':')) {\n        return [false, '模式格式不正确！没有找到分割符-> ：'];\n    }\n    let modeArr = mode.split(':');\n    // TODO: 验证mode Arr\n    return [true];\n}\nexport function isValidTool(tool) {\n    if (typeof tool !== 'string') {\n        return false;\n    }\n    switch (tool) {\n        case 'fill':\n        case 'flag':\n        case 'free':\n        case 'line':\n        case 'rect':\n        case 'circle':\n        case 'roundRect':\n        case 'solidRect':\n        case 'solidRoundRect':\n        case 'solidCircle':\n        case 'text':\n        // case 'select':\n        case 'ellipse':\n        case 'solidEllipse':\n        case 'erase':\n            {\n                return true;\n            }\n        default: {\n            const fullCaseChecker = tool;\n            return false;\n        }\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Track from './Track';\nimport { pako } from '../../../src/core/utils';\nimport { ab2str, fetchBlob } from '../utils';\nexport default class WTrack extends Track {\n    constructor(params, opt) {\n        super();\n        this.params = params;\n        this.viewerArr = [];\n        this.urlArray = [];\n        this.type = 'gz';\n        this.offsetBegin = 0;\n        this.offsetEnd = 0;\n        let timestamp;\n        if (Array.isArray(params)) {\n            this.originalParams = params.slice();\n            timestamp = params[0].timestamp;\n            this.urlArray = params.map(param => param.url);\n        }\n        else {\n            this.originalParams = [params];\n            timestamp = params.timestamp;\n            this.url = params.url;\n        }\n        this.timestamp = timestamp;\n        this.opt = opt;\n        this.state = 'init';\n        this.nextRecordIndex = 0;\n        this.viewer = 'unknown';\n    }\n    /**\n     * 白板1.0，2.0版本的处理\n     */\n    fetchData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('init wb track ');\n            let blob;\n            try {\n                blob = yield fetchBlob(this.url);\n            }\n            catch (e) {\n                return ['error', []];\n            }\n            const rawRecordsList = yield this.getRawRecordFromBlob(blob);\n            if (rawRecordsList.length) {\n                this.offsetEnd = Math.max(this.offsetBegin + rawRecordsList[rawRecordsList.length - 1].time + 1000, this.offsetEnd);\n            }\n            return ['ready', rawRecordsList];\n        });\n    }\n    fetchMultiData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let blobArray = [];\n            try {\n                for (let i = 0; i < this.urlArray.length; i++) {\n                    blobArray[i] = yield fetchBlob(this.urlArray[i]);\n                }\n            }\n            catch (e) {\n                return ['error', []];\n            }\n            const listOfRawRecordList = yield Promise.all(blobArray.map((blob, index) => __awaiter(this, void 0, void 0, function* () {\n                //每一个录像文件得到一个rawRecordsList\n                const rawRecordsList = yield this.getRawRecordFromBlob(blob);\n                const params = this.originalParams[index];\n                const offsetBegin = params.timestamp - this.timestamp;\n                let endAt = 0;\n                if (rawRecordsList.length) {\n                    endAt = rawRecordsList[rawRecordsList.length - 1].time;\n                    this.offsetEnd = Math.max(offsetBegin + endAt + 1000, this.offsetEnd);\n                }\n                return {\n                    cid: params.cid,\n                    beginAt: offsetBegin,\n                    endAt: offsetBegin + endAt,\n                    records: rawRecordsList\n                };\n            })));\n            /**\n             * 将同一个channel的多个录像文件合并到一起\n             */\n            const rawDataByChannel = this.mergeRawDataByChannel(listOfRawRecordList);\n            /**\n             * 如果不同channel之间的时间有重叠，则返回error\n             */\n            if (this.isChannelOverlapping(rawDataByChannel)) {\n                return ['error', []];\n            }\n            return ['ready', rawDataByChannel];\n        });\n    }\n    getRawRecordFromBlob(blob) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rawRecordsList = yield new Promise((resolve) => {\n                let result = [];\n                let reader = new FileReader();\n                reader.readAsBinaryString(blob);\n                reader.onload = () => __awaiter(this, void 0, void 0, function* () {\n                    let rawBuffer = pako.ungzip(reader.result);\n                    let dv = new DataView(rawBuffer.buffer);\n                    let length = dv.byteLength;\n                    let current = 0;\n                    while (current < length) {\n                        let cLen = dv.getInt32(current, true);\n                        let time = dv.getInt32(current + 4, true);\n                        let contentLen = cLen - 8;\n                        let offset = current + 8;\n                        let subb = rawBuffer.slice(offset, offset + contentLen);\n                        // console.log(subb)\n                        let str = yield ab2str(subb);\n                        result.push({\n                            time: time,\n                            str: str\n                        });\n                        current = current + cLen;\n                    }\n                    //@ts-ignore\n                    dv = null; // window.rawstring = rawBuffer = null;\n                    resolve(result);\n                });\n            });\n            return rawRecordsList;\n        });\n    }\n    /**\n     * 将数据按照cid合并\n     */\n    mergeRawDataByChannel(listOfRawRecordList) {\n        const rawDataByCid = {};\n        for (let i = 0; i < listOfRawRecordList.length; i++) {\n            const rawData = listOfRawRecordList[i];\n            if (rawDataByCid.hasOwnProperty(rawData.cid)) {\n                //合并\n                const oldRawData = rawDataByCid[rawData.cid];\n                rawDataByCid[rawData.cid] = {\n                    cid: rawData.cid,\n                    beginAt: Math.min(oldRawData.beginAt, rawData.beginAt),\n                    endAt: Math.max(oldRawData.endAt, rawData.endAt),\n                    records: oldRawData.records.concat(rawData.records)\n                };\n            }\n            else {\n                rawDataByCid[rawData.cid] = rawData;\n            }\n        }\n        const result = [];\n        for (let cid in rawDataByCid) {\n            rawDataByCid[cid].records = rawDataByCid[cid].records.sort((a, b) => {\n                return a.time - b.time;\n            });\n            result.push(rawDataByCid[cid]);\n        }\n        return result;\n    }\n    /**\n     * 不同cid的录像时间之间是否存在重叠区域\n     */\n    isChannelOverlapping(listOfRawRecordList) {\n        const listSortByBeginAt = listOfRawRecordList.sort((a, b) => {\n            return a.beginAt - b.beginAt;\n        });\n        for (let i = 0; i < listSortByBeginAt.length - 1; i++) {\n            const first = listSortByBeginAt[i];\n            const second = listSortByBeginAt[i + 1];\n            if (first.endAt > second.beginAt) {\n                console.error(`\nchannel:${first.cid}与channel:${second.cid}之间的时间存在重叠区域，\nchannel:${first.cid}的开始结束时间为: ${this.formatTimeOffset(first.beginAt)}-${this.formatTimeOffset(first.endAt)},\nchannel:${second.cid}的开始结束时间为: ${this.formatTimeOffset(second.beginAt)}-${this.formatTimeOffset(second.endAt)}\n        `);\n                return true;\n            }\n        }\n        return false;\n    }\n    formatTimeOffset(offset) {\n        return new Date(offset + this.timestamp).toLocaleString();\n    }\n    hideTrackCb() { }\n    pause() { }\n    play() { }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from 'eventemitter3';\nimport Timeline from './Timeline';\nimport { mount } from './ToolUI';\nimport VTrack from './Track/VideoTrack';\nimport V1V2Track from './Track/Wb_V1V2';\nimport V3Track from './Track/Wb_V3';\nimport { parseUrl } from './utils';\nclass RecordPlayer extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.speed = 1;\n        this.init = (opt) => {\n            let tracks = [];\n            let v3TrackFileObjs = [];\n            opt.videoTracks.forEach(fileObj => {\n                tracks.push(new VTrack(fileObj));\n            });\n            opt.whiteboardTracks.forEach(fileObj => {\n                if (opt.version === '1.0' || opt.version === '2.0') {\n                    //白板1.0，2.0版本的录像文件\n                    tracks.push(new V1V2Track(fileObj, {\n                        version: opt.version\n                    }));\n                }\n                else {\n                    //白板3.0版本的录像文件\n                    v3TrackFileObjs.push(fileObj);\n                }\n            });\n            let drawPlugin = undefined;\n            if (v3TrackFileObjs.length > 0) {\n                const wbTrack = new V3Track(v3TrackFileObjs, {\n                    version: opt.version\n                });\n                tracks.push(wbTrack);\n                drawPlugin = wbTrack.drawManager;\n            }\n            this.timeline = new Timeline(tracks);\n            this.timeline.on('tick', (time) => this.emit('tick', time));\n            this.timeline.on('pause', () => this.emit('pause'));\n            this.timeline.on('play', () => this.emit('play'));\n            this.timeline.on('finished', () => { this.emit('finished'); });\n            this.timeline.on('visibleChange', (type, option, callback) => {\n                this._visibleChangeCallHandler(type, option, callback);\n                this.emit('visibleChange', type, option);\n            });\n            const player = this;\n            return new Promise((res, rej) => {\n                this.timeline.once('ready', (params) => {\n                    res({\n                        player,\n                        params,\n                        drawPlugin\n                    });\n                });\n                this.timeline.once('error', err => {\n                    rej(err);\n                });\n            });\n        };\n        this._visibleChangeCallHandler = (type, option, callback) => {\n            if (type === 'show') {\n                // 展示白板\n                const dom = option.container;\n                // 开发者可以在这个时候展示白板容器区域，完成后，将dom传入callback\n                callback(dom);\n            }\n            else {\n                // 开发者可以在这个时候隐藏白板容器区域，完成后，调用callback回调\n                callback();\n            }\n        };\n    }\n    static getInstance(opt) {\n        const whiteboardParams = opt.whiteboardParams.urlArr\n            .map((url) => {\n            const params = parseUrl(url);\n            if (params && opt.whiteboardParams.timestamp) {\n                params.timestamp = opt.whiteboardParams.timestamp;\n            }\n            if (!params.timestamp) {\n                throw new Error(`replay--> 无法获取白板录像文件的开始时间, 请仔细检查你的参数`);\n            }\n            if (!opt.whiteboardParams.container) {\n                throw new Error('replay--> 白板容器不可用，请仔细检查你的参数');\n            }\n            params.container = opt.whiteboardParams.container;\n            params.drawPluginParams = opt.whiteboardParams.drawPluginParams;\n            return params;\n        })\n            .filter(param => param);\n        let videoParams;\n        if (!opt.videoParams) {\n            videoParams = [];\n        }\n        else {\n            videoParams = opt.videoParams.map((opt, index) => {\n                const params = parseUrl(opt.url);\n                if (params && opt.timestamp) {\n                    params.timestamp = opt.timestamp;\n                }\n                if (!params.timestamp) {\n                    throw new Error(`replay--> 无法获取第${index + 1}个视频录像的开始时间, 请仔细检查你的参数`);\n                }\n                if (!opt.container) {\n                    console.error(`replay--> 第${index + 1}个录像文件的容器为空，请仔细检查你的参数`);\n                }\n                params.container = opt.container;\n                return params;\n            });\n        }\n        if (LOG) {\n            console.log('replay--> 录像回放参数为', whiteboardParams, videoParams, opt.version);\n        }\n        const player = new RecordPlayer();\n        if (DEV) {\n            window.player = player;\n        }\n        return player.init({\n            whiteboardTracks: whiteboardParams,\n            videoTracks: videoParams,\n            version: opt.version || '3.0' // 是否是兼容模式，对于老版本的录制文件，需要做不同的解析\n        });\n    }\n    bindControlContainer(div) {\n        if (typeof this.unmount === 'function') {\n            this.unmount();\n        }\n        this.unmount = mount(div, this);\n    }\n    setPlaySpeed(speed) {\n        if (speed <= 0.1 || speed >= 100) {\n            throw new Error('播放速度不能大于100，或者小于0.1');\n        }\n        else {\n            if (this.timeline) {\n                this.timeline.setPlaySpeed(speed);\n                this.speed = speed;\n                this.emit('speedChange', speed);\n            }\n        }\n    }\n    setViewer(viewer) {\n        if (this.timeline) {\n            this.timeline.setViewer(viewer);\n        }\n    }\n    play() {\n        if (this.timeline) {\n            return this.timeline.play();\n        }\n    }\n    pause() {\n        if (this.timeline) {\n            return this.timeline.pause();\n        }\n    }\n    seekTo(time) {\n        if (this.timeline) {\n            this.timeline.seekTo(time);\n        }\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.timeline) {\n                yield this.timeline.destroy();\n            }\n            if (typeof this.unmount === 'function') {\n                this.unmount();\n                this.unmount = undefined;\n            }\n            delete this.timeline;\n            this.eventNames().forEach(name => this.off(name));\n        });\n    }\n}\nexport default RecordPlayer;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from \"eventemitter3\";\nimport TickTick, { DEFAULT_INTERVAL } from \"./TickTick\";\nexport default class Timeline extends EventEmitter {\n    constructor(tracks) {\n        super();\n        this.tracks = tracks;\n        this.ticker = new TickTick();\n        this.endTimeStamp = 0;\n        /**\n         * waitingToPlay表示部分Track暂时无法播放。\n         * 一旦所有Track准备好了(canplay), timeline将自动开始播放\n         */\n        this.state = 'pause';\n        this.busy = false; // 主要是用于异步操作时，防止多次调用导致的状态不统一\n        this.handleTrackVisibleChange = (type, params, callback) => {\n            this.emit('visibleChange', type, params, callback);\n        };\n        /**\n         * ticktick发送tick事件，将track播放至ticktick发送的时间(time)\n         * @param time\n         */\n        this.update = (time) => __awaiter(this, void 0, void 0, function* () {\n            if (this.state !== 'play') {\n                console.error('update应该处于play状态下才调用');\n            }\n            yield Promise.all(this.tracks.map(track => track.update(time)));\n            if (this.tracks.every(track => track.state === 'finished')) {\n                setTimeout(() => {\n                    this._doPause();\n                    this.state = 'finished';\n                    this.emit('finished');\n                });\n            }\n        });\n        this.initTrack(tracks);\n        this.bindTickerEvents();\n    }\n    initTrack(tracks) {\n        this.tracks = tracks.slice();\n        // 计算出轨道的起始时间戳\n        let minTimestamp = getMinTimeStamp(tracks);\n        let readyQueue = getInitQueue(tracks, minTimestamp);\n        console.log('init every track');\n        // 先初始化白板的录制文件\n        Promise.all(readyQueue).then(list => {\n            console.log('every track inited');\n            const badTracks = this.tracks.filter((t, index) => list[index] === 'error');\n            this.tracks = this.tracks.filter((t, index) => list[index] === 'ready');\n            if (badTracks.length > 0) {\n                this.emit('error', 'bad track');\n            }\n            this.endTimeStamp = getMaxTimeStamp(tracks);\n            this.bindTrackEvents();\n            console.log('timeline ready');\n            const viewerArr = [];\n            this.tracks.forEach(track => {\n                if (Array.isArray(track['viewerArr'])) {\n                    track['viewerArr'].forEach(viewer => {\n                        if (!viewerArr.includes(viewer)) {\n                            viewerArr.push(viewer);\n                        }\n                    });\n                }\n            });\n            if (viewerArr.length === 0) {\n                viewerArr.push('unknown');\n            }\n            this.emit('ready', {\n                beginTimeStamp: minTimestamp,\n                endTimeStamp: this.endTimeStamp + minTimestamp,\n                duration: this.endTimeStamp,\n                viewerArr: viewerArr\n            });\n        });\n    }\n    bindTrackEvents() {\n        this.tracks.forEach(track => {\n            // 给每个轨道绑定事件\n            track.on('visibleChange', this.handleTrackVisibleChange);\n            track.on('waitingToPlay', () => this.handleTrackWaitingToPlay());\n            track.on('canplay', () => this.handleTrackCanPlay());\n        });\n    }\n    bindTickerEvents() {\n        this.ticker.on('tick', (time) => {\n            this.emit('tick', time);\n            this.update(time);\n        });\n        this.ticker.on('pause', () => {\n            this.emit('pause');\n        });\n        this.ticker.on('play', () => {\n            this.emit('play');\n        });\n    }\n    /**\n     * Track发送waitingToPlay消息，表示Track目前阻塞中。\n     * 如果Timeline状态为播放中，改为等待播放。如果为暂停，或者结束，则不用额外处理\n     */\n    handleTrackWaitingToPlay() {\n        if (this.state === 'play' && this.hasTrackWaiting()) {\n            this.state = 'waitingToPlay';\n            this._doPause();\n        }\n    }\n    /**\n     * 某个Track转为非阻塞状态。\n     * 如果当前状态为等待播放，且没有track阻塞，则开始播放轨道\n     */\n    handleTrackCanPlay() {\n        if (this.state === 'waitingToPlay' && !this.hasTrackWaiting()) {\n            this.state = 'play';\n            this._doPlay();\n        }\n    }\n    /**\n     * 某些track在currTimeStamp这个时间点上还没准备好数据或者容器\n     */\n    hasTrackWaiting() {\n        return this.tracks.find(track => track.isWaiting(this.ticker.currTimeStamp)) !== undefined;\n    }\n    /**\n     * 暂停播放。\n     * 停止ticker，ticker会停止tick事件，这会阻止白板播放\n     * 停止track, 会暂停音视频Track播放\n     */\n    pause() {\n        if (this.busy) {\n            //  繁忙状态下，不允许二次操作\n            console.warn('busy pause');\n            return;\n        }\n        if (this.state === 'play') {\n            this._doPause();\n        }\n        if (this.state !== 'finished') {\n            this.state = 'pause';\n        }\n    }\n    /**\n     * 播放。要每段track都能够播放，才能够继续播放\n     * 如果处于waitingToPlay，则还有资源被阻塞\n     */\n    play() {\n        if (this.busy) {\n            //  繁忙状态下，不允许二次操作\n            console.warn('busy play');\n            return;\n        }\n        if (this.state !== 'finished') {\n            if (!this.hasTrackWaiting()) {\n                this.state = 'play';\n                this._doPlay();\n            }\n            else {\n                this.state = 'waitingToPlay';\n            }\n        }\n        else {\n            //重新开始播放\n            this.state = 'play';\n            this.seekTo(0);\n        }\n    }\n    setPlaySpeed(speed) {\n        this.ticker.rate = speed;\n        this.tracks.forEach(track => {\n            track.setPlaySpeed(speed);\n        });\n    }\n    setViewer(viewer) {\n        this.tracks.forEach((track) => track.setViewer(viewer));\n    }\n    /**\n     * 跳转track至time\n     * @param time\n     */\n    seekTo(time) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.busy)\n                return;\n            //时间范围不能超出录像时间范围\n            time = Math.min(Math.max(time, 0), this.endTimeStamp);\n            //  如果在下两个时钟周期内，那么这个跳转就丢弃\n            if (this.ticker.currTimeStamp < time && time < this.ticker.currTimeStamp + DEFAULT_INTERVAL * 2)\n                return;\n            if (time < this.ticker.currTimeStamp) {\n                // 往回退\n                if (this.state === 'finished') {\n                    this.state = 'pause';\n                }\n                this.busy = true;\n                this.ticker.setCurrentTime(time);\n                try {\n                    yield Promise.all(this.tracks.map(track => track.seekTo(time, false)));\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                this.busy = false;\n            }\n            else {\n                // 往前进\n                this.busy = true;\n                this.ticker.setCurrentTime(time);\n                try {\n                    yield Promise.all(this.tracks.map(track => track.seekTo(time, true)));\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                this.busy = false;\n            }\n            //seekTo前后，一些视频的启动，暂停状态可能有转换。下面根据timeline的状态重设所有Track的状态\n            if (this.state === 'play') {\n                this._doPlay();\n            }\n            else {\n                this._doPause();\n            }\n        });\n    }\n    _doPause() {\n        this.ticker.pause();\n        this.tracks.forEach((track) => track.pause());\n    }\n    /**\n     * ticker.play会开启ticker定时tick事件。白板Track依赖于tick事件更新\n     */\n    _doPlay() {\n        this.ticker.play();\n        this.tracks.forEach((track) => track.play());\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.ticker.destory();\n            yield Promise.all(this.tracks.map(track => track.destroy()));\n            this.eventNames().forEach(name => this.off(name));\n        });\n    }\n}\n/**\n * 返回多个track的起始时间戳\n * @param tracks\n */\nconst getMinTimeStamp = (tracks) => {\n    let minTimestamp = Number.POSITIVE_INFINITY;\n    tracks.forEach(track => {\n        if (minTimestamp > track.timestamp) {\n            minTimestamp = track.timestamp;\n        }\n    });\n    return minTimestamp;\n};\n/**\n * 返回多个track的结束时间戳\n * @param tracks\n */\nconst getMaxTimeStamp = (tracks) => {\n    let maxTimestamp = Number.NEGATIVE_INFINITY;\n    tracks.forEach(track => {\n        // 计算出轨道的结束时间戳\n        if (maxTimestamp < track.offsetEnd) {\n            maxTimestamp = track.offsetEnd;\n        }\n    });\n    return maxTimestamp;\n};\n/**\n * 获取track异步初始化Promise Array\n * @param tracks\n * @param minTimestamp\n */\nconst getInitQueue = (tracks, minTimestamp) => {\n    let isIPhone = /iphone/i.test(navigator.userAgent);\n    let pPipeline = Promise.resolve('got lucky ~');\n    // 判断是否是iPhone,如果是iPhone,video轨道需要一个一个的初始化\n    let readyQueue = tracks.map(track => {\n        // 计算开始时间\n        track.offsetBegin = track.timestamp - minTimestamp;\n        if (isIPhone) {\n            if (track.type === 'mp4' || track.type === 'flv' || track.type === 'aac') {\n                // 如果是视频轨道，需要一个接一个的初始化\n                let result = track.init(pPipeline);\n                pPipeline = result;\n                return result; // 提前返回\n            }\n        }\n        return track.init();\n    });\n    return readyQueue;\n};\n","/**\n * 滴答滴答报时器。\n *\n * 处于play状态时，每隔一段时间会向外发送tick事件。\n */\nimport { EventEmitter } from \"eventemitter3\";\nexport const DEFAULT_INTERVAL = 10;\nexport default class TickTick extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.state = 'pause';\n        //currTimeStamp是相对于最早Track的起始时间偏移量\n        this.currTimeStamp = 0;\n        //lastRealTime是上一次记录的真实时间\n        this.lastRealTime = undefined;\n        this.rate = 1;\n        this.microTask = () => {\n            if (this.state === 'play') {\n                this.tick();\n            }\n        };\n    }\n    destory() {\n        this.pause();\n        this.eventNames().forEach(name => this.off(name));\n    }\n    tick() {\n        let now = Date.now();\n        if (this.lastRealTime === undefined) {\n            this.lastRealTime = now;\n            return;\n        }\n        else {\n            let passedGap = ((now - this.lastRealTime) * this.rate);\n            this.currTimeStamp = this.currTimeStamp + passedGap;\n            this.lastRealTime = now;\n            this.emit('tick', this.currTimeStamp);\n        }\n    }\n    pause() {\n        if (this.timer) {\n            window.clearInterval(this.timer);\n        }\n        this.timer = undefined;\n        this.lastRealTime = undefined;\n        this.state = 'pause';\n        this.emit('pause');\n    }\n    play() {\n        if (!this.timer) {\n            this.timer = setInterval(this.microTask, DEFAULT_INTERVAL);\n        }\n        this.state = 'play';\n        this.emit('play');\n    }\n    setCurrentTime(timeStamp = 0) {\n        this.currTimeStamp = timeStamp;\n        this.lastRealTime = undefined;\n    }\n}\n","import React, { render, createRef } from 'preact';\n// Tell Babel to transform JSX into preact.h() calls:\n/** @jsx preact.h */\nimport { getTime } from './utils';\nimport PAUSE_BASE_64 from './assets/pause.svg';\nimport PLAY_BASE_64 from './assets/play.svg';\nimport './ToolUI.less';\nconst isPhone = /iphone|android/i.test(navigator.userAgent);\nexport default class ToolUI extends React.Component {\n    constructor(props) {\n        super(props);\n        this.toolUIEl = createRef();\n        this.onMouseMove = (e) => {\n            const { currentX, currentTime } = this.getCurrentXAndTime(e);\n            let [labelText] = getTime(currentTime);\n            this.setState({\n                labelLeft: currentX,\n                labelText: labelText,\n            });\n        };\n        this.pauseOrPlay = (e) => {\n            const { paused } = this.state;\n            if (paused) {\n                this.props.player.play();\n            }\n            else {\n                this.props.player.pause();\n            }\n            this.setState({ paused: !paused });\n        };\n        this.onMouseDown = (e) => {\n            let role = e.target.getAttribute('role');\n            if (role === 'slider') {\n                this.setState({\n                    showLabel: true,\n                    drag: true\n                });\n                this.onMouseMove(e);\n            }\n        };\n        this.onMouseUp = (e) => {\n            if (this.state.drag) {\n                this.seekTo(e);\n            }\n            this.hidePosition(e);\n        };\n        this.handleClickSpeed = (e) => {\n            this.setState({\n                speedOptionShow: !this.state.speedOptionShow\n            });\n        };\n        this.handleClickSpeedOption = (ev, speed) => {\n            ev.stopPropagation();\n            this.setState({\n                speedOptionShow: false\n            });\n            this.props.player.setPlaySpeed(speed);\n        };\n        this.showPosition = (e) => {\n            this.setState({\n                showLabel: true\n            });\n            this.onMouseMove(e);\n        };\n        this.hidePosition = (e) => {\n            this.setState({\n                showLabel: false\n            });\n        };\n        this.seekTo = (e) => {\n            let { currentX, currentTime } = this.getCurrentXAndTime(e);\n            this.props.player.seekTo(currentTime);\n            let updator = {\n                labelLeft: currentX,\n                time: currentTime,\n                drag: false,\n            };\n            // 如果是鼠标事件，不隐藏光标\n            if (isPhone) {\n                updator.showLabel = false;\n            }\n            this.setState(updator);\n        };\n        this.getCurrentXAndTime = (e) => {\n            let currentX = 0;\n            let left = this.toolUIEl.current.getBoundingClientRect().left;\n            if (e.type.search(/mouse|click/) > -1) {\n                currentX = e.clientX - left;\n            }\n            else {\n                currentX = e.touches[0].clientX - left;\n            }\n            let fullWidth = this.toolUIEl.current.offsetWidth;\n            // 防止越界\n            if (currentX < 0) {\n                currentX = 0;\n            }\n            if (currentX > fullWidth) {\n                currentX = fullWidth;\n            }\n            const currentTime = this.state.duration * (currentX / fullWidth);\n            return {\n                currentX,\n                currentTime\n            };\n        };\n        this.renderTimeline = (widthPercent) => {\n            const { showLabel, labelLeft, labelText, drag } = this.state;\n            return (React.createElement(\"div\", { ref: this.toolUIEl, className: 'player-timeline', onClick: this.seekTo, onMouseEnter: this.showPosition, onMouseLeave: this.hidePosition, onMouseDown: this.onMouseDown, onMouseMove: this.onMouseMove, onTouchStart: this.onMouseDown, onTouchMove: this.onMouseMove, onTouchEnd: this.onMouseUp, role: \"timeline\" },\n                React.createElement(\"span\", { role: \"currentLabel\", className: 'player-timeline-label', style: {\n                        display: showLabel ? 'inline-block' : 'none',\n                        left: `${labelLeft}px`\n                    } }, labelText),\n                React.createElement(\"span\", { role: \"label-background\", className: 'player-timeline-bg', style: {\n                        display: showLabel ? 'inline-block' : 'none',\n                        height: 20,\n                        left: `${labelLeft}px`\n                    } }),\n                React.createElement(\"div\", { role: \"blue-line\", className: 'player-timeline-blueline', style: {\n                        width: `${widthPercent + '%'}`\n                    } }),\n                React.createElement(\"div\", { role: \"slider\", className: 'player-timeline-slider', style: {\n                        left: `${drag ? labelLeft + 'px' : widthPercent + '%'}`,\n                        backgroundClip: `${drag ? 'border-box' : 'content-box'}`\n                    } })));\n        };\n        this.renderPlayOrPause = () => {\n            const { paused } = this.state;\n            return (React.createElement(\"div\", { className: 'player-play-icon-wrapper', role: \"icon\", onClick: this.pauseOrPlay },\n                React.createElement(\"span\", { className: 'player-play-icon', style: {\n                        backgroundImage: `url(${(paused ? PLAY_BASE_64 : PAUSE_BASE_64)})`\n                    } })));\n        };\n        const { player } = props;\n        this.state = {\n            time: player.timeline.ticker.currTimeStamp,\n            duration: player.timeline.endTimeStamp,\n            showLabel: false,\n            labelLeft: 0,\n            labelText: '',\n            paused: player.timeline.ticker.state === 'pause',\n            currSpeed: player.speed,\n            speedOptionShow: false,\n            drag: false\n        };\n        player.on('tick', (time) => {\n            this.setState({ time: time });\n        });\n        player.on('play', () => {\n            this.setState({ paused: false });\n        });\n        player.on('pause', () => {\n            this.setState({ paused: true });\n        });\n        player.on('speedChange', (speed) => {\n            this.setState({ currSpeed: speed });\n        });\n    }\n    renderSpeed() {\n        const speedText = this.state.currSpeed === 1 ? '倍数' : `${this.state.currSpeed}x`;\n        const speedArr = [2, 1.5, 1.25, 1, 0.75, 0.5];\n        return (React.createElement(\"div\", { className: 'player-speed', onClick: this.handleClickSpeed },\n            React.createElement(\"div\", { className: 'player-speed-text' }, speedText),\n            this.state.speedOptionShow && (React.createElement(\"div\", { className: 'player-speed-options' }, speedArr.map(speed => {\n                return (React.createElement(\"div\", { className: 'option', key: speed, onClick: (ev) => this.handleClickSpeedOption(ev, speed) },\n                    speed,\n                    \"x\"));\n            })))));\n    }\n    render(props, state) {\n        const { time, duration } = state;\n        let widthPercent = 0;\n        if (time >= duration) {\n            widthPercent = 100;\n        }\n        else if (time <= 0) {\n            widthPercent = 0;\n        }\n        else {\n            widthPercent = time / duration * 100;\n        }\n        let timeDuration;\n        if (time > duration) {\n            let [durationStr] = getTime(duration);\n            timeDuration = durationStr + '/' + durationStr;\n        }\n        else {\n            let [durationStr, durationHour] = getTime(duration);\n            let [currentStr] = getTime(time, durationHour > 0);\n            timeDuration = currentStr + '/' + durationStr;\n        }\n        return (React.createElement(\"div\", { className: \"player-container\" },\n            this.renderPlayOrPause(),\n            this.renderTimeline(widthPercent),\n            this.renderSpeed(),\n            React.createElement(\"div\", { role: \"duration\", className: 'player-duration' }, timeDuration)));\n    }\n}\nconst Nothing = () => null;\nexport function mount(dom, player) {\n    if (!dom) {\n        throw new Error('RecordPlayer mount传入的容器不能为空');\n    }\n    if (!player) {\n        throw new Error('请传入录制回放实例');\n    }\n    const root = render(React.createElement(ToolUI, { player: player }), dom);\n    function unmount() {\n        render(React.createElement(Nothing, null), dom, root);\n    }\n    return unmount;\n}\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTUxOTYxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5MDgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU5Ljk0NzkyOTA5IDEzMy45MjE4OTNoMTI2LjAyNjAzNDgxYzIzLjMzODE1NDczIDAgNDIuMDA4Njc4MjcgMTguNjcwNTIzNTMgNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZ2NjcyLjEzODg1NzQ4YzAgMjMuMzM4MTU0NzMtMTguNjcwNTIzNTMgNDIuMDA4Njc4MjctNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZIMjU5Ljk0NzkyOTA5Yy0yMy4zMzgxNTQ3MyAwLTQyLjAwODY3ODI3LTE4LjY3MDUyMzUzLTQyLjAwODY3OTU2LTQyLjAwODY3ODI2VjE3NS45MzA1NzEyNmMwLTIzLjMzODE1NDczIDE4LjY3MDUyMzUzLTQyLjAwODY3ODI3IDQyLjAwODY3OTU2LTQyLjAwODY3ODI2ek02MzguMDI2MDM2MSAxMzMuOTIxODkzaDEyNi4wMjYwMzQ4MWMyMy4zMzgxNTQ3MyAwIDQyLjAwODY3ODI3IDE4LjY3MDUyMzUzIDQyLjAwODY3OTU2IDQyLjAwODY3ODI2djY3Mi4xMzg4NTc0OGMwIDIzLjMzODE1NDczLTE4LjY3MDUyMzUzIDQyLjAwODY3ODI3LTQyLjAwODY3OTU2IDQyLjAwODY3ODI2aC0xMjYuMDI2MDM0ODFjLTIzLjMzODE1NDczIDAtNDIuMDA4Njc4MjctMTguNjcwNTIzNTMtNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZWMTc1LjkzMDU3MTI2YzAtMjMuMzM4MTU0NzMgMTguNjcwNTIzNTMtNDIuMDA4Njc4MjcgNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZ6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyOTA5Ij48L3BhdGg+PC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTI0MjE2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIxMzEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNOTEyLjcyNDg4NCA0MjkuMzU1NjgxTDIwOC43OTc1NDUgMTMuMTk4NjM4QzE1MS42MDM0NDktMjAuNTk3ODc0IDY0LjAxMjQ5IDEyLjE5ODc0MSA2NC4wMTI0OSA5NS43OTAxMTJWOTI3LjkwNDIxOWMwIDc0Ljk5MjI1OSA4MS4zOTE1OTkgMTIwLjE4NzU5NCAxNDQuNzg1MDU1IDgyLjU5MTQ3NWw3MDMuOTI3MzM5LTQxNS45NTcwNjRjNjIuNzkzNTE4LTM2Ljk5NjE4MSA2Mi45OTM0OTgtMTI4LjE4Njc2OCAwLTE2NS4xODI5NDl6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyMTMyIj48L3BhdGg+PC9zdmc+\"","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../node_modules/postcss-loader/src/index.js??postcss!./ToolUI.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../node_modules/postcss-loader/src/index.js??postcss!./ToolUI.less\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../node_modules/postcss-loader/src/index.js??postcss!./ToolUI.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".player-container {\\n    display: block;\\n    position: relative;\\n    height: 30px;\\n    background: rgba(113, 113, 113, 0.23);\\n    -webkit-user-select: none;\\n       -moz-user-select: none;\\n        -ms-user-select: none;\\n            user-select: none;\\n    display: flex;\\n}\\n\\n    .player-container .player-play-icon-wrapper {\\n        cursor: pointer;\\n        position: relative;\\n        width: 20px;\\n        height: 20px;\\n        padding: 5px;\\n    }\\n\\n    .player-container .player-play-icon-wrapper .player-play-icon {\\n            display:inline-block;\\n            height:inherit;\\n            width:inherit;\\n            background-size:cover;\\n        }\\n\\n    .player-container .player-speed {\\n        padding: 5px;\\n        height: 20px;\\n        font-size: 14px;\\n        font-family: sans-serif;\\n        cursor: pointer;\\n    }\\n\\n    .player-container .player-speed .player-speed-text {\\n            text-align: center;\\n        }\\n\\n    .player-container .player-speed .player-speed-options {\\n            position: absolute;\\n            bottom: 27px;\\n            background: rgba(0,0,0,.8);\\n            padding: 0 10px;\\n            color: white;\\n            text-align: center;\\n        }\\n\\n    .player-container .player-speed .player-speed-options .option {\\n                margin: 10px 0;\\n            }\\n\\n    .player-container .player-duration {\\n        height:20px;\\n        font-size:14px;\\n        font-family:sans-serif;\\n        padding: 5px;\\n    }\\n\\n    .player-container .player-timeline {\\n        flex: 1;\\n        height: 6px;\\n        cursor: pointer;\\n        background: rgba(0,0,0,0.12);\\n        margin: 12px 5px;\\n        position: relative;\\n    }\\n\\n    .player-container .player-timeline-label {\\n        position: absolute;\\n        height: 20px;\\n        background: white;\\n        border-radius: 3px;\\n        bottom: 10px;\\n        padding: 4px 6px;\\n        transform: translateX(-50%);\\n    }\\n\\n    .player-container .player-timeline-bg {\\n        position: absolute;\\n        height: 20px;\\n        background: 'white';\\n        width: 2px;\\n        bottom: -5px;\\n        pointer-events: none;\\n    }\\n\\n    .player-container .player-timeline-blueline {\\n        position: absolute;\\n        background: rgba(24, 121, 226, 0.7);\\n        height: inherit;\\n        pointer-events: none;\\n    }\\n\\n    .player-container .player-timeline-slider {\\n        position: absolute;\\n        top: -5px;\\n        bottom: -5px;\\n        background: white;\\n        box-sizing: content-box;\\n        padding:0 4px;\\n        width: 4px;\\n        transform:translateX(-6px);\\n    }\", \"\"]);\n\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Track from './Track';\nexport default class VTrack extends Track {\n    // 2550102203-51349077821394-1567049495368-0.mp4\n    constructor(params) {\n        super();\n        this.params = params;\n        this.offsetBegin = 0;\n        this.offsetEnd = 0;\n        this.waitingForData = true;\n        const { type, url, timestamp } = params;\n        this.type = type;\n        this.timestamp = timestamp;\n        this.url = url;\n        this.state = 'init';\n        this.videoRef = document.createElement('video');\n        this.videoRef.oncanplay = () => {\n            this.waitingForData = false;\n            this.emit('canplay');\n        };\n        this.videoRef.onwaiting = () => {\n            this.waitingForData = true;\n            this.emit('waitingToPlay');\n        };\n    }\n    init(pipe) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (pipe) {\n                yield pipe;\n            }\n            console.log('init video track');\n            let result = yield new Promise((res) => {\n                const videoRef = this.videoRef;\n                videoRef.src = this.url;\n                setSpecialCheck(videoRef);\n                videoRef.preload = 'metadata';\n                videoRef.onloadeddata = (ev) => {\n                    let duration = videoRef.duration;\n                    if (duration !== duration) {\n                        duration = Number.NEGATIVE_INFINITY;\n                    }\n                    else {\n                        duration = duration * 1000;\n                    }\n                    this.offsetEnd = this.offsetBegin + duration;\n                    videoRef.pause();\n                    this.state = 'ready';\n                    console.log('init video ready');\n                    res('ready');\n                };\n                videoRef.onerror = (ev) => {\n                    console.error(ev);\n                    res('error');\n                };\n            });\n            return result;\n        });\n    }\n    doSetTrack(time, forward, jumpTo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (jumpTo) {\n                this.setVideoTime(time);\n            }\n        });\n    }\n    showTrackCb(dom) {\n        if (!dom)\n            return;\n        if (!findVideoRefInContainer(dom)) {\n            dom.appendChild(this.videoRef);\n        }\n    }\n    hideTrackCb() {\n        if (this.videoRef) {\n            this.videoRef.pause();\n        }\n    }\n    setPlaySpeed(speed) {\n        if (this.videoRef) {\n            this.videoRef.playbackRate = speed;\n        }\n    }\n    pause() {\n        if (this.videoRef) {\n            this.videoRef.pause();\n        }\n    }\n    play() {\n        if (this.videoRef && this.state === 'playing') {\n            this.videoRef.play();\n        }\n        else {\n            this.videoRef.pause();\n        }\n    }\n    setVideoTime(time) {\n        this.videoRef.currentTime = (time - this.offsetBegin) / 1000;\n    }\n    isWaiting(time) {\n        if (time < this.offsetBegin || time > this.offsetEnd) {\n            return false;\n        }\n        else {\n            return this.waitingForData;\n        }\n    }\n}\nconst setSpecialCheck = (el) => {\n    el.setAttribute('data-x-4wb', 'true');\n    el.setAttribute('playsinline', 'playsinline');\n    el.setAttribute('webkit-playsinline', 'webkit-playsinline');\n};\nconst specialCheck = (el) => el.getAttribute('data-x-4wb') === 'true';\nconst findVideoRefInContainer = (dom) => {\n    if (dom.children.length > 0) {\n        for (let i = 0, len = dom.children.length; i < len; i++) {\n            let el = dom.children[i];\n            if (el.tagName.toLowerCase() === 'video' && specialCheck(el)) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport Record from './Record';\nimport { CalibrateAction } from '../../../src/core/Actions';\nimport { WActions } from '../../../src/core/Itypes';\nimport WorkerManager from '../../../src/core';\nimport WTrack from './WhiteboardTrack';\n/**\n * 白板1.0， 2.0\n */\nexport default class V1V2Track extends WTrack {\n    constructor(params, opt) {\n        super(params, opt);\n        this.params = params;\n        this.drawManager = null;\n        this.records = [];\n    }\n    get isCompatible() {\n        return this.opt.version === '1.0';\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const [state, dataList] = yield this.fetchData();\n            console.log('init ', state, dataList);\n            if (state === 'error') {\n                this.state = 'error';\n                return 'error';\n            }\n            else {\n                let result = [];\n                if (this.isCompatible) {\n                    /**\n                     * 紧急修复：修复白板1.0由于缺少画布设置同步的命令，导致无法绘制的缺陷\n                     */\n                    result.push(new Record(10, '16:{\"mode\"¦\"draw\"，\"tool\"¦\"flag\"，\"size\"¦1，\"color\"¦\"#000000\"，\"fontsize\"¦24};', false));\n                    result.push(new Record(20, '16:{\"color\"¦\"#000\"};16:{\"size\"¦1};', false));\n                    result.push(new Record(30, '16:{\"ownerCanvasHeight\"¦1000，\"ownerCanvasWidth\"¦1300};', false));\n                }\n                dataList.forEach(data => {\n                    result.push(new Record(data.time, data.str, this.isCompatible));\n                });\n                if (this.isCompatible) {\n                    if (result.length) {\n                        optimizeOldRecordList(result);\n                    }\n                }\n                this.records = result;\n                this.state = 'ready';\n                return 'ready';\n            }\n        });\n    }\n    doSetTrack(time, forward, jumpTo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const nextRecordIndex = forward ? this.nextRecordIndex : 0;\n            if (nextRecordIndex === 0) {\n                console.warn('seek back', time, jumpTo, nextRecordIndex);\n            }\n            if (this.records.length && this.drawManager) {\n                let needSkipFirstCleanFrame = false; // 第一次的动作是否需要跳过\n                // 先取出中间所有的动作\n                let endIndex = findIndexBeyondTime(this.records, time, this.offsetBegin, nextRecordIndex);\n                let recordsToExecute = this.records.slice(nextRecordIndex, endIndex);\n                // 在执行前更新索引，防止executeAction出错后，卡死在这里\n                this.nextRecordIndex = endIndex;\n                if (jumpTo) {\n                    const res = mangleRecords(recordsToExecute);\n                    recordsToExecute = res.recordsToExecute;\n                    needSkipFirstCleanFrame = res.needSkipFirstCleanFrame;\n                }\n                if (recordsToExecute.length) {\n                    //等于0时，是向后seekTo，需要清空画布重新绘制\n                    if (nextRecordIndex === 0) {\n                        const { account } = this.params;\n                        this.drawManager.clear(account);\n                        this.drawManager.clearImage();\n                        this.drawManager.clearHtmlFile();\n                        this.drawManager.resetState();\n                    }\n                    executeActions(recordsToExecute, needSkipFirstCleanFrame, this.drawManager, this.params.account);\n                }\n                if (this.nextRecordIndex === this.records.length) {\n                    yield this.hideTrack();\n                }\n            }\n            else {\n                // 这个没有解析出轨道出来，那就直接结束\n                yield this.hideTrack();\n            }\n        });\n    }\n    showTrackCb(el) {\n        if (el && !this.drawManager) {\n            this.drawManager = new WorkerManager(el);\n        }\n    }\n}\nfunction optimizeOldRecordList(list) {\n    if (!list)\n        return [];\n    if (list.length === 0)\n        return list;\n    // 状态机标记位有，\n    let lastColor;\n    let lastTool = 'flag';\n    for (let i = 0, leng = list.length; i < leng; i++) {\n        let curRecord = list[i];\n        let actions = curRecord.actions;\n        for (let j = 0; j < actions.length;) {\n            let action = actions[j];\n            switch (action.TYPE) {\n                case WActions.CALIBRATE: {\n                    const { color } = action;\n                    if (color) {\n                        if (color === lastColor) {\n                            actions.splice(j, 1);\n                            continue;\n                        }\n                        else {\n                            lastColor = color;\n                        }\n                    }\n                    j++;\n                    continue;\n                }\n                case WActions.START: {\n                    if (lastTool === 'flag') {\n                        lastTool = 'free';\n                        console.log('deleted');\n                        actions.splice(j, 0, new CalibrateAction({ tool: 'free' }));\n                        ++j;\n                    }\n                    ++j;\n                    continue;\n                }\n                case WActions.LASER_PEN: {\n                    if (lastTool === 'free') {\n                        lastTool = 'flag';\n                        console.log('insert flage');\n                        actions.splice(j, 0, new CalibrateAction({ tool: 'flag' }));\n                        ++j;\n                    }\n                    ++j;\n                    continue;\n                }\n                case WActions.LASER_PEN_END: {\n                    ++j;\n                }\n                default: {\n                    ++j;\n                }\n            }\n        }\n    }\n    list.forEach(r => r.updateIndex());\n}\n/**\n * records按时间升序排列。\n * 从startIndex开始，寻找第一个时间大于time的Record的索引\n * 若records中时间都小于time，则返回records的长度\n * @param records\n * @param time\n * @param startIndex\n */\nfunction findIndexBeyondTime(records, time, offsetBeing, startIndex = 0) {\n    let endIndex = startIndex;\n    for (; endIndex < records.length; endIndex++) {\n        const record = records[endIndex];\n        if (record.time + offsetBeing > time) {\n            return endIndex;\n        }\n    }\n    return endIndex;\n}\nfunction mangleRecords(recordsToExecute) {\n    let needSkipFirstCleanFrame = false;\n    // 如果是快进的播放流程，需要对中间的动作进行处理\n    // 如果有关键帧,需要将关键帧之前的其他动作全部清除，只保留状态相关的动作\n    let lastClearFrameIndex = recordsToExecute.length;\n    while (lastClearFrameIndex--) {\n        let record = recordsToExecute[lastClearFrameIndex];\n        if (record.isClearFrame) {\n            break;\n        }\n    }\n    if (lastClearFrameIndex !== -1) {\n        //找到关键帧， 对关键帧之前的Record进行清洗\n        for (let i = 0; i < lastClearFrameIndex; i++) {\n            let recordToClean = recordsToExecute[i];\n            recordsToExecute[i] = recordToClean.toStateRelatedRecord();\n        }\n        needSkipFirstCleanFrame = true;\n        // 过滤掉没有任何数据的记录\n        recordsToExecute = recordsToExecute.filter(record => record.actions.length !== 0);\n    }\n    return {\n        needSkipFirstCleanFrame,\n        recordsToExecute\n    };\n}\nfunction executeActions(recordsToExecute, needSkipFirstCleanFrame, drawManager, account) {\n    var recordsToExecute_1, recordsToExecute_1_1;\n    var e_1, _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            try {\n                for (recordsToExecute_1 = __asyncValues(recordsToExecute); recordsToExecute_1_1 = yield recordsToExecute_1.next(), !recordsToExecute_1_1.done;) {\n                    let record = recordsToExecute_1_1.value;\n                    if (record.isClearFrame && needSkipFirstCleanFrame) {\n                        // 跳过其他的动作，直接执行到第一个清除\n                        let { actions, clearIndex } = record;\n                        yield drawManager.executeActions(account, actions.slice(clearIndex[0]));\n                        needSkipFirstCleanFrame = false;\n                    }\n                    else {\n                        yield drawManager.executeActions(account, record.actions);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (recordsToExecute_1_1 && !recordsToExecute_1_1.done && (_a = recordsToExecute_1.return)) yield _a.call(recordsToExecute_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n    });\n}\n","import { WActions, StateRelatedActions } from \"../../../src/core/Itypes\";\nimport * as ActionUtilsOld from '../../../src/core/ActionUtils.old';\nimport * as ActionUtils from '../../../src/core/ActionUtils';\nexport default class Record {\n    constructor(time, data, isCompatible) {\n        this.time = time;\n        this.isCompatible = isCompatible;\n        if (typeof data === 'string') {\n            this.data = data;\n            if (isCompatible) {\n                this.actions = ActionUtilsOld.unpackBulk(data);\n            }\n            else {\n                this.actions = ActionUtils.unpackBulk(data);\n            }\n        }\n        else {\n            this.data = '';\n            this.actions = data;\n        }\n        this.clearIndex = [];\n        this.isClearFrame = false;\n        this.updateIndex();\n    }\n    ;\n    updateIndex() {\n        this.clearIndex = this.actions.reduce((ret, action, curIndex) => {\n            if (action.TYPE === WActions.CLEAR) {\n                ret.push(curIndex);\n            }\n            return ret;\n        }, []);\n        this.isClearFrame = this.clearIndex.length !== 0;\n    }\n    getStateRelatedActions() {\n        return this.actions.filter(action => StateRelatedActions.indexOf(action.TYPE) > -1);\n    }\n    toStateRelatedRecord() {\n        return new Record(this.time, this.getStateRelatedActions(), this.isCompatible);\n    }\n}\n","import logger from \"../debug\";\nimport { StartAction, MoveAction, EndAction, ClearAckAction, LaserPenAction, LaserPenEndAction, RevokeAction, SerialAction, ClearAction, FileAction, CalibrateAction, SyncRequestAction, SyncPrepareAction, SyncPrepareAckAction } from \"./Actions\";\n/**\n *  这个文件是新白板的录制回放，需要播放以前录制的白板文件，所以需要兼容老旧的第一版协议,来适配新版本.\n *\n */\n/**\n * 老版本不需要发松消息，如果想做兼容的，所以这个没什么用\n */\nexport function packBulk(anyActions) {\n    let str = anyActions.map(anyAction => pack(anyAction)).join(';') + ';';\n    logger.m.syncmanager('packBulk anyAction', str);\n    return str;\n}\n/**\n * 老版本不需要发松消息，如果想做兼容的，所以这个没什么用\n */\nexport function pack(anyAction, isP2P) {\n    logger.m.syncmanager('pack anyAction', anyAction);\n    console.assert(anyAction.action !== undefined, 'ooops');\n    let { action } = anyAction;\n    let str = action.toString();\n    return str;\n}\nexport function unpackBulk(data) {\n    var actions = [];\n    const ops = data.split(';');\n    ops.forEach(op => {\n        const action = unpack(op);\n        if (action) {\n            if (Array.isArray(action)) {\n                while (action.length) {\n                    let tmp = action.shift();\n                    if (tmp) {\n                        actions.push(tmp);\n                    }\n                }\n            }\n            else {\n                actions.push(action);\n            }\n        }\n    });\n    return actions;\n}\nexport function unpack(data) {\n    if (!data) {\n        return;\n    }\n    const actionIndex = data.indexOf(':');\n    logger.m.syncmanager('unpack command ', data);\n    let action;\n    let valueStr;\n    if (actionIndex == -1) {\n        action = +data;\n        valueStr = '';\n    }\n    else {\n        action = +(data.slice(0, actionIndex));\n        valueStr = data.slice(actionIndex + 1, data.length);\n    }\n    let value = valueStr.length > 1 ? valueStr.split(',') : [];\n    logger.command('unpack', data);\n    switch (action) {\n        case 1 /* START */: {\n            let ret = [new StartAction(+value[0], +value[1])];\n            if (value[2]) {\n                ret.unshift(new CalibrateAction({ color: formatColor(value[2]) }));\n            }\n            return ret;\n        }\n        case 2 /* MOVE */: {\n            let ret = [new MoveAction(+value[0], +value[1])];\n            if (value[2]) {\n                ret.unshift(new CalibrateAction({ color: formatColor(value[2]) }));\n            }\n            return ret;\n        }\n        case 3 /* END */: {\n            let ret = [new EndAction(+value[0], +value[1])];\n            if (value[2]) {\n                ret.unshift(new CalibrateAction({ color: formatColor(value[2]) }));\n            }\n            return ret;\n        }\n        case 12 /* LASER_PEN */: {\n            return new LaserPenAction(+value[0], +value[1]);\n        }\n        case 13 /* LASER_PEN_END */:\n            return new LaserPenEndAction();\n        case 4 /* REVOKE */:\n            return new RevokeAction();\n        case 5 /* SERIAL */:\n            return new SerialAction();\n        case 6 /* CLEAR */:\n            return new ClearAction();\n        case 7 /* CLEAR_ACK */:\n            return new ClearAckAction();\n        case 8 /* SYNC_REQUEST */:\n            return new SyncRequestAction(); // TODO\n        case 9 /* SYNC */:\n            console.warn('收到了同步指令，未做兼容，请联系云信技术支持');\n            return undefined;\n        // return {\n        //   action: action,\n        //   sync: {\n        //     account: value[0],\n        //     dataMap: {},\n        //     all: value[1] as '0' | '1',\n        //     index: +value[2],\n        //     num: +value[3]\n        //   }\n        // }\n        case 10 /* SYNC_PREPARE */:\n            return new SyncPrepareAction();\n        case 11 /* SYNC_PREPARE_ACK */:\n            return new SyncPrepareAckAction();\n        case 14 /* FILE */:\n            return new FileAction({\n                docId: value[0],\n                currentPage: +value[1],\n                pageCount: +value[2],\n                type: value[2] == '0' ? 'clear' : 'img'\n            });\n        // return {\n        //   action: action,\n        //   file: {\n        //     docId: value[0] || '',\n        //     currentPage: value[1] || '',\n        //     pageCount: value[2] || '',\n        //     type: value[3] === '0' ? 'img' : (value[3] === '1' ? 'h5' : ''),\n        //     url: value[4] || '',\n        //     urlStr: value[5] || '',\n        //     h5Cmd: value[6] || ''\n        //   }\n        // }\n        // case OLD_ACTION.REDO:\n        //   return RedoAction.fromString(valueStr)\n        // case OLD_ACTION.CALIBRATE:\n        //   return CalibrateAction.fromString(valueStr)\n        // case OLD_ACTION.TEXT:\n        //   return TextAction.fromString(valueStr)\n        default:\n            const fullCaseChecker = action;\n    }\n}\nexport function formatColor(color, format = 16) {\n    if (!color)\n        return -1;\n    let res = '';\n    if (format === 16) {\n        color = +color;\n        if (color < 0) {\n            res = hex2rgb(color);\n            console.log('hex2rgb', color, res);\n            return res;\n        }\n        res = color.toString(16);\n        if (res.length < 3) {\n            res = ('000' + res).slice(-3);\n        }\n        if (res.length > 3 && res.length < 6) {\n            res = ('000' + res).slice(-6);\n        }\n        res = '#' + res;\n        //console.log('formatColor 16', color, res)\n        return res;\n    }\n    else if (format === 10) {\n        res = color.replace(/#/gi, '');\n        res = parseInt('0x' + res);\n        //console.log('formatColor 10', color, res)\n        return isNaN(res) ? -1 : res;\n    }\n}\n// rgba转rgb\nexport function hex2rgb(val) {\n    // return '#' + (0x00FFFFFF & val)\n    let alpha = (val >> 24) & 0xff;\n    let red = (val >> 16) & 0xff;\n    let green = (val >> 8) & 0xff;\n    let blue = val & 0xff;\n    red = red.toString(16);\n    green = green.toString(16);\n    blue = blue.toString(16);\n    console.log('rgb', red, green, blue);\n    return ('#' +\n        ('0' + red).slice(-2) +\n        ('0' + green).slice(-2) +\n        ('0' + blue).slice(-2));\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.format(...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.replace(/\\s*\\n\\s*/g, ' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","exports.isatty = function () { return false; };\n\nfunction ReadStream() {\n  throw new Error('tty.ReadStream is not implemented');\n}\nexports.ReadStream = ReadStream;\n\nfunction WriteStream() {\n  throw new Error('tty.ReadStream is not implemented');\n}\nexports.WriteStream = WriteStream;\n","'use strict';\nmodule.exports = {\n\tstdout: false,\n\tstderr: false\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nimport createDebug from 'debug';\nimport EventEmitter from 'eventemitter3';\nimport pako from 'pako';\nimport logger from '../debug';\nimport Simulator from '../simulator';\nimport SyncManager from './ActionManager';\nimport { CalibrateAction, FileAction, SerialAction, VersionAction } from './Actions';\nimport * as ActionUtils from './ActionUtils';\nimport AdapterDraw from './adapterDraw';\nimport { WActions } from './Itypes';\nimport globalHub from './Model/GlobalHub';\nimport * as utils from './utils';\nimport { getKiloBytes, sleep } from './utils';\nconst logData = createDebug('data');\nconst fileTypeMap = {\n    '10': 'jpg',\n    '11': 'png',\n    '0': 'unknown'\n};\nconst toKB = (data) => getKiloBytes(data).toFixed(2) + 'KB';\nconst ungzip = (gziped) => {\n    let gzipedSize = gziped.length;\n    let data = pako.ungzip(gziped, { to: 'string' });\n    console.debug(`GZIP数据大小:${toKB(gzipedSize)},原始数据大小：${toKB(data)}，压缩比率为 ${(gzipedSize * 100 / data.length).toFixed(2)}%`);\n    return data;\n};\nexport default class WorkerManager extends EventEmitter {\n    constructor(container, opt = {}) {\n        super();\n        this.afterInit = () => {\n            this.state = 'inited';\n            this.syncManager.send({\n                toAccount: 0, actions: [\n                    {\n                        action: new VersionAction({\n                            ver: 1.0, account: this.account,\n                            gzip: true\n                        })\n                    }\n                ]\n            });\n            this.emit('inited');\n        };\n        this.afterSync = (snapshot) => {\n            this.syncState = 'done';\n            this.flushInCommingQueue();\n            this.emit('afterSync', snapshot);\n        };\n        this.readyToSyncData = () => {\n            if (this.identity === 'owner') {\n                this.syncState = 'begin';\n                this.syncBegin();\n            }\n            if (this.identity === 'normal') {\n                this.syncState = 'waiting';\n                this.syncRequest(this.ownerAccount); // 不是 owner 则向 owner 请求同步\n            }\n        };\n        this.onIframeMessage = (event) => {\n            logger.h5('onIframeMessage', event.data);\n            const data = event.data || {};\n            if (data.identity !== 'to_yunxin_wb') {\n                return;\n            }\n            let fileData = this.syncManager.fileData;\n            if (fileData) {\n                const currentFile = Object.assign({}, fileData);\n                let { page, anim, trigger, time } = data;\n                const isBack = data.isBack ? '1' : '0';\n                time = '0';\n                const h5Cmd = [page, anim, trigger, isBack, time].join('&');\n                console.warn('onIframeMessage');\n                console.warn(h5Cmd, currentFile.h5Cmd);\n                if (parseInt(page) === 0) {\n                    return;\n                }\n                if (currentFile.h5Cmd === h5Cmd) {\n                    console.warn('the same cmd');\n                }\n                if (currentFile.currentPage != page) { // page 不一样了，通过上下步翻页了，清空\n                    this.drawAdapter.clear();\n                }\n                currentFile.currentPage = parseInt(page);\n                currentFile.h5Cmd = h5Cmd;\n                logger.h5('onIframeMessage->emit action', event.data);\n                // setTimeout(() => {\n                //   this.pagedHtmlFile([page, anim, trigger, isBack, time])\n                // })\n                this.drawAdapter.worker.emitAction({\n                    account: this.account,\n                    action: new FileAction(currentFile)\n                });\n            }\n        };\n        this.simulator = new Simulator(this);\n        this.container = container;\n        this.opt = opt;\n        this.account = opt.account;\n        this.nim = opt.nim;\n        this.identity = opt.identity;\n        this.ownerAccount = opt.ownerAccount;\n        this.connector = opt.whiteboard;\n        this.incommingQueue = [];\n        this.actionProcessing = false;\n        console.log('init wb adapter');\n        // Model层 负责数据的存储与发送\n        this.syncManager = new SyncManager(this.account);\n        this.syncManager.on('flush', (data) => {\n            if (this.connector && this.connector.sendData) {\n                // this.emit('data', data) // 抛出给外部，看有没有必要\n                this.connector.sendData(data);\n            }\n        });\n        this.fileMap = {};\n        this.eventHub = globalHub;\n        // 当前状态\n        this.state = 'created';\n        this.syncState = 'inited';\n        // View层 负责绘制\n        this.drawAdapter = new AdapterDraw(container, this.opt);\n        this.drawAdapter.on('inited', this.afterInit);\n        this.drawAdapter.on('action', (anyAction) => {\n            console.log('syncState', this.syncState);\n            if (this.syncState !== 'waiting') { // 如果是在同步等待中，则不会发出请求\n                this.syncManager.broadcastAction(anyAction);\n            }\n        });\n        this.drawAdapter.on('instantAction', (anyAction) => {\n            console.warn('instant action', this.syncState);\n            if (this.syncState !== 'waiting') { // 如果是在同步等待中，则不会发出请求\n                setTimeout(() => {\n                    this.syncManager.send({ toAccount: 0, actions: [anyAction] }, 1);\n                });\n            }\n        });\n        this.connectorStatus = 'off'; // TODO: connector的状态监控\n        if (this.connector) {\n            // connector的事件绑定\n            this.connector.on('data', (obj) => {\n                this.execute(obj);\n            });\n            this.connector.on('joinChannel', (obj) => {\n                console.log('join channel ', obj);\n                if (obj.account === this.opt.ownerAccount) {\n                    // 说明房间的房主已经重新加入房间了，如果当前状态是waiting，需要将状态重置\n                    if (this.syncState === 'waiting') {\n                        this.syncState = 'done';\n                        this.flushInCommingQueue();\n                    }\n                }\n                // 每当有新用户加入的时候，看起来我们需要重制用户的状态，其实不用重制的，只需要保证用户上线之后，会广播一次自己当前的状态就可以了\n                // if (userManager.hasUser(obj.account)) {\n                //   let user = userManager.getUser(obj.account);\n                //   if (user) {\n                //     user.reset()\n                //   }\n                // }\n            });\n        }\n        this.timmer = setInterval(() => {\n            // 为了防止incommingQueue由于消息中断，或者其他原因，阻塞页面，所以需要设置超时20秒后，就抛弃一些数据，继续执行其他步骤\n            // TODO\n        }, 100);\n    }\n    // 该方法接收上层的数据包\n    /**\n     * 当 ignoreQueue 为false时\n     * 收到的普通数据，直接会通过并执行这个函数，不会推入消息队列。\n     * 收到的GZIP数据，如果长度为1，会解压后当作普通数据处理，直接执行这个普通消息。\n     * 收到的GZIP数据，如果长度不为1，会加入到消息队列中；\n     *    如果此时，队列里的GZIP数据不满足执行条件，会跳过本次执行。\n     *    如果此时队列里的GZIP数据满足执行条件，会调用[清空消息队列]函数，并跳过本次执行\n     * 如果普通数据长度为0，将会跳过本次执行。\n     * 如果当前状态为正在处理消息队列中，无论队列是否为空，都需要推入消息队列。\n     * 如果当前状态没有在处理消息队列，但是消息队列不为空，需要推入消息队列。\n     * @param param0\n     * @param enqueueIfNeeded 是否需要排队，默认状态下，如果incommings队列不为空，所有的消息都要推入这个队列。\n     */\n    execute({ account, data }) {\n        if (!account || !data || account === this.account)\n            return;\n        // 消息队列里的文件格式\n        let qactions;\n        let qid;\n        let qtype;\n        // 辅助信息\n        let alreadyInMessageQueue = false;\n        // fix 有时候data是数字类型的\n        if (typeof data === 'number') {\n            data = '' + data;\n        }\n        if (data.substr(0, 4) === 'GZIP') {\n            // GZIP 文件解析处理\n            let minimal = data.substr(5, 150); // 取一个小集合\n            let match1 = SyncManager.GZIP_TESTER_1.exec(minimal);\n            if (match1) {\n                minimal = '';\n                const [fullText, id, length, index] = match1;\n                qid = id;\n                qtype = 'gzip';\n                let gziped = data.substr(5 + fullText.length);\n                if (length === '1') {\n                    // 如果只有一条消息\n                    data = ungzip(gziped);\n                    qactions = ActionUtils.unpackBulk(data);\n                }\n                else {\n                    // 如果有多条消息，需要阻塞然后等到所有消息都收到后才继续\n                    let incomming = this.incommingQueue.find(x => x.id === id);\n                    if (!incomming) {\n                        // 队列中没有找到这个gzip包,就推入队列中去\n                        let _gzipArr = new Array(+length);\n                        _gzipArr[+index] = gziped;\n                        incomming = {\n                            account, type: qtype, id: qid,\n                            total: +length, curLen: 1, data: _gzipArr, result: [new SerialAction()]\n                        };\n                        this.incommingQueue.push(incomming);\n                        return; // 跳过，数据不完整\n                    }\n                    else {\n                        // 队列中找到这个gzip包\n                        incomming.curLen++;\n                        incomming.data[+index] = gziped;\n                        if (incomming.total === incomming.curLen) {\n                            // 说明所有的数据都已经齐全了\n                            // 如果在第一位，就可以执行下去了\n                            const unzipedText = ungzip(incomming.data.join(''));\n                            qactions = ActionUtils.unpackBulk(unzipedText);\n                            incomming.result = qactions;\n                            alreadyInMessageQueue = true;\n                        }\n                        else {\n                            return; // 跳过，数据不完整\n                        }\n                    }\n                }\n            }\n            else {\n                // 没有匹配到GZIP\n                console.error('未匹配到GZIP压缩格式', data);\n                return;\n            }\n        }\n        else {\n            // 普通文字消息的处理,判断是否需要推入队列\n            qactions = ActionUtils.unpackBulk(data);\n            qid = '' + Date.now() + Math.random();\n            qtype = 'text';\n        }\n        const queueIndex = alreadyInMessageQueue ? this.incommingQueue.findIndex(x => x.id === qid) : -1;\n        // 检测是否有同步消息,或者同步准备syncPrepare，如果有的话，就会优先执行\n        let vipActionIndex = qactions.findIndex(x => x.TYPE === WActions.SYNC || x.TYPE === WActions.SYNC_PREPARE);\n        if (vipActionIndex > -1) {\n            let vipAction = qactions[vipActionIndex];\n            if (vipAction.TYPE === WActions.SYNC) {\n                this.handleSyncAction(vipAction);\n            }\n            else {\n                this.executeActions(account, qactions);\n            }\n            // 注意！约定同步消息是单独一次性发出的，所以qactions的长度只有一个，所以后续操作可以忽略了。\n            return;\n        }\n        // 检测是否有syncPrepare消息，如果有的话，优先执行\n        if (this.syncState === 'waiting' || this.actionProcessing) {\n            // 当学生端在同步等待的时候，消息必须需要推入队列里。\n            // 当消息队列正在被处理的时候，消息必须需要推入队列。\n            // 如果消息队列里有数据，说明有消息阻塞了，新来的消息需要推入队列\n            if (!alreadyInMessageQueue) {\n                this.incommingQueue.push({\n                    account,\n                    type: qtype,\n                    id: qid,\n                    total: 1, curLen: 1, data: [],\n                    result: qactions\n                });\n            }\n        }\n        else if (this.incommingQueue.length == 0) {\n            // 如果不是等待状态，队列消息也没有处理中，消息队列的长度也为空，所以当前动作可以执行\n            logger.m.worker('execute:', account, qactions);\n            this.executeActions(account, qactions);\n        }\n        else {\n            // 如果不是等待状态，消息队列也没有在处理中，消息队列的长度不为空，\n            if (queueIndex === 0) {\n                // 如果当前消息是阻塞消息队列的原因的话，就批处理消息队列\n                this.flushInCommingQueue();\n            }\n            else {\n                // 如果当前消息不是阻塞消息队列的原因，那也推入队列里\n                if (!alreadyInMessageQueue) {\n                    this.incommingQueue.push({\n                        account,\n                        type: qtype,\n                        id: qid,\n                        total: 1, curLen: 1, data: [],\n                        result: qactions\n                    });\n                }\n            }\n        }\n    }\n    executeActions(account, actions) {\n        var actions_1, actions_1_1;\n        var e_1, _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { drawAdapter } = this;\n            try {\n                for (actions_1 = __asyncValues(actions); actions_1_1 = yield actions_1.next(), !actions_1_1.done;) {\n                    let action = actions_1_1.value;\n                    switch (action.TYPE) {\n                        case WActions.REVOKE:\n                        case WActions.REDO:\n                        case WActions.CALIBRATE:\n                        case WActions.TEXT:\n                        case WActions.START:\n                        case WActions.MOVE:\n                        case WActions.END:\n                        case WActions.LASER_PEN:\n                        case WActions.LASER_PEN_END:\n                            {\n                                drawAdapter.act(account, action);\n                                break;\n                            }\n                        case WActions.SERIAL:\n                            console.log('serial:', action);\n                            break;\n                        case WActions.CLEAR: {\n                            this.syncManager.clear();\n                            this.syncManager.makeClearAck(account);\n                            drawAdapter.clear(action.accounts, account, { force: this.ownerAccount === account, quiet: true });\n                            break;\n                        }\n                        case WActions.CLEAR_ACK: {\n                            // this.syncManager.clearCache(account)\n                            drawAdapter.act(account, action);\n                            break;\n                        }\n                        case WActions.SYNC_REQUEST: {\n                            console.warn('recive sync request from ', account);\n                            let snapshot = this.drawAdapter.worker.getSnapshot();\n                            this.syncManager.syncTo(account, snapshot);\n                            // drawAdapter.act(account, action)  // 这里不需要执行\n                            break;\n                        }\n                        case WActions.SYNC: {\n                            console.warn('recive sync from ', account);\n                            let syncAction = action;\n                            yield this.handleSyncAction(syncAction);\n                            // drawAdapter.act(account, action) // 这里不需要执行\n                            break;\n                        }\n                        case WActions.SYNC_PREPARE: {\n                            console.warn('recive sync prepare from ', account);\n                            this.syncResponse(account);\n                            // drawAdapter.act(account, action) // 这里不需要执行\n                            break;\n                        }\n                        case WActions.SYNC_PREPARE_ACK: {\n                            console.warn('recive sync prepare ack from ', account);\n                            break;\n                        }\n                        case WActions.FILE: {\n                            if (action.TYPE === WActions.FILE) {\n                                const file = action.file;\n                                logger.h5('recive h5 FileAction', file);\n                                const { fileData } = this.syncManager;\n                                const currentFile = fileData && Object.assign({}, fileData);\n                                if (JSON.stringify(fileData) === JSON.stringify(file)) {\n                                    return console.warn('same file data');\n                                }\n                                // 收到的文件类型是图片类型\n                                if (file.type === 'img') {\n                                    // 如果当前已经有文件内容了\n                                    if (currentFile) {\n                                        if (currentFile.type === 'h5') {\n                                            // 不同类型，需要清空之前的H5\n                                            this.clearHtmlFile();\n                                        }\n                                        if (file.docId && file.docId == currentFile.docId) { // 节约资源值传送了必要信息\n                                            // 是相同的一个文件\n                                            currentFile.currentPage = parseInt('' + (file.currentPage || 1));\n                                            currentFile.url = currentFile.urlStr.replace('{index}', '' + file.currentPage);\n                                            this.image(currentFile, account);\n                                        }\n                                        // 合并更新\n                                        const [fileDataNext] = FileAction.immuteUpdate(currentFile, file);\n                                        this.syncManager.setFileData(fileDataNext);\n                                    }\n                                    else {\n                                        // 当前第一次收到这个类型的文件，直接更新\n                                        let fileNext;\n                                        if (this.opt.handleFile) {\n                                            fileNext = yield this.opt.handleFile(file.type, file);\n                                        }\n                                        else {\n                                            fileNext = file;\n                                        }\n                                        this.syncManager.setFileData(fileNext);\n                                        this.image(file, account);\n                                    }\n                                }\n                                else if (file.type === 'h5') {\n                                    // 如果是h5类型的文件\n                                    // this.clearImage(account)\n                                    logger.h5('current file', currentFile);\n                                    if (currentFile) {\n                                        if (currentFile.type == 'img') {\n                                            // 不同类型\n                                            this.clearImage(account);\n                                        }\n                                        if (file.docId && file.docId == currentFile.docId) {\n                                            // 是相同的一个文件\n                                            logger.h5('current file h5 cmd is ', currentFile.h5Cmd);\n                                            logger.h5('file h5 cmd is ', file.h5Cmd);\n                                            if (currentFile.h5Cmd !== file.h5Cmd) {\n                                                this.pagedHtmlFile(file.h5Cmd.split('&'));\n                                            }\n                                        }\n                                        else {\n                                            // 是不同文件\n                                            this.syncManager.setFileData(file);\n                                            this.setHtmlFile(file, account);\n                                            if (file.h5Cmd) { // 初次进入就有页面时 等 3s ppt载入和初始动画……\n                                                setTimeout(this.pagedHtmlFile.bind(this, file.h5Cmd.split('&')), 3000);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        // 当前第一次收到这个类型的文件，直接更新\n                                        this.syncManager.setFileData(file);\n                                        this.setHtmlFile(file, account);\n                                        if (file.h5Cmd) { // 初次进入就有页面时 等 3s ppt载入和初始动画……\n                                            setTimeout(this.pagedHtmlFile.bind(this, file.h5Cmd.split('&')), 3000);\n                                        }\n                                    }\n                                }\n                                else {\n                                    logger.h5('delete file', currentFile);\n                                    this.syncManager.setFileData(undefined);\n                                    if (currentFile) {\n                                        if (currentFile.type === 'img') {\n                                            this.clearImage(account);\n                                        }\n                                        else if (currentFile.type === 'h5') {\n                                            this.clearHtmlFile();\n                                        }\n                                    }\n                                }\n                                break;\n                            }\n                        }\n                        case WActions.VERSION: {\n                            if (action.TYPE === WActions.VERSION) {\n                                break;\n                            }\n                        }\n                        default:\n                            const fullCaseChecker = action.TYPE;\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (actions_1_1 && !actions_1_1.done && (_a = actions_1.return)) yield _a.call(actions_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n    flushInCommingQueue() {\n        var e_2, _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.syncState === 'waiting') {\n                return;\n            }\n            let { length } = this.incommingQueue;\n            while (length) {\n                this.actionProcessing = true;\n                const flushQueue = this.incommingQueue.slice();\n                let doneLen = 0;\n                let forceWaiting = false;\n                try {\n                    try {\n                        for (var flushQueue_1 = (e_2 = void 0, __asyncValues(flushQueue)), flushQueue_1_1; flushQueue_1_1 = yield flushQueue_1.next(), !flushQueue_1_1.done;) {\n                            let incomming = flushQueue_1_1.value;\n                            switch (incomming.type) {\n                                case 'text':\n                                case 'gzip':\n                                    if (incomming.total === incomming.curLen) {\n                                        doneLen++;\n                                        if (!incomming.dirty) {\n                                            yield this.executeActions(incomming.account, incomming.result);\n                                        }\n                                    }\n                                    else {\n                                        forceWaiting = true;\n                                        throw new Error('message need waiting!');\n                                    }\n                                    break;\n                                case 'function': {\n                                    break;\n                                }\n                                default:\n                                    const fullCaseChecker = incomming.type;\n                            }\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (flushQueue_1_1 && !flushQueue_1_1.done && (_a = flushQueue_1.return)) yield _a.call(flushQueue_1);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                finally {\n                    this.incommingQueue = this.incommingQueue.slice(doneLen, this.incommingQueue.length);\n                }\n                if (forceWaiting) {\n                    //  必须强制等待\n                    break;\n                }\n                else {\n                    length = this.incommingQueue.length;\n                }\n            }\n            this.actionProcessing = false;\n        });\n    }\n    destroy() {\n        this.drawAdapter && this.drawAdapter.destroy();\n        this.syncManager && this.syncManager.destroy();\n        this.eventHub.removeAllListeners();\n        ;\n        this.removeAllListeners();\n        // delete this.eventHub;\n        // delete this.drawAdapter\n        // delete this.syncManager\n    }\n    // 是否允许绘图操作\n    enableDraw(enable) {\n        if (this.state === 'inited') {\n            this.drawAdapter && this.drawAdapter.enableDraw(enable);\n        }\n        else {\n            console.warn('inited');\n        }\n    }\n    handleSyncAction(action) {\n        var e_3, _a, e_4, _b, e_5, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log(action);\n            let rawSnapshot;\n            let usersRaw;\n            //\n            // 先处理图层\n            //\n            const { shapes, users, transhShapes, file, canvasRatio, canvasHeight, canvasWidth, ownerWidth, ownerHeight } = action.sync;\n            const shapeQueue = shapes.slice();\n            // 将用户回收站的图层也填充进去。\n            const shapeGen = function () {\n                return __asyncGenerator(this, arguments, function* () {\n                    while (shapeQueue.length) {\n                        yield yield __await(shapeQueue.shift());\n                    }\n                });\n            };\n            // 调整当前画布的比例\n            let containerManager = this.drawAdapter.worker.container;\n            containerManager.canvasRatio = canvasRatio;\n            containerManager.resize();\n            // 更新房主的画板的大小\n            containerManager.updateCanvasPropSize(ownerWidth, canvasHeight);\n            let lastSleepTime = Date.now();\n            // 用户到默认状态\n            let currentUserDefaultState = this.drawAdapter.worker.localUser.getCalibrateAction();\n            const prevActionProcessing = this.actionProcessing;\n            this.actionProcessing = true;\n            // 如果有背景文件\n            if (file) {\n                this.executeActions(this.ownerAccount, [new FileAction(file)]);\n            }\n            try {\n                for (var _d = __asyncValues(shapeGen()), _e; _e = yield _d.next(), !_e.done;) {\n                    let shape = _e.value;\n                    if (!shape) {\n                        continue;\n                    }\n                    try {\n                        yield this.drawAdapter.worker.restoreShape(shape, false);\n                    }\n                    catch (error) {\n                        console.error(error);\n                    }\n                    // 异步执行停顿,防止websocket心跳超时\n                    let currentTime = Date.now();\n                    if (currentTime - lastSleepTime > 200) {\n                        yield sleep(30);\n                        lastSleepTime = Date.now();\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) yield _a.call(_d);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            // 重新渲染出所有图像\n            this.drawAdapter.worker.container.fullRender();\n            try {\n                // 将用户回收站里的数据还原\n                for (var users_1 = __asyncValues(users), users_1_1; users_1_1 = yield users_1.next(), !users_1_1.done;) {\n                    let user = users_1_1.value;\n                    if (user.recycle && user.recycle.length) {\n                        try {\n                            for (var _f = (e_5 = void 0, __asyncValues(user.recycle)), _g; _g = yield _f.next(), !_g.done;) {\n                                let shape = _g.value;\n                                try {\n                                    yield this.drawAdapter.worker.restoreShape(shape, true);\n                                }\n                                catch (error) {\n                                    console.error(error);\n                                }\n                                // 异步执行停顿,防止websocket心跳超时\n                                let currentTime = Date.now();\n                                if (currentTime - lastSleepTime > 200) {\n                                    yield sleep(30);\n                                    lastSleepTime = Date.now();\n                                }\n                            }\n                        }\n                        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n                        finally {\n                            try {\n                                if (_g && !_g.done && (_c = _f.return)) yield _c.call(_f);\n                            }\n                            finally { if (e_5) throw e_5.error; }\n                        }\n                    }\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (users_1_1 && !users_1_1.done && (_b = users_1.return)) yield _b.call(users_1);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n            // 需要对图层进行排序,但是现在好像不用手动操作，这里约定，用户回收站里的数据是等效的还原的\n            this.drawAdapter.worker.users.all.forEach(user => {\n                user.guessMyUndoCount();\n                user.emitUserShape();\n            });\n            //\n            // 最后将所有用户的状态校准一下\n            //\n            usersRaw = users.map(userSnapshot => {\n                const { account, calibrate } = userSnapshot;\n                let action = ActionUtils.unpack(calibrate.toString());\n                // 当前用户的状态不需要恢复老师端保存的状态\n                const notCurrentUser = account !== this.drawAdapter.worker.account;\n                if (notCurrentUser && action) {\n                    this.drawAdapter.act(account, action);\n                }\n                if (!notCurrentUser && action) {\n                    currentUserDefaultState = action;\n                }\n                return {\n                    account,\n                    calibrate: action\n                };\n            });\n            // 再还原当前用户的状态，避免刚才\n            this.drawAdapter.act(this.account, currentUserDefaultState);\n            // 同步自己的状态给其他用户\n            this.declareCalibrate(currentUserDefaultState);\n            rawSnapshot = {\n                users: usersRaw,\n                shapes: shapes,\n                transhShapes: transhShapes\n            };\n            this.actionProcessing = prevActionProcessing;\n            this.afterSync(rawSnapshot);\n        });\n    }\n    // 设置宽度\n    setSize(size, account) {\n        this.syncManager.pushQueue(0, {\n            action: new CalibrateAction({ size: size })\n        });\n        this.drawAdapter.setSize(size, account);\n    }\n    // 设置宽度\n    setFontsize(size, account) {\n        this.drawAdapter.setFontsize(size, account);\n    }\n    // 设置颜色\n    setColor(color, account) {\n        this.drawAdapter.setColor(color, account);\n    }\n    // 撤销操作\n    undo() {\n        return this.drawAdapter.undo();\n    }\n    // 重做操作\n    redo() {\n        return this.drawAdapter.redo();\n    }\n    // 清除画布\n    clear(account, actAccount, option) {\n        this.drawAdapter.clear(account, actAccount, option);\n    }\n    // 绘制图片\n    image(option, account) {\n        this.drawAdapter.image(option, account);\n    }\n    // 清除背景图\n    clearImage(account = this.account) {\n        this.clear();\n        this.drawAdapter.clearImage(account);\n    }\n    setHtmlFile(obj, account = this.account) {\n        logger.h5('setHtmlFile', obj);\n        const { paddingLeft, paddingTop, canvasHeight, canvasWidth } = this.drawAdapter.worker.container;\n        if (this.iframe) {\n            console.warn('已经有iframe了');\n            return;\n        }\n        const iframe = document.createElement('iframe');\n        iframe.src = obj.url;\n        iframe.scrolling = 'no';\n        iframe.name = 'nimHtmlFile';\n        iframe.frameBorder = '0';\n        iframe.style.position = 'absolute';\n        iframe.style.top = '' + paddingTop + 'px';\n        iframe.style.left = '' + paddingLeft + 'px';\n        iframe.style.zIndex = '1';\n        // iframe.style.right = '0'\n        // iframe.style.bottom = '0'\n        iframe.style.width = canvasWidth + 'px';\n        iframe.style.height = canvasHeight + 'px';\n        iframe.width = \"\" + canvasWidth;\n        iframe.height = '' + canvasHeight;\n        this.container.insertBefore(iframe, this.container.children[0]);\n        // 改变背景颜色，记得要改回来\n        this.drawAdapter.worker.container.displayCanvas.style.backgroundColor = 'transparent';\n        this.iframe = iframe;\n        window.addEventListener('message', this.onIframeMessage, false);\n        this.drawAdapter.worker.emitAction({\n            account: account,\n            action: new FileAction(obj)\n        });\n        this.syncManager.setFileData(obj);\n    }\n    pagedHtmlFile(arr) {\n        // debugger\n        logger.h5('pagedHtmlFile', arr);\n        const iframe = this.iframe;\n        if (iframe) {\n            try {\n                if (!iframe.contentWindow || (iframe.contentDocument && iframe.contentDocument.readyState !== 'complete')) {\n                    setTimeout(this.pagedHtmlFile.bind(this, arr), 800);\n                    return;\n                }\n            }\n            catch (e) {\n                console.error(e);\n                return false;\n            }\n            const data = {\n                identity: 'from_yunxin_wb',\n                page: parseInt(arr[0]),\n                anim: parseInt(arr[1]),\n                trigger: parseInt(arr[2]),\n                isBack: arr[3] == '1',\n                time: 0 //+arr[4]\n            };\n            //@ts-ignore\n            iframe.currentPage = parseInt(data.page);\n            let { page, anim, trigger, time, isBack } = data;\n            const h5Cmd = [page, anim, trigger, isBack, time].join('&');\n            console.warn('toPage');\n            console.warn(h5Cmd, this.syncManager.fileData && this.syncManager.fileData.h5Cmd);\n            logger.h5('toHtmlPage', data);\n            iframe.contentWindow.postMessage(data, '*');\n        }\n    }\n    toPageHtmlFile(direction, index, num) {\n        const iframe = this.iframe;\n        logger.h5('toPageHtmlFile', direction, index, num);\n        if (iframe) {\n            try {\n                if (!iframe.contentWindow || (iframe.contentDocument && iframe.contentDocument.readyState !== 'complete')) {\n                    return false;\n                }\n            }\n            catch (e) {\n                return false;\n            }\n            let data;\n            switch (direction) {\n                case 'leftEnd':\n                    data = {\n                        page: 0,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                case 'left':\n                    data = {\n                        page: index - 1,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                case 'up':\n                    data = { which: 37 };\n                    break;\n                case 'down':\n                    data = { which: 39 };\n                    break;\n                case 'right':\n                    data = {\n                        page: index,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                case 'rightEnd':\n                    data = {\n                        page: num - 1,\n                        anim: -1,\n                        trigger: -1,\n                        isBack: false\n                    };\n                    break;\n                default:\n                    console.warn('');\n            }\n            if (typeof data !== 'undefined') {\n                data.identity = 'from_yunxin_wb';\n                logger.h5('current file h5 cmd is ', this.syncManager.fileData && this.syncManager.fileData.h5Cmd);\n                logger.h5('toPageHtmlFile->post', data);\n                iframe.contentWindow.postMessage(data, '*');\n                //@ts-ignore\n                iframe.currentPage = parseInt(data.page);\n                //@ts-ignore\n                iframe.pageNum = num;\n            }\n            return true;\n        }\n    }\n    clearHtmlFile() {\n        this.clear();\n        logger.h5('clearHtmlFile');\n        if (!this.iframe || !this.container || (this.iframe && this.iframe.parentNode !== this.container)) {\n            return;\n        }\n        this.syncManager.setFileData(undefined);\n        window.removeEventListener('message', this.onIframeMessage, false);\n        this.container.removeChild(this.iframe);\n        this.drawAdapter.worker.container.displayCanvas.style.backgroundColor = '#ffffff';\n    }\n    _image(option, account = this.account) {\n        console.log('_image', option);\n        const { docId, currentPage } = option;\n        if (!docId || currentPage - 0 === 0) {\n            this.clearImage(account);\n            return;\n        }\n        const nim = this.nim;\n        const file = this.fileMap[docId];\n        if (!file && !nim)\n            return;\n        console.log('file!!!', file);\n        if (file) {\n            const url = `${file.prefix}_${file.type}_${currentPage}.${fileTypeMap[file.transType]}`;\n            // this.draw!.image(url, account)\n            // this.drawAdapter.image(url)\n            return;\n        }\n        const that = this;\n        if (!nim) {\n            console.warn('缺少nim实例，无法拉取文件');\n            return;\n        }\n        nim.getFile({\n            docId,\n            success: function (data) {\n                // console.log('getFile success', data)\n                that.fileMap[docId] = data;\n                that._image(option, account);\n            },\n            error: function (error) {\n                console.error('getFile error', error);\n            }\n        });\n    }\n    setContainer(container, opt) {\n        this.drawAdapter.setContainer(container, opt);\n    }\n    removeUser(account) {\n        account && this.drawAdapter.removeUser(account);\n    }\n    /**\n     * 等比例调整画布大小，\n     * @public\n     */\n    resize() {\n        this.drawAdapter.resize();\n    }\n    useTool(tool, account) {\n        this.drawAdapter.useTool(tool, account);\n    }\n    // 同步准备清空，主播重新登录聊天室后，广播该协议给其他人，其他人收到后进行本地清空\n    syncBegin() {\n        logger.m.worker('owner sync begin');\n        this.syncManager.clear();\n        this.syncManager.makeSyncPrepare();\n        this.clear();\n        this.clearImage();\n        this.syncState = 'done';\n        this.declareCalibrate(); // 将自己的状态广播一下\n        this.afterSync();\n    }\n    // 同步请求，非主播重新登录后发请求给主播\n    syncRequest(account) {\n        this.syncState = 'waiting';\n        logger.m.worker('sync request->', account);\n        this.syncManager.makeSyncRequest(account);\n    }\n    // 同步响应，主播重新登录后,非主播响应请求给主播\n    syncResponse(account) {\n        logger.m.worker('sync response->', account);\n        this.clear(undefined, account, { force: true });\n        this.clearHtmlFile();\n        this.clearImage(account);\n        this.syncManager.clear();\n        this.syncManager.makeSyncPrepareAck(account);\n        this.declareCalibrate(); // 将自己的状态更新一下\n    }\n    declareCalibrate(action) {\n        if (!action) {\n            let selfCalibrateAction = this.drawAdapter.worker.getSelfCalibrate();\n            if (selfCalibrateAction) {\n                action = selfCalibrateAction;\n            }\n        }\n        if (action) {\n            // 同步自己的当前状态过去\n            logger.m.worker('sync response calibrate->', action);\n            // 这里不需要等待，必须发送，防止被删除\n            this.syncManager.send({ toAccount: 0, actions: [{ action: action }] });\n        }\n        else {\n            console.warn('no self calibrate action');\n        }\n    }\n    /**\n     *  观众切换到互动者, 可以进行绘图操作\n     *  @method changeRoleToPlayer\n     *  @memberOf WhiteBoard#\n     *  @return {Promise}\n     */\n    changeRoleToPlayer() {\n        if (this.role === 0)\n            return Promise.resolve({ role: 'player' });\n        this.enableDraw(true);\n        this.role = 0;\n        return Promise.resolve({ role: 'player' });\n    }\n    /**\n     *  互动者切换到观众, 禁止绘图操作\n     *  @method changeRoleToAudience\n     *  @memberOf WhiteBoard#\n     *  @return {Promise}\n     */\n    changeRoleToAudience() {\n        if (this.role === 1)\n            return Promise.resolve({ role: 'audience' });\n        this.enableDraw(false);\n        // 这么写的目的: 切换观众前，如果是标记，先发一个标记结束的通知\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                this.role = 1;\n                resolve({ role: 'audience' });\n            }, 1000);\n        });\n    }\n    // 主要是给断线重连之后的房主重连房间后，重制状态\n    resetState() {\n        this.syncManager.clear();\n        const { users, container, shapes } = this.drawAdapter.worker;\n        users.all.forEach(user => {\n            user.clearShapes();\n        });\n        shapes.clear();\n        this.drawAdapter.worker.updateCursor();\n        users.removeOtherUsers();\n    }\n}\nWorkerManager.util = utils;\n","import Point from \"./core/Model/Point\";\nexport default class Simulator {\n    constructor(app) {\n        this.app = app;\n    }\n    freeDraw(times = 10, scale = 0.0003) {\n        this.app.useTool('free', this.app.account);\n        for (let i = 0; i < times; i++) {\n            const sx = Math.random();\n            const sy = Math.random();\n            const dx = Math.random() * scale;\n            const dy = Math.random() * scale;\n            this.app.drawAdapter.worker.mousedown(new Point(sx, sy), this.app.account);\n            this.app.drawAdapter.worker.mousemove(new Point(sx + dx, sy + dy), this.app.account);\n            this.app.drawAdapter.worker.mouseup(new Point(sx + dx, sy + dy), this.app.account);\n        }\n    }\n    rectDraw(times = 10, scale = 0.0003) {\n        this.app.useTool('rect', this.app.account);\n        for (let i = 0; i < times; i++) {\n            const sx = Math.random();\n            const sy = Math.random();\n            const dx = Math.random() * scale;\n            const dy = Math.random() * scale;\n            this.app.drawAdapter.worker.mousedown(new Point(sx, sy), this.app.account);\n            this.app.drawAdapter.worker.mousemove(new Point(sx + dx, sy + dy), this.app.account);\n            this.app.drawAdapter.worker.mouseup(new Point(sx + dx, sy + dy), this.app.account);\n        }\n    }\n}\n/**\n simulate mouse event in other products\nfunction mouseEventSimulate(canvas, x, y) {\n        let event = document.createEvent('MouseEvent')\n        event.initMouseEvent('mousedown', true, true, window, 0, event.screenX, event.screenY, x, y, false, false, false, false, 0, null)\n        canvas.dispatchEvent(event)\n\n        const dx = Math.random() * 30\n        const dy = Math.random() * 30\n\n        event = document.createEvent('MouseEvent')\n        event.initMouseEvent('mousemove', true, true, window, 0, event.screenX, event.screenY, x+dx, y+dy, false, false, false, false, 0, null)\n        canvas.dispatchEvent(event)\n\n        event = document.createEvent('MouseEvent')\n        event.initMouseEvent('mouseup', true, true, window, 0, event.screenX, event.screenY, x+dx, y+dy, false, false, false, false, 0, null)\n        canvas.dispatchEvent(event)\n    }\n\n    function multipleMouseSimulate(canvas, count, range=1000) {\n        for (let i = 0; i < count; i++) {\n            const sx = 100 + Math.random() * range\n            const sy = 100 + Math.random() * range\n            this.mouseEventSimulate(canvas, sx, sy)\n        }\n    }\n\n    //netless\n    whiteboard_div = document.getElementsByClassName('tx_board_canvas_wrap')\n    multipleMouseSimulate(whiteboard_div[0], 10, 100)\n\n    //tencent board\n    whiteboard_div = document.getElementsByClassName('tx_board_canvas_box')\n    multipleMouseSimulate(whiteboard_div[0], 10, 100)\n */ \n","import { WActions } from './Itypes';\nimport { ClearAckAction, SyncPrepareAction, SyncRequestAction, SyncPrepareAckAction, SyncAction } from './Actions';\nimport logger from '../debug';\nimport EventEmitter from 'eventemitter3';\nimport * as ActionUtils from './ActionUtils';\nimport { getKiloBytes } from './utils';\nimport pako from 'pako';\nimport globalHub from './Model/GlobalHub';\n/**\n *  在WebSocket里传输的是Command, 白板内使用的是Action\n */\nwindow.pako = pako;\nexport default class SyncManager extends EventEmitter {\n    constructor(account) {\n        super();\n        /**\n         * 是广播消息给所有用户吗？？ 不太确定。account === 0的时候表示发送给所有用户么？\n         *\n         * 文件动作如果是重复文件，则不重复推送\n         *\n         * @param anyAction\n         */\n        this.broadcastAction = (anyAction) => {\n            // 广播消息前 预处理一些数据\n            let action = anyAction.action;\n            if (action.TYPE === WActions.FILE) {\n                let fileAction = action;\n                let { file } = fileAction;\n                console.log(file);\n                const isSameDoc = this.fileData && file.docId && file.docId === this.fileData.docId;\n                if (this.fileData && JSON.stringify(file) === JSON.stringify(this.fileData)) {\n                    return; // 如果两次文件相同，就不推入队列了\n                }\n                if (file.type === 'clear') {\n                    this.setFileData(undefined);\n                }\n                else {\n                    this.setFileData(file);\n                }\n            }\n            this.pushQueue(0, anyAction);\n            //   this.commandManager.revoke(this.account)\n        };\n        this.account = account;\n        this.dataQue = {}; // Map<uid, List<command>>\n        // this.fileData // Map<uid, command>\n        this.lastDataMap = {}; // Map<uid, command>\n        this.shadowUsers = {};\n        this.doNotSendBefore = Date.now();\n        this.startLoop();\n    }\n    /**\n     * 将用户的动作推入该用户的队列中：this.dataQue[account]\n     *\n     * @param account\n     * @param action\n     */\n    pushQueue(account, action) {\n        logger.m.syncmanager('pushQueue', account, action);\n        if (typeof action.action === 'undefined') {\n            let error = new Error('ss');\n            console.log(error.stack);\n        }\n        // const commandStr = JSON.stringify(action)\n        // if (this.lastDataMap[account] === commandStr) {\n        //   return\n        // }\n        // this.lastDataMap[account] = commandStr\n        this.dataQue[account] = this.dataQue[account] || [];\n        this.dataQue[account].push(action);\n    }\n    /**\n     * 将obj转化为协议中约定的格式，然后调用flush函数发送数据\n     *\n     * @param obj\n     * @param delayBase\n     */\n    send(obj, delayBase) {\n        const { toAccount, actions } = obj;\n        if (!actions || actions.length < 1)\n            return;\n        const dataStr = ActionUtils.packBulk(actions.filter(x => !!x));\n        console.log('send', dataStr);\n        // 如果文本长度超过10个字，就使用gzip压缩方式传输,这个方式的传输比较\n        if (dataStr.length > 10 && (\"\" + toAccount !== '0')) {\n            let datas = this.gzipStr(dataStr);\n            datas.forEach((data, index) => {\n                this.flush({ toAccount, data }, index, delayBase);\n            });\n        }\n        else {\n            const data = { toAccount, data: dataStr };\n            this.flush(data, 0, delayBase);\n            logger.m.syncmanager('sendRaw:\\n', data);\n        }\n    }\n    /**\n     * 触发'flush'事件。\n     *\n     * 在core/index.js中，syncManager监听flush事件，然后调用connector.sendData发送数据\n     */\n    flush(data, delayIndex = 0, delayBase = 200) {\n        setTimeout(() => {\n            this.emit('flush', data);\n        }, delayBase * delayIndex);\n    }\n    /**\n     * 发送“清除响应”\n     *\n     * @param account\n     */\n    makeClearAck(account) {\n        this.send({\n            toAccount: account,\n            actions: [{ action: new ClearAckAction() }]\n        });\n    }\n    /**\n     * 发送“同步准备”\n     */\n    makeSyncPrepare() {\n        this.send({\n            toAccount: 0,\n            actions: [{ action: new SyncPrepareAction() }]\n        });\n    }\n    /**\n     * 发送“同步准备回应”\n     *\n     * @param account\n     */\n    makeSyncPrepareAck(account) {\n        this.send({\n            toAccount: 0,\n            actions: [{ action: new SyncPrepareAckAction() }]\n        });\n    }\n    gzipStr(str, doTag = true) {\n        console.log('gzip stirng:', str);\n        const gziped = pako.gzip(str, { to: 'string' });\n        console.log('gzip stirng:', pako.gzip(str));\n        const kiloBytes = getKiloBytes(gziped);\n        let dataArr = [];\n        if (kiloBytes > 49) {\n            const len = gziped.length;\n            let begin = 0;\n            while (begin < len) {\n                //每次取的字符长度 =  49KB（长度限制） * 1024 Byte/KB / 2 Byte（每个字符占用两个字节）\n                dataArr.push(gziped.substr(begin, 25088));\n                begin += 25088;\n            }\n        }\n        else {\n            dataArr.push(gziped);\n        }\n        if (doTag) {\n            const version = 1;\n            let { length } = dataArr;\n            let id = '' + Date.now() + '.' + Math.floor(Math.random() * 1000) +\n                Math.floor(Math.random() * 1000) +\n                Math.floor(Math.random() * 1000);\n            dataArr = dataArr.map((data, index) => `GZIP:${version}|${id}|${length}|${index}|=||=|${data}`);\n        }\n        return dataArr;\n    }\n    /**\n     * 发送“同步请求”\n     *\n     * @param account\n     */\n    makeSyncRequest(account) {\n        this.send({\n            toAccount: account,\n            actions: [{ action: new SyncRequestAction() }]\n        });\n    }\n    // 向account发送同步数据；TODO：做 相互抵消的重做、撤销 命令的过滤\n    /**\n     * 向toAccount发送同步数据, snapshot包含现有图形\n     *\n     * @param toAccount\n     * @param snapshot\n     */\n    syncTo(toAccount, snapshot) {\n        if (this.fileData) {\n            snapshot.file = this.fileData;\n        }\n        let action = new SyncAction(snapshot);\n        this.send({ toAccount, actions: [{ action }] });\n    }\n    /**\n     * 清空画布\n     */\n    clear() {\n        console.warn('clear sync manager');\n        this.dataQue = {};\n    }\n    /**\n     * 在msTime到来前，先不要发送数据\n     *\n     * @param msTime\n     */\n    delayMS(msTime) {\n        this.doNotSendBefore = Date.now() + msTime;\n    }\n    /**\n     * 每100ms将队列中所有动作发出。\n     */\n    startLoop() {\n        this.timer = setInterval(() => {\n            if (Date.now() < this.doNotSendBefore) {\n                return;\n            }\n            var dq = this.dataQue;\n            Object.keys(dq).forEach(key => {\n                if (!dq[key] || dq[key].length < 1) {\n                    return;\n                }\n                if (this.send) {\n                    this.send({ toAccount: key, actions: dq[key] });\n                    dq[key].length = 0;\n                }\n            });\n        }, 100);\n    }\n    /**\n     * 销毁syncManager\n     */\n    destroy() {\n        this.timer && clearInterval(this.timer);\n        this.timer = undefined;\n        this.dataQue = {};\n    }\n    /**\n     * 设置文件数据\n     * @param data\n     */\n    setFileData(data) {\n        this.fileData = data;\n        globalHub.emit('globalFile', this.fileData);\n    }\n}\nSyncManager.GZIP_TESTER_1 = /1\\|([\\d.]+)\\|(\\d+)\\|(\\d+)\\|=\\|\\|=\\|/;\n","/**\n * 绘制层。将任务交给worker(DrawWorker)。同时将DrawWorker中发出的动作发送给服务器。\n *\n * 钟凯：感觉这一层是多余的。\n */\nimport DrawWorker from './DrawWorker/index';\nimport EventEmitter from 'eventemitter3';\nimport { formatColor } from './utils';\nimport createDebug from 'debug';\nimport logger from '../debug';\nimport { isValidTool } from './validator';\nconst adapterLog = createDebug('AdapterDraw');\nexport default class AdapterDraw extends EventEmitter {\n    constructor(container, opt) {\n        super();\n        this.onInited = () => {\n            this.emit('inited');\n        };\n        // opt.color = '#000000'\n        this.worker = new DrawWorker(container, opt);\n        this.worker.on('action', this.onAction.bind(this));\n        this.worker.on('instantAction', this.onInstantAction.bind(this));\n        this.worker.on('inited', this.onInited);\n    }\n    /**\n     *\n     *\n     * @param account\n     * @param action\n     */\n    act(account, action) {\n        // var action = this.command2Action(account, action)\n        if (!action)\n            return;\n        let anyAction = { account: account, action: action };\n        logger.m.adapter('act->', action, account);\n        this.worker.act(anyAction);\n    }\n    // 收到worker内部抛出的action，然后发送到服务器\n    onAction(anyAction) {\n        if (anyAction.account !== this.worker.account || !this.worker.isEnable)\n            return;\n        logger.m.adapter('onAction', anyAction);\n        if (!anyAction)\n            return;\n        this.emit('action', anyAction);\n    }\n    // 收到worker内部抛出的action，然后发送到服务器\n    onInstantAction(anyAction) {\n        logger.m.adapter('onInstantAction', anyAction);\n        if (!anyAction)\n            return;\n        this.emit('instantAction', anyAction);\n    }\n    enableDraw(value) {\n        return this.worker.enableDraw(value);\n    }\n    destroy() {\n        this.worker.destroy();\n        this.removeAllListeners();\n        // delete this.worker;\n        return;\n    }\n    useTool(value, account) {\n        logger.m.adapter(value, account);\n        if (isValidTool(value)) {\n            this.worker.useTool(value, account);\n        }\n        else {\n            console.warn('画笔工具不正确!->', value);\n        }\n    }\n    resize() {\n        return this.worker.resize();\n    }\n    removeUser(account) {\n        return this.worker.removeUser(account);\n    }\n    setContainer(container, opt) {\n        return this.worker.setContainer(container, opt);\n    }\n    image(opt, account) {\n        return this.worker.image(opt, account);\n    }\n    clearImage(account) {\n        return this.worker.clearImage(account);\n    }\n    undo(account) {\n        return this.worker.undo(account);\n    }\n    redo(account) {\n        return this.worker.redo(account);\n    }\n    clear(target, account, opt) {\n        return this.worker.clear(target, account, opt);\n    }\n    setColor(color, account) {\n        if (!color)\n            return;\n        if (formatColor(color, 10) === formatColor.INVALID) {\n            console.error('whiteboard::setColor:设置颜色失败:不合法的色值');\n        }\n        else {\n            console.log('adapterDraw::setColor', color);\n            this.worker.setColor(color, account);\n        }\n    }\n    setSize(size, account) {\n        if (!size)\n            return;\n        if (!/^[\\d]+$/.test('' + size)) {\n            console.error('whiteboard::setSize:设置画笔粗细失败:不合法的数值:', size);\n            return;\n        }\n        console.log('adapterDraw::setSize', size);\n        this.worker.setSize(size, account);\n    }\n    setFontsize(size, account) {\n        if (!size)\n            return;\n        if (!/^[\\d]+$/.test('' + size)) {\n            console.error('whiteboard::setFontsize:设置文字大小失败:不合法的数值:', size);\n            return;\n        }\n        console.log('adapterDraw::setFontsize', size);\n        this.worker.setFontsize(size, account);\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from 'eventemitter3';\nimport * as CanvasHelper from './CanvasHelper';\nimport Point, { Coord } from '../Model/Point';\nimport Shape from '../Model/Shape';\nimport logger from '../../debug';\nimport { UserManager } from './UserManager';\nimport ShapesManager from './ShapesManger';\nimport ContainerManager, { applyState } from './ContainerManager';\nimport { WActions } from '../Itypes';\nimport { isValidTool } from '../validator';\nimport { StartAction, LaserPenEndAction, MoveAction, EndAction, RevokeAction, RedoAction, ClearAction, CalibrateAction, TextAction, FileAction } from '../Actions';\nimport { unpackBulk } from '../ActionUtils';\nimport { sign } from '../utils';\nimport globalHub from '../Model/GlobalHub';\n// * @param { string } opt.account uid\n//   * @param { number } opt.width\n//   * @param { number } opt.height\n//   * @param { string } opt.backgroundUrl 默认背景图\n//   * @param { string } opt.color\n//   * @param { string } opt.mode 绘图模式：激光笔flag 、 free\n//   * @param { number } opt.zIndex\nconst LOADING_IMAGE = 'data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAAANACwAAAAAEAAQAAAEPbDJSau9OOvNew0AEHDA8wCkiW6g6AXHMU4LgizUYRgEZdsUggFAQCgUP+AERggcFYHaDaMgEBQchBNhiQAAIfkECQAADQAsAAAAABAAEAAABDuwyUmrvTYAEDAFzwN4EyiSksaRyHF06GEYBNoQ82EHBwHbCIUCYRMKiwSCYoFALDCIwLDZBFJtTKclAgAh+QQJAAANACwAAAAAEAAQAAAEPrDJGQAIM2vwHtAUcVTdBzaHYRCKip2EepxacBAvjSgKQmc83m+iILCGEkSgh5wsEIhFEwqdUpvPaHPLnUQAACH5BAkAAA0ALAAAAAAQABAAAAQ+sMkZyAkz62MM0ROiKAjRXQCATeOIHEQAPA+QKQShZHOdIQFSRqaSLBCIBQiERC41TcQzc0xOr9isdsvtPiMAIfkECQAADQAsAAAAABAAEAAABD2wyYmUQjNra/VcCLIoBKEExBFkYRtcBGAQbJsdhnFkoMimGI8wAACshBnA4wFAJpdNp4RolFqv2Kx2q4kAACH5BAkAAA0ALAAAAAAQABAAAAQ9sMm5EFoza2u1b5ylKMjXVFdAjGamrEo7IWMpz8QR3A0BGATewWA48BA5mykAAOxugMcDwItOeUwnb9uKAAAh+QQJAAANACwAAAAAEAAQAAAEO7DJSau92C6EVp4c90khMjZbd5KKYo4B0Z4KIZ9I4H7IQQSng8FwwAQAgJgBQMAAHo+kD3h5Rk/HpCUCACH5BAkAAA0ALAAAAAAQABAAAAQ8sMlJq7046827nwuCLJwoliYXjlIAAAGFKApCAc8DULQSTzgd4kCYEQgKigt2MBgOC5rtQnAeOAHilBIBADs=';\nexport default class DrawWorker extends EventEmitter {\n    constructor(container, opt) {\n        super();\n        this.handleInputDomBlur = () => {\n            console.log('blur');\n            const { inputDom } = this.container;\n            const account = this.account;\n            if (!this.localUser) {\n                return;\n            }\n            let pointStr = inputDom.getAttribute('data-point');\n            if (!pointStr)\n                return;\n            const { ownerCanvasHeight, ownerCanvasWidth } = this.container;\n            let prevEnd = Point.fromString(pointStr);\n            inputDom.style.display = 'none';\n            const text = (inputDom.value || '').trim();\n            inputDom.value = '';\n            if (ownerCanvasHeight && ownerCanvasWidth && text) {\n                const action = new TextAction(prevEnd.x, prevEnd.y, text);\n                this.renderText(action, account);\n                this.emitAction({ account, action });\n            }\n        };\n        /**\n         * 对事件数据进行预处理，再调用对应的处理函数\n         * @param {Event} e 鼠标或触摸屏事件\n         * @private\n         */\n        this.dispatcher = (e) => {\n            if (e.type !== 'keydown' && e.type !== 'keyup') {\n                e.preventDefault();\n            }\n            e = e.originalEvent ? e.originalEvent : e;\n            if (!this.container.displayCtx)\n                return;\n            const rect = this.container.displayCtx.canvas.getBoundingClientRect();\n            let x, y;\n            if (e.touches && e.touches.length === 1) {\n                x = e.touches[0].clientX;\n                y = e.touches[0].clientY;\n            }\n            else if (e.changedTouches && e.changedTouches.length === 1) {\n                x = e.changedTouches[0].clientX;\n                y = e.changedTouches[0].clientY;\n            }\n            else {\n                x = e.clientX;\n                y = e.clientY;\n            }\n            const { ctrlKey, shiftKey, altKey, which } = e;\n            if (!x && x !== 0)\n                x = 0;\n            if (!y && y !== 0)\n                y = 0;\n            let realX = Math.round(x - rect.left);\n            let realY = Math.round(y - rect.top);\n            const { ownerCanvasHeight, ownerCanvasWidth, canvasWidth, canvasHeight } = this.container;\n            if (!ownerCanvasHeight || !ownerCanvasWidth || !canvasWidth || !canvasHeight) {\n                return;\n            }\n            // 点坐标转换为相对位置\n            const offset = new Point(+(realX / canvasWidth).toFixed(4), +(realY / canvasHeight).toFixed(4));\n            let type = e.type;\n            if (type === 'touchstart')\n                type = 'mousedown';\n            if (type === 'touchmove')\n                type = 'mousemove';\n            if (type === 'touchend')\n                type = 'mouseup';\n            // debug(type)\n            if (which === 2 || which === 3) {\n                // 如果是右键或者中键，就不触发对应的\n                return;\n            }\n            // console.log(e.buttons);\n            this[type](offset, this.account, { ctrlKey, shiftKey, altKey, which });\n        };\n        if (typeof opt === 'undefined') {\n            throw new Error('Option is Undefined!');\n        }\n        this.state = 'created';\n        this.opt = opt;\n        this.account = opt.account || 0; // 本地用户的UID\n        // 组装层级关系\n        this.users = new UserManager(opt);\n        this.shapes = new ShapesManager(); // 所有用户绘制内容的列表\n        this.shapes.wrap(this.users);\n        this.container = new ContainerManager(container, opt);\n        this.container.on('init-canvas', () => {\n            // 创建cancas之后才创建用户，因为需要用到canvas的宽高\n            logger.m.worker('init-canvas event');\n            const user = this.addUser(this.account);\n            this.localUser = user; // 缓存一下自己\n            this.state = 'inited';\n            this.afterInit();\n        });\n        this.container.on('ownerCanavasUpdate', (() => {\n            let timmer;\n            return (width, height) => {\n                console.log('ownerCanavasUpdate timmer');\n                clearTimeout(timmer);\n                timmer = setTimeout(() => {\n                    console.log('ownerCanavasUpdate timmer');\n                    this.emit('instantAction', {\n                        account: this.account,\n                        action: new CalibrateAction({\n                            ownerCanvasHeight: height,\n                            ownerCanvasWidth: width,\n                        })\n                    });\n                }, 200);\n            };\n        })());\n        this.container.wrap(this.shapes, this.users);\n        this.container.inputDom.addEventListener('blur', this.handleInputDomBlur);\n        this.isEnable = false; // 默认情况下都不可以写\n    }\n    setContainer(container, opt) {\n        logger.m.worker('setContainer');\n        this.container.setContainer(container, opt);\n    }\n    isDrawEnable() {\n        return this.isEnable;\n    }\n    // 是否有权限进行画布操作\n    enableDraw(enable) {\n        logger.m.worker('enableDraw', enable);\n        this.isEnable = !!enable;\n        globalHub.emit('canDraw', this.isEnable);\n        this.switchEventListener(!!enable);\n        // 切换为观众后，如果当前在激光笔，先保存当前状态\n        if (this.localUser) {\n            const { tool } = this.localUser;\n            if (!enable) {\n                if (/flag/.test(this.localUser.tool)) {\n                    this.clearFlag();\n                    this.emitAction({ account: this.account, action: new LaserPenEndAction() });\n                }\n                this.setCursor('not-allowed');\n            }\n            else {\n                let cursorType;\n                if (tool === 'flag') {\n                    cursorType = 'flag';\n                }\n                else {\n                    cursorType = 'crosshair';\n                }\n                this.setCursor(cursorType);\n            }\n        }\n    }\n    updateCursor() {\n        if (this.localUser) {\n            const { tool } = this.localUser;\n            if (!this.isEnable) {\n                if (/flag/.test(this.localUser.tool)) {\n                    this.clearFlag();\n                    this.emitAction({ account: this.account, action: new LaserPenEndAction() });\n                }\n                this.setCursor('not-allowed');\n            }\n            else {\n                let cursorType;\n                if (tool === 'flag') {\n                    cursorType = 'flag';\n                }\n                else {\n                    cursorType = 'crosshair';\n                }\n                this.setCursor(cursorType);\n            }\n        }\n    }\n    /**\n     * 增加或移除事件监听\n     * @param {Boolean} add 是否增加事件监听\n     * @private\n     */\n    switchEventListener(add) {\n        const op = add ? 'add' : 'remove';\n        const canvasList = [this.container.maskCanvas];\n        // const currentUserCanvas = this.users.myself.ctx.canvas\n        // if (currentUserCanvas) {\n        //   currentUserCanvas.style.visibility = add ? 'visible' : 'hidden'\n        //   canvasList.push(currentUserCanvas)\n        // }\n        const dispatcher = this.dispatcher;\n        // 绑定到canvas上的事件\n        canvasList.forEach(canvas => {\n            ['mouseleave', 'mousedown', 'mousemove', 'touchmove', 'touchstart']\n                .forEach(event => {\n                let addOrRemove = op + 'EventListener';\n                canvas[addOrRemove](event, dispatcher);\n            });\n        });\n        // 绑定在body上的事件\n        ['mouseup', 'touchend']\n            .forEach(event => {\n            let addOrRemove = op + 'EventListener';\n            this.container.container[addOrRemove](event, dispatcher);\n        });\n        ['keydown', 'keyup']\n            .forEach(event => {\n            let addOrRemove = op + 'EventListener';\n            document.documentElement[addOrRemove](event, dispatcher);\n        });\n    }\n    // 设置光标样式\n    setCursor(type = 'not-allowed') {\n        logger.m.worker('setCursor', type);\n        const canvasList = [\n            this.container.maskCanvas\n        ];\n        type = /(flag|crosshair|not-allowed)/.test(type) ? type : 'crosshair';\n        this.cursor = type || this.cursor;\n        if (this.cursor === 'flag') {\n            this.cursor = 'none';\n        }\n        canvasList.forEach(c => {\n            c.style.cursor = this.cursor;\n        });\n    }\n    afterInit() {\n        this.emit('inited');\n    }\n    emitAction(anyAction) {\n        this.emit('action', anyAction);\n    }\n    /**\n     * 获取或者设置操作模式。Worker的模式设置必须是标准的，对外暴露可以使用转换\n     * @param {string} tool 'flag', 'free', 'erase', 'fill', 'select'\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    useTool(tool, account = this.account) {\n        logger.m.worker('use tool:', tool, account);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        let validTool = isValidTool(tool);\n        if (!validTool) {\n            console.error('useTool 参数不正确！', tool);\n            return;\n        }\n        let user = this.getUser(account);\n        if (!tool)\n            return user.tool;\n        if (!user) {\n            user = this.addUser(account);\n        }\n        logger.m.worker('use tool:', user);\n        // 如果要设置的模式就是当前模式，直接返回\n        if (user.tool === tool)\n            return;\n        const updator = { tool: tool, };\n        user.update(updator);\n        if (tool === 'flag') {\n            user.ctx.canvas.style.visibility = 'visible';\n        }\n        else {\n            this.clearFlag(account);\n        }\n        logger.m.worker('useTool check account', account);\n        if (account !== this.account) {\n            return;\n        }\n        // // 当前是观众模式\n        // if (!this.isEnable) {\n        //   return\n        // }\n        if (user.tool !== 'text') { // 修改为非 text 模式隐藏输入框\n            this.container.inputDom.style.display = 'none';\n        }\n        this.setCursor(user.tool);\n        logger.m.worker('useTool check account', account);\n        this.dispatchCalibrateAction(updator);\n    }\n    clearFlag(account = this.account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        user.flagPos = new Point(3, 3).toString();\n        this.renderFlag();\n        this.emitAction({\n            account,\n            action: new LaserPenEndAction(),\n        });\n    }\n    /**\n     * 获取或者设置笔&橡皮擦的大小\n     * @param {number} value 笔&橡皮擦的大小\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    setSize(value, account = this.account) {\n        let user = this.getUser(account);\n        logger.m.worker('setSize', value, account, user);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        if (!user) {\n            user = this.addUser(account);\n        }\n        if (!value)\n            return user.size;\n        if (typeof +value !== 'number') {\n            throw new Error('Type Error: size');\n        }\n        let updator = { size: +value, };\n        user.update(updator);\n        this.dispatchCalibrateAction(updator);\n    }\n    // 获取自己的按钮坐标等等的参数\n    getSelfCalibrate() {\n        if (this.localUser) {\n            return this.localUser.getCalibrateAction();\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * 获取或者设置笔的颜色\n     * @param {number} value 笔的颜色\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    setColor(value, account = this.account) {\n        let user = this.getUser(account);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        if (!user) {\n            user = this.addUser(account);\n        }\n        if (!value)\n            return user.color;\n        const updator = { color: value.toLowerCase() };\n        this.dispatchCalibrateAction(updator);\n        user.update(updator);\n    }\n    /**\n     * 获取或者设置文字的大小\n     * @param {number} value 字体大小\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    setFontsize(value, account = this.account) {\n        let user = this.getUser(account);\n        logger.m.worker('set font size', value, account, user);\n        if (this.state == 'created') {\n            console.warn('未初始化容器，请在inited事件后调整当前模式');\n            return;\n        }\n        if (!user) {\n            user = this.addUser(account);\n        }\n        if (!value)\n            return user.fontsize;\n        if (typeof (+value) !== 'number') {\n            throw new Error('Type Error: fontsize');\n        }\n        const updator = { fontsize: +value };\n        user.update(updator);\n        this.dispatchCalibrateAction(updator);\n        // this.container.inputDom.style.height = value + 'px'\n        this.container.inputDom.style.fontSize = value + 'px';\n    }\n    keydown(point, account, ext) {\n        let user = this.users.getUser(account);\n        if (!user) {\n            user = this.addUser(account);\n        }\n        const { ctrlKey, shiftKey, altKey, which } = ext;\n        // 当前只响应 ctrl shift alt 这三个键的响应\n        // 17-ctrl  16-shif 18-alt\n        if ([16, 17, 18].indexOf(which) > -1) {\n            let userKeyDown = user.keyDown;\n            let newWhich = userKeyDown === null ? -1 : userKeyDown.which;\n            // 如果后期需要对其他更多按键进行处理的话，就在这里处理\n            // 没有其他按键的情况下， whichkey 传输-1过去\n            const updator = {\n                keyDown: {\n                    ctrlKey, altKey, shiftKey,\n                    which: newWhich\n                }\n            };\n            user.update(updator);\n            this.dispatchCalibrateAction(updator);\n            this._afterKeyChange(user, account, ext);\n        }\n    }\n    keyup(point, account, ext) {\n        const { ctrlKey, shiftKey, altKey, which } = ext;\n        let user = this.users.getUser(account);\n        if (!user) {\n            user = this.addUser(account);\n        }\n        // 当前只响应 ctrl shift alt 这三个键的响应\n        // 17-ctrl  16-shif 18-alt\n        if ([16, 17, 18].indexOf(which) > -1) {\n            let userKeyDown = user.keyDown;\n            let newWhich = userKeyDown === null ? -1 : userKeyDown.which;\n            if (which === newWhich) {\n                newWhich = -1;\n            }\n            const updator = {\n                keyDown: {\n                    altKey, shiftKey, ctrlKey,\n                    which\n                }\n            };\n            user.update(updator);\n            this.dispatchCalibrateAction(updator);\n            this._afterKeyChange(user, account, ext);\n        }\n    }\n    _afterKeyChange(user, account, ext) {\n        if (user.isMouseDown) {\n            if (user.tool !== 'flag' && user.tool !== 'free' && user.tool !== 'erase') {\n                this.mousemove(user.end, account, ext); // TODO,这里的which 应该替换\n            }\n        }\n    }\n    /**\n     * 鼠标按下&开始触摸时的处理函数\n     * @param {Point} offset 当前位置坐标\n     * @param {string} account 进行操作的用户的ID\n     */\n    mousedown(offset, account = this.account, ext) {\n        let shape;\n        const user = this.getUser(account);\n        let { mode, tool, color, size, fontsize, keyDown } = user;\n        const userCtx = user.ctx;\n        const displayCtx = this.container.displayCtx;\n        // 如果是激光笔工具或者文本工具，就返回\n        if ((user.isFlag && (!tool || tool === 'flag')) || tool === 'text') {\n            return;\n        }\n        if (tool === 'erase' && this.shapes.visibles.length === 0) {\n            // 如果画板没有内容，不能使用橡皮擦工具\n            return;\n        }\n        user.whenMouseDown(Point.clone(offset));\n        const end = user.end;\n        if (user.isMouseDown) {\n            // '兼容iOS未抬笔直接落笔的情况'\n            logger.mouse('user.isMouseDown->true');\n            this.mouseup(end, account);\n        }\n        if (tool === 'free' || tool === 'erase') { // 1. free 会 直接在 displayCtx 上绘制；2. 当 erase 时 workCtx 要保证 source-over；3. 所以隐藏\n            userCtx.canvas.style.visibility = 'hidden';\n            userCtx.beginPath();\n        }\n        else {\n            userCtx.canvas.style.visibility = 'visible';\n        }\n        logger.m.worker('switch mode = ', mode, tool);\n        // 缓存上一次applyState的用户\n        this.lastStateAccount = user.account;\n        applyState(userCtx, user);\n        applyState(displayCtx, user);\n        const { ownerCanvasHeight: height, ownerCanvasWidth: width } = this.container;\n        let action;\n        if (height && width) {\n            action = new StartAction(offset.x, offset.y);\n        }\n        switch (mode) {\n            case 'draw': {\n                user.isMouseDown = true;\n                logger.log('user is mouseDown', user.isMouseDown, user);\n                shape = new Shape({\n                    user, mode, tool, size, color, fontsize,\n                    start: Point.clone(offset),\n                    actions: action,\n                    keyDown: user.keyDown,\n                });\n                user.pushShape(shape);\n                this.shapes.push(shape);\n                switch (tool) {\n                    case 'circle':\n                    case 'ellipse':\n                    case 'line':\n                    case 'rect':\n                    case 'roundRect':\n                    case 'solidCircle':\n                    case 'solidEllipse':\n                    case 'solidRoundRect':\n                    case 'solidRect':\n                    case 'erase':\n                    case 'free':\n                    case 'flag':\n                        // 'free' 用三个点画二次曲线，使笔迹光滑，降低锯齿感\n                        break;\n                    case 'fill': {\n                        // shape = new Shape({\n                        //   user, mode, tool, size, color,\n                        //   start: Point.clone(offset)\n                        // })\n                        // user.pushShape(shape)\n                        // this.shapes.push(shape)\n                        this.lastStateAccount = user.account;\n                        applyState(shape.ctx, user);\n                        applyState(displayCtx, user);\n                        shape.draw(displayCtx);\n                        user.isMouseDown = false; // 保证isMouseDown的标记位是正常的\n                        break;\n                    }\n                    default:\n                        const fullCaseChecker = tool;\n                }\n                break;\n            }\n        }\n        logger.m.worker('emit on mousedown');\n        if (width && height) {\n            this.emitAction({ account, action: action });\n        }\n    }\n    /**\n     * 鼠标移动&触摸移动时的处理函数\n     * @param {Point} offset 当前位置坐标\n     * @param {string} account 进行操作的用户的ID\n     */\n    mousemove(offset, account = this.account, ext) {\n        const user = this.getUser(account);\n        logger.mouse('mousemove', user, !user.isMouseDown && !user.isFlag);\n        if (!user.isFlag) {\n            // 如果不是flag模式，\n            if (!user.isMouseDown) {\n                console.log('pre return when mouse down is false');\n                return;\n            }\n        }\n        user.whenMouseMove(Point.clone(offset));\n        let { mode, tool, keyDown, end } = user;\n        if (tool === 'erase' && this.shapes.visibles.length === 0) {\n            // 如果画板没有内容，不能使用橡皮擦工具\n            return;\n        }\n        const userCtx = user.ctx;\n        const displayCtx = this.container.displayCtx;\n        logger.mouse('mousemove', offset, user);\n        const activeShape = user.activeShape;\n        let action = new MoveAction(offset.x, offset.y);\n        // 如果按键不一致，就更新\n        if (ext && Object.keys(keyDown).some((key) => ext[key] !== keyDown[key])) {\n            user.update({ keyDown: ext });\n        }\n        if (tool !== 'flag') {\n            this.shiftKeyTool(user, activeShape, (toolName) => {\n                tool = toolName;\n            });\n        }\n        // 检查上一次的使用的状态的用户，如果帐号相同，为了性能，就不重新作用applyState\n        if (user.account !== this.lastStateAccount) {\n            if (tool !== 'flag') {\n                this.lastStateAccount = user.account;\n                applyState(userCtx, user);\n                applyState(displayCtx, user);\n            }\n        }\n        switch (mode) {\n            case 'draw': {\n                switch (tool) {\n                    case 'flag': {\n                        // 光标模式\n                        user.flagPos = Point.clone(offset).toString();\n                        this.renderFlag();\n                        // renderFlag(user, offset, size, color)\n                        break;\n                    }\n                    case 'erase':\n                    case 'free':\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.actions.push(action);\n                            activeShape.freeMove(userCtx);\n                            activeShape.freeMove(displayCtx);\n                        }\n                        break;\n                    case 'line':\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.updateCorner(end);\n                        activeShape.draw(userCtx);\n                        break;\n                    case 'rect':\n                    case 'solidRect': {\n                        if (activeShape) {\n                            CanvasHelper.clearCtx(userCtx);\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'roundRect':\n                    case 'solidRoundRect': {\n                        CanvasHelper.clearCtx(userCtx);\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'circle':\n                    case 'solidCircle': {\n                        CanvasHelper.clearCtx(userCtx);\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'ellipse':\n                    case 'solidEllipse': {\n                        CanvasHelper.clearCtx(userCtx);\n                        if (activeShape) {\n                            activeShape.updateCorner(end);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    }\n                    case 'fill':\n                    case 'text':\n                        // 什么也不做，\n                        action = null;\n                        break;\n                    default:\n                        const fullCaseChecker = tool;\n                }\n                break;\n            }\n        }\n        if (action) {\n            this.emitAction({ account, action });\n        }\n    }\n    shiftKeyTool(user, activeShape, callback) {\n        if (user.keyDown.shiftKey) {\n            let tool = user.tool;\n            // 取消shift 需要变更工具后还原\n            if (tool === 'ellipse') {\n                tool = 'circle';\n                if (activeShape) {\n                    activeShape.tool = tool;\n                }\n                callback(tool);\n            }\n            else if (tool === 'circle') {\n                tool = 'ellipse';\n                if (activeShape) {\n                    activeShape.tool = tool;\n                }\n                callback(tool);\n            }\n        }\n        else {\n            // 取消shift key后还原\n            if (activeShape && activeShape.tool !== user.tool) {\n                activeShape.tool = user.tool;\n            }\n        }\n    }\n    /**\n     * 鼠标松开&触摸结束时的处理函数\n     * @param {Point} offset 当前位置坐标\n     * @param {string} account 进行操作的用户的ID\n     * @private\n     */\n    mouseup(offset, account = this.account, ext) {\n        const user = this.getUser(account);\n        const textActionText = offset.text;\n        console.warn('mouse up');\n        logger.m.worker('mouse up', account);\n        let { mode, tool, color, size, fontsize, start, oldMid, end, } = user;\n        if (tool === 'erase' && this.shapes.visibles.length === 0) {\n            // 如果画板没有内容，不能使用橡皮擦工具\n            return;\n        }\n        const mid = Point.middle(end, offset);\n        // free 模式需要知道上一次的情况\n        const prevOldMid = oldMid.clone();\n        const prevEnd = end.clone();\n        // 作用到user对象上\n        oldMid.copy(mid);\n        end.copy(offset);\n        user.oldMid = oldMid.clone();\n        user.end = end.clone();\n        if (user.isFlag) {\n            // 激光笔直接返回\n            this.clearFlag();\n            this.emitAction({\n                account,\n                action: new LaserPenEndAction()\n            });\n            ;\n            return;\n        }\n        if (!user.isMouseDown && tool !== 'text')\n            return;\n        user.isMouseDown = false;\n        console.warn('turn use mouse down to false', user.isMouseDown, user.account);\n        const userCtx = user.ctx;\n        const displayCtx = this.container.displayCtx;\n        const activeShape = user.activeShape;\n        let shapeCtx = activeShape && activeShape.ctx;\n        if (tool === 'text') {\n            // 如果是 text 工具， 这里需要做输入框的展示以及输入框的消失的操作\n            // applyState 不在这里作用，在renderText方法里作用，\n            // 这样接收端也能更新shape状态\n            let endCoord = this.getCanvasCoord(end);\n            const { canvasWidth: width, canvasHeight: height, inputDom } = this.container;\n            const { style } = inputDom;\n            const { display } = style;\n            if (endCoord.x < 0 || endCoord.x > width || endCoord.y < 0 || endCoord.y > height) {\n                return;\n            }\n            if (display === 'none') {\n                // 如果是隐藏的就展示对应的DOM\n                const iptWidth = width - endCoord.x - 10;\n                const iptHeight = height - endCoord.y - 10;\n                if (fontsize * 10 > iptWidth) {\n                    style.width = (iptWidth > 0 ? iptWidth : 0) + 'px';\n                }\n                else {\n                    style.width = iptWidth + 'px';\n                }\n                // style.height = fontsize + 'px'\n                style.padding = \"1px 0\";\n                style.verticalAlign = \"top\"; // fix ios safari input font height\n                style.lineHeight = fontsize + 'px';\n                style.top = endCoord.y + this.container.paddingTop + 'px';\n                style.left = endCoord.x + this.container.paddingLeft + 'px';\n                style.fontSize = fontsize + 'px';\n                style.display = 'block';\n                style.color = color;\n                inputDom.setAttribute('data-point', end.toString());\n                inputDom.focus();\n                user.end.copy(end);\n            }\n            else {\n                // 如果是展示状态下，就消失并且抛出TextAction\n                inputDom.blur();\n            }\n            return;\n        }\n        if (!activeShape || !shapeCtx) {\n            return;\n        }\n        let needMoveUserCtxData = true;\n        userCtx.canvas.style.visibility = 'visible';\n        activeShape.updateCorner(end);\n        let action = new EndAction(end.x, end.y);\n        if (tool !== 'flag') {\n            this.shiftKeyTool(user, activeShape, (toolName) => {\n                tool = toolName;\n            });\n            // 如果有两个用户在画画，必须要更新Canvas状态\n            this.lastStateAccount = user.account;\n            applyState(userCtx, user);\n            applyState(displayCtx, user);\n        }\n        switch (mode) {\n            case 'draw':\n                // 如果 erase 设置了 workCtx 为 destination-out 取到的img不能做正常 撤销 重做\n                switch (tool) {\n                    case 'erase':\n                    case 'free':\n                        // 自由画笔需要拓展边界\n                        activeShape.expandCorner();\n                        activeShape.freeEnd(userCtx);\n                        activeShape.freeEnd(displayCtx);\n                        break;\n                    case 'line':\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    case 'rect':\n                    case 'solidRect': {\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    }\n                    case 'roundRect':\n                    case 'solidRoundRect': {\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    }\n                    case 'circle':\n                    case 'solidCircle': {\n                        CanvasHelper.clearCtx(userCtx);\n                        activeShape.draw(userCtx);\n                        break;\n                    }\n                    case 'ellipse':\n                    case 'solidEllipse':\n                        {\n                            CanvasHelper.clearCtx(userCtx);\n                            activeShape.draw(userCtx);\n                        }\n                        break;\n                    case 'flag':\n                    case 'fill':\n                        // 不放置数据到shape里\n                        action = null;\n                        needMoveUserCtxData = false;\n                        break;\n                    default:\n                        const fullCaseChecker = tool;\n                }\n                if (needMoveUserCtxData) {\n                    this.moveUserShapeToDisplay(user);\n                }\n                break;\n        }\n        activeShape.keyDown = user.keyDown;\n        if (action) {\n            activeShape.actions.push(action);\n            this.emitAction({ account, action });\n        }\n    }\n    mouseleave(point, account = this.account, ext) {\n        console.log('mouse leave');\n        if (account === this.account) {\n            const user = this.getUser(account);\n            switch (user.tool) {\n                case 'flag': {\n                    this.clearFlag(account);\n                    this.emitAction({\n                        account,\n                        action: new LaserPenEndAction()\n                    });\n                    break;\n                }\n                case 'text':\n                    break;\n                default:\n                    this.mouseup(point, account, ext);\n            }\n        }\n    }\n    renderText(offset, account) {\n        let inputDomValue;\n        let action;\n        action = offset;\n        let end = new Point(offset.x, offset.y);\n        let endCoord = this.getOwnerCoord(end);\n        inputDomValue = (offset.text || '').trim();\n        if (!inputDomValue || !account) {\n            return;\n        }\n        let user = this.getUser(account);\n        if (!user) {\n            user = this.addUser(account);\n        }\n        const { tool, mode, size, color, fontsize } = user;\n        let displayCtx = this.container.displayCtx;\n        const shape = new Shape({\n            user, mode, tool, size, color, fontsize,\n            start: Point.clone(end),\n            actions: action,\n            keyDown: user.keyDown,\n        });\n        this.shapes.push(shape);\n        user.pushShape(shape);\n        // 这个fontSize是设置的字体测试的用户的大小，具体到画布上以后，字体大小会发生变化\n        const userCtx = user.ctx;\n        this.lastStateAccount = user.account;\n        applyState(userCtx, user);\n        applyState(displayCtx, user);\n        CanvasHelper.text(userCtx, endCoord, inputDomValue, fontsize, true, color);\n        const corner = user.activeShape.corner;\n        corner[0].x = endCoord.x - size;\n        corner[0].y = endCoord.y - 20;\n        corner[1].x = endCoord.x + fontsize * inputDomValue.length;\n        corner[1].y = endCoord.y + fontsize + 20;\n        this.moveUserShapeToDisplay(user);\n    }\n    clearTransparentPix(imgData) {\n        let total = imgData.length;\n        let dataBytes = imgData;\n        for (let i = 0; i < total; i += 4) {\n            const alpha = dataBytes[3 + i];\n            if (alpha < 243) {\n                dataBytes[0 + i] = 0;\n                dataBytes[1 + i] = 0;\n                dataBytes[2 + i] = 0;\n                dataBytes[3 + i] = 0;\n            }\n        }\n    }\n    moveUserShapeToDisplay(user, antiAlais) {\n        const { activeShape, ctx: userCtx } = user;\n        const { displayCtx } = this.container;\n        if (!activeShape || !displayCtx) {\n            console.error('activeShape is ', activeShape, 'displayCtx is ', displayCtx);\n            return;\n        }\n        const { tool, ctx: shapeCtx, color, corner } = activeShape;\n        logger.log('corner', corner);\n        const shapeWidth = Math.ceil(corner[1].x - corner[0].x);\n        const shapeHeight = Math.ceil(corner[1].y - corner[0].y);\n        if (shapeWidth === 0 || shapeHeight === 0) {\n            logger.m.worker('mouseup shape is zero size');\n            console.error('mouseup shape is zero size');\n            return;\n        }\n        logger.m.worker('mouseup going to anti shape', user.account);\n        // 需要获取看得见的数据，才能使其他 canvas 上 globalCompositeOperation 有效应用\n        const imgData = userCtx.getImageData(corner[0].x, corner[0].y, shapeWidth, shapeHeight);\n        if (tool === 'erase') {\n            logger.image(userCtx.canvas.toDataURL(), 'erase');\n        }\n        // 过滤锯齿\n        if (this.opt.clearTransparentPix && (!['text'].includes(tool) || antiAlais)) {\n            this.clearTransparentPix(imgData.data);\n        }\n        shapeCtx.canvas.width = shapeWidth;\n        shapeCtx.canvas.height = shapeHeight;\n        // 每次重新改变canvas大小 ，都要重新设置这个属性\n        CanvasHelper.setpixelated(shapeCtx);\n        CanvasHelper.setLineStyle(shapeCtx);\n        shapeCtx.putImageData(imgData, 0, 0); // 这里 workCtx 的数据截取了有效部分，存到了 shape ，可以做 undo redo\n        displayCtx.imageSmoothingEnabled = false;\n        if (tool !== 'free') {\n            displayCtx.drawImage(shapeCtx.canvas, Math.round(corner[0].x), Math.round(corner[0].y)); // displayCtx 一直在实时绘制\n        }\n        CanvasHelper.clearCtx(userCtx);\n    }\n    /**\n     * 渲染激光笔，绘制单个，没有任何轨迹\n     * @param {Object} user 激光笔的用户\n     * @param {Point} center 激光笔经过的点圆心\n     * @param {Number} size 激光笔直径\n     * @param {String} color 激光笔颜色\n     * @private\n     */\n    renderFlag() {\n        const { maskCtx } = this.container;\n        if (maskCtx) {\n            // 清空图层\n            CanvasHelper.clearCtx(maskCtx);\n            const { ownerCanvasWidth: width, ownerCanvasHeight: height } = this.container;\n            // 将每个用户的激光笔绘制上去\n            this.users.all.forEach(user => {\n                const { mode, tool, color, flagPos } = user;\n                if (mode == 'draw' && tool === 'flag' && width && height) {\n                    let pos = Point.fromString(flagPos);\n                    let posCoord = this.getOwnerCoord(pos);\n                    console.log('render flag', pos, flagPos, user.account);\n                    CanvasHelper.circle(maskCtx, posCoord, 5, false, '#ff0000');\n                    CanvasHelper.circle(maskCtx, posCoord, 4, true, '#ff0000'); //默认的激光笔颜色为红色\n                }\n            });\n        }\n    }\n    getCanvasCoord(offset) {\n        const { canvasHeight: height, canvasWidth: width } = this.container;\n        if (height && width) {\n            return new Coord(offset.x * width, offset.y * height);\n        }\n        return new Coord(0, 0);\n    }\n    getOwnerCoord(offset) {\n        const { ownerCanvasHeight: height, ownerCanvasWidth: width } = this.container;\n        if (height && width) {\n            return new Coord(offset.x * width, offset.y * height);\n        }\n        return new Coord(0, 0);\n    }\n    /**\n     * 撤销绘制，本地撤销模型，即只能撤销自己的绘制\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    undo(account = this.account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        if (user.shapes.length === 0)\n            return;\n        let length = user.undo(); // 其他操作通过事件冒泡到ContainerManager去处理了\n        this.emitAction({ account, action: new RevokeAction() });\n        return length;\n    }\n    /**\n     * 反撤销绘制，取消本地撤销模型，即只能取消撤销自己的绘制\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    redo(account = this.account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        if (user.recycle.length === 0)\n            return;\n        let length = user.redo();\n        this.emitAction({ account, action: new RedoAction() });\n        return length;\n    }\n    /**\n     * 绘制图片\n     * @param {string} url 图片地址\n     * @private\n     */\n    image(opt, account = this.account) {\n        const { url = '', docId = '', currentPage = 0, pageCount = 0, type = 'clear', urlStr = '', h5Cmd = '' } = opt;\n        if (!url)\n            return;\n        if (this.container && this.container.displayCtx) {\n            const canvas = this.container.displayCtx.canvas;\n            const img = new Image();\n            const tmpUrl = this.opt.backgroundUrl === undefined\n                ? LOADING_IMAGE\n                : this.opt.backgroundUrl;\n            img.onload = () => {\n                this.container.container.classList.remove('canvas-loading');\n                canvas.style.backgroundSize = 'contain';\n                canvas.style.backgroundImage = `url(${url})`;\n            };\n            this.container.container.classList.add('canvas-loading');\n            canvas.style.backgroundSize = 'auto';\n            canvas.style.backgroundImage = `url(${tmpUrl})`;\n            img.src = url;\n        }\n        this.emitAction({\n            account: account,\n            action: new FileAction({\n                url,\n                docId,\n                currentPage,\n                pageCount,\n                type,\n                urlStr,\n                h5Cmd\n            })\n        });\n    }\n    // 取消背景绘制\n    clearImage(account = this.account) {\n        if (this.container.displayCtx) {\n            this.container.displayCtx.canvas.style.backgroundImage = '';\n        }\n        this.emitAction({\n            account: account,\n            action: new FileAction({\n                docId: '',\n                type: 'clear',\n            })\n        });\n    }\n    /**\n     * 清除画板或者清除某个用户的绘制\n     * @param {string} target 需要清除操作的用户ID\n     * @param {string} account 进行操作的用户的ID\n     * @public\n     */\n    clear(target, account = this.account, opt) {\n        const force = opt && opt.force; // 是否强力清除，包括用户正在绘制的内容\n        const quiet = opt && opt.quiet; // 是否静默清除，不抛出事件\n        if (this.container.displayCtx) {\n            CanvasHelper.clearCtx(this.container.displayCtx);\n            for (const user of this.users.all) {\n                if (user.isMouseDown && !force) {\n                    // 防止在clear时 擦除了其他用户正在绘制的笔记，\n                    logger.m.worker('user.isMouseDown = true');\n                    this.container.displayCtx.drawImage(user.ctx.canvas, 0, 0);\n                }\n                else {\n                    user.ctx && CanvasHelper.clearCtx(user.ctx);\n                }\n            }\n        }\n        let uidToRemove;\n        if (target) {\n            if (!Array.isArray(target)) {\n                target = [target];\n            }\n            if (target.length != 0) {\n                uidToRemove = target;\n            }\n        }\n        if (uidToRemove) {\n            uidToRemove.forEach(uid => {\n                const user = this.getUser(uid);\n                if (user) {\n                    // user.isMouseDown = false\n                    user.shapes.forEach(shape => {\n                        this.shapes.remove(shape);\n                    });\n                    user.clearShapes();\n                }\n            });\n            if (this.container.displayCtx) {\n                this.container.fullRender();\n            }\n        }\n        else {\n            // 清空全部\n            this.shapes.clear();\n            for (const user of this.users.all) {\n                user.clearShapes();\n                // user.isMouseDown = false\n            }\n        }\n        if (!quiet) {\n            this.emitAction({ account, action: new ClearAction(uidToRemove) });\n        }\n    }\n    /**\n     * 收到指令后进行对应操作\n     * @param {string} account 用户ID\n     * @param {string} op 操作\n     * @param {any} [value] 操作值\n     * @public\n     */\n    act(anyAction) {\n        logger.m.worker('act->', anyAction);\n        let { account, action: actionData } = anyAction;\n        if (account && !this.users.hasUser(account)) {\n            this.addUser(account);\n        }\n        const action = anyAction.action;\n        switch (action.TYPE) {\n            case WActions.START: {\n                this.mousedown(action, account);\n                // 鼠标点击\n                break;\n            }\n            case WActions.MOVE:\n            case WActions.LASER_PEN: {\n                // 激光笔\n                this.mousemove(action, account);\n                break;\n            }\n            case WActions.TEXT: {\n                this.renderText(action, account);\n                break;\n            }\n            case WActions.END: {\n                // 鼠标移上\n                this.mouseup(action, account);\n                break;\n            }\n            case WActions.LASER_PEN_END: {\n                this.clearFlag(account);\n                break;\n            }\n            case WActions.REDO: {\n                this.redo(account);\n                break;\n            }\n            case WActions.REVOKE: {\n                this.undo(account);\n                break;\n            }\n            case WActions.CLEAR: {\n                // this.clear((action as ClearAction).accounts, account);// 特殊处理，不在此处\n                break;\n            }\n            case WActions.CALIBRATE: {\n                this.calibrate(account, action);\n                break;\n            }\n            case WActions.SYNC_PREPARE_ACK:\n            case WActions.SERIAL: {\n                break;\n            }\n            case WActions.CLEAR_ACK:\n                // 再次清除对应用户的绘制内容\n                this.clear(account, account, { quiet: true, force: true });\n                break;\n            case WActions.SYNC_REQUEST:\n            case WActions.FILE:\n            case WActions.SYNC:\n            case WActions.SYNC_PREPARE:\n            case WActions.VERSION:\n                break;\n            default:\n                const fullCaseChecker = action;\n        }\n    }\n    /**\n     * 重新设置画布大小，等比例\n     * @param {number} width 画布宽度\n     * @public\n     */\n    resize() {\n        this.container.resize();\n    }\n    dispatchCalibrateAction(opt) {\n        this.emit('action', {\n            account: this.account,\n            action: new CalibrateAction(opt)\n        });\n    }\n    calibrate(account, action) {\n        if (account) {\n            // 更新容器的属性\n            const { ownerCanvasHeight, ownerCanvasWidth } = action;\n            if (ownerCanvasHeight && ownerCanvasWidth) {\n                console.warn('update owner canvas');\n                this.container.canvasRatio = ownerCanvasWidth / ownerCanvasHeight;\n                this.container.resize();\n                this.container.updateCanvasPropSize(ownerCanvasWidth, ownerCanvasHeight);\n            }\n            // 更新用户的属性\n            let userOptions = (CalibrateAction.USER_PROPS).reduce((obj, prop) => {\n                if (prop in action) {\n                    obj[prop] = action[prop];\n                }\n                return obj;\n            }, {});\n            let user = this.getUser(account);\n            if (user) {\n                user.update(userOptions);\n            }\n        }\n    }\n    /**\n     * 增加一个用户并初始化其canvas，已存在则直接返回\n     * @param {String | Number} account 用户ID\n     * @return {User} 用户\n     */\n    addUser(account) {\n        logger.m.worker('addUser', account);\n        if (this.users.hasUser(account)) {\n            return this.getUser(account);\n        }\n        const user = this.users.addUser(account);\n        this.container.addUser(this.account, user);\n        // 依据用户的UID进行排序，制作\n        this.users.all.sort((a, b) => a.account > b.account ? 1 : -1).forEach((user, index) => {\n            user.ctx.canvas.style.zIndex = '' + (10 + index);\n        });\n        logger.m.worker('create User ->', user);\n        return user;\n    }\n    getUser(account) {\n        if (account == this.account && this.localUser) {\n            return this.localUser;\n        }\n        else {\n            return this.users.getUser(account);\n        }\n    }\n    /**\n     * 移除一个用户, 删除其canvas\n     * @param {String | Number} account 用户ID\n     * @return {User} 用户\n     */\n    removeUser(account) {\n        account && this.clearFlag(account) && this._removeUser(account);\n    }\n    _removeUser(account) {\n        const user = this.getUser(account);\n        if (!user)\n            return;\n        try {\n            this.container.container.removeChild(user.ctx.canvas);\n        }\n        catch (e) { }\n        this.users.remove(account);\n    }\n    /**\n     * 销毁白板, 移除所有用户\n     * 实际上只移除了事件监听，并将内存占用较大的对象清空，等待垃圾回收\n     * @private\n     */\n    destroy() {\n        this.container.inputDom.removeEventListener('blur', this.handleInputDomBlur);\n        this.users.destroy();\n        this.switchEventListener(false);\n        this.users.uids.map(key => {\n            this._removeUser(key);\n        });\n        this.shapes.destroy();\n        this.container.destroy();\n        this.removeAllListeners();\n    }\n    getSnapshot() {\n        const { transh, visibles } = this.shapes;\n        const { canvasWidth, canvasHeight, ownerCanvasHeight, ownerCanvasWidth } = this.container;\n        let shapeSnapshotOption = { width: canvasWidth, height: canvasHeight };\n        const users = this.users.toSnapshot(shapeSnapshotOption);\n        return {\n            users: users,\n            ownerWidth: ownerCanvasWidth,\n            ownerHeight: ownerCanvasHeight,\n            canvasWidth: canvasWidth,\n            canvasHeight: canvasHeight,\n            canvasRatio: canvasWidth / (canvasHeight === 0 ? 0.000001 : canvasHeight),\n            transhShapes: transh.map(shape => shape.toSnapshot(shapeSnapshotOption)),\n            shapes: visibles.map(shape => shape.toSnapshot(shapeSnapshotOption))\n        };\n    }\n    restoreShape(shape, isInTrash) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { id, start, user: account, color, fontsize, size, mode, actions: actionStr, optimized, imageData, corner, keyDown, } = shape;\n            let tool = shape.tool;\n            let actions = unpackBulk(actionStr);\n            let actionsLenth = actions.length;\n            // 这个图形的所有动作\n            // 保证用户存在\n            let user = this.users.getUser(account);\n            if (!user) {\n                user = this.addUser(account);\n            }\n            const { ownerCanvasWidth: width, ownerCanvasHeight: height } = this.container;\n            let restoreShape = new Shape({\n                user, mode, tool, size, color, fontsize,\n                start: Point.fromString(start),\n                actions: actions,\n                keyDown: keyDown\n            });\n            restoreShape.id = id;\n            restoreShape.optimized = optimized;\n            let [topLeft, bottomRight] = corner.map(str => Point.fromString(str).toCoord(width, height));\n            const coordinateOffset = topLeft; // 作为坐标的偏移点\n            // 原来绘图，参考的坐标系是画板那么大，action里的坐标也是那么大， \n            // 为了更快的恢复出shape，我们只在图层那么小的区域里绘图，所以原来的坐标需要减去图形的偏移坐标。\n            let { width: shapeWidth, height: shapeHeight } = Coord.areaSize(topLeft, bottomRight);\n            let shapeCtx = restoreShape.ctx;\n            CanvasHelper.setCanvasPropSize(shapeCtx, { width: shapeWidth, height: shapeHeight });\n            restoreShape.corner = [topLeft, bottomRight];\n            applyState(shapeCtx, { ctx: shapeCtx, color, size, tool });\n            console.assert(shapeCtx.lineWidth === size, 'shape line width is not the same', size, shapeCtx.lineWidth);\n            if (isInTrash) {\n                user.recycle.push(restoreShape);\n                // 这里只是把数据推进去了，计算可回退步骤和当前已回退步骤需要自己来做\n            }\n            else {\n                user.shapes.push(restoreShape);\n                this.shapes.push(restoreShape);\n            }\n            const getStartAndEnd = (offset) => {\n                let startAction = actions[0];\n                let endAction = actions[actionsLenth - 1];\n                let startOffset = this.getOwnerCoord(startAction);\n                let endOffset = this.getOwnerCoord(endAction);\n                if (offset) {\n                    return [startOffset.minus(offset), endOffset.minus(offset)];\n                }\n                return [startOffset, endOffset];\n            };\n            let needClearPix = true;\n            switch (tool) {\n                case 'free':\n                case 'erase': {\n                    // 这个是自由绘制,actions是持续的\n                    if (actionsLenth >= 2) {\n                        // 必须大于2\n                        let [startOffset, endOffset] = getStartAndEnd(coordinateOffset);\n                        // 初始化\n                        let start = startOffset.clone();\n                        let oldMid = startOffset.clone();\n                        let end = startOffset.clone();\n                        if (actionsLenth === 2) {\n                            CanvasHelper.line(shapeCtx, start, end, color);\n                        }\n                        else {\n                            // 循环\n                            for (let i = 1, len = actionsLenth - 1; i < len; i++) {\n                                // 跳过第一个和最后一个点\n                                let offset = this.getOwnerCoord(actions[i]).minus(coordinateOffset);\n                                const mid = Coord.middle(end, offset);\n                                const prevOldMid = oldMid.clone();\n                                const prevEnd = end.clone();\n                                oldMid.copy(mid);\n                                end.copy(offset);\n                                CanvasHelper.free(shapeCtx, prevOldMid, prevEnd, mid, color, size);\n                            }\n                            {\n                                // 最后一划\n                                const mid = Coord.middle(end, endOffset);\n                                const prevOldMid = oldMid.clone();\n                                const prevEnd = end.clone();\n                                CanvasHelper.free(shapeCtx, prevOldMid, mid, endOffset, color, size);\n                            }\n                            // 终止\n                        }\n                    }\n                    break;\n                }\n                case 'line': {\n                    let [start, end] = getStartAndEnd(coordinateOffset);\n                    CanvasHelper.line(shapeCtx, start, end, color);\n                    break;\n                }\n                case 'circle':\n                case 'solidCircle':\n                    {\n                        let [start, end] = getStartAndEnd(coordinateOffset);\n                        const { radius } = Shape.calculateRadius(tool, start, end);\n                        CanvasHelper.circle(shapeCtx, start, radius, tool === 'solidCircle', color);\n                        break;\n                    }\n                case 'ellipse':\n                case 'solidEllipse':\n                    {\n                        let [start, end] = getStartAndEnd(coordinateOffset);\n                        const { radius, xRadius, yRadius } = Shape.calculateRadius(tool, start, end);\n                        CanvasHelper.ellipse(shapeCtx, start, xRadius, yRadius, tool === 'solidEllipse', color);\n                        break;\n                    }\n                case 'rect':\n                case 'solidRect':\n                    {\n                        let [start, end] = getStartAndEnd(coordinateOffset);\n                        let xOffset = end.x - start.x;\n                        let yOffset = end.y - start.y;\n                        let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                        if (keyDown.shiftKey) {\n                            xOffset = sign(xOffset) * offset;\n                            yOffset = sign(yOffset) * offset;\n                        }\n                        CanvasHelper.rect(shapeCtx, start, xOffset, yOffset, tool === 'solidRect', color);\n                        break;\n                    }\n                case 'roundRect':\n                case 'solidRoundRect': {\n                    //这种是两点的图形，可以直接绘制\n                    let [start, end] = getStartAndEnd(coordinateOffset);\n                    let xOffset = end.x - start.x;\n                    let yOffset = end.y - start.y;\n                    let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                    if (keyDown.shiftKey) {\n                        xOffset = sign(xOffset) * offset;\n                        yOffset = sign(yOffset) * offset;\n                    }\n                    let cornerRadius = offset < size ? 2 : offset * 0.1;\n                    CanvasHelper.roundRect(shapeCtx, start, xOffset, yOffset, cornerRadius, tool === 'solidRoundRect', color);\n                    break;\n                }\n                case 'text': {\n                    let textAction = actions[0];\n                    let inputDomValue = textAction.text;\n                    let end = this.getOwnerCoord(textAction).minus(coordinateOffset);\n                    CanvasHelper.text(shapeCtx, end, inputDomValue, fontsize, true, color);\n                    needClearPix = false;\n                    break;\n                }\n                case 'fill': {\n                    // 这个是填充图层,填充图层传输的是base64的png图片\n                    let width = Math.abs(topLeft.x - bottomRight.x);\n                    let height = Math.abs(topLeft.y - bottomRight.y);\n                    yield new Promise((resolve) => {\n                        let image = new Image();\n                        image.src = imageData;\n                        // image.style.cssText = 'object-fit:///'\n                        image.onerror = () => resolve();\n                        image.onload = () => {\n                            console.log('fill');\n                            shapeCtx.drawImage(image, 0, 0, width, height);\n                            resolve();\n                        };\n                    });\n                    needClearPix = false;\n                    break;\n                }\n                case \"flag\": {\n                    // 不做任何操作\n                    needClearPix = false;\n                    break;\n                }\n                default: {\n                    needClearPix = false;\n                    const fullCaseChecker = tool;\n                    console.warn('尝试恢复未知的图形');\n                }\n            }\n            if (this.opt.clearTransparentPix && needClearPix) {\n                try {\n                    let imgData = shapeCtx.getImageData(0, 0, shapeWidth, shapeHeight);\n                    this.clearTransparentPix(imgData.data);\n                    shapeCtx.putImageData(imgData, shapeWidth, shapeHeight);\n                }\n                catch (err) {\n                    console.error(err);\n                }\n            }\n        });\n    }\n    mesure(points) {\n        const styleId = document.getElementById('worker-mesure-anim');\n        if (!styleId) {\n            document.head.insertAdjacentHTML('beforeend', `<style>@keyframes xxx-xxx{from{background:red;}to{background:green}}</style>`);\n        }\n        if (!Array.isArray(points)) {\n            points = [points];\n        }\n        points.forEach(point => {\n            this.container.container.insertAdjacentHTML('afterbegin', `<div style=\"z-index:2222;display:inline-block;position:absolute;background:red;top:${point.x}px;left:${point.y}px;width:2px;height:2px;animation:xxx-xxx 1s infinite\"></div>`);\n        });\n    }\n}\n","import * as CanvasHelper from '../DrawWorker/CanvasHelper';\nimport logger from '../../debug';\nimport { sign } from '../utils';\nclass Shape {\n    constructor({ user, mode, tool, size, color, start, actions, fontsize, keyDown }) {\n        let id = performance && performance.timing && performance.timing.navigationStart + performance.now();\n        this.id = id || Date.now();\n        this.user = user;\n        this.visible = true;\n        // 在画完之后把绘制轨迹截取为图片保存在Canvas中\n        this.ctx = document.createElement('canvas').getContext('2d');\n        const shapeCanvas = this.ctx.canvas;\n        const userCanvas = user.ctx.canvas;\n        shapeCanvas.style.width = userCanvas.style.width;\n        shapeCanvas.style.height = userCanvas.style.height;\n        this.ctx.lineWidth = user.ctx.lineWidth;\n        this.coordWidth = userCanvas.width;\n        this.coordHeight = userCanvas.height;\n        CanvasHelper.setCanvasPropSize(this.ctx, { width: this.coordWidth, height: this.coordHeight });\n        this.tool = tool;\n        this.mode = mode;\n        this.color = color;\n        this.size = size;\n        this.fontsize = fontsize;\n        // 缓存创建这个图层所使用的action，同步数据时，将会把创建这个图层使用的action给发送出去\n        if (Array.isArray(actions)) {\n            this.actions = actions;\n        }\n        else if (typeof actions === 'undefined') {\n            console.warn('action undefined! create a shape');\n            this.actions = [];\n        }\n        else {\n            this.actions = [actions];\n        }\n        this.keyDown = keyDown;\n        // 填充类型，保存一份填充点击的位置\n        this.start = start.toCoord(this.coordWidth, this.coordHeight);\n        // 绘制内容保存为Canvas上所处位置\n        this.corner = [this.start.clone(), this.start.clone()];\n        this.transform = [];\n        this.path = [];\n        this.zIndex = 1;\n        this.detail = Shape.calculateRadius(this.tool, this.start, this.start);\n    }\n    static calculateRadius(tool, start, end) {\n        const width = Math.abs(end.x - start.x);\n        const height = Math.abs(end.y - start.y);\n        let radius;\n        let xRadius;\n        let yRadius;\n        switch (tool) {\n            case 'circle':\n            case 'solidCircle':\n            case 'ellipse':\n            case 'solidEllipse':\n                {\n                    xRadius = width;\n                    yRadius = height;\n                    radius = xRadius > yRadius ? xRadius : yRadius;\n                    break;\n                }\n        }\n        return {\n            xRadius,\n            yRadius,\n            radius,\n            width,\n            height,\n        };\n    }\n    updateCorner(offset) {\n        const end = this.getCoord(offset);\n        const start = this.start;\n        const size = this.size;\n        const [topLeft, bottomRight] = this.corner;\n        const detail = Shape.calculateRadius(this.tool, start, end);\n        this.detail = detail;\n        const { xRadius, yRadius, radius, width, height, } = detail;\n        // const width = Math.abs(end.x - start.x);\n        // const height = Math.abs(end.y - start.y)\n        // let radius: number | undefined;\n        // let xRadius: number | undefined;\n        // let yRadius: number | undefined;\n        switch (this.tool) {\n            case 'solidCircle':\n            case 'circle': {\n                topLeft.x = start.x - radius - size;\n                topLeft.y = start.y - radius - size;\n                bottomRight.x = start.x + radius + size;\n                bottomRight.y = start.y + radius + size;\n                break;\n            }\n            case 'ellipse':\n            case 'solidEllipse': {\n                topLeft.x = start.x - xRadius - size;\n                topLeft.y = start.y - yRadius - size;\n                bottomRight.x = start.x + xRadius + size;\n                bottomRight.y = start.y + yRadius + size;\n                break;\n            }\n            case 'rect':\n            case 'roundRect':\n            case 'solidRect':\n            case 'solidRoundRect':\n            case 'line': {\n                // 从起点开始，计算其他的四个角角\n                topLeft.copy(start.clone().topLeft(end));\n                bottomRight.copy(start.clone().bottomRight(end));\n                break;\n            }\n            case 'text':\n            case 'free':\n            case \"erase\":\n                {\n                    // 划过的地方都需要添加到内容区域\n                    topLeft.topLeft(end);\n                    bottomRight.bottomRight(end);\n                    break;\n                }\n            case 'flag': // 这个没有corner和shape\n            case 'fill': // 填充的corner重新计算\n                // case 'select':\n                break;\n            default:\n                const fullCaseChecker = this.tool;\n        }\n        // 因为stroke有size ，所以会超出边界，所以需要将corner的大小拓展size的大小\n        if (this.tool !== 'fill' &&\n            this.tool !== 'text' &&\n            this.tool !== 'free' &&\n            this.tool !== 'erase') {\n            topLeft.x -= size;\n            topLeft.y -= size;\n            bottomRight.x += size;\n            bottomRight.y += size;\n        }\n        return detail;\n    }\n    expandCorner(size = this.size) {\n        const [topLeft, bottomRight] = this.corner;\n        topLeft.x -= size;\n        topLeft.y -= size;\n        bottomRight.x += size;\n        bottomRight.y += size;\n    }\n    destroy() {\n        logger.shape('shape delete ctx', this.user, this.ctx, this.actions);\n        // console.error(new Error('delete shapes'))\n        // delete this.user;\n        // delete this.ctx;\n        // delete this.actions;\n    }\n    toSnapshot({ width, height }) {\n        const { id, mode, tool, size, fontsize, color, start, actions, keyDown, } = this;\n        if (tool === 'fill') {\n            return {\n                id,\n                user: this.user.account,\n                mode, tool, size, fontsize, color,\n                start: start.toPoint(width, height).toString(),\n                optimized: true,\n                imageData: this.ctx.canvas.toDataURL(),\n                keyDown,\n                corner: this.corner.map(x => x.toPoint(width, height).toString()),\n                actions: actions\n                    .filter(x => x)\n                    .map(action => action.toString())\n                    .join(';') + ';'\n            };\n        }\n        else {\n            return {\n                id,\n                user: this.user.account,\n                mode, tool, size, fontsize, color,\n                start: start.toPoint(width, height).toString(),\n                optimized: false,\n                imageData: '',\n                corner: this.corner.map(x => x.toPoint(width, height).toString()),\n                keyDown,\n                actions: actions\n                    .filter(x => x)\n                    .map(action => action.toString())\n                    .join(';') + ';'\n            };\n        }\n    }\n    draw(displayCtx) {\n        let ownerCoord = this.user.end.toCoord(this.coordWidth, this.coordHeight);\n        switch (this.tool) {\n            case 'fill': {\n                CanvasHelper.fill(displayCtx, ownerCoord, this.color, this);\n                break;\n            }\n            case 'erase':\n            case 'free': {\n                CanvasHelper.free(displayCtx, this.getCoord(this.user.prevOldMid), this.getCoord(this.user.prevEnd), this.getCoord(this.user.oldMid), this.color, this.size);\n                break;\n            }\n            case 'line': {\n                CanvasHelper.line(displayCtx, this.getCoord(this.user.start), this.getCoord(this.user.end), this.color);\n                break;\n            }\n            case 'rect':\n            case 'solidRect': {\n                let endCoord = this.getCoord(this.user.end);\n                let startCoord = this.getCoord(this.user.start);\n                let xOffset = endCoord.x - startCoord.x;\n                let yOffset = endCoord.y - startCoord.y;\n                let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                if (this.user.keyDown.shiftKey) {\n                    xOffset = sign(xOffset) * offset;\n                    yOffset = sign(yOffset) * offset;\n                }\n                CanvasHelper.rect(displayCtx, startCoord, xOffset, yOffset, this.tool === 'solidRect', this.color);\n                break;\n            }\n            case 'roundRect':\n            case 'solidRoundRect': {\n                let endCoord = this.getCoord(this.user.end);\n                let startCoord = this.getCoord(this.user.start);\n                let xOffset = endCoord.x - startCoord.x;\n                let yOffset = endCoord.y - startCoord.y;\n                let offset = Math.min(Math.abs(xOffset), Math.abs(yOffset));\n                const radius = offset < this.size ? 2 : offset * 0.1;\n                if (this.user.keyDown.shiftKey) {\n                    xOffset = sign(xOffset) * offset;\n                    yOffset = sign(yOffset) * offset;\n                }\n                CanvasHelper.roundRect(displayCtx, startCoord, xOffset, yOffset, radius, this.tool === 'solidRoundRect', this.color);\n                break;\n            }\n            case 'circle':\n            case 'solidCircle': {\n                let { radius } = this.detail;\n                let startCoord = this.getCoord(this.user.start);\n                CanvasHelper.circle(displayCtx, startCoord, radius, this.tool === 'solidCircle', this.color);\n                break;\n            }\n            case 'ellipse':\n            case 'solidEllipse': {\n                let startCoord = this.getCoord(this.user.start);\n                const { xRadius, yRadius } = this.detail;\n                CanvasHelper.ellipse(displayCtx, startCoord, xRadius, yRadius, this.tool === 'solidEllipse', this.color);\n                break;\n            }\n        }\n    }\n    freeMove(displayCtx) {\n        CanvasHelper.free(displayCtx, this.getCoord(this.user.prevOldMid), this.getCoord(this.user.prevEnd), this.getCoord(this.user.oldMid), this.color, this.size);\n    }\n    freeEnd(displayCtx) {\n        CanvasHelper.free(displayCtx, this.getCoord(this.user.prevOldMid), this.getCoord(this.user.oldMid), this.getCoord(this.user.end), this.color, this.size);\n    }\n    getCoord(offset) {\n        return offset.toCoord(this.coordWidth, this.coordHeight);\n    }\n}\nexport default Shape;\n","import * as CanvasHelper from '../DrawWorker/CanvasHelper';\nimport Point from './Point';\nimport { EventEmitter } from 'eventemitter3';\nimport logger from '../../debug';\nimport { CalibrateAction } from '../Actions';\nimport globalHub from './GlobalHub';\nclass User extends EventEmitter {\n    constructor(UID, maxUserHistory) {\n        super();\n        this.undoCount = 0; // 指示测销或者重做了多少次\n        this.account = UID;\n        // 默认为自由绘图模式\n        //zhongkai: 这个感叹号是语法错误吧？？。另外，每个用户创建一个画布是否有必要？\n        this.ctx = document.createElement('canvas').getContext('2d');\n        // this.ctx.canvas.style.transform = 'translate3d(0,0,0)'\n        this.ctx.canvas.className = 'wb_-_-' + UID;\n        CanvasHelper.setpixelated(this.ctx);\n        CanvasHelper.setLineStyle(this.ctx);\n        this.shapes = []; // 保存用户所做的可视操作的index\n        this.recycle = [];\n        this.mode = 'draw'; // 依据鼠标的状态划分状态\n        this.tool = 'flag';\n        this.flagPos = new Point(99999, 99999).toString();\n        this.size = 4;\n        this.color = '#000000';\n        this.fontsize = 24;\n        this.isMouseDown = false; // 鼠标未按下\n        this.start = new Point(0, 0);\n        this.oldMid = new Point(0, 0);\n        this.prevOldMid = new Point(0, 0);\n        this.end = new Point(0, 0);\n        this.prevEnd = new Point(0, 0);\n        // 只有null，才会在JSON格式化时发送出去\n        this.keyDown = {\n            altKey: false,\n            ctrlKey: false,\n            shiftKey: false,\n            which: -1,\n        }; // 记录当前按下的按键情况\n        // local undo/redo model\n        globalHub.emit('userUpdate', this.account, {\n            tool: this.tool,\n            size: this.size,\n            color: this.color,\n            fontsize: this.fontsize,\n            mode: this.mode,\n            keyDown: this.keyDown,\n        });\n        // private data\n        this.maxUserHistory = maxUserHistory;\n        this._resetCalibrate = this.getCalibrateAction();\n    }\n    // isFlag?: boolean;// TODO\n    get isFlag() {\n        return this.tool === 'flag';\n    }\n    update(opt) {\n        User.PROPS.forEach((key) => {\n            if (key in opt) {\n                this[key] = opt[key];\n            }\n        });\n        this.emit('update', this.account, opt);\n        globalHub.emit('userUpdate', this.account, opt);\n        logger.user('update user ', this, 'with ', opt);\n        // Object.assign(this, opt);\n    }\n    pushShape(shape) {\n        if (this.recycle.length) {\n            this.recycle.forEach(shape => shape.destroy());\n            this.recycle.length = 0;\n        }\n        this.undoCount = 0; // 指示说，当前测销或者重做向量为0了\n        this.shapes.push(shape);\n        this.configActiveShape();\n        // 用户的shapes改变了\n        this.emitUserShape();\n        return shape;\n    }\n    configActiveShape() {\n        console.log('config active shape ');\n        this.activeShape = this.shapes[this.shapes.length - 1];\n    }\n    undo() {\n        if (this.undoCount >= this.maxUserHistory) {\n            console.warn('reach maxUserHistory! abort undo');\n            return this.shapes.length;\n        }\n        this.undoCount++;\n        let shape = this.shapes.pop();\n        if (shape) {\n            this.recycle.push(shape);\n            this.configActiveShape();\n            logger.log('undo:', this);\n            this.emit('undo', this);\n            // 用户的shapes改变了\n            this.emitUserShape();\n        }\n        return this.shapes.length;\n    }\n    redo() {\n        if (this.undoCount === 0) {\n            // 说明没有undo过，所以没法重做\n            return this.recycle.length;\n        }\n        this.undoCount--;\n        let shape = this.recycle.pop();\n        if (shape) {\n            this.shapes.push(shape);\n            this.configActiveShape();\n            this.emit('redo', this);\n            // 用户的shapes改变了\n            this.emitUserShape();\n        }\n        return this.recycle.length;\n        ;\n    }\n    // 同步其他端的参数\n    getCalibrateAction() {\n        const { mode, tool, size, color, fontsize, isMouseDown, keyDown, flagPos } = this;\n        return new CalibrateAction({\n            mode, tool, size, color, fontsize,\n            isMouseDown, flagPos, keyDown\n        });\n    }\n    clearShapes() {\n        logger.user('user reset:', this);\n        this.shapes.forEach(shape => shape.destroy());\n        this.shapes = [];\n        this.recycle = [];\n        this.undoCount = 0;\n        // 用户的shapes改变了\n        this.emitUserShape();\n    }\n    emitUserShape() {\n        let { undoCount } = this; // 撤销或者重做的向量步数\n        let redoLength = this.recycle.length; // 当前可以前进的步数\n        let undoLength = this.shapes.length; // 当前可以减去的步数\n        let avaliableUndoCount = this.maxUserHistory - undoCount;\n        if (undoLength < avaliableUndoCount) {\n            avaliableUndoCount = undoLength;\n        }\n        globalHub.emit('userShapes', this.account, avaliableUndoCount, this.recycle.length);\n    }\n    /**\n     * 这个接口是用于数据同步后还原之后，需要对undoCount进行一个计算\n     */\n    guessMyUndoCount() {\n        this.undoCount = this.recycle.length;\n    }\n    whenMouseDown(offset) {\n        this.prevOldMid = offset.clone();\n        this.prevEnd = offset.clone();\n        this.start = offset.clone();\n        this.oldMid = offset.clone();\n        this.end = offset.clone();\n    }\n    whenMouseMove(offset) {\n        this.prevOldMid = this.oldMid.clone();\n        this.prevEnd = this.end.clone();\n        this.oldMid = Point.middle(this.end, offset);\n        this.end = offset.clone();\n    }\n    whenMouseUp(offset) {\n        this.prevOldMid = this.oldMid.clone();\n        this.prevEnd = this.end.clone();\n        this.oldMid = Point.middle(this.end, offset);\n        this.end = offset.clone();\n    }\n    reset() {\n        this.update(this._resetCalibrate);\n        globalHub.emit('userUpdate', this.account, this._resetCalibrate);\n    }\n    destroy() {\n        if (this.shapes.length || this.recycle.length) {\n            this.clearShapes();\n        }\n        logger.user('delete user ctx:', this);\n        // delete this.ctx;\n    }\n}\nUser.PROPS = [\n    'mode',\n    'tool',\n    'size',\n    'color',\n    'fontsize',\n    'isMouseDown',\n    'flagPos',\n    'keyDown',\n];\nexport default User;\n","import { EventEmitter } from \"eventemitter3\";\nimport { UserManager } from \"./UserManager\";\nimport * as CanvasHelper from './CanvasHelper';\nimport globalHub from \"../Model/GlobalHub\";\nclass ShapesManager extends EventEmitter {\n    constructor() {\n        super();\n        this.onUndo = (user) => {\n            let shape = user.recycle[user.recycle.length - 1];\n            this.remove(shape);\n            this.emit('undo', user);\n        };\n        this.onRedo = (user) => {\n            let shape = user.shapes[user.shapes.length - 1];\n            this.push(shape);\n            this.emit('redo', user);\n        };\n        this.visibles = []; // 存放所有相关的\n        this.transh = [];\n    }\n    push(shape) {\n        this.visibles.push(shape);\n        this.visibles.sort((a, b) => a.id - b.id);\n        // 全局的shapes改变了\n        globalHub.emit('globalShapes', this.visibles.length);\n    }\n    remove(shape) {\n        let index = this.visibles.indexOf(shape);\n        if (~index) {\n            this.visibles.splice(index, 1);\n            // 全局的shapes改变了\n            globalHub.emit('globalShapes', this.visibles.length);\n        }\n    }\n    wrap(another) {\n        if (another instanceof UserManager) {\n            this.clearListener(); // 清除之前的数据\n            this._usernameger = another;\n            this._usernameger.on('undo', this.onUndo);\n            this._usernameger.on('redo', this.onRedo);\n        }\n    }\n    clear() {\n        this.visibles.forEach(shape => {\n            shape.destroy();\n        });\n        this.visibles.length = 0;\n        globalHub.emit('globalShapes', this.visibles.length);\n    }\n    destroy() {\n        // TODO 清空一些数据\n        this.clearListener();\n    }\n    clearListener() {\n        if (this._usernameger) {\n            this._usernameger.removeAllListeners();\n            delete this._usernameger;\n        }\n    }\n    resizeCanvas(config) {\n        const { widthScale, heightScale } = config;\n        this.visibles.forEach(shape => {\n            let { width, height } = shape.ctx.canvas;\n            let newWidth = width * widthScale;\n            let newHeight = height * heightScale;\n            CanvasHelper.setCanvasPropSize(shape.ctx, {\n                height: newHeight, width: newWidth\n            });\n            // CanvasHelper.applyCanvasLayout(shape.ctx.canvas, config)\n            // 这里的corner计算可能有问题。如果不按照相同的比例来缩放图形的话\n            shape.corner[0].x *= widthScale;\n            shape.corner[0].y *= heightScale;\n            shape.corner[1].x *= widthScale;\n            shape.corner[1].y *= heightScale;\n        });\n    }\n}\nexport default ShapesManager;\n","import { EventEmitter } from \"eventemitter3\";\nimport * as CanvasHelper from './CanvasHelper';\nimport logger from '../../debug';\nexport default class ContainerManager extends EventEmitter {\n    constructor(container, opt) {\n        super();\n        this.paddingTop = 0; //  这个是画布距离容器顶部的距离\n        this.paddingLeft = 0; // 这个是画布距离容器左边的距离\n        this.canvasRatio = null;\n        // 调整窗口大小后，需要动态调整 canvas 大小，目前 width 为准等比例缩放\n        this.onResize = () => {\n            if (!this.container) {\n                return;\n            }\n            if (this.onResize.waiting) {\n                return;\n            }\n            else {\n                this.onResize.waiting = true;\n                setTimeout(() => {\n                    this.onResize.waiting = false;\n                    this.resize();\n                }, 300);\n            }\n        };\n        /**\n         * 重新设置画布大小，等比例\n         * @param {number} width 画布宽度\n         * @public\n         */\n        this.resize = () => {\n            const width = parseInt('' + this.container.clientWidth);\n            if (isNaN(width) || width <= 0)\n                throw new Error('白板宽度应是大于0的数字');\n            const height = parseInt('' + this.container.clientHeight);\n            if (isNaN(height) || height <= 0)\n                throw new Error('白板高度应是大于0的数字');\n            if (width === 0 || height === 0) {\n                return;\n            }\n            this.containerWidth = width;\n            this.containerHeight = height;\n            if (this.canvasRatio === null) {\n                this.calcCanvasLayout(width / height);\n            }\n            else {\n                this.calcCanvasLayout();\n            }\n            this.updateCanvasStyleSize({\n                // ownerCanvasHeight: ownerCanvasHeight!, ownerCanvasWidth: ownerCanvasWidth!,\n                paddingLeft: this.paddingLeft, paddingTop: this.paddingTop,\n                canvasWidth: this.canvasWidth, canvasHeight: this.canvasHeight,\n            });\n            console.log('resize');\n            if (this.opt && this.opt.identity === 'owner') {\n                if (this.canvasWidth && this.canvasHeight) {\n                }\n                this.emit('ownerCanavasUpdate', this.canvasWidth, this.canvasHeight);\n                const { containerHeight: prevHeight, containerWidth: prevWidth, ownerCanvasHeight, ownerCanvasWidth } = this;\n                this.updateCanvasPropSize(this.canvasWidth, this.canvasHeight);\n            }\n        };\n        this.onUndo = () => {\n            if (this.displayCtx && this.shapes && this.users) {\n                this.fullRender();\n                for (let user of this.users.all) {\n                    if (user.isMouseDown) {\n                        // 防止在clear时 擦除了其他用户正在绘制的笔记，\n                        this.displayCtx.drawImage(user.ctx.canvas, 0, 0);\n                    }\n                }\n            }\n        };\n        this.onRedo = () => {\n            if (this.displayCtx && this.shapes && this.users) {\n                this.fullRender();\n                for (let user of this.users.all) {\n                    if (user.isMouseDown) {\n                        // 防止在clear时 擦除了其他用户正在绘制的笔记，\n                        this.displayCtx.drawImage(user.ctx.canvas, 0, 0);\n                    }\n                }\n            }\n        };\n        this.inputDom = buildInputDom(); // 输入文字的输入框\n        this.opt = opt;\n        this.inited = false;\n        if (!container)\n            return;\n        this.setContainer(container, opt, true);\n    }\n    wrap(shapesmanager, users) {\n        this.clearListener();\n        this.shapes = shapesmanager;\n        this.users = users;\n        this.shapes.on('undo', this.onUndo);\n        this.shapes.on('redo', this.onRedo);\n    }\n    clearListener() {\n        if (this.shapes) {\n            this.shapes.removeAllListeners();\n        }\n    }\n    // 动态设置container\n    setContainer(container, opt, init) {\n        logger.m.containermanager('setContainer', container, opt);\n        if (!(container instanceof HTMLElement)) {\n            throw new Error('画板容器不是HTMLElement实例');\n        }\n        if (this.container) {\n            this.container.removeEventListener('resize', this.onResize);\n            this.container.remove();\n        }\n        this.container = container;\n        container.style.position = 'relative';\n        if (!opt) {\n            if (this.opt) {\n                opt = this.opt;\n            }\n            else {\n                opt = {};\n            }\n        }\n        this.containerHeight = container.clientHeight;\n        this.containerWidth = container.clientWidth;\n        console.warn('canvas height!', opt, this.canvasRatio);\n        // 计算容器宽高比例\n        if (this.canvasRatio === null) {\n            if (opt.height && opt.width) {\n                //如果用户设置了宽高\n                this.canvasHeight = opt.height;\n                this.canvasWidth = opt.width;\n                this.updateCanvasPropSize(this.canvasWidth, this.canvasHeight);\n                this.canvasRatio = this.canvasWidth / this.canvasHeight;\n                // 目前使用的是长宽比去放大图像或者缩小图像\n            }\n            else {\n                this.canvasRatio = this.containerWidth / this.containerHeight;\n            }\n        }\n        let canvasRatio = this.canvasRatio;\n        if (canvasRatio === null) {\n            canvasRatio = this.containerWidth / this.containerHeight;\n        }\n        if (typeof canvasRatio === 'number') {\n            this.calcCanvasLayout(canvasRatio);\n        }\n        this.opt = Object.assign(this.opt, opt);\n        // 设置自己容器的大小\n        if (!this.inited) {\n            this.initEssential();\n        }\n        // 更新 canvas 外部表现的大小，由style属性控制\n        this.updateCanvasStyleSize({\n            // ownerCanvasHeight: ownerCanvasHeight!, ownerCanvasWidth: ownerCanvasWidth!,\n            paddingLeft: this.paddingLeft, paddingTop: this.paddingTop,\n            canvasWidth: this.canvasWidth, canvasHeight: this.canvasHeight,\n        });\n        // 如果是初始化，并且是老师端，需要更新 canvas 内部表现的大小，由width属性控制\n        if (init && this.opt.identity === 'owner') {\n            this.updateCanvasPropSize(this.canvasWidth, this.canvasHeight);\n        }\n        logger.m.containermanager('setContainer/appendChild', this.displayCanvas, this.inputDom);\n        container.appendChild(this.displayCanvas);\n        container.appendChild(this.maskCanvas);\n        container.appendChild(this.inputDom);\n        this.adjustSize = false;\n        window.addEventListener('resize', this.onResize);\n        window.addEventListener(\"orientationchange\", this.onResize, false);\n    }\n    // 计算容器和canvas的布局\n    calcCanvasLayout(ratio = this.canvasRatio) {\n        let containerRatio = this.containerWidth / this.containerHeight;\n        if (containerRatio > ratio) {\n            // 说明容器的宽度要比canvas的宽度要宽一些，应该使用容器的高度作为标准\n            this.canvasHeight = Math.floor(this.containerHeight || 0);\n            this.canvasWidth = Math.floor(this.canvasHeight * ratio);\n        }\n        else {\n            this.canvasWidth = Math.floor(this.containerWidth || 0);\n            this.canvasHeight = Math.floor(this.canvasWidth / ratio);\n        }\n        let heightGap = this.containerHeight - this.canvasHeight;\n        let widthGap = this.containerWidth - this.canvasWidth;\n        this.paddingTop = Math.floor(heightGap / 2);\n        this.paddingLeft = Math.floor(widthGap / 2);\n    }\n    // 初始化canvas环境\n    initEssential() {\n        if (typeof this.containerWidth !== 'number')\n            throw new Error('画板宽度不是数字');\n        if (typeof this.containerHeight !== 'number')\n            throw new Error('画板高度不是数字');\n        const displayCanvas = document.createElement('canvas');\n        this.displayCtx = displayCanvas.getContext('2d');\n        // CanvasHelper.setpixelated(this.displayCtx)\n        CanvasHelper.setLineStyle(this.displayCtx);\n        displayCanvas.setAttribute('data-id', 'displayCanvas');\n        const displayStyle = `\n    position: relative;\n    top: ${this.paddingTop}px;\n    left: ${this.paddingLeft}px;\n    box-sizing: content-box;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-color: #ffffff;\n    background-size: contain;\n    z-index: ${2};\n    `.trim().replace('\\n', '');\n        displayCanvas.style.cssText = displayStyle;\n        this.displayCanvas = displayCanvas;\n        const maskCanvas = document.createElement('canvas');\n        this.maskCtx = maskCanvas.getContext('2d');\n        CanvasHelper.setpixelated(this.maskCtx);\n        CanvasHelper.setLineStyle(this.maskCtx);\n        this.maskCtx.lineWidth = 1;\n        maskCanvas.setAttribute('data-id', 'maskCanvas');\n        const maskStyle = `\n    position: absolute;\n    top: ${this.paddingTop};\n    left: ${this.paddingLeft};\n    box-sizing: content-box;\n    transform: translate3d(0,0,0);\n    z-index: ${500};\n    `.trim().replace('\\n', '');\n        maskCanvas.style.cssText = maskStyle;\n        this.maskCanvas = maskCanvas;\n        this.inited = true;\n        logger.m.containermanager('initCanvas');\n        // 对于可能出现在构造函数里的事件，需要异步抛出，避免初始化时，监听函数还未绑定\n        setTimeout(() => {\n            this.emit('init-canvas');\n            if (this.opt && this.opt.identity === 'owner') {\n                this.emit('ownerCanavasUpdate', this.canvasWidth, this.canvasHeight);\n            }\n        });\n    }\n    /**\n     * 按比例重新变换画布大小\n     * @param {number} scale 变换比例\n     * @public\n     */\n    updateCanvasStyleSize(config) {\n        const { canvasWidth, canvasHeight } = config;\n        if (this.maskCtx && this.maskCanvas) {\n            CanvasHelper.setCavansStyleSize(this.maskCtx, canvasWidth, canvasHeight);\n            CanvasHelper.applyCanvasLayout(this.maskCanvas, config);\n        }\n        if (this.displayCtx && this.displayCanvas) {\n            CanvasHelper.setCavansStyleSize(this.displayCtx, config.canvasWidth, config.canvasHeight);\n            CanvasHelper.applyCanvasLayout(this.displayCanvas, config);\n        }\n        // if (this.shapes) {\n        //   this.shapes.resizeCanvas(config)\n        // }\n        if (this.users) {\n            for (const user of this.users.all) {\n                CanvasHelper.setCavansStyleSize(user.ctx, canvasWidth, canvasHeight);\n                CanvasHelper.applyCanvasLayout(user.ctx.canvas, config);\n            }\n        }\n    }\n    updateCanvasPropSize(width, height) {\n        const { ownerCanvasHeight: prevHeight, ownerCanvasWidth: prevWidth } = this;\n        this.ownerCanvasWidth = width || 300;\n        this.ownerCanvasHeight = height || 300;\n        let opt = { width: this.ownerCanvasWidth, height: this.ownerCanvasHeight };\n        if (this.maskCtx) {\n            CanvasHelper.setCanvasPropSize(this.maskCtx, opt);\n        }\n        if (this.displayCtx) {\n            CanvasHelper.setCanvasPropSize(this.displayCtx, opt);\n        }\n        if (this.users) {\n            for (const user of this.users.all) {\n                CanvasHelper.setCanvasPropSize(user.ctx, { width, height });\n            }\n        }\n        if (this.shapes) {\n            this.shapes.resizeCanvas({\n                widthScale: width / prevWidth, heightScale: height / prevHeight\n            });\n        }\n        // 需要fullrender一下\n        this.fullRender();\n    }\n    // add UserCanvas \n    addUser(currentAccount, user) {\n        const canvas = user.ctx.canvas;\n        const account = user.account;\n        const displayCanvas = this.displayCanvas;\n        // canvas.style.transform = 'translate3d(0,0,0)'\n        canvas.style.position = 'absolute';\n        canvas.style.boxSizing = 'content-box';\n        // canvas.style.transform = 'translate3d(0,0,0)'\n        canvas.style.top = this.paddingTop + 'px';\n        canvas.style.left = this.paddingLeft + 'px';\n        canvas.style.width = this.canvasWidth + 'px';\n        canvas.style.height = this.canvasHeight + 'px';\n        canvas.width = this.ownerCanvasWidth;\n        canvas.height = this.ownerCanvasHeight;\n        logger.m.containermanager('addUser', account, user);\n        if (account === currentAccount) {\n            canvas.style.cursor = 'not-allowed';\n        }\n        else {\n            canvas.style.cursor = 'crosshair';\n        }\n        this.container.appendChild(canvas);\n        CanvasHelper.setpixelated(user.ctx);\n        CanvasHelper.setLineStyle(user.ctx);\n    }\n    destroy() {\n        this.container.removeChild(this.maskCanvas);\n        this.container.removeChild(this.displayCtx.canvas);\n        this.removeAllListeners();\n        window.removeEventListener('resize', this.onResize);\n        window.removeEventListener(\"orientationchange\", this.onResize, false);\n    }\n    fullRender() {\n        if (this.displayCtx) {\n            let playCanvas = this.displayCtx.canvas;\n            CanvasHelper.clearCtx(this.displayCtx);\n            this.displayCtx.getImageData(0, 0, 1, 1); // 这里是为了让canvas重新渲染一下，Chrome，偶尔会有Canvas不更新的问题\n            // playCanvas.width = playCanvas.width;\n        }\n        if (this.shapes && this.displayCtx) {\n            const targetCtx = this.displayCtx;\n            const shapes = this.shapes.visibles;\n            // logger.image(targetCtx.canvas.toDataURL(), 'beforeRender, displayCtx')\n            targetCtx.save();\n            logger.log('displayCtx');\n            for (let i = 0, len = shapes.length; i < len; i++) {\n                let shape = shapes[i];\n                console.assert(typeof shape.ctx !== 'undefined', 'shape ctx is ubdefined', shape);\n                let skip = shape.ctx && (shape.ctx.canvas.width === 0 || shape.ctx.canvas.height === 0);\n                logger.m.containermanager('render shape:', shape, 'skip', skip);\n                if (skip) {\n                    continue;\n                }\n                applyState(targetCtx, shape);\n                // if (shape.mode === 'fill') return fill(ctx, shape.corner[0], shape.color,shape);\n                // -0.5是为了防止重绘时的抖动\n                // targetCtx.drawImage(shape.ctx.canvas, shape.corner[0].x - 0.5, shape.corner[0].y)\n                if (shape.tool === 'erase') {\n                    console.log(targetCtx.globalCompositeOperation);\n                }\n                targetCtx.drawImage(shape.ctx.canvas, shape.corner[0].x, shape.corner[0].y);\n            }\n            targetCtx.restore();\n        }\n        else {\n            logger.m.containermanager('no render', this.shapes, this.displayCtx);\n        }\n    }\n}\nfunction buildInputDom() {\n    let inputDom = document.createElement('input');\n    inputDom.type = 'text';\n    inputDom.autofocus = true;\n    inputDom.className = 'wb-canvas__input';\n    let style = inputDom.style;\n    style.position = 'absolute';\n    style.display = 'none';\n    style.padding = '0px';\n    style.zIndex = '999';\n    return inputDom;\n}\n/**\n * 不同用户的模式、笔大小、颜色都是不同的，在对displayCtx操作时先应用状态\n * @param {string} account 对应用户的ID\n * @param {number} size 笔大小\n * @param {string} color 颜色\n * @param {string} mode 模式\n * @private\n */\nexport function applyState(targetCtx, shapeOrUser) {\n    const { ctx, size, color, tool } = shapeOrUser;\n    // logger.log('applyState', ctx, size, color, tool);\n    if (targetCtx === undefined) {\n        console.warn('applyState上下文为空!');\n        return;\n    }\n    targetCtx.lineWidth = size;\n    targetCtx.strokeStyle = color;\n    targetCtx.fillStyle = color;\n    // 如果 erase 设置了 workCtx 为 destination-out 取到的img不能做正常 撤销 重做\n    if (tool === 'erase' && targetCtx !== ctx) {\n        let opreation = targetCtx.globalCompositeOperation;\n        if (opreation !== 'destination-out') {\n            targetCtx.globalCompositeOperation = 'destination-out'; // 在新图外显示已有图像。只有新图外的已有图像部分会被显示，新图像是透明的。\n        }\n    }\n    else {\n        targetCtx.globalCompositeOperation = 'source-over'; // 默认。在已有图上显示新图像。\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport WTrack from './WhiteboardTrack';\nimport { App } from '../../core';\nimport EventEmitter from 'eventemitter3';\n/**\n * 白板3.0\n */\nexport default class V3Track extends WTrack {\n    constructor(params, opt) {\n        super(params, opt);\n        this.records = [];\n        this.connector = new Connector();\n        if (Array.isArray(params)) {\n            //白板3.0多个录像文件要合并到一起创建一个DrawManager来处理。\n            this.params = params[0];\n        }\n        const container = this.params['container'];\n        const drawPluginParams = this.params.drawPluginParams || {};\n        this.drawManager = new App(Object.assign(Object.assign({ account: this.viewer, container: container, connector: this.connector, isRecordPlayer: true, platform: 'web' }, drawPluginParams), { nim: {} }));\n        window.drawPlugin = this.drawManager;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const [state, listOfDataList] = yield this.fetchMultiData();\n            if (state === 'error') {\n                this.state = 'error';\n                return 'error';\n            }\n            else {\n                this.records = listOfDataList.map(dataList => {\n                    return Object.assign(Object.assign({}, dataList), { records: dataList.records.map(data => {\n                            return {\n                                record: JSON.parse(data.str),\n                                time: data.time\n                            };\n                        }) });\n                });\n                const accountSet = new Set();\n                this.records.forEach((data) => {\n                    data.records.forEach(res => {\n                        if (res.record.type === 'snapshot' && res.record.value.uid) {\n                            accountSet.add(res.record.value.uid);\n                        }\n                        if (res.record.type === 'snapshotArr' && Array.isArray(res.record.value) && res.record.value.length > 0) {\n                            if (res.record.value[0].uid) {\n                                accountSet.add(res.record.value[0].uid);\n                            }\n                        }\n                    });\n                });\n                this.viewerArr = Array.from(accountSet);\n                if (this.viewerArr.length > 0) {\n                    this.setViewer(this.viewerArr[0]);\n                }\n                this.state = 'ready';\n                return 'ready';\n            }\n        });\n    }\n    setViewer(viewer) {\n        var _a;\n        this.viewer = viewer;\n        (_a = this.drawManager) === null || _a === void 0 ? void 0 : _a.setViewer(viewer);\n    }\n    doSetTrack(time, forward, jumpTo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._seekTo(time);\n        });\n    }\n    /**\n     * 跳转到正确的channel对应的录像。如果cid发生变化，则使用addRecordData重置录像\n     * @param time\n     */\n    _seekTo(time) {\n        let recordListToPlay;\n        for (let i = 0; i < this.records.length - 1; i++) {\n            if (time < this.records[i + 1].beginAt) {\n                recordListToPlay = this.records[i];\n                break;\n            }\n        }\n        if (recordListToPlay === undefined) {\n            recordListToPlay = this.records[this.records.length - 1];\n        }\n        if (recordListToPlay.cid !== this.currCid) {\n            this.drawManager.addRecordData(recordListToPlay.records);\n        }\n        this.currCid = recordListToPlay.cid;\n        this.drawManager.seekTo(time - recordListToPlay.beginAt);\n    }\n    showTrackCb(el) {\n        // this.drawManager.addRecordData(this.records)\n    }\n}\nclass Connector extends EventEmitter {\n    sendData() { }\n    broadcastData() { }\n    sendSyncRequest() { }\n}\n"],"sourceRoot":""}